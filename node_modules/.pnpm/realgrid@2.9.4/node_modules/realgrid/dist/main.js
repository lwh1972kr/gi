
/** 
 * RealGrid v2.9.4.1972
 * Copyright (C) 2013-2025 WooriTech Inc.
 * All Rights Reserved. 
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).RealGrid={})}(this,(function(t){"use strict";var e={name:"RealGrid2",version:"2.9.4.1972",license:"enterprise",code:null},i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},i(t,e)};function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}var r=function(){return r=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},r.apply(this,arguments)};function n(t,e,i,o){return new(i||(i=Promise))((function(r,n){function s(t){try{l(o.next(t))}catch(t){n(t)}}function a(t){try{l(o.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))}function s(t,e){var i,o,r,n,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(a){return function(l){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;n&&(n=0,a[0]&&(s=0)),s;)try{if(i=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function a(t,e,i){if(i||2===arguments.length)for(var o,r=0,n=e.length;r<n;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var l,h,u,c,d,p,f,_="$_hash",g="$_view",y="$_row",m="$_idx",b="$_foc",v="$_lev";t.ValueType=void 0,(l=t.ValueType||(t.ValueType={})).TEXT="text",l.NUMBER="number",l.BOOLEAN="boolean",l.DATETIME="datetime",l.OBJECT="object",l.CHAR="char",l.UNUM="unum",l.INT="int",l.UINT="uint",l.DATE="date",t.SortDirection=void 0,(h=t.SortDirection||(t.SortDirection={})).ASCENDING="ascending",h.DESCENDING="descending",h.NONE="none",t.SortCase=void 0,(u=t.SortCase||(t.SortCase={})).SENSITIVE="sensitive",u.INSENSITIVE="insensitive",function(t){t.ROWS="rows",t.ITEMS="items"}(c||(c={})),t.SortMode=void 0,(d=t.SortMode||(t.SortMode={})).AUTO="auto",d.EXPLICIT="explicit",t.FilterMode=void 0,(p=t.FilterMode||(t.FilterMode={})).AUTO="auto",p.EXPLICIT="explicit",t.RowGroupAdornments=void 0,(f=t.RowGroupAdornments||(t.RowGroupAdornments={})).NONE="none",f.HEADER="header",f.FOOTER="footer",f.SUMMARY="summary",f.BOTH="both";var w,C,x=function(e){return e==t.RowGroupAdornments.BOTH||e==t.RowGroupAdornments.HEADER};t.ValidationMode=void 0,(w=t.ValidationMode||(t.ValidationMode={})).ALWAYS="always",w.UPDATE="update",w.INSERT="insert",t.ValidationLevel=void 0,(C=t.ValidationLevel||(t.ValidationLevel={})).ERROR="error",C.WARNING="warning",C.INFO="info",C.IGNORE="ignore";var I,S,E,O,R,P,k,T,D,M,F,L,N,$,A,V,B,j,H,G,W,U,Y,z,q,K,X,Z,J,Q,tt={error:1,warning:2,info:3,ignore:4},et=function(t,e){return tt[t]-tt[e]};t.SummaryMode=void 0,(I=t.SummaryMode||(t.SummaryMode={})).NONE="none",I.AGGREGATE="aggregate",I.STATISTICAL="statistical",t.ColumnHeaderItemLocation=void 0,(S=t.ColumnHeaderItemLocation||(t.ColumnHeaderItemLocation={})).NONE="none",S.LEFT_EDGE="leftEdge",S.RIGHT_EDGE="rightEdge",S.TOP_EDGE="topEdge",S.BOTTOM_EDGE="bottomEdge",S.LEFT="left",S.RIGHT="right",S.TOP="top",S.BOTTOM="bottom",S.CENTER="center",function(t){t.NONE="none",t.HEAD="head",t.BODY="body",t.TAIL="tail"}(E||(E={})),t.GridFitStyle=void 0,(O=t.GridFitStyle||(t.GridFitStyle={})).NONE="none",O.EVEN="even",O.EVEN_FILL="evenFill",O.FILL="fill",t.GridCellType=void 0,(R=t.GridCellType||(t.GridCellType={})).DATA="data",R.HEADER="header",R.FOOTER="footer",R.SUMMARY="summary",R.INDICATOR="indicator",R.STATE="state",R.CHECK="check",R.HEAD="head",R.FOOT="foot",R.SUM="sum",R.FIXED_BAR="fixedbar",R.GROUP_HEADER="groupHeader",R.GROUP_FOOTER="groupFooter",R.GROUP_BAR="groupBar",R.GROUP_HEAD="groupHead",R.GROUP_FOOT="groupFoot",R.GROUP_PANEL="groupPanel",R.GROUP_COLUMN="groupColumn",R.GRID_EMPTY="gridEmpty",R.LAYOUT_HEADER="layoutHeader",R.FILTER="filter",R.INLINE_FILTER="inlineFilter",R.SCROLL_BAR="scrollBar",R.SCROLL_TRACK="scrollTrack",R.SCROLL_THUMB="scrollThumb",R.SCROLL_BUTTON="scrollButton",R.SCROLL_EDGE="scrollEdge",t.RowMaskType=void 0,(P=t.RowMaskType||(t.RowMaskType={})).NONE="none",P.ROW="row",P.DATA="data",P.FILL="fill",P.CELL="cell",t.TextInputCase=void 0,(k=t.TextInputCase||(t.TextInputCase={})).NORMAL="normal",k.UPPER="upper",k.LOWER="lower",k.DEFAULT="default",t.DefaultShowDate=void 0,(T=t.DefaultShowDate||(t.DefaultShowDate={})).NORMAL="normal",T.TODAY="today",T.TODAY_WHEN_NULL="todayWhenNull",T.DEFAULT="default",T.DEFAULT_WHEN_NULL="defaultWhenNull",t.SortStyle=void 0,(D=t.SortStyle||(t.SortStyle={})).NONE="none",D.EXCLUSIVE="exclusive",D.INCLUSIVE="inclusive",D.REVERSE="reverse",t.MenuItemType=void 0,(M=t.MenuItemType||(t.MenuItemType={})).NORMAL="normal",M.CHECK="check",M.RADIO="radio",M.SEPARATOR="separator",t.HandleVisibility=void 0,(F=t.HandleVisibility||(t.HandleVisibility={})).VISIBLE="visible",F.HOVERED="hovered",F.ALWAYS="always",F.HIDDEN="hidden",F.ACTIVE_OR_HOVERED="activeOrHovered",t.CellButton=void 0,(L=t.CellButton||(t.CellButton={})).NONE="none",L.ACTION="action",L.POPUP="popup",t.ButtonVisibility=void 0,(N=t.ButtonVisibility||(t.ButtonVisibility={})).ALWAYS="always",N.DEFAULT="default",N.VISIBLE="visible",N.HIDDEN="hidden",N.ROWFOCUSED="rowfocused",t.IconLocation=void 0,($=t.IconLocation||(t.IconLocation={})).LEFT="left",$.RIGHT="right",$.LEFT_EDGE="leftEdge",$.RIGHT_EDGE="rightEdge",$.TOP="top",$.BOTTOM="bottom",$.TOP_EDGE="topEdge",$.BOTTOM_EDGE="bottomEdge",$.CENTER="center",t.RefreshMode=void 0,(A=t.RefreshMode||(t.RefreshMode={})).ALL="all",A.VISIBLE_ONLY="visibleOnly",A.RECYCLE="recycle",t.ScrollOnEditing=void 0,(V=t.ScrollOnEditing||(t.ScrollOnEditing={})).CANCEL="cancel",V.COMMIT="commit",V.DEFAULT="default",t.ItemType=void 0,(B=t.ItemType||(t.ItemType={})).ROW="row",B.GROUP="group",B.FOOTER="footer",B.TREE="tree",t.SummaryType=void 0,(j=t.SummaryType||(t.SummaryType={})).COUNT="count",j.SUM="sum",j.MAX="max",j.MIN="min",j.AVG="avg",j.VAR="var",j.VARP="varp",j.STDEV="stdev",j.STDEVP="stdevp",j.DATACOUNT="datacount",j.DATAAVG="dataavg",t.ExpanderVisibility=void 0,(H=t.ExpanderVisibility||(t.ExpanderVisibility={})).ALWAYS="always",H.DEFAULT="default",H.NONE="none",t.ExitGridWhenTab=void 0,(G=t.ExitGridWhenTab||(t.ExitGridWhenTab={})).ROW="row",G.GRID="grid",G.NONE="none",t.FocusType=void 0,(W=t.FocusType||(t.FocusType={})).LAYER="layer",W.LINE="line",t.EdgeMark=void 0,(U=t.EdgeMark||(t.EdgeMark={})).LEFT_TOP="leftTop",U.LEFT_BOTTOM="leftBottom",U.RIGHT_TOP="rightTop",U.RIGHT_BOTTOM="rightBottom",t.GroupShowMode=void 0,(Y=t.GroupShowMode||(t.GroupShowMode={})).EXPAND="expand",Y.COLLAPSE="collapse",Y.ALWAYS="always",t.SyncGridHeight=void 0,(z=t.SyncGridHeight||(t.SyncGridHeight={})).NONE="none",z.OVER="over",z.ALWAYS="always",t.InlineFilterOperator=void 0,(q=t.InlineFilterOperator||(t.InlineFilterOperator={})).EQUAL="equal",q.NOT_EQUAL="notEqual",q.CONTAINS="contains",q.NOT_CONTAINS="notContains",q.STARTS_WITH="startsWith",q.ENDS_WITH="endsWith",q.RESET="reset",q.GREATER="greater",q.GREATER_EQUAL="greaterEqual",q.LOWER="lower",q.LOWER_EQUAL="lowerEqual",q.BETWEEN="between",q.EMPTY="empty",t.TreeExpanderIconStyle=void 0,(K=t.TreeExpanderIconStyle||(t.TreeExpanderIconStyle={})).TRIANGLE="triangle",K.SQUARE="square",t.NullsOrder=void 0,(X=t.NullsOrder||(t.NullsOrder={})).FIRST="first",X.LAST="last",X.DEFAULT="default",t.ExpandWhenSetData=void 0,(Z=t.ExpandWhenSetData||(t.ExpandWhenSetData={})).EXPAND="expand",Z.COLLAPSE="collapse",Z.REMAIN_AND_EXPAND="remainAndExpand",Z.REMAIN_AND_COLLAPSE="remainAndCollapse",t.TimeCategory=void 0,(J=t.TimeCategory||(t.TimeCategory={})).NONE="none",J.HOUR="hour",J.MINUTE="minute",J.SECOND="second",J.AUTO="auto",t.LayoutDirection=void 0,(Q=t.LayoutDirection||(t.LayoutDirection={})).VERTICAL="vertical",Q.HORIZONTAL="horizontal";var it,ot=function(){function t(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),this.x=t,this.y=e,this.width=i,this.height=o}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},set:function(t){var e=t-this.x;this.x+=e,this.width-=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},set:function(t){var e=t-(this.x+this.width);this.width+=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},set:function(t){var e=t-this.y;this.y+=e,this.height-=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){var e=t-(this.y+this.height);this.height+=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.width||0===this.height},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.leftBy=function(t){return this.x+=t,this.width-=t,this},t.prototype.topBy=function(t){return this.y+=t,this.height-=t,this},t.prototype.bottomBy=function(t){return this.height+=t,this},t.prototype.setEmpty=function(){return this.width=this.height=0,this},t.prototype.move=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e,this},t.prototype.set=function(t,e,i,o){return this.x=t,this.y=e,this.width=i,this.height=o,this},t.prototype.setWidth=function(t){return this.width=t,this},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.inflate=function(t,e,i,o){return void 0===t&&(t=0),void 0===e&&(e=void 0),void 0===i&&(i=void 0),void 0===o&&(o=void 0),e=void 0!==e?e:t,i=void 0!==i?i:t,o=void 0!==o?o:e,t&&(this.left=this.x-t),e&&(this.top=this.y-e),i&&(this.right=this.right+i),o&&(this.bottom=this.bottom+o),this},t.prototype.offset=function(t,e){return this.x+=t,this.y+=e,this},t.prototype.union=function(t){var e=this.clone();return e.left=Math.min(this.x,t.x),e.right=Math.max(this.right,t.right),e.top=Math.min(this.y,t.y),e.bottom=Math.max(this.bottom,t.bottom),e},t.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+"}"},t.Temp=new t,t}(),rt="undefined"!=typeof window?window:{},nt={ua:(it="undefined"!=typeof window&&window.navigator||{}).userAgent||"",platform:(it.platform||"").toUpperCase()},st=nt.ua,at=nt.platform,lt=at.indexOf("MAC")>=0,ht=at.indexOf("WIN")>=0,ut=!!rt.chrome,ct=void 0!==rt.InstallTrigger,dt=!!rt.safari||!ut&&st.indexOf("Safari")>=0,pt=/iPad|iPhone|iPod/.test(st)&&!rt.MSStream,ft=!!st.match(/Trident.*rv\:11\./),_t=-1!==st.indexOf("MSIE 10"),gt=-1!==st.indexOf("MSIE 9"),yt=ft||_t||gt,mt=Date.now(),bt=void 0,vt=void 0,wt=void 0,Ct=void 0,xt=void 0;function It(t){return t&&t.ownerDocument&&(t.ownerDocument.defaultView||t.ownerDocument.parentWindow)}function St(t){return t&&t.ownerDocument}function Et(t){return t.defaultView||t.parentWindow}var Ot,Rt=function(){function t(){}return t.stopEvent=function(t,e){void 0===e&&(e=!1),t.preventDefault?(t.preventDefault(),t.stopPropagation()):t.returnValue=!1,e&&t.stopImmediatePropagation()},t.setDebugging=function(e,i,o){t.$$_debugging=i,t.$$_keyLog=o},t.isDebugging=function(){return t.$$_debugging},t.setSlotMode=function(e){t.$$_slotMode=e},t.setLanguage=function(e){t.$$_lang=e},Object.defineProperty(t,"language",{get:function(){return this.$$_lang},enumerable:!1,configurable:!0}),t.isSlotMode=function(){return t.$$_slotMode},t.log=function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t.isDebugging()&&console.log(e,i)},t.keyLog=function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t.$$_keyLog&&console.log(e,i)},t.isArray=function(t){return Array.isArray(t)},t.isObject=function(t){return null!=t&&"object"==typeof t},t.makeArray=function(t,e){return void 0===e&&(e=!1),null!=t?Array.isArray(t)?t:[t]:e?[]:void 0},t.isNumber=function(t){return"number"==typeof t},t.getNumber=function(t,e){return isNaN(parseFloat(t))?e:parseFloat(t)},t.getTimer=function(){return(new Date).getTime()-mt},t.isWhiteSpace=function(t){return!t||!t.trim()},t.pad=function(t,e,i){return e=Math.max(e||2,1),i=i||"0",new Array(e-String(t).length+1).join(i)+t},t.pick=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i,o=t.length,r=0;r<o;r++)if(null!=(i=t[r]))return i},t.included=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var o=e.length,r=0;r<o;r++)if(e[r]==t)return!0;return!1},t.valueIn=function(t,e){if("object"==typeof e)for(var i=Object.keys(e),o=0;o<i.length;o++)if(e[i[o]]===t)return!0;return!1},t.compareTextValue=function(t,e,i,o){if(t===e)return!0;var r=String(t),n=null==e?void 0:String(e);return!r&&!n||!(!r||!n)&&(i||(r=r.toLowerCase(),n=n.toLowerCase()),o?n.indexOf(r)>=0:r==n)},t.cast=function(t,e){return t instanceof e?t:null},t.toInt=function(t,e){var i=parseInt(t,e||10);return isNaN(i)?0:i},t.toFloat=function(t){var e=parseFloat(t);return isNaN(e)?0:e},t.hex=function(t,e,i){void 0===e&&(e=2),void 0===i&&(i="0"),e=Math.max(e||2,1);var o=t.toString(16);return i=i||"0",new Array(e-o.length+1).join(i)+o},t.deepCopy=function(e){if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e);for(var i=t.isArray(e)?[]:{},o=0,r=Object.keys(e);o<r.length;o++){var n=r[o];e.hasOwnProperty(n)&&(i[n]=t.deepCopy(e[n]))}return i},t.extendObj=function(t,e){if(null==t||"object"!=typeof t||null==e||"object"!=typeof e)return e;for(var i=0,o=Object.keys(t);i<o.length;i++){var r=o[i];t.hasOwnProperty(r)&&void 0===e[r]&&(e[r]=t[r])}return e},t.getBounds=function(t){var e=new ot;return e.x=t.offsetLeft,e.y=t.offsetTop,e.width=t.offsetWidth,e.height=t.offsetHeight,e},t.toStr=function(t){return"number"==typeof t?isNaN(t)?"":String(t):null!=t?String(t):""},t.setBounds=function(t,e,i,o,r){var n=t.style;n.left=e+"px",n.top=i+"px",n.width=o+"px",n.height=r+"px"},t.getClientRect=function(e){var i=e.getBoundingClientRect(),o=t.getZoom(e),r=new ot(i.left/o,i.top/o,i.width/o,i.height/o);if("BODY"===e.tagName){var n=e.ownerDocument.defaultView;r.height=Math.max(r.height,e.scrollHeight,n.innerHeight),r.width=Math.max(r.width,e.scrollHeight,n.innerWidth)}return r.cx=e.offsetLeft,r.cy=e.offsetTop,r},t.adjustZoom=function(e){for(var i=1,o=e;o;){if(o.style.zoom){var r=getComputedStyle(o).zoom;if(isNaN(parseFloat(r))){i=1;break}i*=parseFloat(r)}o=o.parentElement}t.$$_zoom=100*i/100},t.getZoom=function(e,i){void 0===i&&(i=!1);var o=e.offsetWidth||e.scrollWidth,r=e.offsetHeight||e.scrollHeight,n=e.getBoundingClientRect(),s=NaN;try{if(n.height&&n.width?s=(n.height/r+n.width/o)/2:n.height?s=n.height/r:n.width&&(s=n.width/o),isNaN(s)){var a=getComputedStyle(e).zoom;a&&(s=parseFloat(a))}if(isNaN(s))throw new Error("zomm check fail")}catch(t){s=1}return i&&t.adjustZoom(e),Math.round(100*s)/100},t.getMargin=function(t){var e=0,i=0;if(t instanceof It(t).HTMLBodyElement)for(var o=t;o;){var r=getComputedStyle(o);"static"===r.position&&(e+=parseFloat(r.marginLeft)||0,i+=parseFloat(r.marginTop)||0),o=o.parentElement}return{x:e,y:i}},t.getChildIndex=function(t){if(t){var e=t.parentNode;if(e)for(var i=e.children,o=i.length;o--;)if(i[o]===t)return o}return-1},t.clearChildren=function(t){for(var e;e=t.lastChild;)t.removeChild(e)},t.clearElements=function(e){for(var i;i=e.lastChild;)t.clearElements(i),e.removeChild(i)},t.addChild=function(t,e){return!(!t||!e||e.parentNode===t)&&(t.appendChild(e),!0)},t.removeChild=function(t,e){return!(!t||!e||e.parentNode!==t)&&(t.removeChild(e),!0)},t.disableSelection=function(t){var e=t.style;e["-moz-user-select"]="-moz-none",e["-khtml-user-select"]="none",e["-webkit-user-select"]="none",e["-o-user-select"]="none",e["-ms-user-select"]="none",e["user-select"]="none"},t.setMobile=function(t){bt=t},t.setIECompatMode=function(t){xt=t},t.setTablet=function(t){wt=t},t.isMobile=function(){return void 0!==bt?bt:(void 0===vt&&(vt=this.$_checkMobile()),vt)},t.isIEMode=function(){return!t.isMobile()&&!t.isChromium&&xt&&!1===navigator.msPointerEnabled},t.isTablet=function(){return void 0!==wt?wt:(void 0===Ct&&(Ct=this.$_checkTablet()),Ct)},t.$_checkTablet=function(){return t.isMobile()&&/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(st.toLowerCase())},t.$_checkMobile=function(){var t=!1;return(st.match(/Android/i)||st.match(/webOS/i)||st.match(/iPhone/i)||st.match(/iPad/i)||st.match(/iPod/i)||st.match(/BlackBerry/i)||st.match(/Windows Phone/i))&&(t=!0),t||(t="ontouchstart"in window&&st.indexOf("Macintosh")>=0),t},t.getBrowserSize=function(e){var i=e?e.ownerDocument:document,o=i.defaultView,r=i.body,n=i.documentElement,s=t.getZoom(r);return{width:o.innerWidth/s||n.clientWidth||r.clientWidth,height:o.innerHeight/s||n.clientHeight||r.clientHeight}},t.move=function(t,e,i){t.style.left=e+"px",t.style.top=i+"px"},t.htmlEncode=function(t){return document.createElement("a").appendChild(document.createTextNode(t)).parentNode.innerHTML},t.detach=function(t){return t&&t.parentNode&&t.parentNode.removeChild(t),null},t.getSize=function(e){return t.getClientRect(e)},t.getScrolled=function(t){var e=t.body,i=Et(t),o=t.documentElement;return{sx:i.pageXOffset||o.scrollLeft||e.scrollLeft,sy:i.pageYOffset||o.scrollTop||e.scrollTop}},t.getOffset=function(e){var i=t.getZoom(e),o=e.ownerDocument,r=o.defaultView,n=t.getClientRect(e),s=o.body,a=o.documentElement,l=r.pageYOffset||a.scrollTop||s.scrollTop,h=r.pageXOffset||a.scrollLeft||s.scrollLeft;1==i&&i!=t.$$_zoom?(l/=t.$$_zoom,h/=t.$$_zoom):(l/=i,h/=i);var u=a.clientTop||s.clientTop||0,c=a.clientLeft||s.clientLeft||0,d=n.left+h-c,p=n.top+l-u;return{x:Math.round(d),y:Math.round(p)}},t.isAncestorOf=function(t,e,i){var o;if(e instanceof HTMLElement)o=e;else for(var r=this.getComposedPath(i);r.length;){var n=r.shift();if(n instanceof HTMLElement){o=n;break}}for(;o;){if(o==t)return!0;o=o.parentElement}return!1},t.getComposedPath=function(t){if(t.composedPath)return t.composedPath();for(var e=t.target,i=[];e;)i.push(e),e=e.parentElement||e.parentNode;return i},t.equalNumbers=function(t,e){return isNaN(t)&&isNaN(e)||!isNaN(t)&&t==e},t.equalArrays=function(t,e){if(t===e)return!0;if(null==t||null==e)return!1;var i=t.length;if(i!=e.length)return!1;for(var o=0;o<i;++o)if(t[o]!==e[o])return!1;return!0},t.equalObjects=function(t,e){return t==e||JSON.stringify(t)===JSON.stringify(e)},t.isLeapYear=function(t){return t%4==0&&t%100!=0||t%400==0},t.incMonth=function(e,i){var o=e.getDate();return e.setDate(1),e.setMonth(e.getMonth()+i),e.setDate(Math.min(o,t.month_days[t.isLeapYear(e.getFullYear())?1:0][e.getMonth()])),e},t.incYear=function(e,i){var o=e.getDate();return e.setDate(1),e.setFullYear(e.getFullYear()+i),e.setDate(Math.min(o,t.month_days[t.isLeapYear(e.getFullYear())?1:0][e.getMonth()])),e},t.setClassName=function(t,e){(e=e||"")!=t.className&&(t.className=e)},t.addClassName=function(t,e){if(e=e||"",t.classList)t.classList.add(e);else{var i=t.className.split(" ");i.indexOf(e)<0&&i.push(e),t.className=i.join(" ")}},t.removeClassName=function(t,e){if(t.classList)t.classList.remove(e);else{var i,o=t.className.split(" ");(i=o.indexOf(e))>=0&&o.splice(i,1),t.className=o.join(" ")}},t.setStyle=function(t,e){var i=e.style;for(var o in t)null!=t[o]?i[o]=t[o]:(i.removeProperty?i.removeProperty(o):i.removeAttribute&&i.removeAttribute(o),i[o]="")},t.getTextLength=function(t){for(var e=0,i=0,o=0;t&&(i=t.charCodeAt(o));o++)e+=i>>7?2:1;return e},t.escapeRegExp=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},t.isEmpty=function(t){return t&&Object.keys(t).length>0},t.isPassive=function(){if(null===t.$_supportPassive){t.$_supportPassive=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){t.$_supportPassive=!0}}))}catch(e){t.log("passive not support")}}return t.$_supportPassive},t.hangulToChosungAll=function(e){for(var i="",o=0;o<e.length;o++){var r=e.charCodeAt(o)-44032;i+=r>-1&&r<11172?t.cho[Math.floor(r/588)]:e[o]}return i},t.hangulToChosung=function(e){var i={cho:e,org:e};if(/[ㄱ-힝]/.test(e)){var o=t.cho,r=e.charCodeAt(0);r>=12593&&r<=12622&&(i.org=void 0),(r-=44032)>=0&&r<11172&&(i.cho=o[Math.floor(r/588)])}return i},t.addQuot=function(t,e){return t&&(t.indexOf("\n")>=0||t.indexOf("\r\n")>=0||'"'==t.charAt(0))&&(t='"'+(t=t.replace(/\"/g,'""'))+'"'),t},t.addQuatation=function(t,e,i,o){return null!=t&&((i||o)&&(i&&t&&(t=t.replace(/\n/g,i)),o&&t&&(t=t.replace(/\r/g,o))),(e||t.indexOf("\n")>=0||t.indexOf(",")>=0||t.indexOf('"')>=0)&&(t='"'+t.replace(/\"/g,'""')+'"')),null===t?"":t},t.isClickableTemplate=function(t,e){return Array.prototype.some.call(t.querySelectorAll("input, textarea, a, select, button, [tabindex]"),(function(t){return e===t}))},t.isFocusableTemplate=function(t,e){return Array.prototype.some.call(t.querySelectorAll("input, textarea, select"),(function(t){var i=t.type;return t===e&&"button"!==i&&"checkbox"!==i}))},t.objectToCssText=function(t){return"string"==typeof t?t:t?Object.keys(t).map((function(e){return"".concat(e.split(/(?=[A-Z])/).join("-").toLowerCase(),":").concat(t[e])})).join(";"):null},t.getLast=function(t){return t[t.length-1]},t.camelToHyphen=function(t,e,i){return void 0===i&&(i="-"),t?e?t.split(/(?=[A-Z])/).join(i).toUpperCase():t.split(/(?=[A-Z])/).join(i).toLowerCase():t},t.find=function(t,e){for(var i=0;i<t.length;i++)if(e.call(null,t[i],i,t))return t[i]},t.isInteractive=function(t){var e=It(t);return t instanceof(null==e?void 0:e.HTMLInputElement)&&"checkbox"===t.type||t instanceof(null==e?void 0:e.HTMLAnchorElement)},t.assign=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var o=Object(t),r=0;r<e.length;r++){var n=e[r];if(null!=n)for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(o[s]=n[s])}return o},t.setInert=function(t,e){e?t.removeAttribute("inert"):t.setAttribute("inert","")},t.insertBefore=function(t,e,i){if(e.nextElementSibling!==i)return t.insertBefore(e,i)},t.ctrlKey=function(e){var i=t.isMac||t.isiOS;return e&&(i&&e.metaKey||!i&&e.ctrlKey)},t.specialKey=function(t){return t&&(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey)},t.resetPosition=function(e,i,o,r,n,s,a,l){var h=St(o),u=It(o),c=t.getBrowserSize(),d=t.getSize(e),p=i?t.getSize(i):{left:0,top:0},f=t.getZoom(h.body),_=c.width,g=c.height,y=t.getSize(o),m=u.pageXOffset||h.documentElement.scrollLeft,b=u.pageYOffset||h.documentElement.scrollTop;m/=f,b/=f,h.documentElement.scrollWidth>h.documentElement.clientWidth&&(g-=18),h.documentElement.scrollHeight>h.documentElement.clientHeight&&(_-=18);var v=t.getMargin(e);r+=v.x,n+=v.y,r+=p.left-d.left,n+=p.top-d.top,(t.ieTen||t.ieOld)&&(r+=h.documentElement.scrollLeft,n+=h.documentElement.scrollTop),n+y.height>g+b&&a&&(n=n-a.height-y.height)<0&&(n=g-y.height-2),t.isMobile()&&!t.isTablet()||!a||(d.bottom<a.bottom+y.height||g+b<a.bottom+y.height)&&(n=a.top-y.height-d.top-2),l?r=Math.max(0,r+s-y.width):r+y.width>_+m&&(r=_-y.width),t.isMobile()&&!t.isTablet()||o.offsetParent||(r+=h.documentElement.offsetLeft,n+=h.documentElement.offsetTop),t.move(o,Math.max(0,r),Math.max(0,n))},t.setEvent=function(t,e){Object.keys(e).forEach((function(i){0===i.indexOf("on")&&(t[i]=e[i])}))},t.assignConfig=function(t,e){e.columns&&t.setColumns(e.columns),e.layout&&t.setColumnLayout(e.layout),e.rowStyleCallback&&t.setRowStyleCallback(e.rowStyleCallback),e.cellStyleCallback&&t.setCellStyleCallback(e.cellStyleCallback),e.contextMenu&&t.setContextMenu(e.contextMenu)},t.isIE=yt,t.ieAll=yt,t.ieOld=gt,t.isMac=lt,t.isWin=ht,t.isSafari=dt,t.isChrome=ut,t.isFirefox=ct,t.ieTen=_t,t.ieNine=gt,t.isiOS=pt,t.isChromium=ut,t.TextProp=t.ieAll?"innerText":"textContent",t.month_days=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]],t.cho=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],t.colonreg=/;(?=(?:[^"]*"[^"]*")*(?![^"]*"))/,t.$_INVISIBLE_EDIT_BOUNDS=new ot(-1e4,-1e4,100,100),t.$$_debugging=!1,t.$$_keyLog=!1,t.$$_slotMode=!1,t.$$_zoom=1,t.$_supportPassive=null,t}(),Pt=function(){function t(){}return t.encode=function(e){var i,o,r,n,s,a,l,h="",u=0,c=t.CHARACTERS;for(e=t.utf8_encode(e);u<e.length;)n=(i=e.charCodeAt(u++))>>2,s=(3&i)<<4|(o=e.charCodeAt(u++))>>4,a=(15&o)<<2|(r=e.charCodeAt(u++))>>6,l=63&r,isNaN(o)?a=l=64:isNaN(r)&&(l=64),h=h+c.charAt(n)+c.charAt(s)+c.charAt(a)+c.charAt(l);return h},t.decode=function(e){var i,o,r,n,s,a,l="",h=0,u=t.CHARACTERS;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<e.length;)i=u.indexOf(e.charAt(h++))<<2|(n=u.indexOf(e.charAt(h++)))>>4,o=(15&n)<<4|(s=u.indexOf(e.charAt(h++)))>>2,r=(3&s)<<6|(a=u.indexOf(e.charAt(h++))),l+=String.fromCharCode(i),64!=s&&(l+=String.fromCharCode(o)),64!=a&&(l+=String.fromCharCode(r));return l=t.utf8_decode(l)},t.utf8_encode=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?e+=String.fromCharCode(o):o>127&&o<2048?(e+=String.fromCharCode(o>>6|192),e+=String.fromCharCode(63&o|128)):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128),e+=String.fromCharCode(63&o|128))}return e},t.utf8_decode=function(t){for(var e="",i=0,o=0,r=0,n=0,s=t.length;i<s;)(o=t.charCodeAt(i))<128?(e+=String.fromCharCode(o),i++):o>191&&o<224?(r=t.charCodeAt(i+1),e+=String.fromCharCode((31&o)<<6|63&r),i+=2):(r=t.charCodeAt(i+1),n=t.charCodeAt(i+2),e+=String.fromCharCode((15&o)<<12|(63&r)<<6|63&n),i+=3);return e},t.CHARACTERS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t.btoa=function(e){for(var i,o,r,n,s=t.CHARACTERS,a="",l=0,h=(e=String(e)).length%3;l<e.length;){if((o=e.charCodeAt(l++))>255||(r=e.charCodeAt(l++))>255||(n=e.charCodeAt(l++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");i=o<<16|r<<8|n,a+=s.charAt(i>>18&63)+s.charAt(i>>12&63)+s.charAt(i>>6&63)+s.charAt(63&i)}return h?a.slice(0,h-3)+"===".substring(h):a},t}();t.RowState=void 0,(Ot=t.RowState||(t.RowState={})).NONE="none",Ot.CREATED="created",Ot.UPDATED="updated",Ot.DELETED="deleted",Ot.CREATE_AND_DELETED="createAndDeleted";var kt=function(e){return e==t.RowState.DELETED||e==t.RowState.CREATE_AND_DELETED},Tt=function(){function t(t){this.format=t}return Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=t,this.parse(t))},enumerable:!1,configurable:!0}),t.prototype.toBool=function(t){return!!this.toBoolStrict(t)},t.prototype.toBoolEx=function(t){var e=this._sensitive?t:t.toLowerCase(),i=this.$_toBool(t);return null!=i?i:e?Boolean(e):void 0},t.prototype.toBoolStrict=function(t){return this.$_toBool(t)},t.prototype.toText=function(t){return t?this._trueText:this._falseText},t.prototype.$_toBool=function(t){if(this._values){var e=this._sensitive?t:t.toLowerCase();if(e in this._values)return this._values[e]}},t.prototype.parse=function(t){var e=this;if(this._values={},t){this._trueText=this._falseText=null;var i=t.split(/[;\:]/),o=this._sensitive="0"!=i[2],r=i[0]?o?i[0].split(","):i[0].toLowerCase().split(","):null,n=i[1]?o?i[1].split(","):i[1].toLowerCase().split(","):null;r&&r.forEach((function(t){e._values[t]=!1,e._falseText=e._falseText||t})),n&&n.forEach((function(t){e._values[t]=!0,e._trueText=e._trueText||t}))}else this._values[this._trueText="true"]=!0,this._values[this._falseText="false"]=!1},t.Default=new t("false,f,0:true,t,1:0"),t}(),Dt=function(){function t(t){this._format=null,this._baseYear=2e3,this._patterns=[],this._amText="AM",this._pmText="PM",this._matchPattern=!1,t&&(this.format=t)}return Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(t){if(t!=this._format){if(!t)throw new Error("Invalid empty date format");this._format=t,this.parseFormat(t)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseYear",{get:function(){return this._baseYear},set:function(t){t!=this._baseYear&&(this._baseYear=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t)},enumerable:!1,configurable:!0}),t.prototype.parse=function(e,i){try{for(var o=0,r=1,n=1,s=0,a=0,l=0,h=0,u=0,c=0,d=this._patterns.length,p=0,f=e.length,_=this._matchPattern,g=this.getStrPattern(e),y=0;y<d&&p<f;y++){var m=this._patterns[y],b=m.c,v=m.len;switch(b){case"y":o=parseInt(_?g[y]:e.substr(p,v));break;case"M":r=parseInt(_?g[y]:e.substr(p,v));break;case"d":n=parseInt(_?g[y]:e.substr(p,v));break;case"a":if(this._amText&&(_?g[y]===this._amText:e.indexOf(this._amText,p)==p))u=12,v=this._amText.length;else if(_?"am"===g[y].toLocaleLowerCase():"am"===e.substr(p,2).toLocaleLowerCase())u=12,v=2;else if(this._pmText&&(_?g[y]===this._pmText:e.indexOf(this._pmText,p)==p))c=12,v=this._pmText.length;else{if(_?"pm"!==g[y].toLocaleLowerCase():"pm"!==e.substr(p,2).toLocaleLowerCase()){if(i)throw"Invalid date value: "+e;return null}c=12,v=2}break;case"H":case"h":s=parseInt(_?g[y]:e.substr(p,v));break;case"m":a=parseInt(_?g[y]:e.substr(p,v));break;case"s":l=parseInt(_?g[y]:e.substr(p,v));break;case"S":h=parseInt(_?g[y]:e.substr(p,v));break;case".":case"/":case"-":case":":case" ":if(t.DATE_SEPARATORS.indexOf(_?g[y]:e.charAt(p))<0){if(i)throw"Invalid date value: ".concat(e,", invalid token[").concat(_?g[y]:e.charAt(p),"]");return null}break;default:if(i)throw"Invalid date value: ".concat(e,", invalid pattern[").concat(_?g[y]:e.charAt(p),"]");return null}p+=v}o<100&&(o+=this._baseYear),u>0?12==s&&(s=0):c>0&&s<12&&(s+=12);var w=new Date(o,r-1,n,s,a,l,h);return w.getFullYear()===o&&w.getMonth()===r-1&&w.getDate()===n?w:null}catch(t){if(i)throw t;return null}},t.prototype.parseFormat=function(t){var e=this,i=0,o=function(t){t&&!isNaN(parseInt(t))&&(e._baseYear=parseInt(t))},r=function(t){if(t){var i=t.split(",");i.length>0&&i[0]&&(e._amText=i[0]||e._amText),i.length>1&&i[1]&&(e._pmText=i[1]||e._pmText)}},n=t.split(";");if(n.length>2)o(n[1]),r(n[2]);else if(n.length>1){var s=n[1];isNaN(parseInt(s))?s&&r(s):o(s)}var a,l,h,u=n[0],c=u.length,d=0;for(this._patterns=[];d<c;)if(a=d,l=u.charAt(d),Rt.isWhiteSpace(l)){for(d++;d<c&&Rt.isWhiteSpace(u.charAt(d));)d++;this._patterns.push({c:" ",p:a,len:d-a}),i++}else{switch(h=0,l){case"y":4!=(h=this.getPattern(u,d,l))&&2!=h&&this.throwInvalidFormat(u);break;case"M":case"d":case"H":case"h":case"m":case"s":case"S":h=this.getPattern(u,d,l);break;case".":case"/":case"-":case":":i++;case"a":1!=(h=this.getPattern(u,d,l))&&this.throwInvalidFormat(u);break;default:this.throwInvalidFormat(u)}h>0&&(this._patterns.push({c:l,p:d,len:h}),d+=h)}this._matchPattern=2*i+1===this._patterns.length},t.prototype.throwInvalidFormat=function(t){throw new Error("Invalid date format: "+t)},t.prototype.throwInvalidValue=function(t){throw new Error("Invalid date format: "+t)},t.prototype.getPattern=function(t,e,i){for(var o=1;++e<t.length&&t.charAt(e)==i;)o++;return o},t.prototype.getStrPattern=function(t){for(var e=t.length,i=0,o=0,r=[];e>i;){var n=t[i];if(/-|\.|\/|:| /.test(n))if(r.push(t.substr(o,i-o)),r.push(n),Rt.isWhiteSpace(n)){for(;Rt.isWhiteSpace(t[++i])&&e>i;);o=i}else o=i+1;i++}return r.push(t.substr(o,i-o)),r},t.DATE_SEPARATORS="./-: ",t}(),Mt=function(){function t(t){this._format="",this._type=0,this._parser=new Dt(null),this.format=t}return t.initialize=function(){t.Default.amText="AM",t.Default.pmText="PM",t.Default.baseYear=2e3},t.getReader=function(e){var i=t.Formatters[e];return i||(t.Formatters[e]=i=new t(e)),i},t.getSimpleDateNull=function(t){if(t instanceof Date)return t;if("number"==typeof t)return new Date(t);if("string"!=typeof t)return null;var e=(t=8===t.length&&/^[0-9]*$/.test(t)?t.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3"):t).split(/[.//-]/);if(3!=e.length)return null;var i=parseInt(e[0]),o=parseInt(e[1])-1,r=parseInt(e[2]);return i==(t=new Date(i,o,r)).getFullYear()&&o==t.getMonth()&&r==t.getDate()?t:null},Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=t,this.parse(t))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"amText",{get:function(){return this._parser.amText},set:function(t){this._parser.amText=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pmText",{get:function(){return this._parser.pmText},set:function(t){this._parser.pmText=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseYear",{get:function(){return this._parser.baseYear},set:function(t){this._parser.baseYear=t},enumerable:!1,configurable:!0}),t.prototype.toDate=function(t,e){if(!t)return null;var i=null;switch(this._type){case 0:i=this._parser.parse(t,e);break;case 2:var o=parseInt(t);i=new Date(o);break;default:i=new Date(t)}return i&&!isNaN(i.getTime())?i:null},t.prototype.parse=function(e){if(e){if(e.indexOf("T")>0||e.indexOf("Z")>0||/([+\-])(\d\d)?(:)?(\d\d)?$/.test(e))this._type=t.Formats.indexOf("iso");else{var i=e.toLowerCase();this._type=Math.max(0,t.Formats.indexOf(i))}0==this._type&&(this._parser.format=e)}},t.Formats=["custom","iso","timestamp","platform"],t.Default=new t("yyyy/MM/dd HH:mm:ss"),t.Formatters={},t}();Mt.initialize();var Ft=0,Lt=function(){function t(t){this.$_disposed=!1,t||(this.$_hash=Ft++)}return t.prototype.dispose=function(){return this.$_disposed||this.$_disposing||(this.$_disposed=!0,this.$_disposing=!0,this._doDispose()),null},t.prototype._doDispose=function(){},Object.defineProperty(t.prototype,"disposing",{get:function(){return this.$_disposing},enumerable:!1,configurable:!0}),t.prototype.isMe=function(t){return t==this.$_hash},t.prototype.$_getters=function(t){for(var e=[],i=Object.getOwnPropertyNames(t),o=0,r=i.length;o<r;o++){var n=i[o],s=Object.getOwnPropertyDescriptor(t,n);s&&s.get&&e.push(n)}return e},t.prototype.doAssignSimple=function(t){return!1},t.prototype.assignFrom=function(e){var i=Object.getPrototypeOf(this);if(e instanceof t)for(var o=Object.getPrototypeOf(e),r={};o&&o.constructor!=t;){for(var n=this.$_getters(o),s=0,a=n.length;s<a;s++){if(!((c=n[s])in r))if(r[c]=null,d=Object.getOwnPropertyDescriptor(i,c)){if(d.set)(u=Object.getOwnPropertyDescriptor(o,c).get)&&d.set.call(this,u.call(e))}else for(var l=Object.getPrototypeOf(i);l;){var h=Object.getOwnPropertyDescriptor(l,c);if(h){var u;if(h.set)(u=Object.getOwnPropertyDescriptor(o,c).get)&&h.set.call(this,u.call(e));l=null}else l=Object.getPrototypeOf(l)}}o=Object.getPrototypeOf(o)}else if(!this.doAssignSimple(e))for(var c in e){var d;if(d=Object.getOwnPropertyDescriptor(i,c))d.set&&d.set.call(this,e[c]);else for(l=Object.getPrototypeOf(i);l;){var p=Object.getOwnPropertyDescriptor(l,c);p?(p.set&&p.set.call(this,e[c]),l=null):l=Object.getPrototypeOf(l)}}},t.prototype.extend=function(t){for(var e in t)this.hasOwnProperty(e)&&(this[e]=t[e])},t.prototype.toProxy=function(e){void 0===e&&(e=!0);for(var i={},o=Object.getPrototypeOf(this),r=[];o&&o.constructor!=t;){for(var n=this.$_getters(o),s=0,a=n.length;s<a;s++){var l=n[s],h=Object.getOwnPropertyDescriptor(o,l);if(h){if(h.get&&h.set&&r.indexOf(l)<0){r.push(l);var u=h.get.call(this);(e||void 0!==u)&&(null!==u&&"object"==typeof u&&Object.getPrototypeOf(u).hasOwnProperty("toProxy")?i[l]=u.toProxy():i[l]=u)}}else for(var c=Object.getPrototypeOf(o);c;){var d=Object.getOwnPropertyDescriptor(c,l);if(d){if(d.get&&d.set&&r.indexOf(l)<0){r.push(l);u=d.get.call(this);(e||void 0!==u)&&(i[l]=u)}c=null}else c=Object.getPrototypeOf(c)}}o=Object.getPrototypeOf(o)}return i},t}(),Nt=function(t){function e(e,i){var o=t.call(this,e)||this;return o.message=e,o.tokenPos=i,o}return o(e,t),e}(Error),$t=function(t){function e(e){var i=t.call(this,e)||this;return i.message=e,i}return o(e,t),e}(Error),At=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=[],o=0,r=t;o<r.length;o++){var n=r[o];i[n]=!0}return i},Vt=At(26,27),Bt=At(40,45,46,47,48,49,50,51,52,53,54,55,56,57,41,42,43,44),jt=At(4,5,18,19),Ht=At(11,3,2,14,15,16,17),Gt=function(){function t(){this.IS_IDENT=[],this.IS_INTEGER=[],this.IS_NUMBER=[],this.IS_WHITE=[],this.IS_END=[],this.QUOTATION='"'.charCodeAt(0),this.SQUOTATION="'".charCodeAt(0),this.BACKSLASH="\\".charCodeAt(0),this.Keywords={str:20,num:21,bool:23,not:13,len:24,and:11,in:12,mod:15,or:18,div:14,shl:16,shr:17,xor:19,trim:25,is:26,like:46,ilike:48,match:50,imatch:52,likehan:54,ilikehan:55,defined:35,null:34,empty:36,nan:37,datestr:90,year:91,month:92,day:93,hour:94,rounddown:95,timestamp:96},this._procs=null,this._source=null,this._len=0,this._tokenId=0,this._run=0,this._runAhead=0,this._nextRun=0,this._lineNo=0,this._linePos=0,this._tokenPos=0;for(var t=0;t<256;t++)this.IS_IDENT[t]=t=="_".charCodeAt(0)||t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="a".charCodeAt(0)&&t<="z".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="Z".charCodeAt(0),this.IS_INTEGER[t]=t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="a".charCodeAt(0)&&t<="f".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="F".charCodeAt(0),this.IS_NUMBER[t]=t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t==".".charCodeAt(0)||t=="e".charCodeAt(0)||t=="E".charCodeAt(0),this.IS_WHITE[t]=t>=1&&t<=9||11==t||t>=14&&t<=32,this.IS_END[t]=0==t;this.initProcs()}return t.prototype.clear=function(){this._source=null},t.prototype.next=function(){var t=this._source.charCodeAt(this._run);this._tokenPos=this._run,t<256?this._procs[t].call(this):this.identProc()},t.prototype.unkownProc=function(){this._tokenId=0,this._run++},t.prototype.symbolProc=function(){this._tokenId=80,this._run++},t.prototype.commaProc=function(){this._tokenId=32,this._run++},t.prototype.crProc=function(){this._tokenId=33,10==this._source.charCodeAt(this._run+1)?this._run+=2:this._run++,this._lineNo++,this._linePos=this._run},t.prototype.lfProc=function(){this._tokenId=33,this._run++,this._lineNo++,this._linePos=this._run},t.prototype.equalProc=function(){this._tokenId=40,"="==this._source.charAt(++this._run)&&"="==this._source.charAt(++this._run)&&this._run++},t.prototype.notProc=function(){this._tokenId=13,"="==this._source.charAt(++this._run)&&(this._tokenId=45,"="==this._source.charAt(++this._run)&&this._run++)},t.prototype.greaterProc=function(){"="==this._source.charAt(this._run+1)?(this._tokenId=42,this._run+=2):(this._tokenId=41,this._run++)},t.prototype.lowerProc=function(){"="==this._source.charAt(this._run+1)?(this._tokenId=44,this._run+=2):">"==this._source.charAt(this._run+1)?(this._tokenId=45,this._run+=2):(this._tokenId=43,this._run++)},t.prototype.nextIdent=function(){for(var t=this._run;t<this._len&&!this.IS_IDENT[this._source.charCodeAt(t)];)t++;for(var e=t;t<this._len&&this.IS_IDENT[this._source.charCodeAt(t)];)t++;return t>e?(this._nextRun=t,this._source.substr(e,t-e).toLowerCase()):null},t.prototype.identProc=function(){for(var t=this._run;this._run<this._len&&(this.IS_IDENT[this._source.charCodeAt(this._run)]||this._source.charCodeAt(this._run)>255);)this._run++;var e=this._source.substr(t,this._run-t).toLowerCase();if(this.Keywords.hasOwnProperty(e))switch(this._tokenId=this.Keywords[e],this._tokenId){case 13:if(e=this.nextIdent())switch(e){case"like":this._tokenId=47,this._run=this._nextRun;break;case"ilike":this._tokenId=49,this._run=this._nextRun;break;case"match":this._tokenId=51,this._run=this._nextRun;break;case"imatch":this._tokenId=53,this._run=this._nextRun;break;case"likehan":this._tokenId=56,this._run=this._nextRun;break;case"ilikehan":this._tokenId=57,this._run=this._nextRun}break;case 26:"not"==(e=this.nextIdent())&&(this._tokenId=27,this._run=this._nextRun)}else this._tokenId=10},t.prototype.integerProc=function(){for(this._tokenId=64,this._run++;this._run<this._len&&this.IS_INTEGER[this._source.charCodeAt(this._run)];)this._run++},t.prototype.numberProc=function(){for(this._tokenId=64,this._run++;this._run<this._len&&this.IS_NUMBER[this._source.charCodeAt(this._run)];){if("."==this._source.charAt(this._run)){if("."==this._source.charAt(this._run+1))break;this._tokenId=63}this._run++}},t.prototype.minusProc=function(){this._tokenId=4,this._run++},t.prototype.plusProc=function(){this._tokenId=5,this._run++},t.prototype.pointProc=function(){"."==this._source.charAt(this._run+1)?(this._tokenId=68,this._run+=2):(this._tokenId=65,this._run++)},t.prototype.roundOpenProc=function(){this._tokenId=66,this._run++},t.prototype.roundCloseProc=function(){this._tokenId=67,this._run++},t.prototype.slashProc=function(){this._tokenId=2,this._run++},t.prototype.spaceProc=function(){for(this._tokenId=71,this._run++;this._run<this._len&&this.IS_WHITE[this._source.charCodeAt(this._run)];)this._run++},t.prototype.bracketOpenProc=function(){this._tokenId=69,this._run++},t.prototype.bracketCloseProc=function(){this._tokenId=70,this._run++},t.prototype.starProc=function(){this._tokenId=3,this._run++},t.prototype.modProc=function(){this._tokenId=15,this._run++},t.prototype.stringProc=function(){this._tokenId=61;do{var t=this._source.charCodeAt(this._run);if(this.IS_END[t])throw new Nt("Untermintated string",t);t==this.BACKSLASH&&this._run++,this._run++}while(this._run<this._len&&this._source.charCodeAt(this._run)!=this.QUOTATION);this._run++},t.prototype.smallStringProc=function(){this._tokenId=61;do{var t=this._source.charCodeAt(this._run);if(this.IS_END[t])throw new Nt("Untermintated string",t);t==this.BACKSLASH&&this._run++,this._run++}while(this._run<this._len&&this._source.charCodeAt(this._run)!=this.SQUOTATION);this._run++},t.prototype.initProcs=function(){this._procs=[];for(var t=1;t<=255;t++)this._procs[t]=this.symbolProc;for(t=1;t<=32;t++)this._procs[t]=this.spaceProc;this._procs[10]=this.lfProc,this._procs[13]=this.crProc,this._procs["$".charCodeAt(0)]=this.integerProc,this._procs[this.QUOTATION]=this.stringProc,this._procs[this.SQUOTATION]=this.smallStringProc;for(t=0;t<=9;t++)this._procs["0".charCodeAt(0)+t]=this.numberProc;for(t="A".charCodeAt(0);t<="Z".charCodeAt(0);t++)this._procs[t]=this.identProc;for(t="a".charCodeAt(0);t<="z".charCodeAt(0);t++)this._procs[t]=this.identProc;this._procs["_".charCodeAt(0)]=this.identProc,this._procs["(".charCodeAt(0)]=this.roundOpenProc,this._procs[")".charCodeAt(0)]=this.roundCloseProc,this._procs["*".charCodeAt(0)]=this.starProc,this._procs["+".charCodeAt(0)]=this.plusProc,this._procs[",".charCodeAt(0)]=this.commaProc,this._procs["-".charCodeAt(0)]=this.minusProc,this._procs[".".charCodeAt(0)]=this.pointProc,this._procs["/".charCodeAt(0)]=this.slashProc,this._procs["%".charCodeAt(0)]=this.modProc,this._procs["<".charCodeAt(0)]=this.lowerProc,this._procs["=".charCodeAt(0)]=this.equalProc,this._procs[">".charCodeAt(0)]=this.greaterProc,this._procs["[".charCodeAt(0)]=this.bracketOpenProc,this._procs["]".charCodeAt(0)]=this.bracketCloseProc,this._procs["!".charCodeAt(0)]=this.notProc},Object.defineProperty(t.prototype,"tokenId",{get:function(){return this._tokenId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tokenLoc",{get:function(){return{x:this._tokenPos-this._linePos,y:this._lineNo}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tokenLen",{get:function(){return this._run-this._tokenPos},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"token",{get:function(){return this._source.substr(this._tokenPos,this.tokenLen)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSpace",{get:function(){return 71==this._tokenId},enumerable:!1,configurable:!0}),t.prototype.init=function(t){this._source=t,this._len=t.length,this._lineNo=0,this._linePos=0,this._tokenPos=0,this._runAhead=this._run=0,this._tokenId=0},t.prototype.charAhread=function(){for(this._runAhead=this._run;this._runAhead<this._len&&this._source.charCodeAt(this._runAhead)>0&&this._source.charCodeAt(this._runAhead)<=32;)this._runAhead++;return this._source.charCodeAt(this._runAhead)},t.prototype.nextId=function(t){do{this.next()}while(this._run<this._len&&this._tokenId!=t);return null},t.prototype.nextNoSpace=function(){if(this._run<this._len)do{this.next()}while(this._run<this._len&&this.isSpace);return null},t.prototype.isFirstInLine=function(){if(0==this._tokenPos)return!0;var t,e=this._tokenPos;for(e--;e>0&&this.IS_WHITE[this._source.charCodeAt(e)];)e--;return 0==e||(10==(t=this._source.charCodeAt(e))||13==t)},t}(),Wt=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.isIdentifier=function(t){throw new Error("Token is not a valid Identifier: "+t)},e.prototype.evaluateIdentifier=function(t){throw new Error("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,e){throw new Error("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,e,i){throw new Error("Invalid identifier indexer: "+t)},e}(Lt),Ut=function(){function t(){}return Object.defineProperty(t.prototype,"value",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"asLiteral",{get:function(){return null},enumerable:!1,configurable:!0}),t.prototype.prepareValue=function(){},t.prototype.getLiteral=function(){},t.prototype.isIdentifier=function(t){return!1},t.prototype.toString=function(){return String(this)},t}(),Yt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(Ut);!function(t){function e(){return t.call(this)||this}o(e,t),e.prototype.evaluate=function(t){},e.prototype.toString=function(){return""},e.Default=new e}(Ut);var zt,qt=function(t){function e(){var e=t.call(this)||this;return e._operator=0,e}return o(e,t),e.prototype.evaluate=function(t){if(this._literal)return this._literal.value;if(!this._rightExpr)return this._leftExpr.evaluate(t);var e=this._leftExpr.evaluate(t),i=this._rightExpr.evaluate(t);switch(this._operator){case 40:return e==i;case 45:return e!=i;case 41:return e>i;case 42:return e>=i;case 43:return e<i;case 44:return e<=i;case 46:return this.calcLike(e,i,!1);case 47:return!this.calcLike(e,i,!1);case 48:return this.calcLike(e,i,!0);case 49:return!this.calcLike(e,i,!0);case 54:return this.calcLikeHan(e,i,!1);case 56:return!this.calcLikeHan(e,i,!1);case 55:return this.calcLikeHan(e,i,!0);case 57:return!this.calcLikeHan(e,i,!0);case 50:return this.calcMatch(e,i,!1);case 51:return!this.calcMatch(e,i,!1);case 52:return this.calcMatch(e,i,!0);case 53:return!this.calcMatch(e,i,!0);default:throw new $t("Unknown operator: "+this._operator)}},e.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(this._rightExpr){var e=this._leftExpr.toString(),i=this._rightExpr.toString(),o=void 0;switch(this._operator){case 40:o="=";break;case 45:o="<>";break;case 41:o=">";break;case 42:o=">=";break;case 43:o="<";break;case 44:o="<=";break;case 46:o="like";break;case 47:o="not like";break;case 48:o="ilike";break;case 49:o="not ilike";break;case 50:o="match";break;case 51:o="not match";break;case 52:o="imatch";break;case 53:o="not imatch";break;case 54:o="likeHan";break;case 56:o="not likehan";break;case 55:o="ilikeHan";break;case 57:o="not ilikehan";break;case 32:o=",";break;default:o="<<ERROR>>"}t="("+e+" "+o+" "+i+")"}else t=this._leftExpr.toString();return t},e.prototype.isIdentifier=function(t){return this._leftExpr&&!this._rightExpr&&this._leftExpr.isIdentifier(t)},e.prototype.prepareValue=function(){this._leftExpr.prepareValue(),null==this._rightExpr?this._literal=this._leftExpr.getLiteral():this._rightExpr.prepareValue()},e.prototype.getLiteral=function(){return this._literal},e.prototype.calcLike=function(t,e,i){var o=String(t),r=String(e);if(o&&r){i&&(o=o.toLowerCase(),r=r.toLowerCase());var n=r.length;if(n>1){var s="%"==r.charAt(0),a="%"==r.charAt(n-1);if(s&&a)return r=r.substr(1,n-2),o.indexOf(r,0)>=0;if(s){r=r.substr(1,n-1);var l=o.lastIndexOf(r);return l>=0&&l==o.length-r.length}return a?(r=r.substr(0,n-1),0==o.indexOf(r,0)):o==r}return"%"!=r&&o==r}return!1},e.prototype.calcLikeHan=function(t,e,i){if(t&&e){t=String(t);var o=(e=String(e)).length,r="%"==e.charAt(0),n="%"==e.charAt(o-1);if(e=r&&n?e.substr(1,o-2):r?e.substr(1,o-1):n?e.substr(0,o-1):e,t.length<e.length)return;i&&(t=t.toLowerCase(),e=e.toLowerCase());var s=Rt.hangulToChosungAll(t),a=Rt.hangulToChosungAll(e),l=-1,h=void 0;if(r&&n){for(;(l=s.indexOf(a,l+1))>=0;){for(var u=0;u<a.length&&u+l<s.length;u++){var c=Rt.hangulToChosung(t[u+l]);if((d=Rt.hangulToChosung(e[u])).org&&d.org!==c.org||!d.cho||d.cho!==c.cho){h=!1;break}h=!0}if(h)return!0}return!1}if(r){if((l=s.lastIndexOf(a))>=0&&l===s.length-a.length){for(u=0;u<a.length;u++){c=Rt.hangulToChosung(t[l+u]);if((d=Rt.hangulToChosung(e[u])).org&&d.org!==c.org||!d.cho||d.cho!==c.cho){h=!1;break}h=!0}if(h)return!0}return!1}if(n){if(0===s.indexOf(a)){for(u=0;u<a.length;u++){var d;c=Rt.hangulToChosung(t[u]);if((d=Rt.hangulToChosung(e[u])).org&&d.org!==c.org||!d.cho||d.cho!==c.cho){h=!1;break}h=!0}if(h)return!0}return!1}return t==e}return!1},e.prototype.calcMatch=function(t,e,i){return new RegExp(e,"m"+(i?"i":"")).test(t)},e}(Ut),Kt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"asLiteral",{get:function(){return this},enumerable:!1,configurable:!0}),e.prototype.evaluate=function(t){},e}(Ut),Xt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toString=function(){return"defined"},e}(Kt),Zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toString=function(){return"empty"},e}(Kt),Jt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return NaN},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"null"},e}(Kt),Qt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toString=function(){return"NaN"},e}(Kt),te=function(t){function e(i,o,r){var n=t.call(this)||this;return n._leftExpr=i,n._operator=o,n._isNot=27==o,n._value=-1,r instanceof Xt?n._value=e.DEFINED:r instanceof Jt?n._value=e.NULL:r instanceof Zt?n._value=e.EMPTY:r instanceof Qt&&(n._value=e.NAN),n}return o(e,t),e.prototype.prepareValue=function(){this._leftExpr.prepareValue(),this._literal=this._leftExpr.getLiteral()},e.prototype.getLiteral=function(){return null},e.prototype.evaluate=function(t){var i,o=this._literal?this._literal.value:this._leftExpr.evaluate(t);switch(this._value){case e.DEFINED:i=void 0!==o;break;case e.NULL:i=null==o;break;case e.EMPTY:i=null==o||0==String(o).length;break;case e.NAN:i=null===o||isNaN(o);break;default:return}return this._isNot?!i:i},e.prototype.toString=function(){var t="<<ERROR>>";switch(this._value){case e.DEFINED:t="defined";break;case e.NULL:t="null";break;case e.EMPTY:t="empty";break;case e.NAN:t="NaN"}return"("+(this._isNot?"is not ":"is ")+t+")"},e.DEFINED=0,e.NULL=1,e.EMPTY=2,e.NAN=3,e}(qt),ee=function(t){function e(e){var i=t.call(this)||this;return i._value=Number(e),i}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"asLiteral",{get:function(){return this},enumerable:!1,configurable:!0}),e.prototype.evaluate=function(t){return this._value},e.prototype.toString=function(){return String(this._value)},e}(Yt),ie=function(t){function e(e){var i=t.call(this)||this;return i._value=parseInt(e),i}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"asLiteral",{get:function(){return this},enumerable:!1,configurable:!0}),e.prototype.evaluate=function(t){return this._value},e.prototype.toString=function(){return String(this._value)},e}(Yt),oe=function(t){function e(e){var i=t.call(this)||this;i._value=e.substr(1,e.length-2);for(var o="",r=0,n=!1;r<i._value.length;)"\\"!=i._value[r]||n?(n=!1,o+=i._value[r++]):(n=!0,r++);return i._value=o,i}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"asLiteral",{get:function(){return this},enumerable:!1,configurable:!0}),e.prototype.evaluate=function(t){return this._value},e.prototype.toString=function(){return"'"+this._value+"'"},e}(Yt),re=function(t){function e(e){var i=t.call(this)||this;return i._idKey=-651212,i._literal=e,i}return o(e,t),Object.defineProperty(e.prototype,"identifier",{get:function(){return this._literal},enumerable:!1,configurable:!0}),e.prototype.evaluate=function(t){return-651212==this._idKey&&(this._idKey=t.isIdentifier(this._literal)),t.evaluateIdentifier(this._idKey)},e.prototype.toString=function(){return this._literal},e}(Ut),ne=function(t){function e(e,i,o){var r=t.call(this)||this;return r._idKey=-1490313,r._intIndex=NaN,r._strIndex=null,r._ident=e,r._indexer=i,r._capital=o,r}return o(e,t),e.prototype.prepareValue=function(){var t=this._indexer.asLiteral;if(t||this._indexer instanceof qt&&(this._indexer.prepareValue(),t=this._indexer.getLiteral()),t){var e=t.value;"string"==typeof e?this._strIndex=e:this._intIndex=parseInt(e),this._capital&&this._strIndex&&(this._strIndex=this._strIndex.toUpperCase())}},e.prototype.getLiteral=function(){return null},e.prototype.evaluate=function(t){if(-1490313==this._idKey&&(this._idKey=t.isIdentifier(this._ident)),this._strIndex)return t.evaluateIndexerS(this._idKey,this._strIndex,this._capital);if(isNaN(this._intIndex)){var e=this._indexer.evaluate(t);return"string"==typeof e?t.evaluateIndexerS(this._idKey,e,this._capital):t.evaluateIndexerI(this._idKey,e)}return t.evaluateIndexerI(this._idKey,this._intIndex)},e.prototype.toString=function(){return this._ident+"["+this._indexer.toString()+"]"},e}(qt),se=function(t){function e(e){var i=t.call(this)||this;return i._factor=e,i}return o(e,t),e.prototype.prepareValue=function(){this._literal=this._factor.asLiteral,!this._literal&&this._factor instanceof Ut&&(this._factor.prepareValue(),this._literal=this._factor.getLiteral())},e.prototype.getLiteral=function(){return null},e}(Ut),ae=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof Yt?this._literal.value:this._factor.evaluate(t);return e?e.length:0},e.prototype.toString=function(){return"(len "+this._factor+")"},e}(se),le=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof Yt?this._literal.value:this._factor.evaluate(t);return e?e.trim():e},e.prototype.toString=function(){return"(trim "+this._factor+")"},e}(se),he=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){return-(this._literal instanceof Yt?this._literal.value:this._factor.evaluate(t))},e.prototype.toString=function(){return"-"+this._factor},e}(se),ue=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){return this._literal instanceof Yt?this._literal.value:this._factor.evaluate(t)},e.prototype.toString=function(){return"+"+this._factor},e}(se),ce=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){return!(this._literal instanceof Yt?this._literal.value:this._factor.evaluate(t))},e.prototype.toString=function(){return"(not "+this._factor+")"},e}(se),de=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof Yt?this._literal.value:this._factor.evaluate(t);return Boolean(e)},e.prototype.toString=function(){return"(bool "+this._factor+")"},e}(se),pe=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof Yt?this._literal.value:this._factor.evaluate(t);return Number(e)},e.prototype.toString=function(){return"(num "+this._factor+")"},e}(se),fe=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof Yt?this._literal.value:this._factor.evaluate(t);return String(e)},e.prototype.toString=function(){return"(str "+this._factor+")"},e}(se),_e=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof Yt?this._literal.value:this._factor.evaluate(t);if(e instanceof Date){var i=Rt.pad;e=i(e.getFullYear(),4)+i(e.getMonth()+1,2)+i(e.getDate(),2)}return String(e)},e.prototype.toString=function(){return"(datestr "+this._factor+")"},e}(se),ge=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof Yt?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getFullYear():null},e.prototype.toString=function(){return"(year "+this._factor+")"},e}(se),ye=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof Yt?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getMonth()+1:null},e.prototype.toString=function(){return"(month "+this._factor+")"},e}(se),me=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof Yt?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getDate():null},e.prototype.toString=function(){return"(day "+this._factor+")"},e}(se),be=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof Yt?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getHours():null},e.prototype.toString=function(){return"(hour "+this._factor+")"},e}(se),ve=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._factor,i=e.getLiteral();if(e.getLiteral())return i.value;if(e._rightExpr){var o=e._leftExpr.evaluate(t),r=e._rightExpr.evaluate(t);if(32===e._operator){var n=Math.pow(10,r);return Math.floor(o*n)/n}throw new $t("Unknown operator: "+e._operator)}return e._leftExpr.evaluate(t)},e.prototype.toString=function(){return"(rounddown "+this._factor+")"},e}(se),we=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._factor,i=e.getLiteral();if(i)return i.value;if(e._rightExpr){var o=e._leftExpr.evaluate(t),r=e._rightExpr.evaluate(t);if(null==o)return;if(!(o instanceof Date))throw new $t("value not date: "+o);if(32===e._operator){var n=1;switch(r){case 4:n*=24;case 3:n*=60;case 2:n*=60;case 1:n*=1e3}return Math.floor(o.getTime()/n)*n}throw new $t("Unknown operator: "+e._operator)}if(null!=(o=e._leftExpr.evaluate(t))){if(!(o instanceof Date))throw new $t("value not date: "+o);return o.getTime()}},e.prototype.toString=function(){return"(timestamp "+this._factor+")"},e}(se),Ce=function(t){function e(){var e=t.call(this)||this;return e._factors=[],e._operators=[],e._literal=null,e}return o(e,t),e.prototype.addFactor=function(t){this._factors.push(t)},e.prototype.addOperator=function(t){this._operators.push(t)},e.prototype.isIdentifier=function(t){return 1==this._factors.length&&this._factors[0]instanceof re&&this._factors[0].identifier==t},e.prototype.prepareValue=function(){for(var t=0,e=this._factors.length;t<e;t++)this._factors[t].prepareValue();if(0==this._operators.length){var i=this._factors[0];this._literal=i.asLiteral,this._literal||(this._literal=i.getLiteral())}},e.prototype.getLiteral=function(){return this._literal},e.prototype.evaluate=function(t){if(this._literal)return this._literal.value;for(var e=this._factors.length,i=this._factors[0].evaluate(t),o=1;o<e;o++){var r=this._factors[o].evaluate(t);switch(this._operators[o-1]){case 11:i=i&&r;break;case 3:i*=r;break;case 2:i/=r;break;case 14:i=Math.floor(Math.floor(i)/Math.floor(r));break;case 15:i%=r;break;case 16:i<<=r;break;case 17:i>>=r}}return i},e.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(1==this._factors.length)t=this._factors[0].toString();else{t="("+this._factors[0].toString();for(var e=1;e<this._factors.length;e++){switch(this._operators[e-1]){case 11:t+=" and ";break;case 3:t+=" * ";break;case 2:case 14:t+=" / ";break;case 15:t+=" mod ";break;case 16:t+=" shl ";break;case 17:t+=" shr "}t+=this._factors[e].toString()}t+=")"}return t},e}(Ut),xe=function(t){function e(){var e=t.call(this)||this;return e._terms=[],e._operators=[],e._literal=null,e}return o(e,t),e.prototype.addTerm=function(t){this._terms.push(t)},e.prototype.addOperator=function(t){this._operators.push(t)},e.prototype.isIdentifier=function(t){return 1==this._terms.length&&this._terms[0].isIdentifier(t)},e.prototype.prepareValue=function(){for(var t=0,e=this._terms.length;t<e;t++)this._terms[t].prepareValue();0==this._operators.length&&(this._literal=this._terms[0].getLiteral())},e.prototype.getLiteral=function(){return this._literal},e.prototype.evaluate=function(t){if(this._literal)return this._literal.value;for(var e=this._terms.length,i=this._terms[0].evaluate(t),o=1;o<e;o++){var r=this._terms[o].evaluate(t);switch(this._operators[o-1]){case 4:i-=r;break;case 5:i+=r;break;case 18:i=i||r;break;case 19:i^=r}}return i},e.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(1==this._terms.length)t=this._terms[0].toString();else{t="("+this._terms[0].toString();for(var e=1;e<this._terms.length;e++){switch(this._operators[e-1]){case 4:t+=" - ";break;case 5:t+=" + ";break;case 18:t+=" or ";break;case 19:t+=" xor ";break;default:t+=" <<ERROR>> "}t+=this._terms[e].toString()}t+=")"}return t},e}(Ut),Ie=function(){function t(){this._node=null,this._capitalIndexers=null,this._lexer=new Gt}return t.prototype.syntaxError=function(t,e){throw new Nt(t,e)},t.prototype.expected=function(t){if(t!=this._lexer.tokenId)throw new Nt("Token is not a expected kind ["+t+"]: "+this._lexer.tokenId,this._lexer.tokenLoc);this.nextToken()},t.prototype.nextToken=function(){this._lexer.nextNoSpace()},t.prototype.doExpression=function(){var t,e=null,i=this.doSimpleExpression();if(Vt[t=this._lexer.tokenId]){this.nextToken();var o=this.doSimpleExpression();o.prepareValue();var r=o.getLiteral();if(!(r instanceof Kt))throw new Nt("is operator's operand must be defined, null or empty: "+this._lexer.tokenId,null);e=new te(i,t,r)}else(e=new qt)._leftExpr=i,(Bt[this._lexer.tokenId]||32==this._lexer.tokenId)&&(e._operator=this._lexer.tokenId,this.nextToken(),e._rightExpr=this.doSimpleExpression());return e},t.prototype.doSimpleExpression=function(){var t=new xe;for(t.addTerm(this.doTerm());jt[this._lexer.tokenId];)t.addOperator(this._lexer.tokenId),this.nextToken(),t.addTerm(this.doTerm());return t},t.prototype.doTerm=function(){var t=new Ce;for(t.addFactor(this.doFactor());Ht[this._lexer.tokenId];)t.addOperator(this._lexer.tokenId),this.nextToken(),t.addFactor(this.doFactor());return t},t.prototype.doFactor=function(){var t=this._lexer.tokenId;switch(t){case 61:return this.doCharString();case 66:return this.doRoundOpen();case 10:return this.doIdentifier();case 64:return this.doInteger();case 63:return this.doNumber();case 4:return this.doMinus();case 5:return this.doPlus();case 13:return this.doNot();case 35:return this.doDefined();case 34:return this.doNull();case 36:return this.doEmpty();case 37:return this.doNaN();case 23:return this.doToBool();case 21:return this.doToNumber();case 20:return this.doToString();case 24:return this.doLength();case 25:return this.doTrim();case 90:return this.doToDateString();case 91:return this.doToYear();case 92:return this.doToMonth();case 93:return this.doToDay();case 94:return this.doToHour();case 95:return this.doRoundDown();case 96:return this.doTimeStamp()}throw new Nt("Unkown token: "+t,this._lexer.tokenLoc)},t.prototype.doCharString=function(){var t=this._lexer.token;return this.nextToken(),new oe(t)},t.prototype.doRoundOpen=function(){this.nextToken();var t=this.doExpression();return this.expected(67),t},t.prototype.doIdentifier=function(){var t=this._lexer.token;if(this.nextToken(),69==this._lexer.tokenId){this.nextToken();var e=this.doExpression();return this.expected(70),new ne(t,e,this._capitalIndexers.indexOf(t)>=0)}return new re(t)},t.prototype.doNumber=function(){var t=this._lexer.token;return this.nextToken(),new ee(t)},t.prototype.doInteger=function(){var t=this._lexer.token;return this.nextToken(),new ie(t)},t.prototype.doMinus=function(){return this.nextToken(),new he(this.doFactor())},t.prototype.doPlus=function(){return this.nextToken(),new ue(this.doFactor())},t.prototype.doNot=function(){return this.nextToken(),new ce(this.doFactor())},t.prototype.doDefined=function(){return this.nextToken(),new Xt},t.prototype.doNull=function(){return this.nextToken(),new Jt},t.prototype.doEmpty=function(){return this.nextToken(),new Zt},t.prototype.doNaN=function(){return this.nextToken(),new Qt},t.prototype.doToBool=function(){return this.nextToken(),new de(this.doFactor())},t.prototype.doToNumber=function(){return this.nextToken(),new pe(this.doFactor())},t.prototype.doToString=function(){return this.nextToken(),new fe(this.doFactor())},t.prototype.doLength=function(){return this.nextToken(),new ae(this.doFactor())},t.prototype.doTrim=function(){return this.nextToken(),new le(this.doFactor())},t.prototype.doToDateString=function(){return this.nextToken(),new _e(this.doFactor())},t.prototype.doToYear=function(){return this.nextToken(),new ge(this.doFactor())},t.prototype.doToMonth=function(){return this.nextToken(),new ye(this.doFactor())},t.prototype.doToDay=function(){return this.nextToken(),new me(this.doFactor())},t.prototype.doToHour=function(){return this.nextToken(),new be(this.doFactor())},t.prototype.doRoundDown=function(){return this.nextToken(),new ve(this.doFactor())},t.prototype.doTimeStamp=function(){return this.nextToken(),new we(this.doFactor())},t.prototype.parse=function(t,e){if(t){this._capitalIndexers=e||[],this._lexer.init(t),this.nextToken();var i=this.doExpression();return i&&i.prepareValue(),this._lexer.clear(),this._capitalIndexers=null,i}return null},t.prototype.evaluate=function(t,e,i){return this.parse(t,i).evaluate(e)},t.Default=new t,t}(),Se=["value","values"],Ee=function(e){function i(i,o,r){void 0===o&&(o=t.ValueType.TEXT),void 0===r&&(r=0);var n=e.call(this)||this;return n._index=-1,n._dataType=t.ValueType.TEXT,n._subType=null,n._runType=t.ValueType.TEXT,n._length=0,n._subTypeEnabled=!0,n._required=!1,n._updatable=!0,n._ranged=!1,n._runSet=null,n._typeLock=!1,n._objectKey=null,n._objectCallback=null,i&&(n.fieldName=i),null!=o&&(o===t.ValueType.DATE&&(o=t.ValueType.DATETIME,n._subType=t.ValueType.DATE,n._subTypeEnabled=!0),n._dataType=o),n._length=r,n}return o(i,e),Object.defineProperty(i.prototype,"hash",{get:function(){return this._fieldName},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldName",{get:function(){return this._fieldName},set:function(t){if(!(t=t&&t.trim()))throw new Error("Field name must be exists.");t!=this._orgFieldName&&(this._orgFieldName=t,this._orgAttrName="@"+t,this._fieldName=t.toUpperCase(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"orgFieldName",{get:function(){return this._orgFieldName},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"orgAttrName",{get:function(){return this._orgAttrName},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataType",{get:function(){return this._dataType},set:function(t){t!=this._dataType&&(this._dataType=t,this.resetTypes(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"runType",{get:function(){return this._runType},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"subType",{get:function(){return this._subType},set:function(t){(t=t||null)!=this._subType&&(this._subType=t,this.resetTypes(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"subTypeEnabled",{get:function(){return this._subTypeEnabled},set:function(t){t!=this._subTypeEnabled&&(this._subTypeEnabled=t,this.resetTypes(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"baseField",{get:function(){return this._baseField},set:function(t){t!=this._orgBaseField&&(this._orgBaseField=t,this._baseField=t&&t.toUpperCase(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this._length},set:function(t){(t=t||0)!=this._length&&(this._length=t,this.resetTypes(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"set",{get:function(){return this._set},set:function(t){t!==this._set&&(this._set=t,this.resetTypes(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this.resetTypes(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this.resetTypes(),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"required",{get:function(){return this._required},set:function(t){t!=this._required&&(this._required=t,this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"header",{get:function(){return this._header},set:function(t){t!=this._header&&(this._header=t,this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultValue",{get:function(){return this._defaultValue},set:function(t){t!=this._defaultValue&&(this._defaultValue=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nullValue",{get:function(){return this._nullValue},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolParser=t?new Tt(t):null,this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,t?(this._dateParser=new Mt(t),this._amText&&(this._dateParser.amText=this._amText),this._pmText&&(this._dateParser.pmText=this._pmText),this._baseYear&&(this._dateParser.baseYear=this._baseYear)):this._dateParser=null,this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t,this._dateParser&&(this._dateParser.amText=t),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t,this._dateParser&&(this._dateParser.pmText=t),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"baseYear",{get:function(){return this._baseYear},set:function(t){t!=this._baseYear&&(this._baseYear=t,this._dateParser&&(this._dateParser.baseYear=t),this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueExpression",{get:function(){return this._valueExpression},set:function(t){t!=this._valueExpression&&(this._valueExpression=t,this._owner&&this._owner.updateField(this,!0))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!=this._valueCallback&&(this._valueCallback=t,this._owner&&this._owner.updateField(this,!0))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"objectKey",{get:function(){return this._objectKey},set:function(t){this._objectKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"objectCallback",{get:function(){return this._objectCallback},set:function(t){this._objectCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"calculated",{get:function(){return!!this._valueExpression||!!this._valueCallback},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"updatable",{get:function(){return!this._valueExpression&&!this._valueCallback&&this._updatable},set:function(t){t!=this._updatable&&(this._updatable=t)},enumerable:!1,configurable:!0}),i.prototype.isEmpty=function(e){var i=null==e||""===e;return i||this._dataType!=t.ValueType.NUMBER||(i=isNaN(e)),i},i.prototype.equalValues=function(t,e){return this._equalValues(t,e)},i.prototype.sameValues=function(t,e){return this._sameValues(t,e)},i.prototype.readValue=function(t){return this._readValue(t)},i.prototype.getBool=function(t,e){return"boolean"==typeof e?e:this._boolParser?this._boolParser.toBool(e):t.toBool(e)},i.prototype.getDate=function(t,e){return e instanceof Date?new Date(e.getTime()):"number"==typeof e?new Date(e):this._dateParser?this._dateParser.toDate(e,!1):t.toDate(e,!1)},i.prototype.clone=function(){var t=new i(this.fieldName,this.dataType,this.length);return t._orgFieldName=this._orgFieldName,t._orgAttrName=this._orgAttrName,t._boolParser=this._boolParser,t._dateParser=this._dateParser,t._orgBaseField=this._orgBaseField,t._baseField=this._baseField,t._defaultValue=this._defaultValue,t._valueCallback=this._valueCallback,t._valueExpression=this._valueExpression,t},i.prototype.$_resetTypes=function(t){this.resetTypes(t)},i.prototype.assignFrom=function(t){"fieldName"in t&&(this.fieldName=t.fieldName),"subType"in t&&(this._subType=t.subType),"set"in t&&(this._set=t.set instanceof Array?t.set.slice():null),"defaultValue"in t&&(this._defaultValue=t.defaultValue),"baseField"in t&&(this.baseField=t.baseField),"booleanFormat"in t&&(this.booleanFormat=t.booleanFormat),"amText"in t&&(this._amText=t.amText),"pmText"in t&&(this._pmText=t.pmText),"baseYear"in t&&(this._baseYear=t.baseYear),"header"in t&&(this._header=t.header),"datetimeFormat"in t&&(this.datetimeFormat=t.datetimeFormat),"objectKey"in t&&(this._objectKey=t.objectKey),"objectCallback"in t&&(this._objectCallback=t.objectCallback),"required"in t&&(this._required=t.required),"minimum"in t&&(this._minimum=t.minimum),"maximum"in t&&(this._maximum=t.maximum),"valueExpression"in t&&(this.valueExpression=t.valueExpression),"valueCallback"in t&&(this._valueCallback=t.valueCallback),"tag"in t&&(this._tag=t.tag)},i.prototype.$_setIndex=function(t){this._index=t},i.prototype.$_prepare=function(t){this._owner=t},i.prototype.changed=function(){},i.prototype.resetTypes=function(e){if(!this._typeLock){e&&(this._ownerBoolParser=e.boolParser,this._ownerDateParser=e.dateParser);var i=this._dataType,o=this._subType;if(this._runType=i,this._ranged=!1,(!this._owner||this._owner.subTypeEnabled)&&this._subTypeEnabled){if(o)switch(i){case t.ValueType.TEXT:o==t.ValueType.CHAR&&this._length>0&&(i=o);break;case t.ValueType.NUMBER:o!=t.ValueType.UNUM&&o!=t.ValueType.INT&&o!=t.ValueType.UINT||(i=o);break;case t.ValueType.DATETIME:o==t.ValueType.DATE&&(i=o)}if(this._runType=i,this._runSet=null,this._set&&this._set.length){if(this._runType==t.ValueType.DATETIME){this._runSet=[];for(var r=0;r<this._set.length;r++){(n=this.getDate(this._ownerDateParser,this._set[r]))&&this._runSet.push(n.getTime())}this._runSet.length<1&&(this._runSet=null)}else if(this._runType==t.ValueType.DATE){this._runSet=[];for(r=0;r<this._set.length;r++){var n;if(n=this.getDate(this._ownerDateParser,this._set[r])){var s=new Date(n.getDate());this._runSet.push(s.setHours(0,0,0,0))}}this._runSet.length<1&&(this._runSet=null)}else this._runSet=this._set;this._ranged=!0}if(!this._ranged)switch(this._dataType){case t.ValueType.NUMBER:this._runMin=Number(this._minimum),this._runMax=Number(this._maximum),isNaN(this._runMin)||isNaN(this._runMax)?this._ranged=!isNaN(this._runMin)||!isNaN(this._runMax):this._ranged=this._runMin<=this._runMax;break;case t.ValueType.DATETIME:case t.ValueType.DATE:this._runMin=this.getDate(this._ownerDateParser,this._minimum),this._runMax=this.getDate(this._ownerDateParser,this._maximum),this._runMin&&this._runMax?this._ranged=this._runMin.getTime()<=this._runMax.getTime():this._ranged=this._runMin||this._runMax}switch(this._runType){case t.ValueType.TEXT:this._equalValues=this.equalTextValues,this._sameValues=this.sameTextValues,this._readValue=this.readTextValue,this._nullValue=null;break;case t.ValueType.CHAR:this._equalValues=this.equalTextValues,this._sameValues=this.sameTextValues,this._readValue=this.readCharValue,this._nullValue=null;break;case t.ValueType.NUMBER:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readNumberValue,this._nullValue=NaN;break;case t.ValueType.UNUM:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readUnumValue,this._nullValue=NaN;break;case t.ValueType.INT:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readIntValue,this._nullValue=NaN;break;case t.ValueType.UINT:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readUintValue,this._nullValue=NaN;break;case t.ValueType.DATETIME:this._equalValues=this.equalDateValues,this._sameValues=this.sameDateValues,this._readValue=this.readDatetimeValue,this._nullValue=null;break;case t.ValueType.DATE:this._equalValues=this.equalDateValues,this._sameValues=this.sameDateValues,this._readValue=this.readDateValue,this._nullValue=null;break;case t.ValueType.BOOLEAN:this._equalValues=this.equalBoolValues,this._sameValues=this.sameBoolValues,this._readValue=this.readBooleanValue,this._nullValue=!1;break;case t.ValueType.OBJECT:this._equalValues=this.equalObjectValues,this._sameValues=this.sameObjectValues,this._readValue=this.readObjectValues,this._nullValue=!1;break;default:this._equalValues=this.equalDummyValues,this._sameValues=this.sameDummyValues,this._readValue=this.readDummyValue,this._nullValue=void 0}}}},i.prototype.$_refreshFormats=function(t){this._owner=t,this._dateParser&&(this._dateParser.baseYear||(this._dateParser.baseYear=t.baseYear),this._dateParser.amText||(this._dateParser.amText=t.amText),this._dateParser.pmText||(this._dateParser.pmText=t.pmText)),this._ownerBoolParser=t.boolParser,this._ownerDateParser=t.dateParser},i.prototype.equalDummyValues=function(t,e){return this.equalTextValues(t,e)},i.prototype.sameDummyValues=function(t,e){return null==t?null==e:null!=e&&t==e},i.prototype.equalTextValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&t==e},i.prototype.sameTextValues=function(t,e){return null==t||""==t?null==e||""==e:null!=e&&""!=e&&t==e},i.prototype.equalNumberValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&(isNaN(t)?isNaN(e):!isNaN(e)&&t==e)},i.prototype.sameNumberValues=function(t,e){return isNaN(t)?isNaN(e):!isNaN(e)&&t==e},i.prototype.equalDateValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&(t instanceof Date?e instanceof Date&&t.getTime()==e.getTime():!(e instanceof Date))},i.prototype.sameDateValues=function(t,e){return t instanceof Date?e instanceof Date&&t.getTime()==e.getTime():!(e instanceof Date)},i.prototype.equalBoolValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&Boolean(t)==Boolean(e)},i.prototype.sameBoolValues=function(t,e){return this.equalBoolValues(t,e)},i.prototype.equalObjectValues=function(t,e){return void 0===t||void 0===e?void 0===t==(void 0===e):JSON.stringify(t)===JSON.stringify(e)},i.prototype.sameObjectValues=function(t,e){return null==t||null==e?null==t&&null==e:JSON.stringify(t)===JSON.stringify(e)},i.prototype.readDummyValue=function(t){return t},i.prototype.readTextValue=function(t){if(void 0===t)return t;var e=null===t?null:String(t);return this._ranged&&this._runSet&&this._runSet.indexOf(e)<0?void 0:e},i.prototype.readCharValue=function(t){if(void 0===t)return t;var e=null===t?null:String(t);return e&&(e=e.substr(0,this._length)),this._ranged&&this._runSet&&this._runSet.indexOf(e)<0?void 0:e},i.prototype.readNumberValue=function(t){if(null!=t&&""!==t){var e=Number(t);if(this._ranged)if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));return e}},i.prototype.readUnumValue=function(t){if(null!=t&&""!==t){var e=Math.max(0,Number(t));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=Math.max(0,e)}return e}},i.prototype.readIntValue=function(t){if(null!=t&&""!==t){var e=t>=0?Math.floor(t):Math.ceil(t);if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=e>=0?Math.floor(e):Math.ceil(e)}return e}},i.prototype.readUintValue=function(t){if(null!=t&&""!==t){var e=Math.max(0,Math.floor(Math.floor(t)));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=Math.max(0,Math.floor(Math.floor(e)))}return e}},i.prototype.readDatetimeValue=function(t){if(void 0!==t){if(null===t)return this._nullValue;var e=this.getDate(this._ownerDateParser,t);if(e&&this._ranged)if(this._runSet){for(var i=!1,o=this._runSet.length;o--;)if(e.getTime()==this._runSet[o]){i=!0;break}if(!i)return}else this._runMin&&e.getTime()<this._runMin.getTime()&&(e=new Date(this._runMin)),this._runMax&&e.getTime()>this._runMax.getTime()&&(e=new Date(this._runMax));return e}},i.prototype.readDateValue=function(t){if(void 0!==t){if(null===t)return this._nullValue;var e=this.getDate(this._ownerDateParser,t);if(e&&(e.setHours(0,0,0,0),this._ranged))if(this._runSet){for(var i=!1,o=this._runSet.length;o--;)if(e.getTime()==this._runSet[o]){i=!0;break}if(!i)return}else this._runMin&&e.getTime()<this._runMin.getTime()&&(e=new Date(this._runMin)),this._runMax&&e.getTime()>this._runMax.getTime()&&(e=new Date(this._runMax));return e}},i.prototype.readBooleanValue=function(t){return void 0===t?t:null!==t&&this.getBool(this._ownerBoolParser,t)},i.prototype.readObjectValues=function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){throw new Error("Invalid Object String "+e+"\r\n"+t)}else if(null!=t&&"object"!=typeof t)try{t=JSON.parse(t)}catch(e){Rt.log("JSON.parse fail => ".concat(t))}return Rt.deepCopy(t)},i.prototype.$_compareObject=function(t,e,i,o){var r=this._objectKey,n=this._objectCallback,s=n?n(this.orgFieldName,i,t):r&&t.hasOwnProperty(r)?t[r]:null,a=n?n(this.orgFieldName,o,e):r&&e.hasOwnProperty(r)?e[r]:null;return s>a?1:s<a?-1:0},i.prototype.$_calculateValue=function(t,e,i,o,r,n,s){return this._valueCallback?this._valueCallback(t.handler,i,o,n,s):this._valueExpression?(this._exprNode||(this._exprNode=Ie.Default.parse(this._valueExpression,Se)),e.setValues(s,r),this._exprNode.evaluate(e)):void 0},i}(Lt);t.RestoreMode=void 0,(zt=t.RestoreMode||(t.RestoreMode={})).NONE="none",zt.EXPLICIT="explicit",zt.AUTO="auto";var Oe=function(t){function e(){var e=t.call(this)||this;return e._values=null,e._fields=null,e._fieldCount=0,e}return o(e,t),e.prototype.setValues=function(t,e){this._values=t,this._fields=e,this._fieldCount=e?e.length:0},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){throw new $t("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(this._values){if(t==e.ID_VALUE||t==e.ID_VALUES){if(i<0||i>=this._fieldCount)throw new $t("Data field index out of bounds:"+i);return this._values[i]}throw new $t("Invalid identifier indexer: "+t)}},e.prototype.evaluateIndexerS=function(t,i,o){if(t!=e.ID_VALUE&&t!=e.ID_VALUES)throw new $t("Invalid identifier indexer: "+t);if(this._values&&this._fields){var r=this._fields.indexOf(i);if(r<0||r>=this._fieldCount)throw new $t("Data field is not exists:"+i);return this._values[r]}},e.ID_VALUE=0,e.ID_VALUES=1,e.IDENTS={value:e.ID_VALUE,values:e.ID_VALUES},e}(Wt),Re=function(t){function e(){var e=t.call(this)||this;return e._listeners=[],e}return o(e,t),e.prototype._doDispose=function(){return this._listeners=[],t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"listenerCount",{get:function(){return this._listeners.length},enumerable:!1,configurable:!0}),e.prototype.addListener=function(t,e){return null!=t&&this._listeners&&this._listeners.indexOf(t)<0&&(null!=e&&e>=0?this._listeners.splice(e,0,t):this._listeners.push(t)),this},e.prototype.removeListener=function(t){if(!this.disposing&&null!=t&&this._listeners){var e=this._listeners.indexOf(t);e>=0&&this._listeners.splice(e,1)}return this},e.prototype.clearListener=function(){this._listeners.length=0},e.prototype.fireEvent=function(t){var e=Array.prototype.slice.call(arguments,0);e[0]=this;for(var i=0,o=this._listeners.length;i<o;i++){var r=this._listeners[i],n=r[t];n&&n.apply(r,e)}},e.prototype.fireConfirmEvent=function(t){var e=Array.prototype.slice.call(arguments,0);e[0]=this;for(var i=0,o=this._listeners.length;i<o;i++){var r=this._listeners[i],n=r[t];if(n){var s=n.apply(r,e);if("boolean"==typeof s&&!s)return!1}}return!0},e.prototype.fireMessageEvent=function(t){var e=Array.prototype.slice.call(arguments,0);e[0]=this;for(var i=0,o=this._listeners.length;i<o;i++){var r=this._listeners[i],n=r[t];if(n){var s=n.apply(r,e);if("string"==typeof s&&s)return s}}return null},e.prototype.fireObjectEvent=function(t){var e=Array.prototype.slice.call(arguments,0);e[0]=this;for(var i=0,o=this._listeners.length;i<o;i++){var r=this._listeners[i],n=r[t];if(n){var s=n.apply(r,e);if(null!=s)return s}}return null},e}(Lt),Pe=["yy","yyyy","YY","YYYY","M","MM","d","dd","a","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","T","t","Z","z","+"],ke=[".","/","-",":"],Te="A".charCodeAt(0),De="a".charCodeAt(0),Me="Y".charCodeAt(0),Fe="y".charCodeAt(0),Le="M".charCodeAt(0),Ne="m".charCodeAt(0),$e="d".charCodeAt(0),Ae="H".charCodeAt(0),Ve="h".charCodeAt(0),Be="S".charCodeAt(0),je="s".charCodeAt(0),He=function(t,e,i){void 0===i&&(i=0);var o=t.toString();return i&&o.length>=i?o.substr(0,i):(e=Math.max(o.length,e),("0000"+t.toString()).substr(-e))},Ge=function(){function t(t){this.format=t}return t.getFormatter=function(e){var i=t.Formatters[e];return i||(t.Formatters[e]=i=new t(e)),i},Object.defineProperty(t,"Default",{get:function(){return t.getFormatter(t.DEFAULT_FORMAT)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(e){(e=e||t.DEFAULT_FORMAT)!=this._format&&(this._tokens=[],this.parse(e),this._format=e)},enumerable:!1,configurable:!0}),t.prototype.getText=function(t){if(!this._tokens)return"";var e=this._hasUTC,i=new Date(t);e||null==this._timeOff||(i=new Date(i.getTime()+60*i.getTimezoneOffset()*1e3+this._timeOff));for(var o=this._tokens,r="",n=e?i.getUTCHours():i.getHours(),s=0,a=o.length;s<a;s++){var l=o[s],h=l.length;switch(l.charCodeAt(0)){case Me:case Fe:r+=He((e?i.getUTCFullYear():i.getFullYear())%Math.pow(10,h),h);break;case Le:r+=He((e?i.getUTCMonth():i.getMonth())+1,h);break;case $e:r+=He(e?i.getUTCDate():i.getDate(),h);break;case Ae:r+=He(n,h);break;case Ve:r+=He(this._hasAmPm?0==n?12:n>12?n-12:n:n,h);break;case Ne:r+=He(e?i.getUTCMinutes():i.getMinutes(),h);break;case je:r+=He(e?i.getUTCSeconds():i.getSeconds(),h);break;case De:case Te:r+=n<12?this._amText:this._pmText;break;case Be:r+=He(e?i.getUTCMilliseconds():i.getMilliseconds(),h,h);break;default:r+=l}}if(!e&&null!=this._timeOff){var u=this._timeOff>=0?"+":"-",c=Math.abs(this._timeOff/6e4);r+=u+"".concat(He(Math.floor(c/60),2),":").concat(He(c%60,2))}return r},t.prototype.parseDateFormatTokens=function(t){var e=[];if(t){var i,o=t.trim(),r=0;if(i=o.match(/([+\-])(\d\d)?(:)?(\d\d)?$/)){var n=i[1];if(null==i[2])this._timeOff=60*-(new Date).getTimezoneOffset()*1e3;else{var s=parseInt(i[2]),a=parseInt(i[4]||"00");this._timeOff=60*(60*s+a)*1e3,"-"===n&&(this._timeOff=-this._timeOff)}o=o.substr(0,i.index)}for(var l=o.length;r<l;){var h=o.charAt(r);if(ke.indexOf(h)>=0)e.push(h),r++;else{for(var u=r++;r<l&&o.charAt(r)==h;)r++;if(h=o.substring(u,r),Pe.indexOf(h)<0&&/[a-zA-Z\+]/.test(h[0]))throw new Error("Invalid datetime write format: "+t);e.push(h)}if(r<l&&Rt.isWhiteSpace(h=o.charAt(r)))for(e.push(h);r<l&&Rt.isWhiteSpace(o.charAt(r));)r++}}return e},t.prototype.parse=function(e){if(this._amText="AM",this._pmText="PM",e){var i=e.split(";");this._format=i[0]||t.DEFAULT_FORMAT,this._tokens=this.parseDateFormatTokens(this._format),this._hasAmPm=this._tokens.indexOf("a")>=0||this._tokens.indexOf("A")>=0,this._hasUTC=this._tokens.indexOf("z")>0||this._tokens.indexOf("Z")>0;var o=void 0;if(i.length>2?o=i[2]:i.length>1&&i[1]&&(o=i[1]),o){var r=o.split(",");r.length>0&&r[0]&&(this._amText=r[0]||this._amText),r.length>1&&r[1]&&(this._pmText=r[1]||this._pmText)}}},t.DEFAULT_FORMAT="yyyy/MM/dd",t.Formatters={},t}(),We=function(){function t(t){this.$_parse(this._format=t)}return t.getFormatter=function(e){var i=t.Formatters[e];return i||(t.Formatters[e]=i=new t(e)),i},Object.defineProperty(t.prototype,"format",{get:function(){return this._format},enumerable:!1,configurable:!0}),t.prototype.formatValue=function(t){return void 0===t?this._nullText:t?this._trueText:this._falseText},t.prototype.$_parse=function(t){if(this._falseText=this._trueText=null,t){var e=t.split(/[;\:]/);this._falseText=e[0],e.length>0&&(this._trueText=e[1]),e.length>1&&(this._nullText=e[2])}},t.Formatters={},t}(),Ue=function(){function t(){}return Object.defineProperty(t,"messages",{get:function(){return t.currentMessages?t.currentMessages:this.currentMessages=Rt.assign({},t.defaultMessages)},enumerable:!1,configurable:!0}),t.setMessages=function(e){t.currentMessages=Rt.assign({},t.defaultMessages,e)},t.defaultMessages={dateEditorCancelLabel:"Cancel",dateEditorDeleteLabel:"Delete",dateEditorHourLabel:"시",dateEditorMinuteLabel:"분",dateEditorMonths:void 0,dateEditorSaveLabel:"Save",dateEditorSecondLabel:"초",dateEditorTodayLabel:"Today",dateEditorWeekDays:["일","월","화","수","목","금","토"],dateEditorYearDisplayFormat:"{Y}년",dateEditorMonthDisplayFormat:"{M}월",dateEditorYearMonthDisplayFormat:void 0,searchEditorMoreText:"더보기",checkListAcceptText:"Accept",checkListCancelText:"Cancel",checkListAllCheckText:"Check All",filterSelectorAcceptText:"확인",filterSelectorAllCheckText:"(전체 선택)",filterSelectorCancelText:"취소",filterSelectorEmptyFilterText:"(값 없음)",filterSelectorFilterResetText:"초기화",filterSelectorFiltersResetText:"전체 초기화",filterSelectorSearchPlaceholder:"검색...",filterSelectorSearchedCheckText:"(조회 전체 선택)",filterSelectorDateYearFormat:"{YYYY}년도",filterSelectorDateQuarterFormat:"{Q}사분기",filterSelectorDateMonthFormat:"{M}월",filterSelectorDateDayFormat:"YYYY-MM-DD",filterSelectorHourFormat:"{H}시",filterSelectorMinuteFormat:"{M}분",filterSelectorSecondFormat:"{S}초",filterToastMessage:"Filtering...",dataDropProxyLabel:"${rows}행 ${mode}",dataDropModeMove:"이동",dataDropModeCopy:"복사",groupingPrompt:"컬럼 헤더를 이 곳으로 끌어다 놓으면 그 컬럼으로 그룹핑합니다.",groupingToastMessage:"Grouping...",groupResetText:"초기화",displayEmptyMessage:"표시할 데이타가 없습니다.",filterOperatorContains:"포함",filterOperatorNotContains:"포함하지 않음",filterOperatorStartsWith:"시작 문자",filterOperatorEndsWith:"끝 문자",filterOperatorEqual:"같음",filterOperatorNotEqual:"같지 않음",filterOperatorEmpty:"값 없음",filterOperatorReset:"초기화",filterOperatorGreater:"보다 큼",filterOperatorGreaterEqual:"크거나 같음",filterOperatorLower:"보다 작음",filterOperatorLowerEqual:"작거나 같음",filterOperatorBetween:"범위",invalidDatetimeFormat1:"Invalid datetime read format - 'H'와 'a'가 같이 존재할 수 없습니다: ",invalidDatetimeFormat2:"Invalid datetime read format - 'h'가 있으면 'a'가 반드시 있어야 합니다: ",commitEditingMessage:"먼저 편집을 완료 하십시오.",deleteRowsMessage:"선택된 행(들)을 삭제하시겠습니까?",invalidFormatMessage:"잘못된 입력 유형입니다.",decimalSeparator:".",thousandsSeparator:",",sortingToastMessage:"Sorting...",exportProgressMessage:"Exporting...",rowIndicatorHeadText:"No.",rowIndicatorFootText:"Σ",rowIndicatorSumText:"Σ",stateTextCreateAndDeleted:"X",stateTextCreated:"C",stateTextDeleted:"D",stateTextUpdated:"U",rowOutOfBounds:"row is out of bounds: ",fieldIndexOutOfBounds:"fieldIndex is out of bounds: ",fieldNameMustExists:"fieldName must be exists.",fieldNameAlreadyExists:"fieldName is already exists: ",clientEditingError:"Client is editing (call grid.commit() or grid.cancel() first)",gridElementAttachFail:"Grid is already contained ContainerDiv",gridContainerNotFind:"Invalid grid container element: ",multiSelectionCopyFailText:"multi selection copy not supported",multiSelectionPasteFailText:"multi selection paste not supported"},t}(),Ye=function(){function t(){}return Object.defineProperty(t,"currency",{get:function(){return t._currency},enumerable:!1,configurable:!0}),Object.defineProperty(t,"locale",{get:function(){return t._locale},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numberFormats",{get:function(){return t._numberFormats||(t._numberFormats=Rt.assign({},t.defNumberFormats())),t._numberFormats},enumerable:!1,configurable:!0}),t.defNumberFormats=function(){var e=t._currency||"KRW";return{number:{style:"decimal",excelFormat:"#,##0.0"},currency:{style:"currency",currency:e,excelFormat:"KRW"===e?"₩#,##0":void 0},accounting:{style:"currency",currency:e,currencySign:"accounting"}}},t.getNumberFormatter=function(e){var i=t._numberFormats;i||(i=t._numberFormats=Rt.assign({},t.defNumberFormats()));var o=i[e];if(o){var r=o.formatter;return r||(r=o.formatter=new Intl.NumberFormat(t._locale||navigator.language,o)),r}},t.addNumberFormat=function(e,i,o){var r=t._numberFormats;if(i&&e)return r||(r=t._numberFormats=Rt.assign({},t.defNumberFormats())),r[e]&&(!o&&console.warn("numberFormat name is already exists: "+e),!o)||(r[e]=i),e},t.setLocale=function(e){if(t._locale=e.locale||navigator.language,Rt.setLanguage(t._locale),t._currency=e.currency||"KRW",t._numberFormats=Rt.assign({},t.defNumberFormats()),e.numberFormats)for(var i in e.numberFormats)t.addNumberFormat(i,e.numberFormats[i],!0);e.messages&&Ue.setMessages(e.messages)},t.getLocale=function(){var e={locale:t._locale||navigator.language,currency:t._currency||"KRW"};return e.messages=Rt.assign({},Ue.messages),e.numberFormats=Rt.assign({},e.numberFormats||t.defNumberFormats()),e},t}(),ze=function(t){return Rt.included(t,"c","f","C","F","a","A")},qe=function(){function t(t){this._groupPos=0,this._replacement="$&,",this.parse(this._format=t)}return t.getFormatter=function(e){var i=t.Formatters[e];return i||(t.Formatters[e]=i=new t(e)),i},Object.defineProperty(t,"Default",{get:function(){return t.getFormatter(t.DEFAULT_FORMAT)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._format},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"separator",{get:function(){return this._seperator},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"groupSep",{get:function(){return this._groupSep},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minDigits",{get:function(){return this._minDigits},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxDigits",{get:function(){return this._maxDigits},enumerable:!1,configurable:!0}),t.prototype.parse=function(t){this._minDigits=0,this._maxDigits=0,this._parse(t)},t.prototype.getText=function(t,e){void 0===e&&(e=!0);var i=Number(t);if(isNaN(i))return"";if((Ye.numberFormats||{}).hasOwnProperty(this._format)){var o=Ye.getNumberFormatter(this._format);return o&&o.format(t)}var r=this._minDigits,n=0;if(this._optDecimal){var s=(l=(""+i).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(l[1]?l[1].length:0)-(l[2]?+l[2]:0)):0;r=Math.min(Math.max(s,this._minDigits),this._maxDigits)}if(this._round)switch(n=Math.pow(10,r),this._round){case"c":i=Math.ceil(n*i)/n;break;case"f":var a=i.toString().split(".");i=parseFloat(a.length>1?a[0]+"."+a[1].substr(0,r):a[0])}i="a"===this._round?Math.abs(i):i;var l,h=(i=Number(i.toPrecision(15))).toFixed(r);return!e&&(n=parseFloat(h))===Math.abs(parseFloat(h))&&0===n&&(h=Math.abs(i).toFixed(r)),this._seperator&&(h=h.replace(".",this._seperator)),this._reg?r?h.replace(this._regDecimal,this._replacement):h.replace(this._reg,this._replacement):h},t.prototype._parse=function(t){if((t&&(t=t.trim()),t)&&!(Ye.numberFormats||{}).hasOwnProperty(t)){var e=Ue.messages.decimalSeparator,i=Ue.messages.thousandsSeparator;if(t.indexOf(";")>-1){var o=t.split(";");t=o[0],o.length>1&&o[1]&&!ze(o[1])&&(e=o[1]),o.length>2&&o[2]&&!ze(o[2])&&(i=o[2]),this._round=o[3]||o[2]||o[1],this._round=ze(this._round)?this._round.toLowerCase():this._round}this._seperator="."==e?null:e,this._groupSep=","==i?null:i;var r=t.length,n=t.indexOf(".");if(this._optDecimal=t.indexOf("#",n)>0,n>=0){for(var s=n+1;s<r&&"0"==t.charAt(s);s++)this._minDigits++,this._maxDigits++;for(;s<r&&"#"==t.charAt(s);s++)this._maxDigits++;t=t.substr(0,n)}if(t){var a=t.length;","==t.charAt(a-1)&&(this._groupPos=3,t=t.substr(0,a-1))}if(t){var l=t.length,h=!0;for(s=l-1;s>=0;s--){var u=t.charAt(s);if("0"==u&&h);else if(0==this._groupPos&&","==u)this._groupPos=l-s-1;else{if("#"!=u)break;h=!1}}}this._groupPos>0&&(this._replacement="$&"+i,this._reg=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+($|\\"+e+"))","g"),this._regDecimal=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+\\"+e+")","g"))}},t.DEFAULT_FORMAT="#,##0.0",t.Formatters={},t}(),Ke=function(t){function e(e){var i=t.call(this)||this;return i._datetimeWriter=null,i._booleanFormatter=null,i._numberFormatter=null,i.assignFrom(e),i}return o(e,t),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?Ge.getFormatter(t):null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._booleanFormatter=t?We.getFormatter(t):null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?qe.getFormatter(t):null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"datetimeCallback",{get:function(){return this._datetimeCallback},set:function(t){this._datetimeCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"booleanCallback",{get:function(){return this._booleanCallback},set:function(t){this._booleanCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberCallback",{get:function(){return this._numberCallback},set:function(t){this._numberCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nullDateText",{get:function(){return this._nullDateText},set:function(t){this._nullDateText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nullText",{get:function(){return this._nullText},set:function(t){this._nullText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nanText",{get:function(){return this._nanText},set:function(t){this._nanText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowState",{get:function(){return this._rowState},set:function(t){this._rowState=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormatter",{get:function(){return this._booleanFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!1,configurable:!0}),e}(Lt),Xe=function(){function t(){}return Object.defineProperty(t,"summaryMode",{get:function(){return t._summaryMode},enumerable:!1,configurable:!0}),Object.defineProperty(t,"fixed",{get:function(){return t._fixed||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"display",{get:function(){return t._display||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"format",{get:function(){return t._format||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"edit",{get:function(){return t._edit||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"editor",{get:function(){return t._editor||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"copy",{get:function(){return t._copy||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"paste",{get:function(){return t._paste||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"sorting",{get:function(){return t._sorting||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"filtering",{get:function(){return t._filtering||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"dataDrop",{get:function(){return t._dataDrop||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"rowIndicator",{get:function(){return t._rowIndicator||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"checkBar",{get:function(){return t._checkBar||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"stateBar",{get:function(){return t._stateBar||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"header",{get:function(){return t._header||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"footer",{get:function(){return t._footer},enumerable:!1,configurable:!0}),Object.defineProperty(t,"footers",{get:function(){return t._footers||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"headerSummary",{get:function(){return t._headerSummary||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"headerSummaries",{get:function(){return t._headerSummaries||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"hideDeletedRows",{get:function(){return t._hideDeletedRows},enumerable:!1,configurable:!0}),Object.defineProperty(t,"sortMode",{get:function(){return t._sortMode},enumerable:!1,configurable:!0}),Object.defineProperty(t,"groupSummaryMode",{get:function(){return t._groupSummaryMode},enumerable:!1,configurable:!0}),Object.defineProperty(t,"filterOr",{get:function(){return t._filterOr},enumerable:!1,configurable:!0}),Object.defineProperty(t,"filterMode",{get:function(){return t._filterMode},enumerable:!1,configurable:!0}),Object.defineProperty(t,"rowGroup",{get:function(){return t._rowGroup||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"groupPanel",{get:function(){return t._groupPanel||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"grouping",{get:function(){return t._grouping||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"filterPanel",{get:function(){return t._filterPanel||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"dataOptions",{get:function(){return t._dataOptions||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"mobile",{get:function(){return t._mobile||{}},enumerable:!1,configurable:!0}),t.setDefaultOptions=function(e,i){e&&(t._fixed=Rt.assign({},e.fixed),t._display=Rt.assign({},e.display),t._format=Rt.assign({},e.format),t._edit=Rt.assign({},e.edit),t._editor=Rt.assign({},e.editor),t._copy=Rt.assign({},e.copy),t._paste=Rt.assign({},e.paste),t._sorting=Rt.assign({},e.sorting),t._filtering=Rt.assign({},e.filtering),t._dataDrop=Rt.assign({},e.dataDrop),t._rowIndicator=Rt.assign({},e.rowIndicator),t._checkBar=Rt.assign({},e.checkBar),t._stateBar=Rt.assign({},e.stateBar),t._header=Rt.assign({},e.header),t._footer=Rt.assign({},e.footer),t._footers=Rt.assign({},e.footers),t._headerSummary=Rt.assign({},e.headerSummary),t._headerSummaries=Rt.assign({},e.headerSummaries),void 0!==e.hideDeleted&&(t._hideDeletedRows=e.hideDeletedRows),void 0!==e.hideDeletedRows&&(t._hideDeletedRows=e.hideDeletedRows),void 0!==e.sortMode&&(t._sortMode=e.sortMode),void 0!==e.summaryMode&&(t._summaryMode=e.summaryMode),void 0!==e.inclusiveFiltering&&(t._filterOr=e.inclusiveFiltering),void 0!==e.filterOr&&(t._filterOr=e.filterOr),void 0!==e.filterMode&&(t._filterMode=e.filterMode),t._groupPanel=Rt.assign({},e.groupPanel),void 0!==e.groupSummaryMode&&(t._groupSummaryMode=e.groupSummaryMode),t._rowGroup=Rt.assign({},e.rowGroup),t._groupPanel=Rt.assign({},e.groupPanel),t._grouping=Rt.assign({},e.grouping),t._filterPanel=Rt.assign({},e.filterPanel),t._mobile=Rt.assign({},e.mobile)),i&&(t._dataOptions=Rt.assign({},i))},t}(),Ze=function(){function e(){}return e.prototype.compare=function(e,i,o){return e.dataType==t.ValueType.NUMBER?Number(i)-Number(o):i>o?1:i<o?-1:0},e}(),Je=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(Error),Qe=function(t){function e(){return t.call(this,Ue.messages.clientEditingError)||this}return o(e,t),e}(Error),ti=function(e){function i(){var i=e.call(this)||this;return i._subTypeEnabled=!0,i._undoable=!1,i._insertable=!0,i._updatable=!0,i._deletable=!0,i._softDeleting=!1,i._deleteCreated=!1,i._checkStates=!0,i._restoreMode=t.RestoreMode.NONE,i._strictRestore=!1,i._booleanFormat=null,i._datetimeFormat=null,i._baseYear=2e3,i._amText="AM",i._pmText="PM",i._alertClientError=!0,i._throwClientError=!1,i._fields=[],i._calcFields=[],i._fieldNames=[],i._fieldMap={},i._defComparer=new Ze,i._comparers=[],i._boolParser=Tt.Default,i._dateParser=Mt.Default,i._eventLock=0,i._resetLock=0,i._countLock=0,i._clients=[],i.assignFrom(Xe.dataOptions),i}return o(i,e),i.getUniqueValues=function(e,i){return Object.keys(e.reduce((function(t,e){return t[e]=!0,t}),{})).map((function(e){if("null"===e)return null;if("undefined"!==e)switch(i){case t.ValueType.NUMBER:case t.ValueType.UNUM:return parseFloat(e);case t.ValueType.UINT:case t.ValueType.INT:return parseInt(e);case t.ValueType.DATE:case t.ValueType.DATETIME:return new Date(parseInt(e));case t.ValueType.BOOLEAN:return"false"!==e&&("true"===e||void 0);default:return e}}))},i.prototype._doDispose=function(){try{this.$_internalClearFields(),this._fieldMap=null}catch(t){Rt.log("DataSource dispose catch error")}this._fields=this._calcFields=this._fieldNames=this._fieldMap=this._boolParser=this._dateParser=this._comparers=this._clients=this._defComparer=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"subTypeEnabled",{get:function(){return this._subTypeEnabled},set:function(t){if(t!=this._subTypeEnabled){this._subTypeEnabled=t;for(var e=0,i=this._fields;e<i.length;e++){i[e].$_resetTypes()}}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"insertable",{get:function(){return this._insertable},set:function(t){this._insertable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"updatable",{get:function(){return this._updatable},set:function(t){this._updatable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deletable",{get:function(){return this._deletable},set:function(t){this._deletable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"softDeleting",{get:function(){return this._softDeleting},set:function(t){this._softDeleting=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deleteCreated",{get:function(){return this._deleteCreated},set:function(t){this._deleteCreated=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkStates",{get:function(){return this._checkStates},set:function(t){t!=this._checkStates&&(this._checkStates=t,this._doCheckStatesChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"restoreMode",{get:function(){return this._restoreMode},set:function(t){if(t!=this._restoreMode){var e=this._restoreMode;this._restoreMode=t,this._doRestoreModeChanged(e,t)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"strictRestore",{get:function(){return this._strictRestore},set:function(t){this._strictRestore=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolParser=t?new Tt(t):Tt.Default)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this.$_createDateReader())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"baseYear",{get:function(){return this._baseYear},set:function(t){this._baseYear=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t,this.$_createDateReader())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t,this.$_createDateReader())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"alertClientError",{get:function(){return this._alertClientError},set:function(t){this._alertClientError=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"throwClientError",{get:function(){return this._throwClientError},set:function(t){this._throwClientError=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"calculateRuntime",{get:function(){return this._calculateRuntime||(this._calculateRuntime=new Oe),this._calculateRuntime},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldCount",{get:function(){return this._fields.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"boolParser",{get:function(){return this._boolParser},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dateParser",{get:function(){return this._dateParser},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"eventLocked",{get:function(){return this._eventLock>0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valuesCallback",{get:function(){return this._valuesCallback},set:function(t){this._valuesCallback=t},enumerable:!1,configurable:!0}),i.prototype.registerClient=function(t){t&&this._clients.indexOf(t)<0&&this._clients.push(t)},i.prototype.unregisterClient=function(t){if(t){var e=this._clients.indexOf(t);e>=0&&this._clients.splice(e,1)}},i.prototype.cancelClients=function(){for(var t=0,e=this._clients;t<e.length;t++){e[t].cancelDataEditing()}},i.prototype.commitClients=function(){for(var t=0,e=this._clients;t<e.length;t++){e[t].commitDataEditing()}},i.prototype.beginUpdate=function(){this._checkClientState(),this._eventLock++},i.prototype.endUpdate=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this._checkClientState(),this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&(t&&(this._resetLock>0?(this.clearCommandStack(),this._fireReset(e)):this._fireRefresh(),this._countLock>0&&this._fireRowCountChanged()),this._resetLock=this._countLock=0)},i.prototype.addField=function(t,e,i){if(this._checkClientState()){var o;this.beginUpdate();try{(o=this.$_internalAddField(t))&&o.$_resetTypes(this)}finally{e?this._doFieldsReset():this._resetLock++,i&&this._reCalculateFields(),this.endUpdate(!0,!1)}return o}},i.prototype.removeField=function(t,e){var i;if(this._checkClientState()&&t&&("string"==typeof t?i=this.fieldByName(t):t instanceof Ee?i=t:"object"==typeof t&&t.fieldName&&(i=this.fieldByName(t.fieldName)),i)){this.beginUpdate();try{this.$_internalRemoveField(i)}finally{e?this._doFieldsReset():this._resetLock++,this.endUpdate(!0,!1)}}},i.prototype.updateField=function(t,e){var i=0,o=this._calcFields;if(t.calculated&&o.indexOf(t)<0){i=o.length;for(var r=0;r<o.length;r++)if(o[r].index>=t.index){i=r;break}o.splice(i,0,t)}else t.calculated||(i=o.indexOf(t))>=0&&o.splice(i,1);if(e&&t.calculated){this.beginUpdate();try{this._reCalculateFields(t)}finally{this.endUpdate(!0)}}},i.prototype.clearFields=function(){this._checkClientState()&&this._fields.length>0&&(this.$_internalClearFields(),this._doFieldsReset())},i.prototype.setFields=function(t){if(this._checkClientState()){this.beginUpdate();try{if(this.$_internalClearFields(),t)for(var e=0,i=t.length;e<i;e++){var o=this.$_internalAddField(t[e]);o&&o.$_resetTypes(this)}}finally{this.endUpdate(),this._doFieldsReset()}}},i.prototype.getField=function(t){return"string"==typeof t&&(t=this.getFieldIndex(t)),this._fields[t]},i.prototype.getFields=function(){return this._fields.slice()},i.prototype.fieldByName=function(t){if(t)for(var e=t.toUpperCase(),i=0,o=this._fields;i<o.length;i++){var r=o[i];if(r.fieldName==e)return r}return null},i.prototype.getFieldNames=function(){for(var t=[],e=0;e<this._fields.length;e++)t.push(this._fields[e].fieldName);return t},i.prototype.getOrgFieldNames=function(){for(var t=[],e=0;e<this._fields.length;e++)t.push(this._fields[e].orgFieldName);return t},i.prototype.getFieldName=function(t){return this._checkFieldIndex(t),this._fields[t].fieldName},i.prototype.getOrgFieldName=function(t){return this._checkFieldIndex(t),this._fields[t].orgFieldName},i.prototype.getFieldIndex=function(t){if("number"==typeof t)return t;if(t){var e=t.toUpperCase();if(e in this._fieldMap)return this._fieldMap[e]}return-1},i.prototype.getFieldIndexC=function(t){return t in this._fieldMap?this._fieldMap[t]:-1},i.prototype.getBaseField=function(t){return t>=0&&t<this._fields.length?this.getFieldIndex(this._fields[t].baseField):-1},i.prototype.getValueType=function(t){return this._fields[t].dataType},i.prototype.getDefaultValue=function(t){return this._fields[t].defaultValue},i.prototype.objectToRow=function(t){var e,i=[],o=this._valuesCallback;if(o&&(e=o.call(this,this.$_handler,t))&&Array.isArray(e))return e.slice();if(t)for(var r=0,n=this.fieldCount;r<n;r++){var s=this.getOrgFieldName(r);(e&&e.hasOwnProperty(s)||t.hasOwnProperty(s))&&(i[r]=t[s])}return i},i.prototype.canUpdateField=function(e,i){if(i>=0&&i<this._fields.length){if(!this._fields[i].updatable&&e>=0)try{var o=this.getRowState(e);return!o||o==t.RowState.CREATED||o==t.RowState.CREATE_AND_DELETED}catch(t){return!1}return!0}return!1},i.prototype.getDataComparer=function(t){return t>=0&&this._comparers[t]},i.prototype.setDataComparer=function(t,e){this._comparers[t]=e},i.prototype.canSummarize=function(t){return t>=0&&t<this.fieldCount},i.prototype.canAppendRow=function(){return!1},i.prototype._convertValues=function(t,e){var i="*"in e&&"*"==e["*"]?t:{};for(var o in e)i[e[o]]=t[o];return i},i.prototype.getClientsBusy=function(){var t={busy:!1,cnt:0,client:null};if(this.disposing)return t;for(var e=this._clients.length;e--;)this._clients[e].isDataEditing()&&(t.busy=!0,t.cnt++,t.client=this._clients[e]);return t},i.prototype._checkClientState=function(){if(this.getClientsBusy().busy){if(this._throwClientError)throw new Qe;return this._alertClientError&&alert((new Qe).message),!1}return!0},i.prototype._checkFieldIndex=function(t){if(t<0||t>=this._fields.length)throw new Je(Ue.messages.fieldIndexOutOfBounds+t)},i.prototype.$_internalClearFields=function(){this._checkClientState();for(var t=0,e=this._fields;t<e.length;t++){e[t].$_setIndex(-1)}this._fields.splice(0,this._fields.length),this._calcFields.splice(0,this._calcFields.length),this._fieldNames.splice(0,this._fieldNames.length),this._fieldMap={}},i.prototype.$_internalInsertField=function(t,e){this._checkClientState();var i=this._fields.length;if(t<0||t>i)throw Rt.isDebugging(),new Je(Ue.messages.fieldIndexOutOfBounds+t);if(e){e.$_prepare(this),this._fields.splice(t,0,e),this._fieldNames.splice(t,0,e.fieldName),e.calculated&&this._calcFields.push(e),e.$_setIndex(t),this._fieldMap[e.fieldName]=t;for(var o=t+1;o<=i;o++)(e=this._fields[o]).$_setIndex(o),this._fieldMap[e.fieldName]=o;return t}return-1},i.prototype.$_internalRemoveField=function(t){if(this._checkClientState(),t){var e=t.index;this._fields.splice(e,1),this._fieldNames.splice(e,1),delete this._fieldMap[t.fieldName];for(var i=0;i<=this._fields.length-1;i++)(t=this._fields[i]).$_setIndex(i),this._fieldMap[t.fieldName]=i}},i.prototype.$_addField=function(t,e,i,o){if(!t)throw new Je(Ue.messages.fieldNameMustExists);if(this.getFieldIndex(t)>=0)throw new Je(Ue.messages.fieldNameAlreadyExists+t);var r=new Ee(t,e,i);o&&r.assignFrom(o);var n=o&&null!=o.index&&!isNaN(o.index)?o.index:this._fields.length;return this.$_internalInsertField(n,r),r},i.prototype.$_internalAddField=function(e){var i=null;return"string"==typeof e?i=this.$_addField(e,t.ValueType.TEXT,0):e instanceof Ee?(i=e.clone(),this.$_internalInsertField(this._fields.length,i)):e&&(i=this.$_addField(e.fieldName,e.dataType||t.ValueType.TEXT,e.length,e)),i},i.prototype._internalCalculateValues=function(t,e,i){var o=i?Rt.makeArray(i):this._calcFields;if(o.length>0){for(var r=[],n=0;n<t.length;n++)r[n]=this.getField(n).readValue(t[n]);n=0;for(var s=o.length;n<s;n++){var a=o[n],l=this._fieldMap[a.fieldName];t[l]=r[l]=a.readValue(a.$_calculateValue(this,this.calculateRuntime,e,a.orgFieldName,this._fieldNames,this.getOrgFieldNames(),r))}}},i.prototype.refreshFieldFormats=function(){for(var t=0,e=this._fields;t<e.length;t++){e[t].$_refreshFormats(this)}},i.prototype.refreshFieldFormat=function(t){t&&t.$_refreshFormats(this)},i.prototype._getRowValues=function(){return new Array(this.fieldCount)},i.prototype.$_createOutputRows=function(e,i,o){void 0===o&&(o=0);var r=this.fieldCount,n=e.length;i instanceof Ke||(i=new Ke(i));var s=i.nullDateText,a=i.nullText,l=i.nanText;try{for(var h=0;h<r;h++){var u=this.getField(h),c=u.dataType,d=u.orgFieldName,p=void 0,f=void 0,_=void 0,g=void 0,y=void 0,m=void 0;if(c==t.ValueType.DATETIME&&((p=i.datetimeCallback)||(g=i.datetimeWriter)||s))if(p)for(var b=0;b<n;b++){(C=e[b])[d]=p(this.handler,b+o,d,C[d])}else for(b=0;b<n;b++){var v=(C=e[b])[d];C[d]=v?g?g.getText(C[d]):v:s}else if(c==t.ValueType.BOOLEAN&&((f=i.booleanCallback)||(y=i.booleanFormatter)))if(f)for(b=0;b<n;b++){(C=e[b])[d]=f(this.handler,b+o,d,C[d])}else for(b=0;b<n;b++){(C=e[b])[d]=y.formatValue(C[d])}else if(c==t.ValueType.NUMBER&&((_=i.numberCallback)||(m=i.numberFormatter)||l))if(_)for(b=0;b<n;b++){(C=e[b])[d]=_(this.handler,b+o,d,C[d])}else for(b=0;b<n;b++){var w=(C=e[b])[d];C[d]=null==w||isNaN(w)?l:m?m.getText(w):w}else if(null!=a&&null!=a)for(b=0;b<n;b++){var C;w=(C=e[b])[d];C[d]=null==w||null==w?a:w}}}finally{i&&i.dispose()}},i.prototype.$_sortRows=function(t,e,i,o,r){do{var n=o,s=r,a=t[Math.floor((o+r)/2)];do{for(;n<=s&&!(i(e,a,t[n])<=0);)n++;for(;n<=s&&!(i(e,a,t[s])>=0);)s--;if(n<=s){if(n!=s){var l=t[n];t[n]=t[s],t[s]=l}n++,s--}}while(n<=s);o<s&&this.$_sortRows(t,e,i,o,s),o=n}while(o<r)},i.prototype.$_createDateReader=function(){this._datetimeFormat?(this._dateParser=new Mt(this._datetimeFormat),this._dateParser.amText=this._amText,this._dateParser.pmText=this._pmText,this._dateParser.baseYear=this._baseYear):this._dateParser=Mt.Default},i.prototype._doCheckStatesChanged=function(){},i.prototype._fireCommandStackChanged=function(t,e){this._eventLock<=0&&this.fireEvent(i.COMMAND_STACK_CHANGED,t,e)},i.COMMAND_STACK_CHANGED="onDataSourceCommandStackChanged",i}(Re),ei=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.connect=function(t){},e.prototype.disconnect=function(){},e.prototype.clearRows=function(){},e.prototype.setRows=function(){},e.prototype.setRowCount=function(t){},e.prototype.insertRow=function(t){},e.prototype.insertRows=function(t,e){},e.prototype.removeRow=function(t){},e.prototype.removeRows=function(t){},e.prototype.updateRow=function(t){},e.prototype.updateRows=function(t,e){},e.prototype.updateRowList=function(t){},e.prototype.setValue=function(t,e){},e.prototype.moveRow=function(t,e){},e.prototype.moveRows=function(t,e,i){},e.prototype.moveRowList=function(t,e){},e.prototype.changeStates=function(t){},e}(Lt),ii=function(t){function e(e){var i=t.call(this)||this;return i._tags=[],i._owner=e,i}return o(e,t),e.prototype._doDispose=function(){this._owner=null,this._tags=null,t.prototype._doDispose.call(this)},e.prototype.add=function(t){null!=this._tags&&t&&this._tags.indexOf(t)<0&&(this._tags.push(t),t.connect(this._owner))},e.prototype.remove=function(t){if(null!=this._tags&&t){var e=this._tags.indexOf(t);e>=0&&(this._tags.splice(e,1),t.disconnect())}},e.prototype.clearRows=function(){if(null!=this._tags)for(var t=0,e=this._tags;t<e.length;t++){e[t].clearRows()}},e.prototype.setRows=function(){if(null!=this._tags)for(var t=0,e=this._tags;t<e.length;t++){e[t].setRows()}},e.prototype.setRowCount=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++){i[e].setRowCount(t)}},e.prototype.insertRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++){i[e].insertRow(t)}},e.prototype.insertRows=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++){o[i].insertRows(t,e)}},e.prototype.removeRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++){i[e].removeRow(t)}},e.prototype.removeRows=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++){i[e].removeRows(t)}},e.prototype.updateRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++){i[e].updateRow(t)}},e.prototype.updateRows=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++){o[i].updateRows(t,e)}},e.prototype.updateRowList=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++){i[e].updateRowList(t)}},e.prototype.setValue=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++){o[i].setValue(t,e)}},e.prototype.moveRow=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++){o[i].moveRow(t,e)}},e.prototype.moveRows=function(t,e,i){if(null!=this._tags)for(var o=0,r=this._tags;o<r.length;o++){r[o].moveRows(t,e,i)}},e.prototype.moveRowList=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++){o[i].moveRowList(t,e)}},e}(Lt),oi=function(){function t(t){this._active=!1,this._exprNode=null,this.criteria=t}return t.prototype.dispose=function(){this._exprNode=null},Object.defineProperty(t.prototype,"criteria",{get:function(){return this._criteria},set:function(e){e!=this._criteria&&(this._criteria=e,this._exprNode=e?Ie.Default.parse(e,t.CAPITAL_INDEXERS):null)},enumerable:!1,configurable:!0}),t.prototype.select=function(t,e,i){return!this._exprNode||(t.setRow(e,i),this._exprNode.evaluate(t))},t.CAPITAL_INDEXERS=["value","values","len"],t}(),ri=function(){function t(e,i){this._filterMode=t.FILTER_AND,this._or=!1,this.load(e),i&&(this.filterMode=i)}return t.prototype.dispose=function(){return this._filters&&this._filters.forEach((function(t,e){t.dispose()})),this._filters=null,null},Object.defineProperty(t.prototype,"filterMode",{get:function(){return this._filterMode},set:function(e){var i=e?e.toLocaleLowerCase():e;i!=this._filterMode&&(this._filterMode=i,this._or=this._filterMode==t.FILTER_OR)},enumerable:!1,configurable:!0}),t.prototype.load=function(t){if(!t||t instanceof Array||(t=[t]),this._filters=[],t instanceof Array)for(var e=0,i=t.length;e<i;e++){var o=void 0,r=t[e];r&&("string"==typeof r?o=new oi(r):r.criteria&&(o=new oi(r.criteria))),o&&this._filters.push(o)}},t.prototype.prepare=function(t,e){t.prepare(e)},t.prototype.select=function(t,e,i){var o=this._filters,r=o.length;if(this._or){for(var n=0;n<r;n++)if(1==o[n].select(t,e,i))return!0;return!1}for(n=0;n<r;n++)if(0==o[n].select(t,e,i))return!1;return!0},t.FILTER_AND="and",t.FILTER_OR="or",t}(),ni=function(t){function e(){var e=t.call(this)||this;return e._ds=null,e._fieldCount=0,e._row=-1,e._values=null,e}return o(e,t),e.prototype._doDispose=function(){this._ds=null,t.prototype._doDispose.call(this)},e.prototype.prepare=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},e.prototype.setRow=function(t,e){this._row=t,this._values=e},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){if(t===e.ID_ROW)return this._row;throw new $t("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(i<0||i>=this._fieldCount)throw new $t("Data field index out of bounds:"+i);switch(t){case e.ID_VALUE:case e.ID_VALUES:return this._values[i]}throw new $t("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,i,o){switch(t){case e.ID_VALUE:case e.ID_VALUES:var r=this.getField(i,o);return this._values[r]}throw new $t("Invalid identifier indexer: "+t)},e.prototype.getField=function(t,e){var i=e?this._ds.getFieldIndexC(t):this._ds.getFieldIndex(t);if(i<0||i>=this._fieldCount)throw new $t("Data field is not exits:"+t);return i},e.ID_ROW=0,e.ID_VALUE=1,e.ID_VALUES=2,e.IDENTS={row:e.ID_ROW,value:e.ID_VALUE,values:e.ID_VALUES},e}(Wt),si=function(t){function e(){var e=t.call(this)||this;return e._tags=new ii(e),e._filterRuntime=new ni,e._commandListeners=[],e}return o(e,t),e.prototype._doDispose=function(){this._tags=this._tags.dispose(),this._filters=this._filters&&this._filters.dispose(),this._filterRuntime=this._filterRuntime.dispose(),this._commandListeners=null,this._fireDispose(),t.prototype._doDispose.call(this)},e.prototype.editCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filterRuntime",{get:function(){return this._filterRuntime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deletedCount",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tags",{get:function(){return this._tags},enumerable:!1,configurable:!0}),e.prototype.addTag=function(t){this._tags.add(t)},e.prototype.removeTag=function(t){this._tags.remove(t)},e.prototype.setFilterMode=function(t){this._filters&&t==this._filters.filterMode||(this._filters?this._filters.filterMode=t:this._filters=new ri(null,t))},e.prototype.setFilters=function(t,e){!t||t instanceof ri?(this._filters=t,this._filters&&e&&(this._filters.filterMode=e)):this._filters=new ri(t,e)},e.prototype.getRowObject=function(t){if(t<0||t>=this.rowCount)throw new Je(Ue.messages.rowOutOfBounds+t);for(var e={},i=0,o=this.fieldCount;i<o;i++){var r=this.getOrgFieldName(i),n=this.getValue(t,i);e[r]=n}return e},e.prototype.compareValues=function(t,e,i,o,r){return 0},e.prototype.compareTexts=function(t,e,i,o){return 0},e.prototype.compareNumbers=function(t,e,i,o){return 0},e.prototype.compareBools=function(t,e,i,o){return 0},e.prototype.compareObjects=function(t,e,i,o){return 0},e.prototype.summarize=function(t,e){return!1},e.prototype.summarizeRange=function(t,e,i){return!1},e.prototype.copyRows=function(t,e,i,o){},Object.defineProperty(e.prototype,"hiddenCount",{get:function(){return 0},enumerable:!1,configurable:!0}),e.prototype.isHiddenRow=function(t){return!1},e.prototype.registerCommandListener=function(t){t&&this._commandListeners&&this._commandListeners.indexOf(t)<0&&this._commandListeners.push(t)},e.prototype.unregisterCommandListener=function(t){var e=this._commandListeners?this._commandListeners.indexOf(t):-1;e>=0&&this._commandListeners.splice(e,1)},e.prototype.findRow=function(t,e,i){},e.prototype._doFieldsReset=function(){this._fireReset(!0)},e.prototype._keepCommandStates=function(t){if(this._commandListeners.length>0)return this._commandListeners[0].getCommandStates(t)},e.prototype._yieldCommandStates=function(t,e){if(this._commandListeners.length>0)return this._commandListeners[0].setCommandStates(t,e)},e.prototype._fireDispose=function(){this._eventLock<=0&&this.fireEvent("onDataProviderDisposed")},e.prototype._fireReset=function(t){this._eventLock<=0?this.fireEvent("onDataProviderReset",t):this._resetLock++},e.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent("onDataProviderRefresh")},e.prototype._fireRowCountChanged=function(){this._eventLock<=0?this.fireEvent("onDataProviderRowCountChanged"):this._countLock++},e.prototype.fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent("onDataProviderDataLoadComplated")},e.prototype.fireRowInserting=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowInserting",t,e)},e.prototype.fireRowInserted=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowInserted",t),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowsInserted=function(t,e){this._eventLock<=0&&(this.fireEvent("onDataProviderRowsInserted",t,e),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowRemoving",t)},e.prototype.fireRowRemoved=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowRemoved",t),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowsRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowsRemoving",t)},e.prototype.fireRowsRemoved=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowsRemoved",t),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowUpdating=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowUpdating",t,e,i)},e.prototype.fireRowUpdated=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowUpdated",t),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowsUpdated=function(t,e){this._eventLock<=0&&(this.fireEvent("onDataProviderRowsUpdated",t,e),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowListUpdated=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowListUpdated",t),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowMoving",t,e)},e.prototype.fireRowMoved=function(t,e){this._eventLock<=0&&this.fireEvent("onDataProviderRowMoved",t,e)},e.prototype.fireRowsMoving=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowsMoving",t,e,i)},e.prototype.fireRowsMoved=function(t,e,i){this._eventLock<=0&&this.fireEvent("onDataProviderRowsMoved",t,e,i)},e.prototype.fireRowListMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowListMoving",t,e)},e.prototype.fireRowListMoved=function(t,e){this._eventLock<=0&&this.fireEvent("onDataProviderRowListMoved",t,e)},e.prototype.fireValueChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderValueChanging",t,e,i)},e.prototype.fireValueChanged=function(t,e){this._eventLock<=0&&(this.fireEvent("onDataProviderValueChanged",t,e),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowStateChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onDataProviderStateChanged",t,e)},e.prototype.fireRowStatesChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onDataProviderStatesChanged",t,e)},e.prototype.fireRowStatesCleared=function(){this._eventLock<=0&&this.fireEvent("onDataProviderStatesCleared")},e.prototype.fireRestoreRows=function(t){this._eventLock<=0&&this.fireEvent("onDataProviderRestoreRows",t)},e.prototype.fireRowHided=function(t,e){this._eventLock<=0&&this.fireEvent("onDataProviderRowHided",t,e)},e}(ti),ai=function(t){function e(e){var i=t.call(this)||this;return i.fields=[],i.values=[],i.startIndex=0,i.wrap=!0,i.select=!0,i.allFields=!0,i.caseSensitive=!1,i.partialMatch=!1,i.compareCallback=null,i.reverse=!1,e&&i.extend(e),i}return o(e,t),e}(Lt),li=function(t){function e(e){var i=t.call(this)||this;return i.fields=null,i.value=null,i.startIndex=0,i.startFieldIndex=0,i.wrap=!0,i.select=!0,i.caseSensitive=!1,i.partialMatch=!1,i.columns=null,i.compareCallback=null,i.reverse=!1,e&&i.extend(e),i}return o(e,t),e}(Lt);!function(t){function e(e){return t.call(this,e)||this}o(e,t)}(Error);var hi=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){},e.prototype.undo=function(){},e.prototype.redo=function(t){},e.prototype.execute=function(){return this.redo(!1)},e}(Lt);!function(t){function e(){return t.call(this)||this}o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.undo=function(){},e.prototype.redo=function(t){},e.prototype.execute=function(){return this.redo(!1)}}(hi);var ui=function(t){function e(e){var i=t.call(this)||this;return i._commands=[],i._current=-1,i._undoing=!1,i._redoing=!1,i._owner=e,i}return o(e,t),e.prototype._doDispose=function(){this._owner=null,this._commands=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._commands.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canUndo",{get:function(){return this._current>=0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canRedo",{get:function(){return this._commands.length>this._current+1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"undoing",{get:function(){return this._undoing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"redoing",{get:function(){return this._redoing},enumerable:!1,configurable:!0}),e.prototype.undo=function(){if(this.canUndo){var t=this._commands[this._current];this._undoing=!0;try{t.undo()}finally{this._undoing=!1}this._current=this._current-1,this._changed()}},e.prototype.redo=function(t){var e;if(this.canRedo){var i=this._current+1,o=this._commands[i];this._redoing=!0;try{e=o.redo(!0)}finally{this._redoing=!1}this._current=i,this._changed()}return e},e.prototype.execute=function(t){if(t){var e=this._current++;this._commands[this._current]=t,this.$_shrink(this._current+1);var i=void 0;try{i=t.execute()}catch(t){throw this.$_shrink(e+1),this._current=e,t}return this._changed(),i}},e.prototype.flush=function(){var t=this._commands.length;if(t>0){for(;t--;)this._commands[t].dispose();this._commands=[],this._current=-1,this._changed()}},e.prototype._changed=function(){null!=this._owner&&this._owner.editCommandStackChanged(this,this.canUndo,this.canRedo)},e.prototype.$_shrink=function(t){if(t>=0&&t<this._commands.length){for(var e=this._commands.length-1;e>=t;e--)this._commands[e].dispose();this._commands.splice(t,this._commands.length-t)}},e}(Re),ci=function(t){function e(e){var i=t.call(this)||this;return i._ds=e,i}return o(e,t),e.prototype._doDispose=function(){this._ds=null,this._save=null,t.prototype._doDispose.call(this)},e.prototype.redo=function(t){return t?this._doRedo(this._ds,this._save):this._save=this._doRun(this._ds),this._save&&this._save.result},e.prototype.undo=function(){this._doUndo(this._ds,this._save)},e.prototype._setSoftDeleting=function(t,e){t._softDeleting=e},e.prototype._setDeleteCreated=function(t,e){t._deleteCreated=e},e.prototype._cloneRow=function(t){if(Rt.isArray(t))return t.slice();if(t){var e={};for(var i in t)e[i]=t[i];return e}},e.prototype._cloneValues=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=-1),t){var o=t.length,r=[];i<0&&(i=o),e=Math.max(0,e);for(var n=Math.min(o,e+i),s=e;s<n;s++){var a=t[s];if(Rt.isArray(a))r.push(a.slice());else if(a){var l={};for(var h in a)l[h]=a[h];r.push(l)}}return r}return null},e}(hi),di=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e}(ci),pi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(ui),fi=function(t){function e(e,i,o,r){var n=t.call(this,e)||this;return n._row=i,n._field=o,n._value=r,n}return o(e,t),e.prototype._doRun=function(t){var e={};return e.row=t._keepRow(this._row),(e.result=t.$_setValue(this._row,this._field,this._value))&&(this._newState=t.getRowState(this._row)),e},e.prototype._doRedo=function(t,e){t.$_setValue(this._row,this._field,this._value)},e.prototype._doUndo=function(t,e){t._yieldRow(this._row,e.row),e.row.state!=this._newState&&t.fireRowStateChanged(this._row,this._newState),t.fireValueChanged(this._row,this._field)},e}(di),_i=function(t){function e(e,i,o,r){var n=t.call(this,e)||this;return n._row=i,n._values=n._cloneRow(o),n._strict=r,n}return o(e,t),e.prototype._doDispose=function(){this._values=null,t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={};return e.row=t._keepRow(this._row),(e.result=t.$_updateRow(this._row,this._values,this._strict))&&(this._newState=t.getRowState(this._row)),e},e.prototype._doRedo=function(t,e){t.$_updateRow(this._row,this._values,this._strict)},e.prototype._doUndo=function(t,e){t._yieldRow(this._row,e.row),e.row.state!=this._newState&&t.fireRowStateChanged(this._row,this._newState),t.fireRowUpdated(this._row)},e}(di),gi=function(t){function e(e,i,o){var r=t.call(this,e)||this;return r._row=i,Rt.isArray(o)||(o=e.objectToRow(o)),r._values=o.slice(),r}return o(e,t),e.prototype._doRun=function(t){var e={};return e.result=t.$_insertRow(this._row,this._values),e},e.prototype._doRedo=function(t,e){t.$_insertRow(this._row,this._values)},e.prototype._doUndo=function(t,e){t.$_deleteRow(this._row)},e}(di),yi=function(t){function e(e,i){var o=t.call(this,e)||this;return o._row=i,o}return o(e,t),e.prototype._doRun=function(t){var e={};return this._softDeleting=t.softDeleting,e.row=t._keepRow(this._row),e.result=t.$_deleteRow(this._row),e},e.prototype._doRedo=function(t,e){var i=t.softDeleting;try{this._setSoftDeleting(t,this._softDeleting),t.$_deleteRow(this._row)}finally{this._setSoftDeleting(t,i)}},e.prototype._doUndo=function(t,e){t.$_insertRow(this._row,e.row.values),t._yieldStates(this._row,e.row),t._yieldCommandStates(this._row,e.row.outer)},e}(di),mi=function(t){function e(e,i,o,r){var n=t.call(this,e)||this;return n._row=i,n._state=o,n._force=r,n}return o(e,t),e.prototype._doRun=function(t){var e={};return e.row=t._keepStates(this._row),t.$_setRowState(this._row,this._state,this._force),e},e.prototype._doRedo=function(t,e){t.$_setRowState(this._row,this._state,this._force)},e.prototype._doUndo=function(t,e){t._yieldState(this._row,e.row.state),e.row.state!=this._state&&t.fireRowStateChanged(this._row,this._state)},e}(di),bi=function(t){function e(e,i,o){var r=t.call(this,e)||this;return r._row=i,r._state=o,r}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={};return e.state=t._keepState(this._row),t.$_changeRowState(this._row,this._state,!0,!0),e},e.prototype._doRedo=function(t,e){t.$_changeRowState(this._row,this._state,!0,!0)},e.prototype._doUndo=function(t,e){t._yieldState(this._row,e.state),e.state!=this._state&&t.fireRowStateChanged(this._row,this._state)},e}(di),vi=function(e){function i(t,i,o){var r=e.call(this,t)||this;return r._deleteRows=i,r._rowEvents=o,r}return o(i,e),i.prototype._doRun=function(t){var e={rows:[]};e.orgValues=t._keepOrgValues();var i=t.$_clearRowStates(this._deleteRows,this._rowEvents,!0);return e.rows=i.rows,e.states=i.states,e.values=i.values,e.rowIds=i.rowIds,e},i.prototype._doRedo=function(t,e){t.$_clearRowStates(this._deleteRows,this._rowEvents,!1)},i.prototype._doUndo=function(e,i){var o=i.rows,r=i.values,n=i.states,s=i.rowIds,a=[];if(r)for(var l=0;l<o.length;l++){var h=o[l];e.$_internalInsertRow(h,r[h],!0,s[h])}if(n)for(l=0;l<n.length;l++)n[l]&&(e._yieldState(l,n[l]),n[l]!==t.RowState.NONE&&a.push(l));e._yieldOrgValues(i.rows),(o.length>0||n.length>0)&&e._fireRefresh()},i}(di),wi=function(t){function e(e,i,o,r,n,s,a){var l=t.call(this,e)||this;return l._row=i,l._values=l._cloneValues(o,r,n),l._start=0,l._count=l._values.length,l._rowEvents=s,l._strict=a,l}return o(e,t),e.prototype._doDispose=function(){this._values=null,t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={};return t.$_updateRows(this._row,this._values,this._start,this._count,this._strict,this._rowEvents,e),e},e.prototype._doRedo=function(t,e){t.$_updateRows(this._row,this._values,this._start,this._count,this._strict,this._rowEvents,null)},e.prototype._doUndo=function(t,e){var i=e.rows;if(i&&!(i.length<1)){for(var o=e.values,r=e.states,n=e.orgValues,s=0;s<i.length;s++){var a=i[s];t.$_restoreRow(a,o[s],r[s],n[s])}t._fireRefresh()}},e}(di),Ci=function(t){function e(e,i,o){var r=t.call(this,e)||this;return r._rows=i.slice(),r._rowEvents=o,r}return o(e,t),e.prototype._doRun=function(t){var e={};return this._softDeleting=t.softDeleting,t.$_removeRows(this._rows,this._rowEvents,e),e},e.prototype._doRedo=function(t,e){var i=t.softDeleting;try{this._setSoftDeleting(t,this._softDeleting),t.$_removeRows(this._rows,this._rowEvents,null)}finally{this._setSoftDeleting(t,i)}},e.prototype._doUndo=function(t,e){var i=e.rows,o=e.statedRows;if(!(i.length<1&&o.length<1)){for(var r=e.rowSaves,n=e.states,s=0;s<i.length;s++){var a=i[s],l=r[s];t.$_internalInsertRow(a,l.values,!0),t._yieldRow(a,l,!1)}i.length&&t._fireRowCountChanged();for(s=0;s<o.length;s++){a=o[s];t._yieldState(a,n[s])}o.length&&t.fireRowStatesChanged(o,!0),i.length>0&&t._fireRefresh();for(s=0;s<i.length;s++){a=i[s];var h=r[s];t._yieldCommandStates(a,h.outer)}}},e}(di),xi=function(t){function e(e,i,o,r,n,s){var a=t.call(this,e)||this;return a._row=i,a._values=a._cloneValues(o,r,n),a._start=0,a._count=a._values.length,a._rowEvents=s,a}return o(e,t),e.prototype._doRun=function(t){return t.$_insertRows(this._row,this._values,this._start,this._count,this._rowEvents),{}},e.prototype._doRedo=function(t,e){t.$_insertRows(this._row,this._values,this._start,this._count,this._rowEvents)},e.prototype._doUndo=function(t,e){if(!this._rows){this._rows=[];for(var i=0;i<this._values.length;i++)this._rows.push(this._row+i)}var o=t.softDeleting;try{this._setSoftDeleting(t,!1),t.$_removeRows(this._rows,!1,null)}finally{this._setSoftDeleting(t,o)}},e}(di);function Ii(t,e){return t&&t.getAttribute(e)}var Si=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.csvToArray=function(t,e,i,o,r,n){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===r&&(r=!1),void 0===n&&(n=",");for(var s=[],a=[],l=e.length,h=0,u=[],c=!1,d=!1;h<l;){var p=e.charAt(h);'"'==p?c?d&&'"'==e.charAt(h+1)?(u.push(p),h++):d?(d=!1,!r&&u.push(p)):u.push(p):(c=d=!0,!r&&u.push(p)):d||p!=n&&"\r"!=p&&"\n"!=p?(c=!0,u.push(p)):(p==n?a.push(u.join("")):"\r"!=p&&"\n"!=p||(a.push(u.join("")),s.push(a),a=[],"\n"==e.charAt(h+1)&&h++),u=[],c=!1),h++}d&&u.splice(0,0,'"'),u.length>0&&a.push(u.join("")),a.length>0&&s.push(a),i>0&&(o<=0?s.splice(0,i):s=s.splice(i,o));for(var f=t.getFields(),_=f.length,g=_>0,y=0,m=s.length;y<m;y++){a=s[y],g&&a.length>_&&(a.length=_);for(var b=0;b<_;b++)a[b]=f[b].readValue(a[b])}return s},e.xmlToRow=function(t,e,i){for(var o=t.childNodes,r=e.length,n=new Array(r),s=0,a=o.length;s<a;s++){var l,h=o[s];if((l=i.indexOf(h.tagName))>=0){var u=h.nodeValue;null==u&&h.hasChildNodes()&&(u=Rt.included(h.childNodes[0].nodeType,3,4)?h.childNodes[0].nodeValue:void 0),null!=u&&(n[l]=u)}}for(s=0;s<r;s++)if(void 0===n[s]){var c=Ii(t,i[s]);null!=c&&(n[s]=c)}return n},e.xmlToArray=function(t,i,o,r){void 0===o&&(o=0),void 0===r&&(r=-1);var n=null,s=e.xmlToRow,a=i?i.length:0;if(a&&(o=Math.max(0,o),r<0&&(r=a),r=Math.min(a-o,r))){var l=t.getFields(),h=t.getOrgFieldNames();l.length,n=new Array(r);for(var u=0;u<r;u++){var c=s(i[u+o],l,h);n[u]=c}}return n},e}(Lt),Ei=function(t){function e(e,i,o){var r=t.call(this,e)||this;return r._row=i,r._newRow=o,r}return o(e,t),e.prototype._doRun=function(t){t.$_moveRow(this._row,this._newRow)},e.prototype._doRedo=function(t,e){t.$_moveRow(this._row,this._newRow)},e.prototype._doUndo=function(t,e){t.$_moveRow(this._newRow,this._row)},e}(di),Oi=function(t){function e(e,i,o,r){var n=t.call(this,e)||this;return n._row=i,n._count=o,n._newRow=r,n}return o(e,t),e.prototype._doRun=function(t){t.$_moveRows(this._row,this._count,this._newRow)},e.prototype._doRedo=function(t,e){t.$_moveRows(this._row,this._count,this._newRow)},e.prototype._doUndo=function(t,e){t.$_moveRows(this._newRow,this._count,this._row)},e}(di),Ri=function(t){function e(e,i,o){var r=t.call(this,e)||this;r._rows=i,r._newRows=i.slice();for(var n=o-i[0],s=0;s<i.length;s++)r._newRows[s]+=n;return r}return o(e,t),e.prototype._doRun=function(t){var e={};return e.result=t.$_moveRowList(this._rows,this._newRows[0]),e},e.prototype._doRedo=function(t,e){return t.$_moveRowList(this._rows,this._newRows[0])},e.prototype._doUndo=function(t,e){return t.$_moveRowList(this._newRows,this._rows[0])},e}(di),Pi=function(t){function e(e,i,o){var r=t.call(this,e)||this;return r._rowFields=Rt.deepCopy(i),r._value=o,r}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={};return t.$_fillValue(this._rowFields,this._value,e),e},e.prototype._doRedo=function(t,e){t.$_fillValue(this._rowFields,this._value,null)},e.prototype._doUndo=function(t,e){var i=e.rows;if(!(i.length<1)){for(var o=e.values,r=e.states,n=e.orgValues,s=0;s<i.length;s++){var a=i[s];t.$_restoreRow(a,o[s],r[s],n[s])}t._fireRefresh()}},e}(di),ki=function(e){function i(i,o,r,n,s){void 0===r&&(r=!1),void 0===n&&(n=null),void 0===s&&(s=t.RowState.NONE);var a=e.call(this,i)||this;return a._newCount=o,a._oldCount=i.rowCount,a._fillDefaults=r,a._defaultValues=n,a._rowState=s,a}return o(i,e),i.prototype._doRun=function(t){var e={};return t.$_setRowCount(this._newCount,this._fillDefaults,this._defaultValues,this._rowState,e),e},i.prototype._doRedo=function(t,e){t.$_setRowCount(this._newCount,this._fillDefaults,this._defaultValues,this._rowState,null)},i.prototype._doUndo=function(t,e){if(this._oldCount<this._newCount)t.$_setRowCount(this._oldCount);else if(this._oldCount>this._newCount){var i=e.rows,o=e.statedRows;if(i.length<1&&o.length<1)return;for(var r=e.rowSaves,n=e.states,s=0;s<i.length;s++){var a=i[s],l=r[s];t.$_internalInsertRow(a,l.values,!0),t._yieldRow(a,l,!1)}for(s=0;s<o.length;s++){a=o[s];t._yieldState(a,n[s])}t._fireRefresh();for(s=0;s<i.length;s++){a=i[s];var h=r[s];t._yieldCommandStates(a,h.outer)}}},i}(di),Ti=function(t){function e(e,i,o,r){var n=t.call(this,e)||this;return n._values=Rt.deepCopy(i),n._rowEvents=o,n._strict=r,n}return o(e,t),e.prototype._doDispose=function(){this._values=null,t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={};return t.$_updateRows2(this._values,this._strict,this._rowEvents,e),e},e.prototype._doRedo=function(t,e){t.$_updateRows2(this._values,this._strict,this._rowEvents,null)},e.prototype._doUndo=function(t,e){var i=e.rows;if(i&&!(i.length<1)){for(var o=e.values,r=e.states,n=e.orgValues,s=0;s<i.length;s++){var a=i[s];t.$_restoreRow(a,o[s],r[s],n[s])}t._fireRefresh()}},e}(di),Di=function(t){function e(e,i,o,r,n){var s=t.call(this,e)||this;return s._rows=i.slice(),s._state=o,s._force=r,s._rowEvents=n,s}return o(e,t),e.prototype._doRun=function(t){for(var e={},i=0;i<this._rows.length;i++){var o=this._rows[i];e[o]=t._keepStates(o)}return t.$_setRowStates(this._rows,this._state,this._force,this._rowEvents),e},e.prototype._doRedo=function(t,e){t.$_setRowStates(this._rows,this._state,this._force,this._rowEvents)},e.prototype._doUndo=function(t,e){for(var i=[],o=this._rows.length;o--;){var r=this._rows[o];t._yieldStates(r,e[r]),e[r].state!==this._state&&(this._rowEvents?t.fireRowStateChanged(r,this._state):i.push(r))}i.length>0&&t.fireRowStatesChanged(i,kt(this._state))},e}(di),Mi=function(t){function e(e,i){var o=t.call(this,e)||this;return o._rows=i&&i.slice(),o}return o(e,t),e.prototype._doDispose=function(){this._rows=null,t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={};return t.$_restoreUpdatedRows(this._rows,e),e},e.prototype._doRedo=function(t,e){t.$_restoreUpdatedRows(this._rows,null)},e.prototype._doUndo=function(t,e){var i=e.rows;if(i&&!(i.length<1)){for(var o=0;o<i.length;o++){var r=i[o],n=e[r],s=n.values,a=n.state,l=n.orgValues;t.$_restoreRow(r,s,a,l)}t._fireRefresh()}},e}(di),Fi=function(e){function i(t,i){var o=e.call(this)||this;return o._points=[],o._nextPoint=0,o._values=[],o._rowIds=[],o._rowStates=[],o._previousStates=[],o._orgValues=null,o._needRestore=!1,o._deletedCount=0,o._nextRowId=0,o._hiddenIds=[],o.$_handler=i,t&&(o.undoable=!0,o._commands=new pi(o)),o}return o(i,e),i.prototype._doDispose=function(){this._commands=this._commands&&this._commands.dispose(),this._values=this._rowIds=this._rowStates=this._previousStates=this._points=this._orgValues=this._hiddenIds=[],e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"handler",{get:function(){return this.$_handler},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoable",{get:function(){return this._undoable&&!!this._commands},set:function(t){t!=this.undoable&&(this._undoable=t,this._commands&&this._commands.flush())},enumerable:!1,configurable:!0}),i.prototype.getDataRow=function(t){return this._rowIds.indexOf(t)},Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._values.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deletedCount",{get:function(){return this._deletedCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return this._commands&&this._commands.canUndo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return this._commands&&this._commands.canRedo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return this._commands&&this._commands.undoing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return this._commands&&this._commands.redoing},enumerable:!1,configurable:!0}),i.prototype.getRowId=function(t){return this._rowIds[t]},i.prototype.$_internalInsertField=function(t,i){if((t=e.prototype.$_internalInsertField.call(this,t,i))>=0){for(var o=this._values.length,r=0;r<o;r++){(n=this._values[r])&&n.splice(t,0,void 0)}if(this._orgValues){o=Math.min(o,this._orgValues.length);for(r=0;r<o;r++){var n;(n=this._orgValues[r])&&n.splice(t,0,void 0)}}}return t},i.prototype.$_internalRemoveField=function(t){try{var i=t.index;if(i>=0){for(var o=0,r=this._values;o<r.length;o++){(a=r[o])&&a.splice(i,1)}if(this._orgValues)for(var n=0,s=this._orgValues;n<s.length;n++){var a;(a=s[n])&&a.splice(i,1)}}e.prototype.$_internalRemoveField.call(this,t)}catch(t){throw t}},i.prototype.$_internalClearFields=function(){e.prototype.$_internalClearFields.call(this),this.$_clearRows()},i.prototype.setRowCount=function(e,i,o,r){void 0===i&&(i=!1),void 0===o&&(o=null),void 0===r&&(r=t.RowState.NONE),this.undoable?this._commands.execute(new ki(this,e,i,o,r)):this.$_setRowCount(e,i,o,r)},i.prototype.$_setRowCount=function(e,i,o,r,n){if(void 0===i&&(i=!1),void 0===o&&(o=null),void 0===r&&(r=t.RowState.NONE),void 0===n&&(n=null),this._checkClientState()){var s=this._values,a=s.length,l=Math.max(0,e);if(l!=a){var h=this._rowIds,u=this._rowStates;if(this.refreshFieldFormats(),n&&(n.rows=[],n.rowSaves=[],n.statedRows=[],n.states=[]),l>a&&(i||o)){var c=this.fieldCount,d=o;if(!d||d instanceof Array||(d=this.objectToRow(d)),d&&d.length<1&&(d=null),i||d)for(var p=d?Math.min(d.length,c):0,f=a;f<l;f++){var _=[];if(i)for(var g=0;g<c;g++){var y=this.getField(g);_[g]=void 0!==y.defaultValue?y.defaultValue:y.nullValue}if(p>0)for(g=0;g<p;g++){var m=d[g];void 0!==m&&(_[g]=this.getField(g).readValue(m))}s[f]=_}}else if(l>a)for(f=a;f<l;f++)s[f]=[];else if(l<a){if(n)for(f=l;f<a;f++){var b=f;n.statedRows.push(b),n.states.push(u[f]),n.rows.push(b),n.rowSaves.push(this._keepRow(b))}if(this._deletedCount>0)for(f=a-1;f>=l;f--)kt(u[f])&&this._deletedCount--}r=this.checkStates&&r?r:t.RowState.NONE,s.length=h.length=u.length=l,this._orgValues&&this._orgValues.length>l&&(this._orgValues.length=l);for(f=a;f<l;f++)u[f]=r,h[f]=this._nextRowId++;for(f=this._hiddenIds.length-1;f>=0;f--){g=this._hiddenIds[f];h.indexOf(g)<0&&this._hiddenIds.splice(f,1)}this.tags.setRowCount(l),this._fireRefresh(),this._fireRowCountChanged()}}},i.prototype.$_clearRows=function(){this._values.length=0,this._rowIds.length=0,this._rowStates.length=0,this._hiddenIds.length=0,this._previousStates.length=0,this._orgValues?this._orgValues.length=0:this._orgValues=null,this._deletedCount=0,this.clearCommandStack(),this.tags.clearRows()},i.prototype.clearRows=function(){this._checkClientState()&&(this.$_clearRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated())},i.prototype.setRows=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=-1),this._checkClientState()&&0!=i){this.refreshFieldFormats(),this.beginUpdate();try{this.$_clearRows();var o=this.checkStates,r=this.filters,n=this.filterRuntime,s=void 0;if(t&&(s=t.length)>0&&e<s)if(e=Math.max(0,e),i=i<0?s:Math.min(i,s-e),r){this._values.length=this._rowIds.length=this._rowStates.length=i,r.prepare(n,this);for(var a=s,l=0,h=0,u=e;u<a&&l<i;u++){(c=t[u])instanceof Array||(c=this.objectToRow(c)),r.select(n,h++,c)&&this.$_internalSetRow(l++,c,o)}this._values.length=this._rowIds.length=this._rowStates.length=l}else{if((a=Math.min(s,e+i))>e){this._values.length=this._rowIds.length=this._rowStates.length=a-e;for(l=0,u=e;u<a;u++){var c;(c=t[u])instanceof Array||(c=this.objectToRow(c)),this.$_internalSetRow(l++,c,o)}}}}finally{this.endUpdate(!1),this.clearCommandStack()}this.tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated()}},i.prototype.setXmlRows=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._checkClientState()&&0!=i&&(t=Si.xmlToArray(this,t,e,i),this.setRows(t))},i.prototype.insertRows=function(t,e,i,o,r){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===r&&(r=!1),this.undoable?this._commands.execute(new xi(this,t,e,i,o,r)):this.$_insertRows(t,e,i,o,r)},i.prototype.$_insertRows=function(t,e,i,o,r){if(this._checkClientState()&&e){var n=e.length;if(!(n<1)&&0!=(o=o<0?n:Math.min(n,o))){if(t<0||t>this._values.length)throw new Je(Ue.messages.rowOutOfBounds+t);this.refreshFieldFormats(),i=Math.max(0,i);var s=Math.min(n,i+o);if(r)for(var a=t,l=i;l<s;l++){(h=e[l])instanceof Array||(h=this.objectToRow(h)),this.fireRowInserting(a,h)&&(this.$_internalInsertRow(a,h,!0,null),this.fireRowInserted(a),this._fireRowCountChanged(),a++)}else{for(a=t,l=i;l<s;l++,a++){var h;(h=e[l])instanceof Array||(h=this.objectToRow(h)),this.$_internalInsertRow(a,h,!1,null)}this.tags.insertRows(t,o=s-i),this.fireRowsInserted(t,o),this._fireRowCountChanged()}}}},i.prototype.appendRows=function(t,e,i,o){void 0===e&&(e=0),void 0===i&&(i=-1),void 0===o&&(o=!1),this.insertRows(this.rowCount,t,e,i,o)},i.prototype.insertRowsFrom=function(t,e,i,o){for(var r=[],n=0,s=i;n<s.length;n++){var a=s[n];r.push(t.getRowObject(a))}if(e)for(var l=i.length-1;l>=0;l--)r[l]=this._convertValues(r[l],e);this.insertRows(o,r)},i.prototype.appendRowsFrom=function(t,e,i){this.insertRowsFrom(t,e,i,this.rowCount)},i.prototype.insertXmlRows=function(t,e,i,o,r){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===r&&(r=!1),this._checkClientState()&&(e=Si.xmlToArray(this,e,i,o),this.insertRows(t,e,0,-1,r))},i.prototype.appendXmlRows=function(t,e,i,o){void 0===o&&(o=!1),this.insertXmlRows(this.rowCount,t,e,i,o)},i.prototype.fillValue=function(t,e){if(this.undoable)return this._commands.execute(new Pi(this,t,e));this.$_fillValue(t,e)},i.prototype.updateRows=function(t,e,i,o,r,n){if(void 0===n&&(n=!1),this.undoable)return this._commands.execute(new wi(this,t,e,i,o,n,r));this.$_updateRows(t,e,i,o,r,n)},i.prototype.updateRows2=function(t,e,i){if(this.undoable)return this._commands.execute(new Ti(this,t,i,e));this.$_updateRows2(t,e,i)},i.prototype.updateXmlRows=function(t,e,i,o,r){void 0===r&&(r=!1),this._checkClientState()&&(e=Si.xmlToArray(this,e,i,o),this.updateRows(t,e,0,-1,r))},i.prototype.getValue=function(t,e){this.$_checkRowIndex(t),this._checkFieldIndex(e);var i=this._values[t];return i?i[e]:void 0},i.prototype.setValue=function(t,e,i){return this.undoable?this._commands.execute(new fi(this,t,e,i)):this.$_setValue(t,e,i)},i.prototype.$_setValue=function(e,i,o){if(!this._checkClientState())return!1;this.$_checkRowIndex(e),this._checkFieldIndex(i);var r=this.getField(i),n=this._rowStates[e];if(!r)throw new Je(Ue.messages.fieldIndexOutOfBounds+i);if(!r.updatable&&(n==t.RowState.NONE||n==t.RowState.UPDATED))return!1;var s,a=this._values[e],l=r.readValue(o);if(a&&r.equalValues(l,a[i]))return!1;this.refreshFieldFormat(r);var h=this.checkStates&&(n==t.RowState.NONE||!n);return a||(this._values[e]=a=new Array(this.fieldCount)),h&&this._orgValues&&(s=a.concat()),a[i]=l,this._internalCalculateValues(a,e),h?(s&&(this._orgValues[e]=s),this.$_changeRowState(e,t.RowState.UPDATED,!0)):this._needRestore&&this.restoreState(e),this.tags.setValue(e,i),this.fireValueChanged(e,i),!0},i.prototype.updateRow=function(t,e,i){return this.undoable?this._commands.execute(new _i(this,t,e,i)):this.$_updateRow(t,e,i)},i.prototype.getRow=function(t){this.$_checkRowIndex(t);var e=this._values[t];return e?e.slice():[]},i.prototype.getRows=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1);var i=this._values.length,o=Math.max(0,t),r=e<0?i-1:Math.min(i-1,e);if(o>=i||r<o)return[];for(var n=r-o+1,s=new Array(n),a=0;a<n;a++)s[a]=this._values[a+o]?this._values[a+o].slice():[];return s},i.prototype.getRowObject=function(t,e){return this.$_checkRowIndex(t),this.$_getRowObject(t,e)},i.prototype.getRowObjects=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=-1);var o=this._values.length,r=Math.max(0,t),n=e<0?o-1:Math.min(o-1,e);if(r>=o||n<r)return[];for(var s=n-r+1,a=new Array(s),l=0;l<s;l++)a[l]=this.$_getRowObject(l+r,i);return a},i.prototype.getOutputObject=function(t,e){var i=this.getRowObject(e,null==t?void 0:t.rowState);return t&&this.$_createOutputRows([i],t,e),i},i.prototype.getOutputObjects=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1);var o=this.getRowObjects(e,i,null==t?void 0:t.rowState);return t&&this.$_createOutputRows(o,t,e),o},i.prototype.getFieldValues=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._checkFieldIndex(t);var o=this._values.length;if(i=i<0?o-1:Math.min(o-1,i),(e=Math.max(0,e))>=o||i<e)return null;for(var r=new Array(i-e+1),n=e;n<=i;n++){var s=this._values[n];r[n-e]=s&&s[t]}return r},i.prototype.hasData=function(t){var e=this._values;return t>=0&&t<e.length&&void 0!==e[t]&&e[t].length>0},i.prototype.insertRow=function(t,e){return this.undoable?this._commands.execute(new gi(this,t,e)):this.$_insertRow(t,e)},i.prototype.$_insertRow=function(t,e,i){if(void 0===i&&(i=void 0),!this._checkClientState())return!1;if(t<0||t>this._values.length)throw new Je(Ue.messages.rowOutOfBounds+t);return this.refreshFieldFormats(),!(!e||!this.fireRowInserting(t,e))&&(Rt.isArray(e)||(e=this.objectToRow(e)),this.$_internalInsertRow(t,e,!0,null),i&&this._yieldStates(t,i),this.fireRowInserted(t),this._fireRowCountChanged(),!0)},i.prototype.appendRow=function(t){var e=this.rowCount;return this.insertRow(e,t)?e:-1},i.prototype.removeRow=function(e){if(this.undoable){if(this.softDeleting&&this.checkStates)switch(this._rowStates[e]){case t.RowState.CREATED:if(!this.deleteCreated)return this._commands.execute(new bi(this,e,t.RowState.CREATE_AND_DELETED));break;case t.RowState.DELETED:case t.RowState.CREATE_AND_DELETED:return;default:return this._commands.execute(new bi(this,e,t.RowState.DELETED))}return this._commands.execute(new yi(this,e))}return this.$_removeRow(e)},i.prototype.$_removeRow=function(e){if(!this._checkClientState())return!1;if(this.$_checkRowIndex(e),this.softDeleting&&this.checkStates){switch(this._rowStates[e]){case t.RowState.CREATED:this.deleteCreated?this.$_deleteRow(e):this.$_changeRowState(e,t.RowState.CREATE_AND_DELETED,!0,!0);break;case t.RowState.DELETED:case t.RowState.CREATE_AND_DELETED:break;default:this.$_changeRowState(e,t.RowState.DELETED,!0,!0)}return!0}return this.$_deleteRow(e)},i.prototype.removeRows=function(t,e){void 0===e&&(e=!1),this.undoable?this._commands.execute(new Ci(this,t,e)):this.$_removeRows(t,e,null)},i.prototype.$_removeRows=function(e,i,o){if(this._checkClientState()){var r,n=this.deleteCreated;if(e&&!((r=e.length)<1)){if(e=e.slice(),o&&(o.rows=[],o.rowSaves=[],o.statedRows=[],o.states=[]),this.softDeleting&&this.checkStates){for(var s=i?null:[],a=r;a--;){var l=e[a],h=this._rowStates[l],u=!1;switch(this.$_checkRowIndex(l),h){case t.RowState.CREATED:n||(o&&(o.statedRows.push(l),o.states.push(h)),u=this.$_changeRowState(l,t.RowState.CREATE_AND_DELETED,i,!1),e.splice(a,1));break;case t.RowState.DELETED:case t.RowState.CREATE_AND_DELETED:e.splice(a,1);break;default:o&&(o.statedRows.push(l),o.states.push(h)),u=this.$_changeRowState(l,t.RowState.DELETED,i,!1),e.splice(a,1)}s&&u&&s.push(l)}i||s&&s.length>0&&this.fireRowStatesChanged(s,!0)}if((r=e.length)>0){if(r>1&&e.sort((function(t,e){return t-e})),o)for(a=0;a<r;a++){l=e[a];o.rows.push(l),o.rowSaves.push(this._keepRow(l))}if(i)for(a=r;a--;){l=e[a];this.$_checkRowIndex(l),this.$_deleteRow(l)}else if(this.fireRowsRemoving(e)){for(a=r;a--;){l=e[a],h=this._rowStates[l];this.$_checkRowIndex(l),this.$_internalRemoveRow(l),kt(h)&&this._deletedCount--}this.tags.removeRows(e),this.fireRowsRemoved(e),this._fireRowCountChanged()}}}}},i.prototype.moveRow=function(t,e){if(t!=e)return this.undoable?this._commands.execute(new Ei(this,t,e)):void this.$_moveRow(t,e)},i.prototype.$_moveRow=function(t,e){this._checkClientState()&&(this.$_checkRowIndex(t),this.$_checkRowIndex(e),this.fireRowMoving(t,e)&&(this.$_internalMoveRow(t,e),this.tags.moveRow(t,e),this.fireRowMoved(t,e)))},i.prototype.moveRows=function(t,e,i){if(!(e<1||t==i))return this.undoable?this._commands.execute(new Oi(this,t,e,i)):void this.$_moveRows(t,e,i)},i.prototype.$_moveRows=function(t,e,i){this._checkClientState()&&(this.$_checkRowIndex(t),this.$_checkRowIndex(i),this.fireRowsMoving(t,e,i)&&(this.$_internalMoveRows(t,e,i),this.tags.moveRows(t,e,i),this.fireRowsMoved(t,e,i)))},i.prototype.moveRowList=function(t,e){if(t&&!(t.length<1))return t=t.sort((function(t,e){return t-e})),this.undoable?this._commands.execute(new Ri(this,t,e)):this.$_moveRowList(t,e)},i.prototype.$_moveRowList=function(t,e){if(this._checkClientState()){var i=t[0];return this.$_checkRowIndex(i),this.$_checkRowIndex(e),this.fireRowListMoving(t,e)?(this.$_internalMoveRowList(t,e),this.tags.moveRowList(t,e),this.fireRowListMoved(t,e),!0):void 0}},i.prototype.getRowState=function(e){return this.$_checkRowIndex(e),this._rowStates[e]||t.RowState.NONE},i.prototype.getPrevRowState=function(t){return this.$_checkRowIndex(t),this._previousStates[t]},i.prototype.$_checkDeleted=function(t,e){kt(e)?this._deletedCount++:kt(t)&&!kt(e)&&this._deletedCount--},i.prototype.setRowState=function(t,e,i){return this.undoable?this._commands.execute(new mi(this,t,e,i)):this.$_setRowState(t,e,i)},i.prototype.revert=function(e){e=Rt.makeArray(e,!0);for(var i=0;i<e.length;i++){var o=e[i],r=this.getRowState(o),n=this.getPrevRowState(o);r==t.RowState.DELETED?this.setRowState(o,n||t.RowState.NONE,!1):r==t.RowState.CREATE_AND_DELETED&&this.setRowState(o,t.RowState.CREATED,!1)}},i.prototype.$_setRowState=function(t,e,i){this._checkClientState()&&(this.$_checkRowIndex(t),this._orgValues?this.$_changeRowStateEx(t,e,!0,i):this.$_changeRowState(t,e,!0,i))},i.prototype.setRowStates=function(t,e,i,o){return void 0===o&&(o=!1),this.undoable?this._commands.execute(new Di(this,t,e,i,o)):this.$_setRowStates(t,e,i,o)},i.prototype.$_setRowStates=function(t,e,i,o){var r;if((void 0===o&&(o=!1),this._checkClientState())&&(t&&!((r=t.length)<1)))if(o)for(var n=0;n<r;n++){var s=t[n];this.$_checkRowIndex(s),this.$_changeRowStateEx(s,e,!0,i)}else{var a=[],l=this._rowStates;for(n=0;n<r;n++){var h=l[s=t[n]];this.$_checkRowIndex(s),e!=h&&(l[s]=e,a.push(s),this.$_checkDeleted(h,e),this._orgValues&&this.prepareOrgValues(s,h,e))}a.length>0&&this.fireRowStatesChanged(a)}},i.prototype.clearRowStates=function(t,e){void 0===e&&(e=!1),this.undoable?this._commands.execute(new vi(this,t,e)):this.$_clearRowStates(t,e)},i.prototype.$_clearRowStates=function(e,i,o){if(void 0===i&&(i=!1),void 0===o&&(o=!1),this._checkClientState()){for(var r=[],n=o?this._rowStates.slice():null,s=o?[]:null,a=o?this._rowIds.slice():null,l=this._rowStates.length;l--;){var h=this._rowStates[l];switch(s&&(s[l]=null),h){case t.RowState.CREATE_AND_DELETED:case t.RowState.DELETED:if(e){if(r.push(l),s){var u=this._keepRow(l);u&&(s[l]=u.values)}i?this.$_deleteRow(l):(this.$_internalRemoveRow(l),this.tags.removeRow(l),this._deletedCount--)}else this.$_changeRowState(l,t.RowState.NONE,i);break;default:this.$_changeRowState(l,t.RowState.NONE,i)}}return this.$_resetOrgValues(),i||(r.length>0&&(this.fireRowsRemoved(r),this._fireRowCountChanged()),this.fireRowStatesCleared()),o?{rows:r,states:n,values:s,rowIds:a}:void 0}},i.prototype.$_restoreStates=function(t,e){this.fireRowStatesChanged(t)},i.prototype.getStateRows=function(t){var e=[];if(t)for(var i=0,o=this._rowStates.length;i<o;i++){this._rowStates[i]==t&&e.push(i)}return e},i.prototype.getAllStateRows=function(){for(var e={},i=e[t.RowState.CREATED]=[],o=e[t.RowState.UPDATED]=[],r=e[t.RowState.DELETED]=[],n=e[t.RowState.CREATE_AND_DELETED]=[],s=0,a=this._rowStates.length;s<a;s++){var l=this._rowStates[s];l===t.RowState.CREATED?i.push(s):l===t.RowState.UPDATED?o.push(s):l===t.RowState.DELETED?r.push(s):l===t.RowState.CREATE_AND_DELETED&&n.push(s)}return e},i.prototype.getRowStateCount=function(t){var e=t?t.length:0,i=this._rowStates.length,o=0;if(e&&i)if(e>1)for(var r=0;r<i;r++){var n=this._rowStates[r];t.indexOf(n)>=0&&o++}else for(n=t[0],r=0;r<i;r++)this._rowStates[r]===n&&o++;return o},i.prototype.$_restoreState=function(e){if(this._rowStates[e]===t.RowState.UPDATED){var i=this._orgValues[e];if(i){for(var o=this._values[e],r=this.strictRestore,n=0,s=this.fieldCount;n<s;n++){var a=o.length>n?o[n]:void 0,l=i.length>n?i[n]:void 0,h=this.getField(n);if(r){if(!h.equalValues(a,l))return!1}else if(!h.sameValues(a,l))return!1}return this._rowStates[e]=t.RowState.NONE,!0}}return!1},i.prototype.restoreUpdatedStates=function(t){if(this._orgValues&&this._checkClientState()){var e=[];if(null!=t)for(var i=0,o=t.length;i<o;i++){var r=t[i];r>=0&&r<this._values.length&&this.$_restoreState(r)&&e.push(r)}else for(i=0,o=this._values.length;i<o;i++)this.$_restoreState(i)&&e.push(i);e.length>0&&this.fireRowStatesChanged(e)}},i.prototype.$_restoreUpdatedRow=function(e,i){var o=this._rowStates[e];if(o===t.RowState.UPDATED){var r=this._orgValues[e];if(r){var n=this._values[e];if(i)i[e]={state:o,values:n.slice(),orgValues:r.slice()},(i.rows||(i.rows=[])).push(e);for(var s=0,a=Math.min(r.length,this.fieldCount);s<a;s++)n[s]=r[s];return this._rowStates[e]=t.RowState.NONE,!0}}return!1},i.prototype.$_restoreRow=function(t,e,i,o){this._values[t]=e.slice(),this._rowStates[t]=i,this._orgValues&&(this._orgValues[t]=o&&o.slice())},i.prototype.restoreUpdatedRows=function(t){this.undoable&&this._orgValues?this._commands.execute(new Mi(this,t)):this.$_restoreUpdatedRows(t)},i.prototype.$_restoreUpdatedRows=function(t,e){if(this._orgValues&&this._checkClientState()){var i=[];if(null!=t)for(var o=0,r=t.length;o<r;o++){var n=t[o];n>=0&&n<this._values.length&&this.$_restoreUpdatedRow(n,e)&&i.push(n)}else for(o=0,r=this._values.length;o<r;o++)this.$_restoreUpdatedRow(o,e)&&i.push(o);i.length>0&&(e&&(e.rows=i.slice()),this.fireRestoreRows(i),this.fireRowStatesChanged(i))}},i.prototype._reCalculateFields=function(t){var e=this;this._values.forEach((function(i,o){e._internalCalculateValues(i,o,t)}))},i.prototype.getUpdatedCells=function(e){var i=this.restoreMode;if(!this._orgValues||i!=t.RestoreMode.AUTO&&i!=t.RestoreMode.EXPLICIT)return null;if(null==e&&(e=this.getStateRows(t.RowState.UPDATED)),null==e)return null;for(var o=[],r=0,n=e.length;r<n;r++){var s=e[r],a=s>=0&&this._orgValues&&s<this._orgValues.length?this._orgValues[s]:null;if(a){for(var l=this._values[s],h=this.strictRestore,u=[],c=0,d=this.fieldCount;c<d;c++){var p=l.length>c?l[c]:void 0,f=a.length>c?a[c]:void 0,_=this.getField(c);_.calculated||(h?_.equalValues(p,f)||u.push({fieldName:this.getOrgFieldName(c),oldValue:a[c],newValue:l[c]}):_.sameValues(p,f)||u.push({fieldName:this.getOrgFieldName(c),oldValue:a[c],newValue:l[c]}))}u.length>0&&o.push({__rowId:s,updatedCells:u})}}return o},i.prototype._doRestoreModeChanged=function(){this.$_resetOrgValues()},i.prototype.findRow=function(t,e,i){if(void 0===i&&(i=0),t.length<1||e.length<t.length)return-1;for(var o=[],r=[],n=this._values,s=0,a=t.length;s<a;s++){var l=void 0;(l="string"==typeof t[s]?this.getFieldIndex(t[s]):Number(t[s]))>=0&&l<this.fieldCount&&o.indexOf(l)<0&&(o.push(l),r.push(e[s]))}var h=o.length;for(s=0;s<h;s++)o[s]=this.getField(o[s]);for(s=i,a=n.length;s<a;s++){var u=n[s],c=!0;for(l=0;l<h;l++)if(!o[l].equalValues(r[l],u[l])){c=!1;break}if(c)return s}return-1},i.prototype.savePoint=function(t){if(void 0===t&&(t=!0),this._checkClientState()){var e=this._values,i=this.fieldCount,o=e?e.length:0;if(i>0&&o>0){for(var r=new Array(o),n=0;n<o;n++){var s=e[n]&&e[n].concat();r[n]=s}var a=t?this._rowStates.concat():null,l=this._nextPoint++;return this._points.push({id:l,data:r,states:a}),l}return-1}},i.prototype.rollback=function(t){if(this._checkClientState())for(var e=this._points.length-1;e>=0;e--){var i=this._points[e];if(i.id==t){this.$_removeSavePoints(e+1),this.setRows(i.data);var o=i.states;o&&(this._rowStates=o.concat());break}}},i.prototype.$_removeSavePoints=function(t){for(var e=this._points,i=e.length-1;i>=t;i--){e[i].data=null,e.pop()}},i.prototype.clearSavePoints=function(){this.$_removeSavePoints(0)},i.prototype.getSavePoints=function(){for(var t=[],e=0,i=this._points.length;e<i;e++)t.push(this._points[e].id);return t},i.prototype.canUpdateRow=function(e){return!(this._rowStates[e]===t.RowState.NONE&&!this.updatable)},i.prototype.canAppendRow=function(){return!0},i.prototype.canInsertRow=function(t){return!0},i.prototype.canDeleteRow=function(t){return!0},i.prototype.getDistinctValues=function(e,i,o){if(void 0===i&&(i=-1),void 0===o&&(o=t.SortDirection.ASCENDING),i=arguments.length>1?i:-1,this._checkFieldIndex(e),i<0&&(i=this._values.length),i>0){for(var r=this.getField(e).dataType,n=[],s=void 0,a=0,l=this.rowCount;a<l;a++)switch(s=this._values[a]?this._values[a][e]:void 0,r){case t.ValueType.NUMBER:null!=s&&isNaN(s)||n.push(s);break;case t.ValueType.DATE:case t.ValueType.DATETIME:n.push(s?s.getTime():void 0);break;case t.ValueType.OBJECT:default:n.push(s)}return n=ti.getUniqueValues(n,r),o!==t.SortDirection.NONE&&(n=Rt.included(r,t.ValueType.DATETIME,t.ValueType.DATE,t.ValueType.NUMBER)?n.sort((function(t,e){return t-e})):n.sort(),o===t.SortDirection.DESCENDING&&(n=n.reverse())),n.slice(0,i)}return null},i.prototype.compareValues=function(t,e,i,o,r){var n=this._values[e],s=this._values[i];if(n===s)return 0;var a=n?n[t]:null,l=s?s[t]:null;return-1===o&&(a=""==a?null:a,l=""==l?null:l),null==a?null==l?0:-1*o:null==l?1*o:(a=r?String(a).toLowerCase():a)>(l=r?String(l).toLowerCase():l)?1:a<l?-1:0},i.prototype.compareTexts=function(t,e,i,o){return this.compareValues(t,e,i,o,!0)},i.prototype.compareNumbers=function(t,e,i,o){var r=this._values[e],n=this._values[i];if(r===n)return 0;var s=r?r[t]:NaN,a=n?n[t]:NaN;return isNaN(s)?isNaN(a)?0:-1*o:isNaN(a)?1*o:s>a?1:s<a?-1:0},i.prototype.compareBools=function(t,e,i,o){var r=this._values[e],n=this._values[i];if(r===n)return 0;var s=!!r&&Boolean(r[t]),a=!!n&&Boolean(n[t]);return s&&!a?1:!s&&a?-1:0},i.prototype.compareObjects=function(t,e,i,o){var r=this._values[e],n=this._values[i];if(r===n)return 0;var s=r?r[t]:null,a=n?n[t]:null;return s?a?this.getField(t).$_compareObject(s,a,e,i):1*o:a?-1*o:0},i.prototype.summarize=function(t,e){var i=this.rowCount;if(i<1)return!1;for(var o=[],r=0;r<i;r++)o.push(r);return this.summarizeRange(t,o,e)},i.prototype.summarizeRange=function(e,i,o){if(null==e||null==i)return!1;e.clear();var r=i.length;if(r<1)return!1;for(var n,s,a,l=this.getField(e.field).dataType===t.ValueType.NUMBER,h=0,u=e.field,c=0;c<r;){var d=i[c++];null==(y=(g=this._values[d])&&g[u])||l&&(!l||isNaN(y))||(l&&(n=h?n+y:y),(l||""!=y)&&h++,(null==s||y<s)&&(s=y),(null==a||y>a)&&(a=y))}if(e.count=r,h>0)if(e.sum=n,e.min=s,e.max=a,l&&(e.avg=n/r),e.dataCount=h,l&&(e.dataAvg=n/h),o&&l){for(var p=0,f=e.avg,_=0;_<r;_++){var g,y;d=i[_];null!=(y=(g=this._values[d])&&g[u])&&(p+=Math.pow(y-f,2))}e.varsp=p/r,e.vars=p/(r-1)}else e.varsp=NaN,e.vars=NaN;return!0},i.prototype._keepRow=function(t){var e={};return e.rowId=this._rowIds[t],e.values=this._values[t]&&this._values[t].slice(),e.state=this._rowStates[t],e.orgValues=this._orgValues&&this._orgValues[t]&&this._orgValues[t].slice(),e.outer=this._keepCommandStates(t),e},i.prototype._yieldRow=function(t,e,i){void 0===i&&(i=!0),this._rowIds[t]=e.rowId,this._values[t]=e.values&&e.values.slice(),this._rowStates[t]=e.state,this._orgValues&&(this._orgValues[t]=e.orgValues&&e.orgValues.slice()),i&&this._yieldCommandStates(t,e.outer)},i.prototype._keepStates=function(t){var e={};return e.rowId=this._rowIds[t],e.state=this._rowStates[t],e.orgValues=this._orgValues&&this._orgValues[t]&&this._orgValues[t].slice(),e},i.prototype._yieldStates=function(t,e){this._rowIds[t]=e.rowId,this._rowStates[t]=e.state,this._orgValues&&(this._orgValues[t]=e.orgValues&&e.orgValues.slice())},i.prototype._keepState=function(t){return this._rowStates[t]},i.prototype._yieldState=function(t,e){var i=this._rowStates[t];this._rowStates[t]=e,!kt(i)&&kt(e)?this._deletedCount++:kt(i)&&!kt(e)&&this._deletedCount--},i.prototype._keepOrgValues=function(){var t=this._orgValues;if(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]&&t[i].slice());return e}return null},i.prototype._yieldOrgValues=function(t){if(this._orgValues)if(t){this._orgValues=[];for(var e=0;e<t.length;e++)this._orgValues.push(t[e]&&t[e].slice())}else this._orgValues=t},i.prototype.$_checkRowIndex=function(t){if(isNaN(t)||t<0||t>=this._values.length)throw Rt.isDebugging(),new Je(Ue.messages.rowOutOfBounds+t)},i.prototype.$_resetOrgValues=function(){var e=this.restoreMode;this._orgValues=this.checkStates&&e!=t.RestoreMode.NONE?[]:null,this._needRestore=this._orgValues&&e==t.RestoreMode.AUTO},i.prototype.arrayToRow=function(t,e){for(var i=Math.min(t?t.length:0,this.fieldCount),o=new Array(i),r=0;r<i;r++)o[r]=this.getField(r).readValue(t[r]);return this._internalCalculateValues(o,e),o},i.prototype.$_internalSetRow=function(e,i,o){var r=this.arrayToRow(i,e);this._values[e]=r,this._rowIds[e]=this._nextRowId++,this.checkStates&&(this._rowStates[e]=t.RowState.NONE)},i.prototype.$_internalInsertRow=function(e,i,o,r){var n=this.arrayToRow(i,e),s=e==this._values.length;s?(this._values.push(n),this._rowIds.push(this._nextRowId++)):(this._values.splice(e,0,n),this._rowIds.splice(e,0,null!=r?r:this._nextRowId++)),o&&this.tags.insertRow(e),s?this._rowStates.push(this.checkStates?t.RowState.CREATED:t.RowState.NONE):(this._rowStates.splice(e,0,this.checkStates?t.RowState.CREATED:t.RowState.NONE),this._orgValues&&this._orgValues.splice(e,0,void 0))},i.prototype.$_createValue=function(t,e){var i=e.slice();if(Rt.isArray(t))for(var o=0;o<t.length;o++)i[o]=t[o];else if(Rt.isObject(t))for(var r in t){var n=this.getFieldIndex(r);-1!==n&&(i[n]=t[r])}return i},i.prototype.$_updateRow=function(t,e,i){if(this._checkClientState()){this.$_checkRowIndex(t),this.refreshFieldFormats();var o=this.$_createValue(e,this._values[t]);return!(!e||!this.fireRowUpdating(t,o,this._values[t].slice()))&&(this.$_internalUpdateRow(t,e,i,!0,!0),this.fireRowUpdated(t),!0)}},i.prototype.$_updateRows=function(e,i,o,r,n,s,a){if(void 0===a&&(a=null),this._checkClientState()&&i){var l=i.length;if(!(l<1)&&0!=(r=r<0?l:Math.min(l,r))){o=Math.max(0,o),this.refreshFieldFormats();var h=this.rowCount,u=Math.min(l,o+r);if(!(u<=o))if(a&&(a.rows=[],a.values=[],a.states=[],a.orgValues=[]),s)for(var c=e,d=o;d<u&&c<h;d++,c++){var p=i[d];!this._values[c]&&(this._values[c]=new Array(this.fieldCount));var f=this.$_createValue(p,this._values[c]);this.fireRowUpdating(c,f,this._values[c].slice())&&(a&&(a.rows.push(c),a.values.push(this._values[c].slice()),a.states.push(this._rowStates[c]),a.orgValues.push(this._orgValues&&this._orgValues[c])),this.$_internalUpdateRow(c,p,n,!0,!0),this.fireRowUpdated(c))}else{var _=[];for(c=e,d=o;d<u&&c<h;d++,c++){this._rowStates[c]==t.RowState.NONE&&_.push(c),!this._values[c]&&(this._values[c]=new Array(this.fieldCount)),a&&(a.rows.push(c),a.values.push(this._values[c].slice()),a.states.push(this._rowStates[c]),a.orgValues.push(this._orgValues&&this._orgValues[c]));p=i[d];this.$_internalUpdateRow(c,p,n,!1,!1)}_.length>0&&this.fireRowStatesChanged(_),this.tags.updateRows(e,r=u-o),this.fireRowsUpdated(e,r)}}}},i.prototype.$_updateRows2=function(e,i,o,r){var n=this;if(this._checkClientState()&&e)if(this.refreshFieldFormats(),r&&(r.rows=[],r.values=[],r.states=[],r.orgValues=[]),Object.keys(e).forEach((function(t){return n.$_checkRowIndex(parseInt(t))})),o)for(var s in e){var a=Number(s),l=e[s],h=this.$_createValue(l,this._values[a]);!this._values[a]&&(this._values[a]=new Array(this.fieldCount)),this.fireRowUpdating(a,h,this._values[s].slice())&&(r&&(r.rows.push(a),r.values.push(this._values[a].slice()),r.states.push(this._rowStates[a]),r.orgValues.push(this._orgValues&&this._orgValues[a])),this.$_internalUpdateRow(a,l,i,!0,!0),this.fireRowUpdated(a))}else{var u=[],c=[];for(var s in e){a=Number(s);this._rowStates[a]==t.RowState.NONE&&u.push(a),!this._values[a]&&(this._values[a]=new Array(this.fieldCount)),r&&(r.rows.push(a),r.values.push(this._values[a].slice()),r.states.push(this._rowStates[a]),r.orgValues.push(this._orgValues&&this._orgValues[a]));l=e[s];this.$_internalUpdateRow(a,l,i,!1,!1),c.push(a)}u.length>0&&this.fireRowStatesChanged(u),this.tags.updateRowList(c),this.fireRowListUpdated(c)}},i.prototype.$_fillValue=function(e,i,o){if(void 0===o&&(o=null),this._checkClientState()&&Object.keys(e).length){this.refreshFieldFormats(),o&&(o.rows=[],o.values=[],o.states=[],o.orgValues=[]);var r=[],n=[];for(var s in e){n.push(+s),this._rowStates[s]==t.RowState.NONE&&r.push(+s),!this._values[s]&&(this._values[s]=new Array(this.fieldCount)),o&&(o.rows.push(s),o.values.push(this._values[s].slice()),o.states.push(this._rowStates[s]),o.orgValues.push(this._orgValues&&this._orgValues[s]));for(var a=this._values[s].slice(),l=0,h=e[s];l<h.length;l++){a[h[l]]=i}this.$_internalUpdateRow(+s,a,!1,!1,!1)}r.length>0&&this.fireRowStatesChanged(r),this.tags.updateRowList(n),this.fireRowListUpdated(n)}},i.prototype.$_internalUpdateRow=function(e,i,o,r,n){var s,a=this.getFields(),l=Rt.isArray(i),h=Math.min(a.length,l?i.length:a.length),u=this._values[e],c=this._rowStates[e],d=this.checkStates&&(c==t.RowState.NONE||!c);u||(this._values[e]=u=new Array(this.fieldCount)),d&&this._orgValues&&(s=Rt.deepCopy(u));for(var p=!1,f=0;f<h;f++){var _=a[f];if((_.updatable||c==t.RowState.CREATED||c==t.RowState.CREATE_AND_DELETED)&&(l||i.hasOwnProperty(_.orgFieldName))){var g=l?i[f]:i[_.orgFieldName];o&&void 0===g||(p=!this._needRestore||(p||(o?!_.equalValues(u[f],_.readValue(g)):!_.sameValues(u[f],_.readValue(g)))),u[f]=_.readValue(g))}}p&&this._internalCalculateValues(u,e),d&&p?(s&&(this._orgValues[e]=s),this.$_changeRowState(e,t.RowState.UPDATED,r)):this._needRestore&&this.restoreState(e),n&&this.tags.updateRow(e)},i.prototype.$_changeRowState=function(e,i,o,r){if(void 0===r&&(r=!1),this.checkStates||r){var n=this._rowStates[e];if((i=i||t.RowState.NONE)!=n)return this._previousStates[e]=n,this._rowStates[e]=i,!kt(n)&&kt(i)?this._deletedCount++:kt(n)&&!kt(i)&&this._deletedCount--,o&&this.fireRowStateChanged(e,n),!0}return!1},i.prototype.restoreState=function(e){if(this._rowStates[e]===t.RowState.UPDATED){var i=this._orgValues[e];if(i){for(var o=this._values[e],r=this.strictRestore,n=0,s=this.fieldCount;n<s;n++){var a=o.length>n?o[n]:void 0,l=i.length>n?i[n]:void 0;if(r){if(!this.getField(n).equalValues(a,l))return!1}else if(!this.getField(n).sameValues(a,l))return!1}return this._rowStates[e]=t.RowState.NONE,!0}}return!1},i.prototype.prepareOrgValues=function(e,i,o){o==t.RowState.UPDATED?i==t.RowState.DELETED&&this._orgValues[e]||(this._orgValues[e]=this._values[e]?this._values[e].concat():[]):i==t.RowState.UPDATED&&this._orgValues[e]&&(this._orgValues[e]=void 0)},i.prototype.$_changeRowStateEx=function(t,e,i,o){var r=this._rowStates[t];return!!this.$_changeRowState(t,e,!1,o)&&(this._orgValues&&this.prepareOrgValues(t,r,e),i&&this.fireRowStateChanged(t,r),!0)},i.prototype.$_getRowObject=function(t,e){var i={},o=this._values[t];if(o){for(var r=0;r<this.fieldCount;r++){i[this.getOrgFieldName(r)]=o[r]}e&&(i.__rowState=this.getRowState(t))}return i},i.prototype.$_deleteRow=function(t){if(this.fireRowRemoving(t)){var e=this._rowStates[t];return this.$_internalRemoveRow(t),kt(e)&&this._deletedCount--,this.tags.removeRow(t),this.fireRowRemoved(t),this._fireRowCountChanged(),!0}return!1},i.prototype.$_internalRemoveRow=function(t){var e=this._rowIds[t];this._hiddenIds.indexOf(e)>=0&&this._hiddenIds.splice(this._hiddenIds.indexOf(e),1),this._values.splice(t,1),this._rowIds.splice(t,1),this._orgValues&&this._orgValues.length>t&&this._orgValues.splice(t,1),this._rowStates.splice(t,1)},i.prototype.$_internalMoveRow=function(t,e){var i=this._values[t],o=this._rowIds[t],r=this._rowStates[t],n=this._previousStates[t];this._values.splice(t,1),this._rowIds.splice(t,1),this._rowStates.splice(t,1),this._previousStates.splice(t,1),this._values.splice(e,0,i),this._rowIds.splice(e,0,o),this._rowStates.splice(e,0,r),this._previousStates.splice(e,0,n),this._orgValues&&(this._orgValues.length=Math.max(this._orgValues.length,e+1),i=this._orgValues[t],this._orgValues.splice(t,1),this._orgValues.splice(e,0,i))},i.prototype.$_internalMoveRows=function(t,e,i){for(var o=this._values.splice(t,e),r=this._rowIds.splice(t,e),n=this._rowStates.splice(t,e),s=this._previousStates.splice(t,e),a=0,l=o.length;a<l;a++)this._values.splice(i+a,0,o[a]),this._rowIds.splice(i+a,0,r[a]),this._rowStates.splice(i+a,0,n[a]),this._previousStates.splice(i+a,0,s[a]);if(this._orgValues){this._orgValues.length=Math.max(this._orgValues.length,i+e+1);for(a=0,l=(o=this._orgValues.splice(t,e)).length;a<l;a++)this._orgValues.splice(i+a,0,o[a])}},i.prototype.$_internalMoveRowList=function(t,e){for(var i=[],o=[],r=[],n=[],s=t.length-1;s>=0;s--){var a=t[s];i.push(this._values.splice(a,1)[0]),o.push(this._rowIds.splice(a,1)[0]),r.push(this._rowStates.splice(a,1)[0]),n.push(this._previousStates.splice(a,1)[0])}i=i.reverse(),o=o.reverse(),r=r.reverse(),n=n.reverse();s=0;for(var l=t.length;s<l;s++)this._values.splice(e+s,0,i[s]),this._rowIds.splice(e+s,0,o[s]),this._rowStates.splice(e+s,0,r[s]),this._previousStates.splice(e+s,0,n[s]);if(this._orgValues){i=[],this._orgValues.length=Math.max(this._orgValues.length,e+t.length+1);for(s=t.length-1;s>=0;s--)i.push(this._orgValues.splice(t[s],1)[0]);i=i.reverse();for(s=0,l=t.length;s<l;s++)this._orgValues.splice(e+s,0,i[s])}},i.prototype.$_searchDataRow=function(e,i,o,r,n){var s=this.rowCount;if(s<1)return-1;var a=Math.min(e.length,i.length);if(a<1)return-1;for(var l=o.allFields,h=o.caseSensitive,u=o.partialMatch,c=null,d=[],p=o.reverse,f=o.compareCallback||Rt.compareTextValue,_=0;_<a;_++)d[_]=this.getField(e[_]).dataType;r=Math.max(0,r),n=Math.min(s-1,n);for(var g=r;p?g>=n:g<=n;p?g--:g++){var y=!0;for(_=0;_<a;_++){var m=this.getValue(g,e[_]),b=this.getOrgFieldName(e[_]);switch(d[_]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(i[_]instanceof Date)y=f.call(this.$_handler,i[_],m,h,u,g,b);else{if(!c){var v=/[.]/.test(i[_])?"yyyy.MM.dd":/[/]/.test(i[_])?"yyyy/MM/dd":/[-]/.test(i[_])?"yyyy-MM-dd":"yyyyMMdd";c=new Ge(v)}y=f.call(this.$_handler,i[_],m?c.getText(m):m,h,u,g,b)}break;default:y=f.call(this.$_handler,i[_],m,h,u,g,b)}if(y&&!l)return g;if(!y&&l)break}if(y)return g}return-1},i.prototype.searchDataRow=function(t){var e=-1;t instanceof ai||(t.reverse&&!t.hasOwnProperty("startIndex")&&(t.startIndex=this.rowCount-1),t=new ai(t));var i=t.fields,o=t.values,r=t.startIndex;if(i&&i.length>0&&o&&o.length>0){for(var n=i.length,s=[],a=0;a<n;a++){var l=parseFloat(i[a]);if(isNaN(l)){var h=this.getFieldIndex(i[a]);h>=0&&s.push(h)}else s.push(l)}if(s.length>0){n=this.rowCount;var u=t.reverse;r=u?Math.min(n,r):Math.max(0,r),(e=(u?r>-1:r<n)?this.$_searchDataRow(s,o,t,r,u?0:n-1):-1)<0&&t.wrap&&(u?r<n-1:r>0)&&(e=this.$_searchDataRow(s,o,t,u?n-1:0,u?r+1:r-1))}}return e},i.prototype.$_searchData=function(e,i,o,r,n,s){var a=this.rowCount;if(a<1)return null;for(var l=o.caseSensitive,h=o.partialMatch,u=this.fieldCount,c=e.length,d=o.reverse,p=null,f=[],_=0;_<u;_++)f[_]=this.getField(_).dataType;r=Math.max(0,r),n=Math.max(0,Math.min(a-1,n)),s=Math.max(d?-1:0,Math.min(s,c)),d?s<0&&(r--,s=c-1):s>=e.length&&(r++,s=0);for(var g=o.compareCallback||Rt.compareTextValue,y=r;d?y>=n:y<=n;d?y--:y++)for(_=d?y<r?c-1:s:y>r?0:s;d?_>=0:_<c;d?_--:_++){var m=e[_];if(m>=0&&m<u){var b=this.getValue(y,m),v=!1,w=this.getOrgFieldName(m);switch(f[m]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(i instanceof Date)v=g.call(this.$_handler,i,b,l,h,y,w);else{if(!p){var C=/[.]/.test(i)?"yyyy.MM.dd":/[/]/.test(i)?"yyyy/MM/dd":/[-]/.test(i)?"yyyy-MM-dd":"yyyyMMdd";p=new Ge(C)}v=g.call(this.$_handler,i,b?p.getText(b):b,l,h,y,w)}break;default:v=g.call(this.$_handler,i,b,l,h,y,w)}if(v)return{dataRow:y,fieldIndex:m,searchFieldIndex:_,fieldName:w}}}return null},i.prototype.searchData=function(t){var e=this,i=t.value,o=this.rowCount,r=t.fields=Rt.makeArray(t.fields);r&&r.length||(r=this.getOrgFieldNames());var n=[];if(!(r&&r.length>0&&null!=i))return null;r.forEach((function(t){n.push(e.getFieldIndex(t))})),t instanceof li||(t.reverse&&(t.hasOwnProperty("startIndex")||(t.startIndex=o-1),t.hasOwnProperty("startFieldIndex")||(t.startFieldIndex=n.length-1)),t=new li(t));var s=null,a=t.reverse,l=n.length,h=a?Math.min(o-1,t.startIndex):Math.max(0,t.startIndex),u=a?0:o-1,c=a?Math.min(l-1,t.startFieldIndex):Math.max(0,t.startFieldIndex),d=a?h<o-1||c<l-1:h>0||c>0;return!(s=(a?h>=0&&c>=0:h<o)?this.$_searchData(n,i,t,h,u,c):null)&&t.wrap&&d&&(s=this.$_searchData(n,i,t,a?o-1:0,h-1,a?c:0)),s&&(s.fieldName=this.getOrgFieldName(s.fieldIndex)),s},i.prototype.isDataChanged=function(e,i){if(this._rowStates[e]!==t.RowState.UPDATED||!this._orgValues)return!1;if(this.$_checkRowIndex(e),this._checkFieldIndex(i),this._orgValues[e]){var o=this._orgValues[e][i],r=this.getValue(e,i),n=this.getField(i);return n&&!n.sameValues(o,r)}return!1},i.prototype.$_hideRows=function(t,e){if(null!=t){var i=Rt.isArray(t)?t:[t],o=[];this._hiddenIds.length;for(var r=0,n=i.length;r<n;r++){var s=this.getRowId(i[r]);if(null!=s)if(e)this._hiddenIds.indexOf(s)<0&&(o.push(i[r]),this._hiddenIds.push(s));else{var a=this._hiddenIds.indexOf(s);a>=0&&(o.push(i[r]),this._hiddenIds.splice(a,1))}}o.length&&this.fireRowHided(o,e)}},i.prototype.hideRows=function(t){this.$_hideRows(t,!0)},i.prototype.showRows=function(t){this.$_hideRows(t,!1)},i.prototype.clearHiddenRows=function(){this._hiddenIds.length>0&&this.fireRowHided(this._hiddenIds.splice(0),!1)},i.prototype.getHiddenRows=function(){for(var t=[],e=0,i=this._hiddenIds.length;e<i;e++){var o=this._rowIds.indexOf(this._hiddenIds[e]);o>=0&&t.push(o)}return t.sort((function(t,e){return t-e})),t},i.prototype.isHiddenRow=function(t){var e=this._rowIds[t];return this._hiddenIds.indexOf(e)>=0},Object.defineProperty(i.prototype,"hiddenCount",{get:function(){return this._hiddenIds.length},enumerable:!1,configurable:!0}),i.prototype.undo=function(){this.canUndo&&this._commands.undo()},i.prototype.redo=function(){this.canRedo&&this._commands.redo(!0)},i.prototype.clearCommandStack=function(){this._commands&&this._commands.flush()},i}(si),Li=function(t){function e(e){var i=t.call(this)||this;return i._tags=new Array,i._owner=e,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.add=function(t){if(t){var e=this._tags||(this._tags=[]);e.indexOf(t)<0&&e.push(t),t.connect(this._owner)}},e.prototype.remove=function(t){if(t&&this._tags){var e=this._tags.indexOf(t);e>=0&&(this._tags.splice(e,1),t.disconnect())}},e.prototype.clearRows=function(){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].clearRows()},e.prototype.setRows=function(){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].setRows()},e.prototype.addRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].addRow(t)},e.prototype.addRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].addRows(t)},e.prototype.removeRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].removeRow(t)},e.prototype.removeRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].removeRows(t)},e.prototype.updateRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].updateRow(t)},e.prototype.updateRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].updateRows(t)},e}(Lt),Ni=function(){function t(){}return t.parse=function(t){return(new window.DOMParser).parseFromString(t,"text/xml")},t.toString=function(t){return(new window.XMLSerializer).serializeToString(t)},t.getNodeValue=function(t){return t.firstChild.nodeValue},t.getAttr=function(t,e){return t.getAttribute(e)},t.setAttr=function(t,e,i){t.setAttribute(e,i)},t.addChild=function(t,e,i){var o=t.createElement(i);return e.appendChild(o),o},t.addChildWithAttr=function(t,e,i,o,r){var n=t.createElement(i);return n.setAttribute(o,r),e.appendChild(n),n},t.addChildWithValue=function(t,e,i,o){var r=t.createElement(i);return r.nodeValue=o,e.appendChild(r),r},t.parseXml=function(t){var e=null;try{(e=new ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(t)}catch(i){if(e)throw i;e=(new window.DOMParser).parseFromString(t,"text/xml")}return e},t}();function $i(t,e){var i=[];if(t){var o=t.childNodes;if(o)for(var r=0,n=o.length;r<n;r++){var s=o[r];s.tagName===e&&i.push(s)}}return i}var Ai,Vi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.extractJson=function(t,e){var i=t;if(e=e&&e.trim())for(var o=e.split("."),r=0;r<o.length;r++){var n=o[r]&&o[r].trim();if(n){var s=n.indexOf("["),a=n.lastIndexOf("]");if(s>0&&a>s){var l=n.substring(0,s),h="$"!=l?i[l]:i;if(Array.isArray(h)){l=n.substring(s+1,a);var u=parseInt(l);i=u>=0&&u<h.length?h[u]:null}else i=null}else"$"!=n&&(i=i[n]);if(!i)break}}return Array.isArray(i)?i:null},e.extractXml=function(t,e){var i=null;if(e=e&&e.trim())for(var o=e.split("."),r=0;r<o.length;r++){var n=o[r]&&o[r].trim();if(n){var s=n.indexOf("["),a=n.lastIndexOf("]");if(s>0&&a>s){var l=n.substring(0,s);if(i=$i(i?i[0]:t,l))l=n.substring(s+1,a),i=i[parseInt(l)]}else i=$i(i?i[0]:t,n);if(!i)break}}return i},e}(Lt);t.DataFillMode=void 0,(Ai=t.DataFillMode||(t.DataFillMode={})).SET="set",Ai.APPEND="append",Ai.INSERT="insert",Ai.UPDATE="update";var Bi,ji,Hi,Gi=function(e){function i(i){var o=e.call(this)||this;if(o.fillMode=t.DataFillMode.SET,o.fillPos=0,o.count=-1,o.rootArray=!0,o.rows="row",o.start=0,o.delimiter=",",o.quoted=!1,o.parentId=0,o.childrenField=null,o.treeField=null,o.iconField=null,o.needSorting=!1,o.noStates=!1,i){for(var r in i)null!=i[r]&&(o[r]=i[r]);o.parentId=i.parentId||i.parent,o.childrenField=i.childrenField||i.children,o.treeField=i.treeField||i.tree,o.iconField=i.iconField||i.icon,o.needSorting=i.needSorting||i.sorting}return o}return o(i,e),i}(Lt),Wi=function(e){function i(t){var i=e.call(this)||this;return i._provider=t,i}return o(i,e),i.prototype._doDispose=function(){this._provider=null},i.prototype.load=function(t,e,i){var o=new Gi(i);if(this._checkEmpty(e,o))return 0;var r=this._provider.checkStates;o.noStates&&(this._provider.checkStates=!1);try{switch(t){case"json":return this._loadJson(e,o);case"xml":return this._loadXml(e,o);case"csv":return this._loadCsv(e,o)}}finally{this._provider.checkStates=r,this._provider.fireDataLoadComplated()}},i.prototype._loadJson=function(e,i){"string"==typeof e&&(e=JSON.parse(e));var o=null;if(i.rootArray&&(o=Rt.isArray(e)?e:null),o||(o=Vi.extractJson(e,i.rows)),o){var r=i.fillPos,n=i.start,s=i.count;switch(i.fillMode){case t.DataFillMode.APPEND:this._provider.appendRows(o,n,s);break;case t.DataFillMode.INSERT:this._provider.insertRows(r,o,n,s);break;case t.DataFillMode.UPDATE:this._provider.updateRows(r,o,n,s,!1);break;case t.DataFillMode.SET:default:this._provider.setRows(o,n,s)}return o.length}return this._fillEmpty(i),0},i.prototype._loadXml=function(e,i){if("string"==typeof e&&(e=Ni.parse(e)),e&&e.documentElement){var o=i.fillPos,r=i.start,n=i.count,s=i.rows,a=Vi.extractXml(e.documentElement,s);switch(i.fillMode){case t.DataFillMode.APPEND:this._provider.appendXmlRows(a,r,n);break;case t.DataFillMode.INSERT:this._provider.insertXmlRows(o,a,r,n);break;case t.DataFillMode.UPDATE:this._provider.updateXmlRows(o,a,r,n);break;case t.DataFillMode.SET:default:this._provider.setXmlRows(a,r,n)}return a.length}return this._fillEmpty(i),0},i.prototype._loadCsv=function(e,i){var o=i.fillPos,r=i.start,n=i.count,s=i.quoted,a=i.delimiter,l=Si.csvToArray(this._provider,e,r,n,s,a);if(l&&(n=l.length)>0){switch(i.fillMode){case t.DataFillMode.APPEND:this._provider.appendRows(l,0,n);break;case t.DataFillMode.INSERT:this._provider.insertRows(o,l,0,n);break;case t.DataFillMode.UPDATE:this._provider.updateRows(o,l,0,n,!1);break;case t.DataFillMode.SET:default:this._provider.setRows(l,0,n)}return l.length}return this._fillEmpty(i),0},i.prototype._fillEmpty=function(e){e.fillMode===t.DataFillMode.SET&&this._provider.setRows(null)},i.prototype._checkEmpty=function(t,e){return!t&&(this._fillEmpty(e),!0)},i}(Lt),Ui=function(t){function e(e,i){var o=t.call(this)||this;return o._rowCount=0,o._ds=e,o._rootRow=i,o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"provider",{get:function(){return this._ds},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rootRow",{get:function(){return this._rootRow},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"insertedRows",{get:function(){return this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"insertedCount",{get:function(){return this._rowCount},enumerable:!1,configurable:!0}),e.prototype._prepareLoad=function(t){this._rowCount=0,this._rows=[]},e.prototype._createRow=function(t,e,i){return this._ds.createRow(i,isNaN(i[e])?-1:i[e],i[t],!1)},e.prototype._createRow2=function(t,e,i){return this._ds.createRow(i,e,t,!1)},e.prototype._rowAdded=function(t,e){this._rowCount++,this._rows&&e.parent===t&&this._rows.push(e)},e.prototype._addRow=function(t,e,i,o,r){var n=this._createRow(i,o,r);return e._insertChild(e.count,n,!0,!0),this._rowAdded(t,n),n},e.prototype._addRow2=function(t,e,i,o,r){var n=this._createRow2(i,o,r);return e._insertChild(e.count,n,!0,!0),this._rowAdded(t,n),n},e}(Lt),Yi=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype._loadData=function(t,e,i,o,r,n){if(this._prepareLoad(e),!t||t.length<1)return this._rowCount;for(var s=this.provider,a=t.length,l=[],h=new Array(t.length),u=0;u<a;u++)if(l[u]=u,Array.isArray(t[u])){if(Array.isArray(t[u]))for(var c=h[u]=new Array(s.fieldCount),d=0,p=s.fieldCount;d<p;d++)c[d]=t[u][d]}else h[u]=this.provider.objectToRow(t[u]);o&&this.$_sortRows(l,h,i,0,a-1),s.beginUpdate();try{this.$_buildTree(e||this.rootRow,l,h,i,r,n)}finally{s.endUpdate(!1)}return this.insertedCount},e.prototype.$_sortRows=function(t,e,i,o,r){function n(t,o){var r=e[t][i],n=e[o][i];return r==n?0:r<n?-1:1}do{var s=o,a=r,l=t[Math.floor((o+r)/2)];do{for(;!(n(l,t[s])<=0);)s++;for(;!(n(l,t[a])>=0);)a--;if(s<=a){if(s!=a){var h=t[s];t[s]=t[a],t[a]=h}s++,a--}}while(s<=a);o<a&&this.$_sortRows(t,e,i,o,a),o=s}while(o<r)},e.prototype.$_buildTree=function(t,e,i,o,r,n){function s(e,i,r,n){for(var s=n[o];i!=t;){var a=i.getValue(o);if(e.parentCallback){if(e.parentCallback(a,s))return i}else if(0==s.indexOf(a))return i;i=i.parent}return t}var a=e[0],l=this._createRow(r,n,i[a]),h=s(this,t,0,i[a]);if(h._insertChild(h.count,l,!0,!0),this._rowAdded(t,l),e.length>1)for(var u=e.length,c=l,d=1;d<u;d++)a=e[d],l=this._createRow(r,n,i[a]),(h=s(this,c,0,i[a]))._insertChild(h.count,l,!0,!0),this._rowAdded(t,l),c=l},e}(Ui),zi=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype.load=function(t,e,i,o,r,n){return this._loadData(e,t,i,o,r,n)},e}(Yi),qi=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype.load=function(t,e,i,o,r,n){var s=Si.csvToArray(this.provider,e);return this._loadData(s,t,i,o,r,n)},e}(Yi),Ki=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype.load=function(t,e,i,o,r){if(this._prepareLoad(t),e){var n=Vi.extractJson(e,i);if(n&&n.length>0){this.provider.beginUpdate();try{this.$_buildJsonTree(this.provider,t||this.rootRow,n,i,o,r)}finally{this.provider.endUpdate(!1)}}}return this._rowCount},e.prototype.load2=function(t,e,i,o,r,n){if(this._prepareLoad(t),e){var s=Vi.extractJson(e,i);if(s&&s.length>0){this.provider.beginUpdate();try{this.$_buildJsonTree2(this.provider,t||this.rootRow,s,o,r,n)}finally{this.provider.endUpdate(!1)}}}return this._rowCount},e.prototype.$_buildJsonTree=function(t,e,i,o,r,n){var s=t.getOrgFieldNames();!function t(i,s,a,l){for(var h=l.length,u=0,c=a.length;u<c;u++){for(var d=a[u],p=new Array(h),f=0;f<h;f++){var _=l[f];d.hasOwnProperty(_)&&(p[f]=d[_])}var g=i._addRow(e,s,r,n,p);if(d.hasOwnProperty(o)){var y=d[o];Array.isArray(y)&&y.length>0&&t(i,g,y,l)}}}(this,e,i,s)},e.prototype.$_buildJsonTree2=function(t,e,i,o,r,n){var s=t.getOrgFieldNames();!function t(i,s,a,l){for(var h=l.length,u=0,c=a.length;u<c;u++){for(var d=a[u],p=new Array(h),f=0;f<h;f++){var _=l[f];d.hasOwnProperty(_)&&(p[f]=d[_])}var g=i._addRow2(e,s,d[r],isNaN(d[n])?-1:d[n],p);if(d.hasOwnProperty(o)){var y=d[o];Array.isArray(y)&&y.length>0&&t(i,g,y,l)}}}(this,e,i,s)},e}(Ui),Xi=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype.load=function(t,e,i,o,r){if(this._prepareLoad(t),e){var n="string"==typeof e?Ni.parseXml(e):e;if(n){var s=Vi.extractXml(n.documentElement,i);if(s&&s.length>0){this.provider.beginUpdate();try{this.$_buildXmlTree(this.provider,t||this.rootRow,s,i,o,r)}finally{this.provider.endUpdate(!1)}}}}return this._rowCount},e.prototype.$_buildXmlTree=function(t,e,i,o,r,n){!function t(i,s,a,l,h){for(var u=0,c=a.length;u<c;u++){var d=a[u],p=Si.xmlToRow(d,l,h),f=i._addRow(e,s,r,n,p),_=Vi.extractXml(d,o);_&&_.length>0&&t(i,f,_,l,h)}}(this,e,i,t.getFields(),t.getOrgFieldNames())},e}(Yi),Zi=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._keepChildren=function(t,e,i){for(var o=0;o<e.children.length;o++){var r=e.getChild(o),n=r._keepRow(t,!0);i.push(n),r.children&&r.children.length&&this._keepChildren(t,r,n.children=[])}},e.prototype._restoreChildren=function(t,e,i){for(var o=0;o<i.length;o++){var r=i[o],n=void 0;"state"===r.run?(n=t.rowById(r.rowId))._changeRowState(r.state,!0,!1):((n=t.createTemp())._yieldRow(t,r,!0),e._addChild(n,!1,!0)),r.children&&this._restoreChildren(t,n,r.children)}},e}(ci),Ji=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(ui),Qi=function(t){function e(e,i,o,r){var n=t.call(this,e)||this;return n._rowId=i.rowId,n._values=n._cloneRow(o),n._strict=r,n}return o(e,t),e.prototype._doRun=function(t){var e={},i=t.rowById(this._rowId);return e.row=i._keepRow(t),(e.result=i.$_update(t,this._values,this._strict,!1))&&(this._newState=i.rowState),e},e.prototype._doRedo=function(t,e){var i=t.rowById(this._rowId);i&&i.$_update(t,this._values,this._strict,!1)},e.prototype._doUndo=function(t,e){var i=t.rowById(this._rowId);i&&i._yieldRow(t,e.row),e.row.state!=this._newState&&t._fireRowStateChanged(i,!1),t._rowUpdated(i)},e}(Zi),to=function(t){function e(e,i,o){var r=t.call(this,e)||this;return r._rowId=i.rowId,r._recursive=o,r._parentId=i.parent.rowId,r}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e=t.rowById(this._rowId),i=e._keepRow(t,!0),o=t.rowById(this._parentId);o?((!this._softDeleting||this._softDeleting&&this._recursive)&&e.children&&e.children.length&&(i.children=[],this._keepChildren(t,e,i.children)),i.result=o._removeChild(e,!1,this._recursive,[i])):i.result=!1;return i},e.prototype._doRedo=function(t,e){var i=t.rowById(this._rowId);t.rowById(this._parentId)._removeChild(i,!1,this._recursive,[e])},e.prototype._doUndo=function(t,e){var i,o="remove"===e.run;if((i=o?t.createTemp():t.rowById(this._rowId))&&(i._yieldRow(t,e,!0),e.children&&e.children.length&&this._restoreChildren(t,i,e.children)),o){var r=t.rowById(this._parentId);r&&r._insertChild(e.index,i,!1,!0)}else t._stateChanged(i,!0)},e}(Zi),eo=function(t){function e(e,i,o,r,n){var s=t.call(this,e)||this;return s._row=r,s._rowId=r.rowId,s._index=o,s._noState=n,s._parentId=i.rowId,s}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e=t.rowById(this._rowId)||this._row,i=e._keepRow(t,!1),o=t.rowById(this._parentId);return e.children&&e.children.length&&(i.children=[],this._keepChildren(t,e,i.children)),i.result=o._insertChild(this._index,e,!1,this._noState),i},e.prototype._doRedo=function(t,e){var i=t.rowById(this._parentId),o=t.createTemp();o._yieldRow(t,e,!1),o._rowId=e.rowId,i&&o&&i._insertChild(this._index,o,!1,this._noState)},e.prototype._doUndo=function(t,e){var i=t.rowById(this._parentId),o=t.rowById(this._rowId);i&&o&&i.$_removeChild(o,this._index,!1)},e}(Zi),io=function(e){function i(t,i){var o=e.call(this)||this;return o._children=null,o._descendantCount=0,!i&&(o._rowId=t&&t._nextRowId++),o}return o(i,e),i.getRowIds=function(t){if(!t)return null;for(var e=[],i=0,o=t;i<o.length;i++){var r=o[i];e.push(r.rowId)}return e},i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"rowId",{get:function(){return this._rowId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"provider",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){var t=this.parent;return null!=t?t._children.indexOf(this):-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"level",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconIndex",{get:function(){return-1},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasChildren",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._children?this._children.length:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"descendantCount",{get:function(){return this._descendantCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"children",{get:function(){return this._children?this._children.concat():null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"descendants",{get:function(){if(this._children){var t=[];return function t(e,i){for(var o=0,r=e.count;o<r;o++){var n=e.getChild(o);i.push(n),t(n,i)}}(this,t),t}return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ancestors",{get:function(){var t=null,e=this.parent;if(e)for(t=[];e&&e.rowId>=0;)t.push(e),e=e.parent;return t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowState",{get:function(){return t.RowState.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"prevRowState",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"values",{get:function(){return null},enumerable:!1,configurable:!0}),i.prototype.getChild=function(t){if(t>=0){if(!this._children||t>=this._children.length)throw new RangeError("Index is invalid: "+t);return this._children[t]}throw new RangeError("Index is invalid: "+t)},i.prototype.getChildObjects=function(t,e,i,o,r,n){void 0===n&&(n=-1);var s=this._children;if(s){var a=[];e=e||"rows",i=i||"iconIndex";for(var l=0,h=s.length;l<h;l++){var u=s[l],c=u.getObject();o&&(c.__rowId=u._rowId),r&&(c.__rowState=u.rowState),t&&0!==n&&(c[e]=u.getChildObjects(t,e,i,o,r,n-1)),c[i]=u.iconIndex,a.push(c)}return a}return null},i.prototype.$_createTreeOutputRows=function(e,i,o){var r=[];!function t(e,i,o){for(var r=0,n=e.length;r<n;r++){var s=e[r];i.push(e[r]),o&&s[o]&&s[o].length&&t(s[o],i,o)}}(e,r,o);var n,s=this.provider,a=s.fieldCount,l=r.length;i instanceof Ke||(i=new Ke(i));for(var h=i.nullDateText,u=i.nullText,c=i.nanText,d=this.provider.handler,p=0;p<a;p++){var f=s.getField(p),_=f.orgFieldName,g=void 0,y=void 0;if(f.dataType==t.ValueType.DATETIME&&((g=i.datetimeCallback)||(y=i.datetimeWriter)||null!=h&&null!=h))if(g)for(var m=0;m<l;m++)(n=r[m])[_]=g(d,n._rowId,_,n[_]);else for(m=0;m<l;m++){var b=(n=r[m])[_];n[_]=b?y?y.getText(n[_]):b:h}else if(f.dataType==t.ValueType.BOOLEAN&&((g=i.booleanCallback)||(y=i.booleanFormatter)))if(g)for(m=0;m<l;m++)(n=r[m])[_]=g(d,n._rowId,_,n[_]);else for(m=0;m<l;m++)(n=r[m])[_]=y.formatValue(n[_]);else if(f.dataType==t.ValueType.NUMBER&&((g=i.numberCallback)||(y=i.numberFormatter)||null!=c&&null!=c))if(g)for(m=0;m<l;m++)(n=r[m])[_]=g(d,n._rowId,_,n[_]);else for(m=0;m<l;m++){var v=(n=r[m])[_];n[_]=null==v||isNaN(v)?c:y?y.getText(v):v}else if(null!=u&&null!=u)for(m=0;m<l;m++){v=(n=r[m])[_];n[_]=null==v||null==v?u:v}}for(var w=0,C=r.length;w<C;w++)delete r[w]._rowId},i.prototype.getOutput=function(t,e){if(t){var i=this.getObject();return i&&(i[e||"iconIndex"]=this.iconIndex,i._rowId=this._rowId,t.rowState&&(i.__rowState=this.rowState),this.$_createTreeOutputRows([i],t)),i}return null},i.prototype.getChildOutputObjects=function(t,e,i,o){var r=this.getChildObjects(e,i,o,!0,null==t?void 0:t.rowState);return r&&t&&this.$_createTreeOutputRows(r,t,i),r},i.prototype.findById=function(t){if(this._children)for(var e=0,i=this._children.length;e<i;e++){var o=this._children[e];if(o.rowId==t)return o;if(o=o.findById(t))return o}return null},i.prototype.indexOf=function(t){return this._children?this._children.indexOf(t):-1},i.prototype.insertChild=function(t,e,i){var o=this.provider;return o.undoable?o._commands.execute(new eo(o,this,t,e,i)):this._insertChild(t,e,!1,i)},i.prototype.addChild=function(t,e){return this.insertChild(this.count,t,e)},i.prototype.insertChildren=function(t,e,i){return this._insertChildren(t,e,!1,i)},i.prototype.removeChild=function(t,e){var i=this.provider,o=i.undoable,r=i._commands;return o?r.execute(new to(i,t,e)):this._removeChild(t,!1,e,null)},i.prototype.clearChildren=function(){var t=this.provider;t&&!t._checkClientState()||this._removeChildren()},i.prototype.findChild=function(t,e){var i=this.provider;if(!i||!t||t.length<1||!e||e.length<t.length)return null;for(var o=[],r=[],n=0,s=t.length;n<s;n++){var a=void 0;(a="string"==typeof t[n]?i.getFieldIndex(t[n]):Number(t[n]))>=0&&a<i.fieldCount&&o.indexOf(a)<0&&(o.push(a),r.push(e[n]))}n=0;for(var l=o.length;n<l;n++)o[n]=i.getField(o[n]);return this.$_findChild(o,r)},i.prototype.isAncestorOf=function(t){if(t&&t!==this){for(var e=t.parent;e&&e!==this;)e=e.parent;return e===this}return!1},i.prototype.clearRowStates=function(e,i){var o=this.provider;if(o){var r=[],n=e?[]:null;this._collectStateRows(r,n);var s=r.length,a=n?n.length:0;if(0!=s||0!=a){if(i)for(var l=0,h=r.length;l<h;l++)r[l]._changeRowState(t.RowState.NONE,!0,!1);else s&&o.changeRowStates(r,t.RowState.NONE);a&&o.deleteRows(n)}}},i.prototype.toTreeString=function(){for(var t=this.rowId+"",e=new Array(this.level+1).join("  "),i=0;i<this.count;i++)t+="\n"+e+this.getChild(i).toTreeString();return t},i.prototype._checkFieldIndex=function(t){var e=this.provider.fieldCount;if(t<0||t>=e)throw new Je(Ue.messages.fieldIndexOutOfBounds+t)},i.prototype._descendantCountChanged=function(t){this._descendantCount+=t;var e=this.parent;e&&e._descendantCountChanged(t)},i.prototype._moveChild=function(t,e){if(t!=e){if(t<0||t>=this._children.length)throw new RangeError("index is out of range: "+t);if(e<0||e>=this._children.length)throw new RangeError("newIndex is out of range: "+e);var i=this._children[t];if(t>e)for(var o=t;o>e;o--)this._children[o]=this._children[o-1];else for(o=t;o<e;o++)this._children[o]=this._children[o+1];this._children[e]=i}},i.prototype._moveChildren=function(t,e){var i=t[0];if(i!=e){if(i<0||i>=this._children.length)throw new RangeError("index is out of range: "+t[0]);if(e<0||e>=this._children.length)throw new RangeError("newIndex is out of range: "+e);for(var o=this._children,r=[],n=t.length-1;n>=0;n--)r.push(o.splice(t[n],1)[0]);for(n=0;n<r.length;n++)o.splice(e,0,r[n])}},i.prototype._changeParent=function(t,e){if(e<0||e>t._children.length)throw new RangeError("index is out of range: "+e);var i=this.parent,o=this.index;i._children.splice(o,1),i._descendantCountChanged(-1-this.descendantCount),i._detach(this),t._children.splice(e,0,this),t._descendantCountChanged(1+this.descendantCount),t._attach(this)},i.prototype._insertChild=function(e,i,o,r){var n=this.provider;if(n&&!o){if(!n._checkClientState())return!1;n.refreshFieldFormats()}if(!i)throw new Error("child is null");if(this._children=this._children||[],e<0||e>this._children.length)throw new RangeError("Insert index is invalid: "+e);return!(!o&&!this._doChildAdding(e,i))&&(this._children.splice(e,0,i),this._descendantCountChanged(1+i.descendantCount),this._attach(i),r||i._changeRowState(t.RowState.CREATED,!0,!1),this._doChildAdded(e,i),!0)},i.prototype._insertChildren=function(e,i,o,r){var n=this.provider;if(n&&!o){if(!n._checkClientState())return!1;n.refreshFieldFormats()}if(this._children=this._children||[],e<0||e>this._children.length)throw new RangeError("Insert index is invalid: "+e);if(o||this._doRowsAdding(e,i)){for(var s=0,a=0;a<i.length;a++){var l=i[a];this._children.splice(e+a,0,l),this._attach(l),s+=l.descendantCount,r||l._changeRowState(t.RowState.CREATED,!0,!1)}return this._descendantCountChanged(s),this._doRowsAdded(e,i),!0}return!1},i.prototype._addChild=function(t,e,i){return this._insertChild(this.count,t,e,i)},i.prototype.$_removeChild=function(t,e,i){return!(!i&&!this._doChildRemoving(t))&&(this._children.splice(e,1),this._descendantCountChanged(-1-t.descendantCount),this._detach(t),this._doChildRemoved(t),!0)},i.prototype._removeChild=function(e,i,o,r){var n=this.provider;if(!n||i||n._checkClientState()){if(e&&this._children){var s=this._children.indexOf(e),a=ro.findSave(e.rowId,r);if(!n.softDeleting||!n.checkStates)return a&&(a.run="remove"),this.$_removeChild(e,s,i);switch(e.rowState){case t.RowState.CREATED:if(n.deleteCreated)return a&&(a.run="remove"),this.$_removeChild(e,s,i);e._changeRowState(t.RowState.CREATE_AND_DELETED,!0,!1),a&&(a.run="state",a.changeState=t.RowState.CREATE_AND_DELETED);break;case t.RowState.DELETED:case t.RowState.CREATE_AND_DELETED:a&&(a.run="state",a.changeState=e.rowState),a&&(a.run="state");break;default:e._changeRowState(t.RowState.DELETED,!0,!1),a&&(a.run="state",a.changeState=t.RowState.DELETED)}if(o&&e.count>0)for(var l=e.children,h=e.count;h--;)e._removeChild(l[h],i,o,a&&a.children)}return!1}},i.prototype._removeChildren=function(){this._children&&this._children.length>0&&(this._children.splice(0,this._children.length),this._descendantCountChanged(-this._descendantCount),this._doCleared())},i.prototype._setChildren=function(t){this._children&&this._children.length>0&&this._children.splice(0,this._children.length);var e,i=-this._descendantCount;if(t&&(e=t.length)>0){this._children||(this._children=[]);for(var o=0;o<e;o++){var r=t[o];this._children.push(r),i+=1+r.descendantCount,this._attach(r)}}this._descendantCountChanged(i)},i.prototype.$_findChild=function(t,e){for(var i=t.length,o=this.count,r=0;r<o;r++){for(var n=this._children[r],s=!0,a=0;a<i;a++)if(!t[a].equalValues(e[a],n.getValue(t[a].index))){s=!1;break}if(s)return n;if(n=n.$_findChild(t,e))return n}return null},i.prototype._collectStateRows=function(e,i){for(var o=this.count;o--;){var r=this.getChild(o),n=r.rowState;!i||n!=t.RowState.DELETED&&n!=t.RowState.CREATE_AND_DELETED?(n!=t.RowState.NONE&&e.push(r),r._collectStateRows(e,i)):i.push(r)}},i.prototype._clearOrgValues=function(){for(var t=this.count;t--;)this.getChild(t)._clearOrgValues()},i.prototype._restoreState=function(t,e){if(t)for(var i=this.count;i--;)this.getChild(i)._restoreState(!0,e);return!1},i.prototype.$_restoreRow=function(t,e,i){if(t)for(var o=this.count;o--;)this.getChild(o).$_restoreRow(!0,e,i);return!1},i.prototype._doChildAdding=function(t,e){var i=this.provider;return!i||i._rowAdding(this,t,e)},i.prototype._doChildAdded=function(t,e){var i=this.provider;i&&i._rowAdded(e)},i.prototype._doRowsAdding=function(t,e){var i=this.provider;return!i||i._rowsAdding(this,t,e)},i.prototype._doRowsAdded=function(t,e){var i=this.provider;i&&i._rowsAdded(this,e)},i.prototype._doChildRemoving=function(t){var e=this.provider;return!e||e._rowRemoving(t)},i.prototype._doChildRemoved=function(t){var e=this.provider;e&&e._rowRemoved(t)},i.prototype._doCleared=function(){var t=this.provider;t&&t._rowCleared(this)},i}(Lt),oo=function(t){function e(e){var i=t.call(this,e,!1)||this;return i._provider=e,i}return o(e,t),e.prototype._doDispose=function(){this._provider=null,t.prototype._doDispose.call(this)},e.prototype.set=function(t){for(var e=[],i=0;i<t.count;i++)e.push(t.getChild(i).copy());this._setChildren(e)},Object.defineProperty(e.prototype,"provider",{get:function(){return this._provider},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowId",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasChildren",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.copy=function(){for(var t=new e(null),i=0,o=this.count;i<o;i++){var r=this.getChild(i).copy();t._addChild(r,!0,!0)}return t._provider=this._provider,t},e.prototype._changeRowState=function(t,e,i){return!1},e.prototype.getObject=function(){return null},e.prototype.getValue=function(t){},e.prototype.setValue=function(t,e,i){return!1},e.prototype._attach=function(t){t._parent=this},e.prototype._detach=function(t){t._parent===this&&(t._parent=null)},e.prototype.update=function(t,e){return!1},e.prototype.$_setHasChildren=function(t){},e.prototype.$_setIconIndex=function(t){},e.prototype._keepRow=function(t){},e.prototype._yieldRow=function(t,e){},e.prototype._keepStates=function(t){},e.prototype._yieldStates=function(t,e){},e}(io),ro=function(t){function e(){var e=t.call(this)||this;return e._nextRowId=0,e._commandListeners=[],e}return o(e,t),e.prototype._doDispose=function(){this._fireDispose(),t.prototype._doDispose.call(this)},e.prototype.editCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},e.prototype.registerCommandListener=function(t){t&&this._commandListeners.indexOf(t)<0&&this._commandListeners.push(t)},e.prototype.unregisterCommandListener=function(t){var e=this._commandListeners.indexOf(t);e>=0&&this._commandListeners.splice(e,1)},e.prototype._keepCommandStates=function(t){if(this._commandListeners.length>0)return this._commandListeners[0].getCommandStates(t)},e.prototype._yieldCommandStates=function(t,e){if(this._commandListeners.length>0)return this._commandListeners[0].setCommandStates(t,e)},e.prototype._fireDispose=function(){this.fireEvent("onTreeDataProviderDisposed")},e.findSave=function(t,e){if(e)for(var i=0,o=e;i<o.length;i++){var r=o[i];if(r.rowId===t)return r}},e}(ti),no=function(t){function e(e,i,o){var r=t.call(this,e)||this;return r._rowFields=Rt.deepCopy(i),r._value=o,r}return o(e,t),e.prototype._doRun=function(t){var e={};for(var i in this._rowFields){var o=t.rowById(+i)._keepRow(t);e[i]=o}return t.$_fillValue(this._rowFields,this._value),e},e.prototype._doRedo=function(t,e){t.$_fillValue(this._rowFields,this._value)},e.prototype._doUndo=function(t,e){var i=[];for(var o in this._rowFields){var r=t.rowById(+o);r._yieldRow(t,e[o]),i.push(r)}t._fireRowsUpdated(i)},e}(Zi),so=function(t){function e(e,i,o,r){var n=t.call(this,e)||this;return n._rowIds=i.map((function(t){return t.rowId})),n._values=n._cloneValues(o.slice()),n}return o(e,t),e.prototype._doRun=function(t){for(var e=[],i=this._rowIds.map((function(e){return t.rowById(e)})),o=0,r=i;o<r.length;o++){var n=r[o]._keepRow(t);e.push(n)}return t.$_updateRows(i,this._values,this._strict),e},e.prototype._doRedo=function(t,e){var i=this._rowIds.map((function(e){return t.rowById(e)}));t.$_updateRows(i,this._values,this._strict)},e.prototype._doUndo=function(t,e){for(var i=[],o=this._rowIds.map((function(e){return t.rowById(e)})),r=0;r<o.length;r++){var n=o[r];e[r].state!==n.rowState&&i.push(n),n._yieldRow(t,e[r])}t._fireRowStatesChanged(i)},e}(Zi),ao=function(t){function e(e,i,o,r){var n=t.call(this,e)||this;return n._rowId=i.rowId,n._field=o,n._value=r instanceof Date?new Date(r):r,n}return o(e,t),e.prototype._doRun=function(t){var e=t.rowById(this._rowId),i=e._keepRow(t);return(i.result=e.$_setValue(this._field,this._value,!1))&&(this._newState=e.rowState),i},e.prototype._doRedo=function(t,e){var i=t.rowById(this._rowId);i&&i.$_setValue(this._field,this._value,!1)},e.prototype._doUndo=function(t,e){var i=t.rowById(this._rowId);i._yieldRow(t,e),e.state!=this._newState&&t._fireRowStateChanged(i),t._valueChanged(i,this._field)},e}(Zi),lo=function(t){function e(e,i,o){var r=t.call(this,e)||this;return r._rowIds=i.map((function(t){return t.rowId})),r._recursive=o,r._softDeleting=e.softDeleting,r}return o(e,t),e.prototype._doDispose=function(){this._rowIds=null,t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e=[],i=this._rowIds.map((function(e){return t.rowById(e)}));i.sort((function(t,e){return t.index-e.index}));for(var o=0,r=i;o<r.length;o++){var n=r[o],s=n._keepRow(t,!0);(!this._softDeleting||this._recursive)&&n.children&&n.children.length&&this._keepChildren(t,n,s.children=[]),e.push(s)}return t.$_removeRows(i,this._recursive,e),e},e.prototype._doRedo=function(t,e){var i=this._rowIds.map((function(e){return t.rowById(e)}));t.$_removeRows(i,this._recursive,e)},e.prototype._doUndo=function(t,e){var i=t,o=[];if(e&&e.length)for(var r=0,n=e;r<n.length;r++){var s=n[r];if("state"===s.run){(a=i.rowById(s.rowId))&&a._changeRowState(s.state,!0,!1),o.push(a),s.children&&this._restoreChildren(i,a,s.children)}else{var a;(a=i.createTemp())._yieldRow(i,s,!0);var l=i.rowById(s.parentId);l&&l._insertChild(s.index,a,!1,!0),s.children&&this._restoreChildren(i,a,s.children)}}i._statesChanged(o)},e}(Zi),ho=function(t){function e(e,i,o,r,n,s,a){var l=t.call(this,e)||this;return l._data=r,l._index=o,l._noState=a,l._parentId=i.rowId,l._childrenProp=n,l._iconIndex=Rt.getNumber(r[s],-1),l}return o(e,t),e.prototype._doDispose=function(){this._data=null,t.prototype._doDispose.call(this)},e.prototype._createChildren=function(t,e,i,o){if(i&&i.length)for(var r=0;r<i.length;r++){var n=i[r],s=t.createRow(n,this._iconIndex,!1);e._addChild(s,!1,this._noState);var a=s._keepRow(t,!1);o.push(a),n[this._childrenProp]&&this._createChildren(t,s,n[this._childrenProp],a.children=[])}},e.prototype._doRun=function(t){var e,i=this._data,o=this._childrenProp,r=this._iconIndex,n=i[o],s=t.createRow(i,r,n&&n.length>0);return t.rowById(this._parentId)._insertChild(this._index,s,!1,this._noState)?((e=s._keepRow(t,!1)).index=this._index,n&&n.length&&this._createChildren(t,s,n,e.children=[]),e.result=s.rowId):e.result=-1,e},e.prototype._doRedo=function(t,e){var i=t.createTemp();i._yieldRow(t,e,!0),e.children&&e.children.length&&this._restoreChildren(t,i,e.children);var o=t.rowById(this._parentId);o&&o._insertChild(e.index,i,!1,this._noState)},e.prototype._doUndo=function(t,e){var i=t.rowById(this._parentId),o=t.rowById(e.rowId);i&&o&&i.$_removeChild(o,this._index,!1)},e}(Zi),uo=function(t){function e(e,i,o){var r=t.call(this,e)||this;return r._rowId=i.rowId,r._newState=o,r}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={},i=t.rowById(this._rowId);return e.state=i&&i._keepState(t),i&&i._changeRowState(this._newState,!0,!1),e},e.prototype._doRedo=function(t,e){t.rowById(this._rowId)._changeRowState(this._newState,!0,!1)},e.prototype._doUndo=function(t,e){var i=t.rowById(this._rowId);i._yieldStates(t,e),e.state!=this._newState&&(i._changeRowState(e.state,!0,!1),t._fireRowStateChanged(i,!0))},e}(Zi),co=function(t){function e(e,i,o,r,n){var s=t.call(this,e)||this;return s._rows=i.slice(),s._newState=o,s._force=r,s._rowEvents=n,s}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){for(var e=[],i=0,o=this._rows;i<o.length;i++){var r=o[i],n=t.rowById(r);if(n){var s=n._keepStates(t);e.push(s)}}return t.$_setRowStates(this._rows,this._newState,this._force,this._rowEvents),e},e.prototype._doRedo=function(t,e){t.$_setRowStates(this._rows,this._newState,this._force,this._rowEvents)},e.prototype._doUndo=function(t,e){for(var i=function(t){for(var i=0,o=e;i<o.length;i++){var r=o[i];if(r.rowId===t)return r}},o=[],r=0,n=this._rows;r<n.length;r++){var s=n[r],a=t.rowById(s),l=i(s);a&&l&&a&&l&&a._changeRowState(l.state,this._rowEvents,!1)&&o.push(s)}!this._rowEvents&&o.length&&t._fireRowStatesChanged(o)},e}(Zi),po=function(t){function e(e,i,o){var r=t.call(this,e)||this;return r._rowId=i.rowId,r._delta=o,r}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={},i=t.rowById(this._rowId);return e.result=t.$_changeRowIndex(i,this._delta),e},e.prototype._doRedo=function(t,e){var i=t.rowById(this._rowId);i&&t.$_changeRowIndex(i,this._delta)},e.prototype._doUndo=function(t,e){var i=t.rowById(this._rowId);i&&t.$_changeRowIndex(i,-this._delta)},e}(Zi),fo=function(t){function e(e,i,o,r){var n=t.call(this,e)||this;return n._rowId=i.rowId,n._oldIndex=i.index,n._oldParentId=i.parent.rowId,n._parentId=o.rowId,n._index=r,n}return o(e,t),e.getInfo=function(t,e,i){return{row:t.rowById(e),parent:t.rowById(i)}},e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var i={},o=e.getInfo(t,this._rowId,this._parentId),r=o.row,n=o.parent;return i.result=t.$_changeRowParent(r,n,this._index),i},e.prototype._doRedo=function(t,i){var o=e.getInfo(t,this._rowId,this._parentId),r=o.row,n=o.parent;t.$_changeRowParent(r,n,this._index)},e.prototype._doUndo=function(t,i){var o=e.getInfo(t,this._rowId,this._oldParentId),r=o.row,n=o.parent;t.$_changeRowParent(r,n,this._oldIndex)},e}(Zi),_o=function(t){function e(e,i,o){var r=t.call(this,e)||this;return r._rowIds=i.map((function(t){return t.rowId})),r._delta=o,r}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.getRows=function(t){return this._rowIds.map((function(e){return t.rowById(e)}))},e.prototype._doRun=function(t){var e={},i=this.getRows(t);return e.result=t.$_changeRowsIndex(i,this._delta),e},e.prototype._doRedo=function(t,e){var i=this.getRows(t);t.$_changeRowsIndex(i,this._delta)},e.prototype._doUndo=function(t,e){var i=this.getRows(t);t.$_changeRowsIndex(i,-this._delta)},e}(Zi),go=function(t){function e(e,i,o){var r=t.call(this,e)||this;return r._deleteRows=i,r._rowEvents=o,r}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.saveTreeNode=function(t,e,i){var o;if(-1!==t.rowId){var r=t.rowState;o={state:r,rowId:t.rowId,index:t.index,parentId:t.parent.rowId,parentRemove:i,orgValues:t._orgValues&&t._orgValues.slice(),children:[]},this._deleteRows&&(kt(r)||i)&&(o.values=t.values&&t.values.slice(),i=!0),e.push(o),e=o.children}for(var n=0,s=t.count;n<s;n++)this.saveTreeNode(t.getChild(n),e,i)},e.prototype.restoreRowStates=function(t,e,i){for(var o=0;o<e.length;o++){var r=e[o],n=t.rowById(r.rowId);if(this._deleteRows&&(kt(r.state)||r.parentRemove)){var s=t.rowById(r.parentId);n=t.createTemp(),s&&(n._yieldRow(t,r,!0),s._insertChild(r.index,n,!1,!0))}else n&&n.rowState!==r.state&&(i.push(n),n._yieldStates(t,r));this.restoreRowStates(t,r.children,i)}},e.prototype._doRun=function(t){var e=[];return this.saveTreeNode(t.rootRow,e,!1),t.$_clearRowStates(this._deleteRows,this._rowEvents),e},e.prototype._doRedo=function(t,e){t.$_clearRowStates(this._deleteRows,this._rowEvents,!1)},e.prototype._doUndo=function(t,e){var i=[];this.restoreRowStates(t,e,i),i.length&&t._fireRowStatesChanged(i)},e}(Zi),yo=function(t){function e(e,i){var o=t.call(this,e)||this;return o._rows=i&&i.slice(),o._recursive=!!o._rows,o}return o(e,t),e.prototype._doDispose=function(){this._rows=null,t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={};return t.$_restoreUpdatedRows(this._rows,e),e},e.prototype._doRedo=function(t,e){t.$_restoreUpdatedRows(this._rows,null)},e.prototype._doUndo=function(t,e){var i=e.rows;if(!(i.length<1)){for(var o=0;o<i.length;o++){var r=i[o];t.$_undoRestoreRow(r,e[r])}t._fireRefresh()}},e}(Zi),mo=function(e){function i(i,o,r){var n=e.call(this,i,r)||this;if(n._iconIndex=-1,n._hasChildren=!1,n._parent=null,n._values=null,n._orgValues=null,n._state=t.RowState.NONE,i&&o){var s=i.fieldCount;n._values=new Array(s);for(var a=0,l=Math.min(o.length,s);a<l;a++)n._values[a]=i.getField(a).readValue(o[a])}return n}return o(i,e),i.prototype._doDispose=function(){this._values=null,this._orgValues=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"provider",{get:function(){return this._parent&&this._parent.provider},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return this._parent?this._parent.indexOf(this):-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"level",{get:function(){return this._parent?this._parent.level+1:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasChildren",{get:function(){return this._hasChildren},set:function(t){if(t!=this._hasChildren){this._hasChildren=t;var e=this.provider;e&&e._hasChildrenChanged(this)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconIndex",{get:function(){return this._iconIndex},set:function(t){if(isNaN(t)&&(t=-1),t!=this._iconIndex){this._iconIndex=t;var e=this.provider;e&&e._iconIndexChanged(this)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowState",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"prevRowState",{get:function(){return this._previousState},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"values",{get:function(){return this._values&&this._values.slice()},enumerable:!1,configurable:!0}),i.prototype._attach=function(t){t._parent=this},i.prototype._detach=function(t){t._parent===this&&(t._parent=null)},i.prototype._changeRowState=function(e,i,o){var r=this.provider;if(r&&e!=this._state){var n=this._state,s=r._needOrgValues;return this._state=e,this._previousState=n,e==t.RowState.UPDATED&&s?this._orgValues=this._orgValues||this._values.concat():n==t.RowState.UPDATED&&!s&&this._orgValues&&(this._orgValues=null),i&&r._stateChanged(this,o),!0}return!1},i.prototype.getValue=function(t){if(this.provider){if(this._checkFieldIndex(t),this._values)return this._values[t];throw new Error("Row data is not loaded")}},i.prototype.setValue=function(t,e,i){var o=this.provider;return!!o&&(o.undoable?o._commands.execute(new ao(o,this,t,e)):this.$_setValue(t,e,i))},i.prototype.getObject=function(){var t=this.provider;if(t){for(var e=t.fieldCount,i={},o=0;o<e;o++){i[t.getOrgFieldName(o)]=this._values[o]}return i}return null},i.prototype.copy=function(){var t=new i(null,null,!0);t._rowId=this._rowId,t._iconIndex=this._iconIndex,t._hasChildren=this._hasChildren,t._state=this._state,t._values=this._values?this._values.concat():null;for(var e=0,o=this.count;e<o;e++){var r=this.getChild(e).copy();t._addChild(r,!0,!0)}return t},i.prototype.update=function(t,e){var i=this.provider;return!!i&&(i.undoable?i._commands.execute(new Qi(i,this,t,e)):this.$_update(i,t,e,!1))},i.prototype._keepRow=function(t,e){var i={};return i.values=this._values&&this._values.slice(),i.state=this._state,i.orgValues=this._orgValues&&this._orgValues.slice(),i.index=this.index,i.hasChildren=this.hasChildren,i.rowId=this.rowId,e&&(i.parentId=this.parent.rowId),i.outer=t._keepCommandStates(this),i},i.prototype._yieldRow=function(t,e,i){this._values=e.values&&e.values.slice(),this._state=e.state,this._orgValues=e.orgValues&&e.orgValues.slice(),i&&(this._rowId=e.rowId,this.hasChildren=e.hasChildren),t._yieldCommandStates(this,e.outer)},i.prototype._keepStates=function(t){var e={};return e.rowId=this.rowId,e.state=this.rowState,e},i.prototype._yieldStates=function(t,e){this._state=e.state,e.orgValues&&(this._orgValues=e.orgValues.slice())},i.prototype._keepState=function(){return this._state},i.prototype._yieldState=function(t){this._state=t},i.prototype.$_setValue=function(e,i,o){var r=this.provider;if(r){if(!r._checkClientState())return;if(r.refreshFieldFormats(),this._checkFieldIndex(e),this._values){if(i!=this._values[e]){var n=null,s=r.getField(e),a=r.checkStates&&(this._state==t.RowState.NONE||!this._state);!o&&a&&r._needOrgValues&&(n=this._values.concat()),this._values[e]=s.readValue(i),r._internalCalculateValues(this._values,this.rowId),!o&&a?(r._needOrgValues&&(this._orgValues=n),this._state=t.RowState.UPDATED,r._stateChanged(this,!1)):r._needRestore&&this.$_restoreState(r),r._valueChanged(this,e)}return!0}throw new Error("Row data is not loaded")}},i.prototype.$_update=function(t,e,i,o){if(!o){if(!t._checkClientState())return;t.refreshFieldFormats()}var r=this._values.slice();if(Rt.isArray(e))for(var n=0;n<e.length;n++)r[n]=e[n];else if(Rt.isObject(e))for(var s in e){r[this.provider.getFieldIndex(s)]=e[s]}return!(!e||!o&&!t._rowUpdating(this,r,this._values.slice()))&&(this.$_internalUpdate(e,i,!0),t._rowUpdated(this),!0)},i.prototype._clearOrgValues=function(){this._orgValues&&(this._orgValues.length=0,this._orgValues=null),e.prototype._clearOrgValues.call(this)},i.prototype._restoreState=function(t,i){var o=this.$_restoreState(this.provider);return o&&i&&i.push(this),e.prototype._restoreState.call(this,t,i),o},i.prototype.$_restoreRow=function(i,o,r){var n=!1;if(this._state===t.RowState.UPDATED){var s=this._orgValues;if(s){var a=this._values;r&&(r[this.rowId]={values:this.values.slice(),state:this._state});for(var l=0,h=Math.min(s.length,this.provider.fieldCount);l<h;l++)a[l]=s[l];this._state=t.RowState.NONE,o&&o.push(this),n=!0}}return e.prototype.$_restoreRow.call(this,i,o,r),n},i.prototype.$_restoreState=function(e){if(this._state==t.RowState.UPDATED&&this._orgValues){for(var i=this._orgValues,o=this._values,r=this.provider,n=r.strictRestore,s=0,a=r.fieldCount;s<a;s++){var l=o.length>s?o[s]:void 0,h=i.length>s?i[s]:void 0;if(n){if(!r.getField(s).equalValues(l,h))return!1}else if(!r.getField(s).sameValues(l,h))return!1}return this._state=t.RowState.NONE,!0}return!1},i.prototype.$_getUpdatedCells=function(){var t=this._orgValues,e=this._values,i=this.provider,o=i.strictRestore,r=[];if(!t||t.length<=0)return null;for(var n=0,s=i.fieldCount;n<s;n++){var a=e.length>n?e[n]:void 0,l=t.length>n?t[n]:void 0,h=i.getField(n);h.calculated||(o?h.equalValues(a,l)||r.push({fieldName:i.getOrgFieldName(n),oldValue:t[n],newValue:e[n]}):h.sameValues(a,l)||r.push({fieldName:i.getOrgFieldName(n),oldValue:t[n],newValue:e[n]}))}return r},i.prototype.$_setHasChildren=function(t){this._hasChildren=t},i.prototype.$_setIconIndex=function(t){this._iconIndex=isNaN(t)?-1:t},i.prototype.$_internalUpdate=function(e,i,o){var r=!1,n=Array.isArray(e),s=this.provider;if(s){var a=Math.min(s.fieldCount,n?e.length:s.fieldCount),l=s.checkStates&&(this._state==t.RowState.NONE||!this._state),h=null;l&&s._needOrgValues&&(h=this._values.concat());for(var u=0;u<a;u++){var c=s.getField(u);if(n||e.hasOwnProperty(c.orgFieldName)){var d=n?e[u]:e[c.orgFieldName];i&&void 0===d||(r=!s._needRestore||(r||(i?!c.equalValues(this._values[u],c.readValue(d)):!c.sameValues(this._values[u],c.readValue(d)))),this._values[u]=s.getField(u).readValue(d))}}s._internalCalculateValues(this._values,this.rowId),l&&r?(h&&(this._orgValues=h),this._state=t.RowState.UPDATED,o&&s._stateChanged(this,!1)):s._needRestore&&this.$_restoreState(s)}},i}(io),bo=function(e){function i(t,i){var o=e.call(this)||this;return o._countDirty=!1,o._tagLock=!1,o._points=[],o._nextPoint=0,o._rowMap=[],o._needOrgValues=!1,o._needRestore=!1,o._checkParentProc=null,o._hiddenRows=[],o.$_handler=i,t&&(o._undoable=t,o._commands=new Ji(o)),o._rootRow=new oo(o),o._tags=new Li(o),o}return o(i,e),i.prototype._doDispose=function(){this._commands=this._commands&&this._commands.dispose(),this._points=this._rowMap=this._hiddenRows=[],this._rootRow.clearChildren(),this._tags=this._tags&&this._tags.dispose(),e.prototype._doDispose.call(this),this._rootRow=null},Object.defineProperty(i.prototype,"rootRow",{get:function(){return this._rootRow},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parentCallback",{get:function(){return this._parentCallback},set:function(t){this._parentCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"needOrgValues",{get:function(){return this._needOrgValues},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"needRestore",{get:function(){return this._needRestore},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoable",{get:function(){return this._undoable&&!!this._commands},set:function(t){t!=this.undoable&&(this._undoable=t,this._commands&&this._commands.flush())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"treeField",{get:function(){return this._treeField},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"handler",{get:function(){return this.$_handler},enumerable:!1,configurable:!0}),i.prototype.addTag=function(t){this._tags&&this._tags.add(t)},i.prototype.removeTag=function(t){this._tags&&this._tags.remove(t)},i.prototype.setRows=function(t,e,i,o,r){if(!this._checkClientState())return-1;var n=0,s=this.getFieldIndex(e);if(this._treeField=e,this._firePrepareRemain(),s>=0){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var a=new zi(this,this._rootRow);a.parentCallback=this._parentCallback,n=a.load(null,t,s,i,this.getFieldIndex(o),this.getFieldIndex(r)),this._checkSum(n),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated(),n},i.prototype.setCsvRows=function(t,e,i,o,r){if(!this._checkClientState())return-1;var n=0,s=this.getFieldIndex(e);if(this._treeField=e,this._firePrepareRemain(),s>=0){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var a=new qi(this,this._rootRow);a.parentCallback=this._parentCallback,n=a.load(null,t,s,i,this.getFieldIndex(o),this.getFieldIndex(r)),this._checkSum(n),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated(),n},i.prototype.setXmlRows=function(t,e,i,o){if(!this._checkClientState())return-1;var r=0;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats(),r=new Xi(this,this._rootRow).load(null,t,e,this.getFieldIndex(i),this.getFieldIndex(o)),this._checkSum(r),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated(),r},i.prototype.setJsonRows=function(t,e,i,o){if(!this._checkClientState())return-1;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var r=new Ki(this,this._rootRow);this._rowCount=r.load(null,t,e,this.getFieldIndex(i),this.getFieldIndex(o)),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated(),this.rowCount},i.prototype.setJsonRows2=function(t,e,i,o,r){if(!this._checkClientState())return-1;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var n=new Ki(this,this._rootRow);this._rowCount=n.load2(null,t,e,i,o,r),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated(),this.rowCount},i.prototype.appendDataRows=function(t,e,i,o,r,n){if(!this._checkClientState())return-1;var s=0,a=this.getFieldIndex(i);if(a>=0){var l=new zi(this,this._rootRow);l.parentCallback=this._parentCallback,this.beginUpdate();try{this.refreshFieldFormats(),s=l.load(t,e,a,o,this.getFieldIndex(r),this.getFieldIndex(n))}finally{if(this.endUpdate(!1),s>0){var h=l.insertedRows;h&&(s=h.length)>0&&this._rowsAdded(t,h)}}}return s},i.prototype.appendCsvRows=function(t,e,i,o,r,n){if(!this._checkClientState())return-1;var s=0,a=this.getFieldIndex(i);if(a>=0){this.beginUpdate();try{this.refreshFieldFormats();var l=new qi(this,this._rootRow);l.parentCallback=this._parentCallback,s=l.load(t,e,a,o,this.getFieldIndex(r),this.getFieldIndex(n))}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),s},i.prototype.appendXmlRows=function(t,e,i,o,r){if(!this._checkClientState())return-1;var n=0;if(e){var s=new Xi(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),n=s.load(t,e,i,this.getFieldIndex(o),this.getFieldIndex(r))}finally{if(this.endUpdate(!1),n>0){var a=s.insertedRows;a&&(n=a.length)>0&&this._rowsAdded(t,a)}}}return this._fireRowCountChanged(),n},i.prototype.appendJsonRows=function(t,e,i,o,r){if(!this._checkClientState())return-1;var n=0;if(e){var s=new Ki(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),n=s.load(t,e,i,this.getFieldIndex(o),this.getFieldIndex(r))}finally{if(this.endUpdate(!1),n>0){var a=s.insertedRows;a&&(n=a.length)>0&&this._rowsAdded(t,a)}}}return this._fireRowCountChanged(),n},i.prototype.setIconIndex=function(t,e){return t.iconIndex!=e&&(t.$_setIconIndex(e),!0)},i.prototype.setHasChildren=function(t,e){return e!=t.hasChildren&&(t.$_setHasChildren(e),!0)},i.prototype.getChildCount=function(t){return(t||this._rootRow).count},i.prototype.getRows=function(t){return(t||this._rootRow).children},i.prototype.getDescendantCount=function(t){return(t||this._rootRow).descendantCount},i.prototype.getDescendants=function(t,e){function i(t,e,o){for(var r=0,n=t.count;r<n;r++){var s;e.push(s=t.getChild(r)),o>s.level&&i(s,e,o)}}e=arguments.length>1?e:0;var o=t||this._rootRow;if(e<=0)return o.descendants;if(e>o.level){var r=[];return i(o,r,e),r}return null},i.prototype.getChild=function(t,e){return(t||this._rootRow).getChild(e)},i.prototype.hasData=function(t){return null!=this.rowById(t)},i.prototype.rowById=function(t){var e=this._rowMap[t];return e&&e.rowId===t||(e=this._findRowById(t))&&(this._rowMap[t]=e),e||this.rootRow.rowId!==t?e:this.rootRow},i.prototype.getDataRow=function(t){var e=this._rowMap[t];return null==e&&(e=this._findRowById(t)),null!=e?t:-1},i.prototype.rowsByIds=function(t,e){if(t){for(var i=[],o=0,r=t;o<r.length;o++){var n=r[o],s=this.rowById(n);(s||e)&&i.push(s)}return i}return null},i.prototype.createRow=function(t,e,i,o){void 0===o&&(o=!0);var r=null;if(o&&this.refreshFieldFormats(),Array.isArray(t))r=new mo(this,t);else if(t){var n=new Array(this.fieldCount);for(var s in t){var a=this.getFieldIndex(s);a>=0&&(n[a]=t[s])}r=new mo(this,n)}return r&&(this._internalCalculateValues(r._values,r.rowId),r._iconIndex=e,r._hasChildren=i),r},i.prototype.createTemp=function(){return new mo(this,null,!0)},i.prototype.clearRows=function(){this._checkClientState()&&(this._clearRows(),this.clearCommandStack(),this._eventLock<=0&&(this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated()))},i.prototype.$_removeRows=function(e,i,o){if(this.softDeleting&&this.checkStates){for(var r=[],n=e.length-1;n>=0;n--){var s=e[n],a=ro.findSave(s.rowId,o),l=!1;switch(s.rowState){case t.RowState.CREATED:this.deleteCreated||(l=s._changeRowState(t.RowState.CREATE_AND_DELETED,!1,!1),a&&(a.changeState=t.RowState.CREATE_AND_DELETED,a.run="state"),e.splice(n,1));break;case t.RowState.DELETED:case t.RowState.CREATE_AND_DELETED:e.splice(n,1),a&&(a.run="state");break;default:l=s._changeRowState(t.RowState.DELETED,!0,!1),e.splice(n,1),a&&(a.run="state",a.changeState=t.RowState.DELETED)}if(l&&r.push(s),i&&s.count>0)for(var h=s.count;h--;)s._removeChild(s.children[h],!1,i,a&&a.children)}r.length>0&&this._fireRowStatesChanged(r)}return this.deleteRows(e),!0},i.prototype.removeRows=function(t,e){for(var i=[],o=t.length;o--;){var r=this.rowById(t[o]);r&&i.push(r)}function n(t,e){for(var o=e;o>=0;o--)if(i[o].isAncestorOf(t))return!1;return!0}if(this._checkClientState()&&i&&!(i.length<1)){i.sort((function(t,e){return t.level-e.level}));for(o=i.length;o--;)i[o].level>1&&!n(i[o],o-1)&&i.splice(o,1);return!(i.length<1||!this._rowsRemoving(i))&&(this.undoable?void this._commands.execute(new lo(this,i,e)):this.$_removeRows(i,e,null))}},i.prototype.$_changeRowIndex=function(t,e){if(0==e)return!1;if(!this._checkClientState())return!1;var i=t.parent,o=i.children.length,r=t.index,n=Math.min(Math.max(r+e,0),o-1);return 0!=(e=n-r)&&(!!this._fireRowSiblingMoving(t,e)&&(i._moveChild(r,n),this._fireRowSiblingMoved(t,e),!0))},i.prototype.changeRowIndex=function(t,e){return this.undoable?this._commands.execute(new po(this,t,e)):this.$_changeRowIndex(t,e)},i.prototype.$_changeRowsIndex=function(t,e){if(0==e)return!1;if(!this._checkClientState())return!1;var i=t[0].parent,o=i.children.length,r=t[0].index,n=Math.min(Math.max(r+e,0),o-1);if(0==(e=n-r))return!1;for(var s=[],a=0,l=t;a<l.length;a++){var h=l[a];s.push(h.index)}return!!this._fireRowsSiblingMoving(t,e)&&(i._moveChildren(s,n),this._fireRowsSiblingMoved(t,e),!0)},i.prototype.changeRowsIndex=function(t,e){return this.undoable?this._commands.execute(new _o(this,t,e)):this.$_changeRowsIndex(t,e)},i.prototype.$_changeRowParent=function(t,e,i){if(t===e)throw new Error("Parent must not be self.");if(t.isAncestorOf(e))throw new Error("Can`t move to child of a descendant.");var o=t.parent;if(o===e&&i==t.index)return!1;if(!this._checkClientState())return!1;e._children||(e._children=[]);var r=e._children.length;return i=Math.min(Math.max(i,0),r),!!this._fireRowParentChanging(t,e,i)&&(t._changeParent(e,i),e instanceof oo||this.setHasChildren(e,!0),o instanceof oo||0!=o.count||this.setHasChildren(o,!1),this._fireRowParentChanged(t,e,i),!0)},i.prototype.changeRowParent=function(t,e,i){return this.undoable?this._commands.execute(new fo(this,t,e,i)):this.$_changeRowParent(t,e,i)},i.prototype.moveRows=function(t,e){return this.changeRowsIndex(t,e.index-t[0].index)},i.prototype.toTreeString=function(){return this._rootRow.toTreeString()},i.prototype.beginUpdate=function(){this._checkClientState(),this._eventLock++},i.prototype.endUpdate=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this._checkClientState(),this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&(t&&(this._resetLock>0?this._fireReset(e):this._fireRefresh(),this._countDirty&&this._fireRowCountChanged()),this._resetLock=0,this._countDirty=!1)},i.prototype.$_extractTreeRowIds=function(t){if(t){for(var e=t.length,i=new Array(e),o=0;o<e;o++)i[o]=t[o].rowId;return i}return null},i.prototype.$_searchDataRow=function(e,i,o,r,n,s){var a=e.length;if(a<1)return-1;var l=Math.min(i.length,o.length);if(l<1)return-1;for(var h=r.allFields,u=r.caseSensitive,c=r.partialMatch,d=null,p=[],f=r.compareCallback||Rt.compareTextValue,_=r.reverse,g=0;g<l;g++)p[g]=this.getField(i[g]).dataType;n=Math.max(0,n),s=Math.min(a-1,s);for(var y=n;_?y>=s:y<=s;_?y--:y++){var m=!0;if(m)for(g=0;g<l;g++){var b=this.rowById(e[y]).getValue(i[g]),v=this.getOrgFieldName(i[g]);switch(p[g]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(o[g]instanceof Date)m=f.call(this.$_handler,o[g],b,u,c,e[y],v);else{if(!d){var w=/[.]/.test(o[g])?"yyyy.MM.dd":/[/]/.test(o[g])?"yyyy/MM/dd":/[-]/.test(o[g])?"yyyy-MM-dd":"yyyyMMdd";d=new Ge(w)}m=f.call(this.$_handler,o[g],b?d.getText(b):b,u,c,e[y],v)}break;default:m=f.call(this.$_handler,o[g],b,u,c,e[y],v)}if(m&&!h)return e[y];if(!m&&h)break}if(m)return e[y]}return-1},i.prototype.searchDataRow=function(t,e){var i;if(void 0===e&&(e=null),null!=e){var o=this.rowById(e);if(!o)return-1;i=this.$_extractTreeRowIds(o.descendants)}else i=this.$_extractTreeRowIds(this._rootRow.descendants);if(!Array.isArray(i)||i.length<=0)return-1;t instanceof ai||(t.reverse&&!t.hasOwnProperty("startIndex")&&(t.startIndex=i.length-1),t=new ai(t));var r=t.reverse,n=i.length,s=Math.max(0,i.indexOf(t.startIndex)),a=t.fields,l=t.values,h=-1;if(a&&a.length>0&&l&&l.length>0){for(var u=a.length,c=[],d=0;d<u;d++){var p=a[d];if(Rt.isNumber(p))c.push(p);else{var f=this.getFieldIndex(a[d]);f>=0&&c.push(f)}}c.length>0&&(h=(r?s>0:s<n)?this.$_searchDataRow(i,c,l,t,s,r?0:n-1):-1)<0&&t.wrap&&(r?s<n-1:s>0)&&(h=this.$_searchDataRow(i,c,l,t,r?n-1:0,r?s+1:s-1))}return h},i.prototype.$_searchData=function(e,i,o,r,n,s,a){var l=this.rowCount;if(l<1)return null;for(var h=r&&r.caseSensitive,u=r&&r.partialMatch,c=this.fieldCount,d=i.length,p=null,f=[],_=r.reverse,g=r.compareCallback||Rt.compareTextValue,y=0;y<c;y++)f[y]=this.getField(y).dataType;n=Math.max(0,n),s=Math.min(l-1,s),a=Math.max(0,a),r.reverse?a<0&&(n--,a=i.length-1):a>=i.length&&(n++,a=0);for(var m=n;_?m>=s:m<=s;_?m--:m++)for(y=_?m<n?d-1:a:m>n?0:a;_?y>=0:y<d;_?y--:y++){var b=!1,v=i[y],w=this.getOrgFieldName(i[y]);if(v>=0&&v<c){var C=this.rowById(e[m]).getValue(v);switch(f[v]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(o instanceof Date)b=g.call(this.$_handler,o,C,h,u,e[m],w);else{if(!p){var x=/[.]/.test(o)?"yyyy.MM.dd":/[/]/.test(o)?"yyyy/MM/dd":/[-]/.test(o)?"yyyy-MM-dd":"yyyyMMdd";p=new Ge(x)}b=g.call(this.$_handler,o,C?p.getText(C):C,h,u,e[m],w)}break;default:b=g.call(this.$_handler,o,C,h,u,e[m],w)}if(b)return{dataRow:e[m],fieldIndex:v,searchFieldIndex:y,fieldName:w}}}return null},i.prototype.searchData=function(t,e){var i,o=this;if(void 0===e&&(e=-1),e>=0){var r=this.rowById(e);if(!r)return null;i=this.$_extractTreeRowIds(r.descendants)}else i=this.$_extractTreeRowIds(this._rootRow.descendants);if(!Array.isArray(i)||i.length<=0)return null;var n=i.length,s=null,a=Rt.makeArray(t.fields)||this.getOrgFieldNames();a&&a.length||(a=this.getOrgFieldNames());var l=[];a.forEach((function(t){return l.push(o.getFieldIndex(t))})),t instanceof li||(t.reverse&&(t.hasOwnProperty("startIndex")||(t.startIndex=n-1),t.hasOwnProperty("startFieldIndex")||(t.startFieldIndex=l.length-1)),t=new li(t));var h=t.reverse,u=l.length,c=t.value,d=i.indexOf(t.startIndex)<0?h?n-1:0:i.indexOf(t.startIndex),p=h?0:n-1,f=Math.max(0,Math.min(u-1,t.startFieldIndex)),_=h?d>=0&&f>0:d<n&&f<u,g=h?d<n-1||f<u-1:d>0||f>0;return null!=c&&l.length>0&&!(s=_?this.$_searchData(i,l,c,t,d,p,f):null)&&t.wrap&&g&&(s=this.$_searchData(i,l,c,t,h?n-1:0,d-1,h?f:0)),s},i.prototype.$_hideDataRows=function(t,e){if(null!=t){for(var i=Rt.isArray(t)?t:[t],o=this._hiddenRows.length,r=[],n=0,s=i.length;n<s;n++){var a=i[n];if(null!=this._findRowById(a))if(r.push(a),e)this._hiddenRows.indexOf(a)<0&&this._hiddenRows.push(a);else{var l=this._hiddenRows.indexOf(a);l>=0&&this._hiddenRows.splice(l,1)}}this._hiddenRows.length!==o&&this._fireRowsHiddenChanged(r,e)}},i.prototype.hideRows=function(t){this.$_hideDataRows(t,!0)},i.prototype.showRows=function(t){this.$_hideDataRows(t,!1)},i.prototype.clearHiddenRows=function(){if(this._hiddenRows.length>0){var t=this._hiddenRows.concat();this._hiddenRows=[],this._fireRowsHiddenChanged(t,!1)}},i.prototype.getHiddenRows=function(){var t=this._hiddenRows.concat();return t.sort((function(t,e){return t-e})),t},i.prototype.isHiddenRow=function(t){return!!this.rowById(t)&&this._hiddenRows.indexOf(t)>=0},Object.defineProperty(i.prototype,"hiddenCount",{get:function(){return this._hiddenRows.length},enumerable:!1,configurable:!0}),i.prototype.summarize=function(t,e){if(null==t)return!1;t.clear();var i=this.rowCount;if(i<1)return!1;if(t.count=i,t.sum=0,t.min=null,t.max=null,t.dataCount=0,this.$_summarizeChildren(this._rootRow,t),t.avg=t.sum/t.count,t.dataAvg=0===t.dataCount?NaN:t.sum/t.dataCount,e){var o=this.$_summarizeVars(this._rootRow,t);t.varsp=o/t.count,t.vars=o/(t.count-1)}return!0},i.prototype.summarizeRange=function(e,i,o){if(null==e||null==i)return!1;e.clear();var r=i.length;if(r<1)return!1;for(var n=0,s=e.field,a=this.getField(s).dataType===t.ValueType.NUMBER,l=null,h=null,u=null,c=0;c<r;){null==(_=i[c++].getValue(s))||a&&(!a||isNaN(_))||(a&&(l=n?l+_:_),(a||""!=_)&&n++,(null==h||_<h)&&(h=_),(null==u||_>u)&&(u=_))}if(e.count=r,n>0&&(l=null!=l?l:a?NaN:null,h=null!=h?h:a?NaN:null,u=null!=u?u:a?NaN:null,e.sum=l,e.min=h,e.max=u,e.avg=l/r,e.dataCount=n,e.dataAvg=0===e.dataCount?NaN:e.sum/e.dataCount,o))if(r>1){for(var d=0,p=e.avg,f=0;f<r;f++){var _=i[f].getValue(s);isNaN(_)||(d+=Math.pow(_-p,2))}e.varsp=d/r,e.vars=d/(r-1)}else e.varsp=0,e.vars=0;return!0},Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._rootRow.descendantCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return this._commands&&this._commands.canUndo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return this._commands&&this._commands.canRedo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return this._commands&&this._commands.undoing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return this._commands&&this._commands.redoing},enumerable:!1,configurable:!0}),i.prototype.getRow=function(t){return this.rowById(t).values},i.prototype.deleteRows=function(t){if(this._checkClientState()&&t&&t.length>0){var e=this._softDeleting;this.beginUpdate();try{this._softDeleting=!1,this._tagLock=!0;try{for(var i=t.length-1;i>=0;i--){var o=t[i],r=o&&o.parent;r&&r._removeChild(o,!0,!1,null)}}finally{this._tagLock=!1}}finally{this._softDeleting=e,this.endUpdate(!1)}this._rowsRemoved(t)}},i.prototype.equalValues=function(t,e,i){if(e!==i){var o=this._fields[t],r=e.getValue(t),n=i.getValue(t);return o.equalValues(r,n)}return!0},i.prototype.sameValues=function(t,e,i,o){if(e!==i){var r=this._fields[t],n=e.getValue(t),s=i.getValue(t);return o?String(n).toLowerCase()==String(s).toLowerCase():r.sameValues(n,s)}return!0},i.prototype.equalTexts=function(t,e,i){return this.sameValues(t,e,i,!0)},i.prototype.compareValues=function(t,e,i,o,r){if(e!==i){var n=e.getValue(t),s=i.getValue(t);return-1===o&&(n=""==n?null:n,s=""==s?null:s),null==n?null==s?0:-1*o:null==s?1*o:(n=r?String(n).toLowerCase():n)>(s=r?String(s).toLowerCase():s)?1:n<s?-1:0}return 0},i.prototype.compareTexts=function(t,e,i,o){return this.compareValues(t,e,i,o,!0)},i.prototype.compareNumbers=function(t,e,i,o){if(e!==i){var r=e.getValue(t),n=i.getValue(t);return isNaN(r)?isNaN(n)?0:-1*o:isNaN(n)?1*o:r>n?1:r<n?-1:0}return 0},i.prototype.compareBools=function(t,e,i,o){if(e!==i){var r=e.getValue(t),n=i.getValue(t);return r&&!n?1:!r&&n?-1:0}return 0},i.prototype.compareObjects=function(t,e,i,o){var r=e.values,n=i.values;if(r===n)return 0;var s=r?r[t]:null,a=n?n[t]:null;return s?a?this.getField(t).$_compareObject(s,a,e.rowId,i.rowId):1*o:a?-1*o:0},i.prototype.getDistinctValues=function(e,i,o){if(void 0===i&&(i=-1),void 0===o&&(o=t.SortDirection.ASCENDING),this._checkFieldIndex(e),i<0&&(i=this.getDescendantCount(this._rootRow)),i>0){for(var r=this.getDescendants(this._rootRow,0),n=this.getField(e).dataType,s=[],a=void 0,l=0,h=r.length;l<h;l++)switch(a=r[l].values[e],n){case t.ValueType.NUMBER:null!=a&&isNaN(a)||s.push(a);break;case t.ValueType.DATE:case t.ValueType.DATETIME:s.push(a?a.getTime():a);break;case t.ValueType.OBJECT:default:s.push(a)}return s=ti.getUniqueValues(s,n),o!==t.SortDirection.NONE&&(s=Rt.included(n,t.ValueType.DATETIME,t.ValueType.DATE)?s.sort((function(t,e){return t-e})):s.sort(),o===t.SortDirection.DESCENDING&&(s=s.reverse())),s.slice(0,i)}return null},i.prototype._doFieldsReset=function(){this._fireReset(!0)},i.prototype.refreshClients=function(){this._fireRefreshClient()},i.prototype.savePoint=function(t){if(void 0===t&&(t=!0),this._checkClientState()){if(this.fieldCount>0&&this._rootRow.count>0){var e=this._rootRow.copy(),i=this._nextPoint++;return t||e.clearRowStates(!1,!1),this._points.push({id:i,nextRowId:this._nextRowId,data:e}),i}return-1}},i.prototype.rollback=function(t){if(void 0===t&&(t=0),this._checkClientState())for(var e=this._points.length-1;e>=0;e--){var i=this._points[e];if(i.id==t){this.$_removeSavePoints(e+1),this._rowMap=[],this._rootRow.set(i.data),this._nextRowId=i.nextRowId,this.$_prepareMap(),this._fireRefresh();break}}},i.prototype.$_removeSavePoints=function(t){for(var e=this._points,i=e.length-1;i>=t;i--){e[i].data=null,e.pop()}},i.prototype.clearSavePoints=function(){this.$_removeSavePoints(0)},i.prototype.getSavePoints=function(){for(var t=[],e=0,i=this._points.length;e<i;e++)t.push(this._points[e].id);return t},i.prototype._doCheckStatesChanged=function(){this.$_resetOrgValues()},i.prototype._doRestoreModeChanged=function(){this.$_resetOrgValues()},i.prototype._hasChildrenChanged=function(t){this._fireHasChildrenChanged(t)},i.prototype._iconIndexChanged=function(t){this._fireIconIndexChanged(t)},i.prototype._stateChanged=function(t,e){this._fireRowStateChanged(t,e)},i.prototype._statesChanged=function(t){this._fireRowStatesChanged(t)},i.prototype._valueChanged=function(t,e){this._fireValueChanged(t,e)},i.prototype._rowAdding=function(t,e,i){return this._fireRowAdding(t,e,i)},i.prototype._rowAdded=function(t){this._tagLock||this._tags.addRow(t),this._eventLock<=0&&(this._fireRowAdded(t),this._fireRowCountChanged())},i.prototype._rowsAdding=function(t,e,i){return this._fireRowsAdding(t,e,i)},i.prototype._rowsAdded=function(t,e){this._tagLock||this._tags.addRows(e),this._eventLock<=0&&(this._fireRowsAdded(t,e),this._fireRowCountChanged())},i.prototype._rowRemoving=function(t){return this._fireRowRemoving(t)},i.prototype._rowRemoved=function(t){this._tagLock||this._tags.removeRow(t),this._eventLock<=0&&(this._fireRowRemoved(t),this._fireRowCountChanged()),this.$_removeMap(t)},i.prototype._rowsRemoving=function(t){return this._fireRowsRemoving(t)},i.prototype._rowsRemoved=function(t){this._tagLock||this._tags.removeRows(t),this._eventLock<=0&&(this._fireRowsRemoved(t),this._fireRowCountChanged()),this.$_removeMap(t)},i.prototype._rowCleared=function(t){if(t){var e=t.children;this._tags.removeRows(e),this._eventLock<=0&&(this._fireRowsRemoved(e),this._fireRowCountChanged())}},i.prototype._rowUpdating=function(t,e,i){return this._fireRowUpdating(t,e,i)},i.prototype._rowUpdated=function(t){this._tags.updateRow(t),this._eventLock<=0&&this._fireRowUpdated(t)},i.prototype._rowsUpdating=function(t){return this._fireRowsUpdating(t)},i.prototype._rowsUpdated=function(t){this._tags.updateRows(t),this._eventLock<=0&&this._fireRowsUpdated(t)},i.prototype.$_internalInsertField=function(t,i){return t=e.prototype.$_internalInsertField.call(this,t,i),function t(e,i){if(e.children&&e.children.length>0)for(var o=0,r=e.children;o<r.length;o++){t(r[o],i)}e._values&&e._values.splice(i,0,void 0),e._orgValues&&e._orgValues.splice(i,0,void 0)}(this._rootRow,t),t},i.prototype.$_internalRemoveField=function(t){return function t(e,i){if(e.children&&e.children.length>0)for(var o=0,r=e.children;o<r.length;o++){t(r[o],i)}e._values&&e._values.splice(i,1),e._orgValues&&e._orgValues.splice(i,1)}(this._rootRow,t.index),e.prototype.$_internalRemoveField.call(this,t)},i.prototype.getRowId=function(t){return t},i.prototype.getValue=function(t,e){var i=this.rowById(t);if(i)return i.getValue(e)},i.prototype.setValue=function(t,e,i){var o=this.rowById(t);if(o)return o.setValue(e,i,!1)},i.prototype.getRowObject=function(t){var e=this.rowById(t),i=this.fieldCount,o={},r=e._values;if(r)for(var n=0;n<i;n++){o[this.getOrgFieldName(n)]=r[n]}return o},i.prototype.getRowState=function(e){var i=this.rowById(e);return i?i.rowState:t.RowState.NONE},i.prototype.getPrevRowState=function(t){var e=this.rowById(t);return e&&e.prevRowState},i.prototype.setRowState=function(t,e,i){var o=this.rowById(t);if(o&&(this.checkStates||i)){var r=o.rowState;if(e!=r){if(this._undoable)return this._commands.execute(new uo(this,o,e));o._changeRowState(e,!0,!!kt(r)||void 0)}}},i.prototype.changeRowStates=function(t,e){for(var i=t.length,o=[],r=0;r<i;r++){var n=t[r];n._changeRowState(e,!1,!1)&&o.push(n)}o.length>0&&this._fireRowStatesChanged(o)},i.prototype.$_clearRowStates=function(t,e){this._checkClientState()&&this._rootRow.clearRowStates(t,e)},i.prototype.clearRowStates=function(t,e){this._undoable?this._commands.execute(new go(this,t,e)):this.$_clearRowStates(t,e)},i.prototype.$_collectStateRows=function(t,e,i){for(var o=0,r=t.count;o<r;o++){var n=t.getChild(o);n.rowState==e&&i.push(n.rowId),this.$_collectStateRows(n,e,i)}},i.prototype.getStateRows=function(t){var e=[];return this.$_collectStateRows(this._rootRow,t,e),e},i.prototype.$_collectAllStateRows=function(e,i){for(var o=0,r=e.count;o<r;o++){var n=e.getChild(o);switch(n.rowState){case t.RowState.CREATED:case t.RowState.UPDATED:case t.RowState.DELETED:case t.RowState.CREATE_AND_DELETED:i[n.rowState].push(n.rowId)}this.$_collectAllStateRows(n,i)}},i.prototype.getAllStateRows=function(){var e={};return e[t.RowState.CREATED]=[],e[t.RowState.UPDATED]=[],e[t.RowState.DELETED]=[],e[t.RowState.CREATE_AND_DELETED]=[],this.$_collectAllStateRows(this._rootRow,e),e},i.prototype.$_setRowStates=function(t,e,i,o){var r=[];if(this.checkStates||i)for(var n=0,s=t.length;n<s;n++){var a=this.rowById(t[n]);a&&a._changeRowState(e,o,!1)&&r.push(a)}!o&&r.length>0&&this._fireRowStatesChanged(r)},i.prototype.setRowStates=function(t,e,i,o){this._checkClientState()&&(this.undoable?this._commands.execute(new co(this,t,e,i,o)):this.$_setRowStates(t,e,i,o))},i.prototype.$_getRowStateCount=function(t,e){for(var i=0,o=0,r=t.count;o<r;o++){var n=t.getChild(o);e.indexOf(n.rowState)>=0&&i++,i+=this.$_getRowStateCount(n,e)}return i},i.prototype.getRowStateCount=function(t){return this.$_getRowStateCount(this._rootRow,t)},i.prototype.restoreUpdatedStates=function(t){this.restoreUpdatedRows(t)},i.prototype.restoreUpdatedRows=function(t){this.undoable?this._commands.execute(new yo(this,t)):this.$_restoreUpdatedRows(t,null,!1)},i.prototype.revert=function(e){e=Rt.makeArray(e,!0);for(var i=0;i<e.length;i++){var o=e[i],r=this.getRowState(o),n=this.getPrevRowState(o);r==t.RowState.DELETED?this.setRowState(o,n||t.RowState.NONE,!1):r==t.RowState.CREATE_AND_DELETED&&this.setRowState(o,t.RowState.CREATED,!1)}},i.prototype.$_restoreUpdatedRows=function(t,e,i){if(this._checkClientState()){var o=[];if(null==t)this._rootRow.$_restoreRow(!0,o,e);else for(var r=t.length;r--;){var n=this.rowById(t[r]);n&&n.$_restoreRow(!1,o,e)}e&&(e.rows=o.map((function(t){return t.rowId}))),1==o.length?this._fireRowStateChanged(o[0],!1):o.length>1&&this._fireRowStatesChanged(o)}},i.prototype.$_undoRestoreRow=function(t,e){var i=this.rowById(t);if(e){for(var o=0,r=Math.min(i.values.length,e.values.length);o<r;o++)i._values[o]=e.values[o];i._state=e.state}},i.prototype._reCalculateFields=function(t){var e=this;this.getDescendants(this._rootRow,-1).forEach((function(i){e._internalCalculateValues(i._values,i.rowId,t)}))},i.prototype.getUpdatedCells=function(e){var i=this.restoreMode;if(i!=t.RestoreMode.AUTO&&i!=t.RestoreMode.EXPLICIT)return null;if(null==e)e=this.getStateRows(t.RowState.UPDATED);else if(!Array.isArray(e)){if("number"!=typeof e)return null;e=[e]}if(!Array.isArray(e))return null;for(var o=[],r=0,n=e.length;r<n;r++){var s=this.rowById(e[r]);if(s){var a=s.$_getUpdatedCells();a&&a.length>0&&o.push({__rowId:s.rowId,updatedCells:a})}}return o},i.prototype.canUpdateRow=function(t){return!0},i.prototype.canInsertRow=function(t){return!0},i.prototype.canDeleteRow=function(t){return!0},i.prototype.isDataChanged=function(e,i){if(e<0)return!1;var o=this.rowById(e);!o&&Rt.isDebugging();var r=o._orgValues;if(o.rowState!==t.RowState.UPDATED||!r)return!1;if(r){var n=r[i],s=o._values[i],a=this._fields[i];return a&&!a.sameValues(n,s)}return!1},i.prototype.$_createFrom=function(t,e){var i=t.getObject();e&&(i=this._convertValues(i,e));for(var o=this.objectToRow(i),r=new mo(this,o),n=0;n<t.count;n++){var s=this.$_createFrom(t.getChild(n),e);r.addChild(s,!1)}return r},i.prototype.$_insertRowsFrom=function(t,e,i,o){for(var r=[],n=0,s=t.rowsByIds(i,!1);n<s.length;n++){var a=s[n];r.push(this.$_createFrom(a,e))}var l=o>=0?this.rowById(o):null,h=l?l.parent:this.rootRow;if(o>=0){var u=h.indexOf(l);h.insertChildren(u,r,!1)}else h.insertChildren(h.count,r,!1)},i.prototype.$_insertChildNode=function(t,e,i,o,r,n){var s=Rt.getNumber(i[r],-1),a=i[o],l=this.createRow(i,s,a&&a.length>0);if(e>=0?t._insertChild(e,l,!1,n):t._addChild(l,!1,n),a)for(var h=0;h<a.length;h++)this.$_insertChildNode(l,-1,a[h],o,r,n);return l?l.rowId:-1},i.prototype.insertChildNode=function(t,e,i,o,r,n){return this.undoable?this._commands.execute(new ho(this,t,e,i,o,r,n)):this.$_insertChildNode(t,e,i,o,r,n)},i.prototype.insertRowsFrom=function(t,e,i,o){this.$_insertRowsFrom(t,e,i,o)},i.prototype.appendRowsFrom=function(t,e,i){this.$_insertRowsFrom(t,e,i,-1)},i.prototype.fillValue=function(t,e){Object.keys(t).length&&(this.undoable?this._commands.execute(new no(this,t,e)):this.$_fillValue(t,e))},i.prototype.updateRows=function(t,e,i){if(t&&0!=t.length){for(var o=[],r=0;r<t.length;r++){var n=this.rowById(t[r]);n?o.push(n):e.splice(r,1)}this.undoable?this._commands.execute(new so(this,o,e,i)):this.$_updateRows(o,e,i)}},i.prototype._findRowById=function(t){return this._rootRow.findById(t)},i.prototype._checkSum=function(t){if(t!=this.rowCount)throw new Error("Invalid row count: "+t+" <> "+this.rowCount)},i.prototype._clearRows=function(){this._rootRow._removeChildren(),this._rowMap=[],this._rootRow&&this._rootRow.descendantCount>0||(this._nextRowId=1),this._tags.clearRows(),this._checkSum(0)},i.prototype.$_prepareMap=function(){var t=this;!function e(i){var o=i.children;o&&o.forEach((function(i){t._rowMap[i.rowId]=i,e(i)}))}(this._rootRow)},i.prototype.$_removeMap=function(t){var e=this;(t=Rt.makeArray(t,!0)).forEach((function(t){e._rowMap[t.rowId]=void 0,e.$_removeMap(t.children),t.dispose()}))},i.prototype.$_fillValue=function(e,i){if(this._checkClientState()){var o=Object.keys(e);if(o&&o.length){this.refreshFieldFormats();var r=[],n=[];for(var s in e){var a=this.rowById(+s);n.push(a),a.rowState==t.RowState.NONE&&r.push(a);for(var l=a.values,h=e[s],u=0;u<h.length;u++)l[h[u]]=i;a.$_internalUpdate(l,!1,!1)}r.length>0&&this._fireRowStatesChanged(r),this._tags.updateRows(n),this._fireRowsUpdated(n)}}},i.prototype.$_updateRows=function(e,i,o){if(this._checkClientState()&&e&&i){var r=Math.min(e.length,i.length);if(!(r<1)){this.refreshFieldFormats();for(var n=[],s=0;s<r;s++){var a=e[s];a.rowState==t.RowState.NONE&&n.push(a),a.$_internalUpdate(i[s],o,!1)}n.length>0&&this._fireRowStatesChanged(n),this._tags.updateRows(e),this._fireRowsUpdated(e)}}},i.prototype.findRow=function(t,e){return t&&t.length>0&&e&&e.length>=t.length?this._rootRow.findChild(t,e):null},i.prototype.$_resetOrgValues=function(){this._needOrgValues=this.checkStates&&this.restoreMode!=t.RestoreMode.NONE,this._needRestore=this._needOrgValues&&this.restoreMode==t.RestoreMode.AUTO,this._rootRow._clearOrgValues()},i.prototype.$_summarizeChildren=function(e,i){for(var o=i.field,r=e.count,n=this.getField(i.field).dataType===t.ValueType.NUMBER,s=0;s<r;s++){var a=e.getChild(s),l=a.getValue(o);null==l||n&&(!n||isNaN(l))||(n&&(i.sum=i.dataCount?i.sum+l:l),(n||""!=l)&&i.dataCount++,(null==i.min||l<i.min)&&(i.min=l),(null==i.max||l>i.max)&&(i.max=l)),this.$_summarizeChildren(a,i)}},i.prototype.$_summarizeVars=function(t,e){for(var i=e.field,o=e.avg,r=t.count,n=0,s=0;s<r;s++){var a=t.getChild(s),l=a.getValue(i);isNaN(l)||(n+=Math.pow(l-o,2)),n+=this.$_summarizeVars(a,e)}return n},i.prototype._fireDisposed=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderDisposed")},i.prototype._fireReset=function(t){this._eventLock<=0?this.fireEvent("onTreeDataProviderReset",t):this._resetLock++},i.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRefresh")},i.prototype._fireRefreshClient=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRefreshClient")},i.prototype._firePrepareRemain=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderPrepareRemain")},i.prototype._fireCleared=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderCleared")},i.prototype._fireRowCountChanged=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowCountChanged",this.rowCount)},i.prototype._fireRowAdding=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowAdding",t,e,i)},i.prototype._fireRowAdded=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowAdded",t)},i.prototype._fireRowsAdding=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsAdding",t,e,i)},i.prototype._fireRowsAdded=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsAdded",t,e)},i.prototype._fireRowRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowRemoving",t)},i.prototype._fireRowRemoved=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowRemoved",t)},i.prototype._fireRowsRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsRemoving",t)},i.prototype._fireRowsRemoved=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsRemoved",t)},i.prototype._fireRowUpdating=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowUpdating",t,e,i)},i.prototype._fireRowUpdated=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowUpdated",t)},i.prototype._fireRowsUpdating=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsUpdating",t)},i.prototype._fireRowsUpdated=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsUpdated",t)},i.prototype._fireValueChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderValueChanging",t,e,i)},i.prototype._fireValueChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderValueChanged",t,e)},i.prototype._fireIconIndexChanged=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderIconIndexChanged",t)},i.prototype._fireHasChildrenChanged=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderHasChildrenChanged",t)},i.prototype._fireRowStateChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowStateChanged",t,e)},i.prototype._fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowStatesChanged",t)},i.prototype._fireRowSiblingMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowSiblingMoving",t,e)},i.prototype._fireRowSiblingMoved=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowSiblingMoved",t,e)},i.prototype._fireRowsSiblingMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsSiblingMoving",t,e)},i.prototype._fireRowsSiblingMoved=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsSiblingMoved",t,e)},i.prototype._fireRowParentChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowParentChanging",t,e,i)},i.prototype._fireRowParentChanged=function(t,e,i){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowParentChanged",t,e,i)},i.prototype._fireRowsParentChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsParentChanging",t,e,i)},i.prototype._fireRowsParentChanged=function(t,e,i){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsParentChanged",t,e,i)},i.prototype._fireRowsHiddenChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsHideChanged",t,e)},i.prototype.fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderDataLoadComplated")},i.prototype.undo=function(){this.canUndo&&this._commands.undo()},i.prototype.redo=function(){this.canRedo&&this._commands.redo(!0)},i.prototype.clearCommandStack=function(){this._commands&&this._commands.flush()},i}(ro),vo=function(e){function i(t){var i=e.call(this)||this;return i._ds=t,i}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype.load=function(t,e,i){var o=new Gi(i);if(this.$_checkEmpty(e,o))return 0;switch(this.$_prepareLoad(o),t=t&&t.toLowerCase()){case"json":return this.$_loadJson(e,o);case"xml":return this.$_loadXml(e,o);case"csv":return this.$_loadCsv(e,o)}return 0},i.prototype.$_loadJson=function(e,i){if("string"==typeof e&&(e=JSON.parse(e)),e){var o=i.childrenField,r=i.iconField;if(i.fillMode==t.DataFillMode.APPEND){var n=this._ds.rowById(i.parentId);return this._ds.appendJsonRows(n,e,i.rows,o,r)}return this._ds.setJsonRows(e,i.rows,o,r)}return 0},i.prototype.$_loadXml=function(e,i){if("string"==typeof e&&(e=Ni.parseXml(e)),e&&e.documentElement){var o=i.childrenField,r=i.iconField;if(i.fillMode==t.DataFillMode.APPEND){var n=this._ds.rowById(i.parentId);return this._ds.appendXmlRows(n,e,i.rows,o,r)}return this._ds.setXmlRows(e,i.rows,o,r)}return 0},i.prototype.$_loadCsv=function(e,i){var o=i.start,r=i.count,n=i.quoted,s=i.delimiter,a=Si.csvToArray(this._ds,e,o,r,n,s);if(a&&(r=a.length)>0){var l=i.treeField,h=i.childrenField,u=i.iconField,c=i.needSorting;if(i.fillMode==t.DataFillMode.APPEND){var d=this._ds.rowById(i.parentId);this._ds.appendDataRows(d,a,l,c,h,u)}else this._ds.setRows(a,l,c,h,u);return a.length}return 0},i.prototype.$_fillEmpty=function(e){e.fillMode===t.DataFillMode.SET&&this._ds.setRows(null,null,!1,null,null)},i.prototype.$_checkEmpty=function(t,e){return!t&&(this.$_fillEmpty(e),!0)},i.prototype.$_prepareLoad=function(t){},i}(Lt);t.ExportType=void 0,(Bi=t.ExportType||(t.ExportType={})).EXCEL="excel",Bi.CSV="csv",t.ExportTarget=void 0,(ji=t.ExportTarget||(t.ExportTarget={})).LOCAL="local",ji.REMOTE="remote",ji.STREAM="stream",t.ExportCompression=void 0,(Hi=t.ExportCompression||(t.ExportCompression={})).DEFLATE="DEFLATE",Hi.STORE="STORE";var wo,Co=function(t){function e(e){var i=t.call(this,e)||this;return i.datetimeCallback=null,i.numberCallback=null,i.booleanCallback=null,i.objectCallback=null,i.textCallback=null,i.start=0,i.count=-1,i.replaceCrText=null,i.replaceLfText=null,i.seperator=null,i.assignFrom(e),i.extend(e),i}return o(e,t),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t)},enumerable:!1,configurable:!0}),e}(function(e){function i(i){var o=e.call(this)||this;return o._type=t.ExportType.EXCEL,o._target=t.ExportTarget.LOCAL,o.url=void 0,o.done=null,o.showProgress=!1,o.prepareProgress=10,o.progressCallback=null,o.params=null,o.compression=t.ExportCompression.DEFLATE,o.streamFiles=!0,o.compressionLevel=6,o.coreProperties=void 0,o.assignFrom(i),o.extend(i),o}return o(i,e),Object.defineProperty(i.prototype,"type",{get:function(){return this._type},set:function(e){e&&Rt.valueIn(e,t.ExportType)&&(this._type=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"target",{get:function(){return this._target},set:function(e){e&&Rt.valueIn(e,t.ExportTarget)&&(this._target=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"zip",{get:function(){return this._zip},set:function(t){this._zip=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"progressMessage",{get:function(){return this._progressMessage||Ue.messages.exportProgressMessage},set:function(t){this._progressMessage=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fileName",{get:function(){if(this._fileName){if(this._fileName.indexOf(".")<0){var e=this.type===t.ExportType.CSV?".csv":".xlsx";return this._fileName+e}return this._fileName}return this.type===t.ExportType.CSV?"realgrid.csv":"realgrid.xlsx"},set:function(t){t!=this._fileName&&(this._fileName=t?t.trim():null)},enumerable:!1,configurable:!0}),i}(Lt)),xo=function(){function t(){}return t.prototype.dispose=function(){return null},t.prototype.saveLocal=function(t,e,i){var o=Et(i),r=e instanceof Blob?e:new Blob([e],{type:"text/csv charset=UTF-8"});if(o.navigator.msSaveOrOpenBlob)o.navigator.msSaveOrOpenBlob(r,t);else if(o.navigator.msSaveOrOpenBlob)o.navigator.msSaveOrOpenBlob(r,t);else{var n=i.createElement("a");i.body.appendChild(n);var s=window.URL.createObjectURL(r);n.href=s,n.download=t,n.click(),setTimeout((function(){i.body.removeChild(n)}),100)}},t.prototype.saveServer=function(t,e,i,o,r){var n='<form name="tempForm" action="'+i+'" method="post">';if(n+='<input type="hidden" name="fileName" value = "'+t+'"/>',n+='<input type="hidden" name="data" value = "'+e+'"/>',n+='<input id="submitBtn" type="submit"/>',r)for(var s in r)n+='<input type="hidden" name="'+s+'" value = "'+r[s]+'"/>';n+="</form>";var a=o.createElement("div");a.innerHTML=n,o.body.appendChild(a),o.getElementById("submitBtn").click(),setTimeout((function(){o.body.removeChild(a)}),100)},t}(),Io=function(e){function i(t){var i=e.call(this,t)||this;return i.exportFields=null,i.hideFields=null,i.includeFieldNames=!1,i.extend(t),i}return o(i,e),Object.defineProperty(i.prototype,"type",{get:function(){return t.ExportType.CSV},enumerable:!1,configurable:!0}),i}(Co),So=function(e){function i(){return e.call(this)||this}return o(i,e),i.prototype.dispose=function(){return e.prototype.dispose.call(this),null},i.prototype.export=function(t,e){this._dataSource=t,this._exportOptions=e instanceof Io?e:new Io(e),this._exportFields=this.$_prepareFields(t,e.exportFields,e.hideFields),this._rows=[],t instanceof bo?this.$_buildTreeBook((function(){this.save()})):t instanceof Fi&&this.$_buildBook((function(){this.save()}))},i.prototype.$_prepareFields=function(t,e,i){var o=t.getFields();return e?e.map((function(e){return t.fieldByName(e)})).filter((function(t){return t})):i?o.filter((function(t){return i.indexOf(t.orgFieldName)<0})):o},i.prototype.addQuatation=function(e,i){return Rt.addQuatation(e,i===t.ValueType.TEXT,this._exportOptions.replaceLfText,this._exportOptions.replaceCrText)},i.prototype.$_buildFieldName=function(){return this._exportFields.map((function(t){return t.orgFieldName})).join(this._exportOptions.seperator||",")},i.prototype.$_buildBook=function(e){var i=this._exportOptions,o=this._dataSource.rowCount,r=Math.max(0,i.start),n=-1==i.count?o:Math.min(Math.max(i.count,0),o),s=Math.min(o,r+n);i.includeFieldNames&&this._rows.push(this.$_buildFieldName());for(var a=r;a<s;a++)this._rows.push(this.$_buildItem(a));if(i.target===t.ExportTarget.STREAM){var l=this._rows.join("\n");i.done&&"function"==typeof i.done&&i.done(l)}else i.done&&"function"==typeof i.done&&i.done(),e.call(this)},i.prototype.$_buildTreeBook=function(e){for(var i=this._exportOptions,o=this._dataSource.getDescendants(null,0),r=0;r<o.length;r++)this._rows.push(this.$_buildItem(o[r]));if(i.target===t.ExportTarget.STREAM){var n=this._rows.join("\n");i.done&&"function"==typeof i.done&&i.done(n)}else i.done&&"function"==typeof i.done&&i.done(),e.call(this)},i.prototype.$_buildItem=function(e){var i,o,r,n=this._dataSource,s=this._exportFields;n instanceof bo?(o=e?e.values:[],r=e.rowId):(o=n.getRow(e),r=e);for(var a,l,h=[],u=s.length,c=this._exportOptions,d=c.seperator,p=0;p<u;p++){if(l=void 0,i=s[p])switch(a=o[i.index],i.dataType){case t.ValueType.NUMBER:l=isNaN(a)||null==a?"":c.numberCallback?null!=(l=c.numberCallback(r,i.orgFieldName,a,n.$_handler))?String(l):l:c.numberFormat?qe.getFormatter(c.numberFormat).getText(a):String(a);break;case t.ValueType.BOOLEAN:null!=a&&(c.booleanCallback?a=null!=(a=c.booleanCallback(r,i.orgFieldName,a,n.$_handler))?String(a):a:c.booleanFormat&&(a=We.getFormatter(c.booleanFormat).formatValue(a)),l=String(a));break;case t.ValueType.DATE:case t.ValueType.DATETIME:a&&(l=c.datetimeCallback?(a=c.datetimeCallback(r,i.orgFieldName,a,n.$_handler))instanceof Date?Ge.Default.getText(a):a:c.datetimeFormat?Ge.getFormatter(c.datetimeFormat).getText(a):Ge.Default.getText(a));break;case t.ValueType.OBJECT:a&&(l="object"==typeof(a=c.objectCallback?c.objectCallback(r,i.orgFieldName,a,n.$_handler):a)?JSON.stringify(a):String(a));break;default:l=null!=(a=c.textCallback?c.textCallback(r,i.orgFieldName,a,n.$_handler):a)?String(a):""}h[h.length]=this.addQuatation(l,i&&i.dataType)}return h.join(d||",")},i.prototype.save=function(){var e=this._exportOptions,i=e.fileName,o="\ufeff"+this._rows.join("\n");e.target==t.ExportTarget.LOCAL?this.saveLocal(i,o,document):this.saveServer(i,Pt.encode(o),e.url,document,e.params)},i}(xo),Eo=function(){function t(){}return t.getFieldIndex=function(t,e){return"string"==typeof e?t.getFieldIndex(e):e},t.fillData=function(t,e,i,o){var r=new Wi(t);try{r.load(e,i,o)}finally{r.dispose()}},t.fillTreeData=function(t,e,i,o){var r=new vo(t);try{r.load(e,i,o)}finally{r.dispose()}},t.extractTreeRows=function(t){if(t){for(var e=t.length,i=new Array(e),o=0;o<e;o++)i[o]=t[o].rowId;return i}return null},t}(),Oo=function(){},Ro=function(){function e(t){this._dp=this._createProvider(t),this._listener=this._createListener(this._dp)}return e.prototype.dispose=function(){return this._dp.dispose(),this._dp=null},Object.defineProperty(e.prototype,"subTypeEnabled",{get:function(){return this._dp.subTypeEnabled},set:function(t){this._dp.subTypeEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"undoable",{get:function(){return this._dp.undoable},set:function(t){this._dp.undoable=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"insertable",{get:function(){return this._dp.insertable},set:function(t){this._dp.insertable=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updatable",{get:function(){return this._dp.updatable},set:function(t){this._dp.updatable=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deletable",{get:function(){return this._dp.deletable},set:function(t){this._dp.deletable=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"softDeleting",{get:function(){return this._dp.softDeleting},set:function(t){this._dp.softDeleting=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deleteCreated",{get:function(){return this._dp.deleteCreated},set:function(t){this._dp.deleteCreated=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checkStates",{get:function(){return this._dp.checkStates},set:function(t){this._dp.checkStates=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"restoreMode",{get:function(){return this._dp.restoreMode},set:function(t){this._dp.restoreMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strictRestore",{get:function(){return this._dp.strictRestore},set:function(t){this._dp.strictRestore=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._dp.booleanFormat},set:function(t){this._dp.booleanFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._dp.datetimeFormat},set:function(t){this._dp.datetimeFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseYear",{get:function(){return this._dp.baseYear},set:function(t){this._dp.baseYear=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"amText",{get:function(){return this._dp.amText},set:function(t){this._dp.amText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pmText",{get:function(){return this._dp.pmText},set:function(t){this._dp.pmText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"commitBeforeDataEdit",{get:function(){return!1},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valuesCallback",{get:function(){return this._dp.valuesCallback},set:function(t){this._dp.valuesCallback=t},enumerable:!1,configurable:!0}),e.prototype.getOptions=function(){var t=this._dp;return{subTypeEnabled:t.subTypeEnabled,undoable:t.undoable,insertable:t.insertable,updatable:t.updatable,deletable:t.deletable,softDeleting:t.softDeleting,deleteCreated:t.deleteCreated,checkStates:t.checkStates,restoreMode:t.restoreMode.toString(),strictRestore:t.strictRestore,booleanFormat:t.booleanFormat,datetimeFormat:t.datetimeFormat,baseYear:t.baseYear,amText:t.amText,pmText:t.pmText}},e.prototype.setOptions=function(t){this._dp.assignFrom(t)},e.prototype.beginUpdate=function(){this._dp.beginUpdate()},e.prototype.endUpdate=function(t){void 0===t&&(t=!0),this._dp.endUpdate(t)},e.prototype.getFields=function(){return this._dp.getFields()},e.prototype.setFields=function(t){Rt.isArray(t)&&this._dp.setFields(t)},e.prototype.addField=function(t,e,i){return this._dp.addField(t,e,i)},e.prototype.removeField=function(t,e){void 0===e&&(e=!0),this._dp.removeField(t,e)},e.prototype.getFieldCount=function(){return this._dp.fieldCount},e.prototype.fieldByName=function(t){return this._dp.fieldByName(t)},e.prototype.getFieldNames=function(){return this._dp.getFieldNames()},e.prototype.getOrgFieldNames=function(){return this._dp.getOrgFieldNames()},e.prototype.getFieldName=function(t){return this._dp.getFieldName(t)},e.prototype.getOrgFieldName=function(t){return this._dp.getOrgFieldName(t)},e.prototype.getFieldIndex=function(t){return this._dp.getFieldIndex(t)},e.prototype.hasData=function(t){return this._dp.hasData(t)},e.prototype.getValues=function(t){return this._dp.getRow(t)},e.prototype.checkRowStates=function(t){this._dp.checkStates=t},e.prototype.getRowState=function(t){return this._dp.getRowState(t)},e.prototype.getStateRows=function(e){return void 0===e&&(e=t.RowState.NONE),this._dp.getStateRows(e)},e.prototype.getAllStateRows=function(){return this._dp.getAllStateRows()},e.prototype.clearRowStates=function(t,e){void 0===e&&(e=!1),this._dp.clearRowStates(t,e)},e.prototype.setRowState=function(e,i,o){void 0===i&&(i=t.RowState.NONE),void 0===o&&(o=!1),this._dp.setRowState(e,i,o)},e.prototype.setRowStates=function(e,i,o,r){void 0===i&&(i=t.RowState.NONE),void 0===o&&(o=!1),void 0===r&&(r=!1),this._dp.setRowStates(e,i,o,r)},e.prototype.getRowStateCount=function(e){if(!e)return 0;var i=[];if("*"==e||"all"==e)i.push(t.RowState.CREATED,t.RowState.UPDATED,t.RowState.DELETED,t.RowState.CREATE_AND_DELETED);else for(var o=Array.isArray(e)?e:[e],r=0,n=o.length;r<n;r++)i.push(o[r]);return i.length>0?this._dp.getRowStateCount(i):void 0},e.prototype.restoreUpdatedStates=function(t){return this._dp.restoreUpdatedStates(t)},e.prototype.revertDeletedStates=function(t){return this._dp.revert(t)},e.prototype.restoreUpdatedRows=function(t){return this._dp.restoreUpdatedRows(Rt.makeArray(t))},e.prototype.getUpdatedCells=function(t){return this._dp.getUpdatedCells(t)},e.prototype.getDistinctValues=function(e,i,o){void 0===i&&(i=-1),void 0===o&&(o=t.SortDirection.ASCENDING);var r=o||t.SortDirection.ASCENDING,n="string"==typeof e?this._dp.getFieldIndex(e):e;return this._dp.getDistinctValues(n,i,r)},e.prototype.savePoint=function(t){return void 0===t&&(t=!0),this._dp.savePoint(t)},e.prototype.rollback=function(t){void 0===t&&(t=0),this._dp.rollback(t)},e.prototype.clearSavePoints=function(){this._dp.clearSavePoints()},e.prototype.getSavePoints=function(){return this._dp.getSavePoints()},e.prototype.setDataComparer=function(t,e){var i="string"==typeof t?this._dp.getFieldIndex(t):t;this._dp.setDataComparer(i,e)},e.prototype.exportToCsv=function(t){(new So).export(this._dp,t)},e.prototype.destroy=function(){return this.dispose()},e.prototype.undo=function(){this._dp.undo()},e.prototype.redo=function(){this._dp.redo()},e.prototype.clearCommandStack=function(){this._dp.clearCommandStack()},e.prototype.getDataRowId=function(t){return this._dp.getRowId(t)},e.prototype.getProvider=function(){return this._dp},e}(),Po=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.onRowCountChanged=null,t.onRowUpdating=null,t.onRowUpdated=null,t.onRowsUpdated=null,t.onRowListUpdated=null,t.onRowInserting=null,t.onRowInserted=null,t.onRowsInserted=null,t.onRowDeleting=null,t.onRowDeleted=null,t.onRowsDeleted=null,t.onRowMoving=null,t.onRowMoved=null,t.onRowsMoving=null,t.onRowsMoved=null,t.onRowListMoving=null,t.onRowListMoved=null,t.onValueChanged=null,t.onDataChanged=null,t.onRowStateChanged=null,t.onRowStatesChanged=null,t.onRowStatesCleared=null,t.onRestoreRows=null,t}return o(i,e),Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._dp.rowCount},set:function(t){this._dp.setRowCount(t)},enumerable:!1,configurable:!0}),i.prototype.getRowCount=function(){return this._dp.rowCount},i.prototype.setRowCount=function(e,i,o,r){return void 0===i&&(i=!1),void 0===o&&(o=null),void 0===r&&(r=t.RowState.NONE),this._dp.setRowCount(e,i,o,r)},i.prototype.setFilterMode=function(t){void 0===t&&(t="and"),this._dp.setFilterMode(t)},i.prototype.setFilters=function(t,e){void 0===e&&(e="and"),this._dp.setFilters(t,e)},i.prototype.fillJsonData=function(t,e){var i=e instanceof Gi?e:new Gi(e);Eo.fillData(this._dp,"json",t,i)},i.prototype.fillXmlData=function(t,e){var i=e instanceof Gi?e:new Gi(e);Eo.fillData(this._dp,"xml",t,i)},i.prototype.fillCsvData=function(t,e){var i=e instanceof Gi?e:new Gi(e);Eo.fillData(this._dp,"csv",t,i)},i.prototype.setRows=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._dp.setRows(t,e,i)},i.prototype.addRows=function(t,e,i,o){void 0===e&&(e=0),void 0===i&&(i=-1),void 0===o&&(o=!1),this._dp.appendRows(t,e,i,o)},i.prototype.insertRows=function(t,e,i,o,r){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===r&&(r=!1),this._dp.insertRows(t,e,i,o,r)},i.prototype.updateRows=function(t,e,i,o,r,n){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===r&&(r=!1),void 0===n&&(n=!1),this._dp.updateRows(t,e,i,o,r,n)},i.prototype.updateRowsByDataRow=function(t,e,i){this._dp.updateRows2(t,e,i)},i.prototype.clearRows=function(){this._dp.clearRows()},i.prototype.updateRow=function(t,e,i){void 0===i&&(i=!1),this._dp.updateRow(t,e,i)},i.prototype.hideRows=function(t){this._dp.hideRows(t)},i.prototype.showHiddenRows=function(t){this._dp.showRows(t)},i.prototype.getHiddenRows=function(){return this._dp.getHiddenRows()},i.prototype.isHiddenRow=function(t){return this._dp.isHiddenRow(t)},i.prototype.resetHiddenRows=function(){this._dp.clearHiddenRows()},i.prototype.addRow=function(t){return this._dp.appendRow(t)},i.prototype.insertRow=function(t,e){return this._dp.insertRow(t,e)},i.prototype.removeRow=function(t){this._dp.removeRow(t)},i.prototype.removeRows=function(t,e){void 0===e&&(e=!1),this._dp.removeRows(t,e)},i.prototype.moveRow=function(t,e){this._dp.moveRow(t,e)},i.prototype.moveRows=function(t,e,i){this._dp.moveRows(t,e,i)},i.prototype.getValue=function(t,e){var i=Eo.getFieldIndex(this._dp,e);return this._dp.getValue(t,i)},i.prototype.setValue=function(t,e,i){var o=Eo.getFieldIndex(this._dp,e);this._dp.setValue(t,o,i)},i.prototype.getRows=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=-1),this._dp.getRows(t,e)},i.prototype.getJsonRow=function(t,e){return this._dp.getRowObject(t,e)},i.prototype.getJsonRows=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=-1),void 0===i&&(i=!1),this._dp.getRowObjects(t,e,i)},i.prototype.getOutputRow=function(t,e){return this._dp.getOutputObject(t,e)},i.prototype.getOutputRows=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=-1),this._dp.getOutputObjects(t,e,i)},i.prototype.getFieldValues=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1);var o=Eo.getFieldIndex(this._dp,t);return this._dp.getFieldValues(o,e,i)},i.prototype.searchDataRow=function(t){return t?this._dp.searchDataRow(t):-1},i.prototype.searchData=function(t){return t?this._dp.searchData(t):null},i.prototype._createProvider=function(t){return new Fi(t,this)},i.prototype._createListener=function(t){return new To(this,t)},i}(Ro),ko=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this,e)||this;return i.onRowCountChanged=null,i.onRowAdding=null,i.onRowAdded=null,i.onRowsAdded=null,i.onRowDeleting=null,i.onRowDeleted=null,i.onRowsDeleted=null,i.onRowUpdating=null,i.onRowUpdated=null,i.onRowsUpdating=null,i.onRowsUpdated=null,i.onValueChanged=null,i.onDataChanged=null,i.onRowStateChanged=null,i.onRowStatesChanged=null,i.onRowSiblingMoving=null,i.onRowSiblingMoved=null,i.onRowsSiblingMoving=null,i.onRowsSiblingMoved=null,i.onRowParentChanging=null,i.onRowParentChanged=null,i}return o(e,t),e.prototype.getRowCount=function(){return this._dp.rowCount},e.prototype.setRows=function(t,e,i,o,r){void 0===i&&(i=!1),this._dp.setRows(t,e,i,o,r)},e.prototype.setCsvRows=function(t,e,i,o,r){this._dp.setCsvRows(t,e,i,o,r)},e.prototype.setXmlRows=function(t,e,i,o){this._dp.setXmlRows(t,e,i,o)},e.prototype.setObjectRows=function(t,e,i,o){this._dp.setJsonRows(t,e,i,o)},e.prototype.setNestedRows=function(t,e,i,o,r){this._dp.setJsonRows2(t,e,i,o,r)},e.prototype.fillJsonData=function(t,e){var i=new Gi(e);try{Eo.fillTreeData(this._dp,"json",t,i)}finally{i.dispose(),i=null}},e.prototype.fillXmlData=function(t,e){var i=new Gi(e);try{Eo.fillTreeData(this._dp,"xml",t,i)}finally{i.dispose(),i=null}},e.prototype.fillCsvData=function(t,e){var i=new Gi(e);try{Eo.fillTreeData(this._dp,"csv",t,i)}finally{i.dispose(),i=null}},e.prototype.getIconIndex=function(t){return this._dp.rowById(t).iconIndex},e.prototype.setIconIndex=function(t,e){this._dp.rowById(t).iconIndex=e},e.prototype.getParent=function(t){var e=this._dp.rowById(t);return e&&e.parent?e.parent.rowId:-1},e.prototype.getLevel=function(t){return this._dp.rowById(t).level},e.prototype.getChildCount=function(t){var e=this._dp;if(null==t||-1==t)return e.getChildCount(null);var i=e.rowById(t);return i&&i.children?i.children.length:0},e.prototype.getChildren=function(t){var e,i=this._dp;null==t||-1==t?e=i.getRows(null):e=i.rowById(t).children;return Eo.extractTreeRows(e)},e.prototype.getDescendantCount=function(t){var e=this._dp;return null==t||-1==t?e.getDescendantCount(null):e.rowById(t).descendantCount},e.prototype.getDescendants=function(t,e){void 0===e&&(e=-1);var i=null,o=this._dp;null!=t&&-1!=t&&(i=o.rowById(t));var r=o.getDescendants(i,e);return Eo.extractTreeRows(r)},e.prototype.getAncestors=function(t){var e=this._dp.rowById(t);return e&&e.ancestors?Eo.extractTreeRows(e.ancestors):null},e.prototype.getJsonRow=function(t,e,i,o,r,n){void 0===o&&(o="rows"),void 0===r&&(r="iconIndex"),void 0===n&&(n=-1);var s=this._dp,a=null==t||t<0?s.rootRow:s.rowById(t);if(a){var l=a.getObject()||{};return e&&(l.__rowState=a.rowState),i&&0!==n&&(l[o]=a.getChildObjects(i,o,r,!1,e,n-1)),l}return null},e.prototype.getJsonRows=function(t,e,i,o,r){void 0===e&&(e=!1),void 0===i&&(i="rows"),void 0===o&&(o="iconIndex");var n=this._dp,s=null==t||t<=-1?n.rootRow:n.rowById(t);return s?s.getChildObjects(e,i,o,!0,r):null},e.prototype.getOutputRow=function(t,e,i){void 0===i&&(i="iconIndex");var o,r=new Ke(t);try{var n=this._dp,s=null==e||e<0?n.rootRow:n.rowById(e);o=s?s.getOutput(r,i):null}finally{r.dispose()}return o},e.prototype.getOutputRows=function(t,e,i,o,r){void 0===i&&(i=!1),void 0===o&&(o="rows"),void 0===r&&(r="iconIndex");var n,s=new Ke(t);try{var a=this._dp,l=null==e||e<=-1?a.rootRow:a.rowById(e);n=l?l.getChildOutputObjects(s,i,o,r):null}finally{s.dispose()}return n},e.prototype.addChildRow=function(t,e,i,o){void 0===i&&(i=-1),void 0===o&&(o=!1);var r=this._dp,n=r.rowById(t)||r.rootRow,s=r.createRow(e,i,o);return n.addChild(s,!1)?s.rowId:-1},e.prototype.insertChildRow=function(t,e,i,o,r){void 0===o&&(o=-1),void 0===r&&(r=!1);var n=this._dp,s=n.rowById(t)||n.rootRow,a=n.createRow(i,o,r);return s.insertChild(e,a,!1)?a.rowId:-1},e.prototype.insertChildNode=function(t,e,i,o,r,n){void 0===o&&(o="rows"),void 0===r&&(r="iconField"),void 0===n&&(n=!1);var s=this._dp,a=null==t||t<0?s.rootRow:s.rowById(t);if(a)return s.insertChildNode(a,e,i,o,r,n)},e.prototype.updateRow=function(t,e,i){var o=this._dp.rowById(t);return!!o&&o.update(e,i)},e.prototype.updateRows=function(t,e,i){this._dp.updateRows(t,e,i)},e.prototype.removeRow=function(t,e){var i=this._dp.rowById(t);return!(!i||!i.parent)&&i.parent.removeChild(i,e)},e.prototype.removeRows=function(t,e){return!!(t&&t.length>0)&&this._dp.removeRows(t,e)},e.prototype.clearRows=function(){this._dp.clearRows()},e.prototype.hideRows=function(t){this._dp.hideRows(t)},e.prototype.showHiddenRows=function(t){this._dp.showRows(t)},e.prototype.getHiddenRows=function(){return this._dp.getHiddenRows()},e.prototype.isHiddenRow=function(t){return this._dp.isHiddenRow(t)},e.prototype.resetHiddenRows=function(){this._dp.clearHiddenRows()},e.prototype.getValue=function(t,e){var i=this._dp,o=i.rowById(t),r=Eo.getFieldIndex(i,e);return o?o.getValue(r):null},e.prototype.setValue=function(t,e,i){var o=this._dp,r=o.rowById(t),n=Eo.getFieldIndex(o,e);r&&r.setValue(n,i,!1)},e.prototype.moveRowSibling=function(t,e){var i=this._dp,o=i.rowById(t);return!!o&&i.changeRowIndex(o,e)},e.prototype.changeRowParent=function(t,e,i){var o=this._dp,r=o.rowById(t),n=e<0?o.rootRow:o.rowById(e);return!(!r||!n)&&o.changeRowParent(r,n,i)},e.prototype.searchDataRow=function(t){return t?this._dp.searchDataRow(t,t.parentId):-1},e.prototype.searchData=function(t){return t?this._dp.searchData(t,t.parentId):null},e.prototype._createProvider=function(t){return new bo(t,this)},e.prototype._createListener=function(t){return new Do(this,t)},e}(Ro),To=function(t){function e(e,i){var o=t.call(this)||this;return o._del=e,o._provider=i,o._provider.addListener(o),o}return o(e,t),e.prototype.dispose=function(){return this._del=null,this._provider.removeListener(this),this._provider=null},e.prototype.onDataProviderRowCountChanged=function(t){this._del.onRowCountChanged?this._del.onRowCountChanged(this._del,t.rowCount):Rt.log("onRowCountChanged: "+t.rowCount)},e.prototype.onDataProviderRowUpdating=function(t,e,i,o){return this._del.onRowUpdating?this._del.onRowUpdating(this._del,e,o,i):(Rt.log("onRowUpdating: "+e),!0)},e.prototype.onDataProviderRowUpdated=function(t,e){this._del.onRowUpdated?this._del.onRowUpdated(this._del,e):Rt.log("onRowUpdated: "+e)},e.prototype.onDataProviderRowsUpdated=function(t,e,i){this._del.onRowsUpdated?this._del.onRowsUpdated(this._del,e,i):Rt.log("onRowsUpdated: "+e+", "+i)},e.prototype.onDataProviderRowListUpdated=function(t,e){this._del.onRowListUpdated?this._del.onRowListUpdated(this._del,e):Rt.log("onRowListUpdated: "+e)},e.prototype.onDataProviderRowInserting=function(t,e,i){return this._del.onRowInserting?this._del.onRowInserting(this._del,e,i):(Rt.log("onRowInserting: "+e),!0)},e.prototype.onDataProviderRowInserted=function(t,e){this._del.onRowInserted?this._del.onRowInserted(this._del,e):Rt.log("onRowInserted: "+e)},e.prototype.onDataProviderRowsInserted=function(t,e,i){this._del.onRowsInserted?this._del.onRowsInserted(this._del,e,i):Rt.log("onRowsInserted: "+e+", "+i)},e.prototype.onDataProviderRowRemoving=function(t,e){return this._del.onRowDeleting?this._del.onRowDeleting(this._del,e):(Rt.log("onRowDeleting: "+e),!0)},e.prototype.onDataProviderRowRemoved=function(t,e){this._del.onRowDeleted?this._del.onRowDeleted(this._del,e):Rt.log("onRowDeleted: "+e)},e.prototype.onDataProviderRowsRemoving=function(t,e){return!0},e.prototype.onDataProviderRowsRemoved=function(t,e){this._del.onRowsDeleted?this._del.onRowsDeleted(this._del,e):Rt.log("onRowsDeleted: ",e)},e.prototype.onDataProviderRowMoving=function(t,e,i){return this._del.onRowMoving?this._del.onRowMoving(this._del,e,i):(Rt.log("onRowMoving: "+e+", "+i),!0)},e.prototype.onDataProviderRowMoved=function(t,e,i){this._del.onRowMoved?this._del.onRowMoved(this._del,e,i):Rt.log("onRowMoved: "+e+", "+i)},e.prototype.onDataProviderRowsMoving=function(t,e,i,o){return this._del.onRowsMoving?this._del.onRowsMoving(this._del,e,i,o):(Rt.log("onRowsMoving: "+e+", "+i+", "+o),!0)},e.prototype.onDataProviderRowsMoved=function(t,e,i,o){this._del.onRowsMoved?this._del.onRowsMoved(this._del,e,i,o):Rt.log("onRowsMoved: "+e+", "+i+", "+o)},e.prototype.onDataProviderRowListMoving=function(t,e,i){return this._del.onRowListMoving?this._del.onRowListMoving(this._del,e,i):(Rt.log("onRowListMoving: ",e,", ",i),!0)},e.prototype.onDataProviderRowListMoved=function(t,e,i){this._del.onRowListMoved?this._del.onRowListMoved(this._del,e,i):Rt.log("onRowListMoved: ",e,i)},e.prototype.onDataProviderValueChanged=function(t,e,i){this._del.onValueChanged?this._del.onValueChanged(this._del,e,i):Rt.log("onValueChanged:"+e+", "+i)},e.prototype.onDataProviderDataChanged=function(t){this._del.onDataChanged?this._del.onDataChanged(this._del):Rt.log("onDataChanged")},e.prototype.onDataProviderStateChanged=function(t,e){this._del.onRowStateChanged?this._del.onRowStateChanged(this._del,e):Rt.log("onRowStateChanged: "+e)},e.prototype.onDataProviderStatesChanged=function(t,e){this._del.onRowStatesChanged?this._del.onRowStatesChanged(this._del,e):Rt.log("onRowStatesChanged",e)},e.prototype.onDataProviderStatesCleared=function(t){this._del.onRowStatesCleared?this._del.onRowStatesCleared(this._del):Rt.log("onRowStatesCleared")},e.prototype.onDataProviderRestoreRows=function(t,e){this._del.onRestoreRows?this._del.onRestoreRows(this._del,e):Rt.log("onRestoreRows",e)},e}(Oo),Do=function(t){function e(e,i){var o=t.call(this)||this;return o._del=e,o._provider=i,o._provider.addListener(o),o}return o(e,t),e.prototype.dispose=function(){return this._del=null,this._provider.removeListener(this),this._provider=null},e.prototype.onTreeDataProviderRowCountChanged=function(t){this._del.onRowCountChanged?this._del.onRowCountChanged(this._del,t.rowCount):Rt.log("onRowCountChanged: "+t.rowCount)},e.prototype.onTreeDataProviderRowAdding=function(t,e,i,o){return this._del.onRowAdding?this._del.onRowAdding(this._del,e.rowId,i,o._values):(Rt.log("onRowAdding: "+e.rowId+", "+i,o._values),!0)},e.prototype.onTreeDataProviderRowAdded=function(t,e){this._del.onRowAdded?this._del.onRowAdded(this._del,e.rowId):Rt.log("onRowAdded: "+e.rowId)},e.prototype.onTreeDataProviderRowsAdded=function(t,e,i){var o=Eo.extractTreeRows(i);this._del.onRowsAdded?this._del.onRowsAdded(this._del,e.rowId,o):Rt.log("onRowsAdded: "+e.rowId,o)},e.prototype.onTreeDataProviderRowRemoving=function(t,e){return this._del.onRowDeleting?this._del.onRowDeleting(this._del,e.rowId):(Rt.log("onRowDeleting: "+e.rowId),!0)},e.prototype.onTreeDataProviderRowRemoved=function(t,e){this._del.onRowDeleted?this._del.onRowDeleted(this._del,e.rowId):Rt.log("onRowDeleted: "+e.rowId)},e.prototype.onTreeDataProviderRowsRemoved=function(t,e){var i=Eo.extractTreeRows(e);this._del.onRowsDeleted?this._del.onRowsDeleted(this._del,i):Rt.log("onRowsDeleted: ",i)},e.prototype.onTreeDataProviderRowUpdating=function(t,e,i,o){return this._del.onRowUpdating?this._del.onRowUpdating(this._del,e.rowId,o,i):(Rt.log("onRowUpdating:"+e.rowId),!0)},e.prototype.onTreeDataProviderRowUpdated=function(t,e){this._del.onRowUpdated?this._del.onRowUpdated(this._del,e.rowId):Rt.log("onRowUpdated: "+e.rowId)},e.prototype.onTreeDataProviderRowsUpdating=function(t,e){return this._del.onRowsUpdating?this._del.onRowsUpdating(this._del,io.getRowIds(e)):(Rt.log("onRowUpdating:"+e.length),!0)},e.prototype.onTreeDataProviderRowsUpdated=function(t,e){this._del.onRowsUpdated?this._del.onRowsUpdated(this._del,io.getRowIds(e)):Rt.log("onRowsUpdated: "+e.length)},e.prototype.onTreeDataProviderValueChanged=function(t,e,i){this._del.onValueChanged?this._del.onValueChanged(this._del,e.rowId,i):Rt.log("onValueChanged: "+e.rowId+", "+i)},e.prototype.onTreeDataProviderRowStateChanged=function(t,e){this._del.onRowStateChanged?this._del.onRowStateChanged(this._del,e.rowId):Rt.log("onRowStateChanged: "+e.rowId)},e.prototype.onTreeDataProviderRowStatesChanged=function(t,e){var i=Eo.extractTreeRows(e);this._del.onRowStatesChanged?this._del.onRowStatesChanged(this._del,i):Rt.log("onRowStatesChanged: ",i)},e.prototype.onTreeDataProviderRowSiblingMoving=function(t,e,i){return this._del.onRowSiblingMoving?this._del.onRowSiblingMoving(this._del,e.rowId,i):(Rt.log("onRowSiblingMoveing: "+e.rowId+", "+i),!0)},e.prototype.onTreeDataProviderRowSiblingMoved=function(t,e,i){this._del.onRowSiblingMoved?this._del.onRowSiblingMoved(this._del,e.rowId,i):Rt.log("onSiblingMoved: "+e.rowId+", "+i)},e.prototype.onTreeDataProviderRowsSiblingMoving=function(t,e,i){return this._del.onRowsSiblingMoving?this._del.onRowsSiblingMoving(this._del,io.getRowIds(e),i):(Rt.log("onRowSiblingMoveing: ",e,i),!0)},e.prototype.onTreeDataProviderRowsSiblingMoved=function(t,e,i){this._del.onRowsSiblingMoved?this._del.onRowsSiblingMoved(this._del,io.getRowIds(e),i):Rt.log("onSiblingMoved: ",e,i)},e.prototype.onTreeDataProviderRowParentChanging=function(t,e,i,o){if(this._del.onRowParentChanging)return this._del.onRowParentChanging(this._del,e.rowId,i.rowId,o);Rt.log("onRowParentChanging: "+e.rowId+", "+i.rowId+", "+o)},e.prototype.onTreeDataProviderRowParentChanged=function(t,e,i,o){this._del.onRowParentChanged?this._del.onRowParentChanged(this._del,e.rowId,i.rowId,o):Rt.log("onRowParentChanged: "+e.rowId+", "+i.rowId+", "+o)},e}(Oo),Mo=function(){function t(t){this.field=t,this.count=0,this.sum=NaN,this.max=NaN,this.min=NaN,this.avg=NaN,this.vars=NaN,this.varsp=NaN,this.dataCount=0,this.dataAvg=NaN}return t.prototype.clear=function(){this.count=this.dataCount=0,this.sum=this.dataAvg=this.max=this.min=this.avg=this.vars=this.varsp=NaN},t}(),Fo=65536,Lo=131072,No=196608,$o=4294705152;t.ItemState=void 0,(wo=t.ItemState||(t.ItemState={})).NORMAL="normal",wo.FOCUSED="focused",wo.UPDATING="updating",wo.INSERTING="inserting",wo.APPENDING="appending",wo.DUMMY="dummy";var Ao=function(e){return e==t.ItemState.UPDATING||e==t.ItemState.INSERTING||e==t.ItemState.APPENDING},Vo=function(e){return e==t.ItemState.INSERTING||e==t.ItemState.APPENDING},Bo=function(e,i){return e==t.ItemState.INSERTING||e==t.ItemState.APPENDING||i==t.RowState.CREATED},jo=function(){function t(){}return t.prototype.clear=function(){return this.styleName=this.readOnly=this.editable=this.style=void 0,this},t.prototype.assign=function(t){"string"==typeof t?this.styleName=t:(null!=t.readOnly&&(this.readOnly=t.readOnly),null!=t.editable&&(this.editable=t.editable),null!=t.styleName&&(this.styleName=t.styleName.trim()),null!=t.style&&(this.style=t.style),null!=t.exportStyleName&&(this.exportStyleName=t.exportStyleName))},t}(),Ho=function(){function e(){this._id=e.$$_grid_item_id++,this._index=-1}return e.prototype.dispose=function(){this._parent=null},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemIndex",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentIndex",{get:function(){return this._parent?this._parent._index:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this._parent;t&&t.level>1;)t=t._parent;return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childIndex",{get:function(){return this._parent?this._parent.indexOf(this):-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._parent?this._parent.level+1:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isData",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDataRow",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._parent&&this._index>=0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayLevel",{get:function(){return this.level},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"provider",{get:function(){return this._parent&&this._parent.provider},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._parent&&this._parent.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataRow",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataId",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataRowId",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowState",{get:function(){var e=this.dataRow;if(e>=0){var i=this.dataSource;return i?i.getRowState(e):t.RowState.NONE}return t.RowState.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemState",{get:function(){return t.ItemState.NORMAL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indeterminate",{get:function(){return 0!=(2&this._getExtents())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checked",{get:function(){var t=0!=(1&this._getExtents());return this.provider.getItemChecked(this,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checkable",{get:function(){return 0==(4&this._getExtents())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"merged",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=this._getExtents();return t&No?(t&$o)>>>18:NaN},enumerable:!1,configurable:!0}),e.prototype.$_setHeight=function(t,e){var i=this._getExtents();if(t=Math.round(t),isNaN(t)){if(i&No)return this._setExtents(-196609&i),!0}else{if(t!=(i&$o)>>>18)return t=Math.max(0,Math.min(53247,t))<<18,i=e?-196609&i|Lo:-196609&i|Fo,this._setExtents(262143&i|t),!0;if(e){if(0==(i&Lo))return i=-196609&i|Lo,this._setExtents(i),!0}else if(0==(i&Fo))return i=-196609&i|Fo,this._setExtents(i),!0}},e.prototype.$_clearHeight=function(t){t?this._setExtents(-196609&this._getExtents()):this._setExtents(-65537&this._getExtents()),this.heights=null,0==this.index&&Rt.log("HEIGHT",this.height)},Object.defineProperty(e.prototype,"heights",{get:function(){return this._heights},set:function(t){this._heights=t},enumerable:!1,configurable:!0}),e.prototype.getShadowRow=function(){return this.dataRow},e.prototype.getHeight=function(t){return this._heights[t]},e.prototype.setChecked=function(t,e){var i=this.provider;i&&i.checkItem(this,t,void 0,e)},e.prototype.setCheckable=function(t){var e=this.provider;e&&e.setCheckable(this,t)},e.prototype.getAncestor=function(t){if(t<this.level){for(var e=this._parent;e.level>t;)e=e._parent;return e}return this instanceof Wo?this:null},e.prototype.getVisibleAncestor=function(){var t=this._parent;do{if(t.visible)return t;t=t._parent}while(t)},e.prototype.getAncestors=function(){var t=null,e=this._parent;if(e){t=[];do{t.push(e),e=e._parent}while(e)}return t},e.prototype.isDescendantOf=function(t){if(t){for(var e=this._parent;e&&e!=t;)e=e._parent;return e===t}return!1},e.prototype.getData=function(t){var e=this.dataSource;t=e.getFieldIndex(t);var i=this.getShadowRow();return e&&i>=0?e.getValue(i,t):void 0},e.prototype.setData=function(t,e){var i=this.dataSource;t=i.getFieldIndex(t),i&&i.setValue(this.dataRow,t,e)},e.prototype.getRowData=function(){var t=this.dataRow;if(t>=0){var e=this.dataSource;if(e)return e.getRow(t)}return null},e.prototype.getRowObject=function(){var t=this.dataRow;if(t>=0){var e=this.dataSource;if(e)return e.getRowObject(t)}return null},e.prototype.isChanged=function(t){var e=this.dataSource;return e?e.isDataChanged(this.dataRow,t):void 0},e.prototype.canEdit=function(){return!1},e.prototype._setIndex=function(t){this._index=t},e.prototype._setChecked=function(t){this.provider.setItemChecked(this,t)||(null===t?(this._setExtents(2|this._getExtents()),this._setExtents(-2&this._getExtents())):(this._setExtents(t?1|this._getExtents():-2&this._getExtents()),this._setExtents(-3&this._getExtents())))},e.prototype._setCheckable=function(t){this._setExtents(t?-5&this._getExtents():4|this._getExtents())},e.PARENT="_parent",e.$$_grid_item_id=0,e}(),Go=function(e){function i(t){var i=e.call(this)||this;return i._displayLevel=-1,i._extents=0,i._dataRow=t,i}return o(i,e),Object.defineProperty(i.prototype,"dataRowId",{get:function(){return this._dataRowId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},enumerable:!1,configurable:!0}),i.prototype.setEditable=function(t,e){this._editable=t,this._readOnly=e},i.prototype._getExtents=function(){return this._extents},i.prototype._setExtents=function(t){this._extents=t},Object.defineProperty(i.prototype,"isData",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isDataRow",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataRow",{get:function(){return this._dataRow},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataId",{get:function(){return this.dataSource.getRowId(this._dataRow)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resizable",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayLevel",{get:function(){return this._displayLevel>=0?this._displayLevel:this.level},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return t.ItemType.ROW},enumerable:!1,configurable:!0}),i.prototype.canEdit=function(){return!0},i.prototype.getShadowRow=function(){return this._dataRow},i.prototype.$_setDisplayLevel=function(t){this._displayLevel=t},i}(Ho),Wo=function(e){function i(){var t=e.call(this)||this;return t._children=[],t._expanded=!1,t._descendantCount=0,t._summaries=null,t._rows=null,t}return o(i,e),i.prototype.dispose=function(){this._children=null,e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"expanded",{get:function(){return this._expanded},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapsed",{get:function(){return!this.expanded},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._children.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"children",{get:function(){return this._children.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"allFooterCount",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return!this._rows&&this.$_collectRows(this,this._rows=[]),this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"first",{get:function(){return this._children.length>0?this._children[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"last",{get:function(){var t=this._children.length;return t>0?this._children[t-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstItem",{get:function(){if(this._children.length>0){var t=this._children[0];return t instanceof i?t.firstItem:t}return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstDataItem",{get:function(){if(this._children.length>0)for(var t=0,e=this._children.length;t<e;t++){if(this._children[t]instanceof i)return this._children[t].firstDataItem;if(this._children[t]instanceof Go)return this._children[t]}return null},enumerable:!1,configurable:!0}),i.prototype.getFirstVisibleItem=function(t){return this},i.prototype.getLastItem=function(t){var e;if(this._children.length>0){for(var o=this._children.length;o&&(e=this._children[o-1],t&&e instanceof Yo);o--);return e instanceof i?e.getLastItem(t):e}return null},Object.defineProperty(i.prototype,"lastDataItem",{get:function(){var t=this._children.length;if(t>0)for(;t>0;t--){var e=this._children[t-1];if(e instanceof i)return e.lastDataItem;if(e instanceof Go)return e}return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"descendantCount",{get:function(){return this._descendantCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandable",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapsable",{get:function(){return!0},enumerable:!1,configurable:!0}),i.prototype.getItem=function(t){if(t<0||t>=this._children.length)throw new RangeError("index is invalid: "+t);return this._children[t]},i.prototype.getRows=function(){var t=[];return this.$_collectRows(this,t),t},i.prototype.getFooterIndex=function(t){return 0},i.prototype.itemOfRow=function(t){for(var e=this._children.length;e--;)if(this._children[e].dataRow==t)return this._children[e];return null},i.prototype.indexOf=function(t){return this._children.indexOf(t)},i.prototype.isDescendant=function(t){if(t&&t!==this){for(var e=t._parent;e&&e!==this;)e=e._parent;return e===this}return!1},i.prototype.getDescendants=function(t){if((!t||this._expanded)&&this._children&&this._children.length>0){var e=[];return function e(o,r){for(var n=o.count,s=0;s<n;s++){var a=o.getItem(s);r.push(a),a instanceof i&&(!t||a.expanded)&&e(a,r)}}(this,e),e}return null},i.prototype.clear=function(){this._summaries=null,this._children.length=0,this._descendantCount=0},i.prototype.insert=function(t,e){this._addChild(e,t)},i.prototype.add=function(t){this._addChild(t,-1)},i.prototype.addAll=function(t){var e=this,i=t.map((function(t){return t[Ho.PARENT]=e,t}));this._children=this._children.concat(i)},i.prototype.remove=function(t){var e=this.indexOf(t);e>=0&&(this._children.splice(e,1),t instanceof Ho&&(t[Ho.PARENT]=null))},i.prototype.setItem=function(t,e){if(t&&e&&t!==e){var i=this._removeChild(t);this._insertChild(i,e),e._index=t.index}},i.prototype.setExpanded=function(t,e,i){(t!=this._expanded||i)&&(t?this.provider.expand(this,e,i,0):this.provider.collapse(this,e,i))},i.prototype.getNumber=function(t){var e=this.$_getSummary(t);return e instanceof Mo?e.count:e?e.length:this._descendantCount},i.prototype.getDataCount=function(t){var e=this.$_getSummary(t);if(e instanceof Mo)return e.dataCount;if(e){var i=this.dataSource,o=e.length,r=0;if(o>0){for(var n=0;n<o;n++){var s=i.getValue(e[n],t);null!=s&&""!==s&&r++}return r}}return 0},i.prototype.getDataAvg=function(t){var e=this.$_getSummary(t);if(e instanceof Mo)return e.dataAvg;if(e){for(var i=this.dataSource,o=e.length,r=0,n=0,s=0;s<o;s++){var a=i.getValue(e[s],t);isNaN(a)||(r+=a,n++)}return n>0&&!isNaN(r)?r/n:NaN}return NaN},i.prototype.getSum=function(t){var e=this.$_getSummary(t);if(e instanceof Mo)return e.sum;if(e){for(var i=this.dataSource,o=e.length,r=void 0,n=0;n<o;n++){var s=i.getValue(e[n],t);isNaN(s)||(r=(isNaN(r)?0:r)+s)}return r}return NaN},i.prototype.getMax=function(e){var i=this.$_getSummary(e),o=this.dataSource,r=o.getField(e).dataType===t.ValueType.NUMBER;if(i instanceof Mo)return i.max;if(i){for(var n=i.length,s=void 0,a=0,l=null;a<n;)null!=(s=o.getValue(i[a++],e))&&(!r||!isNaN(s))&&(l=null==l||s>l?s:l);return l}return r?NaN:null},i.prototype.getMin=function(e){var i=this.$_getSummary(e),o=this.dataSource,r=o.getField(e).dataType===t.ValueType.NUMBER;if(i instanceof Mo)return i.min;if(i){for(var n=i.length,s=void 0,a=0,l=null;a<n;)null!=(s=o.getValue(i[a++],e))&&(!r||!isNaN(s))&&(l=null==l||s<l?s:l);return l}return r?NaN:null},i.prototype.getAvg=function(t){var e=this.$_getSummary(t);if(e instanceof Mo)return e.avg;if(e){var i=this.getSum(t);if(!isNaN(i))return i/e.length}return NaN},i.prototype.getVar=function(e,i){void 0===i&&(i=0);var o=this.$_getSummary(e);if(o instanceof Mo)return 0===i?o.varsp:o.vars;if(o&&this.provider.summaryMode==t.SummaryMode.STATISTICAL){var r=this.dataSource,n=o.length;if(n>1){for(var s=0,a=0;a<n;a++)s+=r.getValue(o[a],e);var l=s/n;s=0;for(a=0;a<n;a++)s+=Math.pow(r.getValue(o[a],e)-l,2);return s/=n-i}if(1==n)return 0}return NaN},i.prototype.getStdev=function(e,i){void 0===i&&(i=0);var o=this.$_getSummary(e);if(o instanceof Mo)return 0==i?Math.sqrt(o.varsp):Math.sqrt(o.vars);if(o&&this.provider.summaryMode==t.SummaryMode.STATISTICAL){var r=this.dataSource,n=o.length;if("string"==typeof e&&(e=r.getFieldIndex(e)),n>1){for(var s=0,a=0;a<n;a++)s+=r.getValue(o[a],e);var l=s/n;s=0;for(a=0;a<n;a++)s+=Math.pow(r.getValue(o[a],e)-l,2);return s=Math.sqrt(s/(n-i))}if(1==n)return 0}return NaN},i.prototype.getStdevp=function(t){return this.getStdev(t,1)},Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype._setExpanded=function(t){this._expanded=t},i.prototype._incDescendants=function(t){void 0===t&&(t=1),this._descendantCount+=t},i.prototype._insertChild=function(t,e){this._children.splice(t,0,e),e instanceof Ho&&(e[Ho.PARENT]=this)},i.prototype._addChild=function(t,e){t&&this.indexOf(t)<0&&(e<0?this._children.push(t):this._children.splice(e,0,t),t[Ho.PARENT]=this)},i.prototype._addChildren=function(t){var e;if(t&&(e=t.length)>0)for(var i=0;i<e;i++){var o=t[i];o&&this.indexOf(o)<0&&(o[Ho.PARENT]=this,this._children.push(o))}},i.prototype._removeChild=function(t){var e=this.indexOf(t);return e>=0&&(this._children.splice(e,1),t instanceof Ho&&(t[Ho.PARENT]=null)),e},i.prototype._exchangeItems=function(t,e){if(t<0||t>=this._children.length)throw new RangeError("index1 is out of range: "+t);if(e<0||e>=this._children.length)throw new RangeError("index2 is out of range: "+e);if(t!==e){var i=this._children[t];this._children[t]=this._children[e],this._children[e]=i}},i.prototype._moveChild=function(t,e){var i=this._children.length;if(t<0||t>=i)throw new RangeError("index is out of range: "+t);var o=Math.min(Math.max(t+e,0),i-1),r=this._children[t];if(e<0)for(var n=t;n>o;n--)this._children[n]=this._children[n-1];else for(n=t;n<o;n++)this._children[n]=this._children[n+1];this._children[o]=r},i.prototype.$_collectRows=function(t,e){for(var o=t.count,r=0;r<o;r++){var n=t.getItem(r);n instanceof i?this.$_collectRows(n,e):n.isDataRow&&e.push(n.dataRow)}},i.prototype.$_getSummary=function(t){var e=this.dataSource;if(!(e instanceof si))return null;null==this._summaries&&(this._summaries={}),"string"==typeof t&&(t=e.getFieldIndex(t));var i=this._summaries?this._summaries[t]:null;return i||e.canSummarize(t)&&(i=this.$_summarize(t,e))&&(this._summaries[t]=i),i},i.prototype.$_summarize=function(e,i){var o=this.provider.summaryMode;if(o!=t.SummaryMode.NONE){if(null==this._rows&&(this._rows=[],this.$_collectRows(this,this._rows)),this._rows.length>3&&i.canSummarize(e)){var r=new Mo(e);return i.summarizeRange(r,this._rows,o==t.SummaryMode.STATISTICAL),r}return this._rows}return null},i.prototype._saveExpanded=function(){this._setExtents(this.expanded?16|this._getExtents():-17&this._getExtents())},i.prototype._restoreExpanded=function(t){if(void 0===t&&(t=!1),this._setExpanded(0!=(16&this._getExtents())),t)for(var e=this.count-1;e>=0;e--){var o=this.getItem(e);o instanceof i&&o._restoreExpanded(!0)}},i}(Ho),Uo=function(e){function i(t){var i=e.call(this)||this;return i._footers=0,i._extents=0,i._allFooters=[],i._groupField=t,i}return o(i,e),i.prototype.dispose=function(){this._allFooters=null,e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"groupField",{get:function(){return this._groupField},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupValue",{get:function(){return this._groupValue},set:function(t){this._groupValue=t},enumerable:!1,configurable:!0}),i.prototype._getExtents=function(){return this._extents},i.prototype._setExtents=function(t){this._extents=t},Object.defineProperty(i.prototype,"footer",{get:function(){return this._footer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return t.ItemType.GROUP},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerCount",{get:function(){return this._footers},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"allFooterCount",{get:function(){return this._allFooters.length},enumerable:!1,configurable:!0}),i.prototype.getHiddenFooterCount=function(){for(var t=0,e=0;e<this.children.length;e++)this.children[e].hiddenFooter&&t++;return t},i.prototype.getFooter=function(t){return t=this.indexOf(this._footer)+t,this._children[t]},i.prototype.getFooterIndex=function(t){return t.$_footerIndex},i.prototype.isFooter=function(t){if(t===this._footer)return!0;if(this._footers>1)for(var e=this._children,i=e.length-1;i>=0;i--){if(e[i]===t)return!0;if(e[i]===this._footer)break}return!1},i.prototype._addChild=function(t,i){t instanceof Yo?(this._allFooters.push(t),t[Ho.PARENT]=this,t.hiddenFooter||(e.prototype._addChild.call(this,t,i),this._footer=this._footer||t,this._footers++)):e.prototype._addChild.call(this,t,i)},i.prototype.getFirstVisibleItem=function(t){if(this.visible)return this;for(var e=0,i=this.children.length;e<i;e++){var o=this.children[e];if(t&&this.footer&&this.footer.visible)return this.footer;if(o instanceof Wo){var r=o.getFirstVisibleItem(t);if(r)return r}else if(o.visible)return o}return null},i}(Wo),Yo=function(e){function i(){var t=e.call(this)||this;return t.$_footerIndex=0,t._hiddenFooter=!1,t._extents=0,t}return o(i,e),Object.defineProperty(i.prototype,"footerIndex",{get:function(){return this.$_footerIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vindex",{get:function(){return this.$_vindex>-1?this.$_vindex:this.$_footerIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hiddenFooter",{get:function(){return this._hiddenFooter},set:function(t){this._hiddenFooter=t},enumerable:!1,configurable:!0}),i.prototype._getExtents=function(){return this._extents},i.prototype._setExtents=function(t){this._extents=t},Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isData",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayLevel",{get:function(){return this.level},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return t.ItemType.FOOTER},enumerable:!1,configurable:!0}),i}(Ho),zo=function(t){function e(e){var i=t.call(this,-1)||this;return i._provider=e,i}return o(e,t),Object.defineProperty(e.prototype,"provider",{get:function(){return this._provider},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"expanded",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLeaf",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._provider.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"expandable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"collapsable",{get:function(){return!1},enumerable:!1,configurable:!0}),e}(Uo),qo=function(e){function i(t){var i=e.call(this)||this;return i._hideDeleted=!1,i._eventLock=0,i._rowHeighted=!1,i._explicitHeighted=!1,i._indexing=t,i._rootItem=i._createRootItem(),i}return o(i,e),i.prototype._doDispose=function(){return this._rootItem.dispose(),null},Object.defineProperty(i.prototype,"hideDeleted",{get:function(){return this._hideDeleted},set:function(t){t!=this._hideDeleted&&(this._hideDeleted=t,this._hideDeletedChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return t.SummaryMode.AGGREGATE},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortMode",{get:function(){return t.SortMode.AUTO},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedCount",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxItemCount",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),i.prototype.isFiltered=function(t){return!1},i.prototype.getMovable=function(t){return!1},i.prototype.setFixed=function(t,e,i,o){},i.prototype.attachItem=function(t){t._parent=this._rootItem},i.prototype.getItemsByIndices=function(t){var e=[];if(t)for(var i=0,o=t.length;i<o;i++){var r=this.getItem(t[i]);r&&e.push(r)}return e},i.prototype.getIndexOfRow=function(t,e){var i=this.getItemOfRow(t,e);return i?i.index:-1},i.prototype.getIndicesOfRows=function(t,e){var i=[],o=t?t.length:0;if(o)for(var r=0;r<o;r++){var n=this.getItemOfRow(t[r],e);i.push(n?n.index:-1)}return i},i.prototype.getItemsByRows=function(t,e){void 0===e&&(e=!1);for(var i=[],o=t?t.length:0,r=0;r<o;r++){var n=this.getItemOfRow(t[r],e);n&&i.push(n)}return i},i.prototype.exchange=function(t,e){},i.prototype.moveItem=function(t,e){},i.prototype.setCheckable=function(t,e){t&&e!=t.checkable&&(t._setCheckable(e),this._fireCheckableChanged(t))},i.prototype.setGroupCheckable=function(t,e){},i.prototype.setSortingOptions=function(t){},i.prototype.setInditerminateItem=function(t,e){var i=t.indeterminate;t&&e!=i&&(this._setIndeterminated(t,e),this._fireRefreshClient())},i.prototype.checkItem=function(t,e,i,o){if(t){var r=t.checked,n=t.indeterminate;i?(this._clearChecked(),e&&this._setChecked(t,!0),e!=r&&o&&this._fireItemChecked(t),this._fireRefreshClient()):(e!=r||n)&&(this._setChecked(t,e),o?this._fireItemChecked(t):this._fireRefreshClient()),this._fireItemCheckChanged([t],e)}},i.prototype.checkItems=function(t,e,i){if(t&&t.length>0){for(var o=0,r=t.length;o<r;o++){var n=t[o];n instanceof Ho&&this._setChecked(n,e)}i?1===t.length?this._fireItemChecked(t[0]):this._fireItemsChecked(t,e):this._fireRefreshClient()}this._fireItemCheckChanged(t,e)},i.prototype.checkAll=function(t,e,i,o,r){var n=this.itemCount;if(i)for(var s=0;s<n;s++){var a=this.getItem(s);a.checkable&&this._setChecked(a,t)}else for(s=0;s<n;s++)this._setChecked(this.getItem(s),t);o?this._fireItemAllChecked(t):this._fireRefreshClient(),this._fireItemCheckChanged(null,t)},i.prototype._setCheckItem=function(t,e){t._setChecked(e)},i.prototype._clearDisplayLevels=function(){},i.prototype.canUpdate=function(e,i){if(e){var o=this.dataSource;if(!o)return!1;var r=e.dataRow;if(!o.canUpdateField(r,i))return!1;var n=e.itemState,s=Vo(n)||n===t.ItemState.DUMMY;return(r>=0||s)&&(s||o.canUpdateRow(r))}return!1},i.prototype.canAppend=function(){var t=this.dataSource;return t&&t.canAppendRow()},i.prototype.canInsert=function(t){if(t){var e=t.dataRow,i=this.dataSource;return i&&i.canInsertRow(e)}return!1},i.prototype.canDelete=function(t){if(t){var e=t.dataRow,i=this.dataSource;return e>=0&&i&&i.canDeleteRow(e)}return!1},i.prototype.appendDummy=function(){},i.prototype.cancelDummy=function(){},i.prototype.findItem=function(t,e,i,o,r){return-1},i.prototype.findCell=function(t,e,i,o,r,n){return null},i.prototype.getNumber=function(t){return NaN},i.prototype.getSum=function(t){return NaN},i.prototype.getMax=function(t){return NaN},i.prototype.getMin=function(t){return NaN},i.prototype.getAvg=function(t){return NaN},i.prototype.getVar=function(t){return NaN},i.prototype.getVarp=function(t){return NaN},i.prototype.getStdev=function(t){return NaN},i.prototype.getStdevp=function(t){return NaN},i.prototype.getDataCount=function(t){return NaN},i.prototype.getDataAvg=function(t){return NaN},Object.defineProperty(i.prototype,"isIndexing",{get:function(){return this._indexing},enumerable:!1,configurable:!0}),i.prototype.setRowHeight=function(t,e,i){t.$_setHeight(e,i)&&(isNaN(e)||(i?this._explicitHeighted=!0:this._rowHeighted=!0))},i.prototype.clearRowHeights=function(t){if(t||this._rowHeighted){for(var e=!1,i=this.itemCount-1;i>=0;i--){var o=this.getItem(i);isNaN(o.height)&&!o.heights||(o.$_clearHeight(t),o.heights=null,e=!0)}return this._rowHeighted=!1,t&&(this._explicitHeighted=!1),e}},i.prototype.isRowHeighted=function(t){return void 0===t&&(t=!0),this._rowHeighted||t&&this._explicitHeighted},i.prototype.setCheckFieldIndex=function(t){this._checkFieldIndex=t},i.prototype.getItemChecked=function(t,e){return this._checkFieldIndex>-1?this.dataSource.getField(this._checkFieldIndex).readBooleanValue(t.getData(this._checkFieldIndex)):e},i.prototype.setItemChecked=function(t,e){if(this._checkFieldIndex>-1){var i=this.dataSource.getField(this._checkFieldIndex),o=i.readBooleanValue(t.getData(this._checkFieldIndex));return!!o!=e&&(o=(i._boolParser||i._ownerBoolParser).toText(e),t.setData(this._checkFieldIndex,o)),!0}return!1},Object.defineProperty(i.prototype,"rootItem",{get:function(){return this._rootItem},enumerable:!1,configurable:!0}),i.prototype._createRootItem=function(){return new zo(this)},i.prototype._hideDeletedChanged=function(){},i.prototype.$_canFire=function(){return this._eventLock<=0},i.prototype._setChecked=function(t,e){t._setChecked(e)},i.prototype._setIndeterminated=function(t,e){t._setChecked(!!e&&null)},i.prototype._clearChecked=function(){for(var t=0,e=this.itemCount;t<e;t++)this._setChecked(this.getItem(t),!1)},i.prototype._resetItemIndicies=function(t){if(this._indexing)for(var e=t,i=this.itemCount;e<i;e++)this.getItem(e)._index=e},i.prototype._setExpanded=function(t,e){t._setExpanded(e)},i.prototype._resetItemIndex=function(t){var e=this.getItem(t);e&&(e._index=t)},i.prototype._incDescendents=function(t,e){t._descendantCount+=e,t.parent&&this._incDescendents(t.parent,e)},i.prototype._copyExtents=function(t,e){t instanceof Ho&&e instanceof Ho&&e._setExtents(t._getExtents())},i.prototype._fireReset=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderReset",t)},i.prototype._fireRefresh=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderRefresh",t)},i.prototype._fireRefreshClient=function(){this._eventLock<=0&&this.fireEvent("onItemProviderRefreshClient")},i.prototype._fireItemInserted=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemInserted",t)},i.prototype._fireItemDeleted=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemDeleted",t)},i.prototype._fireItemUpdated=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemUpdated",t)},i.prototype._fireCheckableChanged=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderCheckableChanged",t)},i.prototype._fireItemChecked=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemChecked",t)},i.prototype._fireItemsChecked=function(t,e){this._eventLock<=0&&this.fireEvent("onItemProviderItemsChecked",t,e)},i.prototype._fireItemAllChecked=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemAllChecked",t)},i.prototype._fireItemCheckChanged=function(t,e){this.fireEvent("onItemProviderItemCheckChanged",t,e)},i.prototype._fireRowStateChanged=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderRowStateChanged",t)},i.prototype._fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderRowStatesChanged",t)},i.prototype._fireRowStatesCleared=function(){this._eventLock<=0&&this.fireEvent("onItemProviderRowStatesCleared")},i.prototype._fireSort=function(t,e,i){this._eventLock<=0&&this.fireEvent("onItemProviderSort",t,e,i)},i.prototype._fireSorted=function(){this._eventLock<=0&&this.fireEvent("onItemProviderSorted")},i.prototype._fireFiltered=function(t,e,i){this._eventLock<=0&&this.fireEvent("onItemProviderFiltered",t,e,i)},i.prototype._fireCommandStackChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onItemProviderCommandStackChanged",t,e)},i.prototype._fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent("onItemProviderDataLoadComplated")},i.prototype._fireOuterSort=function(t,e,i){return this.fireObjectEvent("onItemProviderOuterSort",t,e,i)},i.prototype.canGrouping=function(t){return!1},i}(Re),Ko=function(t){function e(e,i){var o=t.call(this,i)||this;return o._initialize(),o.source=e,o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"source",{get:function(){return this._source},set:function(t){t!=this._source&&(this._source&&this._source.removeListener(this),this._clearItems(),this._source=t,this._source&&(this._populateItems(),this._source.addListener(this)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._source&&this._source.dataSource},set:function(t){this._source&&(this._source.dataSource=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._source?this._source.rowCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fixedCount",{get:function(){return this._source?this._source.fixedCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxItemCount",{get:function(){return this._source?this._source.maxItemCount:0},set:function(t){this._source&&(this._source.maxItemCount=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sorted",{get:function(){return this._source&&this._source.sorted},enumerable:!1,configurable:!0}),e.prototype.setFixed=function(t,e,i,o){this._source&&this._source.setFixed(t,e,i,o)},e.prototype.getIndexOfRow=function(t){return this._source?this._source.getIndexOfRow(t,!1):-1},e.prototype.getItemOfRow=function(t,e){return this._source?this._source.getItemOfRow(t,e):null},e.prototype._refreshItems=function(){this._source&&this._source._refreshItems()},e.prototype._clearDisplayLevels=function(){this._source&&this._source._clearDisplayLevels()},e.prototype._initialize=function(){},e.prototype._clearItems=function(){},e.prototype._populateItems=function(){this._resetItemIndicies(0)},e.prototype.onItemProviderReset=function(t,e){this._populateItems(),this._fireReset(e)},e.prototype.onItemProviderRefresh=function(t,e){this._populateItems(),this._fireRefresh(e)},e.prototype.onItemProviderRefreshClient=function(t){this._fireRefreshClient()},e.prototype.onItemProviderItemInserted=function(t,e){this._resetItemIndicies(0),this._fireItemInserted(e)},e.prototype.onItemProviderItemDeleted=function(t,e){this._resetItemIndicies(0),this._fireItemDeleted(e)},e.prototype.onItemProviderItemUpdated=function(t,e){this._resetItemIndicies(0),this._fireItemUpdated(e)},e.prototype.onItemProviderCheckableChanged=function(t,e){this._fireCheckableChanged(e)},e.prototype.onItemProviderItemChecked=function(t,e){this._fireItemChecked(e)},e.prototype.onItemProviderItemsChecked=function(t,e,i){this._fireItemsChecked(e,i)},e.prototype.onItemProviderItemAllChecked=function(t,e){this._fireItemAllChecked(e)},e.prototype.onItemProviderItemCheckChanged=function(t,e,i){this._fireItemCheckChanged(e,i)},e.prototype.onItemProviderRowStateChanged=function(t,e){this._fireRowStateChanged(e)},e.prototype.onItemProviderRowStatesChanged=function(t,e){this._fireRowStatesChanged(e)},e.prototype.onItemProviderRowStatesCleared=function(t){this._fireRowStatesCleared()},e.prototype.onItemProviderFiltered=function(t,e,i,o){this._fireFiltered(e,i,o)},e.prototype.onItemProviderSort=function(t,e,i){this._fireSort(e,i,null)},e.prototype.onItemProviderSorted=function(t){this._fireSorted()},e.prototype.onItemProviderOuterSort=function(t,e,i,o){return this._fireOuterSort(e,i,o)},e.prototype.onItemProviderCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},e.prototype.onItemProviderDataLoadComplated=function(t){this._fireDataLoadComplated()},e}(qo),Xo=function(e){function i(t,i){var o=e.call(this,-1)||this;return t.attachItem(o),o._setIndex(i),o}return o(i,e),Object.defineProperty(i.prototype,"resizable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemState",{get:function(){return t.ItemState.DUMMY},enumerable:!1,configurable:!0}),i.prototype.getData=function(t){},i.prototype.setData=function(t,e){},i}(Go),Zo=function(t){function e(e,i,o,r,n){var s=t.call(this,r)||this;return s._values=[],s._changeValues=[],s._started=!1,s._checkDiff=!1,s._strictDiff=!1,s._invalidFields=[],s._target=i,e.attachItem(s),s._setIndex(o),s._state=n,s.$_setDisplayLevel(i?i.displayLevel:0),s._invalidFields=[],s}return o(e,t),Object.defineProperty(e.prototype,"values",{get:function(){return this._values.concat()},set:function(t){var e=this.provider,i=this.dataSource,o=i.fieldCount;if(t instanceof Array){o=Math.min(o,t.length);for(var r=0;r<o;r++){var n=i.getField(r),s=this._values[r],a=n.readValue(t[r]);this._values[r]=a,this._started&&!n.equalValues(s,a)&&e._editItemCellUpdated(this,r,s,a)}}else if(t)for(r=0;r<o;r++){var l=i.getOrgFieldName(r);if(t.hasOwnProperty(l)){n=i.getField(r),s=this._values[r],a=n.readValue(t[l]);this._values[r]=a,this._started&&!n.equalValues(s,a)&&e._editItemCellUpdated(this,r,s,a)}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"invalidFields",{get:function(){return this._invalidFields},enumerable:!1,configurable:!0}),e.prototype.beginEdit=function(t,e){Vo(this._state)&&this.$_clearHeight(!0),this._started=!0,this._checkDiff=t,this._strictDiff=e},e.prototype.setValue=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new Je(Ue.messages.fieldIndexOutOfBounds+t);var o=i.getField(t),r=this._values[t];e=o.readValue(e),this._values[t]=e,this._started&&!o.equalValues(r,e)&&this.provider._editItemCellUpdated(this,t,r,e),this.$_clearHeight(!1)},Object.defineProperty(e.prototype,"resizable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemState",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._target?this._target.level:1},enumerable:!1,configurable:!0}),e.prototype.getData=function(t){if((t=this.dataSource.getFieldIndex(t))<0&&t>=this.dataSource.fieldCount)throw new RangeError("field index is out of bounds: "+t);return this._values[t]},e.prototype.setData=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var o=i.getField(t),r=this._values[t],n=!this._checkDiff;e=o.readValue(e),n||(n=this._strictDiff?!o.equalValues(r,e):!o.sameValues(r,e)),n&&(this._values[t]=e,this._changeValues[t]=!0,this.provider._editItemCellUpdated(this,t,r,e),this.provider._editItemCellEdited(this,t)),this.$_clearHeight(!1)},e.prototype.getRowData=function(){return this._values.concat()},e.prototype.getRowObject=function(){var t=this.dataSource;if(t){for(var e={},i=0,o=t.fieldCount;i<o;i++){e[t.getOrgFieldName(i)]=this._values[i]}return e}return null},e.prototype.isEdited=function(t){return this._changeValues[t]},e.prototype._setChecked=function(t){this.provider.setItemChecked(this,t)||this._setExtents(t?1|this._getExtents():-2&this._getExtents())},e.prototype._clearDisplayLevels=function(){},e}(Go),Jo=function(e){function i(i,o){var r=e.call(this,i,o)||this;return r._checkDiff=!1,r._checkCellDiff=!1,r._strictDiff=!1,r._undoable=!1,r._cancelWhenLastUndo=!1,r._orgItem=null,r._editingItem=null,r._dummyEditItem=null,r._editingState=t.ItemState.NORMAL,r._insertMode=0,r._modified=!1,r._commiting=!1,r._saveDs=null,r._commands=new ui(r),i&&(r._saveDs=i.dataSource)&&r._saveDs.registerClient(r),r}return o(i,e),i.prototype._doDispose=function(){this._saveDs=null,e.prototype._doDispose.call(this)},i.prototype.isDataEditing=function(){return this.isEditing()},i.prototype.cancelDataEditing=function(){this.isEditing()&&this.fireCancelRequest()},i.prototype.commitDataEditing=function(){this.isEditing()&&this.fireCommitRequest()},i.prototype.editCommandStackChanged=function(t,e,i){var o=this._saveDs;o?this._fireCommandStackChanged(e||o.canUndo,i||o.canRedo):this._fireCommandStackChanged(e,i)},Object.defineProperty(i.prototype,"isCheckDiff",{get:function(){return this._checkDiff},set:function(t){this._checkDiff=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isCheckCellDiff",{get:function(){return this._checkCellDiff},set:function(t){this._checkCellDiff=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isStrictDiff",{get:function(){return this._strictDiff},set:function(t){this._strictDiff=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editingItem",{get:function(){return this._commiting||this.isEditing()?this._editingItem:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isUpdating",{get:function(){return this._editingState==t.ItemState.UPDATING},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isInserting",{get:function(){return this._editingState==t.ItemState.INSERTING},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isAppending",{get:function(){return this._editingState==t.ItemState.APPENDING},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoable",{get:function(){return this._undoable&&this._saveDs&&this._saveDs.undoable},set:function(t){t!=this._undoable&&(this._undoable=t,this._commands.flush(),this._saveDs.undoable=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cancelWhenLastUndo",{get:function(){return this._cancelWhenLastUndo},set:function(t){this._cancelWhenLastUndo=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return this._commands.canUndo||this._saveDs&&this._saveDs.canUndo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return this._commands.canRedo||this._saveDs&&this._saveDs.canRedo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return this._commands.undoing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return this._commands.redoing},enumerable:!1,configurable:!0}),i.prototype.isEditing=function(t){return Ao(this._editingState)&&(!t||t===this._editingItem)},i.prototype.isEdited=function(t){return Ao(this._editingState)&&(!t||t===this._editingItem)&&this._modified},i.prototype.setDiffs=function(t,e,i){this._checkDiff=t,this._checkCellDiff=e,this._strictDiff=i},i.prototype.edit=function(t){if(this.isEditing())return!0;if(t)try{return this._beginUpdate(t),!0}catch(t){throw this.cancel(),t}return!1},i.prototype.editData=function(t,e,i){var o;if(t&&(o=this.dataSource)&&e>=0&&e<o.fieldCount){if(!this.isEditing())try{return this._beginUpdate(t),!0}catch(t){throw this.cancel(),t}this._editingItem.setData(e,i)}return!1},i.prototype.appendDummy=function(){if(!this.isEditing())try{this._beginAppendDummy()}catch(t){this.cancelDummy()}},i.prototype.append=function(t){if(!this.isEditing())try{return this._beginAppend(t)}catch(t){throw this.cancel(),t}return-1},i.prototype.insert=function(t,e,i,o){if(!this.isEditing())try{return this._beginInsert(t,e,i,o)}catch(t){throw this.cancel(),t}return-1},i.prototype.cancelDummy=function(){this._dummyEditItem&&this._cancelDummyEdit()},i.prototype.cancel=function(){this.isEditing()&&this._cancelEdit()},i.prototype.commit=function(e){if(this.isEditing()){this._commiting=!0;try{var i=this.dataSource;if(i){if(this._editingState==t.ItemState.UPDATING&&this.isCheckDiff){for(var o=this._editingItem.values,r=o.length,n=this.isStrictDiff,s=!1,a=0;a<r;a++)if(n){if(!i.getField(a).equalValues(this._orgItem.getData(a),o[a])){s=!0;break}}else if(!i.getField(a).sameValues(this._orgItem.getData(a),o[a])){s=!0;break}if(!s)return this._cancelEdit(),!0}return this._commitEdit(e)}}finally{this._commiting=!1}}return!0},i.prototype.execute=function(t){t&&(this.undoable?this._commands.execute(t):t.execute())},i.prototype.undo=function(){this.isEditing()?(this._commands.undo(),!this._commands.canUndo&&this._cancelWhenLastUndo&&this.cancel()):this._saveDs&&this._saveDs.undo()},i.prototype.redo=function(){this.isEditing()?this._commands.redo():this._saveDs&&this._saveDs.redo()},i.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._commands.flush(),t&&this._saveDs&&this._saveDs.clearCommandStack()},i.prototype._checkEditing=function(){if(!this.isEditing())throw new Error("itemProvider is not editing")},i.prototype._checkNotEditing=function(){if(this.isEditing())throw new Error("itemProvider is already editing")},i.prototype._beginUpdate=function(e){if(!e)throw new Error("item is null");this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginUpdate(e),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._orgItem=e,this._editingState=t.ItemState.UPDATING,this._commands.flush(),this.fireUpdateStarted(this._editingItem))},i.prototype._doBeginUpdate=function(t){return null},i.prototype._beginAppendDummy=function(){this._dummyEditItem=this._doBeginAppendDummy()},i.prototype._doBeginAppendDummy=function(){return null},i.prototype._beginAppend=function(e){return this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginAppend(e),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem?(this._editingState=t.ItemState.APPENDING,this._commands.flush(),this.fireAppendStarted(this._editingItem),this._editingItem.index):-1},i.prototype._doBeginAppend=function(t){return null},i.prototype._beginInsert=function(e,i,o,r){return void 0===o&&(o=!1),void 0===r&&(r=!1),this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginInsert(e,i,o,r),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem?(this._editingState=t.ItemState.INSERTING,this._resetItemIndicies(0),this._commands.flush(),this.fireInsertStarted(this._editingItem),this._editingItem.index):-1},i.prototype._doBeginInsert=function(t,e,i,o){return null},i.prototype._updateEditingRow=function(t){return!1},i.prototype._insertEditingRow=function(t){return!1},i.prototype._cancelDummyEdit=function(){this._dummyEditItem=null,this._doCancelDummyEdit()},i.prototype._cancelEdit=function(){this._checkEditing();var e=this._editingState;try{this._editingState=t.ItemState.NORMAL,this._doCancelEdit(e,this._orgItem)}catch(t){throw this._editingState=e,t}this._modified=!1,this._commands.flush(),this.fireCanceled()},i.prototype._doCancelDummyEdit=function(){},i.prototype._doCancelEdit=function(e,i){e==t.ItemState.INSERTING&&this._resetItemIndicies(0)},i.prototype._commitEdit=function(e){if(this._checkEditing(),!this.dataSource)throw new Error("data provier is null");try{this.fireItemCommitting(this._editingItem)}catch(t){alert(t.message)}var i=this._editingState,o=!1;if(this.isUpdating)try{this._editingState=t.ItemState.NORMAL,o=this._doCompleteUpdate(this._orgItem,e)}catch(t){throw this._editingState=i,t}else try{this._editingState=t.ItemState.NORMAL,o=this._doCompleteInsert(i==t.ItemState.APPENDING)}catch(t){throw this._editingState=i,t}return o?(this._modified=!1,this._doCommitEdit(i,this._orgItem),this._commands.flush(),this.fireCommitted(this._editingItem)):this._editingState=i,o},i.prototype._doCommitEdit=function(t,e){return!1},i.prototype._editItemCellEdited=function(t,e){t&&this.isEditing(t)&&(this._modified=!0,this.fireItemCellEdited(t,e))},i.prototype._editItemCellUpdated=function(t,e,i,o){this.isEditing(t)&&(this._modified=!0,this.fireItemCellUpdated(t,e,i,o))},i.prototype.$_editingItem=function(){return this._editingItem},i.prototype.$_dummyItem=function(){return this._dummyEditItem},i.prototype.fireUpdateStarted=function(t){this.$_canFire()&&this.fireEvent(i.UPDATE_STARTED,t)},i.prototype.fireAppendStarted=function(t){this.$_canFire()&&this.fireEvent(i.APPEND_STARTED,t)},i.prototype.fireInsertStarted=function(t){this.$_canFire()&&this.fireEvent(i.INSERT_STARTED,t)},i.prototype.fireItemCellEdited=function(t,e){this.$_canFire()&&this.fireEvent(i.CELL_EDITED,t,e)},i.prototype.fireItemCellUpdated=function(t,e,o,r){this.$_canFire()&&this.fireEvent(i.CELL_UPDATED,t,e,o,r)},i.prototype.fireItemCommitting=function(t){this.$_canFire()&&this.fireEvent(i.COMMITTING,t)},i.prototype.fireCommitted=function(t){this.$_canFire()&&this.fireEvent(i.COMMITTED,t)},i.prototype.fireCanceled=function(){this.$_canFire()&&this.fireEvent(i.CANCELED)},i.prototype.fireCommitRequest=function(){this.$_canFire()&&this.fireEvent(i.COMMIT_REQUEST)},i.prototype.fireCancelRequest=function(){this.$_canFire()&&this.fireEvent(i.CANCEL_REQUEST)},i.prototype.onItemProviderReset=function(t,i){e.prototype.onItemProviderReset.call(this,t,i);var o=this.dataSource;o!=this._saveDs&&(this._saveDs&&!this._saveDs.disposing&&this._saveDs.unregisterClient(this),this._saveDs=o,this._saveDs&&this._saveDs.registerClient(this))},i.prototype.onItemProviderRefresh=function(t,i){e.prototype.onItemProviderRefresh.call(this,t,i)},i.prototype.onItemProviderRefreshClient=function(t){e.prototype.onItemProviderRefreshClient.call(this,t)},i.prototype.onItemProviderItemInserted=function(t,i){e.prototype.onItemProviderItemInserted.call(this,t,i)},i.prototype.onItemProviderItemDeleted=function(t,i){e.prototype.onItemProviderItemDeleted.call(this,t,i)},i.prototype.onItemProviderItemUpdated=function(t,i){e.prototype.onItemProviderItemUpdated.call(this,t,i)},i.prototype.onItemProviderCommandStackChanged=function(t,e,i){var o=this._commands;this._fireCommandStackChanged(e||o.canUndo,i||o.canRedo)},i.UPDATE_STARTED="onItemEditUpdateStarted",i.APPEND_STARTED="onItemEditAppendStarted",i.INSERT_STARTED="onItemEditInsertStarted",i.CELL_EDITED="onItemEditCellEdited",i.CELL_UPDATED="onItemEditCellUpdated",i.COMMITTING="onItemEditCommitting",i.COMMITTED="onItemEditCommitted",i.CANCELED="onItemEditCanceled",i.COMMIT_REQUEST="onItemEditCommitRequest",i.CANCEL_REQUEST="onItemEditCancelRequest",i}(Ko),Qo=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o._insertRow=-1,o}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"itemCount",{get:function(){var t=this.source.itemCount;return t+=this.isInserting||this.isAppending?1:0,t+=this.$_dummyItem()?1:0},enumerable:!1,configurable:!0}),i.prototype.getItem=function(t,e){var i=this.source;if(e)return i.getItem(t,e);var o,r=this.$_editingItem(),n=this.$_dummyItem();return this.isEditing()&&r.index==t?r:(this.isInserting?o=t>r.index?i.getItem(t-1):i.getItem(t):t<i.itemCount&&(o=i.getItem(t)),o||(n&&t==this.itemCount-1?n:null))},i.prototype.getItems=function(t,e){return this.source.getItems(t,e)},i.prototype._doBeginUpdate=function(e){return this._createEditItem(e,t.ItemState.UPDATING,null,!1,!1)},i.prototype._doBeginAppendDummy=function(){return this.$_dummyItem()||this._createDummyEditItem()},i.prototype._doBeginAppend=function(e){return this._createEditItem(null,t.ItemState.APPENDING,e,!1,!1)},i.prototype._doBeginInsert=function(e,i,o,r){return this._createEditItem(e,t.ItemState.INSERTING,i,o,r)},i.prototype._doCompleteUpdate=function(t,e){var i=this.dataSource;if(i instanceof si){var o=this.$_editingItem();return this._copyExtents(o,t),e||i.updateRow(o.dataRow,o.values,!1)}return!1},i.prototype._doCompleteInsert=function(t){var e=this.dataSource,i=!1;if(e){var o=this.$_editingItem(),r=t?e.rowCount:Math.max(0,this._insertRow),n=o.values;if(i=e.insertRow(r,n,o._index2)){var s=this.getItemOfRow(r,!0);o._dataRow=r,s&&(o._setCheckable(s.checkable),this._copyExtents(o,s),o.heights&&(s.heights=o.heights.slice())),s.index>=0&&null!=o._index2&&this.moveItem(s,o._index2)}}return i},i.prototype.remove=function(t,e){var i=this.dataSource;if(t&&!this.isEditing(t)&&i){var o=t.dataRow;o>=0&&i.removeRow(o,e)}},i.prototype.revert=function(t){this.revertAll([t])},i.prototype.revertAll=function(t){if(t&&0!=t.length){var e=this.dataSource;if(e){var i=this.getItemsByIndices(t).map((function(t){return t.dataRow}));e.revert(i)}}},i.prototype.getRemovableRows=function(t){if(!t||0==t.length)return null;for(var e=[],i=0,o=t.length;i<o;i++){var r=this.getItem(t[i]).dataRow;r>=0&&e.push(r)}return e},i.prototype.removeRows=function(t,e){t&&(t.length>1?this.dataSource.removeRows(t,!1,e):this.dataSource.removeRow(t[0],e))},i.prototype.updateRows2=function(t){this.dataSource.updateRows2(t,!1,!1)},i.prototype._createDummyEditItem=function(){return new Xo(this,this.itemCount)},i.prototype._createEditItem=function(e,i,o,r,n){var s=this.dataSource;if(!s)return null;var a=null,l=s.fieldCount;switch(i){case t.ItemState.UPDATING:a=new Zo(this,e,e.index,e.dataRow,i);for(var h=0;h<l;h++)a.setValue(h,e.getData(h));this._copyExtents(e,a),e.heights&&(a._heights=e.heights.slice());break;case t.ItemState.INSERTING:case t.ItemState.APPENDING:var u=this._rs,c=i==t.ItemState.INSERTING&&e?r?e.index+1:e.index:this.itemCount;if(a=new Zo(this,e,c,-1,i),i==t.ItemState.INSERTING){var d=e.dataRow,p=e;if(d<=-1){for(var f=this.source._visibleItems;(p=f.getNext(p))&&!(p instanceof Go););this._insertRow=p?p.dataRow:s.rowCount}else this._insertRow=r?Math.min(s.rowCount,d+1):d;if(e instanceof Go&&r&&u){var _=u._pubItems.indexOf(p);_++>=0&&_<=u._pubItems.length&&(a._index2=_)}}if(o)for(h=0;h<l;h++)o.length>h&&a.setValue(h,o[h])}return a},i}(Jo);!function(t){function e(e,i){var o=t.call(this,e)||this;return o.message=e,o.tokenPos=i,o}o(e,t)}(Error);var tr,er=function(){function t(t){this.literal=t}return t.prototype.evaluate=function(t){return this.literal},t}(),ir=function(){function t(t,e){void 0===e&&(e=-1),this.ident=t,this.idKey=e}return t.prototype.evaluate=function(t){return this.idKey<0&&(this.idKey=t.isIdentifier(this.ident)),t.evaluateIdentifier(this.idKey)},t}(),or=function(){function t(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=!1),this.ident=t,this.idKey=e,this.capital=i}return t.prototype.evaluate=function(t){var e=this.ident,i=e.indexOf("["),o=e.indexOf("]");if(i<o){var r=e.substr(0,i).trim(),n=e.substring(i+1,o).replace(/['|"]/g,"").trim();return this.idKey<0&&(this.idKey=t.isIdentifier(r)),t.evaluateIndexerS(this.idKey,n,this.capital)}},t}(),rr=function(){function t(t,e){void 0===e&&(e=!1),this._silentError=!1,this._tokens=[],this._source=t,this._silentError=e,t&&this._parse(t)}return Object.defineProperty(t.prototype,"source",{get:function(){return this._source},set:function(t){t!=this._source&&(this._source=t,this._parse(t))},enumerable:!1,configurable:!0}),t.prototype.evaluate=function(t){try{for(var e=this._tokens,i="",o=0,r=e.length;o<r;o++){i+=e[o].evaluate(t)||""}return i}catch(t){if(!this._silentError)throw new t}return null},t.prototype._parse=function(t){if(this._tokens=[],t)for(var e,i=t.length,o=0;o<i;){var r=t.indexOf("${",o);if(r>=0){var n=t.indexOf("}",r+2);if(n>=0){if(r>o){var s=t.substring(o,r);e=new er(s),this._tokens.push(e)}if(h=t.substring(r+2,n).trim()){var a,l=void 0;e=(a=h.indexOf("["))&&(l=h.indexOf("]"))&&a<l?new or(h):new ir(h),this._tokens.push(e)}o=n+1}else r=-1}if(r<0){var h=t.substr(o,i);e=new er(h),this._tokens.push(e);break}}},t}();!function(t){t.ACTIVE="active",t.UNACTIVE="unactive",t.INDETERMINATE="indeterminate"}(tr||(tr={}));var nr,sr=function(t){function e(e){var i=t.call(this)||this;return i._active=!1,i._visible=!0,i._level=0,i._category=null,i.criteria=e,i}return o(e,t),e.prototype._doDispose=function(){this._criteria=null,this._category=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"criteria",{get:function(){return this._criteria},set:function(t){this._criteria=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"callback",{get:function(){return this._callback},set:function(t){this._callback=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this._description},set:function(t){this._description=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},set:function(t){t!=this._active&&(this._active=t,this.changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.changed()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"category",{get:function(){return this._category},set:function(t){this._category=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filterValue",{get:function(){return this._filterValue},set:function(t){this._filterValue=t},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._text||this._name},e.prototype.changed=function(){this.fireEvent(e.CHANGED)},e.CHANGED="onColumnFilterChanged",e}(Re),ar=function(t){function e(){var e=t.call(this,null)||this;return e._childs=[],e}return o(e,t),Object.defineProperty(e.prototype,"active",{get:function(){for(var t=this._childs.length;t--;)if(!this._childs[t].active)return!1;return!0},set:function(t){for(var e=this._childs.length;e--;)this._childs[e].active=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._childs.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeState",{get:function(){for(var t=void 0,e=0,i=this._childs.length;e<i;e++){if(null!=t&&this._childs[e].active!=t)return tr.INDETERMINATE;t=this._childs[e].active}return t?tr.ACTIVE:tr.UNACTIVE},enumerable:!1,configurable:!0}),e.prototype._doDispose=function(){this.clear(),t.prototype._doDispose.call(this)},e.prototype.clear=function(){this._childs=[]},e.prototype.addChild=function(t){t.level=this.level+1,t.category=this,this._childs.push(t)},e.prototype.getChild=function(t){return this._childs[t]},e}(sr),lr=function(){function t(t){this._model=t,this.parse()}return t.prototype._doDispose=function(){this._exprNode=null,this._model=null},Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),t.prototype.prepare=function(t,e){t.setDataSource(e)},t.prototype.select=function(t,e,i){var o,r=this._model,n=r.callback;return n&&(o=n.call(this,t._ds.handler,e.dataRow,e.level,i,r,e.getData(i))),"boolean"==typeof o?o:!this._exprNode||(t.setData(e,i,r),this._exprNode.evaluate(t))},t.prototype.parse=function(){this._model.criteria?this._exprNode=Ie.Default.parse(this._model.criteria,null):this._exprNode=null},t}(),hr=function(t){function e(e){var i=t.call(this)||this;return i._items=[],i._names={},i._updating=!1,i._nextId=1,i._owner=e,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeCount",{get:function(){for(var t=0,e=0,i=this._items;e<i.length;e++){i[e].active&&t++}return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){for(var t=0,e=this._items;t<e.length;t++){if(e[t].visible)return!0}return!1},enumerable:!1,configurable:!0}),e.prototype.getOwner=function(){return this._owner},e.prototype.getItem=function(t){return this._items[t]},e.prototype.indexOf=function(t){for(var e=this._items.length-1;e>=0;e--)if(this._items[e].name==t)return e;return-1},e.prototype.getActiveItems=function(t){for(var e=[],i=this._items.length-1;i>=0;i--)this._items[i].active==t&&e.push(this._items[i]);return e},e.prototype.assignFrom=function(t){if(t!==this){var e=this.activeCount;if(this.clear(!1),t)for(var i=t instanceof Array?t:[t],o=i.length,r=0;r<o;r++)if((t=i[r])&&t.name){this.$_checkName(t.name);var n=new sr(null);n.assignFrom(t),this._items.push(n),this._names[t.name]=n,n.addListener(this)}this.changed(null,!1,!(e||this.activeCount))}},e.prototype.clear=function(t){void 0===t&&(t=!0);var e=this._items.length,i=this.activeCount;if(e>0){for(var o=0;o<e;o++)this._items[o].removeListener(this);return this._items.length=0,this._names={},i&&t&&this.changed(null),!0}return!1},e.prototype.add=function(t,e){void 0===e&&(e=!0);var i=Rt.cast(t,sr);i?this._items.indexOf(i)<0&&i.name&&this.$_checkName(i.name):t&&t.name&&(this.$_checkName(t.name),(i=new sr(null)).assignFrom(t)),i&&(this._items.push(i),i._owner=this,this._names[i.name]=i,i.addListener(this),this.changed(null,!1,!(i.active&&e)))},e.prototype.addAll=function(t,e,i){if(void 0===i&&(i=!0),t instanceof Array||!t||(t=[t]),(t=Rt.makeArray(t,!0)).length>0){for(var o=0,r=t.length,n=0;n<r;n++){var s=Rt.cast(t[n],sr);if(s?this._items.indexOf(s)<0&&s.name&&(e||this.$_checkName(s.name)):t[n]&&t[n].name&&(e||this.$_checkName(t[n].name),(s=new sr(null)).assignFrom(t[n])),s){var a=this.indexOf(s.name);a>=0?(this._items[a]&&this._items[a].removeListener(this),this._items[a]=s):this._items.push(s),s.addListener(this),this._names[s.name]=s,s.active&&o++}}this.changed(null,!1,!(o>0&&i))}},e.prototype.removeItems=function(t){if(t){for(var e=0,i=t.length-1;i>=0;i--){var o=this.indexOf(t[i]);if(o>=0){var r=this._items[o];this._items.splice(o,1),delete this._names[r.name],r.removeListener(this),r.active&&e++}}this.changed(null,!1,!e)}},e.prototype.$_activateItems=function(t,e,i,o,r){var n=o;this._updating=!0;try{t.forEach((function(t){t.active!=e&&(t._active=e,n=!0)}))}finally{this._updating=!1}i&&n&&this.changed(null,r)},e.prototype.activateItems=function(t,e,i){var o=this;if(void 0===i&&(i=!0),t){var r=t.filter((function(t){return t&&o._names[t]})).map((function(t){return o._names[t]}));this.$_activateItems(r,e,i)}},e.prototype.activateAll=function(t,e,i,o){this.$_activateItems(this._items,t,e,i,o)},e.prototype.$_hideFilters=function(t,e){t.forEach((function(t){t&&(t.visible=!e)}))},e.prototype.hideFilters=function(t,e){var i=this;t&&this.$_hideFilters(t.filter((function(t){return i._names[t]})).map((function(t){return i._names[t]})),e)},e.prototype.hideAllFilters=function(t){this.$_hideFilters(this._items,t)},e.prototype.$_toggleItems=function(t){var e=!1;this._updating=!0;try{t.forEach((function(t){t._active=!t.active,e=!0}))}finally{this._updating=!1}e&&this.changed(null)},e.prototype.toggleItems=function(t){var e=this;t&&this.$_toggleItems(t.filter((function(t){return e._names[t]})).map((function(t){return e._names[t]})))},e.prototype.toggleAll=function(){this.$_toggleItems(this._items)},e.prototype.changed=function(t,e,i){this._updating||this.fireEvent(sr.CHANGED,t,e,i)},e.prototype.$_checkName=function(t){if(this._names.hasOwnProperty(t))throw new Error("Column filter already existes: "+t)},e.prototype.onColumnFilterChanged=function(t){this.changed(t)},e}(Re),ur=function(e){function i(){var t=e.call(this)||this;return t._field=-1,t._fieldCount=0,t}return o(i,e),i.prototype._doDispose=function(){this._item=this._ds=null,e.prototype._doDispose.call(this)},i.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=this._ds?this._ds.fieldCount:0},i.prototype.setData=function(t,e,i){this._item=t,this._field=e,this._model=i},i.prototype.isIdentifier=function(t){return t=t.toLowerCase(),i.IDENTS.hasOwnProperty(t)?i.IDENTS[t]:e.prototype.isIdentifier.call(this,t)},i.prototype.$_getLookupText=function(t){var e=t._owner._owner;if(e.lookupDisplay){var i=e.lookupSource;if(i){for(var o=e.lookupKeyFieldIds,r=o.length,n=[],s=0;s<r;s++)n.push(this._item.getData(o[s]));return i.lookup(n,e.valueSeparator)}var a=e.labelFieldIndex;return a>=0?this._item.getData(a):e.getLookupLabel(this._item.getData(e.fieldName),!1)}return""},i.prototype.evaluateIdentifier=function(e){switch(e){case i.ID_VALUE:return this._item.getData(this._field);case i.ID_TEXT:return this.$_getLookupText(this._model);case i.ID_STATE:switch(this._item.rowState){case t.RowState.CREATED:return"c";case t.RowState.UPDATED:return"u";case t.RowState.DELETED:return"d";case t.RowState.CREATE_AND_DELETED:return"x"}return;case i.ID_CHANGED_CELL:var o=this._item.dataRow,r=this._field;return r>=0&&this._item.rowState==t.RowState.UPDATED&&this._ds.isDataChanged(o,r);case i.ID_FIELD:return this._field}throw new $t("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t==i.ID_VALUE||t==i.ID_VALUES){if(e<0||e>=this._fieldCount)throw new $t("Data field index out of bounds:"+e);return this._item.getData(e)}throw new $t("Invalid identifier indexer: "+t)}},i.prototype.evaluateIndexerS=function(t,e,o){if(t!=i.ID_VALUE&&t!=i.ID_VALUES)throw new $t("Invalid identifier indexer: "+t);if(this._ds){var r=o?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(r<0||r>=this._fieldCount)throw new $t("Data field is not exists:"+e);return this._item.getData(r)}},i.ID_VALUE=0,i.ID_FIELD=1,i.ID_VALUES=2,i.ID_STATE=3,i.ID_CHANGED_CELL=4,i.ID_TEXT=5,i.IDENTS={value:i.ID_VALUE,field:i.ID_FIELD,values:i.ID_VALUES,state:i.ID_STATE,changedcell:i.ID_CHANGED_CELL,text:i.ID_TEXT},i}(Wt),cr=function(t){function e(e){var i=t.call(this)||this;return i._dirty=!1,i._grid=e,i}return o(e,t),e.prototype._doDispose=function(){this._grid=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return this._dirty},set:function(t){t!==this._dirty&&(this._dirty=t,this.invalidate())},enumerable:!1,configurable:!0}),e.prototype.clean=function(){this._dirty&&(this._dirty=!1)},e.prototype.invalidate=function(){this._grid&&this._grid.invalidate()},e.prototype.refreshOwner=function(){this._grid&&this._grid.refreshView()},e.prototype._changed=function(){this._doChanged(),this._dirty||(this._dirty=!0,this.refreshOwner())},e.prototype._doChanged=function(){},e}(Re),dr=function(t){function e(e){var i=t.call(this,e)||this;return i._visible=!0,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._visibleChanged())},enumerable:!1,configurable:!0}),e.prototype._doChanged=function(){this._grid&&this._grid._visualObjectChanged(this)},e.prototype._visibleChanged=function(){this._changed()},e}(cr),pr=function(e){function i(){var t=e.call(this)||this;return t._item=null,t._group=null,t._dataSource=null,t._fieldCount=0,t}return o(i,e),i.prototype._doDispose=function(){this._item=null,this._group=null,this._dataSource=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"index",{get:function(){return this._item.index},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"item",{get:function(){return this._item},enumerable:!1,configurable:!0}),i.prototype.setDataSource=function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount:0},i.prototype.setItem=function(t){this._item=t,this._group=Rt.cast(t,Wo)},i.prototype.isIdentifier=function(t){return t=t.toLowerCase(),i.IDENTS.hasOwnProperty(t)?i.IDENTS[t]:e.prototype.isIdentifier.call(this,t)},i.prototype.evaluateIdentifier=function(e){switch(e){case i.ID_ROW:return this._item.index;case i.ID_DATAROW:return this._item.dataRow;case i.ID_CHECKED:return this._item.checked;case i.ID_STATE:switch(this._item.rowState){case t.RowState.CREATED:return"c";case t.RowState.UPDATED:return"u";case t.RowState.DELETED:return"d";case t.RowState.CREATE_AND_DELETED:return"x"}return;case i.ID_COUNT:return this._group?this._group.count:0;case i.ID_DCOUNT:return this._group?this._group.descendantCount:0}throw new $t("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t==i.ID_VALUE||t==i.ID_VALUES){if(e<0||e>=this._fieldCount)throw new $t("Data field index out of bounds:"+e);return this._item.getData(e)}throw new $t("Invalid identifier indexer: "+t)}},i.prototype.evaluateIndexerS=function(t,e,o){if(t!=i.ID_VALUE&&t!=i.ID_VALUES)throw new $t("Invalid identifier indexer: "+t);if(this._dataSource){var r=o?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e);if(r<0||r>=this._fieldCount)throw new $t("Data field is not exists:"+e);return this._item.getData(r)}},i.ID_ROW=0,i.ID_DATAROW=1,i.ID_CHECKED=2,i.ID_VALUE=3,i.ID_VALUES=4,i.ID_STATE=5,i.ID_COUNT=6,i.ID_DCOUNT=7,i.IDENTS={row:i.ID_ROW,datarow:i.ID_DATAROW,checked:i.ID_CHECKED,value:i.ID_VALUE,values:i.ID_VALUES,state:i.ID_STATE,count:i.ID_COUNT,dcount:i.ID_DCOUNT},i}(Wt),fr=function(t){function e(){var e=t.call(this)||this;return e._fieldCount=0,e}return o(e,t),e.prototype._doDispose=function(){this._cell=null,this._item=null,this._ds=null,this._grid=null,t.prototype._doDispose.call(this)},e.prototype.setDataArguments=function(t,e,i){this._ds=t,this._fieldCount=t?t.fieldCount:0,this._cell=e,this._item=i,this._grid=e&&e.index.column.grid},e.prototype.setItem=function(t){this._item=t},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){var i;switch(t){case e.ID_VALUE:return this._item.getData(this._cell.index.dataField);case e.ID_BASE:return(i=this._cell.index.dataColumn.baseIndex)>=0?this._item.getData(i):void 0;case e.ID_PREV_VALUES:var o=this._cell.index.column,r=this._grid.getDataColumns();i=r.indexOf(o);var n=[];if(r.length||i<0)return;for(var s=0,a=Math.min(i,r.length);s<a;s++)n.push(this._item.getData(r[s].dataIndex));return n.join("`")}throw new $t("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(this._item){if(t==e.ID_VALUE||t==e.ID_VALUES){if(i<0||i>=this._fieldCount)throw new $t("Data field index out of bounds:"+i);return this._item.getData(i)}throw new $t("Invalid identifier indexer: "+t)}},e.prototype.evaluateIndexerS=function(t,i,o){if(t!=e.ID_VALUE&&t!=e.ID_VALUES)throw new $t("Invalid identifier indexer: "+t);if(this._ds){var r=o?this._ds.getFieldIndexC(i):this._ds.getFieldIndex(i);if(r<0||r>=this._fieldCount)throw new $t("Data field is not exists:"+i);return this._item.getData(r)}},e.ID_VALUE=0,e.ID_VALUES=1,e.ID_BASE=2,e.ID_PREV_VALUES=3,e.IDENTS={value:e.ID_VALUE,values:e.ID_VALUES,base:e.ID_BASE,prevvalues:e.ID_PREV_VALUES},e}(Wt),_r=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.setGrid=function(t){this._grid=t},e.prototype.setGroup=function(t){this._group=t},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){var i,o,r=this._group;switch(t){case e.ID_GROUP_FIELD:return(i=r.dataSource.getField(r.groupField))?i.fieldName:"";case e.ID_FIELD_HEADER:return(i=r.dataSource.getField(r.groupField))?i.header:"";case e.ID_GROUP_COLUMN:return(o=this._grid?this._grid.columnByField(r.groupField):null)?o.displayText:r.dataSource.getFieldName(r.groupField);case e.ID_COLUMN_HEADER:return(o=this._grid?this._grid.columnByField(r.groupField):null)?o.header.text||o.displayText:r.dataSource.getFieldName(r.groupField);case e.ID_COLUMN_FOOTER:return(o=this._grid?this._grid.columnByField(r.groupField):null)?o.footer.text||o.displayText:r.dataSource.getFieldName(r.groupField);case e.ID_GROUP_VALUE:return r?r.groupValue:void 0;case e.ID_ROW_COUNT:return r.descendantCount}throw new $t("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){switch(t){case e.ID_SUM:case e.ID_MAX:case e.ID_MIN:case e.ID_AVG:case e.ID_DATA_COUNT:case e.ID_DATA_AVG:if(isNaN(i)||i<0)return;var o=void 0;switch(t){case e.ID_SUM:o=this._group.getSum(i);break;case e.ID_MAX:o=this._group.getMax(i);break;case e.ID_MIN:o=this._group.getMin(i);break;case e.ID_AVG:o=this._group.getAvg(i);break;case e.ID_DATA_COUNT:o=this._group.getDataCount(i);break;case e.ID_DATA_AVG:o=this._group.getDataAvg(i)}return isNaN(o)?"":String(o)}throw new $t("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,e,i){var o=this._group.dataSource,r=e?o?o.getFieldIndex(e):-1:this._group.groupField;return this.evaluateIndexerI(t,r)},e.ID_GROUP_FIELD=0,e.ID_FIELD_HEADER=1,e.ID_GROUP_COLUMN=2,e.ID_COLUMN_HEADER=3,e.ID_COLUMN_FOOTER=4,e.ID_GROUP_VALUE=5,e.ID_ROW_COUNT=6,e.ID_SUM=7,e.ID_MAX=8,e.ID_MIN=9,e.ID_AVG=10,e.ID_DATA_COUNT=11,e.ID_DATA_AVG=12,e.IDENTS={groupfield:e.ID_GROUP_FIELD,fieldheader:e.ID_FIELD_HEADER,groupcolumn:e.ID_GROUP_COLUMN,columnheader:e.ID_COLUMN_HEADER,columnfooter:e.ID_COLUMN_FOOTER,groupvalue:e.ID_GROUP_VALUE,rowcount:e.ID_ROW_COUNT,sum:e.ID_SUM,max:e.ID_MAX,min:e.ID_MIN,avg:e.ID_AVG,datacount:e.ID_DATA_COUNT,dataavg:e.ID_DATA_AVG},e}(Wt),gr=function(t){function e(e){var i=t.call(this)||this;return i._index=new Ds,i._name=e,i}return o(e,t),e.prototype._doDispose=function(){this._index&&this._index.dispose(),this._index=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){return this._index.item},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueColumn",{get:function(){return this._index.valueColumn},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataColumn",{get:function(){return this._index.dataColumn},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return 0},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(t){this._index.assignFrom(t)},e.prototype.setIndex2=function(t,e,i){this._index._grid=t,this._index.set(e,i)},e.prototype.setLayout=function(t){this._index.layout=t},e.ERROR="<<ERROR>>",e}(Lt),yr=function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this,i)||this;return o._model=e,o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"model",{get:function(){return this._model},set:function(t){this._model=t},enumerable:!1,configurable:!0}),e}(gr),mr=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.getBlankState=function(t){return E.NONE},e.prototype.isValueChanged=function(){return!1},e}(gr),br=function(e){function i(t){return void 0===t&&(t=null),e.call(this,t||"dataCell")||this}return o(i,e),i.getText=function(t,e){var o=e.dataIndex>=0?t.getData(e.dataIndex):void 0;return i._getText(t,e,o)},i._getText=function(e,i,o){var r,n=i,s=function(){var t=n.labelFieldIndex;return t>=0?e.getData(t):n.getLookupLabel(o,!0)};if(n.lookupDisplay){var a=n.lookupSource;if(a){for(var l=n.lookupKeyFieldIds,h=l.length,u=[],c=0;c<h;c++)u.push(e.getData(l[c]));r=!a.exists(u)&&n.labelFieldIndex>=0?s():a.lookup(u,n.valueSeparator,n.textOfInvalid)}else r=s()}else{var d,p=void 0;if(r=o,n.valueType==t.ValueType.NUMBER&&null!=(d=n.nanText)&&isNaN(r))r=d;else if(p=n.displayCallback){r=p(n.grid.handler,Ms.tempItem(n.grid,e,i).proxy(),r)}else null!=r&&"object"==typeof r&&(r=JSON.stringify(r))}return null==r?"":String(r)},i._getDisplayText=function(e,o,r,n,s){var a,l=e.formatOptions,h=s.textFormatter||void 0===r.textFormat&&l.textFormatter,u=s.numberFormatter||void 0===r.numberFormat&&l.numberFormatter,c=s.booleanFormatter||void 0===r.booleanFormat&&l.boolFormatter,d=s.datetimeWriter||void 0===r.datetimeFormat&&l.datetimeWriter;if(null!=s.text)return s.text;if(r){switch(r.valueType){case t.ValueType.TEXT:a=n&&h?h.getText(n):i._getText(o,r,n);break;case t.ValueType.NUMBER:var p=Number(n);a=(isNaN(p)||null==p)&&r.nanText?r.nanText:0==p&&null!=r.zeroText?r.zeroText:u?u.getText(p,r.displayMinusZero):i._getText(o,r,n);break;case t.ValueType.DATETIME:a=n instanceof Date&&d?d.getText(n):i._getText(o,r,n);break;case t.ValueType.BOOLEAN:a=c?c.formatValue(n):i._getText(o,r,n);break;case t.ValueType.OBJECT:var f=r.getField(),_=o.dataRow,g=r.objectKey||f.objectKey,y=r.objectCallback||f.objectCallback;if(n){var m=y&&"function"==typeof y?y(f.orgFieldName,_,n):g?n[g]:i._getText(o,r,n);switch(typeof m){case"string":a=i._getText(o,r,m);break;case"number":a=u?u.getText(m,r.displayMinusZero):String(m);break;case"boolean":a=c?c.formatValue(m):String(m);break;default:a=m instanceof Date&&d?d.getText(m):m?String(m):""}}break;default:a=i._getText(o,r,n)}if(a){var b=s.prefix;b&&(a=b+a),(b=s.suffix)&&(a+=b)}}return a},i.equalBlankRuntime=function(){return this._equalBlankRuntime||(this._equalBlankRuntime=new fr),this._equalBlankRuntime},i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype.getValue=function(){if(this.item.itemState===t.ItemState.DUMMY&&this.dataColumn)return this.dataColumn.defaultValue;var e=this.dataColumn.dataIndex;return e>=0?this.item.getData(e):void 0},i.prototype.getDisplayText=function(t,e){return i._getDisplayText(t,this.index.item,this.index.dataColumn,this.getValue(),e)},Object.defineProperty(i.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),i.prototype.getBlankState=function(t){var e=function(t,e){return t instanceof Date&&e instanceof Date?+t==+e:t==e},o=function(t){return c&&c instanceof Ut?(d.setItem(t),c.evaluate(d)):t.getData(h.dataIndex)},r=function(t,e,i){var o=function(e){for(var i=e;i.level>t;)i=i.parent;return i};return o(e)===o(i)},n=function(i,n,a){if(i>=n&&i<a){var l=o(u),c=i===n?null:p.getItem(i-1),d=i===a-1?null:p.getItem(i+1);if(s=c instanceof Go&&e(l,o(c))&&(!t||r(h.groupLevel,u,c))?E.BODY:E.HEAD,!(d instanceof Go)||!e(l,o(d))||t&&!r(h.groupLevel,u,d))switch(s){case E.BODY:s=E.TAIL;break;case E.HEAD:s=E.NONE}}return s},s=E.NONE,a=this.index,l=a.layout,h=this.dataColumn,u=this.item,c=l.equalBlankNode||t,d=c&&i.equalBlankRuntime(),p=l.grid,f=p.fixedOptions.rowCount,_=p.layoutManager.topIndex,g=p.fixedOptions.blankRows;if(l&&(l.blanked||t)&&l.dataRoot&&u.dataRow>=0){var y=a.itemIndex;return c&&d&&d.setDataArguments(u.dataSource,this,u),s=y<f&&g?n(y,0,f):n(y,f+_,p.itemCount)}return s},i.prototype.isValueChanged=function(){var t=this.dataColumn.dataIndex;return t>=0&&this.item.isChanged(t)},i}(mr),vr=function(t){function e(e){return t.call(this,e||"hiddenDataCell")||this}return o(e,t),e.prototype.setItem=function(t){this.$_item=t},Object.defineProperty(e.prototype,"item",{get:function(){return this.$_item},enumerable:!1,configurable:!0}),e}(br),wr=function(t){function e(e){return void 0===e&&(e=null),t.call(this,e||"literalCell")||this}return o(e,t),e.getDisplayText=function(t,e,i,o,r){var n=r.prefix||"",s=r.suffix||"",a=null!=r.text?r.text:o;return a?n+a+s:""},e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"text",{get:function(){return this.index.literalColumn.value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.index.column.value},enumerable:!1,configurable:!0}),e.prototype.getDisplayText=function(t,i){return e.getDisplayText(t,this.index.item,this.index.column,this.value,i)},e}(mr),Cr=function(t){function e(e){return void 0===e&&(e=null),t.call(this,e||"seriesCell")||this}return o(e,t),e.getText=function(t,e){return void 0===e&&(e=","),t?t.join(e):""},e.getValue=function(t){var e=t.column;if(e instanceof hs){var i=e.fields,o=i?i.length:0;if(o>0){for(var r=t.item,n=new Array(o),s=0;s<o;s++)i[s]>=0&&(n[s]=r.getData(i[s]));return n}}return[]},e._getDisplayText=function(t,i){void 0===i&&(i=",");var o=e.getValue(t);return o?o.join(i):""},e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.getDisplayText=function(t,e){var i=this.value;return this.index.seriesColumn.actualTarget&&(i=i.reverse()),i?i.join(e):""},Object.defineProperty(e.prototype,"getText",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return e.getValue(this.index)},enumerable:!1,configurable:!0}),e}(mr),xr=function(t){function e(){var e=t.call(this)||this;return e.minBarWidth=1,e.maxBarWidth=0,e.barWidth=0,e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doRender=function(t,e,i){var o=this._getBarLength();if(!(o<1)){var r=this.barWidth;r<=0&&(r=Math.floor(e.width/o),r=Math.max(this.minBarWidth,r),this.maxBarWidth>0&&(r=Math.min(this.maxBarWidth,r))),o*=r,e.x+=(e.width-o)/2,e.x=Math.floor(e.x),this._drawBars(t,this.barStyle,i,e.x,e.y,r,e.height)}},e}(function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){if(t!=this._value){this._value=t;try{this._error=null,this._parse(t)}catch(t){this._error=t}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),e.prototype.render=function(t,e){this._doRender(t,e,!1)},e.prototype.renders=function(t,e){this._doRender(t,e,!0)},e}(Lt)),Ir=[2171426,2236706,2236961,1184291,1184546,1249826,1188371,1188626,1253906,2232851,2233106,2298386,1122866,1188146,1188401,1126946,1192226,1192481,2241041,2232626,2232881,2175506,2240786,3219761,3215906,3281186,3281441,3219986,3285266,3285521,2171171,2171681,2302241,1119011,1249571,1250081,1123091,1253651,1254161,2167571,2298131,2298641,1122611,1123121,1253681,1126691,1127201,1257761,3223841,2167601,2298161,2175251,2175761,2175281,3215651,3216161,3346721,3219731,3220241,3350801,3227921,2233361,4395281,1118756,1119266,1184036,1184801,1315106,1315361,1122836,1123346,1188116,1188881,1319186,1319441,2363921,2232596,4272401,2363666,1261841,1118786,1184066,1184321,1131026,1196306,1196561,4264466,4329746,4330001,2171201,2179361,4268321,1118531,1119041,1249601,1130771,1131281,4264211,4264721,1126721,1130801,3215681,4264241,2167826,2167316,2167346,36901138],Sr=[103,104,105],Er=[251658240,15728640,983040,61440,3840,240,15],Or=function(t){function e(){var e=t.call(this)||this;return e.quietZoneWidth=10,e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._parse=function(t){this._weights=[];var e=t?t.length:0;if(!(e<1)){var i=this.$_detectType(t),o=Sr[i],r=Ir[o],n=o;if(this._weights.push(r),2==i)for(var s=0;s<e;s+=2){var a=t.substr(s,2);o=parseInt(a),o=this.$_convert(i,o),r=Ir[o],this._weights.push(r),n+=o*(Math.floor(s/2)+1)}else for(s=0;s<e;s++)o=t.charCodeAt(s),o=this.$_convert(i,o),r=Ir[o],this._weights.push(r),n+=o*(s+1);n%=103,this._weights.push(Ir[n]),this._weights.push(Ir[106])}},e.prototype._getBarLength=function(){return this.quietZoneWidth+11*(this._weights.length-1)+13+this.quietZoneWidth},e.prototype._drawBars=function(t,e,i,o,r,n,s){o+=10*n;for(var a,l=this._weights.length-1,h=0;h<l;h++){a=this._weights[h];for(var u=0;u<6;u++){var c=(a&Er[u+1])>>4*(5-u);c*=n,u%2==0&&(i?t.sbounds(e,o+"",r+"%",c+"",s+"%"):t.bounds(e,o,r,c,s)),o+=c}}a=this._weights[l];for(u=0;u<7;u++){c=(a&Er[u])>>4*(6-u);c*=n,u%2==0&&(i?t.sbounds(e,o+"",r+"%",c+"",s+"%"):t.bounds(e,o,r,c,s)),o+=c}},e.prototype.$_convert=function(t,e){switch(t){case 0:if(e>=0&&e<32)return e+64;if(e>=32&&e<96)return e-32;break;case 1:if(e>=32&&e<128)return e-32;break;case 2:if(e>=0&&e<=99)return e}throw new Error("Invalid code128 charactor: "+e)},e.prototype.$_detectType=function(t){return t.length%2==0&&/^\d+$/.test(t)?2:/[a-z]/.test(t)?1:0},e}(xr),Rr={0:"nnnwwnwnn",1:"wnnwnnnnw",2:"nnwwnnnnw",3:"wnwwnnnnn",4:"nnnwwnnnw",5:"wnnwwnnnn",6:"nnwwwnnnn",7:"nnnwnnwnw",8:"wnnwnnwnn",9:"nnwwnnwnn",A:"wnnnnwnnw",B:"nnwnnwnnw",C:"wnwnnwnnn",D:"nnnnwwnnw",E:"wnnnwwnnn",F:"nnwnwwnnn",G:"nnnnnwwnw",H:"wnnnnwwnn",I:"nnwnnwwnn",J:"nnnnwwwnn",K:"wnnnnnnww",L:"nnwnnnnww",M:"wnwnnnnwn",N:"nnnnwnnww",O:"wnnnwnnwn",P:"nnwnwnnwn",Q:"nnnnnnwww",R:"wnnnnnwwn",S:"nnwnnnwwn",T:"nnnnwnwwn",U:"wwnnnnnnw",V:"nwwnnnnnw",W:"wwwnnnnnn",X:"nwnnwnnnw",Y:"wwnnwnnnn",Z:"nwwnwnnnn","-":"nwnnnnwnw",".":"wwnnnnwnn"," ":"nwwnnnwnn",$:"nwnwnwnnn","/":"nwnwnnnwn","+":"nwnnnwnwn","%":"nnnwnwnwn","*":"nwnnwnwnn"},Pr=function(t){function e(){var e=t.call(this)||this;return e._wideWidth=3,e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._parse=function(t){if(this._codes=[],t){var e=t.length;this._codes.push(Rr["*"]);for(var i=0;i<e;i++){var o=t.charAt(i),r=Rr[o];if(!r)throw new Error("Invalid Code39 character: "+o);this._codes.push(r)}this._codes.push(Rr["*"])}},e.prototype._getBarLength=function(){var t=this._codes.length;return t*(3*this._wideWidth+6)+(t-1)},e.prototype._drawBars=function(t,e,i,o,r,n,s){var a=this._codes.length;if(a>2)for(var l=0;l<a;l++){for(var h=this._codes[l],u=0;u<9;u++){var c="n"==h.charAt(u)?1:this._wideWidth;c*=n,u%2==0&&(i?t.sbounds(e,o+"",r+"%",c+"",s+"%"):t.bounds(e,o,r,c,s)),o+=c}l<a-1&&(o+=n)}},e}(xr),kr="http://www.w3.org/2000/svg",Tr=function(t){function e(e,i){var o=t.call(this)||this;return o._transforms=[],o._defs=e,o._element=i,o}return o(e,t),e.prototype._doDispose=function(){this.clear(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"doc",{get:function(){return St(this._element)||document},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e){return this._defs=t,this._element=e,this},e.prototype.clear=function(){this._defs=null,this._element=null,this._transforms=null},e.prototype.sline=function(t,e,i,o,r){var n=this.doc.createElementNS(kr,"line");this._element.appendChild(n),n.x1.baseVal.valueAsString=e,n.y1.baseVal.valueAsString=i,n.x2.baseVal.valueAsString=o,n.y2.baseVal.valueAsString=r,t&&n.setAttribute("class",t)},e.prototype.polygon=function(t,e){if(!(null==e||e.length<4)){var i=this.doc.createElementNS(kr,"polygon");this._element.appendChild(i);var o=[];o.push(e[0]+","+e[1]);for(var r=2;r<e.length;r+=2)o.push(e[r]+","+e[r+1]);this._trans&&i.setAttributeNS(null,"transform",this._trans),i.setAttributeNS(null,"points",o.join(" ")),t&&i.setAttribute("class",t)}},e.prototype.bounds=function(t,e,i,o,r){var n=this.doc.createElementNS(kr,"rect");this._element.appendChild(n),n.x.baseVal.value=e,n.y.baseVal.value=r<0?i+r:i,n.width.baseVal.value=o,n.height.baseVal.value=Math.abs(r),t&&n.setAttribute("class",t)},e.prototype.pbounds=function(t,e,i,o,r){var n=this.doc.createElementNS(kr,"rect");this._element.appendChild(n),n.x.baseVal.valueAsString=e+"%",n.y.baseVal.valueAsString=(r<0?i+r:i)+"%",n.width.baseVal.valueAsString=o+"%",n.height.baseVal.valueAsString=Math.abs(r)+"%",t&&n.setAttribute("class",t)},e.prototype.sbounds=function(t,e,i,o,r){var n=this.doc.createElementNS(kr,"rect");this._element.appendChild(n),n.x.baseVal.valueAsString=e,n.y.baseVal.valueAsString=i,n.width.baseVal.valueAsString=o,n.height.baseVal.valueAsString=r,t&&n.setAttribute("class",t)},e.prototype.scircle=function(t,e,i,o){var r=this.doc.createElementNS(kr,"circle");this._element.appendChild(r),r.cx.baseVal.valueAsString=e,r.cy.baseVal.valueAsString=i,r.r.baseVal.valueAsString=o,t&&r.setAttribute("class",t)},e.prototype.ellipse=function(t,e,i,o,r){var n=this.doc.createElementNS(kr,"ellipse"),s=o/2,a=r/2;this._element.appendChild(n),n.cx.baseVal.value=e+s,n.cy.baseVal.value=i+a,n.rx.baseVal.value=s,n.ry.baseVal.value=a,t&&n.setAttribute("class",t)},e}(Lt),Dr=function(t){function e(e){var i=t.call(this)||this,o=St(e),r=i._element=o.createElementNS(kr,"svg"),n=r.style,s=i._defs=o.createElementNS(kr,"defs");return r.appendChild(s),n.background="",n.border="none",n.pointerEvents="none",e.appendChild(r),i._renderer=new Tr(i._defs),i}return o(e,t),e.createSVG=function(t){var e=St(t),i=e.createElementNS(kr,"svg"),o=i.style,r=e.createElementNS(kr,"defs");i.appendChild(r),o.background="",o.border="none",o.pointerEvents="none";var n=e.createElementNS(kr,"g");return i.appendChild(n),t.appendChild(i),i},e.renderSVG=function(t,e,i){var o=e.lastElementChild,r=this._renderer.init(e.firstChild,o);o.textContent="",i.call(t,e,r,e.clientWidth,e.clientHeight),r.clear()},e.renderSVG2=function(t,e,i,o,r){var n=St(e);e.childElementCount>1&&e.removeChild(e.lastElementChild);var s=n.createElementNS(kr,"g"),a=this._renderer.init(e.firstChild,s);e.appendChild(s),i.call(t,e,a,o,r),a.clear()},e.prototype._doDispose=function(){this._renderer=this._renderer.dispose(),this._element.parentElement&&this._element.parentElement.removeChild(this._element),this._element=this._defs=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),e.prototype.render=function(t){this._clear(),t?t.call(this,this._renderer,this._element.clientWidth,this._element.clientHeight):this._doRender(this._renderer,this._element.clientWidth,this._element.clientHeight)},e.prototype._clear=function(){this._element.childElementCount>1&&this._element.removeChild(this._element.lastElementChild);var t=St(this._element).createElementNS(kr,"g");this._element.appendChild(t),this._renderer._element=t},e.prototype._doRender=function(t,e,i){},e._renderer=new Tr,e}(Lt),Mr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.draw=function(t,e,i){this._doDraw(t,e,i)},e}(Lt),Fr={rectangle:[0,0,1,0,1,1,0,1],triangle:[.5,0,0,1,1,1],itriangle:[0,0,.5,1,1,0],diamond:[.5,0,0,.5,.5,1,1,.5],uparrow:[.5,0,0,.5,.3,.5,.3,1,.7,1,.7,.5,1,.5],downarrow:[.3,0,.3,.5,0,.5,.5,1,1,.5,.7,.5,.7,0],leftarrow:[0,.5,.5,1,.5,.7,1,.7,1,.3,.5,.3,.5,0],rightarrow:[0,.3,0,.7,.5,.7,.5,1,1,.5,.5,0,.5,.3],plus:[.3,0,.3,.3,0,.3,0,.7,.3,.7,.3,1,.7,1,.7,.7,1,.7,1,.3,.7,.3,.7,0],minus:[0,.3,0,.7,1,.7,1,.3],star:[.5,0,.6122,.3454,.9755,.3454,.6816,.559,.7938,.9045,.5,.691,.2061,.9045,.3183,.559,.02447,.3454,.3877,.3454]},Lr={equal:[[0,.2,0,.4,1,.4,1,.2],[0,.6,0,.8,1,.8,1,.6]]},Nr=function(t){function e(e){var i=t.call(this)||this;return i._shape=e,i}return o(e,t),Object.defineProperty(e.prototype,"shape",{get:function(){return this._shape},set:function(t){this._shape=t?"inverted_triangle"===t?e.INVERTED_TRIANLGE:t.toLowerCase():null},enumerable:!1,configurable:!0}),e.prototype._doDraw=function(t,e,i){var o=this._shape;if(Fr.hasOwnProperty(o)){if(h=Fr[o]){for(var r=0,n=0,s=0,a=(h=h.slice()).length/2;s<a;s++)h[2*s]=r+h[2*s]*e,h[2*s+1]=n+h[2*s+1]*i;h.push(h[0],h[1]),t.polygon(null,h)}}else if(Lr.hasOwnProperty(o)){var l=Lr[o];if(l){var h;for(r=0,n=0,s=0,a=(h=l[0].slice()).length/2;s<a;s++)h[2*s]=r+h[2*s]*e,h[2*s+1]=n+h[2*s+1]*i;h.push(h[0],h[1]),t.polygon(null,h);for(s=0,a=(h=(h=l[1]).slice()).length/2;s<a;s++)h[2*s]=r+h[2*s]*e,h[2*s+1]=n+h[2*s+1]*i;h.push(h[0],h[1]),t.polygon(null,h)}}},e.RECTANGLE="rectangle",e.TRIANLGE="triangle",e.INVERTED_TRIANLGE="itriangle",e.DIAMOND="diamond",e.UP_ARROW="uparrow",e.DOWN_ARROW="downarrow",e.LEFT_ARROW="leftarrow",e.RIGHT_ARROW="rightarrow",e.PLUS="plus",e.MINUS="minus",e.EQUAL="equal",e.STAR="star",e}(Mr),$r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._doDraw=function(t,e,i){t.ellipse(null,0,0,e,i)},e}(Mr),Ar=function(){function e(){}return e.layoutFlex=function(e,i,o,r,n,s){var a=s===t.IconLocation.CENTER,l=Rt.included(s,t.IconLocation.LEFT,t.IconLocation.LEFT_EDGE),h=Rt.included(s,t.IconLocation.RIGHT,t.IconLocation.RIGHT_EDGE),u=Rt.included(s,t.IconLocation.TOP,t.IconLocation.TOP_EDGE),c=Rt.included(s,t.IconLocation.BOTTOM,t.IconLocation.BOTTOM_EDGE),d=Rt.included(s,t.IconLocation.LEFT_EDGE,t.IconLocation.RIGHT_EDGE,t.IconLocation.TOP_EDGE,t.IconLocation.BOTTOM_EDGE),p=e.style,f=a||l||h?"row":"column";f+=h||c?"-reverse":"",p.flexDirection=f,p.justifyContent=d?"start":"center",p.alignItems="center",(p=i.style).paddingTop=u&&d?n+"px":"",p.paddingBottom=c&&d?n+"px":"",(p=o.style).display=a?"none":"",p.paddingLeft=l?r+"px":"",p.paddingRight=h?r+"px":"",p.paddingTop=u?r+"px":"",p.paddingBottom=c?r+"px":"",p.flexGrow=d?"1":""},e.clearFlex=function(t){var e=t.style;e.removeProperty("display"),e.removeProperty("flex-direction"),e.removeProperty("justify-content"),e.removeProperty("align-items"),e.removeProperty("flex-grow"),e.removeProperty("flex-wrap"),e.removeProperty("gap")},e}(),Vr=function(t){var e=t.visible?1:0,i=t.footerCount;if((e+=Math.max(t.descendantCount,t.count)-i)>1)return!0;for(var o=0;o<i;o++)if(t.getFooter(o).visible&&++e>1)return!0;return!1},Br=function(t,e){return Vr(t)||t.footerCount>0||x(e)},jr=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.getShadowRow=function(){var t=this.parent.firstDataItem;return t?t.dataRow:-1},e}(Yo),Hr=function(t){function e(e,i){var o=t.call(this,i)||this;return o._level=0,o._level=e,o}return o(e,t),Object.defineProperty(e.prototype,"groupLevel",{get:function(){return this._level},enumerable:!1,configurable:!0}),e.prototype.getShadowRow=function(){var t=this.firstDataItem;return t?t.dataRow:-1},Object.defineProperty(e.prototype,"merged",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(Uo),Gr=function(e){function i(t){var i=e.call(this)||this;return i._fixedCount=0,i._items=[],i._rowCount=NaN,i._rs=t,i}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"provider",{get:function(){return this._rs},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedCount",{get:function(){return this._fixedCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){if(isNaN(this._rowCount)){for(var t=this._items,e=0,i=t.length-1;i>=0;i--)t[i]instanceof Go&&e++;this._rowCount=e}return this._rowCount},enumerable:!1,configurable:!0}),i.prototype.getItem=function(t){return this._items[t]},i.prototype.clear=function(t){void 0===t&&(t=null);for(var e=this._rs,i=0,o=(t=t||this._items).length;i<o;i++){var r=t[i];r._parent=e._rootItem,r._index=-1,r instanceof Uo&&r._children&&this.clear(r._children)}t.length=0,this.$_changed()},i.prototype.expand=function(t,e,i,o){return this.$_expandItem(t,e,i,o),this.$_changed(),!0},i.prototype.collapse=function(e,i){var o,r,n=this._rs,s=this._items;e._expanded=!1;var a=e.index;a>=0?(s.splice(a,1),e._index=-1):(a=this.$_firstIndex(e,n.expandedAdornments==t.RowGroupAdornments.SUMMARY,!0))<0&&(a=e.firstItem.index);var l=0;if(a>=0)for(;a+l<s.length;){var h=s[a+l];if(!h||!h.isDescendantOf(e))break;if(l++,h._index=-1,i&&(h instanceof Wo||h instanceof Yo)){var u=h instanceof Wo?h:h instanceof Yo&&h.parent._expanded?h.parent:null;u&&(u._expanded=!1)}}switch(s.splice(a,l),o=e.footerCount,n.collapsedAdornments){case t.RowGroupAdornments.BOTH:e._index=a,s.splice(a++,0,e);for(var c=0;c<o;c++)s.splice(a+c,0,r=e.getFooter(c)),r._index=a+c;break;case t.RowGroupAdornments.FOOTER:case t.RowGroupAdornments.SUMMARY:if(o)for(c=0;c<o;c++)s.splice(a+c,0,r=e.getFooter(c)),r._index=a+c;else for(c=0;c<e.allFooterCount;c++)s.splice(a+c,0,r=e._allFooters[c]),r._index=a+c;break;case t.RowGroupAdornments.HEADER:default:e._index=a,s.splice(a,0,e)}return this.$_changed(),!0},i.prototype.getNext=function(t){return null!=t&&t.visible&&t.index<this.count-1?this._items[t.index+1]:null},i.prototype.getPrior=function(t){return null!=t&&t.visible&&t.index>0?this._items[t.index-1]:null},i.prototype.$_changed=function(){this._rowCount=NaN},i.prototype.$_collectChildren=function(e,i,o,r,n){var s,a=this._rs,l=a.expandedAdornments,h=a.collapsedAdornments;if(r&&e&&e._setExpanded(!0),a.mergeMode){var u=void 0;if(!(e instanceof zo))if(l==t.RowGroupAdornments.HEADER||l==t.RowGroupAdornments.BOTH)i.push(e);else if(l==t.RowGroupAdornments.SUMMARY)for(var c=0,d=e.footerCount;c<d;c++)u=e.getFooter(c),i.push(u);for(var p=0,f=e.count;p<f;p++){if((y=e.getItem(p))instanceof Wo){var _=y;if(o&&(!n||_.level<=n)||_.expanded)this.$_collectChildren(_,i,o,r,n);else{var g=_.footerCount;switch(h){case t.RowGroupAdornments.BOTH:i.push(_);for(c=0;c<g;c++)u=_.getFooter(c),i.push(u);break;case t.RowGroupAdornments.SUMMARY:case t.RowGroupAdornments.FOOTER:if(g)for(c=0;c<g;c++)u=_.getFooter(c),i.push(u);else for(c=0;c<_.allFooterCount;c++)u=_._allFooters[c],i.push(u);break;case t.RowGroupAdornments.HEADER:default:i.push(_)}}}else e.isFooter(y)||i.push(y)}if(!(e instanceof zo)&&e.footer&&(l==t.RowGroupAdornments.FOOTER||l==t.RowGroupAdornments.BOTH))for(p=0,f=e.footerCount;p<f;p++)i.push(e.getFooter(p))}else{if(!(e instanceof zo))if(l==t.RowGroupAdornments.SUMMARY){u=e.footer,g=e.footerCount;if(u){c=e.indexOf(u);i.push(u);for(p=1;p<g;p++)u=e.getItem(c+p),i.push(u)}}else x(l)&&i.push(e);for(p=0,f=e.count;p<f;p++){var y;if((y=e.getItem(p))instanceof Wo){_=y,u=void 0,g=void 0;if(o&&(!n||_.level<=n)||_.expanded)this.$_collectChildren(_,i,o,r,n);else switch(h){case t.RowGroupAdornments.HEADER:i.push(_);break;case t.RowGroupAdornments.FOOTER:case t.RowGroupAdornments.SUMMARY:if(u=_.footer){if(g=_.footerCount,i.push(u),g>1){c=_.indexOf(u);for(var m=1;m<g;m++)u=_.getItem(c+m),i.push(u)}}else{g=_.allFooterCount;for(m=0;m<g;m++)u=_._allFooters[m],i.push(u)}break;case t.RowGroupAdornments.NONE:break;case t.RowGroupAdornments.BOTH:default:if(i.push(_),(u=_.footer)&&(g=_.footerCount,i.push(u),g>1))for(c=_.indexOf(u),m=1;m<g;m++)u=_.getItem(c+m),i.push(u)}}else y instanceof Yo||i.push(y)}if(!(e instanceof zo))if((s=l)==t.RowGroupAdornments.BOTH||s==t.RowGroupAdornments.FOOTER)if(u=e.footer){g=e.footerCount;if(i.push(u),g>1)for(c=e.indexOf(u),p=1;p<g;p++)u=e.getItem(c+p),i.push(u)}}},i.prototype.$_expandItem=function(e,i,o,r){var n;if(e instanceof zo)n=this._fixedCount;else{switch(this._rs.collapsedAdornments){case t.RowGroupAdornments.BOTH:this._items.splice(n=e.index,1+e.footerCount);break;case t.RowGroupAdornments.FOOTER:case t.RowGroupAdornments.SUMMARY:var s=e.footer;s?this._items.splice(n=s.index,e.footerCount):e.allFooterCount>0&&this._items.splice(n=e._allFooters[0].index,e.allFooterCount);break;case t.RowGroupAdornments.HEADER:default:this._items.splice(n=e.index,1)}o&&(e._index=-1)}var a=[];this.$_collectChildren(e,a,i,o,r),this._items=this._items.splice(0,n).concat(a).concat(this._items)},i.prototype.$_firstIndex=function(t,e,i){var o=t.index;if(o>=0)return o;for(var r=this._items,n=0,s=r.length;n<s;n++){var a=r[n];if(t.isDescendant(a))return a.index}return-1},i.prototype.$_clearAndInit=function(t,e){if(this.clear(),t){this._fixedCount=Math.min(e,t.itemCount);for(var i=0;i<this._fixedCount;i++)this._items.push(t.getItem(i))}else this._fixedCount=0},i.prototype.$_resetIndices=function(t){void 0===t&&(t=0);for(var e=t,i=this._items.length;e<i;e++)this._items[e]._index=e},i}(Lt),Wr=function(t,e){this.startIndex=t,this.endIndex=e,this.level=0,this.children=[]},Ur=function(e){function i(i,o){var r=e.call(this,i,o)||this;return r._expandedAdornments=t.RowGroupAdornments.BOTH,r._collapsedAdornments=t.RowGroupAdornments.HEADER,r._indentVisible=!0,r._expandWhenGrouping=!1,r._mergeMode=!1,r._groupSorting=!0,r._grouped=!1,r._groupCheckable=!0,r._footerCheckable=!0,r}return o(i,e),i.prototype._doDispose=function(){this._callbackOnwer=null,this._visibleItems=this._visibleItems.dispose(),e.prototype._doDispose.call(this)},i.prototype.groupfFooterCounterChanged=function(t){this.$_footerCounterChanged()},i.prototype.$_footerCounterChanged=function(){this._populateItems(),this._fireRefresh()},Object.defineProperty(i.prototype,"footerCounter",{get:function(){return this._footerCounter},set:function(t){t!=this._footerCounter&&(t&&t.setCounterAware(null),this._footerCounter=t,t&&t.setCounterAware(this),this.$_footerCounterChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandedAdornments",{get:function(){return this._expandedAdornments},set:function(t){t!=this._expandedAdornments&&(this._expandedAdornments=t,this.grouped&&(this._populateItems(),this._fireRefresh()))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapsedAdornments",{get:function(){return this._collapsedAdornments},set:function(t){t!=this._collapsedAdornments&&(this._collapsedAdornments=t,this.grouped&&(this._populateItems(),this._fireRefresh()))},enumerable:!1,configurable:!0}),i.prototype.resetAdornments=function(t,e,i){(i||e.expandedAdornments!=this._expandedAdornments||e.collapsedAdornments!=this._collapsedAdornments||e.indentVisible!=this._indentVisible)&&(this._expandedAdornments=e.expandedAdornments,this._collapsedAdornments=e.collapsedAdornments,this._callbackOnwer=t,this._footerCallback=e.createFooterCallback,this._valueForGroupCallback=e.valueForGroupCallback,this._indentVisible=e.indentVisible,this.grouped&&(this._populateItems(),this._fireRefresh()))},Object.defineProperty(i.prototype,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){this._expandWhenGrouping=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeMode",{get:function(){return this._mergeMode},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return this._summaryMode||Xe.groupSummaryMode||t.SummaryMode.AGGREGATE},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this._populateItems(),this._fireRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"grouped",{get:function(){return this._grouped},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupCount",{get:function(){return this._groupFields?this._groupFields.length:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupSorting",{get:function(){return this._groupSorting},set:function(t){this._groupSorting!=t&&(this._groupSorting=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibleRowCount",{get:function(){return this._visibleItems.rowCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"indentVisible",{get:function(){return this._indentVisible},enumerable:!1,configurable:!0}),i.prototype.canGrouping=function(t){return this.fireGrouping(t)},i.prototype.groupBy=function(t){this.groupByMode(t,this._mergeMode)},i.prototype.groupByMode=function(t,e){this._mergeMode=null!=e?e:this._mergeMode,this._groupFields=t?t.concat():null,e||this._clearDisplayLevels(),this._populateItems();try{this._fireRefresh()}finally{this.fireGrouped(t)}},i.prototype.isGroupedField=function(t){if(this._groupFields)for(var e=this._groupFields.length;e--;)if(this._groupFields[e]==t)return!0;return!1},i.prototype.getGroupLevel=function(t){if(this._groupFields&&t>=0)for(var e=this._groupFields.length;e--;)if(this._groupFields[e]==t)return e+1;return 0},Object.defineProperty(i.prototype,"groupedFields",{get:function(){return this._groupFields?this._groupFields.concat():null},enumerable:!1,configurable:!0}),i.prototype.expand=function(t,e,i,o){if(t&&(!t.expanded||i)&&this.fireExpand(t)&&(t.expanded&&this._visibleItems.collapse(t,!1),this._visibleItems.expand(t,e,!0,o)))try{this._fireRefresh()}finally{this.fireExpanded(t)}},i.prototype.$_collapseChild=function(t,e,i){for(var o=!1,r=0,n=t.count;r<n;r++){var s=t.getItem(r);if(s instanceof Uo){var a=Br(s,this.collapsedAdornments);t.expanded?a?this._visibleItems.collapse(s,e)&&(this._visibleItems.$_resetIndices(0),o=!0):this.$_collapseChild(s,e,i):a&&(s._expanded=!1,this.$_collapseChild(s,e,i))}}o&&this._fireRefresh()},i.prototype.collapse=function(t,e,i,o){var r=Br(t,this.collapsedAdornments);if(t&&t.expanded&&r){if(this.fireCollapse(t)&&this._visibleItems.collapse(t,e)){t&&e&&i&&this.$_collapseChild(t,e,i);try{this._fireRefresh()}finally{this.fireCollapsed(t,o)}}}else t&&e&&i&&this.$_collapseChild(t,e,i)},i.prototype.collapseAll=function(t){for(var e=0;e<this._rootItem.count;e++){var i=this._rootItem.getItem(e);i instanceof Wo&&this.collapse(i,t,!0,null)}},i.prototype.expandAll=function(t,e){for(var i=0;i<this._rootItem.count;i++){var o=this._rootItem.getItem(i);o instanceof Wo&&this.expand(o,t,!0,e)}},i.prototype.findItem=function(e,i,o,r,n){var s=this.dataSource;if(!s)return-1;var a=this.itemCount;if(a<1)return-1;var l=Math.min(e.length,i.length);if(l<1)return-1;var h=!o||o.allFields,u=o&&o.caseSensitive,c=o&&o.partialMatch,d=null,p=[],f=o.reverse;r=Math.max(0,r),n=Math.min(a-1,n);for(var _=0;_<l;_++)p[_]=s.getField(e[_]).dataType;var g=o.compareCallback;g="function"==typeof g?g:Rt.compareTextValue;for(var y=r;f?y>=n:y<=n;f?y--:y++){var m=this.$_getItem(y),b=m.dataRow,v=b>=0;if(v)for(_=0;_<l;_++){var w=m.getData(e[_]),C=s.getOrgFieldName(e[_]);switch(p[_]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(i[_]instanceof Date)v=g.call(s.handler,i[_],w,u,c,b,C);else{if(!d){var x=/[.]/.test(i[_])?"yyyy.MM.dd":/[/]/.test(i[_])?"yyyy/MM/dd":/[-]/.test(i[_])?"yyyy-MM-dd":"yyyyMMdd";d=new Ge(x)}v=g.call(s.handler,i[_],w?d.getText(w):w,u,c,b,C)}break;default:v=g.call(s.handler,i[_],w,u,c,b,C)}if(v&&!h)return y;if(!v&&h)break}if(v)return y}return-1},i.prototype.findCell=function(e,i,o,r,n,s){var a=this.dataSource;if(!a)return null;var l=this.itemCount;if(l<1)return null;var h=o.caseSensitive,u=o.partialMatch,c=a.fieldCount,d=e.length,p=o.reverse,f=null,_=[],g=o.compareCallback;g="function"==typeof g?g:Rt.compareTextValue;for(var y=0;y<c;y++)_[y]=a.getField(y).dataType;r=Math.max(0,r),n=Math.min(l-1,n),s=Math.max(p?-1:0,Math.min(s,d-1)),p?s<0&&(s=e.length-1,r--):s>=e.length&&(r++,s=0);for(var m=r;p?m>=n:m<=n;p?m--:m++){var b=this.$_getItem(m),v=b.dataRow;if(v>=0)for(y=p?m<r?d-1:s:m>r?0:s;p?y>=0:y<d;p?y--:y++){var w=e[y];if(w>=0&&w<c){var C=b.getData(w),x=a.getOrgFieldName(w),I=!1;switch(_[w]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(i instanceof Date)I=g.call(a.handler,i,C,h,u,v,x);else{if(!f){var S=/[.]/.test(i)?"yyyy.MM.dd":/[/]/.test(i)?"yyyy/MM/dd":/[-]/.test(i)?"yyyy-MM-dd":"yyyyMMdd";f=new Ge(S)}I=g.call(a.handler,i,C?f.getText(C):C,h,u,v,x)}break;default:I=g.call(a.handler,i,C,h,u,v,x)}if(I)return{itemIndex:m,fieldIndex:w,searchFieldIndex:y}}}}return null},i.prototype.getGroupItem=function(t){var e=function(i){for(var o=0,r=i.children.length;o<r;o++){var n=i.children[o];if(n.id===t)return n;if(n instanceof Uo){var s=e(n);if(s)return s}}};return t===this._rootItem.id?this._rootItem:e(this._rootItem)},Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._grouped?this._visibleItems.count:this.source.itemCount},enumerable:!1,configurable:!0}),i.prototype.getItem=function(t,e){return this.grouped&&!e?t>=0&&t<this._visibleItems.count?this._visibleItems.getItem(t):null:this.source.getItem(t,e)},i.prototype.getItems=function(t,e){if(this.grouped){for(var i=this._visibleItems,o=[],r=Math.min(i.count,t+e-1),n=t;n<r;n++){var s=i.getItem(n);o.push(s)}return o}return this.source.getItems(t,e)},i.prototype.getAllItems=function(){if(this.grouped){var t=new Gr(this);return t.expand(this.rootItem,!0,!1,0),t.items}return this.source?this.source.getAllItems():null},i.prototype.getIndexOfRow=function(t){if(this.grouped){for(var e=this._visibleItems,i=0,o=e.count;i<o;i++)if(e.getItem(i).dataRow==t)return i;return-1}return this.source.getIndexOfRow(t,!1)},i.prototype.getItemOfRow=function(t,e){if(this.grouped){for(var i=this._visibleItems,o=0,r=i.count;o<r;o++){var n=i.getItem(o);if(n.dataRow==t)return n}return null}return this.source.getItemOfRow(t,e)},i.prototype._initialize=function(){e.prototype._initialize.call(this),this._visibleItems=new Gr(this)},i.prototype._clearItems=function(){this._visibleItems.clear(),this.rootItem.clear()},i.prototype._populateItems=function(){this.$_populateItems(!1)},i.prototype._clearChecked=function(){this.grouped?this.$_checkChildren(this.rootItem,!1,!1,!1):e.prototype._clearChecked.call(this),this._editItem&&this._editItem._setChecked(!1)},i.prototype.$_groupCheckable=function(t,e,i){for(var o=0,r=t.count;o<r;o++){var n=t.getItem(o);n instanceof Yo&&n.setCheckable(i),n instanceof Wo&&(n.setCheckable(e),this.$_groupCheckable(n,e,i))}},i.prototype.setGroupCheckable=function(t,e){t==this._groupCheckable&&e==this._footerCheckable||(this._groupCheckable=t,this._footerCheckable=e,this.$_groupCheckable(this.rootItem,t,e))},i.prototype.checkAll=function(t,i,o,r,n){var s=this.dataSource;if(s)if(i||!this.grouped)e.prototype.checkAll.call(this,t,i,o,r,n);else{var a=this._visibleItems.fixedCount;if(a>0)if(o)for(var l=a;l--;){var h=this.getItem(l);h.checkable&&h._setChecked(t)}else for(l=a;l--;)this.getItem(l)._setChecked(t);var u=this.source._checkFieldIndex>-1;u&&s.beginUpdate();try{this.$_checkChildren(this.rootItem,t,o,n)}finally{u&&s.endUpdate(!1)}r?this._fireItemAllChecked(t):this._fireRefreshClient(),this._fireItemCheckChanged(null,t)}},i.prototype.getItemChecked=function(t,e){return this.source.getItemChecked(t,e)},i.prototype.setItemChecked=function(t,e){return this.source.setItemChecked(t,e)},i.prototype.getFirstRow=function(){for(var t=0,e=this._visibleItems.count;t<e;t++){var i=this._visibleItems.getItem(t);if(i instanceof Go)return i}},i.prototype.getLastRow=function(){for(var t=this._visibleItems.count-1;t>=0;t--){var e=this._visibleItems.getItem(t);if(e instanceof Go)return e}},i.prototype.getPrevRow=function(t){if(t){t.visible||(t=t.getVisibleAncestor());for(var e=t.index-1;e>=0;e--)if((t=this._visibleItems.getItem(e))instanceof Go)return t}return this.getFirstRow()},i.prototype.getNextRow=function(t){if(t){t.visible||(t=t.getVisibleAncestor());for(var e=t.index+1,i=this._visibleItems.count;e<i;e++)if((t=this._visibleItems.getItem(e))instanceof Go)return t}return this.getLastRow()},i.prototype.$_saveExpand=function(t,e){if(this.dataSource)for(var i=0,o=t.count;i<o;i++){var r=t.getItem(i);if(r instanceof Uo||r instanceof Hr){var n=r.firstItem._dataRowId,s=this.dataSource.getDataRow(n),a=r._groupField;s>=0&&a>=0&&(e[n]={expanded:r._expanded,children:[]},this.$_saveExpand(r,e[n].children))}}},i.prototype.$_restoreExpand=function(t,e){if(this.dataSource)for(var i=0,o=t.count;i<o;i++){var r=t.getItem(i);if(r instanceof Uo||r instanceof Hr){var n=r.firstItem._dataRowId,s=this.dataSource.getDataRow(n),a=r._groupField;s>=0&&a>=0&&e[n]&&(r._setExpanded(e[n].expanded),this.$_restoreExpand(r,e[n].children))}}},i.prototype.$_populateItems=function(t){if(this.dataSource){var e={},i=this.source.itemCount,o=this._rootItem;if(t&&i>0&&o&&this.$_saveExpand(o,e),this._clearItems(),this.source){if(this._groupFields){for(var r=this.dataSource.fieldCount,n=this._groupFields.length-1;n>=0;n--)this._groupFields[n]>=r&&this._groupFields.splice(n,1);this._grouped=this._groupFields.length>0}else this._grouped=!1;this._grouped&&i>0&&(this.$_buildGroupItems(i),t&&this.$_restoreExpand(o,e),this.$_resetVisibleItems())}}},i.prototype.$_checkChildren=function(t,e,i,o){for(var r=0,n=t.count;r<n;r++){var s=t.getItem(r);s&&(i?(o||s.isDataRow)&&s.checkable&&s._setChecked(e):s._setChecked(e)),s instanceof Wo&&this.$_checkChildren(s,e,i,o)}},i.prototype.$_getItem=function(t){return this._grouped?this._visibleItems.getItem(t):this.source.getItem(t)},i.prototype.$_resetVisibleItems=function(){this._visibleItems.$_clearAndInit(this.source,this.fixedCount),this.source&&this.source.itemCount>this._visibleItems.fixedCount&&this._visibleItems.expand(this.rootItem,!1,!1,0)},i.prototype.$_buildGroupItems=function(t){if(t>this.fixedCount){var e=new Wr(this.fixedCount,t-1);this.$_buildGroups(e,this.source,this._groupFields),this.$_buildItems(this.rootItem,e,this._groupFields),this.mergeMode&&(this._clearDisplayLevels(),this.$_resetDisplayLevels(this.rootItem))}},i.prototype.$_resetDisplayLevels=function(t){for(var e=0,i=t.count;e<i;e++){var o=Rt.cast(t.getItem(e),Wo);if(o){var r=Rt.cast(o.firstItem,Go);r&&r._displayLevel<0&&(r._displayLevel=o.level),this.$_resetDisplayLevels(o)}}},i.prototype.$_buildGroups=function(t,e,i){if(this.dataSource&&!(i.length<=t.level)){var o=t.startIndex,r=t.endIndex;if(!(r<o)){var n=t.level+1,s=i[t.level],a=this.dataSource.getField(s),l=new Wr(o,o);l.level=n,t.children.push(l);var h=!this.mergeMode&&this._valueForGroupCallback,u=e.getItem(o),c=u.getData(s);c=h?h.call(this._callbackOnwer,this._callbackOnwer,u.dataRow,a.orgFieldName,c):c;for(var d=o+1;d<=r;d++){var p=(u=e.getItem(d)).getData(s);p=h?h.call(this._callbackOnwer,this._callbackOnwer,u.dataRow,a.orgFieldName,p):p,a.equalValues(p,c)||(l&&(l.endIndex=d-1,l.groupValue=c),(l=new Wr(d,d)).level=n,t.children.push(l)),c=p}l&&(l.endIndex=r,l.groupValue=c);d=0;for(var f=t.children.length;d<f;d++)this.$_buildGroups(t.children[d],e,i)}}},i.prototype.$_buildItems=function(t,e,i){var o,r=this.mergeMode,n=e.children.length;if(n>0){o=e.level;for(var s=i[e.level],a=0;a<n;a++){var l=r?new Hr(o,s):new Uo(s);l._setExpanded(this.expandWhenGrouping),t.add(l),l._setCheckable(this._groupCheckable),l.groupValue=e.children[a].groupValue,this.$_buildItems(l,e.children[a],i)}}else{var h=e.endIndex-e.startIndex+1,u=this.source.getItems(e.startIndex,h);t.addAll(u),this._incDescendents(t,h)}if((o=t.level)>0){var c=this._callbackOnwer,d=this._footerCallback;if(this._footerCounter)for(var p=0,f=(a=0,this._footerCounter.getGroupFooterCount(t));a<f;a++){var _=!(!d||d(c,t,a));(g=r?new jr:new Yo).$_footerIndex=a,g.$_vindex=_?-1:p++,g.hiddenFooter=_,t.add(g),g._setCheckable(this._groupCheckable&&this._footerCheckable)}else if(d||d(c,t,0)){var g=r?new jr:new Yo;t.add(g)}}},i.prototype.$_setEditItem=function(t){this._editItem=t},i.prototype.$_setDummyEditItem=function(t){this._dummyEditItem=t},i.prototype.fireGrouping=function(t){return this.fireConfirmEvent(i.GROUPING,t)},i.prototype.fireGrouped=function(t){this.fireEvent(i.GROUPED)},i.prototype.fireExpand=function(t){return this.fireConfirmEvent(i.EXPAND,t)},i.prototype.fireExpanded=function(t){this.fireEvent(i.EXPANDED,t)},i.prototype.fireCollapse=function(t){return this.fireConfirmEvent(i.COLLAPSE,t)},i.prototype.fireCollapsed=function(t,e){this.fireEvent(i.COLLAPSED,t,e)},i.prototype.onItemProviderRefresh=function(t){this._grouped&&(this.$_populateItems(!0),this._fireRefresh())},i.GROUPING="onGroupedItemProviderGrouping",i.GROUPED="onGroupedItemProviderGrouped",i.EXPAND="onGroupedItemProviderExpand",i.EXPANDED="onGroupedItemProviderExpanded",i.COLLAPSE="onGroupedItemProviderCollapse",i.COLLAPSED="onGroupedItemProviderCollapsed",i}(Ko),Yr=function(){this.commit=!0,this.value=void 0},zr=function(t){function e(){var e=t.call(this)||this;return e._refreshFocusChanged=!1,e._clickOnlyFocusedCell=!0,e._textProp=Rt.TextProp,e._inited=!1,e._dirty=!1,e._className="",e._itemClickable=!1,e}return o(e,t),e.prototype._doDispose=function(){this._dom=null,this._index=null,t.prototype._doDispose.call(this)},e.prototype.clearAndDispose=function(){return this.clearContent(),this.dispose()},e.prototype.initContent=function(t,e,i){this._inited?this._index.assign(t):(this._dom=e,this._index=t.clone(),e.className=this._className=i,e&&(e[Rt.TextProp]=""),this._doInitContent(e),this._inited=!0)},e.prototype.clearContent=function(){this._inited?(this._doClearContent(this._dom),this._dom.className=this._className="",this._inited=!1):this._dom[this._textProp]=""},e.prototype.checkClassName=function(t){return t!=this._className},e.prototype.initOptions=function(){this._doInitOptions()},Object.defineProperty(e.prototype,"grid",{get:function(){return this._index&&this._index.grid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return"rg-renderer"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){this._showTooltip=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tooltipEllipsisOnly",{get:function(){return this._tooltipEllipsisOnly},set:function(t){this._tooltipEllipsisOnly=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ariaLabelCallback",{get:function(){return this._ariaLabelCallback},set:function(t){this._ariaLabelCallback=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshFocusChanged",{get:function(){return this._refreshFocusChanged},set:function(t){this._refreshFocusChanged=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clickOnlyFocusedCell",{get:function(){return this._clickOnlyFocusedCell},set:function(t){this._clickOnlyFocusedCell=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemClickable",{get:function(){return this._itemClickable},enumerable:!1,configurable:!0}),e.prototype.renderCell=function(t,e,i){if(t.accessibility){var o=this._ariaLabelCallback||t.body.ariaLabelCallback,r=o&&o.call(this,t.handler,e);r?i.cell.setAttribute("aria-label",r):i.cell.removeAttribute("aria-label")}this._doRenderCell(t,e,i,i.width-i.$_errorWidth-i.$_buttonWidth-i.$_editWidth-1,i.height-1)},e.prototype.tooltip=function(t,e){},e.prototype.getTooltip=function(t,e){var i=e.grid,o=i.body,r=e.column,n=o.getCellAt(t.item,r),s=this.tooltip(n,e);return(s=s||n&&this._makeText(i,n,t))||void 0},e.prototype.canShowInnerFocus=function(){return!1},e.prototype.canEdit=function(){return!1},e.prototype.canEditClickAt=function(t){return!1},e.prototype.preventDefaultEditClick=function(t){t.preventDefault()},e.prototype.editClick=function(t,e){var i=new Yr;if(this._doEditClick(t,e,i))return i},e.prototype._doEditClick=function(t,e,i){return!1},e.prototype.preventDefaultClick=function(t){t.preventDefault()},e.prototype.canClick=function(t){return!1},e.prototype.canClickSpaceKey=function(t){return!1},e.prototype.click=function(t,e,i){return this._doClick(t,e,i)},e.prototype.itemClick=function(t){this._doItemClick(t)},e.prototype._doItemClick=function(t){},e.prototype._doClick=function(t,e,i){},e.prototype.canEditKey=function(t){return!1},e.prototype.editKey=function(t,e){var i=new Yr;if(this._doEditKey(t,e,i))return i},e.prototype._doEditKey=function(t,e,i){return!1},e.prototype.moveClickElement=function(t,e){},e.prototype._doInitContent=function(t){},e.prototype._doClearContent=function(t){t&&(t[this._textProp]="")},e.prototype._doRenderCell=function(t,e,i,o,r){},e.prototype._changed=function(){this._dirty=!0},e.prototype._getValue=function(t,e,i){var o=e.item.dataRow;if(o>=0){var r=t.dataSource.getFieldIndex(i);if(r>=0)return t.dataSource.getValue(o,r)}},e.prototype._makeText=function(t,e,i){var o;return e instanceof br?o=e.getDisplayText(t,i)||e.dataColumn.placeHolder:e instanceof Cr?o=e.getDisplayText(t,this.index.seriesColumn.valueSeparator):e instanceof wr&&(o=e.getDisplayText(t,i)),o||""},e.prototype._clearHeight=function(){this._dom.style.height=""},e.prototype._setHeight=function(t){this._dom.style.height=t>=0?t+"px":""},e.prototype._isEmpty=function(t){return null==t||""==t||"number"==typeof t&&isNaN(t)},e.prototype._doInitOptions=function(){},e}(Lt),qr=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),e.prototype._doRenderCell=function(t,e,i,o,r){if(e instanceof mr)if(e.index.itemIndex!==t.layoutManager.topIndex){var n=t.blankGroupData()&&t.isGroupedColumn(e.index.dataColumn);switch(e.getBlankState(n)){case E.BODY:case E.TAIL:return this.$_setText(e.dataColumn.equalBlankText);default:this.$_setText(this._makeText(t,e,i))}}else this.$_setText(this._makeText(t,e,i))},e.prototype.$_setText=function(t){this._dom[this._textProp]=t||""},e.TYPE="text",e.Default=new e,e}(zr);t.BarOrigin=void 0,(nr=t.BarOrigin||(t.BarOrigin={})).DEFAULT="default",nr.LEFT="left",nr.RIGHT="right",nr.TOP="top",nr.BOTTOM="bottom";var Kr,Xr=function(e){function i(){var o=e.call(this)||this;return o._barStyle=i.BAR_STYLE,o._rightBarStyle=i.BAR_RIGHT_STYLE,o._topBarStyle=i.BAR_TOP_STYLE,o._bottomBarStyle=i.BAR_BOTTOM_STYLE,o._minimum=0,o._maximum=100,o._barWidth="80%",o._showLabel=!0,o._origin=t.BarOrigin.LEFT,o._absoluteValue=!1,o._textOffset=5,o._negativeStyle=i.BAR_NEGATIVE_STYLE,o._percentShapeWidth=80,o}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype._doInitOptions=function(){this._barStyle=i.BAR_STYLE,this._rightBarStyle=i.BAR_RIGHT_STYLE,this._topBarStyle=i.BAR_TOP_STYLE,this._bottomBarStyle=i.BAR_BOTTOM_STYLE,this._negativeStyle=i.BAR_NEGATIVE_STYLE,this._origin=t.BarOrigin.LEFT,this._baseValue=void 0,this._minimum=0,this._maximum=100},Object.defineProperty(i.prototype,"barStyle",{get:function(){return this._barStyle},set:function(t){this._barStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightBarStyle",{get:function(){return this._rightBarStyle},set:function(t){this._rightBarStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topBarStyle",{get:function(){return this._topBarStyle},set:function(t){this._topBarStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottomBarStyle",{get:function(){return this._bottomBarStyle},set:function(t){this._bottomBarStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minimum",{get:function(){return this._minimum},set:function(t){this._minimum=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maximum",{get:function(){return this._maximum},set:function(t){this._maximum=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showLabel",{get:function(){return this._showLabel},set:function(t){this._showLabel=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"barWidth",{get:function(){return this._barWidth},set:function(t){t!=this._barWidth&&(this._barWidth=t,"string"==typeof t&&"%"==t.charAt(t.length-1)?this._percentShapeWidth=parseFloat(t.substring(0,t.length-1)):this._percentShapeWidth=NaN)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"origin",{get:function(){return this._origin},set:function(t){this._origin=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"absoluteValue",{get:function(){return this._absoluteValue},set:function(t){this._absoluteValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"baseValue",{get:function(){return this._baseValue},set:function(t){this._baseValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textOffset",{get:function(){return this._textOffset},set:function(t){this._textOffset=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"negativeStyle",{get:function(){return this._negativeStyle},set:function(t){this._negativeStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!1,configurable:!0}),i.prototype._doInitContent=function(t){var e,i,o=St(t);t[this._textProp]="",(e=this._div=o.createElement("div")).style.position="relative",t.appendChild(e);var r=(i=this._span=o.createElement("span")).style;r.display="inline-block",r.position="absolute",t.appendChild(i)},i.prototype._doRenderCell=function(e,o,r,n,s){var a,l=this._div,h=l.style,u=this._minimum,c=this._maximum,d=Rt.included(this._origin,t.BarOrigin.LEFT,t.BarOrigin.BOTTOM)?this._baseValue:NaN,p=Math.min(c,Math.max(u,o.value));switch(isNaN(d)&&this._absoluteValue&&(p=this._absoluteValue?Math.abs(o.value):o.value),isNaN(d)?(a=Math.min(1,(p-this._minimum)/(this._maximum-this._minimum)),this._middlePosition=NaN):(a=Math.min(1,(p-d)/(c-u)),this._middlePosition=(d-u)/(c-u)),isNaN(a)&&(a=0),this._origin){case t.BarOrigin.RIGHT:this.$_renderBar(t.BarOrigin.RIGHT,h,a),l.className=this.rightBarStyle||i.BAR_RIGHT_STYLE;break;case t.BarOrigin.TOP:this.$_renderBar(t.BarOrigin.TOP,h,a),l.className=this.topBarStyle||i.BAR_TOP_STYLE;break;case t.BarOrigin.BOTTOM:this.$_renderBar(t.BarOrigin.BOTTOM,h,a),l.className=!isNaN(d)&&p<d?this.negativeStyle:this.bottomBarStyle||i.BAR_BOTTOM_STYLE;break;case t.BarOrigin.LEFT:default:this.$_renderBar(t.BarOrigin.LEFT,h,a),l.className=!isNaN(d)&&p<d?this.negativeStyle:this.barStyle||i.BAR_STYLE}this.$_setText(this._showLabel?this._makeText(e,o,r):"",n,s/2,a)},i.prototype.$_renderBar=function(e,i,o){i.removeProperty("transform"),i.removeProperty("ms-transform");var r=this._middlePosition;if(e===t.BarOrigin.LEFT||e===t.BarOrigin.RIGHT)if(isNaN(r)?(i.left=e===t.BarOrigin.LEFT?"0px":100*(1-o)+"%",i.width=100*o+"%"):(i.left=o<0?100*(r+o)+"%":100*r+"%",i.width=100*Math.abs(o)+"%"),isNaN(this._percentShapeWidth)){var n=this._barWidth;i.top="50%",i.msTransform=i.transform="translate(0%,-50%)",i.height=n+"px"}else i.top=(100-this._percentShapeWidth)/2+"%",i.height=this._percentShapeWidth+"%";else if(isNaN(r)?(i.top=e===t.BarOrigin.TOP?"0px":100*(1-o)+"%",i.height=100*o+"%"):(i.top=o<0?100*r+"%":100*(r-o)+"%",i.height=100*Math.abs(o)+"%"),isNaN(this._percentShapeWidth)){var s=this._barWidth;i.left="50%",i.msTransform=i.transform="translate(-50%,0%)",i.width=s+"px"}else i.left=(100-this._percentShapeWidth)/2+"%",i.width=this._percentShapeWidth+"%"},i.prototype.$_setText=function(e,i,o,r){if(this._span[this._textProp]=e||"",e){var n=this._span.style,s=this._middlePosition,a=this._textOffset;if(n.removeProperty("right"),n.removeProperty("left"),n.removeProperty("top"),n.removeProperty("bottom"),n.transform="translate(50%, -50%)",this.origin!==t.BarOrigin.LEFT||isNaN(s)||0===this._textOffset)n.right="50%";else{var l=4*(2*s-1);r<0?n.left="".concat(i*s+a-l,"px"):n.right="".concat(i-i*s+a+l,"px"),n.transform="translate(0px, -50%)"}if(this.origin!==t.BarOrigin.BOTTOM||isNaN(s)||0===this._textOffset)n.top="50%";else{var h=o+this._textOffset+"px";r<0?n.bottom=h:n.top=h,n.transform="translate(50%, ".concat(r<0?"":"-","100%)")}}},i.TYPE="bar",i.STYLE="rg-bar-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.BAR_STYLE="rg-bar-renderer-bar",i.BAR_RIGHT_STYLE="rg-bar-renderer-bar-right",i.BAR_TOP_STYLE="rg-bar-renderer-bar-top",i.BAR_BOTTOM_STYLE="rg-bar-renderer-bar-bottom",i.BAR_NEGATIVE_STYLE="rg-bar-renderer-bar-negative",i}(zr),Zr=function(t){function e(){var e=t.call(this)||this;return e._spaceKey=!1,e._enterKey=!1,e._itemClickable=!0,e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"imageMap",{get:function(){return this._imageMap},set:function(t){t!==this._imageMap&&(this._imageMap=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imageCallback",{get:function(){return this._imageCallback},set:function(t){t!==this._imageCallback&&(this._imageCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imageField",{get:function(){return this._imageField},set:function(t){t!=this._imageField&&(this._imageField=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"titleField",{get:function(){return this._titleField},set:function(t){t!=this._titleField&&(this._titleField=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"titleCallback",{get:function(){return this._titleCallback},set:function(t){t!==this._titleCallback&&(this._titleCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imageHeight},set:function(t){this._imageHeight=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imageWidth},set:function(t){this._imageWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enterKey",{get:function(){return this._enterKey},set:function(t){this._enterKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!1,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._img=St(t).createElement("img");e.style.verticalAlign="middle",t.appendChild(e)},e.prototype._doRenderCell=function(t,e,i,o,r){var n=this._img,s=this.$_getImageUrl(t,e);if(s){n.src=s;var a=this.$_getTitle(t,e);n.alt=a||"",isNaN(this._imageHeight)?n.style.removeProperty("height"):n.style.height=this._imageHeight+"px",isNaN(this._imageWidth)?n.style.removeProperty("width"):n.style.width=this._imageWidth+"px"}else n.removeAttribute("src"),n.alt=""},e.prototype.canClick=function(t){return t.target===this._img},e.prototype._doClick=function(t,e,i){if(e.target===this._img||"keydown"===e.type)return{type:this.type,value:t.value}},e.prototype._doItemClick=function(){this._img.click()},e.prototype.canClickSpaceKey=function(t){return(this.spaceKey&&32==t.keyCode||this.enterKey&&13===t.keyCode)&&!Rt.specialKey(t)},e.prototype._doInitOptions=function(){this._imageMap=this._imageCallback=this._imageField=this._titleField=this._titleCallback=this._imageHeight=void 0,this._imageWidth=void 0},e.prototype.$_getImageUrl=function(t,e){var i="",o=this._imageCallback;return o&&(i=o.call(this,t.handler,e)),!i&&this._imageMap&&(i=this._imageMap[e.value]),!i&&this._imageField&&(i=this._getValue(t,e,this._imageField)),i||""},e.prototype.$_getTitle=function(t,e){var i="",o=this._titleCallback;return o&&(i=o.call(this,t.handler,e)),!i&&this._titleField&&(i=this._getValue(t,e,this._titleField)),i||""},e.TYPE="image",e.STYLE="rg-image-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(zr),Jr=function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var o=t.call(this)||this;return o._itemGap=4,o._verticalEdgePad=2,o._textVisible=!0,o._reversed=!1,o._splitted=!1,o._imgFixed=!1,o._imgMiddle=!1,o._imgCenter=!1,o._imgHeight=16,o._imgWidth=16,o._imgLeft=0,o._imgRight=0,o._imgTop=0,o._imgBottom=0,o._spanVis=void 0,o._spanPadRight=0,o._spanPadLeft=0,o._spanCenter=!1,o._spanText="",o._imgWidth=e,o._imgHeight=i,o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticalEdgePad",{get:function(){return this._verticalEdgePad},set:function(t){t!=this._verticalEdgePad&&(this._verticalEdgePad=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textVisible",{get:function(){return this._textVisible},set:function(t){t!=this._textVisible&&(this._textVisible=t,this._changed())},enumerable:!1,configurable:!0}),e.prototype._doClearContent=function(e){t.prototype._doClearContent.call(this,e),this._reset()},e.prototype._reset=function(){this._oldLocation=void 0,this._imgHeight=this._imgWidth=this._imgLeft=this._imgRight=this._imgTop=this._imgBottom=this._spanPadRight=this._spanPadLeft=NaN,this._imgFixed=this._imgMiddle=this._imgCenter=this._spanVis=this._spanCenter=this._spanText=void 0,this._dom&&(this._dom[Rt.TextProp]="")},e.prototype.$_setImgFixed=function(t,e,i){(e!=this._imgFixed||i)&&(this._imgFixed=e,t.style.position=e?"absolute":"")},e.prototype.$_setImgMiddle=function(t,e,i){(e!=this._imgMiddle||i)&&(this._imgMiddle=e,t.style.verticalAlign=e?"middle":"")},e.prototype.$_setImgCenter=function(t,e,i){(e!=this._imgCenter||i)&&(this._imgCenter=e,t.style.textAlign=e?"center":"")},e.prototype.$_setImgWidth=function(t,e,i){((e=isNaN(e)?0:e)!=this._imgWidth||i)&&(this._imgWidth=e,t.style.width=e>0?e+"px":"")},e.prototype.$_setImgHeight=function(t,e,i){((e=isNaN(e)?0:e)!=this._imgHeight||i)&&(this._imgHeight=e,t.style.height=e>0?e+"px":"")},e.prototype.$_setImgBounds=function(t,e,i,o,r,n){(e!=this._imgTop||n)&&(this._imgTop=e,t.style.top=e>0?e+"px":""),(i!=this._imgLeft||n)&&(this._imgLeft=i,t.style.left=i>0?i+"px":""),(o!=this._imgBottom||n)&&(this._imgBottom=o,t.style.bottom=o>0?o+"px":""),(r!=this._imgRight||n)&&(this._imgRight=r,t.style.right=r>0?r+"px":"")},e.prototype.$_clearImgBounds=function(t,e){(this._imgTop>0||e)&&(this._imgTop=0,t.style.top=""),(this._imgLeft>0||e)&&(this._imgLeft=0,t.style.left=""),(this._imgBottom>0||e)&&(this._imgBottom=0,t.style.bottom=""),(this._imgRight>0||e)&&(this._imgRight=0,t.style.right="")},e.prototype.$_setSpanVis=function(t){t!=this._spanVis&&(this._spanVis=t,this._span.style.display=t?"":"none",this.grid.accessibility&&(t?this._span.removeAttribute("aria-hidden"):this._span.setAttribute("aria-hidden","true")))},e.prototype.$_setSpanPadLeft=function(t){t!=this._spanPadLeft&&(this._spanPadLeft=t,this._span.style.paddingLeft=t>0?t+"px":"")},e.prototype.$_setSpanPadRight=function(t){t!=this._spanPadRight&&(this._spanPadRight=t,this._span.style.paddingRight=t>0?t+"px":"")},e.prototype.$_setSpanCenter=function(t,e){if(void 0===e&&(e=0),t!=this._spanCenter){var i=this._span.style;this._spanCenter=t,t?(i.left="50%",i.top=50+e+"%",i.transform="translate(-50%, -50%)",i.position="absolute"):(i.left="",i.top="",i.transform="",i.position="")}},e.prototype.$_setSpanText=function(t){if(t!=this._spanText){this._spanText=t;var e=this._textVisible?this._spanText:void 0;this._span[this._textProp]=e}},e.prototype.$_layoutLeft=function(t,e,i,o){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!0,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(this._itemGap),this.$_setSpanPadRight(0)},e.prototype.$_layoutRight=function(t,e,i,o){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!0,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(4)},e.prototype.$_layoutTop=function(t,e,i,o){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted||(t.insertBefore(this._br,i),this._splitted=!0),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!1,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},e.prototype.$_layoutBottom=function(t,e,i,o){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted||(t.insertBefore(this._br,e),this._splitted=!0),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!1,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},e.prototype.$_layoutLeftEdge=function(t,e,i,o,r){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!0,r),this.$_setImgMiddle(e,!0,r),this.$_setImgCenter(e,!1,r),this.$_setImgBounds(e,0,2,0,0,r),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0),i.style.marginLeft=isNaN(o)?"":o+"px"},e.prototype.$_layoutRightEdge=function(t,e,i,o,r){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!0,r),this.$_setImgMiddle(e,!0,r),this.$_setImgCenter(e,!1,r),this.$_setImgBounds(e,0,0,0,2,r),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(o)},e.prototype.$_layoutTopEdge=function(t,e,i,o,r,n,s,a){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted||(t.insertBefore(this._br,i),this._splitted=!0),this.$_setImgFixed(e,!0,a),this.$_setImgMiddle(e,!1,a),this.$_setImgCenter(e,!1,a),this.$_setImgBounds(e,2,(o-n)/2,0,0,a),this.$_setSpanVis(!0),this.$_setSpanCenter(!0,s*((r-s)/r)),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},e.prototype.$_layoutBottomEdge=function(t,e,i,o,r,n,s,a){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted||(t.insertBefore(this._br,e),this._splitted=!0),this.$_setImgFixed(e,!0,a),this.$_setImgMiddle(e,!1,a),this.$_setImgCenter(e,!0,a),this.$_setImgBounds(e,0,(o-n)/2,2,0,a),this.$_setSpanVis(!0),this.$_setSpanCenter(!0,(r-s)/r*-s),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},e.prototype.$_layoutCenter=function(t,e,i,o){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!0,o),this.$_setImgCenter(e,!0,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!1),this.$_setSpanCenter(!0),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},e}(zr),Qr=function(e){function i(){var i=e.call(this)||this;return i._iconWidth=NaN,i._iconHeight=NaN,i._iconLocation=t.IconLocation.LEFT,i._spaceKey=!1,i._enterKey=!1,i._imgSrc="",i._itemClickable=!0,i}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"iconMap",{get:function(){return this._iconMap},set:function(t){t!==this._iconMap&&(this._iconMap=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconCallback",{get:function(){return this._iconCallback},set:function(t){t!==this._iconCallback&&(this._iconCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"titleCallback",{get:function(){return this._titleCallback},set:function(t){this._titleCallback=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconUrl",{get:function(){return this._iconUrl},set:function(t){this._iconUrl=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconField",{get:function(){return this._iconField},set:function(t){t!=this._iconField&&(this._iconField=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconLocation",{get:function(){return this._iconLocation},set:function(t){t!=this._iconLocation&&(this._oldLocation=this._iconLocation,this._iconLocation=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconWidth",{get:function(){return this._iconWidth},set:function(t){t!=this._iconWidth&&(this._iconWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconHeight",{get:function(){return this._iconHeight},set:function(t){t!=this._iconHeight&&(this._iconHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enterKey",{get:function(){return this._enterKey},set:function(t){this._enterKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME+" rg-icon-"+this.$_getStyleName().toLowerCase()},enumerable:!1,configurable:!0}),i.prototype._doInitContent=function(t){var e=St(t),i=this._img=e.createElement("img");i.alt="",t.appendChild(i);var o=this._span=e.createElement("span");t.appendChild(o),this._br=e.createElement("br")},i.prototype._reset=function(){e.prototype._reset.call(this),this._imgSrc=this._splitted=this._reversed=void 0},i.prototype._doInitOptions=function(){this._iconMap=this._iconCallback=this._titleCallback=this._iconUrl=this._iconField=void 0,this._iconWidth=this._iconHeight=NaN,this._iconLocation=t.IconLocation.LEFT},i.prototype._doRenderCell=function(e,i,o,r,n){var s=this._img,a=this._span;if(this.$_setImgWidth(s,this._iconWidth,!1),this.$_setImgHeight(s,this._iconHeight,!1),this.$_setImgSrc(this.$_getIconUrl(e,i),this.$_getTitle(e,i)),this.$_setSpanText(this._makeText(e,i,o)),this._oldLocation!=this._iconLocation){switch(this._iconLocation){case t.IconLocation.LEFT:this.$_layoutLeft(this._dom,s,a,!1);break;case t.IconLocation.RIGHT:this.$_layoutRight(this._dom,s,a,!1);break;case t.IconLocation.TOP:this.$_layoutTop(this._dom,s,a,!1);break;case t.IconLocation.BOTTOM:this.$_layoutBottom(this._dom,s,a,!1);break;case t.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(this._dom,s,a,this._iconWidth,!1);break;case t.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(this._dom,s,a,this._iconWidth,!1);break;case t.IconLocation.TOP_EDGE:this.$_layoutTopEdge(this._dom,s,a,r,n,this._iconWidth,this._iconHeight,!1);break;case t.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(this._dom,s,a,r,n,this._iconWidth,this._iconHeight,!1);break;case t.IconLocation.CENTER:this.$_layoutCenter(this._dom,s,a,!1);break;default:this.$_layoutLeft(this._dom,s,a,!1)}this._oldLocation=this._iconLocation}this._iconLocation==t.IconLocation.TOP_EDGE||this._iconLocation==t.IconLocation.BOTTOM_EDGE?this._setHeight(n):this._clearHeight()},i.prototype.canClick=function(t){return t.target===this._img},i.prototype.canClickSpaceKey=function(t){return(this.spaceKey&&32==t.keyCode||this.enterKey&&13===t.keyCode)&&!Rt.specialKey(t)},i.prototype._doClick=function(t,e,i){var o={};if(e.target===this._img||"keydown"===e.type)return o.type=this.type,o.value=t.value,o},i.prototype._doItemClick=function(){this._img.click()},i.prototype.$_getIconUrl=function(t,e){var i=void 0,o=this._iconCallback;return o&&(i=o.call(this,t.handler,e)),void 0===i&&this._iconMap&&(i=this._iconMap[e.value]),void 0===i&&this._iconField&&(i=this._getValue(t,e,this._iconField)),void 0===i&&(i=this._iconUrl),i||""},i.prototype.$_getTitle=function(t,e){var i,o=this._titleCallback;return o&&(i=o.call(this,t.handler,e)),i||""},i.prototype.$_setImgSrc=function(t,e){t==this._imgSrc&&e===this._img.alt||(this._imgSrc=t,t?(this._img.src=t,this._img.alt=e):(this._img.removeAttribute("src"),this._img.alt=""))},i.prototype.$_getStyleName=function(){return String(this._iconLocation)||String(t.IconLocation.LEFT)},i.prototype.preventDefaultClick=function(t){t.target===this._img&&(t.preventDefault(),t.stopImmediatePropagation())},i.TYPE="icon",i.STYLE="rg-icon-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i}(Jr),tn=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return o(i,e),i.prototype._doInitContent=function(t){e.prototype._doInitContent.call(this,t),t.style.setProperty("display","flex","important")},i.prototype._doClearContent=function(t){e.prototype._doClearContent.call(this,t),Ar.clearFlex(t)},i.prototype.$_layoutLeft=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.LEFT)},i.prototype.$_layoutRight=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.RIGHT)},i.prototype.$_layoutTop=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.TOP)},i.prototype.$_layoutBottom=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.BOTTOM)},i.prototype.$_layoutLeftEdge=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.LEFT_EDGE)},i.prototype.$_layoutRightEdge=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.RIGHT_EDGE)},i.prototype.$_layoutTopEdge=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.TOP_EDGE)},i.prototype.$_layoutBottomEdge=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.BOTTOM_EDGE)},i.prototype.$_layoutCenter=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.CENTER)},i}(Qr),en=function(e){function i(){var o=e.call(this,16,16)||this;return o._strictValue=!1,o._threeStates=!1,o._checkLocation=t.IconLocation.CENTER,o._useImages=!1,o._checkedStyle=i.CHECKED_STYLE,o._uncheckedStyle=i.UNCHECKED_STYLE,o._intermediateStyle=i.INTERMEDIATE_STYLE,o._editable=!0,o._spaceKey=!0,o._enterKey=!1,o._showInnerFocus=!1,o._oldUsed=!1,o._useChanged=!1,o._values={},o.refreshFocusChanged=!0,o}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"getCheckedCallback",{get:function(){return this._getCheckedCallback},set:function(t){t!==this._getCheckedCallback&&(this._getCheckedCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"setCheckedCallback",{get:function(){return this._setCheckedCallback},set:function(t){t!==this._setCheckedCallback&&(this._setCheckedCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trueValues",{get:function(){return this._trueValues},set:function(t){t!==this._trueValues&&(this._trueValues=t,this.$_resetValues(),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"falseValues",{get:function(){return this._falseValues},set:function(t){t!==this._falseValues&&(this._falseValues=t,this.$_resetValues(),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"strictValue",{get:function(){return this._strictValue},set:function(t){t!=this._strictValue&&(this._strictValue=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"threeStates",{get:function(){return this._threeStates},set:function(t){t!=this._threeStates&&(this._threeStates=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enterKey",{get:function(){return this._enterKey},set:function(t){this._enterKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkLocation",{get:function(){return this._checkLocation},set:function(t){t!=this._checkLocation&&(this._checkLocation=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useImages",{get:function(){return this._useImages},set:function(t){t!=this._useImages&&(this._useImages=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},set:function(t){this._editable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showInnerFocus",{get:function(){return this._showInnerFocus},set:function(t){this._showInnerFocus=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clickOnlyFocusedCell",{get:function(){return!this.grid.editOptions.commitByCell||this._clickOnlyFocusedCell},set:function(t){this._clickOnlyFocusedCell=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"readOnlySetDisabled",{get:function(){return this._readOnlySetDisabled},set:function(t){t!=this._readOnlySetDisabled&&(this._readOnlySetDisabled=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!1,configurable:!0}),i.prototype.canEdit=function(){var t=this.grid.editOptions;if(t.columnEditableFirst){if(!(null!=this.editable?this.editable:t.editable))return!1}else if(!t.editable||!this.editable)return!1;return this._editable},i.prototype.canShowInnerFocus=function(){return this._showInnerFocus&&this._editable},i.prototype._doInitContent=function(t){var e=St(t),i=this._check=e.createElement("input");i.type="checkbox",i.tabIndex=-1,i.style.display="inline-block";var o=this._span=e.createElement("label");t.appendChild(i),t.appendChild(o);var r=this._image=e.createElement("span");r.className=this._checkedStyle,r.role="checkbox",r.ariaChecked="false",r.tabIndex=-1,r.style.display="inline-block",this._br=e.createElement("br")},i.prototype._reset=function(){e.prototype._reset.call(this),this._splitted=this._reversed=void 0,this._oldUsed=!1},i.prototype._doRenderCell=function(e,o,r,n,s){var a=this._check,l=this._image,h=this._span,u=this._dom,c=a;this._imgWidth=e.container.measureCheckWidth(),this._imgHeight=e.container.measureCheckHeight();var d=this.$_getChecked(e,o.value,o.index,this._getCheckedCallback),p=a.id="".concat(i.FOR_ID,"-").concat(o.dataColumn.$_hash,"-").concat(o.item.index);if(h.setAttribute("for",p),a.checked=d,a.indeterminate=this._threeStates&&void 0===d,a.disabled=this._readOnlySetDisabled&&!this.canEdit(),this._useChanged=this._useImages!==this._oldUsed,this._useChanged&&(this._oldUsed?(u.removeChild(l),this._check.style.display="inline-block"):(u.insertBefore(l,this._check),this._check.style.display="none")),this._oldUsed=this._useImages,this._useImages&&(d?(l.className=this._checkedStyle,l.ariaChecked="true"):void 0===d&&this.threeStates?(l.className=this._intermediateStyle,l.ariaChecked="mixed"):(l.className=this._uncheckedStyle,l.ariaChecked="false"),this._readOnlySetDisabled&&!this.canEdit()?(l.className+=" disabled",l.ariaDisabled="true"):l.removeAttribute("aria-disabled"),c=l),r.merged&&this.canEdit()&&!Rt.included(this.checkLocation,t.IconLocation.TOP_EDGE,t.IconLocation.BOTTOM_EDGE)&&r.focused||u.style.removeProperty("top"),this.$_setSpanText(this._makeText(e,o,r)),this._oldLocation!=this._checkLocation){switch(this._checkLocation){case t.IconLocation.LEFT:this.$_layoutLeft(u,c,h);break;case t.IconLocation.RIGHT:this.$_layoutRight(u,c,h);break;case t.IconLocation.TOP:this.$_layoutTop(u,c,h);break;case t.IconLocation.BOTTOM:this.$_layoutBottom(u,c,h);break;case t.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(u,c,h);break;case t.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(u,c,h);break;case t.IconLocation.TOP_EDGE:this.$_layoutTopEdge(u,c,h,n,s);break;case t.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(u,c,h,n,s);break;case t.IconLocation.CENTER:this.$_layoutCenter(u,c,h);break;default:this.$_layoutLeft(u,c,h)}this._oldLocation=this._checkLocation}this._checkLocation==t.IconLocation.TOP_EDGE||this._checkLocation==t.IconLocation.BOTTOM_EDGE?this._setHeight(s):this._clearHeight()},i.prototype.canEditClickAt=function(t){return this.preventDefaultEditClick(t),t.target===this._check||t.target===this._image},i.prototype.preventDefaultEditClick=function(t){t.target===this._check&&t.preventDefault()},i.prototype._doEditClick=function(t,e,i){if(e.target===this._check||e.target===this._image)return this.$_edit(t,i),!0},i.prototype.canEditKey=function(t){return(this.spaceKey&&32==t.keyCode||this.enterKey&&13==t.keyCode)&&!Rt.specialKey(t)},i.prototype._doEditKey=function(t,e,i){return this.$_edit(t,i),!0},i.prototype._doItemClick=function(){this._check.click()},i.prototype.moveClickElement=function(e,i){var o=this._dom;i||!this.canEdit()||Rt.included(t.IconLocation.TOP_EDGE,t.IconLocation.BOTTOM_EDGE)||(o.style.top=e+"px")},i.prototype.$_resetValues=function(){var t;if(this._values={},this._falseValues)if(t=this._falseValues.split(",")){var e=void 0;this._falseValue=(e=t.length)>0?t[0]:void 0;for(var i=0;i<e;i++)this._values[t[i]]=!1}else this._falseValue=void 0;if(this._trueValues)if(t=this._trueValues.split(",")){e=void 0;this._trueValue=(e=t.length)>0?t[0]:void 0;for(i=0;i<e;i++)this._values[t[i]]=!0}else this._trueValue=void 0},i.prototype.$_getChecked=function(e,i,o,r){if(r)return r(e.handler,o.itemIndex,o.dataColumn,i);var n=o.dataColumn;if(n&&n.valueType===t.ValueType.OBJECT){var s=n.getField(),a=n.objectKey||s.objectKey;i=null==i?void 0:i[a]}if("boolean"==typeof i)return i;var l=String(i);return this._values.hasOwnProperty(l)?this._values[l]:this._threeStates&&(this._strictValue||""==i||null==i)?void 0:Boolean(i)},i.prototype.$_edit=function(e,i){var o,r=e.grid,n=e.dataColumn,s=e.value,a=this.$_getChecked(r,e.value,e,this._getCheckedCallback);o=!a&&(void 0===a||(!this._threeStates||void 0));var l=this._setCheckedCallback;if(l?o=l(r.handler,e.itemIndex,e.dataColumn,s,o):void 0!==this._trueValue&&o?o=this._trueValue:void 0!==this._falseValue&&!1===o&&(o=this._falseValue),n&&n.valueType===t.ValueType.OBJECT){var h=n.getField(),u=s||{};u[n.objectKey||h.objectKey]=o,i.value=u}else i.value=o},i.prototype.$_layoutLeft=function(t,i,o){var r=this._useImages,n=r?this._image:i;e.prototype.$_layoutLeft.call(this,t,n,o,r)},i.prototype.$_layoutRight=function(t,i,o){var r=this._useImages,n=r?this._image:i;e.prototype.$_layoutRight.call(this,t,n,o,r)},i.prototype.$_layoutTop=function(t,i,o){var r=this._useImages,n=r?this._image:i;e.prototype.$_layoutTop.call(this,t,n,o,r)},i.prototype.$_layoutBottom=function(t,i,o){var r=this._useImages,n=r?this._image:i;e.prototype.$_layoutBottom.call(this,t,n,o,r)},i.prototype.$_layoutLeftEdge=function(t,i,o){var r=this._useImages,n=r?this._image:i;e.prototype.$_layoutLeftEdge.call(this,t,n,o,this._imgWidth,r)},i.prototype.$_layoutRightEdge=function(t,i,o){var r=this._useImages,n=r?this._image:i;e.prototype.$_layoutRightEdge.call(this,t,n,o,this._imgWidth,r)},i.prototype.$_layoutTopEdge=function(t,i,o,r,n){var s=this._useImages,a=s?this._image:i;e.prototype.$_layoutTopEdge.call(this,t,a,o,r,n,this._imgWidth,this._imgHeight,s)},i.prototype.$_layoutBottomEdge=function(t,i,o,r,n){var s=this._useImages,a=s?this._image:i;e.prototype.$_layoutBottomEdge.call(this,t,a,o,r,n,this._imgWidth,this._imgHeight,s)},i.prototype.$_layoutCenter=function(t,i,o){var r=this._useImages,n=r?this._image:i;e.prototype.$_layoutCenter.call(this,t,n,o,r)},i.prototype.$_setImageMiddle=function(t,e,i){(e!=this._imgMiddle||i)&&(this._imgMiddle=e)},i.prototype.$_getStyleName=function(){return String(this._checkLocation)||String(t.IconLocation.LEFT)},i.TYPE="check",i.STYLE="rg-check-renderer",i.FOR_ID="$$-check-cell-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.CHECKED_STYLE="rg-check-renderer-checked",i.UNCHECKED_STYLE="rg-check-renderer-unchecked",i.INTERMEDIATE_STYLE="rg-check-renderer-intermediate",i}(Jr),on=function(e){function i(){var i=e.call(this)||this;return i._radioLocation=t.IconLocation.LEFT,i._direction=t.LayoutDirection.HORIZONTAL,i._itemDirection=t.LayoutDirection.HORIZONTAL,i._itemReverse=!1,i._useCtrlNumber=!1,i._wrap=!1,i._editable=!0,i._multiSelect=!0,i._useImages=!1,i._views=null,i.refreshFocusChanged=!0,i}return o(i,e),Object.defineProperty(i.prototype,"values",{get:function(){return this._values||this.index.dataColumn.values},set:function(t){t&&Array.isArray(t)?this._values=t.concat():this._values=void 0,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labels",{get:function(){return this._labels||this.index.dataColumn.labels},set:function(t){t&&Array.isArray(t)?this._labels=t.concat():this._labels=void 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemDirection",{get:function(){return this._itemDirection},set:function(t){this._itemDirection=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemReverse",{get:function(){return this._itemReverse},set:function(t){this._itemReverse=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useCtrlNumber",{get:function(){return this._useCtrlNumber},set:function(t){this._useCtrlNumber=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){this._itemGap=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"gap",{get:function(){return this._gap},set:function(t){this._gap=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wrap",{get:function(){return this._wrap},set:function(t){this._wrap=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},set:function(t){this._editable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"multiSelect",{get:function(){return this._multiSelect},set:function(t){this._multiSelect=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useImages",{get:function(){return this._useImages},set:function(t){this._useImages=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"disabledCallback",{get:function(){return this._disabledCallback},set:function(t){this._disabledCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"keyToValueCallback",{get:function(){return this._keyToValueCallback},set:function(t){this._keyToValueCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clickOnlyFocusedCell",{get:function(){return!this.grid.editOptions.commitByCell||this._clickOnlyFocusedCell},set:function(t){this._clickOnlyFocusedCell=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueSeparator",{get:function(){var t=this.index&&this.index.dataColumn;return t&&t.valueSeparator||","},enumerable:!1,configurable:!0}),i.prototype._doInitContent=function(o){e.prototype._doInitContent.call(this,o);var r=St(o),n=this._container=r.createElement("div");n.className=i.CONTAINER_STYLE;var s=n.style;for(this._direction===t.LayoutDirection.VERTICAL&&(s.flexDirection="column"),this._gap>0?s.gap=this._gap+"px":s.removeProperty("gap"),this._wrap?s.flexWrap="wrap":s.removeProperty("flex-wrap");this._views&&this._views.length>0;){var a=this._views.pop();a&&this.$_removeView(a)}o.appendChild(n)},i.prototype._doInitOptions=function(){},i.prototype._doRenderCell=function(t,e,o,r,n){var s=this._container;o.merged&&this.canEdit()&&o.focused||s.style.removeProperty("top");var a=this.$_setItems(t,e.item);for(this._views||(this._views=[]);this._views.length<a;)this._views.push(this.$_addView(s));for(;this._views.length>a;){(f=this._views.pop())&&this.$_removeView(f)}for(var l=e.value,h=this._multiSelect&&l?l.split(this.valueSeparator):[],u=this._items,c=u.map((function(t){return t.value})),d=u.map((function(t){return t.label})),p=0;p<this._views.length;p++){var f=this._views[p];this.$_setProps(f),f.label[this._textProp]=d[p]||c[p];var _=f.radio.id="".concat(i.FOR_ID,"-").concat(e.dataColumn.$_hash,"-").concat(e.item.index,"-").concat(c[p]);f.label.htmlFor=_;var g=this._disabledCallback&&this._disabledCallback.call(t.handler,t.handler,e.index.itemIndex,e.index.dataColumn,c[p]);f.radio.disabled=g,f.image.className=i.IMAGE_STYLE,this._multiSelect?(Rt.addClassName(f.image,"check"),(f.radio.checked=h.indexOf(c[p])>=0)?Rt.addClassName(f.image,"checked"):Rt.addClassName(f.image,"unchecked")):(Rt.addClassName(f.image,"radio"),(f.radio.checked=c[p]===l)?Rt.addClassName(f.image,"checked"):Rt.addClassName(f.image,"unchecked")),g?(Rt.addClassName(f.div,"disabled"),Rt.addClassName(f.image,"disabled")):(Rt.removeClassName(f.div,"disabled"),Rt.removeClassName(f.image,"disabled"))}},Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!1,configurable:!0}),i.prototype._doClearContent=function(t){Ar.clearFlex(t),e.prototype._doClearContent.call(this,t)},i.prototype.canEdit=function(){var t=this.grid.editOptions,e=t.columnEditableFirst,i=this.editable;if(e){if(!(null!=i?i:t.editable))return!1}else if(!t.editable||!i)return!1;return i},i.prototype.canEditClickAt=function(t){return this.preventDefaultEditClick(t),this.$_canClick(t.target)},i.prototype.canEditKey=function(t){var e,i=this._keyToValueCallback,o=this._items.map((function(t){return t.value}));if(this._keyValue=null,i)this._keyValue=e=this._keyToValueCallback.call(this.grid.handler,this.grid.handler,this.index.itemIndex,this.index.dataColumn,t,o);else if(this._useCtrlNumber&&Rt.ctrlKey(t)&&!t.shiftKey&&!t.altKey&&/[0-9]/.test(t.key)){t.preventDefault();var r=parseInt(t.key);this._items&&this._items.length>0&&this._items.length>=r&&(this._keyValue=e=this._items[r-1].value)}return!!e},i.prototype._doItemClick=function(t){if(this._keyValue)for(var e=0;e<this._items.length;e++)this._items[e].value===this._keyValue&&this._views[e].radio.click()},i.prototype._doEditClick=function(t,e,i){if(this.$_canClick(e.target))return this.$_edit(t,i,e.target),!0},i.prototype.moveClickElement=function(t,e){var i=this._dom;!e&&this.canEdit()&&(i.style.top=t+"px")},i.prototype.$_setItems=function(t,e){var i=[],o=[],r=this.index,n=r.dataRow;if(e instanceof Hr&&(t.isItemEdited()||(n=e.firstDataItem.dataRow)),this._values&&this._values.length>0)i=this._values,o=this._labels;else if(r.dataColumn&&r.item&&(n>=0||Ao(e.itemState))){var s=r.dataColumn;if(s.lookupSource){for(var a=s.lookupKeyFieldIds,l=[],h=0;h<a.length-1;h++)l.push(e.getData(a[h]));var u=s.lookupSource.getTextDomain(l);u&&u.values&&u.values.length>0&&(i=u.keys,o=u.values)}else s.values&&s.values.length>0&&(i=s.values,o=s.labels)}return this._items=i.map((function(t,e){return{value:t,label:o&&o[e]||i[e]}})),this._items?this._items.length:0},i.prototype.$_setProps=function(e){var i=e.div,o=e.image,r=e.radio;e.label;var n=i.style,s=this._itemDirection===t.LayoutDirection.VERTICAL?"column":"row";n.flexDirection=s+"".concat(this._itemReverse?"-reverse":""),this._itemGap>0?n.gap=this._itemGap+"px":n.removeProperty("gap"),r.type=this._multiSelect?"checkbox":"radio",(n=r.style).display=this._useImages?"none":"",(n=o.style).display=this._useImages?"":"none"},i.prototype.$_addView=function(t){var e=St(t),o=e.createElement("div");o.className=i.ITEM_STYLE,o.style;var r=e.createElement("input");r.tabIndex=-1;var n=e.createElement("span"),s=e.createElement("label");return s.style,o.appendChild(r),o.appendChild(n),o.appendChild(s),t.appendChild(o),{div:o,radio:r,image:n,label:s}},i.prototype.$_removeView=function(t){var e=t.div;e.removeChild(t.radio),e.removeChild(t.image),e.removeChild(t.label),Rt.detach(e)},i.prototype.$_canClick=function(t){for(var e=0;this._views&&e<this._views.length;e++){var i=this._views[e];if(Rt.included(t,i.radio,i.image,i.label))return!0}return!1},i.prototype.$_edit=function(t,e,i){for(var o,r=t.getValue(),n=this._multiSelect&&r?r.split(this.valueSeparator):[],s=this._items.map((function(t){return t.value})),a=[],l=0;l<this._views.length;l++){var h=this._views[l];if(Rt.included(i,h.radio,h.image,h.label)){o=s[l];break}}if(this._multiSelect){if(n.indexOf(o)>=0)n.splice(n.indexOf(o),1),a=n;else for(l=0;l<s.length;l++)n.indexOf(s[l])>=0?a.push(s[l]):s[l]===o&&a.push(o);o=a.join(this.valueSeparator)}e.value=o},i.TYPE="multicheck",i.STYLE="rg-multicheck-renderer",i.ITEM_STYLE="rg-multicheck-renderer-item",i.IMAGE_STYLE="rg-multicheck-image",i.CONTAINER_STYLE="rg-multicheck-container",i.FOR_ID="$$-radio-cell-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i}(zr),rn=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return o(i,e),i.prototype._doInitContent=function(t){e.prototype._doInitContent.call(this,t),t.style.setProperty("display","flex","important")},i.prototype._doClearContent=function(t){e.prototype._doClearContent.call(this,t),Ar.clearFlex(t)},i.prototype.$_layoutLeft=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.LEFT)},i.prototype.$_layoutRight=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.RIGHT)},i.prototype.$_layoutTop=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.TOP)},i.prototype.$_layoutBottom=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.BOTTOM)},i.prototype.$_layoutLeftEdge=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.LEFT_EDGE)},i.prototype.$_layoutRightEdge=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.RIGHT_EDGE)},i.prototype.$_layoutTopEdge=function(e,i,o,r,n){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.TOP_EDGE)},i.prototype.$_layoutBottomEdge=function(e,i,o,r,n){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.BOTTOM_EDGE)},i.prototype.$_layoutCenter=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.CENTER)},i}(en),nn=function(t){function e(){var i=t.call(this)||this;return i._buttonStyle=e.BUTTON_STYLE,i._hideWhenEmpty=!0,i._spaceKey=!0,i._enterKey=!1,i._itemClickable=!0,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"buttonStyle",{get:function(){return this._buttonStyle},set:function(t){t!=this._buttonStyle&&(this._buttonStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hideWhenEmpty",{get:function(){return this._hideWhenEmpty},set:function(t){t!=this._hideWhenEmpty&&(this._hideWhenEmpty=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enterKey",{get:function(){return this._enterKey},set:function(t){this._enterKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!1,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._button=St(t).createElement("button");e.type="button",e.tabIndex=-1,e.style.display="inline-block",t.appendChild(e)},e.prototype._doRenderCell=function(t,e,i,o,r){var n=this._button,s=n[this._textProp]=this._makeText(t,e,i);n.setAttribute("class",this._buttonStyle),n.style.visibility=this._hideWhenEmpty&&this._isEmpty(s)?"hidden":""},e.prototype.canClick=function(t){return t.target===this._button},e.prototype.canClickSpaceKey=function(t){return(this.spaceKey&&32==t.keyCode||this.enterKey&&13===t.keyCode)&&!Rt.specialKey(t)},e.prototype._doClick=function(t,e,i){if(e.target===this._button||"keydown"===e.type)return{type:this.type,value:t.value}},e.prototype._doItemClick=function(){this._button.click()},e.TYPE="button",e.STYLE="rg-button-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e.BUTTON_STYLE="rg-button-renderer-button",e}(zr),sn=function(t){function e(){var e=t.call(this)||this;return e._spaceKey=!0,e._enterKey=!1,e._hideWhenEmpty=!0,e._itemClickable=!0,e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"baseUrl",{get:function(){return this._baseUrl},set:function(t){t!=this._baseUrl&&(this._baseUrl=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linkField",{get:function(){return this._linkField},set:function(t){t!=this._linkField&&(this._linkField=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"urlCallback",{get:function(){return this._urlCallback},set:function(t){t!==this._urlCallback&&(this._urlCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"titleField",{get:function(){return this._titleField},set:function(t){t!=this._titleField&&(this._titleField=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"titleCallback",{get:function(){return this._titleCallback},set:function(t){t!==this._titleCallback&&(this._titleCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enterKey",{get:function(){return this._enterKey},set:function(t){this._enterKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classCallback",{get:function(){return this._classCallback},set:function(t){this._classCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hideWhenEmpty",{get:function(){return this._hideWhenEmpty},set:function(t){this._hideWhenEmpty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!1,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._anchor=St(t).createElement("a");e.tabIndex=-1,t.appendChild(e)},e.prototype._doInitOptions=function(){this._baseUrl=this._linkField=this._urlCallback=this._titleField=this._titleCallback=this._url=this._classCallback=void 0},e.prototype._doRenderCell=function(t,e,i,o,r){var n=this._anchor,s=this._makeText(t,e,i);n[this._textProp]=s,this._url="","#"===this._baseUrl?(n.removeAttribute("target"),n.href="#"):(this._url=this.$_getUrl(t,e),this._url&&(n.target=null==this.target?"_blank":this.target,n.href=this._url));var a=this.$_getTitle(t,e);a?n.title=a:delete n.title;var l=this.$_getStyle(t,e);l?n.className=l:n.removeAttribute("class"),this.hideWhenEmpty&&!s?Rt.detach(n):Rt.addChild(this._dom,n)},e.prototype.preventDefaultClick=function(t){t.target===this._anchor&&(t.preventDefault(),t.stopImmediatePropagation())},e.prototype.canClick=function(t){return t.target===this._anchor},e.prototype._doClick=function(t,e,i){if(e.target===this._anchor||"keydown"===e.type)return{type:this.type,url:this._url,value:t.value}},e.prototype.canClickSpaceKey=function(t){return(this.spaceKey&&32==t.keyCode||this.enterKey&&13===t.keyCode)&&!Rt.specialKey(t)},e.prototype._doItemClick=function(){this._anchor.click()},e.prototype.$_getUrl=function(t,e){var i="",o=this._urlCallback;return o&&(i=o.call(this,t.handler,e)),i||(i=this._linkField?this._getValue(t,e,this._linkField):e.value,this._baseUrl&&(i=this._baseUrl+i)),i||""},e.prototype.$_getTitle=function(t,e){var i="",o=this._titleCallback;return o&&(i=o.call(this,t.handler,e)),!i&&this._titleField&&(i=this._getValue(t,e,this._titleField)),i||""},e.prototype.$_getStyle=function(t,e){var i="",o=this._classCallback;return o&&(i=o.call(this,t.handler,e)),i||""},e.TYPE="link",e.STYLE="rg-link-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(zr),an=function(e){function i(){var o=e.call(this)||this;return o._shapeStyle=i.SHAPE_STYLE,o._shape=Nr.STAR,o._shapeWidth=16,o._shapeHeight=16,o._shapeLocation=t.IconLocation.LEFT,o}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"shapeStyle",{get:function(){return this._shapeStyle},set:function(t){t!=this._shapeStyle&&(this._shapeStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shape",{get:function(){return this._shape},set:function(t){t!=this._shape&&(this._shape=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shapeMap",{get:function(){return this._shapeMap},set:function(t){t!==this._shapeMap&&(this._shapeMap=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shapeCallback",{get:function(){return this._shapeCallback},set:function(t){t!=this._shapeCallback&&(this._shapeCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shapeWidth",{get:function(){return this._shapeWidth},set:function(t){this._shapeWidth!==t&&(this._shapeWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shapeHeight",{get:function(){return this._shapeHeight},set:function(t){this._shapeHeight!==t&&(this._shapeHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shapeLocation",{get:function(){return this._shapeLocation},set:function(t){t!=this._shapeLocation&&(this._oldLocation=this._shapeLocation,this._shapeLocation=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!1,configurable:!0}),i.prototype._doInitContent=function(t){var e=St(t),i=(this._svg=Dr.createSVG(t)).style,o=isNaN(this._shapeWidth)||this._shapeWidth<=0?16:this._shapeWidth,r=isNaN(this._shapeHeight)||this._shapeHeight<=0?16:this._shapeHeight;i.display="inline-block",i.width=o+"px",i.height=r+"px";var n=this._span=e.createElement("span");t.appendChild(n),this._br=e.createElement("br")},i.prototype._reset=function(){e.prototype._reset.call(this),this._splitted=this._reversed=void 0},i.prototype._doRenderCell=function(e,i,o,r,n){var s=this._svg,a=this._span;if(this._runShape=this.$_getShape(e,i),s.setAttribute("class",this._shapeStyle),Dr.renderSVG(e,s,this.$_render.bind(this)),this.$_setSpanText(this._makeText(e,i,o)),this._oldLocation!=this._shapeLocation){switch(this._shapeLocation){case t.IconLocation.LEFT:this.$_layoutLeft(this._dom,s,a,!1);break;case t.IconLocation.RIGHT:this.$_layoutRight(this._dom,s,a,!1);break;case t.IconLocation.TOP:this.$_layoutTop(this._dom,s,a,!1);break;case t.IconLocation.BOTTOM:this.$_layoutBottom(this._dom,s,a,!1);break;case t.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(this._dom,s,a,this._shapeWidth,!1);break;case t.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(this._dom,s,a,this._shapeWidth,!1);break;case t.IconLocation.TOP_EDGE:this.$_layoutTopEdge(this._dom,s,a,r,n,this._shapeWidth,this._shapeHeight,!1);break;case t.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(this._dom,s,a,r,n,this._shapeWidth,this._shapeHeight,!1);break;case t.IconLocation.CENTER:this.$_layoutCenter(this._dom,s,a,!1);break;default:this.$_layoutLeft(this._dom,s,a,!1)}this._oldLocation=this._shapeLocation}this._shapeLocation==t.IconLocation.TOP_EDGE||this._shapeLocation==t.IconLocation.BOTTOM_EDGE?this._setHeight(n):this._clearHeight()},i.prototype.$_getShape=function(t,e){var i=void 0,o=this._shapeCallback;return o&&(i=o.call(this,t.handler,e)),null==i&&this._shapeMap&&(i=this._shapeMap[e.value]),null==i&&(i=this._shape),i},i.prototype.$_getDrawing=function(t){var e;return t&&("ellipse"==(t=t.toLowerCase())?e=this._ellipse?this._ellipse:this._ellipse=new $r:(e=this._polygon?this._polygon:this._polygon=new Nr(t),this._polygon.shape=t)),e},i.prototype.$_render=function(t,e,i,o){if(this._runShape){var r=this.$_getDrawing(this._runShape);r&&r.draw(e,i,o)}},i.TYPE="shape",i.STYLE="rg-shape-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.SHAPE_STYLE="rg-shape-renderer-shape",i}(Jr),ln=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return o(i,e),i.prototype._doInitContent=function(t){t.style.setProperty("display","flex","important"),e.prototype._doInitContent.call(this,t)},i.prototype._doClearContent=function(t){e.prototype._doClearContent.call(this,t),Ar.clearFlex(t)},i.prototype.$_layoutLeft=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.LEFT)},i.prototype.$_layoutRight=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.RIGHT)},i.prototype.$_layoutTop=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.TOP)},i.prototype.$_layoutBottom=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.BOTTOM)},i.prototype.$_layoutLeftEdge=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.LEFT_EDGE)},i.prototype.$_layoutRightEdge=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.RIGHT_EDGE)},i.prototype.$_layoutTopEdge=function(e,i,o,r,n){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.TOP_EDGE)},i.prototype.$_layoutBottomEdge=function(e,i,o,r,n){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.BOTTOM_EDGE)},i.prototype.$_layoutCenter=function(e,i,o){Ar.layoutFlex(e,i,o,this._itemGap,this._verticalEdgePad,t.IconLocation.CENTER)},i}(an),hn=function(t){function e(){var i=t.call(this)||this;return i._barStyle=e.BAR_STYLE,i._inactiveStyle=e.INACTIVE_STYLE,i._barCount=10,i._minimum=NaN,i._maximum=NaN,i._startRate=50,i._endRate=100,i._absoluteValue=!1,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doInitOptions=function(){this._barStyle=e.BAR_STYLE,this._inactiveStyle=e.INACTIVE_STYLE,this._barCount=10,this._minimum=NaN,this._maximum=NaN,this._startRate=50,this._endRate=100,this._absoluteValue=!1},Object.defineProperty(e.prototype,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inactiveStyle",{get:function(){return this._inactiveStyle},set:function(t){t!=this._inactiveStyle&&(this._inactiveStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"barCount",{get:function(){return this._barCount},set:function(t){(t=Math.max(2,t))!=this._barCount&&(this._barCount=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startRate",{get:function(){return this._startRate},set:function(t){!isNaN(t)&&t>=0&&t<=100&&t!==this._startRate&&(this._startRate=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endRate",{get:function(){return this._endRate},set:function(t){!isNaN(t)&&t>=0&&t<=100&&t!==this._endRate&&(this._endRate=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"absoluteValue",{get:function(){return this._absoluteValue},set:function(t){t!=this._absoluteValue&&(this._absoluteValue=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!1,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._div=St(t).createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);var i=(this._svg=Dr.createSVG(e)).style;i.position="absolute",i.left="0px",i.width="100%",i.top=(100-Math.max(this._startRate,this._endRate))/2+"%",i.height=Math.max(this._startRate,this._endRate)+"%"},e.prototype._doRenderCell=function(t,e,i,o,r){var n=this._svg;this._value=parseFloat(e.value),n.setAttribute("class",this._barStyle),Dr.renderSVG2(t,n,this.$_render.bind(this))},e.prototype.$_render=function(t,e){var i=this.absoluteValue?Math.abs(this._value):this._value;isNaN(this._minimum)||isNaN(this._maximum)||(i=this._barCount*(i-this._minimum)/(this._maximum-this._minimum));for(var o=100/Math.max(this._startRate,this._endRate),r=(100-2*(this._barCount+1))/this._barCount,n=0,s=this._startRate*o,a=(this._endRate-this._startRate)/(this._barCount-1),l=0;l<this._barCount;l++){var h=l<i?null:this._inactiveStyle;e.sbounds(h,n+"%",100-s+"%",r+"%",s+"%"),n+=r+2,s+=a}},e.TYPE="signalbar",e.STYLE="rg-signalbar-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e.BAR_STYLE="rg-signalbar-renderer-bar",e.INACTIVE_STYLE="rg-signalbar-renderer-inactive",e}(zr),un=function(t){function e(){var i=t.call(this)||this;return i._barStyle=e.BAR_STYLE,i._barcode=new Pr,i.$_render=function(t,e,i,o){this._value&&(this._barcode.value=this._value,this._barcode.renders(e,new ot(0,0,i,100)))}.bind(i),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!1,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._div=St(t).createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);var i=(this._svg=Dr.createSVG(e)).style;i.position="absolute",i.left="0px",i.top="0px",i.width="100%",i.height="100%"},e.prototype._doRenderCell=function(t,e,i,o,r){var n=this._svg;this._value=null==e.value?"":String(e.value),this._value&&(this._value=this._value.toUpperCase()),n.setAttribute("class",this._barStyle),Dr.renderSVG(t,n,this.$_render)},e.TYPE="code39",e.STYLE="rg-code39-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e.BAR_STYLE="rg-code39-renderer-bar",e}(zr),cn=function(t){function e(){var i=t.call(this)||this;return i._barStyle=e.BAR_STYLE,i._barcode=new Or,i.$_render=function(t,e,i,o){this._value&&(this._barcode.value=this._value,this._barcode.renders(e,new ot(0,0,i,100)))}.bind(i),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!1,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._div=St(t).createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);var i=(this._svg=Dr.createSVG(e)).style;i.position="absolute",i.left="0px",i.top="0px",i.width="100%",i.height="100%"},e.prototype._doRenderCell=function(t,e,i,o,r){var n=this._svg;this._value=null==e.value?"":String(e.value),n.setAttribute("class",this._barStyle),Dr.renderSVG(t,n,this.$_render)},e.TYPE="code128",e.STYLE="rg-code128-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e.BAR_STYLE="rg-code128-renderer-bar",e}(zr),dn=function(t,e){var i=[];return e&&e.forEach((function(e){var o=e.selector,r=t.querySelectorAll(o);Array.prototype.forEach.call(r,(function(t){var o=e.event;if(o)for(var r=0,n=Object.keys(o);r<n.length;r++){var s=n[r];t[s]=o[s]}e.renderCallback&&i.push({elt:t,callback:e.renderCallback})}))})),i},pn=/\$\{[^{}]*\}/g,fn=function(){function t(){this._template="",this._tokens=[]}return Object.defineProperty(t.prototype,"template",{get:function(){return this._template},set:function(t){this._template=t,this.$_parse(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pattern",{set:function(t){this._pattern=t},enumerable:!1,configurable:!0}),t.prototype.realize=function(t,e,i,o){for(var r="",n=0,s=this._tokens;n<s.length;n++){var a=s[n];if("string"==typeof a)r+=a||"";else if(1==a.type)r+=e.value||"";else if(2==a.type)r+=e.item.getData(t.dataSource.getFieldIndex(a.field))||"";else if(4===a.type){r+=(e instanceof br?e.getDisplayText(t,i):e.value)||""}else if(5===a.type){r+=e.item.index+""||""}else if(o){r+=o.call(this,t.handler,e,a.field)||""}else r+=a.field}return r},t.prototype.realizeHeader=function(t,e,i){for(var o,r="",n=0,s=this._tokens;n<s.length;n++){var a=s[n];if("string"==typeof a)r+=a;else if(1==a.type)r+=t.displayText;else if(null!=(o=t.getValue(a.field)))r+=String(o);else if(e){r+=e.call(this,i.handler,t,a.field)+""||""}else r+=a.field}return r},t.prototype.realizeSummary=function(t,e,i,o){for(var r,n=this._tokens,s="",a=t.column,l=a.grid,h=0,u=n;h<u.length;h++){var c=u[h];"string"==typeof c?s+=c:1==c.type?s+=e.getDisplayText(i)||"":null!=(r=t.getValue(c.field))?s+=String(r):s+=o?(r=o.call(this,l.handler,a,t.summaryIndex,t,c.field))||"":c.field}return s},t.prototype.realizeGroupSummary=function(t,e,i,o){for(var r,n=this._tokens,s="",a=t.column,l=a.grid,h=0,u=n;h<u.length;h++){var c=u[h];"string"==typeof c?s+=c:1==c.type?s+=e.getDisplayText(i)||"":null!=(r=t.getValue(c.field))?s+=String(r):s+=o?(r=o.call(this,l.handler,a,t.summaryIndex,e.index.item.parent,c.field))||"":c.field}return s},t.prototype.$_parse=function(t){var e=this._tokens=[];if(t){for(var i,o=t.length,r=this._pattern||pn,n=0;i=r.exec(t);){var s=i[0],a=i.index;a>n&&(e.push(t.substring(n,a)),n=a);var l=s.substring(2,s.length-1),h={type:"value"===l?1:"text"===l?4:0==l.indexOf("value:")?2:"itemindex"===l?5:3,field:l};2==h.type&&(h.field=h.field.substring(6)),e.push(h),n+=s.length}n<o&&e.push(t.substring(n,o))}},t}(),_n=function(t){function e(){var e=t.call(this)||this;return e._output=void 0,e._inputFocusable=!1,e._html="",e._parser=new fn,e.template="<span>${value}</span>",e._itemClickable=!0,e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"template",{get:function(){return this._parser.template},set:function(t){t!=this._parser.template&&(this._parser.template=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pattern",{set:function(t){t!=this._pattern&&(t instanceof RegExp?this._pattern=t:this._pattern=t?new RegExp(t):void 0,this._parser.pattern=this._pattern,this._parser.template=this.template)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){return this._output},set:function(t){this._output=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"callback",{get:function(){return this._callback},set:function(t){t!==this._callback&&(this._callback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!==this._valueCallback&&(this._valueCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inputFocusable",{get:function(){return this._inputFocusable},set:function(t){this._inputFocusable!==t&&(this._inputFocusable=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"templateEvents",{get:function(){return this._templateEvents},set:function(t){this._templateEvents=Rt.makeArray(t,!0),this._changed()},enumerable:!1,configurable:!0}),e.prototype.clearAndAssignFrom=function(e){this.valueCallback=void 0,this.callback=void 0,this.pattern=void 0,this.template="",t.prototype.assignFrom.call(this,e)},Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),e.prototype._doClearContent=function(e){t.prototype._doClearContent.call(this,e),this._html=null},e.prototype.canClick=function(t){var e=It(this._dom),i=t.target;return!(i instanceof e.HTMLTableCellElement&&i.className.indexOf("rg-")>=0||this._dom===i)},e.prototype.click=function(t,e,i){return this._doClick(t,e,i||e.target)},e.prototype._doRenderCell=function(t,e,i,o,r){var n=this._callback;n?this.$_setHtml(n.call(this,t.handler,e,o,r),this._templateEvents):this.$_setHtml(this._parser.realize(t,e,i,this._valueCallback),this._templateEvents)},e.prototype._doClick=function(t,e,i){return{type:this.type,target:e.target,value:t.value}},e.prototype.$_setHtml=function(t,e){if(t!=this._html){var i=this._dom;this._html=t,i.innerHTML=t,e&&dn(i,e)}},e.TYPE="html",e}(zr),gn=function(t){function e(e){var i=t.call(this)||this;return i._styleMap={},i._owner=e,i}return o(e,t),e.prototype._doDispose=function(){this._styleMap=null,t.prototype._doDispose.call(this)},e.prototype.addCellStyle=function(t,e,i){return(this._styleMap[t]||(this._styleMap[t]={}))[e]=i,!0},e.prototype.getCellStyle=function(t,e){var i=this._styleMap[t];return i&&i[e]},e.prototype.removeCellStyle=function(t,e){if(null==t)this._styleMap={};else{var i=this._styleMap[t];i&&(e?delete i[e]:delete this._styleMap[t])}return!0},e.prototype.connect=function(t){this._styleMap={}},e.prototype.disconnect=function(){this._styleMap={}},e.prototype.clearRows=function(){this._styleMap={}},e.prototype.setRows=function(){this._styleMap={}},e.prototype.removeRow=function(t){var e=this._owner.getItemOfRow(t,!0);e&&delete this._styleMap[e.dataRowId]},e.prototype.removeRows=function(t){var e=this;t.forEach((function(t){var i=e._owner.getItemOfRow(t,!0);i&&delete e._styleMap[i.dataRowId]}))},e}(ei),yn=function(t){function e(){return t.call(this)||this}return o(e,t),e}(pr),mn=function(t){function e(e,i,o){var r=t.call(this)||this;return r._runtime=new yn,r._owner=e,r._exprNode=Ie.Default.parse(i,["value","values"]),r._runtime=new yn,r._callback=o,r}return o(e,t),e.clearCheckables=function(t){for(var e=t.itemCount;e--;)t.getItem(e)._setCheckable(!0)},e.prototype.connect=function(t){this._runtime.setDataSource(t)},e.prototype.disconnect=function(){},e.prototype.clearRows=function(){e.clearCheckables(this._owner)},e.prototype.setRows=function(){for(var t=this._owner._rows,e=t.length;e--;){var i=t[e];this.$_setCheckable(i)}},e.prototype.insertRow=function(t){var e=this._owner.getItemOfRow(t,!0);this.$_setCheckable(e)},e.prototype.insertRows=function(t,e){for(var i=0;i<e;i++){var o=this._owner.getItemOfRow(t+i,!0);o instanceof Ho&&this.$_setCheckable(o)}},e.prototype.updateRow=function(t){var e=this._owner.getItemOfRow(t,!0);this.$_setCheckable(e)},e.prototype.updateRows=function(t,e){for(var i=0;i<e;i++){var o=this._owner.getItemOfRow(t+i,!0);o instanceof Ho&&this.$_setCheckable(o)}},e.prototype.updateRowList=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e],r=this._owner.getItemOfRow(o,!0);r instanceof Ho&&this.$_setCheckable(r)}},e.prototype.changeStates=function(t){if(t)for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e],!0);i instanceof Ho&&this.$_setCheckable(i)}},e.prototype.$_setCheckable=function(t){var e,i=this._callback;i?e=i.call(this,t.dataSource.handler,t):(this._runtime.setItem(t),e=this._exprNode.evaluate(this._runtime)),t._setCheckable(e)},e}(ei),bn=function(e){function i(t){var i=e.call(this,t)||this;return i._checkableExpression=null,i._rows=[],i._filteredItems=[],i._pageItems=[],i._sortedItems=[],i._pubItems=i._rows,i._items=i._rows,i._distinctRows=[],i._rowCount=0,i._fixedCount=0,i._fixedSorting=!1,i._maxItemCount=0,i._itemCount=0,i._pubCount=0,i._filtered=!1,i._filtering=!1,i._filters=[],i._filterRuntime=new ur,i._filterLock=0,i._fixedFiltering=!1,i._sorted=!1,i._sortFields=[],i._sortDirections=[],i._sortCases=[],i._labelComparer={},i._paging=!1,i._pagingSource=c.ROWS,i._pageSize=10,i._pageCount=-1,i._pageStartIndex=-1,i._currPage=0,i._pageStart=0,i._summaryMap=null,i._checkableTag=null,i._cellStyleMapTag=new gn(i),i}return o(i,e),i.prototype._doDispose=function(){function t(t){for(var e=0,i=t.length;e<i;e++)t[e]&&t[e].dispose();t.length=0}this.dataSource=null,t(this._rows),t(this._filteredItems),t(this._pageItems),t(this._sortedItems),t(this._pubItems),t(this._items),t(this._distinctRows),this._filterRuntime&&this._filterRuntime.dispose(),this._filterRuntime=null,this._sortFields.length=0,this._labelComparer=null,this._summaryMap=null,this._checkableTag=null,e.prototype._doDispose.call(this)},i.prototype.getCommandStates=function(t){var e=this._rows[t];return e&&e._getExtents()},i.prototype.setCommandStates=function(t,e){var i=this._rows[t];null!=e&&i&&i._setExtents(e)},Object.defineProperty(i.prototype,"isFilterOr",{get:function(){return void 0===this._filterOr?void 0!==Xe.filterOr&&Xe.filterOr:this._filterOr},set:function(t){t!=this._filterOr&&(this._filterOr=t,this.$_buildItems(),this._fireRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isSorted",{get:function(){return this._sorted},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isPaging",{get:function(){return this._paging},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pageStartIndex",{get:function(){return this._pageStart},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return this._summaryMode||Xe.summaryMode||t.SummaryMode.AGGREGATE},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_resetSummary(),this.$_buildItems(),this._fireRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortMode",{get:function(){return this._sortMode||Xe.sortMode||t.SortMode.AUTO},set:function(t){this._sortMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterMode",{get:function(){return this._filterMode||Xe.filterMode||t.FilterMode.AUTO},set:function(t){this._filterMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"outerSort",{get:function(){return null!=this._outerSort?this._outerSort:Xe.sorting.outerSort},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortDataRow",{get:function(){return null!=this._sortDataRow?this._sortDataRow:Xe.sorting.sortDataRow},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new mn(this,t),this._dataSource&&this._checkableTag.connect(this._dataSource)))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableCallback",{set:function(t){this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new mn(this,null,t),this._dataSource&&this._checkableTag.connect(this._dataSource))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labelComparer",{get:function(){return this._labelComparer},set:function(t){this._labelComparer=t||{}},enumerable:!1,configurable:!0}),i.prototype.getFieldDomain=function(t){if(this._dataSource){for(var e=this._rows.length,i=[],o=void 0,r=0;r<e;r++){var n=this._dataSource.getValue(r,t);n!=o&&i.indexOf(n)<0&&i.push(n),o=n}return i}},i.prototype.beginFilter=function(){this._filterLock++},i.prototype.endFilter=function(t,e,i,o){void 0===t&&(t=!0),void 0===e&&(e=null),void 0===i&&(i=null),this._filterLock>0&&(this._filterLock=Math.max(0,this._filterLock-1),0==this._filterLock&&t&&this.applyFilters(!0,e,i,o))},i.prototype.hasFilter=function(t){var e=this._filters[t];return e&&e.length>0},i.prototype.addFilter=function(t,e){if(t>=0){var i=this._filters[t];if(i||(i=[],this._filters[t]=i),e.criteria||e.callback){var o=new lr(e);return i.push(o),this.applyFilters(),o}}},i.prototype.clearAllFilters=function(){this._filtered&&(this._filters=[],this.applyFilters())},i.prototype.hasFilters=function(){for(var t=this._filters.length,e=0;e<t;e++){var i=this._filters[e];if(i&&i.length>0)return!0}return!1},i.prototype.applyFilters=function(t,e,i,o){if(void 0===t&&(t=!0),void 0===e&&(e=null),void 0===i&&(i=null),!(this._filterLock>0)){this.$_buildItems();try{t&&this._fireRefresh()}finally{this._fireFiltered(e,i,o)}}},i.prototype.orderBy=function(e,i,o,r){var n=this;void 0===e&&(e=null),void 0===i&&(i=null),void 0===o&&(o=null),void 0===r&&(r=!0),this._fireSort(e,i,o),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var s=e?e.length:0,a=i?i.length:0,l=o?o.length:0,h=0;h<a;h++)i[h]=i[h]==t.SortDirection.ASCENDING||i[h]==t.SortDirection.DESCENDING?i[h]:t.SortDirection.ASCENDING;for(h=0;h<s;h++)this._sortFields.push(e[h]),a>h?this._sortDirections.push(i[h]):a>0?this._sortDirections.push(i[a-1]):this._sortDirections.push(t.SortDirection.ASCENDING),l>h?this._sortCases.push(o[h]):l>0?this._sortCases.push(o[l-1]):this._sortCases.push(t.SortCase.SENSITIVE);this._sorted=this.$_checkSorted(),this.$_buildItems();var u=this.outerSort;if(u&&u instanceof Function){var c=this._fireOuterSort(u,this._sortFields,this._sortDirections);c instanceof Promise?c.then((function(){r&&(n._fireRefresh(),n._fireSorted())})):r&&(this._fireRefresh(),this._fireSorted())}else r&&(this._fireRefresh(),this._fireSorted())},i.prototype.getSortFields=function(){return this._sortFields.slice()},i.prototype.getSortDirections=function(){return this._sortDirections.slice()},i.prototype.getSortCases=function(){return this._sortCases.concat()},i.prototype.setPaging=function(t,e,i,o){void 0===e&&(e=10),void 0===i&&(i=-1),void 0===o&&(o=null),e=Math.max(e,1),i=Math.max(i,-1),t==this._paging&&e==this._pageSize&&i==this._pageCount&&o==this._pagingSource||(this._currPage=0,this._paging=t,this._pagingSource=o,this._pageSize=e,this._pageCount=i,this.$_buildItems(),this._fireRefresh())},Object.defineProperty(i.prototype,"page",{get:function(){return this._paging?this._currPage:-1},enumerable:!1,configurable:!0}),i.prototype.setPage=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),this._paging&&(t=Math.max(0,Math.min(this.pageCount-1,t)),e=Math.max(-1,e),t==this._currPage&&e==this._pageStartIndex||(this._currPage=t,this._pageStartIndex=e,this.$_buildPage(),this._fireRefresh()))},Object.defineProperty(i.prototype,"pageCount",{get:function(){if(this._paging){if(this._pageCount>=0)return this._pageCount;var t=this.$_getPageItems();return Math.floor((t.length+this._pageSize-1)/this._pageSize)}return 0},set:function(t){this._paging&&(t=Math.max(-1,t))!=this._pageCount&&(this._pageCount=t,this.$_buildPage(),this._fireRefresh())},enumerable:!1,configurable:!0}),i.prototype.getPageOfDataRow=function(t){if(this._dataSource){if(this._paging){if(t<0||t>=this._dataSource.rowCount)return-1;var e=this.$_getPageItems();if(!e||!e.length)return-1;for(var i=0;i<e.length;i++)if(e[i].dataRow===t)return Math.floor(i/this._pageSize);return-1}return 0}},i.prototype.getCheckedRows=function(t){if(this._dataSource){for(var e=t?this._dataSource.rowCount:this.itemCount,i=[],o=0;o<e;o++){var r=t?this._rows[o]:this._pubItems[o];r.checked&&i.push(r.dataRow)}return i}},i.prototype.resetCheckables=function(){for(var t=this._rows.length;t--;)this._rows[t]._setCheckable(!0);this._fireRefresh()},i.prototype.applyCheckables=function(){this._checkableTag?this._checkableTag.setRows():mn.clearCheckables(this),this._fireRefresh()},i.prototype.setCheckFieldIndex=function(t){e.prototype.setCheckFieldIndex.call(this,t)},i.prototype.getJsonRows=function(){return this._pubItems.map((function(t){return t.getRowObject()}))},i.prototype.addCellStyle=function(t,e,i){return this._cellStyleMapTag.addCellStyle(t,e,i)},i.prototype.removeCellStyle=function(t,e){return this._cellStyleMapTag.removeCellStyle(t,e)},i.prototype.getUserCellStyle=function(t,e){return this._cellStyleMapTag.getCellStyle(t,e)},Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._dataSource},set:function(t){if(t!==this._dataSource){this.$_clearRows(!0);var e=this._dataSource;e&&(this._checkableTag&&this._checkableTag.disconnect(),this._cellStyleMapTag.disconnect(),e.disposing||(e.removeTag(this._cellStyleMapTag),e.removeListener(this),e.unregisterCommandListener(this))),(e=this._dataSource=t)&&(this._checkableTag&&this._checkableTag.connect(e),this._cellStyleMapTag.connect(e),e.addTag(this._cellStyleMapTag),this.$_buildRows(),e.addListener(this),e.registerCommandListener(this)),this.disposing||(this.$_resetSummary(),this._fireReset(!0))}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._pubCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._pubCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemLength",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedCount",{get:function(){return this._fixedCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxItemCount",{get:function(){return this._maxItemCount},set:function(t){(t=Math.max(0,t))!=this._maxItemCount&&(this._maxItemCount=t,this._refreshItems())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorted",{get:function(){return this._sorted},enumerable:!1,configurable:!0}),i.prototype.getMovable=function(e){return!this.sorted||e&&this.sortMode===t.SortMode.EXPLICIT},i.prototype._hideDeletedChanged=function(){this.$_buildItems(),this._fireRefresh()},i.prototype.getItem=function(t){return t<0||t>=this._pubCount?null:this._pubItems[t]},i.prototype.getItems=function(t,e){return this._pubItems.slice(t,t+e)},i.prototype.getIndexOfRow=function(t){if(t>=0&&t<this._rows.length){var e=this._rows[t];return e&&this._pubItems.indexOf(e)>=0?e.index:-1}return-1},i.prototype.getItemOfRow=function(t,e){if(t>=0&&t<this._rows.length){var i=this._rows[t];return i.index>=0||e?i:null}return null},i.prototype._refreshItems=function(){var t={};this.$_saveExtents(t),this.$_clearRows(!1),this.$_buildRows(t),this._fireRefresh()},i.prototype.setFixed=function(t,e,i,o){t=Math.max(0,t),(o||t!=this._fixedCount||e!=this._fixedSorting||i!=this._filtering)&&(this._fixedCount=t,this._fixedSorting=e,this._fixedFiltering=i,this.$_buildItems(),this._fireRefresh())},i.prototype.exchange=function(t,e){if(t!=e&&!this._sorted&&!this._filtered){if(t<0||t>=this._rows.length)throw new Error("index1 is out of bounds: "+t);if(e<0||e>=this._rows.length)throw new Error("index2 is out of bounds: "+t);var i=this._rows[t];this._rows[t]=this._rows[e],this._rows[e]=i}},i.prototype.moveItem=function(t,e){if(t.index!==e&&t instanceof Go&&!this.$_needBuildItems()){var i=this._pubItems,o=t.index;(o>e||o<e)&&(i.splice(o,1),i.splice(e,0,t)),this._fireRefresh(!1)}},i.prototype.clearDisplayLevels=function(){for(var t=this._rows,e=t.length,i=0;i<e;i++)t[i]._displayLevel=-1},i.prototype.getAllItems=function(){return this._pubItems.slice()},i.prototype.getNumber=function(t){var e=this.$_getSummary(t);return e?e.count:this.itemCount},i.prototype.getSum=function(t){var e=this.$_getSummary(t);return e?e.sum:NaN},i.prototype.getMax=function(t){var e=this.$_getSummary(t);return e?e.max:NaN},i.prototype.getMin=function(t){var e=this.$_getSummary(t);return e?e.min:NaN},i.prototype.getAvg=function(t){var e=this.$_getSummary(t);return e?e.avg:NaN},i.prototype.getVar=function(t){var e=this.$_getSummary(t);return e?e.vars:NaN},i.prototype.getVarp=function(t){var e=this.$_getSummary(t);return e?e.varsp:NaN},i.prototype.getStdev=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.vars):NaN},i.prototype.getStdevp=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.varsp):NaN},i.prototype.getDataCount=function(t){var e=this.$_getSummary(t);return e?e.dataCount:0},i.prototype.getDataAvg=function(t){var e=this.$_getSummary(t);return e?e.dataAvg:NaN},i.prototype.canGrouping=function(t){return this.fireGrouping(t)},i.prototype.setSortingOptions=function(t){this._nullsOrder=t.nullsOrder,this._sortDataRow=t.sortDataRow,this._outerSort=t.outerSort},i.prototype.$_saveExtents=function(t){for(var e=0,i=this._rows.length;e<i;e++){var o=this._rows[e];o.dataRowId>=0&&(t[o.dataRowId]={exts:o._extents,heights:o.heights&&o.heights.slice()})}},i.prototype.$_clearRows=function(t){t&&this.clearRowHeights(!0),this._rows.length=this._filteredItems.length=this._sortedItems.length=this._pubCount=0,this._filtered=!1,this._sorted=!1,this._pubItems=this._rows,this.$_clearDistincts()},i.prototype.$_clearIndicies=function(){for(var t=this._rows.length;t--;)this._rows[t]._index=-1},i.prototype.$_clearDistincts=function(){for(var t=this._distinctRows.length;t--;)this._distinctRows[t]=null;this._distinctRows.length=0},i.prototype.$_buildRows=function(t){void 0===t&&(t=null);var e=this._dataSource;if(e){this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),this._rowCount=e.rowCount,!this._filtered&&!this._paging&&this.maxItemCount>0&&(this._rowCount=Math.min(this._rowCount,this.maxItemCount)),this._rows=new Array(this._rowCount);for(var i=0,o=this._rowCount;i<o;i++){var r=this._rows[i]=this.$_createRow(i);if(t&&t.hasOwnProperty(r.dataId)){var n=t[r.dataId];r._extents=n.exts,r.heights=n.heights&&n.heights.slice()}}this.$_buildItems(),this._checkableTag&&this._checkableTag.setRows(),0==this._rowCount&&this.clearRowHeights(!0)}},i.prototype.$_resetCounts=function(){this._filtered?this._pubCount=this._itemCount=this._items.length:this._pubCount=this._itemCount=this._rowCount=this._rows.length},i.prototype.$_buildItems=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=this._dataSource;if(i){var o=this.maxItemCount>0?this.maxItemCount:this._rows.length;if(this._rowCount=this._rows.length,this._pubItems=this._items=this._rows,this._pubCount=this._itemCount=this._rows.length,this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),(this._filtered||this._paging)&&this.$_clearIndicies(),this._filtered){if(this._filteredItems.length=0,this.hideDeleted||i.hiddenCount>0)for(var r=0;r<this._rowCount;r++){var n=this._rows[r],s=i.getRowState(this._rows[r].dataRow),a=i.isHiddenRow(this._rows[r].dataRow);this.hideDeleted&&kt(s)||a?n._index=-1:n._index=0}else for(r=0;r<this._rowCount;r++)this._rows[r]._index=0;var l=this.fixedCount,h=l>0&&!this._fixedFiltering,u=this._rows.length;if(!t){r=0;for(var c=this._filters.length;r<c;r++){if(y=this._filters[r])for(var d=0;d<y.length;d++)y[d].prepare(this._filterRuntime,i)}}this._paging||(u=Math.min(u,o));var p=0;for(r=0;r<this._rowCount&&p<u;r++){if((n=this._rows[r]).index>=0)if(t||h&&p<l)this._filteredItems.push(n),p++;else{var f=!this._filterOr,_=0,g=0;for(c=this._filters.length;g<c;g++){var y;if((y=this._filters[g])&&_++,this._filterOr){if(y&&this.$_select(y,n,g)){f=!0;break}}else if(y&&!this.$_select(y,n,g)){f=!1;break}}f||0===_?(this._filteredItems.push(n),p++):n._index=-1}}this._pubItems=this._items=this._filteredItems,this._pubCount=this._itemCount=this._items.length}else this._filteredItems.length=0;if(this._sorted){if(e){var m=this._sortedItems;for(r=m.length;r--;)m[r].index<0&&m.splice(r,1)}else!this.outerSort&&this.$_sortRows();this._pubItems=this.outerSort?this._items:this._sortedItems}else this._sortedItems.length=0;this._paging&&this.$_buildPageItems(),this.$_clearSummary()}},i.prototype.$_buildPageItems=function(){var t=this.$_getPageItems();this._pageItems.length=0;for(var e=this._pageStart=this._pageStartIndex>=0?this._pageStartIndex:this._currPage*this._pageSize,i=t.length,o=this.maxItemCount>0?this.maxItemCount:i,r=Math.min(this._pageSize,o);e<i&&r>0;e++,r--)this._pageItems.push(t[e]);this._pubItems=this._pageItems,this._pubCount=this._pubItems.length},i.prototype.$_buildPage=function(){this.$_clearIndicies(),this.$_buildPageItems()},i.prototype.$_compareFuncs=function(e,i){var o={},r=this._dataSource;if(r){for(var n=0,s=e.length;n<s;n++){var a=r.getField(e[n]);if(a){var l=r.getDataComparer(a.index)||this._labelComparer[a.index],h=i[n]==t.SortCase.INSENSITIVE;if(!l)switch(a.dataType){case t.ValueType.DATETIME:case t.ValueType.NUMBER:l=r.compareNumbers.bind(r);break;case t.ValueType.BOOLEAN:l=r.compareBools.bind(r);break;case t.ValueType.OBJECT:l=r.compareObjects.bind(r);break;default:l=h?r.compareTexts.bind(r):r.compareValues.bind(r)}l&&(o[e[n]]=l)}}return o}},i.prototype.$_sortRows=function(e){var i=this;void 0===e&&(e=null);var o=e||this._items.slice(),r=[];this._fixedCount>0&&!this._fixedSorting&&(r=o.splice(0,this._fixedCount));var n=this.$_compareFuncs(this._sortFields,this._sortCases);o.sort((function(e,o){for(var r,s,a,l=0,h=i._nullsOrder,u=0,c=i._sortFields.length;u<c;u++){var d=!(a=i._sortDirections[u]===t.SortDirection.DESCENDING)&&h===t.NullsOrder.LAST||a&&h===t.NullsOrder.FIRST?-1:1;if(s=i._sortFields.length==u+1,(r=n[i._sortFields[u]])&&0!==(l=r(i._sortFields[u],e.dataRow,o.dataRow,d)))break}return 0===(l*=a?-1:1)&&s?a&&i._sortDataRow?o.dataRow-e.dataRow:e.dataRow-o.dataRow:l})),this._sortedItems=r.concat(o)},i.prototype.$_createRow=function(t){var e=new Go(t);return this.attachItem(e),e._dataRowId=e.dataId,e},i.prototype.$_createAllRow=function(){for(var t=0;t<this._rowCount;t++)this._rows[t]||(this._rows[t]=this.$_createRow(t))},i.prototype.$_resetSummary=function(){this._summaryMap=[]},i.prototype.$_clearSummary=function(){if(this._summaryMap)for(var t=this._summaryMap.length-1;t>=0;t--)this._summaryMap[t]&&this._summaryMap[t].clear()},i.prototype.$_getSummary=function(t){var e=this._summaryMap[t];if(!e){var i=this._dataSource;i&&i.canSummarize(t)&&(e=new Mo(t),this._summaryMap[t]=e)}return e&&0==e.count&&this.itemCount>0&&this.$_summarize(e),e},i.prototype.$_summarize=function(e){var i=this._dataSource;if(i)if(this._filtered){for(var o=this._items.length,r=new Array(o),n=0;n<o;n++)r[n]=this._items[n].dataRow;i.summarizeRange(e,r,this._summaryMode==t.SummaryMode.STATISTICAL)}else i.summarize(e,this._summaryMode==t.SummaryMode.STATISTICAL)},i.prototype.$_needSort=function(){return this._sorted&&this.sortMode==t.SortMode.AUTO},i.prototype.$_needFilter=function(){return this._filtered&&this.filterMode==t.FilterMode.AUTO},i.prototype.$_needBuildItems=function(){return this.$_needFilter()||this.$_needSort()||this._paging},i.prototype.$_forceBuildItems=function(){try{return(this._filtered=this.$_checkFiltered())&&(!this._filteredItems||this._filteredItems.length<=0)&&(this._pubItems=this._filteredItems=this._items=this._items.slice()),this._sorted&&((!this._sortedItems||this._sortedItems.length<=0)&&(this._sortedItems=this._items.slice()),this._pubItems=this.outerSort?this._items:this._sortedItems),!this._filtered&&!this._sorted}catch(t){return!0}},i.prototype.$_workItems=function(){var t=[];return this._filtered&&t.push(this._filteredItems),this._sorted&&t.push(this._sortedItems),t},i.prototype.$_checkFiltered=function(){if(this._dataSource)return this._filters.length=this._dataSource.fieldCount,this.hasFilters()||this.hideDeleted&&this._dataSource.deletedCount>0||this._dataSource.hiddenCount>0},i.prototype.$_select=function(t,e,i){for(var o=0,r=t.length;o<r;o++)if(t[o].select(this._filterRuntime,e,i))return!0},i.prototype.$_checkSorted=function(){for(var t=this._sortFields.length-1;t>=0;t--){var e=this._dataSource?this._dataSource.fieldCount:0;this._sortFields[t]>e&&(this._sortFields.splice(t,1),this._sortDirections.splice(t,1),this._sortCases.splice(t,1))}return this._sortFields&&this._sortFields.length>0},i.prototype.$_getPageItems=function(){return this._sorted?this._sortedItems:this._filtered?this._filteredItems:this._items},i.prototype.fireGrouping=function(t){return this.fireConfirmEvent(Ur.GROUPING,t)},i.prototype.onDataSourceCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},i.prototype.onDataProviderDisposed=function(t){this._checkableTag&&this._checkableTag.disconnect(),this.$_clearRows(!0),this.$_buildRows(),this.$_resetSummary(),this._fireReset(!0),this.dataSource=null},i.prototype.onDataProviderReset=function(t,e){this.$_clearRows(!0),this.$_buildRows(),this.$_resetSummary(),this._fireReset(e)},i.prototype.onDataProviderRefresh=function(t){this._refreshItems()},i.prototype.onDataProviderRefreshClient=function(t){this._fireRefreshClient()},i.prototype.onDataProviderRowCountChanged=function(t,e){this._fireRefreshClient()},i.prototype.onDataProviderDataLoadComplated=function(){this._fireDataLoadComplated()},i.prototype.$_silentInsertRow=function(t){return!!(t&&t.index>=0&&t.index<this._pubCount)&&(this.$_workItems().forEach((function(e){var i=t.index;e.splice(i,0,t)})),this.$_clearSummary(),this.$_resetCounts(),!0)},i.prototype.$_silentInsertRows=function(t){var e=this;return!(!t||t.length<=0)&&(!(t=t.sort((function(t,e){return t.itemIndex-e.itemIndex}))).reduce((function(t,e){return t+(e.index>=0?0:1)}),0)&&(t.length>0&&(this.$_workItems().forEach((function(i){for(var o=0;o<t.length;o++){var r=t[o];(!e.hideDeleted||!kt(r.rowState))&&i.indexOf(r)<0&&i.splice(r.index,0,r)}})),this.$_clearSummary(),this.$_resetCounts(),!0)))},i.prototype.onDataProviderRowInserted=function(t,e,i){var o=this._rows,r=e<o.length?o[e]:null,n=this.$_createRow(e);o.splice(e,0,n);for(var s=e,a=o.length;s<a;s++)o[s]._dataRow=s;this.$_needBuildItems()?this.$_buildItems():(this.$_workItems().forEach((function(t){e=null!=i?i:Math.max(0,r?t.indexOf(r):t.length),t.splice(e,0,n)})),this.$_clearSummary(),this.$_resetCounts()),this._checkableTag&&this._checkableTag.insertRow(e),this._fireItemInserted(n),this._fireRefresh()},i.prototype.onDataProviderRowsInserted=function(t,e,i,o){if(!(i<0)){for(var r,n=this._rows,s=e<n.length?n[e]:null,a=[],l=0;l<i;l++)a.push(r=this.$_createRow(e+l)),n.splice(e+l,0,r);var h=n.length;for(l=e;l<h;l++)n[l]._dataRow=l;this.$_needBuildItems()?this.$_buildItems():(this.$_workItems().forEach((function(t){e=null!=o?o:Math.max(0,s?t.indexOf(s):t.length);for(var i=0;i<a.length;i++)t.splice(e+i,0,a[i])})),this.$_clearSummary(),this.$_resetCounts()),this._checkableTag&&this._checkableTag.insertRows(e,i),this._fireRefresh()}},i.prototype.$_silentRemoveRow=function(t){this.$_workItems().forEach((function(e){var i=e.indexOf(t);i>=0&&e.splice(i,1)})),this.$_clearSummary(),this.$_resetCounts()},i.prototype.onDataProviderRowRemoved=function(t,e){var i=this._rows,o=i[e];i.splice(e,1);for(var r=i.length-1;r>=e;r--)i[r]._dataRow=r;this.$_needBuildItems()?this.$_buildItems():this.$_silentRemoveRow(o),0==i.length&&this.clearRowHeights(!0),this._fireItemDeleted(o),this._fireRefresh()},i.prototype.onDataProviderRowsRemoving=function(t,e){return!0},i.prototype.$_silentRemoveRows=function(t){this.$_workItems().forEach((function(e){for(var i=0;i<t.length;i++){var o=t[i],r=e.indexOf(o);r>=0&&e.splice(r,1)}})),this.$_clearSummary(),this.$_resetCounts()},i.prototype.onDataProviderRowsRemoved=function(t,e){if(e&&!(e.length<1)){e.length>1&&e.sort((function(t,e){return t-e}));for(var i=this._rows,o=e[0],r=[],n=e.length-1;n>=0;n--)r.push(i[e[n]]),i.splice(e[n],1);for(n=this._rows.length-1;n>=o;n--)i[n]._dataRow=n;this.$_needBuildItems()?this.$_buildItems():this.$_silentRemoveRows(r),0==e.length&&this.clearRowHeights(!0),this._fireRefresh()}},i.prototype.onDataProviderRowUpdating=function(t,e,i){return!0},i.prototype.onDataProviderRowUpdated=function(t,e){this.$_needBuildItems()?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(e),this._rows[e]&&this._fireItemUpdated(this._rows[e]),this._fireRefresh()},i.prototype.onDataProviderRowsUpdated=function(t,e,i){this.$_needBuildItems()?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRows(e,i),this._fireRefresh()},i.prototype.onDataProviderRowListUpdated=function(t,e){this.$_needBuildItems()?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRowList(e),this._fireRefresh()},i.prototype.onDataProviderValueChanging=function(t,e,i,o){return!0},i.prototype.onDataProviderValueChanged=function(t,e,i){this.$_needBuildItems()?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(e),this._rows[e]&&this._fireItemUpdated(this._rows[e]),this._fireRefresh()},i.prototype.onDataProviderRowMoving=function(t,e,i){return!0},i.prototype.onDataProviderRowMoved=function(t,e,i){var o=this._rows,r=o.splice(e,1);o.splice(i,0,r[0]);for(var n=o.length,s=e=Math.min(e,i);s<n;s++)o[s]._dataRow=s;(this._sorted||this._paging||this.hideDeleted)&&this.$_buildItems(),this._fireRefresh()},i.prototype.onDataProviderRowsMoving=function(t,e,i,o){return!0},i.prototype.onDataProviderRowsMoved=function(t,e,i,o){this._refreshItems()},i.prototype.onDataProviderRowListMoving=function(t,e,i){return!0},i.prototype.onDataProviderRowListMoved=function(t,e,i){this._refreshItems()},i.prototype.onDataProviderStateChanged=function(t,e,i){if(this.hideDeleted){var o=this._rows[e];(kt(o.rowState)||kt(i))&&(this.$_needBuildItems()||this.$_forceBuildItems()?this.$_buildItems():kt(o.rowState)?this.$_silentRemoveRow(o):kt(i)&&(this.$_silentInsertRow(o)||this.$_buildItems()),this._fireRefresh())}this._checkableTag&&this._checkableTag.updateRow(e),this._fireRowStateChanged(this._rows[e])},i.prototype.onDataProviderRowHided=function(t,e,i){if(this._filtered=this.$_checkFiltered(),this.$_needBuildItems()||this.$_forceBuildItems()||!i)this.$_buildItems();else{var o=this.getItemsByRows(e);this.$_silentRemoveRows(o)}this._fireRefresh()},i.prototype.onDataProviderStatesChanged=function(t,e,i){if(this.hideDeleted){for(var o=!1,r=0,n=e.length;r<n;r++){var s=e[r],a=this._rows[s];if(kt(a.rowState)){o=!0;break}}if(this.$_needBuildItems()||this.$_forceBuildItems())this.$_buildItems();else{var l=this.getItemsByRows(e);o?this.$_silentRemoveRows(l):i&&this.$_silentInsertRows(l)||this.$_buildItems()}this._fireRefresh()}this._checkableTag&&this._checkableTag.changeStates(e),this._fireRowStatesChanged(this.getItemsByRows(e))},i.prototype.onDataProviderRestoreRows=function(t,e){this.$_needBuildItems()?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.changeStates(e),this._fireRowStatesChanged(this.getItemsByRows(e)),this._fireRefresh()},i.prototype.onDataProviderStatesCleared=function(t){this._pubCount!=t.rowCount&&this._refreshItems(),this._fireRowStatesCleared()},i}(qo),vn=function(t){function e(e,i,o){var r=t.call(this)||this;return r._owner=e,r._exprNode=Ie.Default.parse(i,["value","values"]),r._runtime=new yn,r._callback=o,r}return o(e,t),e.clearCheckables=function(t){for(var e=function(t){if(t){t.setCheckable(!0);for(var i=t.count;i--;){var o=t.getItem(i);o instanceof In&&e(o)}}},i=t.itemCount;i--;){var o=t.getItem(i);o instanceof In&&e(o)}},e.prototype.connect=function(t){this._runtime.setDataSource(t)},e.prototype.disconnect=function(){},e.prototype.clearRows=function(){e.clearCheckables(this._owner)},e.prototype.setRows=function(){for(var t=this._owner.itemCount;t--;){var e=this._owner.getItem(t);e instanceof In&&this.$_setCheckable(e,!0)}},e.prototype.addRow=function(t,e){void 0===e&&(e=!0);var i=this._owner.getItemOfRow(t.rowId);i instanceof In&&this.$_setCheckable(i,e)},e.prototype.addRows=function(t){for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e].rowId);i instanceof In&&this.$_setCheckable(i,!0)}},e.prototype.updateRow=function(t){var e=this._owner.getItemOfRow(t.rowId);e instanceof In&&this.$_setCheckable(e,!1)},e.prototype.updateRows=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e],r=this._owner.getItemOfRow(o.rowId);r instanceof In&&this.$_setCheckable(r,!1)}},e.prototype.changeStates=function(t){for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e].rowId);i instanceof In&&this.$_setCheckable(i,!1)}},e.prototype.$_setCheckable=function(t,e){if(t){var i=this._callback,o=void 0;if(i?o=i.call(this,t.dataSource.handler,t):(this._runtime.setItem(t),o=this._exprNode.evaluate(this._runtime)),t.setCheckable(o),e)for(var r=t.count;r--;){var n=t.getItem(r);n instanceof In&&this.$_setCheckable(n,!0)}}},e}(Lt),wn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._extents={},e}return o(e,t),e.prototype.connect=function(t){this._extents={}},e.prototype.disconnect=function(){this._extents={}},e.prototype.clearRows=function(){this._extents={}},e.prototype.setRows=function(){},e.prototype.addRow=function(t){this._extents[t.rowId]=0;for(var e=t.count-1;e>=0;e--)this.addRow(t.getChild(e))},e.prototype.addRows=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e];this.addRow(o)}},e.prototype.removeRow=function(t){delete this._extents[t.rowId];for(var e=t.count-1;e>=0;e--)this.removeRow(t.getChild(e))},e.prototype.removeRows=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e];this.removeRow(o)}},e.prototype.updateRow=function(t){},e.prototype.updateRows=function(t){},e.prototype.getExtents=function(t){var e=this._extents[t.rowId];return void 0===e?this._extents[t.rowId]=0:e},e.prototype.setExtents=function(t,e){this._extents[t.rowId]=e},e}(Lt),Cn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._styleMap={},e}return o(e,t),e.prototype.connect=function(t){this._styleMap={}},e.prototype.disconnect=function(){this._styleMap={}},e.prototype.clearRows=function(){this._styleMap={}},e.prototype.setRows=function(){this._styleMap={}},e.prototype.addRow=function(t){},e.prototype.addRows=function(t){},e.prototype.removeRow=function(t){delete this._styleMap[t.rowId]},e.prototype.removeRows=function(t){var e=this;t.forEach((function(t){return delete e._styleMap[t.rowId]}))},e.prototype.updateRow=function(t){},e.prototype.updateRows=function(t){},e.prototype.addCellStyle=function(t,e,i){return(this._styleMap[t]||(this._styleMap[t]={}))[e]=i,!0},e.prototype.getCellStyle=function(t,e){var i=this._styleMap[t];return i&&i[e]},e.prototype.removeCellStyle=function(t,e){if(null==t)this._styleMap={};else{var i=this._styleMap[t];i&&(i[e]&&delete i[e],Object.keys(i).length||this._styleMap[t])}return!0},e}(Lt),xn=function(t){function e(){var e=t.call(this)||this;return e._extents=0,e}return o(e,t),e.prototype._getExtents=function(){return this._extents},e.prototype._setExtents=function(t){this._extents=t},Object.defineProperty(e.prototype,"isLeaf",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){},enumerable:!1,configurable:!0}),e}(Ho),In=function(e){function i(t){var i=e.call(this)||this;return i._iconHeight=0,i._dataRow=t,i}return o(i,e),i.getTemp=function(t,e){return i.$_tempItem._dataRow=t,i.$_tempItem[Ho.PARENT]=e,i.$_tempItem},i.prototype.dispose=function(){this._dataRow=null,e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"iconHeight",{get:function(){return this._iconHeight},set:function(t){this._iconHeight=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"row",{get:function(){return this._dataRow},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowId",{get:function(){return this._dataRow?this._dataRow.rowId:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconIndex",{get:function(){return this._dataRow?this._dataRow.iconIndex:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasChildren",{get:function(){return this.count>0||this._dataRow&&this._dataRow.hasChildren},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rootItem",{get:function(){for(var t=this;t.level>1;)t=t.parent;return t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return t.SummaryMode.AGGREGATE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},enumerable:!1,configurable:!0}),i.prototype.setEditable=function(t,e){this._editable=t,this._readOnly=e},i.prototype._getExtents=function(){var t=this.provider;return t?t._extents.getExtents(this):0},i.prototype._setExtents=function(t){var e;null===(e=this.provider)||void 0===e||e._extents.setExtents(this,t)},Object.defineProperty(i.prototype,"isData",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isDataRow",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footer",{get:function(){return this._footer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerCount",{get:function(){return this._footer?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataRow",{get:function(){return this._dataRow?this._dataRow.rowId:-1},enumerable:!1,configurable:!0}),i.prototype.getShadowRow=function(){return this._dataRow?this._dataRow.rowId:-1},Object.defineProperty(i.prototype,"dataId",{get:function(){return this._dataRow?this._dataRow.rowId:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataRowId",{get:function(){return this.dataId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"descendantCount",{get:function(){return this._dataRow.descendantCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowState",{get:function(){return this._dataRow.rowState},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!this.hasChildren},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resizable",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return t.ItemType.TREE},enumerable:!1,configurable:!0}),i.prototype.getFooter=function(t){return this._footer},i.prototype.isFooter=function(t){return t===this._footer},i.prototype.canEdit=function(){return!0},i.prototype.createFooter=function(){this._footer||(this._footer=new xn)},i.prototype.setExpanded=function(t,e,i){(t!=this.expanded||i)&&(t?this.provider.expand(this,e,i,0):this.provider.collapse(this,e,i))},i.prototype.getData=function(t){return t=this.dataSource?this.dataSource.getFieldIndex(t):t,this._dataRow.getValue(t)},i.prototype.setData=function(t,e){t=this.dataSource?this.dataSource.getFieldIndex(t):t,this._dataRow.setValue(t,e,!1)},i.prototype.setItem=function(t,i){e.prototype.setItem.call(this,t,i),i._addChildren(t.children),t.clear()},i.prototype.exchange=function(t,e){this._exchangeItems(t,e)},i.prototype.moveChild=function(t,e){var i=t+e,o=this._children,r=o[t];if(e<0)for(var n=t;n>i;n--)o[n]=o[n-1];else for(n=t;n<i;n++)o[n]=o[n+1];o[i]=r},i.prototype.moveChildren=function(t,e,i){for(var o=this._children,r=o.splice(t,e),n=t+i,s=0;s<e;s++)o.splice(n+s,0,r[s])},i.prototype.changeParent=function(t,e){this.parent.remove(this),t&&t.insert(e,this)},i.prototype.getRowData=function(){return this._dataRow&&this._dataRow._values.concat()},i.$_tempItem=new i(null),i}(Wo),Sn=function(t){function e(e){var i=t.call(this,null)||this;return i._rs=e,i}return o(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"provider",{get:function(){return this._rs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"expanded",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.setExpanded=function(t,e,i){},Object.defineProperty(e.prototype,"isLeaf",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._rs.dataSource},enumerable:!1,configurable:!0}),e}(In),En=function(t){function e(e){var i=t.call(this)||this;return i._fixedCount=0,i._items=new Array,i._list=new Array,i._rs=e,i}return o(e,t),Object.defineProperty(e.prototype,"provider",{get:function(){return this._rs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fixedCount",{get:function(){return this._fixedCount},enumerable:!1,configurable:!0}),e.prototype.getItem=function(t){return this._items[t]},e.prototype.setItem=function(t,e){this._items[t]=e},e.prototype.indexOf=function(t){return this._items.indexOf(t)},e.prototype.clear=function(){this._items.length=0},e.prototype.expand=function(t,e,i){void 0===i&&(i=0),t&&this.$_expandItem(t,e,i)},e.prototype.collapse=function(t){if(t)for(var e=this._rs,i=this._items,o=t.index+1;o<i.length&&i[o].level>t.level;){if(i[o]==t.footer){e.footerWhenCollapsed||(i[o]._index=-1,i.splice(o,1));break}i[o]._index=-1,i.splice(o,1)}},e.prototype.getNext=function(t){return t&&t.visible&&t.index<this.count-1?this._items[t.index+1]:null},e.prototype.getPrior=function(t){return t&&t.visible&&t.index>0?this._items[t.index-1]:null},e.prototype.insert=function(t,e){this._items.splice(e,0,t)},e.prototype.remove=function(t){var e=this._items,i=e.indexOf(t);if(i>=0&&(e.splice(i,1),t.expanded))for(;i<e.length&&t.isDescendant(e[i]);)e.splice(i,1)},e.prototype.$_collectChildren=function(t,e,i,o){for(var r=0,n=t.count;r<n;r++){var s=t.getItem(r);s&&(e.push(s),(i&&s.level<o||s.expanded)&&this.$_collectChildren(s,e,i,o))}t.footer&&e.push(t.footer)},e.prototype.$_expandItem=function(t,e,i){var o,r=this._items,n=this._list;if(o=t instanceof Sn?this._fixedCount:t.index+1,i=Math.max(0,i),n.length=0,this.$_collectChildren(t,n,e,i>0?t.level+i:1e6),e){for(var s=o,a=r.length;s<a&&!(r[s].level<=t.level);s++);r.splice(o,s-o)}for(s=0,a=n.length;s<a;s++)r.splice(o+s,0,n[s])},e.prototype._clearAndInit=function(t){this.clear(),this._fixedCount=Math.min(t,this._rs.itemCount);for(var e=0;e<this._fixedCount;e++)this._items.push(this._rs.getItem(e))},e}(Lt),On=function(e){function i(){var i=e.call(this,null)||this;return i._sortMode=t.SortMode.AUTO,i._expandWhenGrouping=!0,i._footerWhenExpanded=!0,i._footerWhenCollapsed=!0,i._labelComparer={},i._checkableExpression=null,i._checkableCallback=null,i._extents=new wn,i._filters={},i._filterRuntime=new ur,i._filtered=!1,i._sortFields=[],i._sortDirections=[],i._sortCases=[],i._visibleItems=new En(i),i._itemMap=[],i._itemCount=0,i._summaryMap=null,i._filterLock=0,i._includeParentItem=!0,i._cellStyleMap=new Cn,i}return o(i,e),i.prototype._doDispose=function(){this._filters=null,this._filterRuntime=null,this._sortFields=null,this._sortDirections=null,this._sortCases=null,this._visibleItems=null,this._itemMap=null,this._summaryMap=null,this._checkableExpression=null,this._checkableCallback=null,this._checkableTag=null,this._labelComparer=null;var t=this.dataSource;t&&!t.disposing&&(t.removeTag(this._extents),t.removeTag(this._cellStyleMap),t.removeListener(this),t.unregisterCommandListener(this)),e.prototype._doDispose.call(this)},i.prototype.getCommandStates=function(t){var e=this._itemMap[t.rowId];return e&&e._getExtents()},i.prototype.setCommandStates=function(t,e){var i=t&&this._itemMap[t.rowId];null!=e&&i&&i._setExtents(e)},Object.defineProperty(i.prototype,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){t!=this._expandWhenGrouping&&(this._expandWhenGrouping=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerWhenExpanded",{get:function(){return this._footerWhenExpanded},set:function(t){t!=this._footerWhenExpanded&&(this._footerWhenExpanded=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerWhenCollapsed",{get:function(){return this._footerWhenCollapsed},set:function(t){t!=this._footerWhenCollapsed&&(this._footerWhenCollapsed=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labelComparer",{get:function(){return this._labelComparer},set:function(t){this._labelComparer=t||{}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return this._summaryMode||Xe.summaryMode||t.SummaryMode.AGGREGATE},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_resetSummary(),this._fireRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupSummaryMode",{get:function(){return this._groupSummaryMode||Xe.groupSummaryMode||t.SummaryMode.AGGREGATE},set:function(t){t!=this._groupSummaryMode&&(this._groupSummaryMode=t,this.$_resetGroupSummary(),this._fireRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hideDeleted",{get:function(){return this._hideDeleted},set:function(t){t!=this._hideDeleted&&(this._hideDeleted=t,this._saveAndRefresh())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new vn(this,t),this.dataSource&&this._checkableTag.connect(this.dataSource)))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableCallback",{get:function(){return this._checkableCallback},set:function(t){t!=this._checkableCallback&&(this._checkableCallback=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new vn(this,null,t),this.dataSource&&this._checkableTag.connect(this.dataSource)))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortMode",{get:function(){return this._sortMode},set:function(t){t!=this._sortMode&&(this._sortMode=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"includeParentItem",{get:function(){return this._includeParentItem},set:function(t){this._includeParentItem=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"outerSort",{get:function(){return null!=this._outerSort?this._outerSort:Xe.sorting.outerSort},enumerable:!1,configurable:!0}),i.prototype.$_needSort=function(){return this._sortFields&&this._sortFields.length>0&&this._sortMode==t.SortMode.AUTO},i.prototype.insertItem=function(t,e,i,o){var r=this._visibleItems;t.collapsed&&r.expand(t,!1);var n=r.indexOf(t.getItem(i));if(o){t.insert(i+1,e);for(var s=r.count,a=t.level+1;++n<s&&!(r.getItem(n).level<=a););r.insert(e,n)}else t.insert(i,e),r.insert(e,n)},i.prototype.appendItem=function(t,e){var i,o=this._visibleItems;t.collapsed&&o.expand(t,!1),i=t.count>0?o.indexOf(t.getItem(t.count-1)):o.indexOf(t);for(var r=o.count,n=t.level;++i<r&&!(o.getItem(i).level<=n););t.add(e),o.insert(e,i)},i.prototype.removeItem=function(t){this._visibleItems.remove(t),t.parent.remove(t)},i.prototype.$_calcLevel=function(t,e,i){var o,r,n=t.count,s=e;for(o=0;o<n;o++)(r=t.getItem(o))&&(s=Math.max(s,e+1),i&&!r.expanded||(s=Math.max(s,this.$_calcLevel(r,e+1,i))));return s},i.prototype.getLevels=function(t){return this.$_calcLevel(this._rootItem,0,t)},i.prototype.$_setExpanded=function(t,e,i,o){if(!o&&0===t.count&&t.hasChildren||(this._setExpanded(t,!0),this.dataSource.setHasChildren(t.row,!1)),e)for(var r=0,n=t.count;r<n;r++){var s=t.getItem(r);s instanceof In&&(s.expanded||s.level<i)&&this.$_setExpanded(s,!0,i,o)}},i.prototype._expandItem=function(t,e,i,o,r,n){if(t&&(e||!t.expanded)){if(r&&!this._fireExpanding(t))return;this._visibleItems.collapse(t),this._visibleItems.expand(t,i,o),this.$_setExpanded(t,i,o>0?t.level+o:1e6,n);try{this._fireRefresh(!1)}finally{r&&this._fireExpanded(t)}}},i.prototype.expand=function(t,e,i,o){void 0===o&&(o=0),this._expandItem(t,i,e,o,!0,!0)},i.prototype.expandAll=function(t,e){this._expandItem(this._rootItem,!0,!0,t>0?t+1:0,!0,e)},i.prototype.$_setCollapsed=function(t,e){if(this._setExpanded(t,!1),e)for(var i=0,o=t.count;i<o;i++){var r=t.getItem(i);r instanceof In&&this.$_setCollapsed(r,!0)}},i.prototype._collapseItem=function(t,e,i,o){if(t&&(e||t.expanded)){if(o&&!this._fireCollapsing(t))return;this._visibleItems.collapse(t),this.$_setCollapsed(t,i),t==this._rootItem&&this._visibleItems.expand(this._rootItem,!1);try{this._fireRefresh(!1)}finally{o&&this._fireCollapsed(t)}}},i.prototype.collapse=function(t,e,i){this._collapseItem(t,i,e,!0)},i.prototype.collapseAll=function(){this._collapseItem(this._rootItem,!0,!0,!0)},i.prototype.$_saveExpanded=function(t){t._saveExpanded();for(var e=0,i=t.count;e<i;e++)this.$_saveExpanded(t.getItem(e))},i.prototype.orderBy=function(e,i,o,r){var n=this;void 0===r&&(r=!0),this._fireSort(e,i,o),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var s=e?e.length:0,a=i?i.length:0,l=o?o.length:0,h=0;h<s;h++)this._sortFields.push(e[h]),a>h?this._sortDirections.push(i[h]):a>0?this._sortDirections.push(i[a-1]):this._sortDirections.push(t.SortDirection.ASCENDING),l>h?this._sortCases.push(o[h]):l>0?this._sortCases.push(o[l-1]):this._sortCases.push(t.SortCase.SENSITIVE);this._saveAndRefresh(!0,r);var u=this.outerSort;if(u&&u instanceof Function){var c=this._fireOuterSort(u,this._sortFields,this._sortDirections);c instanceof Promise?c.then((function(){r&&n._fireRefresh(),n._fireSorted()})):(r&&this._fireRefresh(),this._fireSorted())}else r&&this._fireRefresh(),this._fireSorted()},i.prototype.getSortFields=function(){return this._sortFields.concat()},i.prototype.getSortDirections=function(){return this._sortDirections.concat()},i.prototype.getSortCases=function(){return this._sortCases.concat()},i.prototype.beginFiltering=function(){this._filterLock++},i.prototype.$_prepareFiltering=function(t,e){for(var i=e._dataRow.count,o=e.rowId,r=o<=-1||this.$_selectItem(e),n=0;n<i;n++){var s=new In(e._dataRow._children[n]);s[Ho.PARENT]=e,s&&!this.dataSource.isHiddenRow(s.rowId)&&(r=this.$_prepareFiltering(t,s)||r)}return t[o]=r},i.prototype.endFiltering=function(t,e,i,o){var r={};t&&this._includeParentItem&&(r={},this.$_prepareFilters(),this.$_prepareFiltering(r,this._rootItem)),this._filterLock>0&&(this._filterLock=Math.max(0,this._filterLock-1),t&&0==this._filterLock&&this.applyFilters(e,i,r,o))},i.prototype.hasFilter=function(t){var e=this._filters[t];return!!e&&e.length>0},i.prototype.addFilter=function(t,e){var i=this._filters[t];i||(i=[],this._filters[t]=i);var o=new lr(e);return i.push(o),o},i.prototype.clearAllFilters=function(){this._filtered&&(this._filters={},this.applyFilters(null,null))},i.prototype.hasFilters=function(){for(var t in this._filters){var e=this._filters[t];if(e&&e.length>0)return!0}return!1},i.prototype.$_prepareFilters=function(){var t=this.dataSource,e=t.fieldCount;for(var i in this._filters)Number(i)>=e&&(this._filters[i]=null);if(this._filtered=this.hasFilters())for(var o in this._filters){var r=this._filters[o];if(r)for(var n=r.length;n--;)r[n].prepare(this._filterRuntime,t)}},i.prototype.applyFilters=function(t,e,i,o){if(i||this.$_prepareFilters(),0==this._filterLock){this.$_saveExpanded(this._rootItem),this.$_clearItems(),this.$_buildTree(!0,i);try{this._fireRefresh()}finally{this._fireFiltered(t,e,o)}}},i.prototype.getItemByRow=function(t){return t?this._itemMap[t.rowId]:null},i.prototype.getCheckedRows=function(){var t=[];return function t(e,i){if(e instanceof In)for(var o=0,r=e.count;o<r;o++){var n=e.getItem(o),s=void 0;n.checked&&(s=n.row)&&i.push(s),t(n,i)}}(this._rootItem,t),t},i.prototype.getCheckedRowIds=function(){var t=[];return function t(e,i){if(e instanceof In)for(var o=0,r=e.count;o<r;o++){var n=e.getItem(o),s=void 0;n.checked&&(s=n.dataRow)>=0&&i.push(s),t(n,i)}}(this._rootItem,t),t},i.prototype.resetCheckables=function(){this._checkableTag&&(this._checkableTag.clearRows(),this._fireRefresh())},i.prototype.applyCheckables=function(){this._checkableTag?this._checkableTag.setRows():vn.clearCheckables(this),this._fireRefresh()},i.prototype.$_checkChildren=function(t,e,i){for(var o=0,r=t.count;o<r;o++){var n=t.getItem(o);n&&(i?n.checkable&&this._setCheckItem(n,e):this._setCheckItem(n,e)),n instanceof In&&this.$_checkChildren(n,e,i)}},i.prototype._clearChecked=function(){this.$_checkChildren(this._rootItem,!1,!1)},i.prototype.checkAll=function(t,i,o,r){i?e.prototype.checkAll.call(this,t,i,o,r,!1):(this.$_checkChildren(this._rootItem,t,o),r?this._fireItemAllChecked(t):this._fireRefreshClient(),this._fireItemCheckChanged(null,t))},i.prototype.addCellStyle=function(t,e,i){return this._cellStyleMap.addCellStyle(t,e,i)},i.prototype.removeCellStyle=function(t,e){return this._cellStyleMap.removeCellStyle(t,e)},i.prototype.getUserCellStyle=function(t,e){return this._cellStyleMap.getCellStyle(t,e)},Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._ds},set:function(t){if(t!==this._ds){this.$_clearItems(),this.$_resetSummary();var e=this._ds;e&&!e.disposing&&(e.removeTag(this._extents),e.removeTag(this._cellStyleMap),e.removeListener(this),e.unregisterCommandListener(this)),(e=this._ds=t)&&(this.$_buildTree(),e.addTag(this._extents),e.addTag(this._cellStyleMap),e.addListener(this,0),e.registerCommandListener(this)),this._fireReset(!0)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._visibleItems.count},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._itemCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorted",{get:function(){return this._sortFields&&this._sortFields.length>0},enumerable:!1,configurable:!0}),i.prototype.getMovable=function(e){return!this.sorted||e&&this.sortMode===t.SortMode.EXPLICIT},i.prototype._createRootItem=function(){var t=new Sn(this);return this._setExpanded(t,!0),t},i.prototype.getItem=function(t){return t>=0&&t<this._visibleItems.count?this._visibleItems.getItem(t):null},i.prototype.getItems=function(t,e){throw new Error("Method not implemented.")},i.prototype.getItemOfRow=function(t,e){return this._itemMap[t]},i.prototype.$_collectItems=function(t,e){for(var i=0,o=t.count;i<o;i++){var r=t.getItem(i);r instanceof In&&(e.push(r),this.$_collectItems(r,e))}},i.prototype.getAllItems=function(){var t=[];return this.$_collectItems(this._rootItem,t),t},i.prototype.getJsonRows=function(){return this.getAllItems().map((function(t){var e=t.getRowObject();return e.__level=t.level,e}))},i.prototype.getNumber=function(t){var e=this.$_getSummary(t);return e?e.count:this.itemCount},i.prototype.getSum=function(t){var e=this.$_getSummary(t);return e?e.sum:NaN},i.prototype.getMax=function(t){var e=this.$_getSummary(t);return e?e.max:NaN},i.prototype.getMin=function(t){var e=this.$_getSummary(t);return e?e.min:NaN},i.prototype.getAvg=function(t){var e=this.$_getSummary(t);return e?e.avg:NaN},i.prototype.getVar=function(t){var e=this.$_getSummary(t);return e?e.vars:NaN},i.prototype.getVarp=function(t){var e=this.$_getSummary(t);return e?e.varsp:NaN},i.prototype.getStdev=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.vars):NaN},i.prototype.getStdevp=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.varsp):NaN},i.prototype.getDataCount=function(t){var e=this.$_getSummary(t);return e?e.dataCount:0},i.prototype.getDataAvg=function(t){var e=this.$_getSummary(t);return e?e.dataAvg:NaN},i.prototype.findItem=function(e,i,o,r,n){var s=this.dataSource;if(!s)return-1;if(this.itemCount<1)return-1;var a=Math.min(e.length,i.length);if(a<1)return-1;var l=o.allFields,h=o.caseSensitive,u=o.partialMatch,c=null,d=[],p=o.reverse,f=o.compareCallback;f="function"==typeof f?f:Rt.compareTextValue;for(var _=0;_<a;_++)d[_]=s.getField(e[_]).dataType;r=Math.max(0,r),n=Math.min(this._visibleItems.count-1,n);for(var g=r;p?g>=n:g<=n;p?g--:g++){var y=this._visibleItems.getItem(g),m=y.dataRow,b=y.dataRow>=0;if(b)for(_=0;_<a;_++){var v=y.getData(e[_]),w=s.getOrgFieldName(e[_]);switch(d[_]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(i[_]instanceof Date)b=f.call(s.handler,i[_],v,h,u,m,w);else{if(!c){var C=/[.]/.test(i[_])?"yyyy.MM.dd":/[/]/.test(i[_])?"yyyy/MM/dd":/[-]/.test(i[_])?"yyyy-MM-dd":"yyyyMMdd";c=new Ge(C)}b=f.call(s.handler,i[_],v?c.getText(v):v,h,u,m,w)}break;default:b=f.call(s.handler,i[_],v,h,u,m,w)}if(b&&!l)return g;if(!b&&l)break}if(b)return g}return-1},i.prototype.findCell=function(e,i,o,r,n,s){var a=this.dataSource;if(!a)return null;if(this.itemCount<1)return null;for(var l=o.reverse,h=o.caseSensitive,u=o.partialMatch,c=a.fieldCount,d=e.length,p=null,f=[],_=0;_<c;_++)f[_]=a.getField(_).dataType;r=Math.max(0,r),n=Math.min(this._visibleItems.count-1,n),s=Math.max(l?-1:0,Math.min(s,d-1)),l?s<0&&(s=e.length-1,r--):s>=e.length&&(r++,s=0);var g=o.compareCallback;g="function"==typeof g?g:Rt.compareTextValue;for(var y=r;l?y>=n:y<=n;l?y--:y++){var m=this._visibleItems.getItem(y),b=m.dataRow,v=!1;if(m.dataRow>=0)for(_=l?y<r?d-1:s:y>r?0:s;l?_>=0:_<d;l?_--:_++){var w=e[_],C=a.getOrgFieldName(w);if(w>=0&&w<c){var x=m.getData(w);switch(f[w]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(i instanceof Date)v=g.call(a.handler,i,x,h,u,b,C);else{if(!p){var I=/[.]/.test(i)?"yyyy.MM.dd":/[/]/.test(i)?"yyyy/MM/dd":/[-]/.test(i)?"yyyy-MM-dd":"yyyyMMdd";p=new Ge(I)}v=g.call(a.handler,i,x?p.getText(x):x,h,u,b,C)}break;default:v=g.call(a.handler,i,x,h,u,b,C)}if(v)return{itemIndex:y,fieldIndex:w,searchFieldIndex:_}}}}return null},i.prototype.setTreeOptions=function(t){this._expandWhenSetData=t.expandWhenSetData},i.prototype.setSortingOptions=function(t){this._nullsOrder=t.nullsOrder,this._outerSort=t.outerSort,this._sortDataRow=t.sortDataRow},i.prototype.$_internalAddItem=function(t,e,i){var o=In.getTemp(e,t),r=this.dataSource;if(!(this.hideDeleted&&kt(o.rowState)||r.isHiddenRow(e.rowId)))return o&&(null!=i?i:this.$_selectItem(o))?(o=new In(e),t.insert(e.index,o),this._itemCount++,this._itemMap[e.rowId]=o,o):void 0},i.prototype.$_internalRemoveItem=function(t){t&&(t.parent.remove(t),this._itemCount--,this._itemMap[t.row.rowId]=void 0)},i.prototype.$_internalRowStateChanged=function(t,e){if(void 0===e&&(e=!0),t)if(this.hideDeleted&&kt(t.rowState)){var i=t.parent;this.$_internalRemoveItem(t),this.$_clearSummary(),i.expanded&&i.visible&&(this._visibleItems.remove(t),e=!0),e&&this._fireRefresh()}else this._fireItemChanged(t)},i.prototype.$_selectField=function(t,e,i){for(var o=0,r=t.length;o<r;o++){var n=t[o];if(!(n.model instanceof ar)&&n.select(this._filterRuntime,e,i))return!0}return!1},i.prototype.$_selectItem=function(t){if(!t)return!1;for(var e in this._filters){var i=this._filters[e];if(i&&!this.$_selectField(i,t,Number(e)))return!1}return!!t},i.prototype._setItem=function(t,e){this._visibleItems.setItem(t.index,e),this._resetItemIndex(t.index)},i.prototype.$_resetVisibleItems=function(){this._visibleItems._clearAndInit(this.fixedCount),this._visibleItems.expand(this._rootItem,!1),this._setExpanded(this._rootItem,!0)},i.prototype.$_clearItems=function(){this._visibleItems.clear(),this._rootItem.clear(),this._itemMap=[],this._itemCount=0},i.prototype.$_buildItems=function(e,i,o){void 0===i&&(i=!1);for(var r=e.row,n=r.count,s=0;s<n;s++){var a=r.getChild(s),l=this.$_internalAddItem(e,a,o?o[a.rowId]:null);if(l){if(this._remainExpandedMap)switch(this._expandWhenSetData){case t.ExpandWhenSetData.REMAIN_AND_EXPAND:this.$_compareRemainExpand(l,!0);break;case t.ExpandWhenSetData.REMAIN_AND_COLLAPSE:this.$_compareRemainExpand(l,!1);break;case t.ExpandWhenSetData.EXPAND:this.$_setExpanded(l,!1,0,!1);case t.ExpandWhenSetData.COLLAPSE:}i&&l._restoreExpanded(),a.count>0&&this.$_buildItems(l,i,o)}}},i.prototype.$_compareRemainExpand=function(t,e){var i=this._ds,o=i.getFieldIndex(i.treeField),r=t.getData(o);this._remainExpandedMap.hasOwnProperty(r)?this._remainExpandedMap[r]&&this.$_setExpanded(t,!1,0,!1):e&&this.$_setExpanded(t,!1,0,!1)},i.prototype.$_sortItem=function(t){this.$_sort(t,this._sortFields,this._sortDirections,this._sortCases)},i.prototype.$_sort=function(e,i,o,r){var n=this,s=this._nullsOrder;e._children.sort((function(e,a){for(var l,h,u=0,c=0,d=i.length;c<d;c++){l=o[c]===t.SortDirection.ASCENDING,h=n._sortFields.length==c+1;var p=l?s===t.NullsOrder.LAST?-1:1:s===t.NullsOrder.FIRST?-1:1,f=n.$_getComparer(i[c],r[c]===t.SortCase.INSENSITIVE);if(0!=(u=f?f(i[c],e.row,a.row,p):0))break}return 0===(u*=l?1:-1)&&h?!n._sortDataRow||l?e.rowId-a.rowId:a.rowId-e.rowId:u}));for(var a=0;a<e.children.length;a++)this.$_sort(e.getItem(a),i,o,r)},i.prototype.$_getComparer=function(e,i){var o=this._ds,r=this._ds._comparers[e]||this.labelComparer[e],n=this._ds.getField(e);if(r)return function(t,e,i){return r(t,e.rowId,i.rowId)};switch(n.dataType){case t.ValueType.NUMBER:case t.ValueType.DATETIME:return o.compareNumbers;case t.ValueType.BOOLEAN:return o.compareBools;case t.ValueType.OBJECT:return o.compareObjects.bind(o);default:return i?o.compareTexts.bind(o):o.compareValues.bind(o)}},i.prototype.$_buildTree=function(t,e){void 0===t&&(t=!1);var i=this.dataSource;this._rootItem._dataRow=i.rootRow,this._itemMap[this._rootItem._dataRow.rowId]=this._rootItem,this.$_buildItems(this._rootItem,t,e),this.$_clearSummary();for(var o=i.fieldCount,r=this._sortFields,n=this._sortDirections,s=this._sortCases,a=r.length;a--;)(r[a]<0||r[a]>=o)&&(r.splice(a,1),n.splice(a,1),s.splice(a,1));this.sorted&&this._rootItem.count>0&&!this.outerSort&&this.$_sortItem(this._rootItem),this.$_resetVisibleItems(),this._checkableTag&&this._checkableTag.setRows()},i.prototype.$_resetSummary=function(){this._summaryMap=[]},i.prototype.$_resetGroupSummary=function(){},i.prototype.$_clearSummary=function(){if(this._summaryMap)for(var t=this._summaryMap.length;t--;)this._summaryMap[t]&&this._summaryMap[t].clear()},i.prototype.$_getSummary=function(t){var e=this._summaryMap[t];if(!e){var i=this.dataSource;i&&i.canSummarize(t)&&(e=new Mo(t),this._summaryMap[t]=e)}return e&&0==e.count&&this.itemCount>0&&this.$_summarize(e),e},i.prototype.$_summarize=function(e){var i=this.dataSource;if(i)if(this._filtered||this.hideDeleted||i.hiddenCount>0){for(var o=this._rootItem.getDescendants(!1),r=o.length,n=[],s=0;s<r;s++){var a=o[s];a instanceof In&&!i.isHiddenRow(a.rowId)&&n.push(a.row)}e.count=n.length,i.summarizeRange(e,n,this.summaryMode==t.SummaryMode.STATISTICAL)}else e.count=i.rowCount,i.summarize(e,this.summaryMode==t.SummaryMode.STATISTICAL)},i.prototype.$_saveRemainPrepareMap=function(){var e=this._ds,i=e.getFieldIndex(e.treeField);var o=this._expandWhenSetData;return o==t.ExpandWhenSetData.COLLAPSE||o==t.ExpandWhenSetData.EXPAND?{}:function t(e,i,o){for(var r=0;r<e.count;r++){var n=e.children[r];o[n.getData(i)]=n.expanded,n.count>0&&t(n,i,o)}return o}(this.rootItem,i,{})},i.prototype._fireItemChanged=function(t){this._eventLock<=0&&this.fireEvent(i.ITEM_CHANGED,t)},i.prototype._fireExpanding=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(i.EXPANDING,t)},i.prototype._fireExpanded=function(t){this._eventLock<=0&&this.fireEvent(i.EXPANDED,t)},i.prototype._fireCollapsing=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(i.COLLAPSING,t)},i.prototype._fireCollapsed=function(t){this._eventLock<=0&&this.fireEvent(i.COLLAPSED,t)},i.prototype._fireParentChanging=function(t,e,o){return!(this._eventLock<=0)||this.fireConfirmEvent(i.PARENT_CHANGING,t,e,o)},i.prototype._fireParentChanged=function(t,e,o){this._eventLock<=0&&this.fireEvent(i.PARENT_CHANGED,t,e,o)},i.prototype._refreshItems=function(){this.$_clearItems(),this.$_buildTree(),this._fireRefresh()},i.prototype._saveAndRefresh=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),t&&this.$_saveExpanded(this._rootItem);var i={};this.hasFilters()&&function t(e,i){i[e.dataId]=!0,e.children.length>0&&e.children.forEach((function(e){t(e,i)}))}(this._rootItem,i),this.$_clearItems(),this.$_buildTree(t,i),e&&this._fireRefresh()},i.prototype.onDataSourceCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},i.prototype.onTreeDataProviderDisposed=function(t){this.disposing||(this.$_clearItems(),this.$_resetSummary(),this._fireReset(!0),this.dataSource=null)},i.prototype.onTreeDataProviderReset=function(t,e){this.$_clearItems(),this.$_resetSummary(),this.$_buildTree(),this._fireReset(e)},i.prototype.onTreeDataProviderRefresh=function(t){this._refreshItems(),this._remainExpandedMap=void 0},i.prototype.onTreeDataProviderRefreshClient=function(t){this._fireRefreshClient()},i.prototype.onTreeDataProviderPrepareRemain=function(){this._remainExpandedMap=this.$_saveRemainPrepareMap()},i.prototype.onDataProvderCleared=function(t){this._refreshItems()},i.prototype.onTreeDataProviderRowCountChanged=function(t,e){},i.prototype.onTreeDataProviderRowAdding=function(t,e,i){return!0},i.prototype.onTreeDataProviderRowAdded=function(t,e){var i=this._itemMap[e.parent.rowId];if(i){var o=this.$_internalAddItem(i,e,!0);o?(this.$_buildItems(o),this.$_clearSummary(),i.expanded?this._expandItem(i,!0,!1,0,!1,!0):this._fireItemChanged(i)):this.$_resetVisibleItems()}this._checkableTag&&(this._checkableTag.addRow(e,!1),e.parent.level>0&&this._checkableTag.addRow(e.parent,!1)),this.$_needSort()&&this._saveAndRefresh()},i.prototype.onTreeDataProviderRowsAdded=function(t,e,i){var o,r=this._itemMap[e.rowId];if(r&&i&&(o=i.length)>0){for(var n=0;n<o;n++){var s=i[n],a=this.$_internalAddItem(r,s,!0);a&&this.$_buildItems(a)}this.$_clearSummary(),r.expanded?this._expandItem(r,!0,!1,0,!1,!0):this._fireItemChanged(r),this._checkableTag&&(this._checkableTag.addRows(i),e.level>0&&this._checkableTag.addRow(e))}this.$_needSort()&&this._saveAndRefresh()},i.prototype.onTreeDataProviderRowRemoving=function(t,e){return!0},i.prototype.onTreeDataProviderRowRemoved=function(t,e){var i=this._itemMap[e.rowId];if(i){var o=i.parent;this.$_internalRemoveItem(i),this.$_clearSummary(),o.expanded&&o.visible&&(this._visibleItems.remove(i),this._fireRefresh())}},i.prototype.onTreeDataProviderRowsRemoving=function(t,e){return!0},i.prototype.onTreeDataProviderRowsRemoved=function(t,e){for(var i=e.length,o=!1,r=0;r<i;r++){var n=e[r],s=this._itemMap[n.rowId];if(s){var a=s.parent;this.$_internalRemoveItem(s),a.expanded&&a.visible&&(this._visibleItems.remove(s),o=!0)}}this.$_clearSummary(),o&&this._fireRefresh()},i.prototype.onTreeDataProviderRowUpdating=function(t,e){return!0},i.prototype.onTreeDataProviderRowUpdated=function(t,e){if(this.$_needSort())this._saveAndRefresh();else{var i=this._itemMap[e.rowId];this.$_clearSummary(),this._fireItemUpdated(i),this._fireRefresh()}this._checkableTag&&this._checkableTag.updateRow(e)},i.prototype.onTreeDataProviderRowsUpdating=function(t,e){return!0},i.prototype.onTreeDataProviderRowsUpdated=function(t,e){this.$_needSort()?this._saveAndRefresh():(this.$_clearSummary(),this._fireRefresh()),this._checkableTag&&this._checkableTag.updateRows(e)},i.prototype.onTreeDataProviderValueChanging=function(t,e,i){return!0},i.prototype.onTreeDataProviderValueChanged=function(t,e,i){if(this.$_needSort())this._saveAndRefresh();else{var o=this._itemMap[e.rowId];this.$_clearSummary(),this._fireItemUpdated(o),this._fireRefresh()}this._checkableTag&&this._checkableTag.updateRow(e)},i.prototype.onTreeDataProviderIconIndexChanged=function(t,e){var i=this._itemMap[e.rowId];i&&i.visible&&this._fireItemChanged(i)},i.prototype.onTreeDataProviderHasChildrenChanged=function(t,e){var i=this._itemMap[e.rowId];i&&i.visible&&this._fireItemChanged(i)},i.prototype.onTreeDataProviderRowStateChanged=function(t,e,i){var o=this._itemMap[e.rowId];this.$_internalRowStateChanged(o,i),this._checkableTag&&this._checkableTag.updateRow(e),!o&&i&&this._saveAndRefresh()},i.prototype.onTreeDataProviderRowStatesChanged=function(t,e){var i=e.length,o=!1;if(1==i){var r=e[0];o=!(l=this._itemMap[r.rowId]),this.$_internalRowStateChanged(l),this._checkableTag&&this._checkableTag.updateRow(r),o&&this._saveAndRefresh()}else if(i>0){var n=!1;if(this.hideDeleted)for(var s=0,a=e.length;s<a;s++){var l=this._itemMap[e[s].rowId];if(o=o||!l,l&&kt(l.rowState)){var h=l.parent;this.$_internalRemoveItem(l),h.expanded&&h.visible&&this._visibleItems.remove(l),n=!0}}this._checkableTag&&this._checkableTag.changeStates(e),n&&this.$_clearSummary(),o?this._saveAndRefresh():this._fireRefresh()}},i.prototype.onTreeDataProviderRowSiblingMoved=function(t,e,i){if(!this.$_needSort()){var o=this._itemMap[e.rowId];if(o)o.parent.moveChild(o.childIndex,i),this.$_resetVisibleItems(),this._fireRefresh()}},i.prototype.onTreeDataProviderRowsSiblingMoved=function(t,e,i){if(!this.$_needSort()){var o=this._itemMap[e[0].rowId];if(o)o.parent.moveChildren(o.childIndex,e.length,i),this.$_resetVisibleItems(),this._fireRefresh()}},i.prototype.onTreeDataProviderRowParentChanged=function(t,e,i,o){var r=this._itemMap[e.rowId];if(r){var n=this._itemMap[i.rowId];this.$_needSort()&&(o=n?n.count():0),r.changeParent(n,o),this.$_resetVisibleItems(),this._fireRefresh()}},i.prototype.onTreeDataProviderRowsParentChanged=function(t,e,i,o){var r=this._itemMap[e[0].rowId];if(r){var n=this._itemMap[i.rowId];this.$_needSort()&&(o=n?n.count():0);for(var s=0;s<e.length;s++){var a=e[s];(r=this._itemMap[a.rowId]).changeParent(n,o+s)}this.$_resetVisibleItems(),this._fireRefresh()}},i.prototype.onTreeDataProviderRowsHideChanged=function(t,e,i){if(i){for(var o=!1,r=0,n=e.length;r<n;r++){var s=e[r],a=this._itemMap[s];if(a){var l=a.parent;this.$_internalRemoveItem(a),l.expanded&&l.visible&&this._visibleItems.remove(a),o=!0}}o&&this.$_clearSummary(),this._fireRefresh()}else this._saveAndRefresh()},i.prototype.onTreeDataProviderDataLoadComplated=function(){this._fireDataLoadComplated()},i.ITEM_CHANGED="onTreeItemProviderItemChanged",i.EXPANDING="onTreeItemProviderExpanding",i.EXPANDED="onTreeItemProviderExpanded",i.COLLAPSING="onTreeItemProviderCollapsing",i.COLLAPSED="onTreeItemProviderCollapsed",i.PARENT_CHANGING="onTreeItemProviderParentChanging",i.PARENT_CHANGED="onTreeItemProviderParentChanged",i}(qo),Rn=function(t){function e(e){var i=t.call(this)||this;return i._rs=e,i}return o(e,t),e.prototype.getCount=function(t){return this._rs.getNumber(t)},e.prototype.getSum=function(t){return this._rs.getSum(t)},e.prototype.getMax=function(t){return this._rs.getMax(t)},e.prototype.getMin=function(t){return this._rs.getMin(t)},e.prototype.getAvg=function(t){return this._rs.getAvg(t)},e.prototype.getVar=function(t){return this._rs.getVar(t)},e.prototype.getVarp=function(t){return this._rs.getVarp(t)},e.prototype.getStdev=function(t){return this._rs.getStdev(t)},e.prototype.getStdevp=function(t){return this._rs.getStdevp(t)},e.prototype.getDataCount=function(t){return this._rs.getDataCount(t)},e.prototype.getDataAvg=function(t){return this._rs.getDataAvg(t)},e}(Lt),Pn=function(e){function i(t,i,o){var r=e.call(this,i&&i.row)||this;return r._values=[],r._changeValues=[],r._started=!1,r._checkDiff=!1,r._strictDiff=!1,r._invalidFields=[],r._rs=t,r._target=i,r._state=o,r}return o(i,e),i.prototype.dispose=function(){this._values=null,e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"values",{get:function(){return this._values.concat()},set:function(t){var e=this.dataSource,i=e.fieldCount;if(t){i=Math.min(i,t.length);for(var o=0;o<i;o++){var r=e.getField(o),n=this._values[o],s=r.readValue(t[o]);this._values[o]=s,this._started&&parent&&!r.equalValues(n,s)&&this._rs._editItemCellUpdated(this,o,n,s)}}else this._values=[]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"invalidFields",{get:function(){return this._invalidFields},enumerable:!1,configurable:!0}),i.prototype.beginEdit=function(t,e){this._started=!0,this._checkDiff=t,this._strictDiff=e},i.prototype.setValue=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var o=i.getField(t),r=this._values[t];e=o.readValue(e),this._values[t]=e,this._started&&this.parent&&!o.equalValues(r,e)&&this._rs._editItemCellUpdated(this,t,r,e)},Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._rs.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemState",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowState",{get:function(){return this._target?this._target.rowState:t.RowState.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanded",{get:function(){return!!this._target&&this._target.expanded},enumerable:!1,configurable:!0}),i.prototype.getData=function(t){return t=this.dataSource.getFieldIndex(t),this._values[t]},i.prototype.setData=function(t,e){var i=this.dataSource;if((t=i.getFieldIndex(t))<0||t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var o=i.getField(t),r=this._values[t];e=o.readValue(e);var n=!this._checkDiff;n||(n=this._strictDiff?!o.equalValues(r,e):!o.sameValues(r,e)),n&&(this._values[t]=e,this._changeValues[t]=!0,this.parent&&(this._rs._editItemCellUpdated(this,t,r,e),this._rs._editItemCellEdited(this,t)))},i.prototype.getRowData=function(){return this._values.concat()},i.prototype.getRowObject=function(){var t=this.dataSource;if(t){for(var e={},i=0,o=t.fieldCount;i<o;i++){e[t.getOrgFieldName(i)]=this._values[i]}return e}return null},i.prototype.isEdited=function(t){return this._changeValues[t]},Object.defineProperty(i.prototype,"provider",{get:function(){return this._rs&&this._rs.source},enumerable:!1,configurable:!0}),i}(In),kn=function(e){function i(t){var i=e.call(this,null,t)||this;return i._observers=[],i._appending=!1,i._insertAfter=!1,i._insertIndex=-1,i._rs=new On,i.source=i._rs,i._summarizer=new Rn(i._rs),i}return o(i,e),i.prototype._doDispose=function(){this._rs=this._rs&&this._rs.dispose(),this._summarizer=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"summarizer",{get:function(){return this._summarizer},enumerable:!1,configurable:!0}),i.prototype.getLevels=function(t){return this._rs.getLevels(t)},i.prototype.setLabelComparer=function(t){this._rs.labelComparer=t},i.prototype.orderBy=function(t,e,i){this._rs.orderBy(t,e,i)},i.prototype.getSortFields=function(){return this._rs.getSortFields()},i.prototype.getSortDirections=function(){return this._rs.getSortDirections()},i.prototype.getSortCases=function(){return this._rs.getSortCases()},Object.defineProperty(i.prototype,"labelComparer",{get:function(){return this._rs.labelComparer},set:function(t){this._rs.labelComparer=t},enumerable:!1,configurable:!0}),i.prototype.isFiltered=function(t){return null!=t?this._rs.hasFilter(t):this._rs.hasFilters()},i.prototype.addFilter=function(t,e){this._rs.addFilter(t,e)},i.prototype.clearAllFilters=function(){this._rs.clearAllFilters()},i.prototype.beginFiltering=function(){this._rs.beginFiltering()},i.prototype.endFiltering=function(t,e,i){this._rs.endFiltering(!0,t,e,i)},Object.defineProperty(i.prototype,"includeParentItem",{set:function(t){this._rs.includeParentItem=t},enumerable:!1,configurable:!0}),i.prototype.expand=function(t,e,i,o){this._rs.expand(t,e,i,o)},i.prototype.collapse=function(t,e){this._rs.collapse(t,e)},i.prototype.expandAll=function(t,e){this._rs.expandAll(t,e)},i.prototype.collapseAll=function(){this._rs.collapseAll()},i.prototype.getCheckedRows=function(){return this._rs.getCheckedRows()},i.prototype.getCheckedRowIds=function(){return this._rs.getCheckedRowIds()},Object.defineProperty(i.prototype,"checkableExpression",{set:function(t){this._rs.checkableExpression=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableCallback",{set:function(t){this._rs.checkableCallback=t},enumerable:!1,configurable:!0}),i.prototype.resetCheckables=function(){this._rs.resetCheckables()},i.prototype.applyCheckables=function(){this._rs.applyCheckables()},i.prototype.getAllItems=function(){return this._rs.getAllItems()},i.prototype.getItem=function(t){return this._rs.getItem(t)},i.prototype.getItemOfRow=function(t){return this._rs.getItemOfRow(t)},i.prototype.findItem=function(t,e,i,o,r){return this._rs.findItem(t,e,i,o,r)},i.prototype.findCell=function(t,e,i,o,r,n){return this._rs.findCell(t,e,i,o,r,n)},i.prototype.checkItem=function(t,e,i,o){this._rs.checkItem(t,e,i,o)},i.prototype.checkAll=function(t,e,i,o){var r=this.editingItem;r&&(!i||r.checkable)&&r._setChecked(t),this._rs.checkAll(t,e,i,o)},i.prototype.setCheckFieldIndex=function(t){this._rs.setCheckFieldIndex(t)},i.prototype.getJsonRows=function(){return this._rs.getJsonRows()},Object.defineProperty(i.prototype,"summaryMode",{get:function(){return this._rs.summaryMode},set:function(t){this._rs.summaryMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupSummaryMode",{set:function(t){this._rs.groupSummaryMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hideDeleted",{get:function(){return this._rs.hideDeleted},set:function(t){this._rs.hideDeleted=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortMode",{get:function(){return this._rs.sortMode},set:function(t){this._rs.sortMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._rs.itemCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._rs.rowCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorted",{get:function(){return this._rs.sorted},enumerable:!1,configurable:!0}),i.prototype.getMovable=function(t){return this._rs.getMovable(t)},i.prototype.getItems=function(t,e){throw new Error("Method not implemented.")},i.prototype.canAppend=function(){return!1},i.prototype.canInsert=function(t){return!!t},i.prototype.canDelete=function(t){return!!t},i.prototype.$_replaceItem=function(t,e){t.parent.setItem(t,e),this._rs._setItem(t,e)},i.prototype._doBeginUpdate=function(e){return this._editingItem=this._editItem=this._createEditItem(e,t.ItemState.UPDATING,null),this.$_replaceItem(e,this._editItem),this._editItem},i.prototype._doBeginAppend=function(e){return this._editingItem=this._editItem=this._createEditItem(null,t.ItemState.APPENDING,e),this._editItem},i.prototype._doBeginInsert=function(e,i,o,r){if(void 0===o&&(o=!1),void 0===r&&(r=!1),r)this._appending=!0,e.setExpanded(!0,!1,!1),this._editingItem=this._editItem=this._createEditItem(null,t.ItemState.INSERTING,i),this._rs.appendItem(e,this._editItem);else{var n=e.parent;this._appending=!1,this._insertAfter=o,this._insertIndex=n.indexOf(e),this._editingItem=this._editItem=this._createEditItem(e,t.ItemState.INSERTING,i),this._rs.insertItem(n,this._editItem,this._insertIndex,this._insertAfter)}return this._editItem},i.prototype._doCompleteUpdate=function(t){var e=!1;if(this.dataSource){this.$_replaceItem(this._editItem,t);var i=this._editItem.row;try{e=i.update(this._editItem.values,!1)}catch(e){throw this.$_replaceItem(t,this._editItem),e}e||this.$_replaceItem(t,this._editItem)}return e},i.prototype._doCompleteInsert=function(t){var e=this.dataSource,i=this._editItem,o=!1;if(e){var r=i.parent,n=r.row,s=e.createRow(i.values,-1,!1),a=i.parent.indexOf(i);this._rs.removeItem(i);try{o=this.isAppending?n.addChild(s,!1):n.insertChild(a,s,!1)}catch(t){throw this._appending?this._rs.appendItem(r,i):this._rs.insertItem(r,i,this._insertIndex,this._insertAfter),t}if(o){var l=r.itemOfRow(s.rowId);i.setCheckable(l.checkable),this._copyExtents(i,l),i.heights&&(l.heights=i.heights.slice()),i._dataRow=s}else this._appending?this._rs.appendItem(r,i):this._rs.insertItem(r,i,this._insertIndex,this._insertAfter)}return o},i.prototype._doCancelEdit=function(i,o){i==t.ItemState.UPDATING?(this.$_replaceItem(this._editItem,o),this._copyExtents(this._editItem,o)):i==t.ItemState.INSERTING&&this._editItem.parent&&this._rs.removeItem(this._editItem),e.prototype._doCancelEdit.call(this,i,o)},i.prototype._doCommitEdit=function(i,o){return i==t.ItemState.UPDATING||t.ItemState.INSERTING,e.prototype._doCommitEdit.call(this,i,o)},i.prototype.remove=function(t,e){if(t){var i=t.row;i&&i.parent.removeChild(i,e)}},i.prototype.revert=function(t){this.revertAll(t)},i.prototype.revertAll=function(t){t=Rt.makeArray(t,!0);var e=this.dataSource,i=this.getItemsByIndices(t).map((function(t){return t.dataRowId}));e.revert(i)},i.prototype.getRemovableRows=function(t){if(t.length>0){for(var e=[],i=0,o=t.length;i<o;i++){var r=this._rs.getItem(t[i]);e.push(r.dataId)}return e}},i.prototype.removeRows=function(t,e){t&&this.dataSource.removeRows(t,e)},i.prototype.updateRows2=function(t){},i.prototype.setDataSource=function(t){this._rs.dataSource=t},Object.defineProperty(i.prototype,"rootItem",{get:function(){return this._rs._rootItem},enumerable:!1,configurable:!0}),i.prototype._createEditItem=function(e,i,o){this._editingItem=null;var r=this.dataSource;if(!r)return null;var n,s=r.fieldCount;switch(i){case t.ItemState.UPDATING:n=this._editingItem=new Pn(this,e,i);for(var a=0;a<s;a++)n.setValue(a,e.getData(a));this._copyExtents(e,n),e.heights&&(n.heights=e.heights.slice());break;case t.ItemState.INSERTING:case t.ItemState.APPENDING:if((n=this._editingItem=new Pn(this,null,i))._setExtents(0),o)for(a=0;a<s;a++)o.length>a&&n.setValue(a,o[a])}return this._editingItem},i.prototype.addCellStyle=function(t,e,i){return this._rs.addCellStyle(t,e,i)},i.prototype.removeCellStyle=function(t,e){return this._rs.removeCellStyle(t,e)},i.prototype.getUserCellStyle=function(t,e){return this._rs.getUserCellStyle(t,e)},i.prototype.setSortingOptions=function(t){this._rs.setSortingOptions(t)},i.prototype.setTreeOptions=function(t){this._rs.setTreeOptions(t)},i.prototype.onItemProviderFilterAdd=function(t,e,i){},i.prototype.onItemProviderFilterRemove=function(t,e,i){},i.prototype.onItemProviderFilterClear=function(t,e){},i.prototype.onItemProviderFilterClearAll=function(t){},i.prototype.onItemProviderOuterSort=function(t,e,i,o){return this._fireOuterSort(e,i,o)},i.prototype.onTreeItemProviderItemChanged=function(t,e){this._eventLock<=0&&this.fireEvent(On.ITEM_CHANGED,e)},i.prototype.onTreeItemProviderExpanding=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(On.EXPANDING,e)},i.prototype.onTreeItemProviderExpanded=function(t,e){this._eventLock<=0&&this.fireEvent(On.EXPANDED,e)},i.prototype.onTreeItemProviderCollapsing=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(On.COLLAPSING,e)},i.prototype.onTreeItemProviderCollapsed=function(t,e){this._eventLock<=0&&this.fireEvent(On.COLLAPSED,e)},i}(Jo),Tn=function(t){function e(i){var o=t.call(this,i)||this;return Object.setPrototypeOf(o,e.prototype),o}return o(e,t),e}(Error),Dn=function(t){function e(i,o,r,n){var s=t.call(this,o)||this;return Object.setPrototypeOf(s,e.prototype),s.level=i,s.column=r,s.userMessage=n,s}return o(e,t),e.prototype.toString=function(){return"Validation failed["+this.level.toUpperCase()+"]: "+this.message},e}(Tn),Mn=function(e){function i(i){var o=e.call(this)||this;return o._active=!0,o._mode=t.ValidationMode.ALWAYS,o._level=t.ValidationLevel.ERROR,o._name=i,o}return o(i,e),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"active",{get:function(){return this._active},set:function(t){this._active=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"criteria",{get:function(){return this._criteria},set:function(t){t!=this._criteria&&(this._criteria=t,this._exprNode=t?Ie.Default.parse(t,i.CAPITAL_INDEXERS):null)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"message",{get:function(){return this._message},set:function(t){this._message=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"description",{get:function(){return this._description},set:function(t){this._description=t},enumerable:!1,configurable:!0}),i.prototype.validate=function(t){if(this._exprNode&&!this._exprNode.evaluate(t)){var e=this._message||this._description||this._name||this._criteria;throw new Dn(this._level,e,null,this._message)}},i.prototype.doAssignSimple=function(t){if("string"==typeof t)return this.criteria=t,!0},i.CAPITAL_INDEXERS=["value","values"],i}(Lt),Fn=function(e){function i(t){var i=e.call(this)||this;return i._items=[],i._isColumn=t,i}return o(i,e),i.prototype._doDispose=function(){this._items=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items.slice()},set:function(t){this.assignFrom(t)},enumerable:!1,configurable:!0}),i.prototype.clear=function(){this._items=[]},i.prototype.addAll=function(t){if(t&&t.length>0)for(var e=0,i=t.length;e<i;e++)this._items.push(t[e])},i.prototype.validate=function(e,i,o,r){for(var n=0;n<this._items.length;n++){var s=this._items[n];if(s.active&&(s.mode==e||s.mode==t.ValidationMode.ALWAYS))try{s.validate(i)}catch(t){if(!(o=o&&!this._isColumn)||et(s.level,r)<0)throw t instanceof Dn?(t.level=s.level,t):new Dn(s.level,t)}}},i.prototype.assignFrom=function(t){if(t!==this&&(this.clear(),t)){Rt.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++){var o=new Mn;o.assignFrom(t[e]),this._items.push(o)}}},i}(Lt),Ln=function(t){function e(){var e=t.call(this)||this;return e._item=null,e._dataSource=null,e._fieldCount=0,e}return o(e,t),e.prototype._doDispose=function(){this._item=null,this._dataSource=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},set:function(t){this._item=t,this._dataSource=this._item.dataSource,this._fieldCount=this._dataSource?this._dataSource.fieldCount:0},enumerable:!1,configurable:!0}),e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_ROW:return this._item.index;case e.ID_DATAROW:return this._item.dataRow;case e.ID_CHECKED:return this._item.checked}throw new $t("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(i<0||i>=this._fieldCount)throw new $t("Data field index out of bounds:"+i);switch(t){case e.ID_VALUE:case e.ID_VALUES:return this._item.getData(i)}throw new $t("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,i,o){var r=o?this._dataSource.getFieldIndexC(i):this._dataSource.getFieldIndex(i);if(r<0||r>=this._fieldCount)throw new $t("Data field is not exists:"+i);switch(t){case e.ID_VALUE:case e.ID_VALUES:return this._item.getData(r)}throw new $t("Invalid identifier indexer: "+t)},e.ID_ROW=0,e.ID_DATAROW=1,e.ID_CHECKED=2,e.ID_VALUE=3,e.ID_VALUES=4,e.IDENTS={row:e.ID_ROW,datarow:e.ID_DATAROW,checked:e.ID_CHECKED,value:e.ID_VALUE,values:e.ID_VALUES},e}(Wt),Nn=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){this._index=null,this._dataSource=null,t.prototype._doDispose.call(this)},e.prototype.setIndex=function(t){this._index=t,this._value=this._index.item.getData(this._index.dataColumn.dataIndex),this._dataSource=this._index.item.dataSource},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_VALUE:return this._value;case e.ID_ROW:return this._index.itemIndex;case e.ID_DATAROW:return this._index.item.dataRow;case e.ID_INDEX:return this._index.column.index;case e.ID_FIELD:return this._index.dataColumn.dataIndex;case e.ID_CHECKED:var i=this._index.item;return!!i&&i.checked;case e.ID_TAG:return this._index.column.tag;case e.ID_BASE:var o=this._index.dataColumn.baseIndex;return o>=0?this._index.item.getData(o):void 0}throw new $t("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){var o=this._dataSource.fieldCount;if(i<0||i>=o)throw new $t("Data field index out of bounds:"+i);switch(t){case e.ID_VALUE:case e.ID_VALUES:return this._index.item.getData(i)}throw new $t("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,i,o){var r=o?this._dataSource.getFieldIndexC(i):this._dataSource.getFieldIndex(i),n=this._dataSource.fieldCount;if(r<0||r>=n)throw new $t("Data field is not exists:"+i);switch(t){case e.ID_VALUE:case e.ID_VALUES:return this._index.item.getData(r)}throw new $t("Invalid identifier indexer: "+t)},e.ID_VALUE=0,e.ID_ROW=1,e.ID_DATAROW=2,e.ID_INDEX=3,e.ID_FIELD=4,e.ID_CHECKED=5,e.ID_TAG=6,e.ID_BASE=7,e.ID_VALUES=8,e.IDENTS={value:e.ID_VALUE,row:e.ID_ROW,datarow:e.ID_DATAROW,index:e.ID_INDEX,field:e.ID_FIELD,checked:e.ID_CHECKED,tag:e.ID_TAG,base:e.ID_BASE,values:e.ID_VALUES},e}(Wt),$n=function(e){function i(t){var i=e.call(this)||this;return i._cellList={},i._owner=t,i}return o(i,e),Object.defineProperty(i.prototype,"owner",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellList",{get:function(){return this._cellList},enumerable:!1,configurable:!0}),i.prototype.validateCell=function(t,e,i){this.$_validateCell(t,e,!0,this._owner.editOptions.commitLevel,i)},i.prototype.validateRow=function(e,i,o,r){var n=this._owner.editOptions.commitLevel,s=new Ds;if(!o)for(var a=this._owner.getDataColumns(),l=0,h=a.length;l<h;l++){var u=a[l];s.set(e.index,u,this._owner);try{this.$_validateCell(s,i,!0,n,r)}catch(t){if(!(t instanceof Dn))throw t;if(et(t.level,n)<0)throw t;!r&&this.addInvalidateCell(s,t)}}var c=this._owner.validations;if(c&&c.count>0){var d=this._owner.rowValidationRuntime;d.item=e,c.validate(i?t.ValidationMode.INSERT:t.ValidationMode.UPDATE,d,!0,n)}this.owner._fireValidateRow(e,i,e.getRowObject())},i.prototype.clearInvalidCells=function(t){this.$_clearInvalidateList(t)},i.prototype.clearInvalidCell=function(t){this.$_clearInvalidateCell(t)},i.prototype.getError=function(t){return t.item?(this._cellList[Ao(t.item.itemState)?-1:t.dataId]||{})[t.dataField]:null},i.prototype.cloneError=function(t,e){var i=this._cellList;i[t]&&(i[e]=JSON.parse(JSON.stringify(i[t])))},i.prototype.addInvalidateCell=function(t,e){return this.$_addInvalidateCell(t,e)},i.prototype.getInvalidCells=function(t){var e,i=[],o=this._owner.dataSource,n=this._cellList;if(null!=t){var s=o.getRowId(t);if(null==s)return null;(e={})[s]=this._cellList[s],n=e}for(var a in n){var l=n[a];for(var h in t=o.getDataRow(+a),l){var u=r(r({},l[h]),{dataRow:t});i.push(Rt.deepCopy(u))}}return i.length>0?i:null},i.prototype.validateCells=function(e,i,o,r){var n=this._owner,s=n.getDataColumns(),a=[];if(r)for(var l=s.length;l--;)r.indexOf(s[l].name)<0&&s.splice(l,1);if(e=Rt.makeArray(e)){l=0;for(var h=e.length;l<h;l++){(c=n.getItem(e[l]))&&c.isDataRow&&(!r&&delete this._cellList[c.dataId],a.push(c))}}else if(i)for(l=0,h=n.itemCount;l<h;l++){(c=n.getItem(l))&&c.isDataRow&&(!r&&delete this._cellList[c.dataId],a.push(c))}else!n.isTree()&&n.paged&&o?(a=n.itemSource.getPagingAllItems(),!r&&(this._cellList={})):(a=n.getAllItems(),!r&&(this._cellList={}));l=0;for(var u=a.length;l<u;l++){var c;if((c=a[l]).isDataRow){var d=0;for(h=s.length;d<h;d++){var p=s[d],f=Ms.tempItem(n,c,p);try{this.$_validateCell(f,!1,!1,t.ValidationLevel.IGNORE,!1)}catch(t){Rt.log("validateCells valiation fail add")}}}}return n.refreshView(),this.getInvalidCells()},i.prototype.clearInvalidateList=function(){this.$_clearInvalidateList()},i.prototype.checkRowIds=function(){var t=this.owner.dataSource;for(var e in this._cellList){var i=parseInt(e);-1!==i&&t.getDataRow(i)<0&&delete this._cellList[i]}},i.prototype.$_validateCell=function(e,i,o,r,n){var s=e.dataColumn;if(s){var a=this.owner.editOptions.validateOnlyEditColumn,l=!0;if((e.item instanceof Zo||e.item instanceof Pn)&&(l=e.item.isEdited(s.dataIndex)),!a||l||s.required)try{var h=e.item.getData(s.dataIndex);if(s.required){var u=s.grid,c=u&&u.dataSource&&u.dataSource.getField(s.dataIndex);if(c&&c.isEmpty(h)){var d=s.requiredMessage||"Value is required: "+s.fieldName;throw new Dn(s.requiredLevel||t.ValidationLevel.ERROR,d,s,s.requiredMessage)}}var p=s.validations;if(p&&p.count>0){var f=this._owner.columnValidationRuntime;f.setIndex(e),p.validate(i?t.ValidationMode.INSERT:t.ValidationMode.UPDATE,f,o,r)}this.owner._fireValidateCell(e,i,e.item.getData(e.dataField)),!n&&this.$_clearInvalidateCell(e)}catch(t){throw t instanceof Dn&&(t.column=s,!n&&this.$_addInvalidateCell(e,t)),t}}},i.prototype.$_addInvalidateCell=function(t,e){var i=Ao(t.item.itemState)?-1:t.dataId,o=t.dataColumn&&t.dataColumn.dataIndex;if(!(null==i||o<=-1)){var n=this._cellList,s=n[i]=n[i]||{};return s[o]={message:e.message,userMessage:e.userMessage,level:e.level,column:t.dataColumn.name,fieldName:t.dataColumn.fieldName},this.owner.refreshView(),r(r({},s[o]),{dataRow:t.dataRow})}},i.prototype.$_clearInvalidateCell=function(t){var e=Ao(t.item.itemState)?-1:t.dataId,i=t.dataField,o=this._cellList[e];o&&o[i]&&delete o[i],this.owner.refreshView()},i.prototype.$_clearInvalidateList=function(t){null!=t?delete this._cellList[t]:this._cellList={},this._owner.refreshView()},i}(Lt),An=/(.*)/,Vn=function(){function t(t){this._pattern=An,this._replace="$1",this.$_parse(this._format=t)}return t.getFormatter=function(e){var i=t.Formatters[e];return i||(t.Formatters[e]=i=new t(e)),i},Object.defineProperty(t.prototype,"format",{get:function(){return this._format},enumerable:!1,configurable:!0}),t.prototype.getText=function(t){return t&&t.replace(this._pattern,this._replace)},t.prototype.$_parse=function(t){if(t){var e=t.trim().split(Rt.colonreg);if(e.length>1){var i=e[0].trim(),o=e[1].trim();i&&o&&('"'==i.charAt(0)&&(i=i.substr(1,i.length-2)),i&&('"'==o.charAt(0)&&(o=i.substr(1,o.length-2)),o&&(this._pattern=new RegExp(i,e[2]||""),this._replace=o)))}}},t.Formatters={},t}(),Bn=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._changed=function(){},e.INIT_COUNT=200,e}(Lt),jn=function(t){function e(){var e=t.call(this)||this;return e._level=0,e._mergeMode=!1,e}return o(e,t),e.getDefault=function(t,i){var o=e.$_default;return o._level=t,o._mergeMode=i,o},e.prototype.parseInit=function(t,e,i,o,r){var n=t.itemCount;(o=Math.min(n-i,o))<1||(this._mergeMode?this.$_parseMerged(t,e,i,o,r):this.$_parseNormal(t,e,i,o,r))},e.prototype.parseBounds=function(t,e,i,o,r){if(!(t.itemCount<1)){for(i=Math.max(0,i);i>=0&&r[i]<=0;){var n=t.getItem(i);if(n==this.$_getAncestor(n,this._level))break;i--}for(;i<=o&&r[i]>0;)i++;i<=o&&(this._mergeMode?this.$_parseMergedBounds(t,e,i,o,r):this.$_parseNormalBounds(t,e,i,o,r))}},e.prototype.$_getAncestor=function(t,e){var i=Rt.cast(t,Wo);for(i||(i=t.parent);i.level>e;)i=i.parent;return i},e.prototype.$_parseNormal=function(t,e,i,o,r){var n=t.itemCount;if(!(n<1)){var s=t.fixedCount,a=t.getItem(i),l=a,h=i,u=h+1;for(r[h]=h+1;u<n;)a=t.getItem(u),(u==s||a.level!=l.level||a.constructor!==l.constructor||a instanceof Yo||a instanceof Uo)&&(h=u),r[u]=h+1,u++,l=a}},e.prototype.$_parseMerged=function(t,e,i,o,r){var n=t.itemCount;if(!(n<1))for(var s=t.getItem(i),a=this.$_getAncestor(s,this._level),l=i,h=r[l]=l+1;h<n;){s=t.getItem(h);var u=this.$_getAncestor(s,this._level);if(u!=a){if(h>=o)break;a=u,l=h}r[h]=l+1,h++}},e.prototype.$_parseNormalBounds=function(t,e,i,o,r){var n=t.itemCount;if(!(n<1)){var s=t.fixedCount,a=t.getItem(i),l=a,h=i,u=h+1;for(r[h]=h+1;u<n;)a=t.getItem(u),u!=s&&a.level==l.level&&a.constructor===l.constructor||(h=u),r[u]=h+1,u++,l=a}},e.prototype.$_parseMergedBounds=function(t,e,i,o,r){var n=t.itemCount;if(!(n<1)){var s=t.getItem(i),a=this.$_getAncestor(s,this._level),l=i,h=l+1;for(r[l]=l+1;h<n;){s=t.getItem(h);var u=this.$_getAncestor(s,this._level);if(u!=a){if(h>o)break;a=u,l=h}r[h]=l+1,h++}}},e.$_default=new e,e}(Bn),Hn=function(e){function i(){var t=e.call(this)||this;return t._item=null,t._field=-1,t._ds=null,t._fieldCount=0,t._grid=null,t._layout=null,t}return o(i,e),i.getObjectText=function(t,e,i,o){var r=e.objectKey||e.objectCallback,n=r?e.objectKey:i.objectKey,s=r?e.objectCallback:i.objectCallback;return s&&"function"==typeof s?s(i.orgFieldName,t.dataRow,o):n&&o.hasOwnProperty(n)?o[n]:JSON.stringify(o)},i.prototype._doDispose=function(){this._item=null,this._ds=null,this._grid=null,this._layout=null,e.prototype._doDispose.call(this)},i.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},i.prototype.setLayout=function(t){this._layout=t,this._column=t.firstColumn,this._grid=t.grid},i.prototype.setCell=function(t){this._item=t.item,this._field=t.dataField},i.prototype.setItem=function(t,e){this._item=t,this._field=e},i.prototype.clear=function(){this._item=null,this._field=null,this._layout=null,this._column=null,this._grid=null,this._ds=null},i.prototype.isIdentifier=function(t){return t=t.toLowerCase(),i.IDENTS.hasOwnProperty(t)?i.IDENTS[t]:e.prototype.isIdentifier.call(this,t)},i.prototype.evaluateIdentifier=function(e){if(this._item){var o=void 0;switch(e){case i.ID_ROW:return this._item.index;case i.ID_DATAROW:return this._item.dataRow;case i.ID_CHECKED:return this._item.checked;case i.ID_GROUP:return this._item.parent;case i.ID_VALUE:var r=this._ds.getField(this._field);return null!=(o=this._item.getData(this._field))&&r.dataType===t.ValueType.OBJECT?i.getObjectText(this._item,this._column,r,o):o;case i.ID_PREV_VALUES:var n=this._grid.getDataColumns(),s=n.indexOf(this._column);if(!n.length||s<1)return"";for(var a=[],l=0,h=Math.min(s,n.length);l<h;l++)null!=(o=this._item.getData(n[l].dataIndex))&&this._ds.getField(n[l].dataIndex).dataType===t.ValueType.OBJECT?a.push(i.getObjectText(this._item,n[l],n[l].getField(),o)):a.push(o);return a.join("`")}throw new $t("Invalid identifier key: "+e)}},i.prototype.evaluateIndexerI=function(e,o){if(this._item){if(e==i.ID_VALUE||e==i.ID_VALUES){if(o<0||o>=this._fieldCount)throw new $t("Data field index out of bounds:"+o);var r=this._item.getData(o);if(null!=r&&this._ds.getField(o).dataType===t.ValueType.OBJECT){var n=this._column.grid.columnByField(o);return i.getObjectText(this._item,n,n.getField(),r)}return r}throw new $t("Invalid identifier indexer: "+e)}},i.prototype.evaluateIndexerS=function(e,o,r){if(e!=i.ID_VALUE&&e!=i.ID_VALUES)throw new $t("Invalid identifier indexer: "+e);if(this._ds){var n=r?this._ds.getFieldIndexC(o):this._ds.getFieldIndex(o);if(n<0||n>=this._fieldCount)throw new $t("Data field is not exists:"+o);var s=this._item.getData(n);if(null!=s&&this._ds.getField(n).dataType===t.ValueType.OBJECT){var a=this._column.grid.columnByField(n);return i.getObjectText(this._item,a,a.getField(),s)}return s}},i.ID_ROW=0,i.ID_DATAROW=1,i.ID_CHECKED=2,i.ID_VALUE=3,i.ID_VALUES=4,i.ID_GROUP=5,i.ID_PREV_VALUES=6,i.IDENTS={row:i.ID_ROW,datarow:i.ID_DATAROW,checked:i.ID_CHECKED,value:i.ID_VALUE,values:i.ID_VALUES,group:i.ID_GROUP,prevvalues:i.ID_PREV_VALUES},i}(Wt),Gn={},Wn=function(e){function i(t){var o=e.call(this)||this;return o._runtime=i.$_runtime=i.$_runtime||new Hn,"function"==typeof t?o._callback=t:o.criteria=t,o}return o(i,e),i.createRule=function(t){var e="string"==typeof t||"function"==typeof t?t:t&&t.criteria;return e?new i(e):null},i.prototype._doDispose=function(){this._runtime.clear(),this._runtime=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"criteria",{get:function(){return this._criteria},set:function(t){(t=t?t.trim():null)!=this._criteria&&(this._criteria=t,this._exprNode=t?Ie.Default.parse(t,null):null,this._changed())},enumerable:!1,configurable:!0}),i.prototype.$_getValue=function(t,e,i,o){return o?e.getData(i):this._callback?this._callback.call(null,t.handler,this._layout.getDataColumn(),e.itemIndex,e.getData(i)):(this._runtime.setItem(e,i),this._exprNode.evaluate(this._runtime))},i.prototype.parseInit=function(e,i,o,r,n){var s=this._layout.isBreakMergeOnEmpty(),a=e.fixedCount,l=e.itemCount,h=e.dataSource.rowCount,u=this._layout.grid;if(!((r=Math.min(l-o,r))<1||h<=0)){this._runtime.setDataSource(e.dataSource),this._runtime.setLayout(this._layout);for(var c=null,d=o;d<l&&(c=e.getItem(d),!this.$_isRow(c,false));)n[d]=d+1,d++;if(!(d>=l)){var p,f=!this._callback&&this._exprNode.isIdentifier("value")&&this._layout.getDataColumn().valueType!==t.ValueType.OBJECT,_=o=d;if(n[_]=_+1,!(c.dataRow>=h))for(p=this.$_getValue(u,c,i,f),d=o+1;d<l;d++)if(c=e.getItem(d),this.$_isRow(c,false)){if(c.dataRow>=h)break;var g=this.$_getValue(u,c,i,f);if(d==a||null==g&&s||(g instanceof Date&&p instanceof Date?+g!=+p:g!=p)){if(d>=r)break;_=d,p=g}n[d]=_+1}else{if(d>=r)break;p=Gn,_=d,n[d]=_+1}}}},i.prototype.parseBounds=function(e,i,o,r,n){var s=this._layout.isBreakMergeOnEmpty(),a=!1,l=e.itemCount;if(!(l<1)){var h=e.fixedCount,u=this._layout.grid,c=!this._callback&&this._exprNode.isIdentifier("value")&&this._layout.getDataColumn().valueType!==t.ValueType.OBJECT,d=Gn,p=Math.max(0,o),f=p,_=-1;if(this._runtime.setDataSource(e.dataSource),this._runtime.setLayout(this._layout),p>0&&n[p]<=0){var g=e.getItem(p);if(this.$_isRow(g,a)){var y=this.$_getValue(u,g,i,c);for(p--;p>=0&&(g=e.getItem(p),this.$_isRow(g,a))&&(d=this.$_getValue(u,g,i,c),!(p==h||null==d&&s||(d instanceof Date&&y instanceof Date?+d!=+y:d!=y)));)p--;for(var m=f-1;m>p;m--)n[m]=p+2;f-1>p&&(_=p+1)}else{n[p]=p+1;for(m=f-1;m>p;m--)n[m]=p+2;for(f-1>p+1&&(_=p+2),p--;p>=0&&n[p]<=0&&!this.$_isRow(e.getItem(p),a);)n[p]=p+1,p--}}for(p=Math.max(0,o);p<=r&&n[p]>0;)p++;for(;p<=r&&!this.$_isRow(e.getItem(p),a);)n[p]=p+1,p++;if(p<r){f=p;g=e.getItem(p),y=this.$_getValue(u,g,i,c);for(p++;p<l;)if(g=e.getItem(p),this.$_isRow(g,a)){if(d=this.$_getValue(u,g,i,c),p==h||void 0===d&&s||(d instanceof Date&&y instanceof Date?+d!=+y:d!=y)){var b=f;_>=0&&(b=_,_=-1);for(m=f;m<p;m++)n[m]=b+1;if(p>=r)break;y=d,f=p}else n[p]=f+1;p++}else{b=f;_>=0&&(b=_,_=-1);for(m=f;m<p;m++)n[m]=b+1;for(n[p]=p+1,p++;p<l&&!this.$_isRow(e.getItem(p),a);)n[p]=p+1,p++;if(f=p,p>=r)break}if(p==l&&(d instanceof Date&&y instanceof Date?+d==+y:d==y))for(b=_>=0?_:f,m=f;m<p;m++)n[m]=b+1}}},i.prototype.$_isRow=function(t,e){var i=t instanceof Go&&!(t instanceof Xo);if(i&&!e){var o=t.parent;i=o.expanded||o.firstItem!==t}return i},i.$_runtime=null,i}(Bn),Un=function(t){function e(){return t.call(this)||this}return o(e,t),Object.defineProperty(e.prototype,"head",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return-1},enumerable:!1,configurable:!0}),e}(Lt),Yn=function(t){function e(e){var i=t.call(this)||this;return i._group=null,i._column=e.c1._columnObj,i._head=e.top,i._tail=e.bottom,i}return o(e,t),e.borrow=function(t){var i=e.$_rooms.pop();return i?(i._head=t.top,i._tail=t.bottom):i=new e(t),i},e.returnTo=function(t){if(t){var i=e.$_rooms;i.indexOf(t)<0&&i.push(t)}},Object.defineProperty(e.prototype,"column",{get:function(){return this._column},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"head",{get:function(){return this._head},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return this._tail},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this._column},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"group",{get:function(){return this._group},set:function(t){this._group=t},enumerable:!1,configurable:!0}),e.prototype.getHead=function(t){return t?t.set(this._head,this._column):t=this._column.grid.getIndex(this._head,this._column),t},e.prototype.getTail=function(t){return t?t.set(this._tail,this._column):t=this._column.grid.getIndex(this._tail,this._column),t},e.prototype.isHead=function(t){return t.column==this._column&&t.itemIndex==this._head},e.prototype.isTail=function(t){return t.column==this._column&&t.itemIndex==this._tail},e.prototype.contains=function(t){return t.column==this._column&&t.itemIndex>=this._head&&t.itemIndex<=this._tail},e.$_rooms=new Array,e.$_roomCount=0,e}(Un),zn=-1,qn=65535,Kn=function(t){function e(e){var i=t.call(this)||this;return i._flags=null,i._fixedRooms=[],i._rooms=[],i._inited=!1,i._fixedCells=[],i._cells=[],i._nextId=0,i._layout=e,e._merges=i,i}return o(e,t),e.prototype._doDispose=function(){this._layout=null,this._rooms=this._fixedRooms=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"count",{get:function(){return this._rooms.length},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this._flags=null,this._rooms=[],this._inited=!1},e.prototype.initialize=function(t){if(!this._inited){var e=this._layout.grid,i=e.rowGroup,o=e.itemSource,r=this._layout.firstColumn,n=e.getGroupLevel(r.dataIndex),s=e.isGroupedColumn(r)&&r.mergeGrouped?jn.getDefault(n,i.mergeMode):this._layout.$_mergeRuleObj();if(s){for(var a=this._flags=new Array(o.itemCount),l=e.fixedOptions.mergeRows?0:o.fixedCount,h=o.itemCount;h--;)a[h]=0;s._layout=this._layout,s.parseInit(o,r.dataIndex,l,t,a)}this._inited=!0}},e.prototype.refreshRooms=function(t,e,i){if(this._nextId=0,this._inited&&this._flags&&!(e<t)){var o=this._layout.grid,r=this._layout.firstColumn;if(o&&r){var n=this._rooms,s=o.layoutManager.fixedItemCount,a=o.itemSource,l=o.getGroupLevel(r.dataIndex),h=l>0&&r.mergeGrouped?jn.getDefault(l,o.rowGroup.mergeMode):this._layout.$_mergeRuleObj(),u=o.displayOptions.editItemMerging,c=0;if(this._fixedRooms.length=0,this._rooms.length=0,h&&(h._layout=this._layout,h.parseBounds(a,r.dataIndex,t,e,this._flags)),i)for(;c<s;){if(p=this.$_checkFixedMerge(a,r,c,s)){if(l<1){var d=new Yn(p);this._fixedRooms.push(d)}c=p.r2+1}else c+=1}for(c=t;c<=e;){var p;if(p=this.$_checkMerge(a,r,c,0==n.length,s)){var f;if(l<1)if((f=a.getItem(p.r2))instanceof Hr||f instanceof jr);else{d=new Yn(p);this._rooms.push(d)}else if((f=u?a.source.getItem(p.top):a.getItem(p.top)).level>=l){for(var _=f instanceof Wo?f:f.parent;_.level>l;)_=_.parent;(d=new Yn(p)).group=_,n.push(d)}c=p.r2+1}else c+=1}}}},e.prototype.getFixedRooms=function(){return this._fixedRooms.slice()},e.prototype.getRooms=function(){return this._rooms.slice()},e.prototype.scroll=function(t){},e.prototype.getRoom=function(t){for(var e=t.rowFixed?this._fixedRooms:this._rooms,i=e.length-1;i>=0;i--)if(e[i].contains(t))return e[i];return null},e.prototype.prepareCells=function(t,e){if(t>0){for(var i=this._fixedCells,o=0;o<i.length;o++)i[o]=zn;for(;i.length<t;)i.push(zn)}var r=this._cells;for(o=0;o<r.length;o++)r[o]=zn;for(;r.length<e;)r.push(zn)},e.prototype.refreshCells=function(t,e){for(var i=this.getFixedRooms(),o=i.length-1;o>=0;o--){var r=i[o];this.addFixedCells(r.head,r.tail-r.head+1)}for(o=(i=this.getRooms()).length-1;o>=0;o--){r=i[o];var n=Math.max(0,r.head-e-t),s=r.tail-e-t;this.addCells(n,s-n+1)}},e.prototype.addFixedCells=function(t,e){for(var i=this._fixedCells,o=this._nextId++,r=t+1;r<t+e;r++)i[r]=o+qn;return i[t]=o,o},e.prototype.addCells=function(t,e){for(var i=this._cells,o=this._nextId++,r=t+1;r<t+e;r++)i[r]=o+qn;return i[t]=o,o},e.prototype.isMerged=function(t,e){return t<e?this._fixedCells[t]>zn:this._cells[t-e]>zn},e.prototype.isMergeRoot=function(t,e){return t<e?this._fixedCells[t]>zn&&this._fixedCells[t]<qn:(t-=e,this._cells[t]>zn&&this._cells[t]<qn)},e.prototype.isHidden=function(t,e){return t<e?this._fixedCells[t]>=qn:this._cells[t-e]>=qn},e.prototype.getMerged=function(t,e){var i=1;if(t<e)for(var o=(n=this._fixedCells)[t],r=t+1;r<n.length&&n[r]-qn==o;r++,i++);else{t-=e;var n;for(o=(n=this._cells)[t],r=t+1;r<n.length&&n[r]-qn==o;r++,i++);}return i},e.prototype.getMerged2=function(t,e,i,o){for(var r=this._cells,n=r[i],s=t.itemSource,a=s.getItem(e++),l=a.isData?o:1,h=i+1;h<r.length&&r[h]-qn==n;h++)l+=(a=s.getItem(e++)).isData?o:1;return l},e.prototype.$_checkFixedMerge=function(t,e,i,o){if(o>0){var r=e.grid,n=r.displayOptions,s=e.mergeEdit&&r.editOptions.commitByCell||n.editItemMerging,a=i,l=this._flags[a],h=t.getItem(a);if(l<=0||Ao(h.itemState)&&!s)return null;for(;a&&!(this._flags[a-1]<l||Ao(t.getItem(a-1).itemState));)a--;for(var u=i+1;u<=o;){var c=Ao(t.getItem(u).itemState);if(u==o||this._flags[u]>l||c&&!s)return u>a+1||c?Ns.createRange(a,e.layout,u-1,e.layout):null;u++}}return null},e.prototype.$_checkMerge=function(t,e,i,o,r){if(i>=0){var n=e.grid,s=n.displayOptions,a=e.mergeEdit&&n.editOptions.commitByCell&&n.isEditing()&&n.isItemEditing()||s.editItemMerging,l=i,h=this._flags[l],u=t.getItem(l);if(h<=0||Ao(u.itemState)&&!a)return null;if(o)for(;l>r&&!(this._flags[l-1]<h||Ao(t.getItem(l-1).itemState));)l--;for(var c=t.itemCount,d=i+1;d<c;){var p=Ao(t.getItem(d).itemState);if(this._flags[d]>h||this._flags[d]<=0||p&&!a){if(d>l+1)return Ns.createRange(l,e.layout,d-1,e.layout);var f=e instanceof ls?e.groupLevel:-1;return(u=t.getItem(l))instanceof Hr&&u.collapsed||u instanceof jr&&u.parent.level==f&&(d==i+1||u.parent.collapsed)||(u instanceof Hr||u instanceof jr)&&u.parent.level>f?Ns.createRange(l,e.layout,d-1,e.layout):null}d++}if(d>l){if(d>l+1)return Ns.createRange(l,e.layout,d-1,e.layout);f=e instanceof ls?e.groupLevel:-1;return(u=t.getItem(l))instanceof Hr&&u.collapsed||u instanceof jr&&u.parent.level==f&&(d==i+1||u.parent.collapsed)||(u instanceof Hr||u instanceof jr)&&u.parent.level>f?Ns.createRange(l,e.layout,d-1,e.layout):null}}return null},e.MERGE_ROOMS="mergeRooms",e}(Lt),Xn=function(t){function e(e){var i=t.call(this,null)||this;return i._column=e,i}return o(e,t),e.prototype._doDispose=function(){this._column=null,this._template=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"column",{get:function(){return this._column},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"template",{get:function(){return this._template&&this._template.template},set:function(t){t!=this.template&&(t?(this.template||(this._template=new fn),this._template.template=t):this._template=void 0,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"templateEvents",{get:function(){return this._templateEvents},set:function(t){this._templateEvents=Rt.makeArray(t,!0),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){return this._values},set:function(t){t!==this._values&&(t?Rt.extendObj(t,this._values={}):this._values=void 0,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"popupMenuName",{get:function(){if(this._popupMenuName)return this._popupMenuName;if(this._popupMenu){this._popupMenuName="$$_column_popup_menu"+this.$_hash;var t=this.column.grid;return t&&t.addPopupMenu(this._popupMenuName,this._popupMenu,!0),t&&this._popupMenuName}return null},set:function(t){null!=t&&"string"!=typeof t||(this._popupMenuName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){null!=t&&(t=String(t)),t!=this._text&&(this._text=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t},enumerable:!1,configurable:!0}),e.prototype.getValue=function(t){return this._values&&this._values[t]},e.prototype.setValue=function(t,e){this._values||(this._values={}),this._values[t]!=e&&(this._values[t]=e,this._changed())},e}(cr),Zn=function(){function t(){}return t.prototype.clear=function(){return this.styleName=this.exportStyleName=this.textFormat=this.datetimeFormat=this.numberFormat=this.booleanFormat=this.prefix=this.suffix=this.text=void 0,this},t.prototype.assign=function(t){if("string"==typeof t)this.styleName=t;else if(t)for(var e=0,i=Object.keys(t);e<i.length;e++){var o=i[e];this[o]=Rt.deepCopy(t[o])}return this},t}(),Jn=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"summaryIndex",{get:function(){var t=this.$_owner;return t?t.getIndex(this):-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this.summaryIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!==this._valueCallback&&(this._valueCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"expression",{get:function(){return this._expression},set:function(t){t&&(t=t.trim()),t!=this._expression&&(this._expression=t,this._exprNode=t?Ie.Default.parse(t):void 0,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!=this._styleCallback&&(this._styleCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"templateCallback",{get:function(){return this._templateCallback},set:function(t){this._templateCallback=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?qe.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?Ge.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?We.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textFormat",{get:function(){return this._textFormat},set:function(t){t!=this._textFormat&&(this._textFormat=t,this._textFormatter=t?Vn.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"prefix",{get:function(){return this._prefix},set:function(t){t!=this._prefix&&(this._prefix=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"suffix",{get:function(){return this._suffix},set:function(t){t!=this._suffix&&(this._suffix=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"excelFormat",{get:function(){return this._excelFormat},set:function(t){t!=this._excelFormat&&(this._excelFormat=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textFormatter",{get:function(){return this._textFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boolFormatter",{get:function(){return this._boolFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),e.prototype.evaluate=function(t,e){if(this._exprNode)return this._exprNode.evaluate(t)},e.prototype.realizeSummary=function(t,e){var i=this._template;return i?i.realizeSummary(this,t,e,this._templateCallback):void 0},e.prototype.realizeGroupSummary=function(t,e){var i=this._template;return i?i.realizeGroupSummary(this,t,e,this._templateCallback):void 0},e.prototype.doAssignSimple=function(t){return"string"==typeof t&&(this.expression=t,!0)},e.prototype._doChanged=function(){},e}(Xn),Qn=function(t){function e(e,i){var o=t.call(this)||this;return o._items=[],o._column=e,o._type=i,o._items.push(o.$_createSummary()),o}return o(e,t),e.prototype._doDispose=function(){this._column=null,this._items&&this._items.forEach((function(t){t.dispose()})),this._items=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"column",{get:function(){return this._column},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),e.prototype.get=function(t){return t>=0&&t<this.column.grid.getSummaryCount(this._type)&&!this._items[t]&&(this._items[t]=this.$_createSummary()),this._items[t]},e.prototype.getIndex=function(t){return this._items.indexOf(t)},e.prototype.clean=function(){this._items.forEach((function(t){return t.clean()}))},e.prototype.assignFrom=function(t){var e=t&&(t.items?Rt.makeArray(t.items,!0):Rt.makeArray(t,!0)),i=this._items;if(Rt.isArray(e)){for(var o=Math.max(e.length,1),r=0;r<o;r++)i[r]||(i[r]=this.$_createSummary()),i[r].assignFrom(e[r]);this._items.length=o}},e}(Lt),ts=function(t){function e(e){var i=t.call(this,e.column)||this;return i.$_owner=e,i}return o(e,t),e.prototype._doChanged=function(){this.column._headerSummaryChanged()},e}(Jn),es=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype.$_createSummary=function(){return new ts(this)},e}(Qn),is=function(e){function i(i){var o=e.call(this,i)||this;return o._checkLocation=t.ColumnHeaderItemLocation.NONE,o}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"itemOffset",{get:function(){return this._itemOffset},set:function(t){t!=this._itemOffset&&(this._itemOffset=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkLocation",{get:function(){return this._checkLocation},set:function(t){t!=this._checkLocation&&(this._checkLocation=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useCheckImage",{get:function(){return this._useCheckImage},set:function(t){t!==this._useCheckImage&&(this._useCheckImage=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tooltipEllipsisOnly",{get:function(){return this._tooltipEllipsisOnly},set:function(t){t!=this._tooltipEllipsisOnly&&(this._tooltipEllipsisOnly=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tooltip",{get:function(){return this._tooltip},set:function(t){t!=this._tooltip&&(this._tooltip=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"edgeMark",{get:function(){return this._edgeMark},set:function(t){t!==this._edgeMark&&(this._edgeMark=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayText",{get:function(){var t,e=this.column,i=Rt.language,o=i&&i.split("-")[0];if(this._localeText&&i&&(t=this._localeText[i]||this._localeText[o]),!(t=t||this.text)&&e instanceof ls){var r=e.getField();t=r?r.header||r.orgFieldName:e.fieldName}return t||(t=e.name),t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"templateCallback",{get:function(){return this._templateCallback},set:function(t){this._templateCallback=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"localeText",{get:function(){return this._localeText},set:function(t){this._localeText=t},enumerable:!1,configurable:!0}),i.prototype.realizeTemplate=function(){var t=this._template;return t?t.realizeHeader(this,this.templateCallback,this.column.grid):void 0},i.prototype._doChanged=function(){this.column&&this.column._headerChanged()},i.prototype.doAssignSimple=function(t){return"string"==typeof t&&(this.text=t,!0)},i}(Xn),os=function(t){function e(e){var i=t.call(this,e.column)||this;return i.$_owner=e,i}return o(e,t),e.prototype._doChanged=function(){this.column._footerChanged()},e}(Jn),rs=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype.$_createSummary=function(){return new os(this)},e}(Qn),ns=function(){function t(){}return t.prototype.clear=function(){return this.styleName=this.exportStyleName=this.renderer=this.editable=this.editor=this.readOnly=this.textFormat=this.datetimeFormat=this.numberFormat=this.booleanFormat=this.prefix=this.suffix=this.edgeMark=this.style=this.excelFormat=this.cellProtectProps=this.button=this.buttonWidth=this.text=void 0,this},t.prototype.assign=function(t){if("string"==typeof t)this.styleName=t;else if(t)if(t instanceof ss)for(var e=0,i=Object.keys(this);e<i.length;e++){(n=i[e])in t&&(this[n]=Rt.deepCopy(t[n]))}else for(var o=0,r=Object.keys(t);o<r.length;o++){var n;"readonly"===(n=r[o]).toLowerCase()?this.readOnly=t[n]:this.hasOwnProperty(n)&&(this[n]=Rt.deepCopy(t[n]))}return this},t.prototype.toFormatter=function(t){var e;return t||(t={textFormatter:void 0,numberFormatter:void 0,datetimeWriter:void 0,booleanFormatter:void 0,prefix:void 0,suffix:void 0,text:void 0}),(e=this.textFormat)&&(t.textFormatter=Vn.getFormatter(e)),(e=this.numberFormat)&&(t.numberFormatter=qe.getFormatter(e)),(e=this.datetimeFormat)&&(t.datetimeWriter=Ge.getFormatter(e)),(e=this.booleanFormat)&&(t.booleanFormatter=We.getFormatter(e)),null!=this.prefix&&(t.prefix=this.prefix),null!=this.suffix&&(t.suffix=this.suffix),null!=this.text&&(t.text=this.text),t},t}(),ss=function(t){function e(e){var i=t.call(this)||this;return i._visible=!0,i._resizable=!0,i._movable=!0,i._checked=!1,i._indeterminate=!1,i._fillWidth=NaN,i._dirty=!1,i._index=-1,i._states={},i._header=new is(i),i._footers=new rs(i,"footer"),i._headerSummaries=new es(i,"summary"),i._groupFooters=new rs(i,"groupFooter"),e&&i.assignFrom(e),i}return o(e,t),e.prototype._doDispose=function(){this._layout=null,this.$_owner=null,this._header=this._header&&this._header.dispose(),this._footers=this._footers&&this._footers.dispose(),this._headerSummaries=this._headerSummaries&&this._headerSummaries.dispose(),this._groupFooters=this._groupFooters&&this._groupFooters.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){t!=this._name&&(this._name&&this.$_owner&&this.$_owner.exchangeNameMap(this,this.name,t),this._name=t,this._changed())},enumerable:!1,configurable:!0}),e.prototype._layoutChanged=function(){this._changed(),this._layout&&this._layout._changed()},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._layout&&this._layoutChanged(),this._propChanged("visible",this._visible,!this._visible))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return(null==this._width||isNaN(this._width))&&this.grid?this._width=this.grid.displayOptions.defaultColumnWidth:this._width},set:function(t){if(t=Math.max(0,t),!isNaN(t)&&t!=this._width){var e=this._width;this._width=t,this._layoutChanged(),this._propChanged("width",this._width,e)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillWidth",{get:function(){return this._fillWidth},set:function(t){t=Math.max(0,t),isNaN(t)||t==this._fillWidth||(this._fillWidth=t,this._layoutChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checked",{get:function(){return this._checked},set:function(t){(t!=this._checked||this._indeterminate)&&(this._indeterminate=!1,this._checked=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indeterminate",{get:function(){return this._indeterminate},set:function(t){t!=this._indeterminate&&(this._checked=!1,this._indeterminate=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this._header},enumerable:!1,configurable:!0}),e.prototype.setHeader=function(t){this._header.assignFrom(t)},Object.defineProperty(e.prototype,"footers",{get:function(){return this._footers},enumerable:!1,configurable:!0}),e.prototype.setFooters=function(t){this._footers.assignFrom(t),this._changed()},Object.defineProperty(e.prototype,"footer",{get:function(){return this._footers.get(0)},enumerable:!1,configurable:!0}),e.prototype.setFooter=function(t){this.setFooters(t)},Object.defineProperty(e.prototype,"headerSummaries",{get:function(){return this._headerSummaries},enumerable:!1,configurable:!0}),e.prototype.setHeaderSummaries=function(t){this._headerSummaries.assignFrom(t),this._changed()},Object.defineProperty(e.prototype,"headerSummary",{get:function(){return this._headerSummaries.get(0)},enumerable:!1,configurable:!0}),e.prototype.setHeaderSummary=function(t){this.setHeaderSummaries(t)},Object.defineProperty(e.prototype,"groupFooters",{get:function(){return this._groupFooters},enumerable:!1,configurable:!0}),e.prototype.setGroupFooters=function(t){this._groupFooters.assignFrom(t),this._changed()},Object.defineProperty(e.prototype,"groupFooter",{get:function(){return this._groupFooters.get(0)},enumerable:!1,configurable:!0}),e.prototype.setGroupFooter=function(t){this.setGroupFooters(t)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._layout?this._layout.grid:this.$_owner?this.$_owner.owner:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayText",{get:function(){return this._header.text||this._name||"col_"+this._index},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayWidth",{get:function(){return this._layout?this._layout.domWidth:this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayIndex",{get:function(){return this._layout?this._layout.vindex:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataRoot",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),e.prototype.clean=function(){this._dirty=!1,this._header&&this._header.clean(),this._footers&&this._footers.clean(),this._headerSummaries&&this._headerSummaries.clean(),this._groupFooters&&this._groupFooters.clean()},e.prototype.isWritable=function(){return!1},e.prototype.stateFor=function(t){return this._states[t]},e.prototype.setState=function(t,e){this._states[t]=e},e.prototype.getFooter=function(t){return this._footers.get(t)},e.prototype.getHeaderSummary=function(t){return this._headerSummaries.get(t)},e.prototype.assignFrom=function(e){t.prototype.assignFrom.call(this,e),this._header.assignFrom(e.header),this._footers.assignFrom(e.footers||e.footer),this._headerSummaries.assignFrom(e.summaries||e.summary||e.headerSummaries||e.headerSummary),this._groupFooters.assignFrom(e.groupFooters||e.groupFooter)},e.prototype.toString=function(){return this.displayText},e.prototype._prepareLayout=function(t,e){},e.prototype._changed=function(){if(!this._dirty){this._dirty=!0;var t=this.grid;t&&t.invalidateColumn(this)}},e.prototype._propChanged=function(t,e,i){var o=this.grid;o&&o._fireColumnPropertyChanged(this,t,e,i)},e.prototype.$_setIndex=function(t){this._index=t},e.prototype._headerChanged=function(){this._changed()},e.prototype._headerSummaryChanged=function(){this._changed()},e.prototype._footerChanged=function(){this._changed()},e.prototype._resetIndices=function(t){},e.prototype.$_layoutIndexChanged=function(t,e){this._propChanged("displayIndex",e,t)},e.prototype.$_layoutWidthChanged=function(t,e){this._propChanged("displayWidth",e,t)},e}(Lt),as=function(e){function i(i){var o=e.call(this,i)||this;return o._blankWhenCopy=!1,o._blankWhenExport=!1,o._ignoreDefaultDynamicStyles=!1,o._textInputCase=t.TextInputCase.NORMAL,o._button=t.CellButton.NONE,o._buttonVisibility=t.ButtonVisibility.DEFAULT,o._editButtonVisibility=t.ButtonVisibility.DEFAULT,o._displayMinusZero=!0,o._valueSeparator=",",o}return o(i,e),i.prototype._doDispose=function(){this._popupMenu=null,this._popupMenuName=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!==this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?qe.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayMinusZero",{get:function(){return this._displayMinusZero},set:function(t){this._displayMinusZero!=t&&(this._displayMinusZero=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!==this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?Ge.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!==this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?We.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textFormat",{get:function(){return this._textFormat},set:function(t){t!==this._textFormat&&(this._textFormat=t,this._textFormatter=t?Vn.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"prefix",{get:function(){return this._prefix},set:function(t){t!=this._prefix&&(this._prefix=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"suffix",{get:function(){return this._suffix},set:function(t){t!=this._suffix&&(this._suffix=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blankWhenCopy",{get:function(){return this._blankWhenCopy},set:function(t){t!=this._blankWhenCopy&&(this._blankWhenCopy=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blankWhenExport",{get:function(){return this._blankWhenExport},set:function(t){t!=this._blankWhenExport&&(this._blankWhenExport=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ignoreDefaultDynamicStyles",{get:function(){return this._ignoreDefaultDynamicStyles},set:function(t){t!=this._ignoreDefaultDynamicStyles&&(this._ignoreDefaultDynamicStyles=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textInputCase",{get:function(){return this._textInputCase},set:function(t){t!=this._textInputCase&&(this._textInputCase=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){t!=this._exportStyleName&&(this._exportStyleName=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!=this._styleCallback&&(this._styleCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"renderer",{get:function(){return this._renderer},set:function(t){this._renderer=t,this.grid&&this._layout&&this.grid.$_rendererChanged(this._layout),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editor",{get:function(){return this._editor},set:function(t){this._editor=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"button",{get:function(){return this._button},set:function(t){t!=this._button&&(this._button=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonWidth",{get:function(){return this._buttonWidth},set:function(t){t!=this._buttonWidth&&(this._buttonWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonVisibility",{get:function(){return this._buttonVisibility},set:function(t){t!=this._buttonVisibility&&(this._buttonVisibility=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonVisibleCallback",{get:function(){return this._buttonVisibleCallback},set:function(t){this._buttonVisibleCallback=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editButtonVisibility",{get:function(){return this._editButtonVisibility},set:function(t){t!=this._editButtonVisibility&&(this._editButtonVisibility=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textFormatter",{get:function(){return this._textFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"boolFormatter",{get:function(){return this._boolFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupMenuName",{get:function(){return this._popupMenuName?this._popupMenuName:this._popupMenu?(this._popupMenuName="$$_column_popup_menu"+this.$_hash,this.grid.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this.grid&&this._popupMenuName):null},set:function(t){null!=t&&"string"!=typeof t||(this._popupMenuName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"edgeMark",{get:function(){return this._edgeMark},set:function(t){t!==this._edgeMark&&(this._edgeMark=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueSeparator",{get:function(){return this._valueSeparator},set:function(t){t!=this._valueSeparator&&(this._valueSeparator=t,this._changed())},enumerable:!1,configurable:!0}),i.prototype.getCellStyle=function(t){return this._styleCallback&&this._styleCallback(this.grid.handler,t)},i.prototype.affix=function(t){return this._prefix&&(t=this._prefix+t),this._suffix&&(t+=this._suffix),t},i.prototype._prepareLayout=function(t,i){e.prototype._prepareLayout.call(this,t,i)},i}(ss),ls=function(e){function i(i){var o=e.call(this)||this;return o._fieldIndex=-1,o._readOnly=!1,o._breakMergeOnEmpty=!1,o._equalBlank=!1,o._equalBlankText="",o._values=null,o._labels=null,o._lookupDisplay=!1,o._lookupSource=null,o._lookupKeyFields=null,o._lookupKeyFieldIds=null,o._mergeGrouped=!1,o._sortable=!0,o._sortOrder=-1,o._sortByLabel=!1,o._filterable=!0,o._filterIconVisible=!0,o._autoFilter=!1,o._filterSelectorWidth=0,o._lookupData=null,o._required=!1,o._requiredLevel=t.ValidationLevel.ERROR,o._validations=new Fn(!0),o._groupable=!0,o._dataIndex=-1,o._baseIndex=-1,o._valueType=t.ValueType.TEXT,o._groupLevel=-1,o._labelFieldIndex=-1,o._filters=new hr(o),o._filters.addListener(o),o._autoFilters=new hr(o),o._autoFilters.addListener(o),o._inlineFilters=new hr(o),o._inlineFilters.addListener(o),i&&o.assignFrom(i),o}return o(i,e),i.prototype._doDispose=function(){this._mergeRuleObj=this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._filters=this._filters&&this._filters.dispose(),this._autoFilters=this._autoFilters&&this._autoFilters.dispose(),this._inlineFilters=this._inlineFilters&&this._inlineFilters.dispose(),this.validations=this._validations&&this._validations.dispose(),e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"fieldIndex",{get:function(){return this._fieldIndex},set:function(t){(t=Math.max(-1,t))!=this._fieldIndex&&(this._fieldIndex=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldName",{get:function(){return this._fieldName},set:function(t){t!=this._fieldName&&(this._fieldName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},set:function(t){t!=this._readOnly&&(this._readOnly=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nanText",{get:function(){return this._nanText},set:function(t){t!=this._nanText&&(this._nanText=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"zeroText",{get:function(){return this._zeroText},set:function(t){t!=this._zeroText&&(this._zeroText=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultValue",{get:function(){return this._defaultValue},set:function(t){t!=this._defaultValue&&(this._defaultValue=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeRule",{get:function(){return this._mergeRule},set:function(t){t!=this._mergeRule&&(this._mergeRule=t,this._mergeCallback=null,this.$_setMergeRule(t))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeCallback",{get:function(){return this._mergeCallback},set:function(t){this._mergeCallback=t,this._mergeRule=null,this.$_setMergeRule(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(t){if(t!=this._breakMergeOnEmpty){this._breakMergeOnEmpty=t;var e=this.grid;e&&this.layout&&e._columnMergeRuleChanged(this.layout)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"equalBlank",{get:function(){return this._equalBlank},set:function(t){t!=this._equalBlank&&(this._equalBlank=t,this._layoutChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"equalBlankExpression",{get:function(){return this._equalBlankExpression},set:function(t){t!=this._equalBlankExpression&&(this._equalBlankExpression=t,this._equalBlankNode=t?Ie.Default.parse(t,null):void 0,this._layoutChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"equalBlankText",{get:function(){return this._equalBlankText},set:function(t){t!=this._equalBlankText&&(this._equalBlankText=t,this._layoutChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"equalBlankLine",{get:function(){return this._equalBlankLine},set:function(t){t!=this._equalBlankLine&&(this._equalBlankLine=t,this._layoutChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeEdit",{get:function(){return!!this._mergeEdit},set:function(t){t!=this._mergeEdit&&(this._mergeEdit=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"excelFormat",{get:function(){return this._excelFormat},set:function(t){t!=this._excelFormat&&(this._excelFormat=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"excelFormulaStatement",{get:function(){return this._excelFormulaStatement},set:function(t){t!=this._excelFormulaStatement&&(this._excelFormulaStatement=t,t?this._excelFormulaExprStatement?this._excelFormulaExprStatement.source=t:this._excelFormulaExprStatement=new rr(t):this._excelFormulaExprStatement=null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"excelFormulaExprStatement",{get:function(){return this._excelFormulaExprStatement},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataIndex",{get:function(){return this._dataIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"baseIndex",{get:function(){return this._baseIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueType",{get:function(){return this._valueType},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupLevel",{get:function(){return this._groupLevel},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"values",{get:function(){return this._values},set:function(t){t!=this._values&&(this._values=t?t.map((function(t,e){return null!=t?String(t):t})):[],this._lookupMap=null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labels",{get:function(){return this._labels},set:function(t){t!=this._labels&&(this._labels=t&&t.slice(),this._lookupMap=null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(t){this._lookupDisplay!=t&&(this._lookupDisplay=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupSource",{get:function(){return this._lookupSource},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupSourceId",{get:function(){return this._lookupSourceId},set:function(t){this._lookupSourceId!=t&&(this._lookupSourceId=t,this._changed(),this.grid&&this.$_resetLookup(this.grid))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupKeyFields",{get:function(){return this._lookupKeyFields},set:function(t){t!=this._lookupKeyFields&&(this._lookupKeyFields=Rt.makeArray(t,!0).slice(),this._changed(),this.grid&&this.$_resetLookup(this.grid))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupKeyFieldIds",{get:function(){return this._lookupKeyFieldIds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labelField",{get:function(){return this._labelField},set:function(t){this._labelField!=t&&(this._labelField=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textOfInvalid",{get:function(){return this._textOfInvalid},set:function(t){this._textOfInvalid!=t&&(this._textOfInvalid=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"placeHolder",{get:function(){return this._placeHolder},set:function(t){t!==this._placeHolder&&(this._placeHolder=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"placeHolderStyleName",{get:function(){return this._placeHolderStyleName},set:function(t){t!==this._placeHolderStyleName&&(this._placeHolderStyleName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labelFieldIndex",{get:function(){return this._labelFieldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayCallback",{get:function(){return this._displayCallback},set:function(t){this._displayCallback=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeGrouped",{get:function(){return this._mergeGrouped},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortable",{get:function(){return this._sortable},set:function(t){t!=this._sortable&&(this._sortable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortOrder",{get:function(){return this._sortOrder},set:function(t){this._sortOrder=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortDirection",{get:function(){return this._sortDirection},set:function(t){this._sortDirection=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortByLabel",{get:function(){return this._sortByLabel},set:function(t){this._sortByLabel!==t&&(this._sortByLabel=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterable",{get:function(){return this._filterable},set:function(t){t!=this._filterable&&(this._filterable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterIconVisible",{get:function(){return this._filterIconVisible},set:function(t){this._filterIconVisible!=t&&(this._filterIconVisible=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"autoFilter",{get:function(){return this._autoFilter},set:function(t){t!==this._autoFilter&&(this._autoFilter=t,!t&&this._autoFilters&&this._autoFilters.count>0&&this._autoFilters.clear(),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filters",{get:function(){return this._filters},set:function(t){t instanceof hr||this.setFilters(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"autoFilters",{get:function(){return this._autoFilters},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showInlineFilter",{get:function(){return this._showInlineFilter},set:function(t){t!==this._showInlineFilter&&(this._showInlineFilter=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterSelectorWidth",{get:function(){return this._filterSelectorWidth},set:function(t){this._filterSelectorWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"required",{get:function(){return this._required},set:function(t){t!=this._required&&(this._required=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"requiredMessage",{get:function(){return this._requiredMessage},set:function(t){t!=this._requiredMessage&&(this._requiredMessage=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"requiredLevel",{get:function(){return this._requiredLevel},set:function(t){t!=this._requiredLevel&&(this._requiredLevel=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"validations",{get:function(){return this._validations},set:function(t){this._validations.assignFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupable",{get:function(){return this._groupable},set:function(t){this._groupable!=t&&(this._groupable=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"objectKey",{get:function(){return this._objectKey},set:function(t){t!=this._objectKey&&(this._objectKey=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"objectCallback",{get:function(){return this._objectCallback},set:function(t){this._objectCallback=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayText",{get:function(){return this.header.text||this.fieldName||this.name||"col_"+this.index},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupData",{get:function(){return this._lookupData},set:function(t){if(t!==this._lookupData){var e=void 0,i=void 0,o=void 0,r=void 0,n={};if(this._lookupData=Rt.deepCopy(t),t){Rt.isArray(t)?n.list=t:n=t,this._labels=[],this._values=[],this._lookupMap=null,this._listItem=[],e=n.hasOwnProperty("value")?n.value:"value",i=n.hasOwnProperty("label")?n.label:"label";for(var s=0,a=n.list.length;s<a;s++)null!=(r=null!=(o=n.list[s])[e]?o[e]:o.code)&&this._values.push(null!=o[e]?o[e]:o.code),null!=r&&this._labels.push(null!=o[i]?o[i]:null!=o.text?o.text:r),this._listItem.push(o)}else this._labels=null,this._values=null,this._lookupMap=null,this._listItem=null;this._changed()}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"listItem",{get:function(){return this._listItem},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellProtectProps",{get:function(){return this._cellProtectProps},set:function(t){this._cellProtectProps=t},enumerable:!1,configurable:!0}),i.prototype.getField=function(){var t=this._dataIndex;if(t>=0){var e=this.grid.dataSource;if(e)return e.getField(t)}return null},i.prototype.getLookupLabel=function(t,e){if(null!=t){var i,o=this._lookupMap;if(!o){var r=this._values,n=this._labels||[];if(r&&r.length>0){o=this._lookupMap={};for(var s=0;s<r.length;s++)o[r[s]]=n[s]||r[s]}}var a=this.textOfInvalid;if("string"==typeof t&&t&&this._valueSeparator){for(var l=t.split(this._valueSeparator),h=[],u=(s=0,l.length);s<u;s++){var c=void 0,d=l[s];c=o&&o[d]?o[d]:e&&null!=a?String(a):d,h.push(c)}i=h.join(this._valueSeparator)}else i=o?o[t]:void 0;return i||(e&&null!=a?a:t)}},i.prototype.getLookupIndex=function(t){if(this._values&&this._values.length>0)for(var e=0,i=this._values.length;e<i;e++)if(this._values[e]==t)return e;return-1},i.prototype.getLookupIndices=function(t){var e=[];if(t&&this._values&&this._values.length>0)for(var i=Rt.isArray(t)?t:String(t).split(this._valueSeparator),o=0,r=i.length;o<r;o++)this._values.indexOf(i[o])>=0&&e.push(this._values.indexOf(i[o]));return e},i.prototype.getLookupValue=function(t){if(this._values&&this._values.length>0)return this._values[t]},i.prototype.getLookupValues=function(t){var e=[];if(this._values&&this._values.length>0)for(var i=0,o=t.length;i<o;i++)t[i]>=0&&t[i]<this._values.length&&e.push(this._values[t[i]]);return e},i.prototype.getSourceValue=function(t){var e=this._values,i=this._labels;if(i&&e){var o=i.indexOf(t);if(o>=0&&e.length>o)return e[o];if((o=e.indexOf(t))>=0)return e[o]}},i.prototype.getSourceValues=function(t){var e=this._values,i=this._labels;if(i&&e){for(var o=void 0,r=[],n=this._valueSeparator,s=0,a=(t=Rt.isArray(t)?t:n&&t?String(t).split(n):Rt.makeArray(t)).length;s<a;s++)(o=i.indexOf(t[s]))>=0&&e.length>o?r.push(e[o]):r.push(t[s]);if(r.length>0&&n)return r.join(n);if(r.length>0)return r.join()}},Object.defineProperty(i.prototype,"$_filters",{get:function(){return this._autoFilter?this._autoFilters:this._filters},enumerable:!1,configurable:!0}),i.prototype.clearFilters=function(){this.setFilters(null)},i.prototype.addFilters=function(t,e){if(t){var i=this.grid;i&&!i.canFiltering()||this._filters.addAll(Rt.makeArray(t),e)}},i.prototype.removeFilters=function(t){if(t){var e=this.grid;e&&!e.canFiltering()||this._filters.removeItems(Rt.makeArray(t))}},i.prototype.activateFilters=function(t,e){if(t){var i=this.grid;i&&!i.canFiltering()||this.$_filters.activateItems(Rt.makeArray(t),e)}},i.prototype.activateAllFilters=function(t,e){void 0===e&&(e=!0);var i=this.grid;i&&!i.canFiltering()||this.$_filters.activateAll(t,e)},i.prototype.hideColumnFilters=function(t,e){this.$_filters.hideFilters(Rt.makeArray(t),e)},i.prototype.hideAllColumnFilters=function(t){this.$_filters.hideAllFilters(t)},i.prototype.toggleFilters=function(t){if(t){var e=this.grid;e&&!e.canFiltering()||this.$_filters.toggleItems(Rt.makeArray(t))}},i.prototype.toggleAllFilters=function(){var t=this.grid;t&&!t.canFiltering()||this.$_filters.toggleAll()},i.prototype.getFilter=function(t){var e=this.$_filters,i=e.indexOf(t);return e.getItem(i)},i.prototype.getActiveFilters=function(t){return this.$_filters.getActiveItems(t)},Object.defineProperty(i.prototype,"hasFilters",{get:function(){return this._autoFilter||this._filters.count>0},enumerable:!1,configurable:!0}),i.prototype.isFiltered=function(){return this.grid.itemSource.isFiltered(this.dataIndex)},i.prototype.setFilters=function(t){var e=this.grid;e&&!e.canFiltering()||this._filters.assignFrom(t)},i.prototype.autoFilterRefresh=function(t){var e=this.grid,i=null==e?void 0:e.dataSource;if(e&&i&&this._autoFilter){var o=e.filterSelector._manager;o&&o.buildItems(this,i,!0,t)}},i.prototype.setInlineFilter=function(t,e){var i=this._inlineFilters,o=i.getItem(0);o||(i.add({name:"inlineFilter"},!1),o=i.getItem(0)),o.criteria!=t&&(void 0===t?(o.criteria=void 0,e?o.active=!1:o._active=!1):(o._active=!1,o.criteria=t,o.active=!!o.criteria))},i.prototype.onColumnFilterChanged=function(t,e,i,o){var r=this.grid;r&&(o?this._changed():r.columnFilterChanged(t,e,i))},i.prototype._prepareLayout=function(t,i){e.prototype._prepareLayout.call(this,t,i)},i.prototype._resetIndices=function(t){this._dataIndex=-1,this._baseIndex=-1;var e=t.dataSource;e&&(this._fieldName?this._dataIndex=e.getFieldIndex(this._fieldName):this._dataIndex=this._fieldIndex,this._dataIndex>=0&&(this._baseIndex=e.getBaseField(this._dataIndex),this._valueType=e.getValueType(this._dataIndex)),this._labelFieldIndex=e.getFieldIndex(this._labelField),this.$_resetLookup(t))},i.prototype.isWritable=function(){var t=this.grid.editOptions;return(t.columnEditableFirst?null!=this._editable?this._editable:t.editable:t.editable&&!1!==this._editable)&&!this._readOnly},i.prototype.assignFrom=function(t){e.prototype.assignFrom.call(this,t)},i.prototype.$_setMergeGrouped=function(t){this._mergeGrouped=t},i.prototype.$_setGroupLevel=function(t){this._groupLevel=t},i.prototype.$_resetLookup=function(t){if(this._lookupKeyFields&&this._lookupKeyFields.length>0&&this._lookupSourceId){for(var e=this._lookupKeyFields.length,i=this._lookupKeyFieldIds=new Array(e),o=0;o<e;o++)i[o]=t.dataSource.getFieldIndex(this._lookupKeyFields[o]);this._lookupSource=t.lookupProvider.getSource(this._lookupSourceId)}else this._lookupSource=null,this._lookupKeyFieldIds=[]},i.prototype._changed=function(){e.prototype._changed.call(this)},i.prototype.$_setMergeRule=function(t){this._mergeRuleObj=this._mergeRuleObj&&this._mergeRuleObj.dispose(),t&&(this._mergeRuleObj=Wn.createRule(t));var e=this.grid;e&&this.layout&&e._columnMergeRuleChanged(this.layout)},i.CAPITAL_INDEXERS=["value","values"],i}(as),hs=function(t){function e(e){var i=t.call(this)||this;return i.blankWhenCopy=!0,i._fieldArray=i._fieldArray||[],i._fields=i._fields||[],e&&i.assignFrom(e),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"fieldNames",{get:function(){return this._fieldNames},set:function(t){t!=this._fieldNames&&(this._fieldNames=t,this._fieldArray=t?t.split(","):[],this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualTarget",{get:function(){return this._actualTarget},set:function(t){this._actualTarget=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fields",{get:function(){return this._fields},enumerable:!1,configurable:!0}),e.prototype._resetIndices=function(t){this._fields=[];var e=t.dataSource;if(e)for(var i=0,o=this._fieldArray.length;i<o;i++){var r=this._fieldArray[i],n=r.split("..");if(n.length>1){var s=e.getFieldIndex(n[0]),a=e.getFieldIndex(n[1]);if(s>=0&&a>=0)for(var l=Math.min(s,a),h=Math.max(s,a),u=l;u<=h;u++)this._fields.push(u)}else{(u=e.getFieldIndex(r))>=0&&this._fields.push(u)}}},e}(as),us=function(t){function e(e){var i=t.call(this)||this;return e&&i.assignFrom(e),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cellProtectProps",{get:function(){return this._cellProtectProps},set:function(t){this._cellProtectProps=t},enumerable:!1,configurable:!0}),e}(as),cs=function(){function t(){this._layouts={}}return t.prototype._doDispose=function(){this._layouts=null},t.prototype.find=function(t){return this._layouts[t]},t.prototype.clear=function(){this._layouts={}},t.prototype.load=function(t){if(t=Rt.makeArray(t),this._layouts={},t)for(var e=0,i=t.length;e<i;e++){var o=t[e];o.name&&!this._layouts[o.name]&&(this._layouts[o.name]=o.items)}},t}();t.CellLayoutType=void 0,(Kr=t.CellLayoutType||(t.CellLayoutType={})).GROUP="group",Kr.COLUMN="column",Kr.PROXY="proxy";var ds,ps=function(e){function i(){var t=e.call(this)||this;return t._visible=!0,t._width=NaN,t._fillWidth=NaN,t._index=-1,t._vindex=-1,t._row=0,t._col=0,t._hrow=0,t._hcol=0,t._cspan=1,t._hspan=1,t._dspan=1,t._clen=1,t._hlen=1,t._dlen=1,t._cellWidth=0,t._fitWidth=NaN,t._defColSpan=1,t._header=t._createHeader(),t._header&&(t._header._layout=t),t}return o(i,e),i.getSource=function(t){return t instanceof fs?t.source:t},i.prototype._doDispose=function(){this._header=this._header&&this._header.dispose(),this.$_grid=this._parent=this._root=this._dataRoot=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){if(this.$_grid)return this.$_grid;var t=this.root;return t&&t._parent.grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"source",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isNull",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isProxy",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._changed(),this._propChanged("visible",this._visible,!this._visible))},enumerable:!1,configurable:!0}),i.prototype.$_isVisible=function(t){return this._visible},Object.defineProperty(i.prototype,"header",{get:function(){return this._header},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"owner",{get:function(){return this._parent&&this._parent.owner},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"group",{get:function(){return this._parent instanceof Os?null:this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"root",{get:function(){return this._root?this._root:this._root=this.getAncestor(-1)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isRoot",{get:function(){return this.root===this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataRoot",{get:function(){if(!this._dataRoot){var t=this.group;if(t)do{this._dataRoot=t,t=t.group}while(t);else this._dataRoot=this}return this._dataRoot},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vindex",{get:function(){return this._vindex},set:function(t){var e=this._vindex;if(this._parent&&this._parent.$_changeChildVIndex(this,t),this._vindex!=e){this._propChanged("displayIndex",this._vindex,e);var i=this.firstColumn;i&&this instanceof _s&&i.$_layoutIndexChanged(e,this._vindex)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"row",{get:function(){return this._row},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"col",{get:function(){return this._col},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hrow",{get:function(){return this._hrow},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hcol",{get:function(){return this._hcol},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._getWidth(this._width)},set:function(t){t=Math.max(0,t),this.grid&&(t=Math.max(t,this.grid.displayOptions.minCellWidth)),t!=this._width&&(this._width=t,this._parent&&this._parent._childWidthChanged(this))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillWidth",{get:function(){return this._getFillWidth(this._fillWidth)},set:function(t){(t=Math.max(0,t))!=this._fillWidth&&(this._fillWidth=t,this._parent&&this._parent._childFillWidthChanged(this))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupShowMode",{get:function(){return this._groupShowMode},set:function(t){t!=this._groupShowMode&&(this._groupShowMode=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"domWidth",{get:function(){if(!!this.grid&&this.grid.layoutManager.isColumnFitted){var t=this.grid,e=t.layoutManager,i=t.fixedOptions.colCount,o=e.cellCount,r=this.$_fixed?e._fixedCellPoints:this.$_rfixed?e._rightCellPoints:this.grid.layoutManager._cellPoints,n=this.$_fixed?this._col:this.$_rfixed?this._col-(o-i):this._col-i;return r[n+(this instanceof vs?this._clen:this._defColSpan)]-r[n]}return this.cellWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"distance",{get:function(){return this._col},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cspan",{get:function(){return this._cspan},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hspan",{get:function(){return this._hspan},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hlen",{get:function(){return this._hlen},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"merged",{get:function(){return this._merged},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isFixed",{get:function(){return this.$_fixed||this.$_rfixed},enumerable:!1,configurable:!0}),i.prototype.load=function(e){"string"!=typeof e&&(void 0!==e.width&&(this.width=e.width),void 0!==e.header&&this._header.assignFrom(e.header),void 0!==e.fillWidth&&(this.fillWidth=e.fillWidth),this.groupShowMode=Rt.valueIn(e.groupShowMode,t.GroupShowMode)?e.groupShowMode:t.GroupShowMode.ALWAYS,void 0!==e.visible&&(this.visible=e.visible))},i.prototype.isColumn=function(t){return!1},i.prototype.cleanColumns=function(){},i.prototype.findLayout=function(t){return null},i.prototype.getHeaderSpan=function(){return 1},i.prototype.getSummarySpan=function(t){return 1},i.prototype.getFooterSpan=function(t){return 1},i.prototype.getDataSpan=function(){return 1},i.prototype.getGroupFooterSpan=function(t,e){return 1},i.prototype.getDataColumn=function(){return null},i.prototype.getFooterUserSpan=function(t){return null},i.prototype.getSummaryUserSpan=function(t){return null},i.prototype.getAncestor=function(t){void 0===t&&(t=-1);for(var e=this;e&&t--;){if(e._parent instanceof Os)return this._root=e;e=e._parent}return e},i.prototype.areEqualColumn=function(t){return this===t},i.prototype._createHeader=function(){return null},i.prototype._headerChanged=function(){this._changed()},i.prototype._prepareLayout=function(t,e,i){this.$_grid=t,this.$_fixed=e,this.$_rfixed=i,this._merged=!1},i.prototype._detach=function(){this._parent=void 0,this._index=-1,this._vindex=-1,this._row=-1,this._col=-1,this._cspan=1,this._hspan=1,this._dspan=1,this._clen=1,this._hlen=1,this._dlen=1,this._root=void 0,this._dataRoot=void 0},i.prototype._getWidth=function(t){return t},i.prototype._getFillWidth=function(t){return t},i.prototype.changeCellWidth=function(t,e,i){var o=this.owner,r=o&&o.grid,n=r&&r._loading,s=i?this.cellWidth:this.domWidth,a=this.domWidth,l=this.grid.displayOptions.minCellWidth;if(isNaN(s)&&n&&i)this.width=t;else{var h=t-s;if(e&&!i&&(h*=this.cellWidth/(isNaN(this._fitWidth)?this.cellWidth:this._fitWidth)),h=Math.round(h))if(this.grid._columnsDirty&&this.owner.$_refresh(this.grid._columns,l),o&&o.isShowing(this)){if(o){var u=this._col,c=void 0;c=this instanceof vs?this._clen:this._defColSpan,o.$_changeCellWidths(u,c,h,l);var d=o._cellWidths;if(d&&d.length)for(var p=o._dataCells,f=0;f<p.length;f++)for(var _=p[f],g=0;g<c;g++)_[u+g]._cellWidth=d[u+g];o.$_calcGroupWidths()}setTimeout(function(){if(this.domWidth!=a){var t=this.firstColumn;this._propChanged("displayWidth",this.domWidth,a),t&&this instanceof _s&&t.$_layoutWidthChanged(a,this.domWidth)}}.bind(this),50)}else{if(this instanceof vs||this._defColSpan>1)return;this._cellWidth=t}}},i.prototype._setFitWidth=function(t,e,i){this._fitWidth=t},i.prototype._clearFitWidth=function(){this._fitWidth=NaN},i.prototype._changed=function(){this._parent&&this._parent._changed()},i.prototype.$_setMerged=function(t){this._merged=t},i.prototype._propChanged=function(t,e,i){var o=this.grid;o&&o._fireLayoutPropertyChanged(this,t,e,i)},i}(Lt),fs=function(e){function i(i,o){var r=e.call(this)||this;return r._type=t.CellLayoutType.PROXY,r._source=i,r._index=o,r}return o(i,e),i.prototype._doDispose=function(){this._source=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"cellWidth",{get:function(){return this._cellWidth},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isProxy",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return this._source.visible},enumerable:!1,configurable:!0}),i.prototype.$_isVisible=function(t){return this._source.$_isVisible(t)},Object.defineProperty(i.prototype,"cols",{get:function(){return this._source.cols},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerRows",{get:function(){return this._source.headerRows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this._source.rows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"root",{get:function(){return this._source.root},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayText",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"first",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"last",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstColumn",{get:function(){return this._source.firstColumn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastColumn",{get:function(){return this._source.lastColumn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"boundColumn",{get:function(){return this._source.boundColumn},enumerable:!1,configurable:!0}),i.prototype.load=function(t){},i.prototype._isResizable=function(){return!1},i.prototype._isMovable=function(){return!1},i.prototype.clearMergeGrouped=function(){},i.prototype.containLayout=function(t){return!1},i}(ps),_s=function(e){function i(i){var o=e.call(this)||this;return o._cellSpan=1,o._cellWidths=[],o._cols=1,o._rows=1,o._blanked=!1,o._type=t.CellLayoutType.COLUMN,o._column=i,o._columnObj=i instanceof as?i:null,o}return o(i,e),i.prototype._doDispose=function(){this._column=this._columnObj=null,this._merges=this._merges&&this._merges.dispose(),this._mergeRuleObj=this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._equalBlankNode=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"column",{get:function(){return this._column},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellWidth",{get:function(){if(this.owner.isShowing(this)){var t=this.owner.getCellWidths(this._col,this._defColSpan);return isNaN(t)&&(t=this.width),t||this._cellWidth}return this._cellWidths&&this._cellWidths.reduce((function(t,e){return t+e}),0)||this._cellWidth},set:function(t){if(!this.owner._loading){var e=!!this.grid&&this.grid.layoutManager.isColumnFitted;t=Math.max(this.grid.displayOptions.minCellWidth,t),this.changeCellWidth(t,e,!0)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"merges",{get:function(){return this._merges},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeRule",{get:function(){return this._mergeRule},set:function(t){if(t!==this._mergeRule){this._mergeRule=t,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=t?Wn.createRule(t):void 0===t?void 0:null;var e=this.grid;e&&e._columnMergeRuleChanged(this)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(t){if(t!==this._breakMergeOnEmpty){this._breakMergeOnEmpty=t;var e=this.grid;e&&e._columnMergeRuleChanged(this)}},enumerable:!1,configurable:!0}),i.prototype.isBreakMergeOnEmpty=function(){return void 0===this._breakMergeOnEmpty?this._columnObj instanceof ls&&this._columnObj.breakMergeOnEmpty:this._breakMergeOnEmpty},Object.defineProperty(i.prototype,"equalBlank",{get:function(){return this._equalBlank},set:function(t){t!==this._equalBlank&&(this._equalBlank=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"equalBlankNode",{get:function(){return this._blankNodeRun},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blanked",{get:function(){return this._blanked},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"equalBlankExpression",{get:function(){return this._equalBlankExpression},set:function(t){t!==this._equalBlankExpression&&(this._equalBlankExpression=t,this._equalBlankNode=t?Ie.Default.parse(t,null):void 0===t?void 0:null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellSpan",{get:function(){return this._cellSpan},set:function(t){(t=Math.max(1,t))!=this._cellSpan&&(this._cellSpan=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerSpan",{get:function(){return this._headerSpan},set:function(t){t!=this._headerSpan&&(void 0!==t&&(t=Math.max(1,t)),this._headerSpan=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summarySpan",{get:function(){return this._summarySpans?this._summarySpans[0]:void 0},set:function(t){this._summarySpans=this._summarySpans||[],t!=this._summarySpans[0]&&(void 0!==t&&(t=Math.max(1,t)),this._summarySpans[0]=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summarySpans",{get:function(){return this._summarySpans&&this._summarySpans.slice()},set:function(t){t!==this._summarySpans&&(this._summarySpans=t&&t.slice(),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerSpan",{get:function(){return this._footerSpans&&this._footerSpans[0]},set:function(t){this._footerSpans=this._footerSpans||[],t!=this._footerSpans[0]&&(void 0!==t&&(t=Math.max(1,t)),this._footerSpans[0]=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerSpans",{get:function(){return this._footerSpans&&this._footerSpans.slice()},set:function(t){t!==this._footerSpans&&(this._footerSpans=t&&t.slice(),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataSpan",{get:function(){return this._dataSpan},set:function(t){t!=this._dataSpan&&(void 0!==t&&(t=Math.max(1,t)),this._dataSpan=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupFooterSpan",{get:function(){return this._groupFooterSpans&&this._groupFooterSpans[0]},set:function(t){this._groupFooterSpans=this._groupFooterSpans||[],t!=this._groupFooterSpans[0]&&(void 0!==t&&(t=Math.max(1,t)),this._groupFooterSpans[0]=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupFooterSpans",{get:function(){return this._groupFooterSpans&&this._groupFooterSpans.slice()},set:function(t){t!==this._groupFooterSpans&&(this._groupFooterSpans=t&&t.slice(),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"spanCallback",{get:function(){return this._spanCallback},set:function(t){t!=this._spanCallback&&(this._spanCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summarySpanCallback",{get:function(){return this._summarySpanCallback},set:function(t){t!=this._summarySpanCallback&&(this._summarySpanCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerSpanCallback",{get:function(){return this._footerSpanCallback},set:function(t){t!=this._footerSpanCallback&&(this._footerSpanCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupFooterSpanCallback",{get:function(){return this._groupFooterSpanCallback},set:function(t){t!=this._groupFooterSpanCallback&&(this._groupFooterSpanCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerUserSpans",{get:function(){return this._footerUserSpans},set:function(t){this._footerUserSpans=Rt.makeArray(t,!0).slice(),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryUserSpans",{get:function(){return this._summaryUserSpans},set:function(t){this._summaryUserSpans=Rt.makeArray(t,!0).slice(),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupFooterUserSpans",{get:function(){return this._groupFooterUserSpans},set:function(t){this._groupFooterUserSpans=Rt.makeArray(t,!0).slice(),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupFooterUserSpanCallback",{get:function(){return this._groupFooterUserSpanCallback},set:function(t){t!=this._groupFooterUserSpanCallback&&(this._groupFooterUserSpanCallback=t,this._changed())},enumerable:!1,configurable:!0}),i.prototype.canMerge=function(){if(null!=this._mergeRuleObj)return!0;var t=this._columnObj;if(t instanceof ls){if(t.mergeGrouped)return!0;if(t._mergeCallback)return!0;if(void 0===this._mergeRuleObj)return null!=t._mergeRuleObj}},Object.defineProperty(i.prototype,"isNull",{get:function(){return!this._columnObj},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cols",{get:function(){return this._cols},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerRows",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this._rows},set:function(t){this._rows=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"first",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"last",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstColumn",{get:function(){return this._columnObj},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastColumn",{get:function(){if(this._columnObj)return this._columnObj;for(var t=this.parent.visibles,e=t.indexOf(this);e-- >0;){var o=t[e];if(o instanceof i&&o.lastColumn)return o.lastColumn}return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"boundColumn",{get:function(){return this._columnObj},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayText",{get:function(){return this._header&&this._header.text||this._columnObj&&this._columnObj.displayText||this.toString()},enumerable:!1,configurable:!0}),i.prototype.getHeaderSpan=function(){return void 0===this._headerSpan?this._cellSpan:this._headerSpan},i.prototype.getSummarySpan=function(t){var e,i=this._summarySpanCallback,o=this._summarySpans;return i?void 0===(e=i(this.grid.handler,this,t))&&o&&o.length>t&&(e=o[t]):o&&o.length>t&&(e=o[t]),void 0===e?this._cellSpan:e},i.prototype.getFooterSpan=function(t){var e,i=this._footerSpanCallback,o=this._footerSpans;return i?void 0===(e=i(this.grid.handler,this,t))&&o&&o.length>t&&(e=o[t]):o&&o.length>t&&(e=o[t]),void 0===e?this._cellSpan:e},i.prototype.getFooterUserSpan=function(t){return this._footerUserSpans&&this._footerUserSpans[t]},i.prototype.getSummaryUserSpan=function(t){return this._summaryUserSpans&&this._summaryUserSpans[t]},i.prototype.getGroupFooterUserSpan=function(t,e){var i,o=this._groupFooterUserSpanCallback;return o&&(i=o(this.grid.handler,this,t,t.index,e)),i||this._groupFooterUserSpans&&this._groupFooterUserSpans[e]},i.prototype.getGroupFooterSpan=function(t,e){var i,o=this._groupFooterSpanCallback,r=this._groupFooterSpans;return o?void 0===(i=o(this.grid.handler,this,t,e))&&r&&r.length>e&&(i=r[e]):r&&r.length>e&&(i=r[e]),void 0===i?this._cellSpan:i},i.prototype.getDataSpan=function(){return void 0===this._dataSpan?this._cellSpan:this._dataSpan},i.prototype.getDataColumn=function(){return this._columnObj},i.prototype._createHeader=function(){return new ms(this)},i.prototype._isResizable=function(){return!this._columnObj||this._columnObj.resizable},i.prototype._isMovable=function(){for(var t=!0,e=this.parent;e;)t=t&&e.childColumnMovable,e=e.parent;return t&&(!this._columnObj||this._columnObj.movable)},i.prototype.isColumn=function(t){return this._columnObj===t},i.prototype.findLayout=function(t){return t&&this._columnObj===t?this:null},i.prototype.load=function(t){if(this.assignFrom(t),e.prototype.load.call(this,t),!this._columnObj&&"string"==typeof this._column){var i=this.owner&&this.owner.grid;this._columnObj=i?i.columnByName(this._column):null}},i.prototype.cleanColumns=function(){this._columnObj&&this._columnObj.clean()},i.prototype.$_isVisible=function(t){return t?this._visible:this._visible&&(!this._columnObj||this._columnObj.visible)},i.prototype._getWidth=function(t){return isNaN(t)?this._columnObj?this._columnObj.width:NaN:t},i.prototype._getFillWidth=function(t){return isNaN(t)?this._columnObj?this._columnObj.fillWidth:NaN:t},i.prototype._prepareLayout=function(i,o,r){if(e.prototype._prepareLayout.call(this,i,o,r),this._columnObj){this._columnObj._prepareLayout(i,this);var n=this.parent.direction===t.ColumnLayoutDirection.VERTICAL?this.cellSpan+this._dspan-1:this._dspan;(this._blanked=n===this.owner.dataRows)&&(this._blankNodeRun=this._equalBlankNode,this._blanked=this._equalBlank||null!=this._blankNodeRun,this._blanked||(void 0===this._equalBlankNode&&(this._blanked=null!=(this._blankNodeRun=this._columnObj._equalBlankNode)),this._blanked||void 0!==this._equalBlank||(this._blanked=this._columnObj._equalBlank)))}},i.prototype.toString=function(){return"string"==typeof this._column?this._column:e.prototype.toString.call(this)},i.prototype.clearMergeGrouped=function(){this.firstColumn instanceof ls&&this.firstColumn.$_setMergeGrouped(!1)},i.prototype.areEqualColumn=function(t){var e=this.boundColumn,i=t&&t.boundColumn;return t&&this.grid===t.grid&&e&&i&&e.name===i.name},i.prototype.containLayout=function(t){return t.source===this},i.prototype.$_bindColumn=function(t,e,i){if(void 0===i&&(i=!1),this._columnObj||(this._columnObj=e.columnByName(this._column)),!this._columnObj)throw new Error("not exists column ".concat(this._column));var o=this._columnObj.$_hash;if(t[o])throw new Error("Column is already contained in layouts: "+(this._columnObj.name||this._columnObj.displayText));i||(this._columnObj._layout=this),!i&&(this._columnObj._layout=this),t[o]=this},i.prototype.$_mergeRuleObj=function(){return this._mergeRuleObj?this._mergeRuleObj:void 0===this._mergeRuleObj&&this._columnObj instanceof ls?this._columnObj._mergeRuleObj:null},i}(ps);t.ColumnLayoutDirection=void 0,(ds=t.ColumnLayoutDirection||(t.ColumnLayoutDirection={})).VERTICAL="vertical",ds.HORIZONTAL="horizontal";var gs,ys,ms=function(t){function e(e){var i=t.call(this)||this;return i._layout=e,i}return o(e,t),e.prototype._doDispose=function(){this._layout=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this.layout.firstColumn.header.styleName},set:function(t){this.layout.firstColumn.header.styleName=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exportStyleName",{get:function(){return this.layout.firstColumn.header.exportStyleName},set:function(t){this.layout.firstColumn.header.exportStyleName=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return 1},enumerable:!1,configurable:!0}),e.prototype.isVisible=function(){return!0},e.prototype.getDisplayText=function(){return this._text},e.prototype.doAssignSimple=function(t){return"string"==typeof t&&(this.text=t,!0)},e.prototype._changed=function(){this._layout&&this._layout._headerChanged()},e}(Lt),bs=function(t){function e(e){var i=t.call(this,e)||this;return i._visible=!0,i._showTooltip=void 0,i._tooltipEllipsisOnly=void 0,i}return o(e,t),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){if(t!=this._visible){var e=this._layout;if(e&&e.isRoot&&!t&&(e.hideChildHeaders||1===e.headerRows))throw new Error("Group header cannot be hidden when all child headers are already hidden.");this._visible=t,this._changed()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"template",{get:function(){return this._template&&this._template.template},set:function(t){t!=this.template&&(t?(this.template||(this._template=new fn),this._template.template=t):this._template=void 0,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"templateEvents",{get:function(){return this._templateEvents},set:function(t){this._templateEvents=Rt.makeArray(t,!0),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){return this._values},set:function(t){t!==this._values&&(t?Rt.extendObj(t,this._values={}):this._values=void 0,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!==this._showTooltip&&(this._showTooltip=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tooltipEllipsisOnly",{get:function(){return this._tooltipEllipsisOnly},set:function(t){t!==this._tooltipEllipsisOnly&&(this._tooltipEllipsisOnly=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip},set:function(t){t!==this._tooltip&&(this._tooltip=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"edgeMark",{get:function(){return this._edgeMark},set:function(t){t!==this._edgeMark&&(this._edgeMark=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!==this._styleName&&(this._styleName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return Math.max(1,this._rows||1)},set:function(t){t!==this._rows&&(this._rows=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"templateCallback",{get:function(){return this._templateCallback},set:function(t){this._templateCallback=t,this._changed()},enumerable:!1,configurable:!0}),e.prototype.realizeTemplate=function(){var t=this._template;return t?t.realizeHeader(this,this._templateCallback,this._layout.grid):void 0},e.prototype.getValue=function(t){return this._values&&this._values[t]},e.prototype.doAssignSimple=function(e){return!t.prototype.doAssignSimple.call(this,e)&&"boolean"==typeof e&&(this.visible=e,!0)},e.prototype.isVisible=function(){return this._visible},e.prototype.getDisplayText=function(){var t=this.layout;return t.hideChildHeaders&&t.tiedColumn?t.tiedColumn.displayText:this.text||this.layout.name},Object.defineProperty(e.prototype,"displayText",{get:function(){return this.getDisplayText()},enumerable:!1,configurable:!0}),e}(ms),vs=function(e){function i(i,o){var r=e.call(this)||this;return r._direction=t.ColumnLayoutDirection.HORIZONTAL,r._items=[],r._resizable=!0,r._movable=!0,r._hideChildHeaders=!1,r._childColumnMovable=!0,r._visibles=[],r._cols=0,r._rows=0,r._headerRows=0,r._expandedLayouts=[],r._collapsedLayouts=[],r._type=t.CellLayoutType.GROUP,r._name=i,r._direction=o==t.ColumnLayoutDirection.VERTICAL?t.ColumnLayoutDirection.VERTICAL:t.ColumnLayoutDirection.HORIZONTAL,r}return o(i,e),i.getNext=function(t){var e=t&&t.parent;return e?((t=e.nextOf(t))||(t=i.getNext(e)),t):null},i.getPrev=function(t){var e=t&&t.parent;return e?((t=e.prevOf(t))||(t=i.getPrev(e)),t):null},i.isTop=function(t){for(var e=t&&t.parent;e;){if(e.vertical&&e.visibleCount>1&&t.vindex>0)return!1;e=(t=e).parent}return!0},i.isBottom=function(t){for(var e=t&&t.parent;e;){if(e.vertical&&e.visibleCount>1&&t.vindex<e.visibleCount-1)return!1;e=(t=e).parent}return!0},i.isLeft=function(t){for(var e=t&&t.parent;e;){if(!e.vertical&&e.visibleCount>1&&t.vindex>0)return!1;e=(t=e).parent}return!0},i.isRight=function(t){return i.isBottom(t)},i.prototype._doDispose=function(){this._items.forEach((function(t){t&&t.dispose()})),this._visibles=this._items=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"direction",{get:function(){return this._direction},set:function(e){e!=t.ColumnLayoutDirection.VERTICAL&&(e=t.ColumnLayoutDirection.HORIZONTAL),e!=this._direction&&(this._direction=e,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vertical",{get:function(){return this._direction==t.ColumnLayoutDirection.VERTICAL},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"horizontal",{get:function(){return this._direction!=t.ColumnLayoutDirection.VERTICAL},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resizable",{get:function(){return this._resizable},set:function(t){this._resizable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return this._movable},set:function(t){this._movable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hideChildHeaders",{get:function(){return this._hideChildHeaders},set:function(t){if(t!=this._hideChildHeaders){if(t&&this.isRoot&&!this.header.visible)throw new Error("cannot hide child headers when the group header is not visible.");this._hideChildHeaders=t,this._changed()}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"childColumnMovable",{get:function(){return this._childColumnMovable},set:function(t){this._childColumnMovable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items.slice()},set:function(t){this._items=t?t.slice():[];for(var e=0,i=this._items;e<i.length;e++){i[e]._parent=this}this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibleCount",{get:function(){return this._visibles.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibles",{get:function(){var t=this._visibles;return t?t.slice():[]},enumerable:!1,configurable:!0}),i.prototype.$_isVisible=function(t){return this.visible&&this._visibles.length>0},Object.defineProperty(i.prototype,"expandable",{get:function(){return this._expandable},set:function(t){t!=this._expandable&&(this._expandable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanded",{get:function(){return this._expanded},set:function(t){t!=this._expanded&&this.owner.expandLayout(this,t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tiedColumn",{get:function(){if(this._tiedColumn instanceof ls)return this._tiedColumn},set:function(t){this._tiedColumn="string"==typeof t?this.grid.columnByName(t):t instanceof ls?t:null,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"header",{get:function(){return this._header},enumerable:!1,configurable:!0}),i.prototype.indexOf=function(t){return this._items.indexOf(t)},i.prototype.getItem=function(t){return this._items[t]},i.prototype.getVisible=function(t){return this._visibles[t]},i.prototype.addLayout=function(e,o){if(!this.owner.isDefault()){var r,n,s,a=this.grid,l=this.owner;if(a&&a._checkEditing(),"string"==typeof e?s=l.layoutByName(e):e instanceof as?s=l.layoutByColumn(e):e&&"string"==typeof e.column&&(s=l.layoutByName(e.column)),s)throw new Error("addLayout fail - Column or Group is already contained in layouts: "+s.firstColumn.name);if("string"==typeof e||e instanceof as)r="string"==typeof e&&h(a,e),n=new _s(e);else if(e)if("string"==typeof e.column)r=h(a,e.column),n=new _s(e.column);else if((e.type===t.CellLayoutType.GROUP||e.items)&&e.name){if(l.layoutByName(e.name))throw new Error("addLayout fail - group is already contained in layouts: "+e.name);n=new i(e.name,e.direction)}return n?("object"==typeof e&&n.load(e),this.addItem(n,o),(n instanceof _s&&r||n instanceof i&&n._items.length)&&this.owner._root&&this.owner._root.resetColumns(a._columns),n):void 0}function h(t,e){var i=t.columnByName(e);if(!i)throw new Error("not exists column ".concat(e));return i}},i.prototype.removeLayout=function(t){if(!this.owner.isDefault()){var e=this.grid;return e&&e._checkEditing(),"string"==typeof t?t=this.layoutByName(t):t instanceof as&&(t=t.layout),t instanceof ps?(t.parent.removeItem(t,!0,!0),t):void 0}},i.prototype.addItem=function(t,e){void 0===e&&(e=this._items.length),null!=t&&e>=0&&e<=this._items.length&&(this._items.splice(e,0,t),t._parent=this,this._changed())},i.prototype.clear=function(t){void 0===t&&(t=!0);for(var e=0,o=this._items;e<o.length;e++){var r=o[e];t&&r instanceof i&&r.clear(),r._detach()}this._items=[],this._visibles=[],this._cols=0,this._rows=0,this._headerRows=0},i.prototype.removeItem=function(t,e,i){var o=this.indexOf(t);if(o>=0){if(t instanceof _s&&t.cellSpan>1)for(var r=t.cellSpan-1;r--;){var n=this._items.splice(o+r,1)[0];n&&(n._detach(),e&&n.dispose())}this._items.splice(o,1),i&&(o=this._visibles.indexOf(t))>=0&&this._visibles.splice(o,1),t._detach(),e&&t.dispose(),this._changed()}},i.prototype.layoutByName=function(t){if(t)for(var e=0,o=this._items;e<o.length;e++){var r=o[e];if(r instanceof _s&&r.firstColumn.name===t)return r;if(r instanceof i){if(r.name===t)return r;var n=r.layoutByName(t);if(n)return n}}return null},i.prototype.containLayout=function(t){if(t){if(this._items.indexOf(t)>=0)return!0;for(var e=0,i=this._items;e<i.length;e++){if(i[e].containLayout(t))return!0}}return!1},i.prototype.nextOf=function(t){try{var e=this.$_checkVisible(t);if(e<this.visibleCount-1)return t=ws(this,e+1)}catch(t){Rt.log("nextOf fail")}return null},i.prototype.prevOf=function(t){try{var e=this.$_checkVisible(t);if(e>0)return t=Cs(this,e-1)}catch(t){Rt.log("prevOf fail")}return null},i.prototype.isExpandable=function(){return this.expandable&&this._expandedLayouts.length>0&&this._collapsedLayouts.length>0},i.prototype.expandAll=function(t,e){this.expandable&&(this.expanded=t),this._items.forEach((function(o){o instanceof i&&o.expandAll(t,e)}))},i.prototype._clearFitWidth=function(){e.prototype._clearFitWidth.call(this);for(var t=0,i=this._visibles;t<i.length;t++){i[t]._clearFitWidth()}},Object.defineProperty(i.prototype,"cellWidth",{get:function(){return this.owner.getCellWidths(this._col,this._clen)},set:function(t){var e=!!this.grid&&this.grid.layoutManager.isColumnFitted;this.changeCellWidth(t,e,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cols",{get:function(){return this._cols},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerRows",{get:function(){return this._headerRows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"first",{get:function(){return this._visibles.length>0?this._visibles[0].first:this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"last",{get:function(){var t=this._visibles?this._visibles.length:0;return t>0?this._visibles[t-1].last:this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstColumn",{get:function(){return this._visibles&&this._visibles.length>0?this._visibles[0].firstColumn:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastColumn",{get:function(){for(var t=this._visibles?this._visibles.length-1:-1;t>=0;t--){var e=this._visibles[t].lastColumn;if(e)return e}return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"boundColumn",{get:function(){return this.tiedColumn},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayText",{get:function(){return this._header&&this._header.getDisplayText()||this._name},enumerable:!1,configurable:!0}),i.prototype._createHeader=function(){return new bs(this)},i.prototype.load=function(t){this.clear(),void 0!==t.hideChildHeaders&&(this.hideChildHeaders=t.hideChildHeaders),this.expandable=t.expandable,this._expanded=null==t.expanded||t.expanded,void 0!==t.resizable&&(this.resizable=t.resizable),void 0!==t.childColumnMovable&&(this.childColumnMovable=t.childColumnMovable),void 0!==t.movable&&(this.movable=t.movable),t.tiedColumn&&(this.tiedColumn=t.tiedColumn),null==t.rows||isNaN(t.rows)||(this._rows=t.rows),t.items&&this._loadItems(t.items),e.prototype.load.call(this,t)},i.prototype.findLayout=function(t){for(var e=0,i=this._items;e<i.length;e++){var o=i[e].findLayout(t);if(o)return o}return null},i.prototype.cleanColumns=function(){for(var t=0,e=this.items.length;t<e;t++)this.getItem(t).cleanColumns()},i.prototype._isResizable=function(){return this._resizable},i.prototype._isMovable=function(){for(var t=this._movable,e=this.parent;e;)t=t&&e.childColumnMovable,e=e.parent;return t},i.prototype._setFitWidth=function(i,o,r){if(e.prototype._setFitWidth.call(this,i,o,r),this.isRoot){for(var n=this.owner._dataCells,s=void 0,a=0,l=0;l<n.length;l++){s=[],a=0,0;for(var h=this.hcol;h<this.hcol+this.cols;h++){(y=n[l][h]).fillWidth>0?a+=y.fillWidth:y.cellWidth,s.push(y)}if(a>0)break}var u=i-(o=s.map((function(t){return t._cellWidth}))).reduce((function(t,e){return t+e}),0);if(a>0&&r===t.GridFitStyle.FILL)for(var c=0;c<s.length;c++){if(!(y=s[c]).isProxy&&y.fillWidth>0){for(var d=Math.round(u*y.fillWidth/a),p=0,f=0,_=0,g=y._defColSpan;_<g-1;_++){p+=d/g,f+=m=Math.round(p)-f,o[c+_]+=m}o[c+y._defColSpan-1]+=d-f}}else if(i!==this.cellWidth){for(p=0,f=0,c=0;c<s.length-1;c++){var y,m;p+=(y=s[c])._cellWidth/this.cellWidth*u,f+=m=Math.round(p)-f,o[c]+=m}o[s.length-1]+=u-f}}if(this.vertical)for(c=0;c<this._visibles.length;c++){(b=this._visibles[c])instanceof _s||b instanceof fs?b._setFitWidth(o[c],null,r):b._setFitWidth(i,o,r)}else for(c=0;c<this._visibles.length;c++){var b;if((b=this._visibles[c])instanceof _s||b instanceof fs)b._setFitWidth(o[c],null,r);else{var v=o.slice(this.col-b.col,b.cols);b._setFitWidth(v.reduce((function(t,e){return t+e}),0),v,r)}}return o},i.prototype._prepareLayout=function(t,i,o){e.prototype._prepareLayout.call(this,t,i,o);for(var r=0,n=this._visibles;r<n.length;r++){n[r]._prepareLayout(t,i,o)}},i.prototype.toString=function(){return this._name||e.prototype.toString.call(this)},i.prototype.clearMergeGrouped=function(){for(var t=0,e=this.items.length;t<e;t++)this.getItem(t).clearMergeGrouped()},i.prototype._loadItems=function(e){for(var o,r=0,n=0,s=e;n<s.length;n++){var a=s[n],l=void 0;r++,"string"==typeof a?o=l=new _s(a):"number"==typeof a?(l=new fs(o,r))._width=a:a&&(a.type===t.CellLayoutType.GROUP||a.items?l=new i(a.name,a.direction):"string"==typeof a.column?o=l=new _s(a.column):a instanceof as&&(o=l=new _s(a))),l&&(l._parent=this,l.load(a),this._items.push(l))}},i.prototype.$_bindColumns=function(t,e,o){for(var r=0,n=this._items;r<n.length;r++){var s=n[r];s._root=null,s instanceof i?s.$_bindColumns(t,e,o):!s.isProxy&&s.$_bindColumn(t,e,o)}},i.prototype.$_parseExpandLayouts=function(e){var o=this;this._expandedLayouts.length=this._collapsedLayouts.length=0,this.items.forEach((function(r,n){if(!r.isProxy){switch(r.groupShowMode){case t.GroupShowMode.EXPAND:o._expandedLayouts.push(r);break;case t.GroupShowMode.COLLAPSE:o._collapsedLayouts.push(r);break;default:o._expandedLayouts.push(r),o._collapsedLayouts.push(r)}r instanceof i&&r.$_parseExpandLayouts(e)}}))},i.prototype.$_parseHeaderCells=function(e,o,r){var n=this._direction===t.ColumnLayoutDirection.HORIZONTAL,s=0,a=this._header.isVisible()?this._header.rows:0;if(this._hideChildHeaders)return this._cspan=this._clen=this._cols,void(this._hlen=this._headerRows);for(var l=0,h=this._visibles;l<h.length;l++){var u=h[l],c=!u.isProxy&&u.header.isVisible()?u.header.rows:u.isProxy&&!n?1:0;if(u._hrow=o,u._hcol=r,u._hspan=c,u._hlen=c,u instanceof i)if(c>0&&(e[o][r]=u),u.$_parseHeaderCells(e,o+c,r),c>0){for(var d=0;d<c;d++)for(var p=0===d?1:0;p<u.cols;p++)e[o+d][r+p]=new fs(u,p);n?r+=u.cols:o+=u.headerRows}else n?r+=u.cols:o+=u.headerRows;else if(e[o][r]=u,n){for(d=1;d<this.headerRows-a;d++)e[o+d][r]=new fs(u,d),u._hspan++;u._hlen=u._hspan,r+=u.cols}else{for(d=1;d<this.cols;d++)e[o][r+d]=new fs(u,d);o+=u.rows}n?s=Math.max(u._hlen,s):s+=u._hlen}this._hlen=n?s+a:Math.max(1,s+a)},i.prototype.$_fillHorz=function(t,e,i,o,r,n,s){for(var a=o+n,l=r,h=l+i-1,u=0,c=e-n;u<c;u++)for(var d=h;d>=l;d--){var p=t[a+u][d];if(null!=p){p=ps.getSource(p);for(var f=d+1;f<=h;f++){var _=t[a+u][f]=new fs(p,f-l);s?(_._hrow=a+u,_._hcol=f):(_._row=a+u,_._col=f,_._parent=p.group,p.row===_.row&&(p._cspan++,p instanceof _s&&p._clen++))}break}}},i.prototype.$_fillVert=function(t,e,i,o,r,n,s){for(var a=o+n,l=o+e-1,h=r+i-1,u=r;u<=h;u++)for(var c=l;c>=a;c--){var d=t[c][u];if(null!=d){d=ps.getSource(d);for(var p=c+1;p<=l;p++){var f=t[p][u]=new fs(d,p-a);s?(f._hrow=p,f._hcol=u,d.hcol===f.hcol&&(d._hspan++,d instanceof _s&&d._hlen++)):(f._row=p,f._col=u,d.col===f.col&&(d._dspan++,d instanceof _s&&d._dlen++),f._parent=d.group)}break}}},i.prototype.$_adjustHeaderCells=function(e){var o=this._header.isVisible()?this._header.rows:0;if(o&&this._hideChildHeaders){this._hspan=this._hlen;for(var r=0,n=0;n<this._hlen;n++)for(var s=0;s<this._clen;s++)if(n||s){var a=this._hrow+n,l=this._hcol+s,h=e[a][l]=new fs(this,r++);h._hrow=a,h._hcol=l}}else if(this._direction===t.ColumnLayoutDirection.VERTICAL){for(var u=this._clen,c=0,d=this._visibles;c<d.length;c++){(_=d[c])instanceof i&&(_._clen=this._clen,_.$_adjustHeaderCells(e))}this.$_fillVert(e,this._hlen,u,this._hrow,this._hcol,o,!0),this.$_fillHorz(e,this._hlen,u,this._hrow,this._hcol,o,!0)}else{for(var p=0,f=this._visibles;p<f.length;p++){var _;(_=f[p])instanceof i&&(_._hlen=this._hlen-o,_.$_adjustHeaderCells(e))}this.$_fillVert(e,this._hlen,this._cols,this._hrow,this._hcol,o,!0),this.$_fillHorz(e,this._hlen,this._cols,this._hrow,this._hcol,o,!0)}},i.prototype.$_parseDataCells=function(e,o,r){for(var n,s=this._direction!=t.ColumnLayoutDirection.VERTICAL,a=0,l=0,h=0,u=this._visibles;h<u.length;h++){var c=u[h];if(c._row=o,c._col=r,c._dspan=1,c._dlen=1,c._cspan=1,c._clen=1,c instanceof i){if(c.$_parseDataCells(e,o,r),s)r+=c.cols;else if(o+=c.rows,2==this.rows){for(var d=1/0,p=0,f=0,_=this.visibles;f<_.length;f++){var g=_[f];d=Math.min(d,g.cols),p=Math.max(p,g.cols),g.ignoreCalcWidth=!1}if(1===d&&p>1)for(var y=0,m=this.visibles;y<m.length;y++){(g=m[y]).ignoreCalcWidth=1===g.cols}}}else if(e[o][r]=c,s){for(var b=1;b<this.rows;b++)e[o+b][r]=n=new fs(c,b),c._dspan++,n._col=r,n._row=o+b,n._parent=this;c._dlen=c._dspan,r+=c.cols}else{for(b=1;b<this.cols;b++)e[o][r+b]=n=new fs(c,b),c._cspan++,n._col=r+b,n._row=o,n._parent=this;c._clen=c._cspan,o+=c.rows}s?(l+=c._clen,a=Math.max(c._dlen,a)):(l=Math.max(c._clen,l),a+=c._dlen)}s?(l=Math.max(1,l),this._dlen=a):this._dlen=Math.max(1,a),this._cspan=this._clen=l},i.prototype.$_adjustDataCells=function(e){if(this._direction===t.ColumnLayoutDirection.VERTICAL){for(var o=0,r=this._visibles;o<r.length;o++){(a=r[o])instanceof i&&(a._cspan=a._clen=this._clen,a.$_adjustDataCells(e))}this.$_fillVert(e,this._dlen,this._clen,this._row,this._col,0,!1),this.$_fillHorz(e,this._dlen,this._clen,this._row,this._col,0,!1)}else{for(var n=0,s=this._visibles;n<s.length;n++){var a;(a=s[n])instanceof i&&(a._dlen=this._dlen,a.$_adjustDataCells(e))}this.$_fillVert(e,this._dlen,this._clen,this._row,this._col,0,!1),this.$_fillHorz(e,this._dlen,this._clen,this._row,this._col,0,!1)}},i.prototype.$_calcSpans=function(){var e=this._header.isVisible();if(this._direction==t.ColumnLayoutDirection.HORIZONTAL){for(var o=0,r=1,n=1,s=0,a=this._visibles;s<a.length;s++){(d=a[s])instanceof i&&d.$_calcSpans(),o+=d.cols,r=Math.max(r,d.headerRows),n=Math.max(n,d.rows)}this._rows=n,this._cols=o,e&&this._hideChildHeaders?this._headerRows=this._header.rows:!e&&this._hideChildHeaders?this._headerRows=0:this._headerRows=r+(e?this._header.rows:0)}else{this._cols=1,this._headerRows=e?this._header.rows:0,this._rows=0;for(var l=0,h=this._visibles;l<h.length;l++){(d=h[l])instanceof i&&d.$_calcSpans(),this._headerRows+=d.headerRows,this._rows+=d.rows,this._cols=Math.max(d.cols,this._cols)}for(var u=0,c=this._visibles;u<c.length;u++){var d;(d=c[u])instanceof i&&(d._cols=this._cols)}e&&this._hideChildHeaders?this._headerRows=this._header.rows:!e&&this._hideChildHeaders&&(this._headerRows=0)}},i.prototype.$_resetVisibles=function(e){var o=0,r=0,n=this.visibles;this._visibles=[];for(var s=0,a=this._items;s<a.length;s++){var l=a[s];l._index=o++,l instanceof i&&l.$_resetVisibles(e);var h=l.$_isVisible(e);h&&this.expandable&&(h=this._expanded?this._expandedLayouts.indexOf(l)>=0:this._collapsedLayouts.indexOf(l)>=0),h&&(this._visibles.push(l),l._vindex=r++)}if(!e&&n.length!=this._visibles.length&&this.direction===t.ColumnLayoutDirection.HORIZONTAL)for(var u=this;u;)u._cellWidth=NaN,u.width=NaN,u=u.parent;this.$_calcSpans()},i.prototype.$_collectCellWidths=function(t){for(var e=[],o=0,r=this._visibles;o<r.length;o++){var n=r[o],s=n._cellWidth||n.width;if(n instanceof _s&&(isNaN(s)||0==s)&&(s=t),n instanceof i){var a=n.$_collectCellWidths(t);isNaN(s)&&(s=a),n._cellWidth=s}else n._cellWidth=s;e.push(s)}var l=this.width;return isNaN(l)&&(l=this.vertical?Math.max.apply(null,e):e.reduce((function(t,e){return t+e}),0)),l},i.prototype.$_calcCellWidths=function(t,e,i){if(!i){for(var o=e.slice(),r=0;r<o.length;r++)o[r]=0;var n=this.owner._moveColumn,s=t.slice();if(n){var a=s.splice(n.first.row,1);s.splice(0,0,a[0])}for(var l=0;l<s.length;l++)for(var h=s[l],u=0;u<h.length;u++){var c=h[u];n?e[u]=e[u]||c._cellWidth:(!c.isProxy||c._cellWidth>0&&!c.ignoreCalcWidth)&&(e[u]+=c._cellWidth,o[u]++)}for(r=0;r<e.length;r++)e[r]=Math.round(e[r]/Math.max(o[r],1))}for(l=0;l<t.length;l++)for(h=t[l],u=0;u<h.length;u++){var d=h[u];if(d._cellWidth=e[u],d instanceof _s){var p=d._cellWidths=[];for(r=0;r<d.cspan;r++)p[r]=e[u+r]||0}}},i.prototype._childIndexChanged=function(t){this.parent&&this.parent._childIndexChanged(t)},i.prototype._childWidthChanged=function(t){this.parent&&this.parent._childWidthChanged(t)},i.prototype._childFillWidthChanged=function(t){this.parent&&this.parent._childFillWidthChanged(t)},i.prototype.$_checkVisible=function(t){var e;if(!t||(e=t.vindex)<0||t!==this.getVisible(e))throw new Error("Column is not a visible group member");return e},i.prototype.$_collectHorzColumns=function(t,e,o){if(this.horizontal)for(var r=e;r<=o;r++){var n=this._visibles[r];n instanceof i?n.$_collectHorzColumns(t,0,n.visibleCount-1):n instanceof _s&&t.push(n._columnObj)}},i.prototype.$_changeChildVIndex=function(t,e){t&&(e!=t.vindex&&e>=0&&e<this._visibles.length&&this.$_changeChildIndex(t,this._visibles[e].index))},i.prototype.$_changeChildIndex=function(t,e){if(t){var i=t.index;if(i!=e&&e>=0&&e<this._items.length){e=e<=i?e:e+(this._items[e].getHeaderSpan()-1)-(t.getHeaderSpan()-1);for(var o=this._items.splice(i,t.getHeaderSpan()),r=0;r<o.length;r++)this._items.splice(e+r,0,o[r]);this.$_resetVisibles(),this._childIndexChanged(t)}}},i}(ps),ws=function(t,e){for(var i=e,o=t.visibleCount;i<o;i++){var r=t.getVisible(i);if(r instanceof _s)return r;if(r instanceof vs&&(r=ps.getSource(r.first))instanceof _s)return r}return null},Cs=function(t,e){for(var i=e;i>=0;i--){var o=t.getVisible(i);if(o instanceof _s)return o;if(o instanceof vs&&(o=ps.getSource(o.last))instanceof _s)return o}return null},xs=function(t,e,i){for(var o=i?t.visibleCount:t.count,r=0;r<o;r++){var n=i?t.getVisible(r):t.getItem(r);if(n instanceof _s){var s=n._columnObj;s&&e.push(s)}else n instanceof vs&&xs(n,e,i)}},Is=function(t,e,i){for(var o=i?t.visibleCount:t.count,r=0;r<o;r++){var n=i?t.getVisible(r):t.getItem(r);n instanceof _s?e.push(n):n instanceof vs&&Is(n,e,i)}},Ss=function(t,e,i,o,r){for(var n=o?t.visibleCount:t.count,s=0;s<n;s++){var a=o?t.getVisible(s):t.getItem(s);if(a instanceof _s&&!r){var l=a._columnObj;l&&e.push(l.name)}else a instanceof vs&&((!i||r)&&e.push(a.name),Ss(a,e,i,o,r))}},Es=function(t,e,i){for(var o=i?t.visibleCount:t.count,r=0;r<o;r++){var n=i?t.getVisible(r):t.getItem(r);if(n instanceof _s){var s=n._columnObj;s instanceof ls&&e.push(s)}else n instanceof vs&&Es(n,e,i)}},Os=function(t){function e(e){var i=t.call(this,"$_root_$",null)||this;return i._owner=e,i.header._visible=!1,i}return o(e,t),Object.defineProperty(e.prototype,"cellWidth",{get:function(){return this._cellWidth},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"expandable",{get:function(){return!1},set:function(t){},enumerable:!1,configurable:!0}),e.prototype.resetColumns=function(t){this.items.length>0&&(this.$_bindColumns({},t,!1),this.$_resetVisibles(!1))},Object.defineProperty(e.prototype,"grid",{get:function(){return this._owner.grid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this},enumerable:!1,configurable:!0}),e.prototype._changed=function(){this._owner&&this._owner._changed()},e.prototype._childIndexChanged=function(t){this._owner._itemIndexChanged(t)},e.prototype._childWidthChanged=function(t){this._owner._itemWidthChanged(t)},e.prototype._childFillWidthChanged=function(t){this._owner._itemFillWidthChanged(t)},e.prototype._setColumns=function(t){var e=this._items;e.length=0;for(var i=0,o=t.count;i<o;i++){var r=new _s(t.getColumn(i));e.push(r),r._parent=this}this.resetColumns(t)},e}(vs),Rs=function(t){function e(e){var i=t.call(this)||this;return i._cellWidths=[],i._grid=e,i._root=new Os(i),i}return o(e,t),e.prototype._doDispose=function(){this._grid=null,this._moveColumn=null,this._headerCells=this._dataCells=null,this._root=this._root.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._root.count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleCount",{get:function(){return this._root.visibleCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerRows",{get:function(){return this._root._hlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataRows",{get:function(){return this._root._dlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){return this._root.first},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this._root.last},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstColumn",{get:function(){return this._root.firstColumn},enumerable:!1,configurable:!0}),e.prototype.load=function(t){return this.$_clear(),this._loading=!0,this._root._loadItems(t),this._changed(),this._loading=!1,this},e.prototype.resetColumns=function(t){this._root.resetColumns(t)},e.prototype.cleanColumns=function(){this._root.cleanColumns()},e.prototype.invalidate=function(){this._changed()},e.prototype.invalidateIndices=function(t){this.grid.displayOptions.remergeWhenColumnMoved&&this.grid._populateMerges(),this.grid.clearAddSelection(),this._changed()},e.prototype.invalidateSize=function(){this._resized||(this._resized=!0,this.grid.invalidateCellLayouts())},e.prototype.getVisible=function(t){return this._root.getVisible(t)},e.prototype.addLayout=function(t,e){return this._root.addLayout(t,e)},e.prototype.removeLayout=function(t){return this._root.removeLayout(t)},e.prototype.expandLayout=function(t,e){this.fireExpanding(t,e)&&(t._expanded=e,this._root.$_resetVisibles(),this._changed(),this.fireExpanded(t,e))},e.prototype.setColumns=function(t){this._root._setColumns(t),this._changed()},e.prototype.layoutByColumn=function(t){return t&&this._root.findLayout(t)},e.prototype.layoutByName=function(t){return t&&this._root.layoutByName(t)},e.prototype.getHeaderCellPos=function(t){for(var e=0;e<this._headerCells.length;e++)for(var i=this._headerCells[e],o=0;o<i.length;o++)if(i[o]instanceof _s&&i[o]._columnObj===t)return{row:e,col:o}},e.prototype.getDataCellPos=function(t){for(var e=0;e<this._dataCells.length;e++)for(var i=this._dataCells[e],o=0;o<i.length;o++)if(i[o]instanceof _s&&i[o]._columnObj===t)return{row:e,col:o}},e.prototype.getDataColumns=function(t){void 0===t&&(t=!0);var e=[];return Es(this._root,e,t),e},e.prototype.collectColumns=function(t,e,i){var o=[];return xs(this._root,o,e),o},e.prototype.collectLayouts=function(t){var e=[];return Is(this._root,e,!0),e},e.prototype.collectColumnNames=function(t,e,i,o){var r=[],n=this._root;return o?"string"==typeof o?n=function t(e,i){for(var r=0,n=e.count;r<n;r++){var s=e.getItem(r);if(s instanceof vs)return s.name===o?s:t(s)}}(n):o instanceof vs&&(n=o):n=this._root,n?(Ss(n,r,t,e,i),r):null},e.prototype.collectDataColumns=function(t,e){t=t.source,e=e.source;var i=Math.min(t.col,e.col),o=Math.max(t.col+t._defColSpan,e.col+e._defColSpan)-1,r=[];Es(this._root,r,!0);for(var n=r.length-1;n>=0;n--){var s=r[n].layout.col;(s<i||s>o)&&r.splice(n,1)}return r},e.prototype.getHorzColumns=function(t,e){void 0===t&&(t=0);var i=null==e?t+this._root.visibleCount-1:t+e-1,o=[];return this._root.$_collectHorzColumns(o,t,i),o},e.prototype.getHomeOf=function(t){return t=ps.getSource(t),t=this._dataCells[t?t.row:0][0],ps.getSource(t)},e.prototype.getEndOf=function(t){t=ps.getSource(t);var e=this._dataCells,i=t?t.row:e.length-1;return t=e[i][e[i].length-1],ps.getSource(t)},e.prototype.getTopOf=function(t){return t=this._dataCells[0][t.col],ps.getSource(t)},e.prototype.getBottomOf=function(t,e){var i=this._dataCells;return t=i[i.length-1][t.col],e?t:ps.getSource(t)},e.prototype.getLowerOf=function(t){t=ps.getSource(t);var e=this._dataCells,i=t.row,o=t.col,r=0;return i+t.rows<e.length?t=e[i+t.rows][o]:(r=1,t=e[0][o]),{dy:r,layout:ps.getSource(t)}},e.prototype.getUpperOf=function(t){t=ps.getSource(t);var e=this._dataCells,i=t.row,o=t.col,r=0;return i>0?t=e[i-1][o]:(r=-1,t=e[e.length-1][o]),{dy:r,layout:ps.getSource(t)}},e.prototype.getRightOf=function(t){var e=this._dataCells[t.row],i=t.col;return i+t.cols<e.length?(t=e[i+t.cspan],ps.getSource(t)):null},e.prototype.getLeftOf=function(t){t=ps.getSource(t);var e=this._dataCells[t.row],i=t.col;return i>0?(t=e[i-1],ps.getSource(t)):null},e.prototype.getHeaderLeftOf=function(t){t=ps.getSource(t);var e=this._headerCells[t.hrow],i=t.hcol;return i>0?(t=e[i-1],ps.getSource(t)):null},e.prototype.getCellWidths=function(t,e){for(var i=0,o=0;o<e;o++)i+=this._cellWidths[o+t];return i},e.prototype.getLayout=function(t,e,i,o,r,n){function s(a){var l,h;if(a instanceof _s){var u=a.firstColumn;if(u)return c=(c=u.visible&&a.visible||i)&&r.indexOf(u.name)<0||o.indexOf(u.name)>=0,(d=a.toProxy(!1)).visible=t?c:a.visible,d.width=(t&&e?a._fitWidth:a._cellWidth)||a.width,d.column=u.name,d}else{if(a.isProxy)return(t&&e?a._fitWidth:a._cellWidth)||a.width;if(a instanceof vs){var c,d;h=a._items,l=[],c=(c=a.visible||i)&&r.indexOf(a.name)<0||o.indexOf(a.name)>=0;for(var p=0,f=h.length;p<f;p++)l.push(s.call(this,h[p]));if((d=a.toProxy(!1)).name=a.name,d.items=l,d.visible=t?c:a.visible,d.header=a.header&&a.header.toProxy(!1),a.tiedColumn&&(d.tiedColumn=a.tiedColumn.name),t&&d.expandable)switch(n){case"current":break;case"expand":d.expanded=!0;break;case"collapse":d.expanded=!1;break;default:d.expandable=!1}return delete d.width,d}}}void 0===o&&(o=[]),void 0===r&&(r=[]),e=e&&!!this.grid.layoutManager.isColumnFitted;for(var a=this._root._items,l=[],h=0,u=a.length;h<u;h++)l.push(s.call(this,a[h]));return l},e.prototype.expandAll=function(t,e){this._root.expandAll(t,e)},e.prototype.isShowing=function(t){for(var e=t;e&&e.parent;){if(e.parent.visibles.indexOf(e)<0)return!1;e=e.parent}return!0},e.prototype.isDefault=function(){return!1},e.prototype.setMoveColumn=function(t){this._moveColumn=t},e.prototype.contains=function(t){return this._root.containLayout(t)},e.prototype._changed=function(){if(!this._dirty){this._dirty=!0;var t=this.grid;t&&t.invalidateCellLayouts()}},e.prototype.$_clear=function(){this._headerCells=[],this._dataCells=[]},e.prototype.$_refresh=function(t,e){this._dirty?(this._root.$_bindColumns({},t),this._root.$_parseExpandLayouts(),this._root.$_resetVisibles(),this.$_parseCells(this._root,t),this.$_calculateCellWidths(this._root,e),this._dirty=!1):this._resized&&this.$_calculateCellWidths(this._root,e),this._resized=!1,this._moveColumn=null},e.prototype.$_refresh2=function(t,e){this._root.$_bindColumns({},t,!0),this._root.$_parseExpandLayouts(),this._root.$_resetVisibles(!0),this.$_parseCells(this._root,t),this.$_calculateCellWidths(this._root,e)},e.prototype.$_prepareMerges=function(t){for(var e=this.collectColumns(!0,!0,!1),i=0,o=e.length;i<o;i++){var r=e[i],n=this.layoutByColumn(r);if(n&&n.canMerge()){var s=n.merges;s||(s=new Kn(n)),s.clear(),s.initialize(10);var a=t.layoutManager.fixedItemCount;s.refreshRooms(a,t.itemCount-1,!0)}}},e.prototype.$_prepareLayout=function(t,e,i){for(var o=0,r=this._root.visibleCount;o<r;o++)this._root.getVisible(o)._prepareLayout(t,o<e,o>=r-i)},e.prototype.$_parseCells=function(t,e){var i=t._visibles;this.$_parseHeaderCells(i),this.$_parseDataCells(i)},e.prototype.$_parseHeaderCells=function(t){for(var e=this._headerCells=[],i=0,o=0,r=t;o<r.length;o++){var n=r[o];i=Math.max(i,n.headerRows)}for(var s=0;s<i;s++)e.push([]);this._root.$_parseHeaderCells(e,0,0),this._root.$_adjustHeaderCells(e)},e.prototype.$_parseDataCells=function(t){for(var e=this._dataCells=[],i=0,o=0,r=t;o<r.length;o++){var n=r[o];i=Math.max(i,n.rows)}for(var s=0;s<i;s++)e.push([]);this._root.$_parseDataCells(e,0,0),this._root.$_adjustDataCells(e);for(var a=0,l=e;a<l.length;a++)for(var h=l[a],u=0;u<h.length;){var c=h[u];if(c._defColSpan=1,c.isNull)u++;else for(;++u<h.length;){var d=h[u];if(!(!d||d.isProxy&&d.source===c||d.isNull&&d.group===c.group))break;c._defColSpan++}}},e.prototype.$_calculateCellWidths=function(t,e){if(this._dirty){(!this._cellWidths||this._cellWidths.length<=0||!this._moveColumn)&&t.$_collectCellWidths(e);for(var i=this._cellWidths=[],o=0,r=t.cols;o<r;o++)i.push(0);t.$_calcCellWidths(this._dataCells,i,!1)}else this._resized&&t.$_calcCellWidths(this._dataCells,this._cellWidths,!0)},e.prototype.$_clearFitWidths=function(){this._root._clearFitWidth()},e.prototype._columnsChanged=function(t){},e.prototype._columnChanged=function(t){},e.prototype._itemIndexChanged=function(t){this.invalidateIndices(t)},e.prototype._itemWidthChanged=function(t){this.invalidateSize()},e.prototype._itemFillWidthChanged=function(t){this.grid.layoutManager.isColumnFitted&&this.invalidateSize()},e.prototype._clearMergeGrouped=function(){this._root.clearMergeGrouped()},e.prototype.$_changeCellWidths=function(t,e,i,o){for(var r=this._cellWidths,n=[],s=0,a=0;a<e;a++)s+=r[t+a],n.push(s);var l=i/s;for(a=0;a<e-1;a++)n[a]=Math.round(n[a]*l);n[e-1]=i;for(a=e-1;a>0;a--)r[t+a]=Math.max(r[t+a]+n[a]-n[a-1],o);r[t]=Math.max(r[t]+n[0],o),this.invalidateSize()},e.prototype.$_calcGroupWidths=function(){var t=this._cellWidths;!function e(i){for(var o=0,r=0;r<i._clen;r++)o+=t[i.col+r];i._width=i._cellWidth=o;for(var n=0,s=i.visibles;n<s.length;n++){var a=s[n];a instanceof vs&&e(a)}}(this._root)},e.prototype.fireExpanding=function(t,i){return this.fireConfirmEvent(i?e.LAYOUT_EXPANDING:e.LAYOUT_COLLAPSING,t)},e.prototype.fireExpanded=function(t,i){this.fireEvent(i?e.LAYOUT_EXPANDED:e.LAYOUT_COLLAPSED,t)},e.LAYOUT_EXPANDING="onLayoutExpanding",e.LAYOUT_COLLAPSING="onLayoutCollapsing",e.LAYOUT_EXPANDED="onLayoutExpanded",e.LAYOUT_COLLAPSED="onLayoutCollapsed",e}(Re),Ps=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._columnsChanged=function(e){this.setColumns(e),t.prototype._columnsChanged.call(this,e)},e.prototype.addLayout=function(t){return null},e.prototype.removeLayout=function(t){},e.prototype.isDefault=function(){return!0},e}(Rs);t.VerticalMoveStep=void 0,(gs=t.VerticalMoveStep||(t.VerticalMoveStep={})).ROW="row",gs.CELL="cell",t.FocusMoveStep=void 0,(ys=t.FocusMoveStep||(t.FocusMoveStep={})).GROUP="group",ys.CELL="cell";var ks,Ts,Ds=function(e){function i(t,i,o){void 0===i&&(i=-1);var r=e.call(this,!0)||this;return r._itemIndex=-1,r._grid=t,r._itemIndex=i,r._layout=o instanceof ss?o.layout:o,r}return o(i,e),i.temp=function(t,e,o,r){void 0===e&&(e=0);var n=r?new i:i.$_temp||(i.$_temp=new i);return n._grid=t,n._itemIndex=e,n._layout=o instanceof ps?o:o&&o.layout,n},i.areEquals=function(t,e,i){return t==e||t&&e&&t._grid===e._grid&&t._itemIndex===e._itemIndex&&(t._layout===e._layout||i&&t.layout.areEqualColumn(e.layout))},i.equalsTo=function(t,e,i){return t&&t._itemIndex===e&&t.layout===i},i.clearTemp=function(){i.$_temp&&(i.$_temp=i.$_temp.dispose())},i.compareHorz=function(t,e){if(t&&e)return t.layout.distance-e.layout.distance},i.prototype._doDispose=function(){this._grid=null,this._layout=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemIndex",{get:function(){return this._itemIndex},set:function(t){this._itemIndex=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"layout",{get:function(){return this._layout},set:function(t){this._layout=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"column",{get:function(){return this._layout&&this._layout.firstColumn},set:function(t){"string"==typeof t&&(t=this.grid&&this.grid.columnByName(t)),this._layout=t&&t.layout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataColumn",{get:function(){var t=this.column;return t instanceof ls?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueColumn",{get:function(){var t=this.column;return t instanceof as?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"literalColumn",{get:function(){var t=this.column;return t instanceof us?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"seriesColumn",{get:function(){var t=this.column;return t instanceof hs?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataField",{get:function(){var t=this.dataColumn;return t instanceof ls?t.dataIndex:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"item",{get:function(){return this._grid&&this._grid.getItem(this._itemIndex)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataRow",{get:function(){var t=this.item;return t?t.dataRow:-1},set:function(t){if(this._grid){var e=this._grid.getItemOfRow(t,!1);e&&(this.itemIndex=e.index)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldName",{get:function(){return this.dataColumn&&this.dataColumn.fieldName},set:function(t){if(this._grid){var e=this._grid.columnByField(t);e&&(this.column=e)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldIndex",{get:function(){return this.dataColumn&&this.dataColumn.fieldIndex},set:function(t){if(this._grid){var e=this._grid.columnByField(t);e&&(this.column=e)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataId",{get:function(){var t=this.item;return t?t.dataId:-1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){var t=this.column;if(t instanceof ls){var e=t.dataIndex;if(e<0)throw new Error("Not exists data field: "+t.fieldName);var i=this.item;if(!i)throw new Error("Invalid item index: "+this._itemIndex);return i.getData(e)}return t instanceof hs?Cr._getDisplayText(this):t instanceof us?t.value:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixed",{get:function(){var t=this._layout;if(this._grid&&t&&t.visible){var e=this._grid.layoutManager,i=t.root.vindex;return i<e.fixedLayoutCount||i>=e.rightFirstLayout||this._itemIndex>=0&&this._itemIndex<e.fixedItemCount}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowFixed",{get:function(){if(this._grid){var t=this._grid.layoutManager;return this._itemIndex>=0&&this._itemIndex<t.fixedItemCount}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"colFixed",{get:function(){if(this._grid&&this._layout&&this._layout.visible){var t=this._grid.layoutManager;return this._layout.root.vindex<t.fixedLayoutCount}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightFixed",{get:function(){if(this._grid&&this._layout&&this._layout.visible){var t=this._grid.layoutManager;return this._layout.root.vindex>=t.rightFirstLayout}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isTop",{get:function(){return!this._layout||!this._layout.group||(this.$_isSpanned()?this.grid.$_isTopCell(this):vs.isTop(this._layout))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isBottom",{get:function(){return!this._layout||!this._layout.group||(this.$_isSpanned()?this.grid.$_isBottomCell(this):vs.isBottom(this._layout))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isLeft",{get:function(){if(this._layout){var t=this._layout.group;return t?0==t.vindex&&vs.isLeft(this._layout):0==this._layout.vindex}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isRight",{get:function(){if(this._layout){var t=this._layout.group;return t?0==t.vindex&&vs.isRight(this._layout):this._layout.vindex==this._grid.visibleLayoutCount-1}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isFirst",{get:function(){if(this._layout&&(this._grid&&this._grid.visibleLayoutCount>0))return ps.getSource(this._grid.activeCellLayout.first)===this._layout;return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isEditableFirst",{get:function(){var t=this._grid;if(t&&this._layout){var e=t.collectColumns(!0,!0,!0),o=e.indexOf(this._layout.firstColumn);if(o>=0){for(var r=o;r--;){var n=e[r];if(n instanceof hs)return!1;var s=i.temp(t,this.itemIndex,n);if(t.getWritableAt(s,!0))return!1}return!0}}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isEditableLast",{get:function(){var t=this._grid;if(t&&this._layout)for(var e=t.collectColumns(!0,!0,!0),o=e.indexOf(this._layout.firstColumn)+1,r=e.length;o<r;o++){var n=e[o];if(n instanceof hs)return!1;var s=i.temp(t,this.itemIndex,n);if(t.getWritableAt(s,!0))return!1}return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isLast",{get:function(){if(this._layout&&(this._grid&&this._grid.visibleLayoutCount>0))return ps.getSource(this._grid.activeCellLayout.last)===this._layout;return!1},enumerable:!1,configurable:!0}),i.prototype.set=function(t,e,i){return void 0!==i&&(this._grid=i),this._itemIndex=t,this._layout=e instanceof ss?e.layout:e,this},i.prototype.assign=function(t){return t?(t.grid&&(this._grid=t._grid),this._itemIndex=t._itemIndex,this._layout=t._layout):(this._itemIndex=-1,this._layout=null),this},i.prototype.reset=function(){return this._itemIndex=-1,this._layout=null,this},i.prototype.clone=function(){return new i(this._grid,this._itemIndex,this._layout)},i.prototype.proxy=function(){return{itemIndex:isNaN(this._itemIndex)?-1:this._itemIndex,column:this.column?this.column.name:null,dataRow:this.dataRow,fieldIndex:this.dataColumn?this.column.dataIndex:-1,fieldName:this.dataColumn?this.column.fieldName:null}},i.prototype.normalize=function(t){if(t){this._grid=t;var e=this._layout;if(!e||!t.activeCellLayout.contains(e)){var i=void 0;e&&(i=t.activeCellLayout.layoutByColumn(e.firstColumn)),this._layout=i||t.getFirstLayout()}this._itemIndex=Math.max(0,Math.min(this._itemIndex,t.itemCount-1))}return this},i.prototype.incRow=function(t){this._grid&&(this._itemIndex=Math.max(0,Math.min(this._grid.itemCount-1,this._itemIndex+t)))},i.prototype.first=function(){this._grid&&(this._itemIndex=0)},i.prototype.last=function(){this._grid&&(this._itemIndex=this._grid.itemCount-1)},i.prototype.right=function(){if(this.grid.editOptions.focusMoveStep!==t.FocusMoveStep.GROUP){var e=this._grid&&this.$_gridLayout().getRightOf(this._layout);e&&(this._layout=e)}else this.next()},i.prototype.left=function(){if(this.grid.editOptions.focusMoveStep!==t.FocusMoveStep.GROUP){var e=this._grid&&this.$_gridLayout().getLeftOf(this._layout);e&&(this._layout=e)}else this.prev()},i.prototype.next=function(){if(this.grid.editOptions.focusMoveStep===t.FocusMoveStep.GROUP){var e=this.layout.getAncestor(this.grid.displayOptions.groupFocusLevel),i=e.isRoot?this.grid.activeCellLayout:e.parent,o=e.vindex;if(o<i.visibleCount-1)return void(this._layout=i.getVisible(o+1).first)}var r=Fs(this._grid,this._layout);if(r)return this._layout=r,!0},i.prototype.prev=function(){if(this.grid.editOptions.focusMoveStep===t.FocusMoveStep.GROUP){var e=this.layout.getAncestor(this.grid.displayOptions.groupFocusLevel),i=e.isRoot?this.grid.activeCellLayout:e.parent,o=e.vindex;if(o>0)return void(this._layout=i.getVisible(o-1).first)}var r=Ls(this._grid,this._layout);if(r)return this._layout=r,!0},i.prototype.home=function(){this._layout=this._grid&&this.$_gridLayout().getHomeOf(this._layout)},i.prototype.end=function(){this._layout=this._grid&&this.$_gridLayout().getEndOf(this._layout)},i.prototype.firstCell=function(){this._layout=this._grid&&ps.getSource(this.grid.activeCellLayout.first)},i.prototype.lastCell=function(){this._layout=this.grid&&ps.getSource(this.grid.activeCellLayout.last)},i.prototype.down=function(e,i,o){void 0===e&&(e=t.VerticalMoveStep.ROW),this._grid&&(this.itemIndex<this._grid.itemCount-1&&this.grid.editOptions.focusMoveStep===t.FocusMoveStep.GROUP?this.incRow(1):e==t.VerticalMoveStep.ROW&&!i||this.isBottom||o?this._itemIndex<this._grid.itemCount-1&&(e==t.VerticalMoveStep.CELL&&(this._layout=this.$_gridLayout().getTopOf(this._layout)),this.incRow(1)):this._grid.spanned?this._layout=this._grid.$_getLowerOfCell(this):this._layout=this.$_gridLayout().getLowerOf(this._layout).layout)},i.prototype.up=function(e,i,o){if(void 0===e&&(e=t.VerticalMoveStep.ROW),this._grid)if(this.itemIndex>0&&this.grid.editOptions.focusMoveStep===t.FocusMoveStep.GROUP)this.incRow(-1);else if(e==t.VerticalMoveStep.ROW&&!i||this.isTop||o){if(this._itemIndex>0){if(e==t.VerticalMoveStep.CELL)if(this._grid.spanned){var r=this._grid.$_getUpperOfCell(this);this._layout=r||this.$_gridLayout().getBottomOf(this._layout)}else this._layout=this.$_gridLayout().getBottomOf(this._layout);this.incRow(-1)}}else this._grid.spanned?this._layout=this._grid.$_getUpperOfCell(this):this._layout=this.$_gridLayout().getUpperOf(this._layout).layout},i.prototype.getValue=function(){if(this._grid){var t=this.dataColumn,e=this._grid.getItem(this._itemIndex);return t&&e&&e.getData(t.dataIndex)}},i.prototype.assignFrom=function(t){t instanceof i?(this._grid=t._grid,this._layout=t._layout,this._itemIndex=t._itemIndex):e.prototype.assignFrom.call(this,t)},i.prototype.toString=function(){return"("+this._itemIndex+", "+this.column+")"},i.prototype.$_gridLayout=function(){return this._grid._activeCellLayout},i.prototype.$_isSpanned=function(){return this._grid&&this._grid.spanned},i}(Lt),Ms=function(t){function e(e,i,o){var r=t.call(this,e,i&&i.index,o)||this;return r._item=i,r}return o(e,t),e.tempItem=function(t,i,o){return e.$_itemTemp||(e.$_itemTemp=new e),e.$_itemTemp._grid=t,e.$_itemTemp._item=i,e.$_itemTemp._itemIndex=i.index,e.$_itemTemp._layout=o instanceof ps?o:o&&o.layout,e.$_itemTemp},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},enumerable:!1,configurable:!0}),e}(Ds),Fs=function(t,e){if(!t||!e)return null;var i=t.layoutManager,o=vs.getNext(e);if(o)return o;for(var r=(e.group?e.root.vindex:e.vindex)+1,n=i.layoutCount;r<n;r++){if((o=i.getLayout(r))instanceof _s)return o;if(o instanceof vs&&(o=ps.getSource(o.first)))return o}},Ls=function(t,e){if(!t||!e)return null;var i=t.layoutManager,o=vs.getPrev(e);if(o)return o;for(var r=(e.group?e.root.vindex:e.vindex)-1;r>=0;r--){if((o=i.getLayout(r))instanceof _s)return o;if(o instanceof vs&&(o=ps.getSource(o.last)))return o}},Ns=function(t){function e(){var e=t.call(this)||this;return e._row1=0,e._row2=0,e}return o(e,t),e.$_setRange=function(t,e,i,o,r){return t._row1=e<=o?e:o,t._row2=e<=o?o:e,t._col1=i.col<=r.col?i:r,t._col2=i.col<=r.col?r:i,t},e.create=function(t,i){if(i&&t!==i)return e.$_setRange(new e,t.itemIndex,t.layout,i.itemIndex,i.layout);var o=new e;return o._row1=o._row2=t.itemIndex,o._col1=o._col2=t.layout,o},e.temp=function(t,i){var o=e.$_TEMP;return i&&t!==i?e.$_setRange(o,t.itemIndex,t.layout,i.itemIndex,i.layout):(o._row1=o._row2=t.itemIndex,o._col1=o._col2=t.layout,o)},e.createRange=function(t,i,o,r){return e.$_setRange(new e,t,i,o,r)},Object.defineProperty(e.prototype,"empty",{get:function(){return this._row2<this._row1||!this._col2&&!this._col2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"r1",{get:function(){return this._row1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"c1",{get:function(){return this._col1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"r2",{get:function(){return this._row2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"c2",{get:function(){return this._col2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._row1<=this._row2?this._row1:this._row2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._row1<=this._row2?this._row2:this._row1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstCell",{get:function(){var t=new Ds;return t.itemIndex=this._row1<=this._row2?this._row1:this._row2,this._col1.col===this._col2.col?t.layout=this._col1.row<=this._col2.row?this._col1:this._col2:t.layout=this._col1.col<=this._col2.col?this._col1:this._col2,t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastCell",{get:function(){var t=new Ds;return t.itemIndex=this._row1>=this._row2?this._row1:this._row2,this._col1.col===this._col2.col?t.layout=this._col1.row>=this._col2.row?this._col1:this._col2:t.layout=this._col1.col>=this._col2.col?this._col1:this._col2,t},enumerable:!1,configurable:!0}),e.prototype.contains=function(t,e){if(e){var i=e.col;return t>=this._row1&&t<=this._row2&&i>=this._col1.col&&i<=this._col2.col}return!1},e.prototype.normalize=function(){if(this._row1>this._row2){var t=this._row1;this._row1=this._row2,this._row2=t}if(this._col1.col<=this._col2.col){if(this._col1.row>this._col2.row){var e=this._col1;this._col1=this._col2,this._col2=e}}else{e=this._col1;this._col1=this._col2,this._col2=e}return this},e.prototype.normalizeData=function(){return this.normalize(),this},e.prototype.intersectsWith=function(t){return!1},e.NULL=new e,e.$_TEMP=new e,e}(Lt),$s=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_COUNT:return this._getCount();case e.ID_SUM:return this._getSum();case e.ID_MAX:return this._getMax();case e.ID_MIN:return this._getMin();case e.ID_AVG:return this._getAvg();case e.ID_VAR:return this._getVar();case e.ID_VARP:return this._getVarp();case e.ID_STDEV:return this._getStdev();case e.ID_STDEVP:return this._getStdevp();case e.ID_DATA_COUNT:return this._getDataCount();case e.ID_DATA_AVG:return this._getDataAvg();case e.ID_GROUP_VALUE:return this._getGroupValue()}throw new $t("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,e){throw new $t("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,e,i){throw new $t("Invalid identifier indexer: "+t)},e.ID_COUNT=0,e.ID_SUM=1,e.ID_MAX=2,e.ID_MIN=3,e.ID_AVG=4,e.ID_VAR=5,e.ID_VARP=6,e.ID_STDEV=7,e.ID_STDEVP=8,e.ID_DATA_COUNT=9,e.ID_DATA_AVG=10,e.ID_GROUP_VALUE=11,e.IDENTS={count:e.ID_COUNT,sum:e.ID_SUM,max:e.ID_MAX,min:e.ID_MIN,avg:e.ID_AVG,var:e.ID_VAR,varp:e.ID_VARP,stdev:e.ID_STDEV,stdevp:e.ID_STDEVP,datacount:e.ID_DATA_COUNT,dataavg:e.ID_DATA_AVG,groupvalue:e.ID_GROUP_VALUE},e}(Wt),As=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){this._grid=null,this._ds=null,this._column=null,this._summarizer=null,t.prototype._doDispose.call(this)},e.prototype.setColumn=function(t,e){this._column=t,this._grid=t.grid,this._ds=this._grid.dataSource,this._fieldCount=this._ds.fieldCount,this._summarizer=e},e.prototype.isIdentifier=function(e){return e=e.toLowerCase(),$s.IDENTS.hasOwnProperty(e)?$s.IDENTS[e]:t.prototype.isIdentifier.call(this,e)},e.prototype.evaluateIndexerI=function(t,e){if(this._summarizer){if(e<0||e>=this._fieldCount)throw new $t("Data field index out of bounds: "+e);switch(t){case $s.ID_SUM:return this._summarizer.getSum(e);case $s.ID_COUNT:return this._summarizer.getCount(e);case $s.ID_MAX:return this._summarizer.getMax(e);case $s.ID_MIN:return this._summarizer.getMin(e);case $s.ID_AVG:return this._summarizer.getAvg(e);case $s.ID_VAR:return this._summarizer.getVar(e);case $s.ID_VARP:return this._summarizer.getVarp(e);case $s.ID_STDEV:return this._summarizer.getStdev(e);case $s.ID_STDEVP:return this._summarizer.getStdevp(e);case $s.ID_DATA_COUNT:return this._summarizer.getDataCount(e);case $s.ID_DATA_AVG:return this._summarizer.getDataAvg(e)}throw new $t("Invalid identifier indexer: "+t)}switch(t){case $s.ID_SUM:case $s.ID_COUNT:return 0;case $s.ID_MAX:case $s.ID_MIN:case $s.ID_AVG:case $s.ID_VAR:case $s.ID_VARP:case $s.ID_STDEV:case $s.ID_STDEVP:return NaN}},e.prototype.evaluateIndexerS=function(t,e,i){if(this._summarizer&&this._ds){var o=i?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new $t("Data field index out of bounds: "+o);switch(t){case $s.ID_SUM:return this._summarizer.getSum(o);case $s.ID_COUNT:return this._summarizer.getCount(o);case $s.ID_MAX:return this._summarizer.getMax(o);case $s.ID_MIN:return this._summarizer.getMin(o);case $s.ID_AVG:return this._summarizer.getAvg(o);case $s.ID_VAR:return this._summarizer.getVar(o);case $s.ID_VARP:return this._summarizer.getVarp(o);case $s.ID_STDEV:return this._summarizer.getStdev(o);case $s.ID_STDEVP:return this._summarizer.getStdevp(o)}throw new $t("Invalid identifier indexer: "+t)}switch(t){case $s.ID_SUM:case $s.ID_COUNT:return 0;case $s.ID_MAX:case $s.ID_MIN:case $s.ID_AVG:case $s.ID_VAR:case $s.ID_VARP:case $s.ID_STDEV:case $s.ID_STDEVP:return NaN}},e.prototype._getCount=function(){return this._summarizer?this._summarizer.getCount(this._column.dataIndex):0},e.prototype._getSum=function(){return this._summarizer?this._summarizer.getSum(this._column.dataIndex):0},e.prototype._getMax=function(){return this._summarizer?this._summarizer.getMax(this._column.dataIndex):NaN},e.prototype._getMin=function(){return this._summarizer?this._summarizer.getMin(this._column.dataIndex):NaN},e.prototype._getAvg=function(){return this._summarizer?this._summarizer.getAvg(this._column.dataIndex):NaN},e.prototype._getVar=function(){return this._summarizer?this._summarizer.getVar(this._column.dataIndex):NaN},e.prototype._getVarp=function(){return this._summarizer?this._summarizer.getVarp(this._column.dataIndex):NaN},e.prototype._getStdev=function(){return this._summarizer?this._summarizer.getStdev(this._column.dataIndex):NaN},e.prototype._getStdevp=function(){return this._summarizer?this._summarizer.getStdevp(this._column.dataIndex):NaN},e.prototype._getDataCount=function(){return this._summarizer?this._summarizer.getDataCount(this._column.dataIndex):NaN},e.prototype._getDataAvg=function(){return this._summarizer?this._summarizer.getDataAvg(this._column.dataIndex):NaN},e.prototype._getGroupValue=function(){return""},e}($s),Vs=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},enumerable:!1,configurable:!0}),e.prototype.setItem=function(t){this._item=t},e.prototype._getCount=function(){return this._item.getNumber(this._column.dataIndex)},e.prototype._getSum=function(){return this._item.getSum(this._column.dataIndex)},e.prototype._getMax=function(){return this._item.getMax(this._column.dataIndex)},e.prototype._getMin=function(){return this._item.getMin(this._column.dataIndex)},e.prototype._getAvg=function(){return this._item.getAvg(this._column.dataIndex)},e.prototype._getVar=function(){return this._item.getVar(this._column.dataIndex,1)},e.prototype._getVarp=function(){return this._item.getVar(this._column.dataIndex,0)},e.prototype._getStdev=function(){return this._item.getStdev(this._column.dataIndex,1)},e.prototype._getStdevp=function(){return this._item.getStdev(this._column.dataIndex,0)},e.prototype._getDataCount=function(){return this._item.getDataCount(this._column.dataIndex)},e.prototype._getDataAvg=function(){return this._item.getDataAvg(this._column.dataIndex)},e.prototype._getGroupValue=function(){return this._column.groupLevel&&this._item.level>=this._column.groupLevel?this._item.firstDataItem.getData(this._column.dataIndex):""},e}(As),Bs=function(t){function e(e){var i=t.call(this)||this;return i._columns=[],i._orgColumns=[],i._nameMap={},i._owner=e,i}return o(e,t),e.prototype._doDispose=function(){this._clearColumn(),this._columns=null,this._owner=null,this._nameMap=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._columns.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){return this._columns.slice()},enumerable:!1,configurable:!0}),e.prototype.getColumn=function(t){return this._columns[t]},e.prototype.setColumns=function(t){if(this._columns.length=0,this._nameMap={},t)for(var e=0,i=t;e<i.length;e++){var o=i[e],r=this._addColumn(o);if(!r)throw new Error("column is undefined");r.$_owner=this,null==r.header.useCheckImage&&(r.header.useCheckImage=this._owner.accessibility)}this._orgColumns=this._columns.slice()},e.prototype.add=function(t,e){var i=this._addColumn(t,void 0===e?-1:e);return null!=i&&(i.$_owner=this),i},e.prototype.remove=function(t){return!!this._removeColumn(t)},e.prototype.exchangeNameMap=function(t,e,i){this._columns.indexOf(t)>0&&(this._nameMap[e].$_hash===t.$_hash&&delete this._nameMap[e],this._nameMap[i]=t)},e.prototype.resetIndices=function(){if(this._owner)for(var t=0,e=this._columns.length;t<e;t++){var i=this._columns[t];i.$_setIndex(t),i._resetIndices(this._owner)}},e.prototype.resetSortStates=function(){if(this._owner)for(var t=this._owner.getSortDirections(),e=this._owner.getSortFields(),i=0,o=this._columns.length;i<o;i++){var r=this._columns[i];r instanceof ls&&(r.sortOrder=e.indexOf(r.dataIndex),r.sortDirection=t[r.sortOrder])}},e.prototype.columnByName=function(t){return this._nameMap[t]},e.prototype.columnByField=function(t){if(t>=0)for(var e=0,i=this.count;e<i;e++){var o=this.getColumn(e);if(o instanceof ls&&o.dataIndex==t)return o}return null},e.prototype.columnsByField=function(t){var e=[];if(t>=0)for(var i=0,o=this.count;i<o;i++){var r=this.getColumn(i);r instanceof ls&&r.dataIndex==t&&e.push(r)}return e},e.prototype.columnByTag=function(t){if(t)for(var e=0,i=this.count;e<i;e++){var o=this.getColumn(e),r=o.tag;if(Rt.isArray(t)&&Rt.equalArrays(t,r)||t instanceof Date&&r instanceof Date&&t.getTime()===r.getTime()||"object"==typeof t&&"object"==typeof r&&Rt.equalObjects(t,r)||r===t)return o}return null},e.prototype.columnsByTag=function(t){if(t){for(var e=[],i=0,o=this.count;i<o;i++){var r=this.getColumn(i),n=r.tag;(Rt.isArray(t)&&Rt.equalArrays(t,n)||t instanceof Date&&n instanceof Date&&t.getTime()===n.getTime()||"object"==typeof t&&"object"==typeof n&&Rt.equalObjects(t,n)||n===t)&&e.push(r)}return e.length?e:null}return null},e.prototype.restoreColumns=function(){this._restoreColumn()},e.prototype._addColumn=function(t,e){void 0===e&&(e=-1);var i=this._columns;if(!t||t instanceof ss||("string"==typeof t&&(t={fieldName:t}),t=zc.createColumn(t)),t instanceof ss){if(i.indexOf(t)>=0)throw new Error("column is already contained");e<0?i.push(t):i.splice(e,0,t);var o=t.name;if(!o||this._nameMap[o])if(o=t instanceof ls?t.fieldName:t instanceof hs?"series":"column",this._nameMap[o]){for(var r=0;r<1e3;r++)if(!this._nameMap[o+r]){t.name=o+=r;break}}else t.name=o;return o&&(this._nameMap[o]=t),t}return null},e.prototype._removeColumn=function(t){var e=this._columns.indexOf(t);return e>=0&&(this._columns.splice(e,1),t.$_owner=void 0,delete this._nameMap[t.name],!0)},e.prototype._restoreColumn=function(){this._columns=this._orgColumns.slice()},e.prototype._clearColumn=function(){for(var t=0,e=this._columns;t<e.length;t++){e[t].dispose()}},e}(Lt),js=function(e){function i(){var i=e.call(this,"headerCell")||this;return i._itemOffset=2,i._itemGap=2,i._checkLocation=t.ColumnHeaderItemLocation.NONE,i._useCheckImage=!1,i._checked=!1,i._indeterminate=!1,i._tooltipEllipsisOnly=!1,i}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemOffset",{get:function(){return this._itemOffset},set:function(t){this._itemOffset=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){this._itemGap=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkLocation",{get:function(){return this._checkLocation},set:function(t){this._checkLocation=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useCheckImage",{get:function(){return this._useCheckImage},set:function(t){this._useCheckImage=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checked",{get:function(){return this._checked},set:function(t){this._checked=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"indeterminate",{get:function(){return this._indeterminate},set:function(t){this._indeterminate=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){this._showTooltip=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tooltipEllipsisOnly",{get:function(){return this._tooltipEllipsisOnly},set:function(t){this._tooltipEllipsisOnly=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tooltip",{get:function(){return this._tooltip},set:function(t){this._tooltip=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"edgeMark",{get:function(){return this._edgeMark},set:function(t){this._edgeMark=t},enumerable:!1,configurable:!0}),i}(gr),Hs=function(e){function i(i){var o=e.call(this,i)||this;return o._minRowHeight=21,o._maxRowHeight=0,o._minHeight=23,o._height=0,o._resizable=!1,o._itemOffset=2,o._itemGap=2,o._showSelection=!1,o._showTooltip=!1,o._tooltipEllipsisOnly=!1,o._sortWidth=16,o._sortHeight=16,o._filterWidth=16,o._filterHeight=16,o._popupWidth=16,o._popupHeight=16,o._expanderWidth=16,o._expanderHeight=16,o._checkWidth=16,o._checkHeight=16,o._showPopupMenu=t.HandleVisibility.VISIBLE,o._cell=new js,o.visible=!0,o.assignFrom(Xe.header),o}return o(i,e),i.prototype._doDispose=function(){this._cell=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){t!=this._minRowHeight&&(this._minRowHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxRowHeight",{get:function(){return this._maxRowHeight},set:function(t){t!=this._maxRowHeight&&(this._maxRowHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minHeight",{get:function(){return this._minHeight},set:function(t){t!=this._minHeight&&(this._minHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(t){t!=this._height&&(this._height=t,this._fitHeights=[],this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayHeight",{get:function(){return this._grid.headerView.height},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"heights",{get:function(){return this._heights&&this._heights.slice()},set:function(t){if(t!=this._heights){t=Rt.makeArray(t,!0),this._heights=t&&t.slice(),this._fitHeights=[];for(var e=0;e<this._heights.length;e++)this._heights[e]=Math.max(this._minRowHeight,isNaN(this._heights[e])?this._minRowHeight:this._heights[e]),this._maxRowHeight>0&&(this._heights[e]=Math.min(this._heights[e],this._maxRowHeight));this._changed()}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemOffset",{get:function(){return this._itemOffset},set:function(t){t!=this._itemOffset&&(this._itemOffset=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tooltipEllipsisOnly",{get:function(){return this._tooltipEllipsisOnly},set:function(t){this._tooltipEllipsisOnly=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showSelection",{get:function(){return this._showSelection},set:function(t){t!=this._showSelection&&(this._showSelection=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortWidth",{get:function(){return this._sortWidth},set:function(t){t!=this._sortWidth&&(this._sortWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortHeight",{get:function(){return this._sortHeight},set:function(t){t!=this._sortHeight&&(this._sortHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterWidth",{get:function(){return this._filterWidth},set:function(t){t!=this._filterWidth&&(this._filterWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterHeight",{get:function(){return this._filterHeight},set:function(t){t!=this._filterHeight&&(this._filterHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupWidth",{get:function(){return this._popupWidth},set:function(t){t!=this._popupWidth&&(this._popupWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupHeight",{get:function(){return this._popupHeight},set:function(t){t!=this._popupHeight&&(this._popupHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanderWidth",{get:function(){return this._expanderWidth},set:function(t){t!=this._expanderWidth&&(this._popupWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanderHeight",{get:function(){return this._expanderHeight},set:function(t){t!=this._expanderHeight&&(this._popupHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showPopupMenu",{get:function(){return this._showPopupMenu},set:function(t){t!=this._showPopupMenu&&(this._showPopupMenu=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkWidth",{get:function(){return this._checkWidth},set:function(t){t!=this._checkWidth&&(this._checkWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkHeight",{get:function(){return this._checkHeight},set:function(t){t!=this._checkHeight&&(this._checkHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t},enumerable:!1,configurable:!0}),i.prototype.setCalcHeights=function(t,e){this._calcHeights=t.slice(),e&&(this._fitHeights=t.slice())},i.prototype.getCalcHeights=function(){return this._calcHeights},i.prototype.getCell=function(t){var e=this._cell;e.setLayout(t);var i=t instanceof vs?t.header:t.firstColumn.header;if(i&&(e.text=i.displayText,e.showTooltip=i.showTooltip,e.tooltipEllipsisOnly=i.tooltipEllipsisOnly,e.tooltip=i.tooltip,e.edgeMark=i.edgeMark,i instanceof is)){var o=t.firstColumn,r=void 0;e.index.set(-1,t.firstColumn),e.itemOffset=void 0===(r=i.itemOffset)?this._itemOffset:r,e.itemGap=void 0===(r=i.itemGap)?this._itemGap:r,e.checkLocation=i.checkLocation,e.checked=o.checked,e.useCheckImage=i.useCheckImage}return e},i.prototype.getStyleName=function(){return this._styleName},i.prototype._doChanged=function(){e.prototype._doChanged.call(this),this._grid&&this._grid.invalidatePosition()},i}(dr),Gs=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){this._cell=null,t.prototype._doDispose.call(this)},e.prototype.setCell=function(t){this._cell=t},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_VALUE:return this._cell.value;case e.ID_FIELD:return this._cell.index.dataField;case e.ID_LEVEL:return this._cell.level}throw new $t("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,e){},e.prototype.evaluateIndexerS=function(t,e,i){},e.ID_VALUE=0,e.ID_FIELD=1,e.ID_LEVEL=2,e.IDENTS={value:e.ID_VALUE,field:e.ID_FIELD,level:e.ID_LEVEL},e}(Wt),Ws=function(e){function i(t){var i=e.call(this,t)||this;return i._childIndex=0,i._error=null,i._errorDetail=null,i}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"level",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"errorDetail",{get:function(){return this._errorDetail},enumerable:!1,configurable:!0}),i.prototype.calculate=function(){var e=this.valueColumn,i=e&&e.grid,o=this._getSummary(e,this._childIndex);if(this._value=NaN,this._error=null,i&&o&&i.itemSource.summaryMode!=t.SummaryMode.NONE){o._value=void 0;var r=o.expression,n=void 0;try{if(r&&i.dataCount>0&&e instanceof ls&&e.dataIndex>=0){var s=i.columnSummaryRuntime;s.setColumn(e,i.summarizer),n=o.evaluate(s,this._childIndex)}var a=o.valueCallback;a&&(n=a(i.handler,e,this._childIndex,o,n)),o._value=this._value=n}catch(t){this._error=t,this._errorDetail=t,o._value=void 0}}},Object.defineProperty(i.prototype,"text",{get:function(){if(this._error)return gr.ERROR},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),i.prototype.getDisplayText=function(t){var e,i=this._value,o=this.valueColumn,r="";if(null!=t.text)r=t.text;else if(void 0!==i&&o){if("string"==typeof i)r=i+"";else if("boolean"==typeof i)r=String(i);else if(i instanceof Date){var n=t.datetimeWriter;r=n?n.getText(this._value):String(i)}else if("number"!=typeof i||isNaN(i))null==i&&(r="");else{var s=t.numberFormatter;r=s?s.getText(i):String(i)}if(r){var a=t.prefix;a&&(r=a+r),(a=t.suffix)&&(r+=a)}}return!r&&o&&(r=null===(e=this._getSummary(o,this._childIndex))||void 0===e?void 0:e.text),r},i.prototype.getSummary=function(){return this._getSummary(this.valueColumn,this._childIndex)},i.prototype.getTemplate=function(t){var e=this._getSummary(this.valueColumn,this._childIndex);return e?e.realizeSummary(this,t):void 0},i}(gr),Us=function(t){function e(){return t.call(this,"footerCell")||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"footerIndex",{get:function(){return this._childIndex},set:function(t){t!=this._childIndex&&(this._childIndex=t)},enumerable:!1,configurable:!0}),e.prototype._getSummary=function(t,e){return t&&t.footers.get(e)},e}(Ws),Ys=function(t){function e(e){var i=t.call(this,e)||this;return i._minHeight=23,i._height=0,i._heights=[],i._formatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:"",text:null},i._childIndex=0,i._displayIndex=0,i._runtime=new Gs,i._cell=i._createCell(),i.visible=!0,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayIndex",{get:function(){return this._displayIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minHeight",{get:function(){return this._minHeight},set:function(t){(t=Math.max(0,t))!=this._minHeight&&(this._minHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){(t=Math.max(0,t))!=this._height&&(this._height=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"heights",{get:function(){return this._heights},set:function(t){this._heights=t.slice(),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this.refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childIndex",{get:function(){return this._childIndex},enumerable:!1,configurable:!0}),e.prototype.getCell=function(t){var e=this._cell,i=t.firstColumn;return e.index.set(-1,i),e._childIndex=this._childIndex,e.calculate(),e},e.prototype.getCellStyle=function(t,e,i){void 0===i&&(i=!0);var o,r=t.getSummary(),n=this._cellStyleCallback;n&&(o=n(this._grid.handler,t),e.assign(o)),r&&(n=r.styleCallback)&&(o=n(this._grid.handler,t),e.assign(o));var s=e.styleName||r&&r.styleName||"";return i&&(e.styleName=this.getCellStyleName()+" "+s),e},e.prototype.getCellFormatters=function(t,e){return e?(e.numberFormatter=e.numberFormatter||t.numberFormatter,e.datetimeWriter=e.datetimeWriter||t.datetimeWriter,e.booleanFormatter=e.booleanFormatter||t.boolFormatter,e.textFormatter=e.textFormatter||t.textFormatter,e.prefix=e.prefix||t.prefix,e.suffix=e.suffix||t.suffix):((e=this._formatter).numberFormatter=t.numberFormatter,e.datetimeWriter=t.datetimeWriter,e.booleanFormatter=t.boolFormatter,e.textFormatter=t.textFormatter,e.prefix=t.prefix,e.suffix=t.suffix),e},e.prototype._visibleChanged=function(){t.prototype._visibleChanged.call(this),this.$_owner&&this.$_owner.$_visibleChanged(this)},e.prototype._doChanged=function(){t.prototype._doChanged.call(this),this.$_owner&&this.$_owner._doChanged()},e}(dr),zs=function(t){function e(e){var i=t.call(this,e)||this;return i.assignFrom(Xe.footer),i}return o(e,t),e.prototype.getCellStyleName=function(){return e.CELL_CSS},e.prototype._createCell=function(){return new Us},e.CELL_CSS="rg-footer-cell",e}(Ys),qs=function(t){function e(e){var i=t.call(this,e)||this;i._items=[],i._visibles=[];var o=i._createSummary(e);return o.$_owner=i,i._items.push(o),o.visible&&i._visibles.push(o),i}return o(e,t),e.prototype._doDispose=function(){for(var e=0,i=this._items;e<i.length;e++){i[e].dispose()}this._items=null,this._visibles=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"canShow",{get:function(){return this.visible&&this._visibles.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleCount",{get:function(){return this._visibles.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){for(var t=this._dirty,e=0,i=this._visibles;e<i.length;e++){var o=i[e];t=t||o.dirty}return t},enumerable:!1,configurable:!0}),e.prototype.get=function(t){return this._items[t]},e.prototype.getVisible=function(t){return this._visibles[t]},e.prototype.isVisible=function(){return this.visible&&this.visibleCount>0},e.prototype.assignFrom=function(e){var i;if(t.prototype.assignFrom.call(this,e),e&&e.items?i=Rt.makeArray(e.items):Rt.isArray(e)&&(i=e),i){for(var o=this._items,r=i.length;o.length>r;)o.pop().dispose();for(var n=0,s=i.length;n<s;n++){var a=i[n]||{};o[n]=o[n]||this._createSummary(),o[n].assignFrom(a),o[n].$_owner=this}this.$_resetVisibles()}},e.prototype.clean=function(){for(var e=0,i=this._items;e<i.length;e++){i[e].clean()}t.prototype.clean.call(this)},e.prototype.toProxy=function(){for(var e=t.prototype.toProxy.call(this),i=[],o=0;o<this._items.length;o++)i.push(this._items[o].toProxy());return i.length>0&&(e.items=i.slice()),e},e.prototype.$_visibleChanged=function(t){this.$_resetVisibles()},e.prototype.$_resetVisibles=function(){this._visibles.length=0;for(var t=0,e=0;t<this._items.length;t++){var i=this._items[t];i._childIndex=t,i.visible&&(this._visibles.push(i),i._displayIndex=e++)}this._changed()},e.prototype._doChanged=function(){t.prototype._doChanged.call(this),this._grid&&this._grid.invalidatePosition()},e}(dr),Ks=function(t){function e(e){var i=t.call(this,e)||this;return i.assignFrom(Xe.footers),i}return o(e,t),e.prototype._createSummary=function(t){return new zs(t||this._grid)},e}(qs),Xs=function(t){function e(e){var i=t.call(this,e)||this;return i._displayOrder=0,i._headText=null,i._footText=null,i._sumText=null,i._showFocus=!1,i._showSelection=!1,i._headCell=i._createHeadCell(),i._footCell=i._createFootCell(),i._sumCell=i._createSumCell(),i._filterCell=i._createFilterCell(),i.visible=!0,i}return o(e,t),Object.defineProperty(e.prototype,"displayOrder",{get:function(){return this._displayOrder},set:function(t){t!=this._displayOrder&&(this._displayOrder=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headText",{get:function(){return this._headText},set:function(t){t!=this._headText&&(this._headText=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"footText",{get:function(){return this._footText},set:function(t){t!=this._footText&&(this._footText=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sumText",{get:function(){return this._sumText},set:function(t){t!=this._sumText&&(this._sumText=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"popupMenuName",{get:function(){return this._popupMenuName?this._popupMenuName:this._popupMenu&&this._grid?(this._popupMenuName=this.getHeadStyleName()+"_menu",this._grid.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this._popupMenuName):null},set:function(t){null!=t&&"string"!=typeof t||(this._popupMenuName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visChanged",{get:function(){return this._visChanged},set:function(t){this._visChanged=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showFocus",{get:function(){return this._showFocus},set:function(t){t!=this._showFocus&&(this._showFocus=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showSelection",{get:function(){return this._showSelection},set:function(t){t!=this._showSelection&&(this._showSelection=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this._changed())},enumerable:!1,configurable:!0}),e.prototype.getHeadCell=function(){return this._headCell},e.prototype.getFootCell=function(){return this._footCell},e.prototype.getSumCell=function(){return this._sumCell},e.prototype.getFilterCell=function(){return this._filterCell},e.prototype._createHeadCell=function(){return new yr(this)},e.prototype._createFootCell=function(){return new yr(this)},e.prototype._createSumCell=function(){return new yr(this)},e.prototype._createFilterCell=function(){return new yr(this)},e.prototype._visibleChanged=function(){t.prototype._visibleChanged.call(this),this._grid&&this._grid.invalidatePosition(),this._visChanged=!0},e}(dr);t.IndicatorValue=void 0,(ks=t.IndicatorValue||(t.IndicatorValue={})).NONE="none",ks.INDEX="index",ks.REVERSE="reverse",ks.ROW="row",t.StateMark=void 0,(Ts=t.StateMark||(t.StateMark={})).IMAGE="image",Ts.TEXT="text",Ts.NONE="none";var Zs,Js,Qs,ta=function(e){function i(i){var o=e.call(this,"indicatorCell")||this;return o._itemState=t.ItemState.NORMAL,o._indicator=i,o}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"indicator",{get:function(){return this._indicator},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemState",{get:function(){return this._itemState},set:function(t){t!=this._itemState&&(this._itemState=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){var e,i=this._indicator,o=i.owner,r=this.index,n=r.item,s="",a=o.indicatorReverse(i.displayValue);if(n&&n.itemState==t.ItemState.NORMAL)switch(i.displayValue){case t.IndicatorValue.INDEX:case t.IndicatorValue.REVERSE:(e=o.getIndicatorIndex(n,a))>=0&&(e+=i.indexOffset,!i.zeroBase&&e++,s=String(e));break;case t.IndicatorValue.ROW:n.isDataRow&&(e=r.dataRow,e+=i.rowOffset,i.zeroBase||e++,s=String(e))}return s},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return null},enumerable:!1,configurable:!0}),i}(gr),ea=function(e){function i(t){var i=e.call(this,t)||this;return i._zeroBase=!1,i._indexOffset=0,i._rowOffset=0,i._minWidth=32,i._maxWidth=0,i._width=0,i._selectable=!0,i._displayWidth=0,i._cell=new ta(i),i.headText=Ue.messages.rowIndicatorHeadText,i.footText=Ue.messages.rowIndicatorFootText,i.sumText=Ue.messages.rowIndicatorSumText,i.showFocus=i.showSelection=!0,i.assignFrom(Xe.rowIndicator),i}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"displayValue",{get:function(){return this._displayValue||t.IndicatorValue.INDEX},set:function(t){t!=this._displayValue&&(this._displayValue=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"zeroBase",{get:function(){return this._zeroBase},set:function(t){t!=this._zeroBase&&(this._zeroBase=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"indexOffset",{get:function(){return this._indexOffset},set:function(t){t!=this._indexOffset&&(this._indexOffset=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowOffset",{get:function(){return this._rowOffset},set:function(t){t!=this._rowOffset&&(this._rowOffset=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayWidth",{get:function(){return this._displayWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectable",{get:function(){return this._selectable},set:function(t){t!=this._selectable&&(this._selectable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"draggableSelectedRows",{get:function(){return this._draggableSelectedRows},set:function(t){this._draggableSelectedRows=t},enumerable:!1,configurable:!0}),i.prototype.getCellType=function(){return t.GridCellType.INDICATOR},Object.defineProperty(i.prototype,"staticOrder",{get:function(){return 0},enumerable:!1,configurable:!0}),i.prototype.getCell=function(e){var i=this._cell;if(i.setIndex(e),e.item){var o=e.item.itemState;o==t.ItemState.NORMAL&&this._grid.focusedIndex.itemIndex==e.itemIndex&&(o=t.ItemState.FOCUSED),i.itemState=o}return i},i.prototype.getHeadStyleName=function(){return"rg-rowindicator-head"},i.prototype.getFootStyleName=function(){return"rg-rowindicator-foot"},i.prototype.getSumStyleName=function(){return"rg-rowindicator-sum"},i.prototype.getFilterStyleName=function(){return"rg-rowindicator-filter"},i}(Xs),ia=function(e){function i(t){var i=e.call(this,"stateBarCell")||this;return i._bar=t,i}return o(i,e),i.prototype._doDispose=function(){this._bar=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"text",{get:function(){var e,i=this._bar.stateTexts[this.item.rowState]||(null===(e=Xe.stateBar.stateTexts)||void 0===e?void 0:e[this.item.rowState]);if(!i)switch(this.item.rowState){case t.RowState.CREATED:return Ue.messages.stateTextCreated;case t.RowState.UPDATED:return Ue.messages.stateTextUpdated;case t.RowState.CREATE_AND_DELETED:return Ue.messages.stateTextCreateAndDeleted;case t.RowState.DELETED:return Ue.messages.stateTextDeleted}return i},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return null},enumerable:!1,configurable:!0}),i}(gr),oa=function(e){function i(i){var o=e.call(this,i)||this;return o._width=20,o._mark=t.StateMark.IMAGE,o._stateTexts={},o._errorVisible=!1,o._cell=new ia(o),o.assignFrom(Xe.stateBar),o}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mark",{get:function(){return this._mark},set:function(t){t!=this._mark&&(this._mark=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stateTexts",{get:function(){return this._stateTexts},set:function(e){if(e!=this._stateTexts){var i=[];for(var o in t.RowState)i.push(t.RowState[o]);for(var r in e)i.indexOf(r)>=0&&(this._stateTexts[r]=e[r]);this._changed()}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"errorVisible",{get:function(){return this._errorVisible},set:function(t){t!=this._errorVisible&&(this._errorVisible=t,this._changed())},enumerable:!1,configurable:!0}),i.prototype.getCellType=function(){return t.GridCellType.STATE},Object.defineProperty(i.prototype,"staticOrder",{get:function(){return 1e3},enumerable:!1,configurable:!0}),i.prototype.getCell=function(t){var e=this._cell;return e.setIndex(t),e},i.prototype.getHeadStyleName=function(){return"rg-statebar-head"},i.prototype.getFootStyleName=function(){return"rg-statebar-foot"},i.prototype.getSumStyleName=function(){return"rg-statebar-sum"},i.prototype.getFilterStyleName=function(){return"rg-statebar-filter"},i}(Xs),ra=function(t){function e(){return t.call(this,"checkBarCell")||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"getText",{get:function(){return String(this.index.dataRow)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.item.checked},enumerable:!1,configurable:!0}),e}(gr),na=function(e){function i(i){var o=e.call(this,i)||this;return o._width=20,o._exclusive=!1,o._toggleRadio=!1,o._showAll=!0,o._showGroup=!0,o._showGroupFooter=!0,o._visibleOnly=!1,o._checkableOnly=!0,o._syncHeadCheck=!1,o._headThreeStates=!1,o._useImages=!1,o._checkLocation=t.ColumnHeaderItemLocation.TOP,o._itemGap=5,o._fieldIndex=-1,o._breakMergeOnEmpty=!1,o._cell=new ra,o._merged=!1,o.assignFrom(Xe.checkBar),o}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exclusive",{get:function(){return this._exclusive},set:function(t){t!=this._exclusive&&(this._exclusive=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"toggleRadio",{get:function(){return this._toggleRadio},set:function(t){this._toggleRadio=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkLocation",{get:function(){return this._checkLocation},set:function(t){t!=this._checkLocation&&(this._checkLocation=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showAll",{get:function(){return this._showAll},set:function(t){t!=this._showAll&&(this._showAll=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showGroup",{get:function(){return this._showGroup},set:function(t){t!=this._showGroup&&(this._showGroup=t,this._grid.itemSource.setGroupCheckable(t,t&&this._showGroupFooter),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showGroupFooter",{get:function(){return this._showGroupFooter},set:function(t){t!=this._showGroupFooter&&(this._showGroupFooter=t,this._grid.itemSource.setGroupCheckable(this._showGroup,this._showGroup&&t),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibleOnly",{get:function(){return this._visibleOnly},set:function(t){t!=this._visibleOnly&&(this._visibleOnly=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableOnly",{get:function(){return this._checkableOnly},set:function(t){t!=this._checkableOnly&&(this._checkableOnly=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._grid.itemSource.checkableExpression=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableCallback",{get:function(){return this._checkableCallback},set:function(t){this._checkableCallback=t,this._grid.itemSource.checkableCallback=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"syncHeadCheck",{get:function(){return this._syncHeadCheck},set:function(t){t!=this._syncHeadCheck&&(this._syncHeadCheck=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headThreeStates",{get:function(){return this._headThreeStates},set:function(t){t!==this._headThreeStates&&(this._headThreeStates=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldName",{get:function(){return this._fieldName},set:function(t){t!=this._fieldName&&(this._fieldName=t,this._fieldIndex=this._grid.dataSource.getFieldIndex(t),this._grid.setCheckFieldIndex(this._fieldIndex),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldIndex",{get:function(){return this._fieldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useImages",{get:function(){return this._useImages},set:function(t){this._useImages!==t&&(this._useImages=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeRule",{get:function(){return this._mergeRule},set:function(t){t!=this._mergeRule&&(this._mergeRule=t,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=t?ha.createRule(t):null,this._changed(),this.owner._columnMergeRuleChanged(null))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(t){t!=this._breakMergeOnEmpty&&(this._breakMergeOnEmpty=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusMove",{get:function(){return!!this._focusMove},set:function(t){this._focusMove=t},enumerable:!1,configurable:!0}),i.prototype.getCell=function(t){var e=this._cell;return e.setIndex(t),e._exclusive=this._exclusive,e},i.prototype.getHeadStyleName=function(){return"rg-checkbar-head"},i.prototype.getFootStyleName=function(){return"rg-checkbar-foot"},i.prototype.getSumStyleName=function(){return"rg-checkbar-sum"},i.prototype.getFilterStyleName=function(){return"rg-checkbar-filter"},i.prototype.canMerge=function(){return null!=this._mergeRuleObj},i.prototype.getCellType=function(){return t.GridCellType.CHECK},Object.defineProperty(i.prototype,"staticOrder",{get:function(){return 2e3},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"merges",{get:function(){return this._merges},enumerable:!1,configurable:!0}),i.prototype._doChanged=function(){this._grid&&(this._grid._itemCheckChanged=this._syncHeadCheck)},Object.defineProperty(i.prototype,"merged",{get:function(){return this._merged},enumerable:!1,configurable:!0}),i}(Xs),sa=function(t){function e(){var e=t.call(this)||this;return e._row1=0,e._row2=0,e}return o(e,t),e.$_setRange=function(t,e,i){return t._row1=e<=i?e:i,t._row2=e<=i?i:e,t},e.create=function(t,i){if(i&&t!==i)return e.$_setRange(new e,t.itemIndex,i.itemIndex);var o=new e;return o._row1=o._row2=t.itemIndex,o},e.temp=function(t,i){var o=e.$_TEMP;return i&&t!==i?e.$_setRange(o,t.itemIndex,i.itemIndex):(o._row1=o._row2=t.itemIndex,o)},e.createRange=function(t,i){return e.$_setRange(new e,t,i)},Object.defineProperty(e.prototype,"empty",{get:function(){return this._row2<this._row1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"r1",{get:function(){return this._row1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"r2",{get:function(){return this._row2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._row1<=this._row2?this._row1:this._row2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._row1<=this._row2?this._row2:this._row1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstCell",{get:function(){var t=new Ds;return t.itemIndex=this._row1<=this._row2?this._row1:this._row2,t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastCell",{get:function(){var t=new Ds;return t.itemIndex=this._row1>=this._row2?this._row1:this._row2,t},enumerable:!1,configurable:!0}),e.prototype.contains=function(t){return t>=this._row1&&t<=this._row2},e.prototype.intersectsWith=function(t){return!1},e.NULL=new e,e.$_TEMP=new e,e}(Lt),aa=function(t){function e(){var e=t.call(this)||this;return e._item=null,e._ds=null,e._fieldCount=0,e}return o(e,t),e.prototype._doDispose=function(){this._item=null,this._ds=null,t.prototype._doDispose.call(this)},e.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},e.prototype.setCell=function(t){this._item=t.item},e.prototype.setItem=function(t){this._item=t},e.prototype.clear=function(){this._item=null,this._ds=null},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){if(this._item){switch(t){case e.ID_ROW:return this._item.index;case e.ID_DATAROW:return this._item.dataRow;case e.ID_GROUP:return this._item.parent}throw new $t("Invalid identifier key: "+t)}},e.prototype.evaluateIndexerI=function(t,i){if(this._item){if(t==e.ID_VALUE||t==e.ID_VALUES){if(i<0||i>=this._fieldCount)throw new $t("Data field index out of bounds:"+i);return this._item.getData(i)}throw new $t("Invalid identifier indexer: "+t)}},e.prototype.evaluateIndexerS=function(t,i,o){if(t!=e.ID_VALUE&&t!=e.ID_VALUES)throw new $t("Invalid identifier indexer: "+t);if(this._ds){var r=o?this._ds.getFieldIndexC(i):this._ds.getFieldIndex(i);if(r<0||r>=this._fieldCount)throw new $t("Data field is not exists:"+i);return this._item.getData(r)}},e.ID_ROW=0,e.ID_DATAROW=1,e.ID_CHECKED=2,e.ID_VALUE=3,e.ID_VALUES=4,e.ID_GROUP=5,e.ID_PREV_VALUES=6,e.IDENTS={row:e.ID_ROW,datarow:e.ID_DATAROW,checked:e.ID_CHECKED,value:e.ID_VALUE,values:e.ID_VALUES,group:e.ID_GROUP,prevvalues:e.ID_PREV_VALUES},e}(Wt),la={},ha=function(t){function e(i){var o=t.call(this)||this;return o._runtime=e.$_runtime=e.$_runtime||new aa,o.criteria=i,o}return o(e,t),e.createRule=function(t){var i="string"==typeof t?t:t&&t.criteria;return i?new e(i):null},e.prototype._doDispose=function(){this._runtime.clear(),this._runtime=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"criteria",{get:function(){return this._criteria},set:function(t){(t=t?t.trim():null)!=this._criteria&&(this._criteria=t,this._exprNode=t?Ie.Default.parse(t,null):null,this._changed())},enumerable:!1,configurable:!0}),e.prototype.parseInit=function(t,e,i,o,r){var n=this._checkBar.breakMergeOnEmpty,s=t.fixedCount,a=t.itemCount,l=t.dataSource.rowCount;if(!((o=Math.min(a-i,o))<1||l<=0)){this._runtime.setDataSource(t.dataSource);for(var h=null;i<a&&(h=t.getItem(i),!this.$_isRow(h,false));)r[i]=i+1,i++;if(!(i>=a)){this._runtime.setItem(h);var u=this._exprNode.evaluate(this._runtime),c=h.checked,d=i;if(r[d]=d+1,!(h.dataRow>=l)){this._runtime.setItem(h);for(var p=i+1;p<a;p++)if(h=t.getItem(p),this.$_isRow(h,false)){if(h.dataRow>=l)break;this._runtime.setItem(h);var f=this._exprNode.evaluate(this._runtime),_=h.checked;if(p==s||void 0===f&&n||(f instanceof Date&&u instanceof Date?+f!=+u:f!=u)||_!=c){if(p>=o)break;d=p,u=f,c=_}r[p]=d+1}else{if(p>=o)break;u=la,d=p,r[p]=d+1}}}}},e.prototype.parseBounds=function(t,e,i,o,r){var n=this._checkBar.breakMergeOnEmpty,s=!1,a=t.itemCount;if(!(a<1)){var l,h,u,c=t.fixedCount,d=la,p=Math.max(0,i),f=p,_=-1;if(this._runtime.setDataSource(t.dataSource),p>0&&r[p]<=0){var g=t.getItem(p);if(this.$_isRow(g,s)){for(this._runtime.setItem(g),h=this._exprNode.evaluate(this._runtime),u=g.checked,p--;p>=0&&(g=t.getItem(p),this.$_isRow(g,s))&&(this._runtime.setItem(g),d=this._exprNode.evaluate(this._runtime),l=g.checked,!(p==c||void 0===d&&n||(d instanceof Date&&h instanceof Date?+d!=+h:d!=h)||u!=l));)p--;for(var y=f-1;y>p;y--)r[y]=p+2;f-1>p&&(_=p+1)}else{r[p]=p+1;for(y=f-1;y>p;y--)r[y]=p+2;for(f-1>p+1&&(_=p+2),p--;p>=0&&r[p]<=0&&!this.$_isRow(t.getItem(p),s);)r[p]=p+1,p--}}for(p=Math.max(0,i);p<=o&&r[p]>0;)p++;for(;p<=o&&!this.$_isRow(t.getItem(p),s);)r[p]=p+1,p++;if(p<o){f=p;g=t.getItem(p);for(this._runtime.setItem(g),h=this._exprNode.evaluate(this._runtime),u=g.checked,p++;p<a;)if(g=t.getItem(p),this.$_isRow(g,s)){if(this._runtime.setItem(g),d=this._exprNode.evaluate(this._runtime),l=g.checked,p==c||void 0===d&&n||(d instanceof Date&&h instanceof Date?+d!=+h:d!=h)||u!=l){var m=f;_>=0&&(m=_,_=-1);for(y=f;y<p;y++)r[y]=m+1;if(p>=o)break;h=d,u=l,f=p}else r[p]=f+1;p++}else{m=f;_>=0&&(m=_,_=-1);for(y=f;y<p;y++)r[y]=m+1;for(r[p]=p+1,p++;p<a&&!this.$_isRow(t.getItem(p),s);)r[p]=p+1,p++;if(f=p,p>=o)break}if(p==a&&(d instanceof Date&&h instanceof Date?+d==+h:d==h)||u!=l)for(m=_>=0?_:f,y=f;y<p;y++)r[y]=m+1}}},e.prototype.$_isRow=function(t,e){var i=t instanceof Go&&!(t instanceof Xo);if(i&&!e){var o=t.parent;i=o.expanded||o.firstItem!==t}return i},e.$_runtime=null,e}(Bn),ua=function(t){function e(e,i){var o=t.call(this)||this;return o._checkBar=i,o._head=e.top,o._tail=e.bottom,o}return o(e,t),e.borrow=function(t,i){var o=e.$_rooms.pop();return o?(o._head=t.top,o._tail=t.bottom):o=new e(t,i),o},e.returnTo=function(t){if(t){var i=e.$_rooms;i.indexOf(t)<0&&i.push(t)}},Object.defineProperty(e.prototype,"head",{get:function(){return this._head},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return this._tail},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this._checkBar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"group",{get:function(){return null},set:function(t){},enumerable:!1,configurable:!0}),e.prototype.getHead=function(t){return t?t.set(this._head,null):t=new Ds(this._checkBar.owner,this._head,null),t},e.prototype.getTail=function(t){return t?t.set(this._tail,null):t=new Ds(this._checkBar.owner,this._tail,null),t},e.prototype.isHead=function(t){return t.itemIndex==this._head},e.prototype.isTail=function(t){return t.itemIndex==this._tail},e.prototype.contains=function(t){return t.itemIndex>=this._head&&t.itemIndex<=this._tail},e.$_rooms=new Array,e}(Un),ca=-1,da=65535,pa=function(t){function e(e){var i=t.call(this)||this;return i._flags=null,i._fixedRooms=[],i._rooms=[],i._inited=!1,i._fixedCells=[],i._cells=[],i._nextId=0,i._checkBar=e,e._merges=i,i}return o(e,t),e.prototype._doDispose=function(){this._checkBar=null,this._rooms=this._fixedRooms=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"count",{get:function(){return this._rooms.length},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this._flags=null,this._rooms=[],this._inited=!1},e.prototype.initialize=function(t){if(!this._inited){var e=this._checkBar.owner,i=e.itemSource,o=this._checkBar._mergeRuleObj;if(o){for(var r=this._flags=new Array(i.itemCount),n=e.fixedOptions.mergeRows?0:i.fixedCount,s=i.itemCount;s--;)r[s]=0;o._checkBar=this._checkBar,o.parseInit(i,-1,n,t,r)}this._inited=!0}},e.prototype.refreshRooms=function(t,e,i){if(this._nextId=0,this._inited&&this._flags&&!(e<t)){var o=this._checkBar.owner;if(o){var r=this._rooms,n=o.layoutManager.fixedItemCount,s=o.itemSource,a=this._checkBar._mergeRuleObj,l=0;if(this._fixedRooms.length=0,this._rooms.length=0,a&&(a._checkBar=this._checkBar,a.parseBounds(s,-1,t,e,this._flags)),i)for(;l<n;){if(u=this.$_checkFixedMerge(s,l,n)){var h=new ua(u,this._checkBar);this._fixedRooms.push(h),l=u.r2+1}else l+=1}for(l=t;l<=e;){var u;if(null!=(u=this.$_checkMerge(s,l,0==r.length,n))){var c=s.getItem(u.r2);if(c instanceof Hr||c instanceof jr);else{h=new ua(u,this._checkBar);this._rooms.push(h)}l=u.r2+1}else l+=1}}}},e.prototype.getFixedRooms=function(){return this._fixedRooms.slice()},e.prototype.getRooms=function(){return this._rooms.slice()},e.prototype.scroll=function(t){},e.prototype.getRoom=function(t){for(var e=t.rowFixed?this._fixedRooms:this._rooms,i=e.length-1;i>=0;i--)if(e[i].contains(t))return e[i];return null},e.prototype.prepareCells=function(t,e){if(t>0){for(var i=this._fixedCells,o=0;o<i.length;o++)i[o]=ca;for(;i.length<t;)i.push(ca)}var r=this._cells;for(o=0;o<r.length;o++)r[o]=ca;for(;r.length<e;)r.push(ca)},e.prototype.refreshCells=function(t,e){for(var i=this.getFixedRooms(),o=i.length-1;o>=0;o--){var r=i[o];this.addFixedCells(r.head,r.tail-r.head+1)}for(o=(i=this.getRooms()).length-1;o>=0;o--){r=i[o];var n=Math.max(0,r.head-e-t),s=r.tail-e-t;this.addCells(n,s-n+1)}},e.prototype.addFixedCells=function(t,e){for(var i=this._fixedCells,o=this._nextId++,r=t+1;r<t+e;r++)i[r]=o+da;return i[t]=o,o},e.prototype.addCells=function(t,e){for(var i=this._cells,o=this._nextId++,r=t+1;r<t+e;r++)i[r]=o+da;return i[t]=o,o},e.prototype.isMerged=function(t,e){return t<e?this._fixedCells[t]>ca:this._cells[t-e]>ca},e.prototype.isMergeRoot=function(t,e){return t<e?this._fixedCells[t]>ca&&this._fixedCells[t]<da:(t-=e,this._cells[t]>ca&&this._cells[t]<da)},e.prototype.isHidden=function(t,e){return t<e?this._fixedCells[t]>=da:this._cells[t-e]>=da},e.prototype.getMerged=function(t,e){var i=1;if(t<e)for(var o=(n=this._fixedCells)[t],r=t+1;r<n.length&&n[r]-da==o;r++,i++);else{t-=e;var n;for(o=(n=this._cells)[t],r=t+1;r<n.length&&n[r]-da==o;r++,i++);}return i},e.prototype.getMerged2=function(t,e,i,o){for(var r=this._cells,n=r[i],s=t.itemSource,a=s.getItem(e++),l=a.isData?o:1,h=i+1;h<r.length&&r[h]-da==n;h++)l+=(a=s.getItem(e++)).isData?o:1;return l},e.prototype.$_checkFixedMerge=function(t,e,i){if(i>0){var o=e,r=this._flags[o];if(r<=0)return null;for(var n=e+1;n<=i;){if(n==i||this._flags[n]>r)return n>o+1?sa.createRange(o,n-1):null;n++}}return null},e.prototype.$_checkMerge=function(t,e,i,o){if(e>=0){var r=e,n=this._flags[r];t.getItem(r);if(n<=0)return null;if(i)for(;r>o&&!(this._flags[r-1]<n);)r--;for(var s=t.itemCount,a=e+1;a<s;){if(this._flags[a]>n||this._flags[a]<=0)return a>r+1?sa.createRange(r,a-1):t.getItem(r).isDataRow?null:sa.createRange(r,a-1);a++}if(a>r)return a>r+1?sa.createRange(r,a-1):t.getItem(r).isDataRow?null:sa.createRange(r,a-1)}return null},e.MERGE_ROOMS="mergeRooms",e}(Lt),fa=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.setEmpty=function(){return this.x=this.y=0,this},t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+"}"},t}(),_a=function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this)||this;o._x=0,o._y=0,o._width=0,o._height=0,o._visible=!0,o._mouseEnabled=!0,o._elements=null,o._dirty=!0,o._className="",o._name=i;var r=o._dom=o._createDom(e);return r&&o._initDom(r),o}return o(e,t),e.prototype._doDispose=function(){if(this._dom&&(Rt.detach(this._dom),this._dom=null),this._elements){for(var e=0,i=this._elements;e<i.length;e++){i[e].dispose()}this._elements.length=0}this._parent=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"container",{get:function(){return this._parent&&this._parent.container},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childCount",{get:function(){return this._elements?this._elements.length:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){t!=this._x&&(this._x=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){t!=this._y&&(this._y=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){(t=Math.max(0,t))!=this._width&&(this._width=t,this.sizeChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){(t=Math.max(0,t))!=this._height&&(this._height=t,this.sizeChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this._x+this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._y+this._height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return new ot(this._x,this._y,this._width,this._height)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._dom&&(this._dom.style.display=this._visible?this._getCssDisplay():"none"),this.invalidate(!0),this._visibleChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLayer",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clickable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return St(this._dom)},enumerable:!1,configurable:!0}),e.prototype.getChildren=function(){return this._elements&&this._elements.concat()},e.prototype.getChild=function(t){return this._elements[t]},e.prototype.indexOf=function(t){return this._elements?this._elements.indexOf(t):-1},e.prototype.contains=function(t){return this._elements&&this._elements.indexOf(t)>=0},e.prototype.getAncestor=function(t){for(var e=this._parent;e;){if(e instanceof t)return e;e=e._parent}return null},e.prototype.addChild=function(t){return this.insertChild(-1,t)},e.prototype.insertChild=function(t,e){if(e&&!this.contains(e)){var i=this._elements||[],o=e._dom;if(t<0||t>=i.length)this._dom&&o&&this._dom.appendChild(o),i.push(e);else{if(o){var r=this._elements[t]._dom;this._dom&&r&&this._dom.insertBefore(o,r)}i.splice(t,0,e)}return this._elements=i,e._parent=this,e.$_attached(this),this.invalidate(),!0}return!1},e.prototype.removeChild=function(t){if(t&&this._elements){var e=this._elements.indexOf(t);if(e>=0)return this.removeChildAt(e)===t}return!1},e.prototype.removeChildAt=function(t){if(t>=0&&t<this.childCount){var e=this._elements[t];return this._elements.splice(t,1),this._dom&&e._dom&&this._dom.removeChild(e._dom),e._parent=null,e._dirty=!1,e.$_detached(this),this.invalidate(),e}return null},e.prototype.removeLast=function(){return this._elements&&this._elements.length>0?this.removeChildAt(this._elements.length-1):null},e.prototype.clear=function(){var t=this._elements;if((t?t.length:0)>0){for(var e=0,i=t;e<i.length;e++){var o=i[e];o._parent=null,o.$_detached(this)}if(this._elements=[],this._dom)for(;this._dom.lastChild;)this._dom.removeChild(this._dom.lastChild);return this.invalidate(),!0}return!1},e.prototype.invalidate=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),t||!this._dirty){this._dirty=!0;var i=this.container;i&&i.invalidateElement(this)}if(e&&this._elements)for(var o=0,r=this._elements;o<r.length;o++){r[o].invalidate(t,!0)}},e.prototype.validate=function(){this._dirty=!1},e.prototype.invalidateLayout=function(){var t=this.container;t&&t.invalidateLayout()},e.prototype.containsInClient=function(t,e){return t>=0&&t<this._width&&e>=0&&e<this._height},e.prototype.boundsByContainer=function(t){void 0===t&&(t=null);var e=this._x,i=this._y;t&&(e+=t.x,i+=t.y);for(var o=this._parent;o&&void 0!==o._x;)e+=o._x,i+=o._y,o=o._parent;return t?new ot(e,i,t.width,t.height):new ot(e,i,this._width,this._height)},e.prototype.pointByContainer=function(t,e){for(var i=this._parent;i&&void 0!==i._x;)t+=i._x,e+=i._y,i=i._parent;return new fa(t+this._x,e+this._y)},e.prototype.containerToElement=function(t,e){for(var i=this;i;)t-=i._x,e-=i._y,i=i._parent;return new fa(t,e)},e.prototype.boundsByScreen=function(t){return void 0===t&&(t=null),t=this.boundsByContainer(t),t=this.container.toScreen(t)},e.prototype.hitTest=function(t,e){return t>=0&&t<this._width&&e>=0&&e<this._height},e.prototype.findChildAt=function(t,e,i){var o=this._elements,r=o?o.length:0;if(r>0)for(var n=r-1;n>=0;n--){var s=o[n];if(s.visible){var a=t-s._x,l=e-s._y;if((i||s._mouseEnabled)&&(s.isLayer||s.hitTest(a,l))){var h=s.findChildAt(a,l,i);if(h)return h;if(!s.isLayer&&s._mouseEnabled)return s}}}return null},e.prototype.move=function(t,e){t==this._x&&e==this._y||(this._x=t,this._y=e,this.invalidate())},e.prototype.resize=function(t,e){t==this._width&&e==this._height||(this._width=t,this._height=e,this.invalidate())},e.prototype.setBounds=function(t,e,i,o){t==this._x&&e==this._y&&i==this._width&&o==this._height||(this._x=t,this._y=e,this._width=i,this._height=o,this.sizeChanged())},e.prototype.setRect=function(t){t.x==this._x&&t.y==this._y&&t.width==this._width&&t.height==this._height||(this._x=t.x,this._y=t.y,this._width=t.width,this._height=t.height,this.sizeChanged())},e.prototype.setRectI=function(t){var e=t.x>>0,i=t.y>>0,o=t.width>>0,r=t.height>>0;e==this._x&&i==this._y&&o==this._width&&r==this._height||(this._x=e,this._y=i,this._width=o,this._height=r,this.sizeChanged())},e.prototype.draw=function(){this._dirty&&this._dom&&(this._beforeDraw(this._dom),this._doDraw(this._dom),this._dirty=!1)},e.prototype.resetSize=function(){this._dom&&this._setSizeStyle(this._dom.style)},e.prototype.setImportantStyle=function(t,e){this._dom.style.setProperty(t,e,"important")},e.prototype._createDom=function(t){return t.createElement("div")},e.prototype._initDom=function(t){var e=t.style;e.position="absolute",e.boxSizing="border-box"},e.prototype.$_attached=function(t){this._doAttached(t)},e.prototype._doAttached=function(t){},e.prototype.$_detached=function(t){this._doDetached(t)},e.prototype._doDetached=function(t){},e.prototype._setSizeStyle=function(t){t.width=this._width+"px",t.height=this._height+"px"},e.prototype._getCssDisplay=function(){return"block"},e.prototype.resetStyleName=function(){this._setClassName(this._dom)},e.prototype._setClassName=function(t){var e=this._getCssSelector();e!=this._className&&(this._className=e,(t||this._dom).className=e||"")},e.prototype.applyBounds=function(){var t=this._dom.style;t.left=this._x+"px",t.top=this._y+"px",this._setSizeStyle(t)},e.prototype._beforeDraw=function(t){this._setClassName(t);var e=t.style;e.left=this._x+"px",e.top=this._y+"px",this._setSizeStyle(e)},e.prototype._hoverChanged=function(){},e.prototype._visibleChanged=function(){},e.prototype.sizeChanged=function(){this.invalidate(),this._doSizeChanged()},e.prototype._doSizeChanged=function(){},e}(Re),ga=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"isLayer",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype._getCssSelector=function(){},e.prototype._doDraw=function(t){},e}(_a),ya=function(t){function e(e,i){void 0===i&&(i=!1);var o=t.call(this,e)||this;return o._active=i,o}return o(e,t),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},enumerable:!1,configurable:!0}),e}(ga);t.SelectionMode=void 0,(Zs=t.SelectionMode||(t.SelectionMode={})).NONE="none",Zs.SINGLE="single",Zs.EXTENDED="extended",t.SelectionStyle=void 0,(Js=t.SelectionStyle||(t.SelectionStyle={})).BLOCK="block",Js.GROUP="group",Js.ROWS="rows",Js.COLUMNS="columns",Js.SINGLE_ROW="singleRow",Js.SINGLE_COLUMN="singleColumn",Js.SINGLE="single",Js.NONE="none",t.SelectionDisplay=void 0,(Qs=t.SelectionDisplay||(t.SelectionDisplay={})).CELL="cell",Qs.CELL_AND_BORDER="cellAndBorder",Qs.MASK="mask";var ma,ba,va,wa=function(e){return e==t.SelectionStyle.SINGLE_ROW||e==t.SelectionStyle.SINGLE_COLUMN||e==t.SelectionStyle.SINGLE},Ca=function(e){var i=e&&e.style;return i==t.SelectionStyle.ROWS||i==t.SelectionStyle.SINGLE_ROW},xa=function(t){function e(e,i){var o=t.call(this)||this;return o._manager=e,o._runStyle=i,o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._manager&&this._manager.grid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"runStyle",{get:function(){return this._runStyle},enumerable:!1,configurable:!0}),e.prototype.setValues=function(t,e){var i=this.grid.dataSource,o=this._getRows(),r=this.grid,n={};if(o&&o.rows&&o.rows.length>0&&o.fields&&o.fields.length>0){for(var s=o.rows,a=0;a<s.length;a++)if(!(s[a]<0)){for(var l=[],h=0;h<o.fields.length;h++){(r.getWritable(r.getItemIndexOfRow(s[a]),r.columnByField(o.fields[h]))||e&&r.copyOptions.cutReadOnlyCell)&&l.push(o.fields[h])}l.length&&(n[s[a]]=l.slice())}i.fillValue(n,t)}},e.prototype.inflate=function(t,e){switch(t){case"left":this._inflateLeft(e);break;case"right":this._inflateRight(e);break;case"top":this._inflateTop(e);break;case"bottom":this._inflateBottom(e)}},e.prototype.getItems=function(t){void 0===t&&(t=!0);for(var e=this.grid,i=[],o=this.getBounds(),r=o.top,n=o.bottom,s=r;s<=n;s++){var a=e.getItem(s);a&&(!t||a.dataRow>=0)&&i.push(a)}return i},e.prototype.getItemIndices=function(t){void 0===t&&(t=!0);for(var e=this.grid,i=[],o=this.getBounds(),r=o.top,n=o.bottom,s=r;s<=n;s++){var a=e.getItem(s);a&&(!t||a.dataRow>=0)&&i.push(a.index)}return i},e.prototype.getRows=function(){for(var t=this.grid,e=[],i=this.getBounds(),o=i.top,r=i.bottom,n=o;n<=r;n++){var s=t.getItem(n);if(s&&s.dataRow>=0){var a=s.dataRow;a>=0&&e.push(a)}}return e},e.prototype._resized=function(){this._manager&&this._manager.$_itemResized(this)},e.prototype.toProxy=function(){var t=this.grid,e=this.getBounds(),i=t.getItem(e.r1),o=t.getItem(e.r2);return{style:this.style,startItem:e.r1,startRow:i?i.dataRow:-1,startColumn:e.c1.firstColumn.name,endItem:e.r2,endRow:o?o.dataRow:-1,endColumn:e.c2.lastColumn.name,startLayout:e.c1,endLayout:e.c2}},Object.defineProperty(e.prototype,"startItem",{get:function(){return this.getBounds().r1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startRow",{get:function(){var t=this.grid.getItem(this.getBounds().r1);return t?t.dataRow:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startColumn",{get:function(){return this.getBounds().c1.firstColumn.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endItem",{get:function(){return this.getBounds().r2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endRow",{get:function(){var t=this.grid.getItem(this.getBounds().r2);return t?t.dataRow:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endColumn",{get:function(){return this.getBounds().c2.firstColumn.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startLayout",{get:function(){return this.getBounds().c1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endLayout",{get:function(){return this.getBounds().c2},enumerable:!1,configurable:!0}),e}(Lt),Ia=function(e){function i(t){var i=e.call(this)||this;return i._items=[],i._locked=!1,i._grid=t,i}return o(i,e),i.prototype._doDispose=function(){this._grid=null,this._items=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exclusiveMode",{get:function(){return this._grid.displayOptions.selectionMode!==t.SelectionMode.EXTENDED},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"single",{get:function(){return 1==this._items.length&&this._items[0].single},enumerable:!1,configurable:!0}),i.prototype.lock=function(){this._locked=!0},i.prototype.unlock=function(){this._locked=!1},i.prototype.getItem=function(t){return this._items[t]},i.prototype.getItemByIndex=function(t,e){for(var i=this._items.length-1;i>=0;i--){var o=this._items[i];if((!e||o instanceof e)&&o.contains(t.itemIndex,t.layout))return o}},i.prototype.getItems=function(){return this._items.slice()},i.prototype.lastItem=function(){return this._items[this._items.length-1]},i.prototype.add=function(e,i,o,r){if(this._locked)return null;if(o==t.SelectionStyle.NONE)return this.clear(!0),null;this.exclusiveMode&&this.clear(!0);var n=null;switch(o){case t.SelectionStyle.COLUMNS:n=new Oa(this,o,e.layout.first,i.layout.last);break;case t.SelectionStyle.SINGLE_COLUMN:n=new Oa(this,o,e.layout.first,e.layout.first);break;case t.SelectionStyle.ROWS:n=new Ea(this,o,e.itemIndex,i.itemIndex);break;case t.SelectionStyle.SINGLE_ROW:n=new Ea(this,o,e.itemIndex,e.itemIndex);break;case t.SelectionStyle.BLOCK:n=new Sa(this,o,e,i);break;case t.SelectionStyle.GROUP:(e=e.clone()).layout=e.layout.root.first,(i=i.clone()).layout=i.layout.root.last.source,n=new Sa(this,o,e,i);break;case t.SelectionStyle.SINGLE:n=new Sa(this,o,e,e)}return n&&this.$_addItem(n,r)},i.prototype.remove=function(t){if(!this._locked){var e=this._items.indexOf(t);e>=0&&(this._items.splice(e,1),this.fireEvent(i.REMOVED,t),this._changed())}},i.prototype.clear=function(t){this._locked||this._items.length>0&&(this._items.length=0,this.fireEvent(i.CLEARED,t))},i.prototype.selectBlock=function(e,i){i&&this.clear(!0),this.containsCell(e)||this.$_addItem(new Sa(this,t.SelectionStyle.BLOCK,e,e,!0),!0)},i.prototype.selectRow=function(e,i){i&&this.clear(!0),this.containsItem(e,Ea)||this.$_addItem(new Ea(this,t.SelectionStyle.ROWS,e,e),!0)},i.prototype.containsItem=function(t,e){for(var i=0,o=this._items.length;i<o;i++){var r=this._items[i];if((!e||r instanceof e)&&r.containsItem(t))return!0}return!1},i.prototype.containsLayout=function(t,e){for(var i=0,o=this._items.length;i<o;i++){var r=this._items[i];if((!e||r instanceof e)&&r.containsLayout(t))return!0}return!1},i.prototype.containsCell=function(t){return this.contains(t.itemIndex,t.layout)},i.prototype.contains=function(t,e){for(var i=0,o=this._items.length;i<o;i++)if(this._items[i].contains(t,e))return!0;return!1},i.prototype.normalize=function(){},i.prototype.canResize=function(t){return t&&!wa(t._runStyle)},i.prototype._changed=function(t,e){void 0===e&&(e=!0),this.fireEvent(i.CHANGED,t,e)},i.prototype.$_addItem=function(t,e){if(!t)throw new Error("item is null");return this._items.indexOf(t)<0&&(this._items.push(t),this.fireEvent(i.ADDED,t,e),this._changed(t,e)),t},i.prototype.$_itemResized=function(t){this.fireEvent(i.RESIZED,t),this._changed(t)},i.prototype.$_ended=function(t){this.fireEvent(i.ENDED,t)},i.CHANGED="onSelectionChanged",i.ADDED="onSelectionAdded",i.REMOVED="onSelectionRemoved",i.CLEARED="onSelectionCleared",i.RESIZED="onSelectionResized",i.ENDED="onSelectionEnded",i}(Re),Sa=function(e){function i(t,i,o,r,n){var s=e.call(this,t,i)||this;return s._startIndex=o.clone(),s._endIndex=r.clone(),s.move=n,Rt.isDebugging()&&s._startIndex.layout,Rt.isDebugging()&&s._endIndex.layout,s}return o(i,e),Object.defineProperty(i.prototype,"startIndex",{get:function(){return this._startIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"endIndex",{get:function(){return this._endIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._runStyle||t.SelectionStyle.BLOCK},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"single",{get:function(){return Ds.areEquals(this._startIndex,this._endIndex)},enumerable:!1,configurable:!0}),i.prototype.getBounds=function(){var e=this.grid;this._startIndex.normalize(e),this._endIndex.normalize(e);var i=this._startIndex.clone(),o=this._endIndex.clone();this._runStyle===t.SelectionStyle.GROUP&&(i.layout.root.vindex>o.layout.root.vindex&&(i=this._endIndex.clone(),o=this._startIndex.clone()),i.layout=i.layout.root.first,o.layout=o.layout.root.last);if(Ds.areEquals(i,o))return Ns.create(i);var r=e.activeCellLayout._dataCells,n=i.layout,s=o.layout,a=void 0,l=void 0;return n.col<=s.col?(a=r[0][n.col],l=r[r.length-1][s.col]):(a=r[0][s.col],l=r[r.length-1][n.col]),Ns.createRange(i.itemIndex,a,o.itemIndex,l)},i.prototype.containsItem=function(t){var e=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),i=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex);return t>=e&&t<=i},i.prototype.containsLayout=function(t){if(!t)return!1;if(this.single)return this._startIndex.layout===t;var e=t.distance,i=this._startIndex.layout.distance,o=this._endIndex.layout.distance;return i<o?e>=i&&e<=o:e>=o&&e<=i},i.prototype.contains=function(t,e){return this.getBounds().contains(t,e)},i.prototype.resizeTo=function(t){var e=this.grid,i=e.displayOptions;e.isValid(t)&&!Ds.areEquals(t,this._endIndex)&&(i.selectAtSingleRow&&(t.itemIndex=this.startItem),this._endIndex.assign(t),this._resized())},i.prototype.moveRow=function(t){this._startIndex.itemIndex+=t,this._endIndex.itemIndex+=t},i.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},i.prototype.mergeWith=function(t){},i.prototype.getData=function(t){if(void 0===t&&(t=-1),0==t)return null;var e,i=this.grid,o=this.getBounds(),r=this.single?[o.c1.firstColumn]:i.collectDataColumns(o.c1,o.c2);if(!r||(e=r.length)<1)return null;for(var n=o.r1,s=o.r2,a=[],l=n;l<=s;l++){var h=i.getItem(l);if(h&&h.isDataRow){var u={};u.__rowId=h.dataRow;for(var c=0;c<e;c++){var d=r[c];u[d.fieldName]=h.getData(d.dataIndex)}if(a.push(u),t>0&&a.length==t)break}}return a},i.prototype._inflateLeft=function(t){this._startIndex.layout.distance<=this._endIndex.layout.distance?t.layout!==this._startIndex.layout&&(this._startIndex.layout=t.layout,this._resized()):t.layout!==this._endIndex.layout&&(this._endIndex.layout=t.layout,this._resized())},i.prototype._inflateRight=function(t){this._startIndex.layout.distance>this._endIndex.layout.distance?t.layout!==this._startIndex.layout&&(this._startIndex.layout=t.layout,this._resized()):t.layout!==this._endIndex.layout&&(this._endIndex.layout=t.layout,this._resized())},i.prototype._inflateTop=function(t){var e=this.grid,i=Math.max(0,Math.min(e.itemCount-1,t.itemIndex));this._startIndex.itemIndex<=this._endIndex.itemIndex?i!==this._startIndex.itemIndex&&(this._startIndex.itemIndex=i,this._resized()):i!==this._endIndex.itemIndex&&(this._endIndex.itemIndex=i,this._resized())},i.prototype._inflateBottom=function(t){var e=this.grid,i=Math.max(0,Math.min(e.itemCount-1,t.itemIndex));this._startIndex.itemIndex>this._endIndex.itemIndex?i!==this._startIndex.itemIndex&&(this._startIndex.itemIndex=i,this._resized()):i!==this._endIndex.itemIndex&&(this._endIndex.itemIndex=i,this._resized())},i.prototype._getRows=function(){var t=this.grid,e=t.collectDataColumns(this._startIndex.layout,this._endIndex.layout);if(e&&!(e.length<1)){for(var i=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),o=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex),r=[],n=[],s=i;s<=o;s++)r.push(t.getItem(s).dataRow);for(var a=0,l=e;a<l.length;a++){var h=l[a];n.push(h.dataIndex)}return{rows:r,fields:n}}},i.prototype.toString=function(){return this._startIndex+" ~ "+this._endIndex},i}(xa),Ea=function(e){function i(t,i,o,r){var n=e.call(this,t,i)||this;return n._startRow=o,n._endRow=r,n}return o(i,e),Object.defineProperty(i.prototype,"startRow",{get:function(){return this._startRow},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"endRow",{get:function(){return this._endRow},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topRow",{get:function(){return Math.min(this._startRow,this._endRow)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottomRow",{get:function(){return Math.max(this._startRow,this._endRow)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._runStyle||t.SelectionStyle.ROWS},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"single",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.getBounds=function(){var t=this.grid,e=t.itemCount;return this._startRow=Math.max(0,Math.min(e-1,this._startRow)),this._endRow=Math.max(0,Math.min(e-1,this._endRow)),this._startRow<=this._endRow?Ns.createRange(this._startRow,t.activeCellLayout.first,this._endRow,t.activeCellLayout.last):Ns.createRange(this._endRow,t.activeCellLayout.first,this._startRow,t.activeCellLayout.last)},i.prototype.contains=function(t,e){return this.containsItem(t)},i.prototype.containsItem=function(t){return t>=this.topRow&&t<=this.bottomRow},i.prototype.containsLayout=function(t){return!0},i.prototype.resizeTo=function(t){var e=Math.max(0,t.itemIndex);e!=this._endRow&&(this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},i.prototype.moveRow=function(t){this._startRow+=t,this._endRow+=t},i.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},i.prototype.mergeWith=function(t){},i.prototype.getData=function(t){if(void 0===t&&(t=-1),0==t)return null;var e=this.grid,i=e.collectDataColumns(e.getVisibleLayout(0),e.getVisibleLayout(e.visibleLayoutCount-1));if(!i)return null;var o=i.length;if(o<1)return null;for(var r=Math.max(0,Math.min(this._startRow,this._endRow)),n=Math.min(e.itemCount-1,Math.max(this._startRow,this._endRow)),s=[],a=r;a<=n;a++){var l=e.getItem(a);if(l&&l.isDataRow){var h={};h.__rowId=l.dataRow;for(var u=0;u<o;u++){var c=i[u];h[c.fieldName]=l.getData(c.dataIndex)}if(s.push(h),t>0&&s.length==t)break}}return s},i.prototype._inflateLeft=function(t){},i.prototype._inflateRight=function(t){},i.prototype._inflateTop=function(t){var e=t.itemIndex;e!=this.topRow&&(this._startRow<=this._endRow?this._startRow=Math.max(0,Math.min(this.grid.itemCount-1,e)):this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},i.prototype._inflateBottom=function(t){var e=t.itemIndex;e!=this.bottomRow&&(this._startRow>this._endRow?this._startRow=Math.max(0,Math.min(this.grid.itemCount-1,e)):this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},i.prototype._getRows=function(){var t=this.grid,e=t.activeCellLayout,i=t.collectDataColumns(e.first,e.last);if(i&&!(i.length<1)){for(var o=Math.max(0,Math.min(this._startRow,this._endRow)),r=Math.min(t.itemCount-1,Math.max(this._startRow,this._endRow)),n=[],s=[],a=o;a<=r;a++)n.push(t.getItem(a).dataRow);for(var l=0,h=i;l<h.length;l++){var u=h[l];s.push(u.dataIndex)}return{rows:n,fields:s}}},i}(xa),Oa=function(e){function i(t,i,o,r){var n=e.call(this,t,i)||this;return n._startLayout=o,n._endLayout=r,n}return o(i,e),Object.defineProperty(i.prototype,"startLayout",{get:function(){return this._startLayout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"endLayout",{get:function(){return this._endLayout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftLayout",{get:function(){return this._startLayout.col<=this._endLayout.col?this._startLayout:this._endLayout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightLayout",{get:function(){return this._startLayout.col>this._endLayout.col?this._startLayout:this._endLayout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._runStyle||t.SelectionStyle.COLUMNS},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"single",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.getBounds=function(){var t=this.grid.activeCellLayout,e=this._startLayout,i=this._endLayout;if(e.col>i.col){var o=e;e=i,i=o}e=t.getTopOf(e),i=t.getBottomOf(i,!0);var r=this.grid.itemCount-1;return Ns.createRange(0,e,r,i)},i.prototype.contains=function(t,e){return this.containsLayout(e)},i.prototype.containsItem=function(t){return!0},i.prototype.containsLayout=function(t){return t.col>=this.leftLayout.col&&t.col<=this.rightLayout.col},i.prototype.resizeTo=function(t){t.layout!==this._endLayout&&(this._endLayout=t.layout,this._resized())},i.prototype.moveRow=function(t){},i.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},i.prototype.mergeWith=function(t){},i.prototype.getData=function(t){if(void 0===t&&(t=-1),0==t)return null;var e=this.grid,i=e.collectDataColumns(this._startLayout,this._endLayout);if(!i)return null;for(var o=e.itemCount,r=[],n=0;n<o;n++){var s=e.getItem(n);if(s&&s.isDataRow){var a={};a.__rowId=s.dataRow;for(var l=0,h=i.length;l<h;l++)a[i[l].fieldName]=s.getData(i[l].dataIndex);if(r.push(a),t>0&&r.length==t)break}}return r},i.prototype._inflateLeft=function(t){var e=t.layout;e!==this.leftLayout&&(this._startLayout.distance<=this._endLayout.distance?this._startLayout=e:this._endLayout=e,this._resized())},i.prototype._inflateRight=function(t){var e=t.layout;e!==this.rightLayout&&(this._startLayout.distance>this._endLayout.distance?this._startLayout=e:this._endLayout=e,this._resized())},i.prototype._inflateTop=function(t){},i.prototype._inflateBottom=function(t){},i.prototype._getRows=function(){var t=this.grid,e=t.collectDataColumns(this._startLayout,this._endLayout);if(e){for(var i=t.itemCount,o=[],r=[],n=0;n<i;n++)o.push(t.getItem(n).dataRow);for(var s=0,a=e;s<a.length;s++){var l=a[s];r.push(l.dataIndex)}return{rows:o,fields:r}}},i}(xa),Ra=function(t){function e(e){return t.call(this,e,"selectionView")||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-selection"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(ga),Pa=function(t){function e(e){var i=t.call(this,e,"selectionMask")||this;return i._toped=!1,i._bottomed=!1,i._lefted=!1,i._righted=!1,i._view=new Ra(e),i.addChild(i._view),i}return o(e,t),Object.defineProperty(e.prototype,"item",{get:function(){return this._item},enumerable:!1,configurable:!0}),e.prototype.prepare=function(){this._toped=this._bottomed=this._lefted=this._righted=!1},e.prototype.updateElement=function(){var t=0,e=0,i=this.width,o=this.height;this._lefted&&(t-=10,i+=10),this._righted&&(i+=10),this._toped&&(e-=10,o+=10),this._bottomed&&(o+=10),this._view.setBounds(t,e,i,o)},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("overflow","hidden"),this.setImportantStyle("pointer-events","none")},e}(ga),ka=function(t){function e(e,i){var o=t.call(this,e.doc,i)||this;return o._pool=[],o._views={},o._rangeRect=new ot,o._grid=e,o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.addView=function(t){var e=t.$_hash,i=this._views[e];return i||(i=this._pool.pop()||new Pa(this.doc),this._views[e]=i),i._item=t,this.addChild(i),i},e.prototype.removeView=function(t){var e=t.$_hash,i=this._views[e];i&&(this.removeChild(i),this._pool.push(i),delete this._views[e])},e.prototype.clearViews=function(){for(var t in this._views){var e=this._views[t];this.removeChild(e),this._pool.push(e)}this._views={}},e.prototype.layout=function(){var t=this._grid.layoutManager,e=new ot,i=Object.keys(this._views);for(var o in this._views){var r=this._views[o],n=r.item,s=!1;if(!(1===i.length&&n.single&&Ds.areEquals(n._startIndex,this._grid.focusedIndex,!0))&&(r.prepare(),n instanceof Ea?(s=this.$_getSelectionRowsRect(t,n,r,e),r._lefted=!0,r._righted=!0):n instanceof Oa?(s=this.$_getSelectionColumnsRect(t,n,r,e),r._toped=!0,r._bottomed=!0):s=this.$_getSelectionRangeRect(t,n,r,e),s)){var a=t.contentBounds.y+t.footerBounds.y;e.bottom>a&&(r._bottomed=!0,e.bottom=a)}r.visible=s,r.visible&&(r.setRectI(e),r.updateElement(),r.invalidate())}},e.prototype.$_getSelectionRowsRect=function(t,e,i,o){var r,n,s=this._grid,a=e.getBounds(),l=a.r1,h=a.r2,u=t.itemCount,c=t.fixedItemCount,d=s.topIndex;if(c>0){if(l>=d+c+u||h<0||l>=c&&h<d+c)return!1;var p=t.fixedHeight+s.fixedOptions.rowBarHeight;l<c?r=t.getTableItemBounds(Math.max(0,l)):((r=t.getTableItemBounds(Math.max(0,l-d))).y<p&&(i._toped=!0),r.y=Math.max(r.y,p)),h<c?n=t.getTableItemBounds(h):l<=c&&h<c+d?n=t.getTableItemBounds(Math.min(c+d,c)-1):h>=d?(n=t.getTableItemBounds(Math.min(t.itemCount+c-1,h-d))).y=Math.max(n.y,p):n=r}else{if(!(u>0))return!1;if(l>=d+u||h<d)return!1;p=l-d;r=t.getTableItemBounds(Math.max(0,p)),n=t.getTableItemBounds(Math.min(u-1,h-d)),p<0&&(i._toped=!0)}return o.copy(r.union(n)),o.offset(t.fixedContentBounds.x,t.contentBounds.y+t.bodyBounds.y),o.right=t.rightLayoutCount>0?t.rightContentBounds.right:t.contentBounds.right,!0},e.prototype.$_getSelectionColumnsRect=function(t,e,i,o,r){var n=this._grid,s=e.getBounds(),a=t.fixedLayoutCount,l=t.fixedCellCount,h=t.rightLayoutCount,u=s.c1.col,c=s.c2.col,d=n.fixedOptions.rightBarWidth,p=t.getDataRect(s.c1),f=t.getDataRect(s.c2),_=a>0&&u<l?t.getDataRect(t.getLayout(a-1)):void 0;if(o.left=a>0&&_?p.x:Math.min(p.x,f.x),o.right=Math.max(p.right,f.right),o.y=t.contentBounds.y+t.headerBounds.bottom+t.summaryBounds.height,o.height=Math.min(t.dataBounds.height,t.footerBounds.y),r&&r.copy(o),u>=l){var g=t.fixedContentBounds.right;o.x<g&&(i._lefted=!0,o.left=Math.max(o.left,g)),o.right<g&&(i._righted=!0,o.width=0)}if(_&&c>=l){var y=t.getDataRect(t.getLayout(a-1));o.right<y.right&&(o.right=y.right)}if(h>0){var m=t.rightFirstCell,b=t.rightContentBounds;o.left>=b.left+d?u>=m?o.width=f.right-p.left:c>=m?(o.width=Math.max(0,f.right-b.left-(f.left-b.left-d==0?d:0)),o.left=b.left+d):o.width=0:c<m&&o.right>=b.left&&(o.right=Math.min(o.right,b.x),i._righted=!0)}return!0},e.prototype.$_getSelectionRangeRect=function(t,e,i,o,r){var n=this._rangeRect;return!!this.$_getSelectionRowsRect(t,e,i,n)&&(o.y=n.y,o.bottom=n.bottom,this.$_getSelectionColumnsRect(t,e,i,n,r),o.x=n.x,o.right=n.right,r&&(r.y=o.y,r.height=o.height),!0)},e}(ga),Ta=function(){function t(e){this._format=e,this._reader=Mt.getReader(e),this._writer=Ge.getFormatter(e),t.validateDateFormat(e)}return t.getConverter=function(e){var i=t.Formatters;if(i[e])return i[e];var o=new t(e);return i[e]=o},t.validateDateFormat=function(t){if(t=t&&t.trim()){var e=t.indexOf("a")>=0||t.indexOf("A")>=0;if(e&&t.indexOf("H")>=0)throw"Invalid datetime read format - 'H'와 'a'가 같이 존재할 수 없습니다: "+t;if(t.indexOf("h")>=0&&!e)throw"Invalid datetime read format - 'h'가 있으면 'a'가 반드시 있어야 합니다: "+t}else;},Object.defineProperty(t.prototype,"format",{get:function(){return this._format},enumerable:!1,configurable:!0}),t.prototype.getDate=function(t){return this._reader.toDate(t,!0)},t.prototype.getDateNull=function(t){try{return this.getDate(t)}catch(e){return Rt.log("getDateNull Fail string => ".concat(t)),null}},t.prototype.getText=function(t){return this._writer.getText(t)},t.DEFAULT_FORMAT="yyyy/MM/dd",t.Formatters={},t.Default=t.getConverter(t.DEFAULT_FORMAT),t}(),Da=Rt.isSafari?1:0,Ma=function(e){function i(o,r){var n=e.call(this)||this;if(n._textCase=t.TextInputCase.DEFAULT,n._readOnly=!1,n._textReadOnly=!1,n._allowEmpty=!1,n._isMobile=Rt.isMobile(),n._isTablet=Rt.isTablet(),n._started=!1,n._dateConverter=Ta.Default,n._boolConverter=Tt.Default,n._cellBounds=new ot,n._checkHangeul=!1,n._composing=!1,n._grid=o,n._options=o.editorOptions,n._parentElement=r,n._editor=n._createEditor(r),n._editor.className=i.EDITOR_CSS+n._getInputSelector(),n._container&&(n._container.className=i.CONTAINER_CSS),n._editor.$_owner=n,n._editIndex=o.getIndex(),n._editor){var s=o.container;s.$_addListener(n._editor,"focus",function(t){this._grid.$_setEditFocused(!0,t)}.bind(n),!1),s.$_addListener(n._editor,"focusin",function(t){this._grid.$_setEditFocused(!0,t)}.bind(n),!1),s.$_addListener(n._editor,"blur",function(t){this._grid.$_setEditFocused(!1,t)}.bind(n),!1),s.$_addListener(n._editor,"focusout",function(t){this._grid.$_setEditFocused(!1,t)}.bind(n),!1)}return n.setVisible(!1,!0),n.$_setEditorId(n._editor),n}return o(i,e),i.$_copyProc=function(t,e){if(!t.isDisabled()){var i=t._grid;t.editing||i.copyToClipboard(e,null)}},i.copyCutProc=function(t,e){e.preventDefault();var i=t._editor,o=St(t._editor);return 67==e.keyCode||45==e.keyCode?(o.execCommand("copy"),!0):88==e.keyCode&&(i.value="cut",i.setSelectionRange(0,3),o.execCommand("cut"),i.value="",!0)},i.prototype._copyHandler=function(t){i.$_copyProc(this,t)},i.prototype._pasteHandler=function(t){if(!this.isDisabled()){var e=this._grid.pasteOptions;try{var i=void 0,o=(t.originalEvent||t).clipboardData;if(null!=(i=o?o.getData("text/plain"):window.clipboardData.getData("text"))){if(this.visible)return this._doPaste(t,i),this._doChanged(),void t.stopPropagation();t.preventDefault(),this._grid.pasteFromClipboard(i,t)}}catch(t){if(t instanceof Dn){if(e.throwValidationError)throw t}else if(t instanceof Tn)alert(t.message);else if(t)throw t}}},i.prototype._doPaste=function(t,e){},i.initDefault=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=Rt.assign.apply(Rt,a([{}],e,!1));t.assignFrom(o),o=null},i.getEditorType=function(t){return"string"==typeof t?t:t?t.type:"line"},i.getEditorType2=function(t,e){return"string"==typeof t?t:t&&t.type?t.type:"string"==typeof e?e:e&&e.type?e.type:"line"},i.prototype._doDispose=function(){this.unprepare(),this._editor=Rt.detach(this._editor),this._container=Rt.detach(this._container),this._container=null,this._grid=null,this._controller=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"native",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonCount",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasList",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"emptyValue",{get:function(){return this._emptyValue},set:function(t){t!=this._emptyValue&&(this._emptyValue=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textCase",{get:function(){return this._textCase},set:function(t){t!=this._textCase&&(this._textCase=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._dateConverter=t?Ta.getConverter(t):Ta.Default)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"todayChar",{get:function(){return this._todayChar},set:function(t){t!=this._todayChar&&(this._todayChar=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nowChar",{get:function(){return this._nowChar},set:function(t){t!=this._nowChar&&(this._nowChar=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,t?(this._saveBoolConverter||(this._saveBoolConverter=new Tt(t)),this._saveBoolConverter.format=t,this._boolConverter=this._saveBoolConverter):this._boolConverter=Tt.Default)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editor",{get:function(){return this._editor},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return parseInt(this._container.style.width)>Da&&parseInt(this._container.style.height)>Da},enumerable:!1,configurable:!0}),i.prototype.setVisible=function(t,e){void 0===e&&(e=!1);var i=e?!t:this.visible;if(!t&&(this._container.style.width=Da+"px",this._container.style.height=Da+"px",Rt.isMobile())){var o=this._grid;if(o){var r=o.container._containerDom,n=St(this._container);this._editor===n.activeElement&&r&&r.focus({preventScroll:!0})}else this._editor.blur()}t!=i&&this._doVisibleChanged(t)},i.prototype._doVisibleChanged=function(t){this.setEditorZIndex(t)},Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},set:function(t){var e=It(this._container);this._editor instanceof e.HTMLInputElement&&(this._editor.readOnly=this._readOnly=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textReadOnly",{get:function(){return this._textReadOnly},enumerable:!1,configurable:!0}),i.prototype._setTextReadOnly=function(t){t!=this._textReadOnly&&(this._textReadOnly=t,this._changed())},Object.defineProperty(i.prototype,"allowEmpty",{get:function(){return this._allowEmpty},enumerable:!1,configurable:!0}),i.prototype._setAllowEmpty=function(t){t!=this._allowEmpty&&(this._allowEmpty=t,this._changed())},Object.defineProperty(i.prototype,"editing",{get:function(){return this._started},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editIndex",{get:function(){return this._editIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._editor.value},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.hasButton=function(t,e){return!1},i.prototype.applyOptions=function(t){t&&this.assignFrom(t)},i.prototype.setEditIndex=function(t){this._editIndex.assign(t)},i.prototype.setController=function(t){this._controller=t},i.prototype.prepare=function(){!this.native&&this._editor&&this._editor.removeAttribute("type")},i.prototype.unprepare=function(){},i.prototype.beginEdit=function(t,e){this._started||(this._started=this._doBeginEdit())&&(t&&this.clear(),e&&this.selectAll())},i.prototype.endEdit=function(){this._started&&(this._doEndEdit(),this._started=!1)},i.prototype.isEdited=function(){return!1},i.prototype.isDisabled=function(){return!this._grid||this._grid.container.disabled},i.prototype.caretToLast=function(){},i.prototype.commit=function(){this._doCommit()},i.prototype.setReadOnly=function(t){this._editor.readOnly=this._readOnly=t},i.prototype.getEditValue=function(t,e){},i.prototype.getEditListItem=function(){},i.prototype.setEditValue=function(t){this._oldValue=t},i.prototype.setCellEditValue=function(t,e){!this.readOnly&&this._requestStart(e)&&(this.setEditValue(t),this._doChanged())},i.prototype.getEditText=function(){return""},i.prototype.selectAll=function(t){void 0===t&&(t=!1),this._grid.$_editFocused&&(!t&&Rt.isMobile()||this._selectAll())},i.prototype.clear=function(){var t=It(this._container);this._editor instanceof t.HTMLInputElement&&(this._editor.value="")},i.prototype.setFocus=function(){var t=!Rt.isMobile();this._grid.accessibility&&this.attach(this._grid.getEditContainer(this.editIndex)),!this._grid.handler._draggable&&this._editor.focus({preventScroll:t})},i.prototype.setEditorTitle=function(t){},i.prototype.setBounds=function(t,e,i,o,r){},i.prototype.setCellBounds=function(t,e,i,o){this._cellBounds.set(t,e,i,o)},i.prototype.closeList=function(t){},i.prototype.dropDownList=function(t){},i.prototype.buttonClicked=function(t,e){!this.listing&&this.dropDownList(!1)},i.prototype.buttonDown=function(t,e){},i.prototype.buttonUp=function(t,e){},i.prototype.skipMaskChar=function(t){return!1},i.prototype.setButtonStyle=function(t,e,i,o,r){return!1},i.prototype.attach=function(t){Rt.addChild(t,this._container)},i.prototype.detach=function(){Rt.detach(this._container)},i.prototype.setInert=function(t){var e=this._container;t?(this._inertTimer&&clearTimeout(this._inertTimer),e.removeAttribute("inert"),this.editor.removeAttribute("aria-hidden")):(this._inertTimer&&clearTimeout(this._inertTimer),this._inertTimer=setTimeout((function(){e.setAttribute("inert","")}),0),this.editor.setAttribute("aria-hidden","true"))},i.prototype.initOptions=function(){this._emptyValue=void 0,this.booleanFormat=null,this._todayChar=null,this._nowChar=null,this.datetimeFormat=null,this._textCase=t.TextInputCase.DEFAULT,this._checkHangeul=!1,this._composing=!1},i.prototype.$_setEditorId=function(t){},i.prototype._changed=function(){},i.prototype.$_setController=function(t){this._controller=t},i.prototype._editField=function(){return this._grid.dataSource?this._grid.dataSource.getField(this._editIndex.dataField):null},i.prototype._isDateEditor=function(){return!1},i.prototype._requestStart=function(t){return this._started?this._started:(this.selectAll(),this._controller.onEditorStart(this))},i.prototype._valToStr=function(e){var i=this.editIndex,o="";try{if(void 0!==e||this._mask){var r=i.grid.dataSource.getField(i.dataField);if(r)switch(r.dataType){case t.ValueType.DATETIME:e&&(o=this._dateConverter.getText(e)),this._mask&&(o=this._mask.writeBuffer(o));break;case t.ValueType.BOOLEAN:o=this._boolConverter.toText(e);break;case t.ValueType.NUMBER:isNaN(e)||(o=Rt.toStr(e));break;case t.ValueType.OBJECT:var n=i.column._objectKey||r.objectKey;e&&(o=n?e[n]:null!=e&&"object"==typeof e?JSON.stringify(e):"");break;default:o=this._mask?this._mask.writeBuffer(e):e}else o=e}}catch(t){o=e}return null==o?"":o},i.prototype._strToVal=function(e){e=Rt.toStr(e);var i=this._editIndex,o=i.dataColumn&&this._textCase==t.TextInputCase.DEFAULT?i.dataColumn.textInputCase:this._textCase;try{var r=i.grid.dataSource.getField(i.dataField);if(r){var n=r.dataType;if(n==t.ValueType.DATETIME||e&&this._isDateEditor()&&n==t.ValueType.TEXT){var s=n==t.ValueType.DATETIME,a=null;return e&&e==this._nowChar&&(a=new Date),!a&&e&&e==this._todayChar&&(a=new Date).setHours(0,0,0,0),a||(this._mask&&(e=this._mask.getStripValue()),a=this._dateConverter.getDate(e)),s?!a||isNaN(a.getFullYear())?void 0:a:a?this._dateConverter.getText(a):void 0}if(n==t.ValueType.BOOLEAN)return this._boolConverter.toBoolEx(e);if(n==t.ValueType.NUMBER)return parseFloat(e);n==t.ValueType.TEXT&&this._mask&&(e=this._mask.getStripValue())}return o===t.TextInputCase.UPPER?e?e.toLocaleUpperCase():e:o===t.TextInputCase.LOWER&&e?e.toLocaleLowerCase():e}catch(t){return}},i.prototype._dispatchKeyDown=function(t){return this._controller,this._controller.onEditorKeyDown(this,t)},i.prototype._dispatchKeyPress=function(t){return this._controller,this._controller.onEditorKeyPress(this,t)},i.prototype._dispatchKeyUp=function(t){return this._controller,this._controller.onEditorKeyUp(this,t)},i.prototype._dispatchChange=function(){this._controller.onEditorChange(this)},i.prototype._dispatchSearch=function(t){this._controller.onEditorSearch(this,t)},i.prototype._dispatchSearchCellButtonClick=function(t){return this._controller.onSearchCellButtonClick(this,t)},i.prototype._dispatchCommit=function(){this._controller.onEditorCommit(this)},i.prototype._sendToParent=function(t,e,i){void 0===e&&(e=void 0);try{var o=Rt.ctrlKey(t);if(2==e){if(this._dispatchKeyPress(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0}else if(3==e){if(this._dispatchKeyUp(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0;try{var r=this._controller._grid,n=r.editOptions;if(n.maxLengthToNextCell){var s=n.skipReadOnly,a=r.activeTool,l=this.maxLength,h=this.editIndex.clone(),u=Rt.included(t.keyCode,38,33,40,34,113,9,13);if(!this._checkHangeul&&!u&&!o&&!t.altKey&&r&&r.isEditing(h)&&l>0&&!this._composing&&t.keyCode>47){var c=this._mask?this._mask.getStripValue():this._editor.value;if(this instanceof ja&&this.maxLengthExceptComma){var d=this.getEditValue();isNaN(d)&&null!=d||(c=String(d))}if(c&&c.length>=l)return r.getBodyViewAt(h).spanRight(r.layoutManager,h),h.right(),s&&a._checkReadOnly(h)&&(a._skipReadOnly(h,1)||(h=this.editIndex.clone())),Ds.areEquals(h,this.editIndex)||a.setFocused(h,!0,!0),!0}}}catch(t){if(t instanceof Dn)throw t;return!0}}else if(this._dispatchKeyDown(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0;return!1}finally{}},i.Unselected={},i.InvalidFormat={},i.EDITOR_CSS="rg-editor ",i.CONTAINER_CSS="rg-editor-container",i}(Re),Fa=function(){function t(t,e){this._includedFormat=!1,this._showInvalidFormatMessage=!0,this._overwrite=!1,this._allowEmpty=!1,this._restrictNull=!1,this._definitions={9:/[0-9 ]/,0:/[\d]/,a:/[A-Za-z]/,"*":/[A-Za-z0-9]/},this._tests=null,this._defBuffer=[],this._editor=t,e&&this.setOptions(e)}return t.prototype.dispose=function(){return this._definitions=null,this._tests=null,this._editor._editor&&(this._editor._editor.onclick=null),this._editor=null,null},Object.defineProperty(t.prototype,"includedFormat",{get:function(){return this._includedFormat},set:function(t){t!=this._includedFormat&&(this._includedFormat=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeHolder",{get:function(){return this._placeHolder},set:function(t){t!=this._placeHolder&&(this._placeHolder=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"editMask",{get:function(){return this._editMask},set:function(t){t!=this._editMask&&(this._editMask=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definitions",{get:function(){return this._definitions},set:function(t){t!=this._definitions&&(this._definitions=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"invalidFormatMessage",{get:function(){return this._invalidFormatMessage},set:function(t){t!=this._invalidFormatMessage&&(this._invalidFormatMessage=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showInvalidFormatMessage",{get:function(){return this._showInvalidFormatMessage},set:function(t){t!=this._showInvalidFormatMessage&&(this._showInvalidFormatMessage=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"overWrite",{get:function(){return this._overwrite},set:function(t){t!=this._overwrite&&(this._overwrite=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowEmpty",{get:function(){return this._allowEmpty},set:function(t){t!=this._allowEmpty&&(this._allowEmpty=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"restrictNull",{get:function(){return this._restrictNull},set:function(t){t!=this._restrictNull&&(this._restrictNull=t,this._changed())},enumerable:!1,configurable:!0}),t.prototype.clickHandler=function(t){this.restrictNull&&this._moveCaret()},t.prototype.clearBuffer=function(t,e){t=arguments.length>0?t:0,e=arguments.length>1?e:this._tests.length;for(var i=t;i<e;i++)this._buffer[i]=this.$_getPlaceHolder(i),this._defBuffer[i]=""},t.prototype.writeBuffer=function(t,e){if(void 0===e&&(e=!1),t){e&&this.clearBuffer();for(var i=0,o=0,r=this._tests.length;i<r;i++)if(this._tests[i]&&this._tests[i]instanceof RegExp)for(var n=void 0;n=t[o++];)if(!this._editor.skipMaskChar(n)&&this._tests[i].test(n)){this._buffer[i]=n,this._defBuffer[i]=n;break}}return this._buffer&&this._buffer.join("")},t.prototype.getStripValue=function(){var t=[],e=[];if(""==this._defBuffer.join(""))return null;if(this.includedFormat)for(var i=0,o=this._buffer.length;i<o;i++){var r=this._buffer[i];!this._tests[i]||this._tests[i].test(r)?t.push(r):r==this.$_getPlaceHolder(i)&&this._tests[i].test(" ")&&t.push(" ")}else for(i=0,o=this._buffer.length;i<o;i++)this._tests[i]&&this._tests[i]instanceof RegExp&&this._tests[i].test(this._buffer[i])&&(e.length>0&&(t=t.concat(e),e=[]),t.push(this._buffer[i]));return t.join("")},t.prototype.setOptions=function(t){if("string"==typeof t)this.$_parseMask(t);else if(t.definitions&&this.$_parseDefinitions(t.definitions),t.placeHolder&&(this._placeHolder=t.placeHolder),t.editMask&&this.$_parseMask(t.editMask),null!=t.includedFormat&&(this._includedFormat=t.includedFormat),t.invalidFormatMessage&&(this._invalidFormatMessage=t.invalidFormatMessage),null!=t.allowEmpty&&(this._allowEmpty=t.allowEmpty),null!=t.showInvalidFormatMessage&&(this._showInvalidFormatMessage=t.showInvalidFormatMessage),null!=t.overwrite&&(this._overwrite=t.overwrite),null!=t.overWrite&&(this._overwrite=t.overWrite),null!=t.restrictNull&&(this._restrictNull=t.restrictNull),this._restrictNull&&this._editor){var e=this._editor._editor;!e.onclick&&(e.onclick=this.clickHandler.bind(this))}},t.prototype.checkValid=function(){var t=[];if(this.allowEmpty){for(var e=0,i=this._tests.length;e<i;e++)t[e]=this.$_getPlaceHolder(e);if(t.join("")===this._buffer.join(""))return!0}for(e=0,i=this._tests.length;e<i;e++){var o=this._buffer[e];if(this._tests[e]&&!this._tests[e].test(o)&&o==this.$_getPlaceHolder(e)&&!this._tests[e].test(" "))return!1}return!0},t.prototype._changed=function(){},t.prototype._moveCaret=function(t,e){for(var i=this._editor._editor,o=t=arguments.length>0?t:i.selectionStart,r=e=arguments.length>1?e:i.selectionEnd,n=t-1;n>=0;n--){if(this._tests[n]&&this._tests[n].test(this._buffer[n])){o=n+1;break}o=n}for(n=e-1;n>=0;n--){if(this._tests[n]&&this._tests[n].test(this._buffer[n])){r=n+1;break}r=n}if(o!=t||r!=e){for(n=o;n<=t&&!this._tests[n];n++)o++;for(n=r;n<=e&&!this._tests[n];n++)r++;return i.setSelectionRange(o,r),!0}return o!=t||r!=e},t.prototype.$_setCaret=function(t,e){this._editor._editor.setSelectionRange(t,e)},t.prototype.$_parseDefinitions=function(t){for(var e in t)"string"==typeof t[e]&&(this._definitions[e]=new RegExp(t[e]))},t.prototype.$_parseMask=function(t){var e=this._tests=[],i=this._definitions,o=t.split("");this._editMask=t,this._buffer=[];for(var r=0,n=o.length;r<n;r++)e.push(i[o[r]]),this._buffer.push(i[o[r]]?this.$_getPlaceHolder(r):o[r])},t.prototype.$_getPlaceHolder=function(t){return this._placeHolder&&this._placeHolder.length>t?this._placeHolder[t]:this._tests[t]?"_":this._editMask&&this._editMask.length>t?this._editMask[t]:"_"},t.prototype.$_seekPrev=function(t){for(;--t>=0&&!this._tests[t];);return Math.max(0,t)},t.prototype.$_seekNext=function(t){for(;++t<this._editMask.length&&!this._tests[t];);return Math.min(this._editMask.length,t)},t.prototype.$_shiftL=function(t,e){var i=this._editMask.length,o=this._buffer;if(t>=0)for(var r=t,n=this.$_seekNext(e);i>r;r++)if(this._tests[r]){if(!(i>n&&this._tests[r].test(o[n])))break;o[r]=o[n],this._defBuffer[r]=this._defBuffer[n],o[n]=this.$_getPlaceHolder(n),this._defBuffer[n]="",n=this.$_seekNext(n)}},t.prototype.$_shiftR=function(t){for(var e,i,o=this._editMask.length,r=this._buffer,n=t,s=this.$_getPlaceHolder(t);o>n;n++)if(this._tests[n]){if(e=this.$_seekNext(n),i=r[n],this._defBuffer[n]=s,r[n]=s,!(o>e&&this._tests[e].test(i)))break;s=i}},t.prototype.keydown=function(t){var e=this._editor.editor;if(!e.readOnly){var i=t.which||t.keyCode,o=e.selectionStart,r=e.selectionEnd;if(46===i||8===i)o==r&&(o=46!==i?this.$_seekPrev(o):r=this.$_seekNext(o-1),r=46===i?this.$_seekNext(r):r),this.clearBuffer(o,r),!this._overwrite&&this.$_shiftL(o,r-1),e.value=this.writeBuffer(),this.$_setCaret(Math.max(0,o),Math.max(0,o));else if(39===i||35===i)return this._moveCaret();this._pStart=e.selectionStart}},t.prototype.keyPress=function(t){var e=this._editor.editor;if(!e.readOnly){this.restrictNull&&this._moveCaret();var i,o=e.selectionStart,r=e.selectionEnd,n=t.which||t.keyCode;this.clearBuffer(o,r),o!==r&&this.$_shiftL(o,r-1);var s=this.$_seekNext(o-1);this._editMask&&this._editMask.length>s&&this._tests[s]&&this._tests[s].test(i=String.fromCharCode(n))&&(!this._overwrite&&this.$_shiftR(o),this._buffer[s]=i,this._defBuffer[s]=i,e.value=this.writeBuffer(),s=this.$_seekNext(s),this.$_setCaret(Math.max(0,s),Math.max(0,s))),this._pStart=e.selectionStart}},t.prototype.input=function(t){var e=this._editor.editor;if(!e.readOnly){var i=e.value;/[ㄱ-ㅎㅏ-ㅣ가-힝]/.test(i)&&(e.value=e.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힝]/g,""),null!=this._pStart&&e.setSelectionRange(this._pStart,this._pStart))}},t}(),La=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._maxLength=0,t._fontSize=0,t._modified=!1,t}return o(i,e),Object.defineProperty(i.prototype,"maxLength",{get:function(){return this._maxLength},set:function(t){t!=this._maxLength&&(this._maxLength=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=isNaN(t)?0:Math.max(0,t)},enumerable:!1,configurable:!0}),i.prototype._createContainer=function(t){var e=t.createElement("div"),i=e.style;return e.spellcheck=!1,i.position="absolute",i.width="0px",i.height="0px",i.padding="0px",i.margin="0px",e},i.prototype.initOptions=function(){e.prototype.initOptions.call(this),this._maxLength=0},Object.defineProperty(i.prototype,"readonly",{set:function(t){this._editor.readOnly=this._readOnly=t},enumerable:!1,configurable:!0}),i.prototype.isEdited=function(){return this._modified},i.prototype.setVisible=function(t,i){e.prototype.setVisible.call(this,t,i);var o=this._container.style;t?(o.border="",o.boxShadow=""):t||(o.border="none",o.boxShadow="none")},i.prototype.setEditIndex=function(i){e.prototype.setEditIndex.call(this,i);var o=this._editor.style;Rt.isMobile()?o.fontSize=Math.max(this.fontSize,16)+"px":this.fontSize>0&&(o.fontSize=this.fontSize+"px");var r=i.valueColumn;if(r)switch(this._textCase==t.TextInputCase.DEFAULT?r.textInputCase:this._textCase){case t.TextInputCase.LOWER:this._editor.style.textTransform="lowercase";break;case t.TextInputCase.UPPER:this._editor.style.textTransform="uppercase";break;default:this._editor.style.textTransform="none"}},i.prototype.getEditText=function(){return this._editor.value},i.prototype.setEditValue=function(t){e.prototype.setEditValue.call(this,t),this._editor.value=this._valToStr(t)},i.prototype.getEditValue=function(e,i){void 0===e&&(e=!0);var o=this._editField(),r=this._emptyValue;try{var n=o.dataType,s=this._editor.value;if(n==t.ValueType.TEXT)s||void 0===this._emptyValue||(s=this._emptyValue),void 0===(r=this._strToVal(s))&&(r="");else{if(n===t.ValueType.OBJECT){var a=this._editIndex.dataColumn.objectKey||o.objectKey,l=this._editIndex.item.getData(o.index)||{};return l[a]=s,l}if(Rt.isWhiteSpace(s))if(void 0!==this._emptyValue)r=this._strToVal(this._emptyValue);else switch(n){case t.ValueType.NUMBER:isNaN(this._oldValue)&&(r=NaN);break;case t.ValueType.DATETIME:null===this._oldValue&&(r=null);case t.ValueType.BOOLEAN:}else r=this._strToVal(s)}if(r===Ma.InvalidFormat)return r;r=o.readValue(r)}catch(t){if(e)throw t;r=this._emptyValue}return r},i.prototype._selectAll=function(){var t=this._editor;if(t.select&&t.value){var e=t.value;t.value="",t.value=e,t.select()}},i.prototype._setSelectionRange=function(t,e){try{var i=this._editor;(!Rt.isMobile()||!this.hasList)&&null!=i.selectionStart&&i.setSelectionRange(t,e)}catch(t){Rt.log("setSelectionRange fail type => ".concat(this._editor.getAttribute("type")))}},i.prototype._doBeginEdit=function(){if(this._modified=!1,this.visible)return Rt.isMobile()&&this.caretToLast(),!0},i.prototype._doEndEdit=function(){this._modified=!1},i.prototype._doCommit=function(){},i.prototype.$_createEditor=function(t,e){var i=St(t);this._container=this._createContainer(i),t.appendChild(this._container);var o="$$_rg_editor"+this.$_hash,r=i.createElement("label");r.setAttribute("for",o);var n=r.style;n.display="none",n.position="absolute",n.width=n.height="0px";var s=i.createElement(e);s.id=o,n=s.style,s.autocomplete="off",n.position="absolute",n.boxSizing="border-box",n.margin="0px",n.padding="0px 2px",n.wordWrap="normal",n.overflow="hidden",n.resize="none",n.border="none",n.outline="none",n.left="0px",n.top="0px",n.width="100%",n.height="100%",n["-webkit-user-modify"]="read-write-plaintext-only",n["white-space"]="pre",n["-webkit-transform"]="translateZ(0)",s.tabIndex=-1,this._container.appendChild(s),this._container.appendChild(r),s.onkeydown=this._keyDownHandler.bind(this),s.onkeyup=this._keyUpHandler.bind(this),s.onkeypress=this._keyPressHandler.bind(this),s.oninput=this._inputHandler.bind(this),s.onpaste=this._pasteHandler.bind(this),s.oncopy=this._copyHandler.bind(this),s.oncut=this._copyHandler.bind(this);var a=this._grid.container;return a.$_addListener(s,"compositionstart",this._compositionstartHandler.bind(this),!1),a.$_addListener(s,"compositionupdate",this._compositionupdateHandler.bind(this),!1),a.$_addListener(s,"compositionend",this._compositionendHandler.bind(this),!1),s},i}(Ma),Na=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._doDispose=function(){this._editor.$_owner=null,this._editor.onkeydown=null,this._editor.onkeyup=null,this._editor.onkeypress=null,this._editor.oninput=null,this._editor.onpaste=null,this._editor.oncopy=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._editor.value},set:function(t){!this._editor||t==this._editor.value&&t==this._controller.getData(this._editIndex)||(this._editor.value=t,this._doChanged())},enumerable:!1,configurable:!0}),e.prototype.setMask=function(t){this._mask=null,t&&(this._mask=new Fa(this,t))},e.prototype.setAlignment=function(t){this._container.style.textAlign="left"},e.prototype._createEditor=function(e){var i=t.prototype.$_createEditor.call(this,e,"input");return this._defMaxLength=i.maxLength>0?i.maxLength:1e6,i},e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this._editor.readOnly=this._readOnly=!1,this._mask&&(this._mask=this._mask.dispose())},e.prototype.applyOptions=function(e){t.prototype.applyOptions.call(this,e),e.mask&&this.setMask(e.mask)},e.prototype.caretToLast=function(){var t=Rt.toStr(this._editor.value).length;this._setSelectionRange(t,t)},e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e),this._editor.maxLength=this.maxLength>0?this.maxLength:this._defMaxLength},e.prototype.setEditorZIndex=function(t){var e=this._editor.style,i=this._grid.displayOptions.baseZindex;t?e.zIndex=String(i+0):e.removeProperty("z-index")},e.prototype._doChanged=function(){this._requestStart(),this._started&&(this._textReadOnly||!this._editor.readOnly||this.allowEmpty&&""===this.text)&&(this._modified=!0,this._dispatchChange())},e.prototype.setBounds=function(t,e,i,o,r){Rt.setBounds(this._container,t,e,i,o),0==i||0==o?this._editor.style.width="100%":r>0&&(this._editor.style.height=Math.round(o-4)+"px",this._editor.style.width=r+"px")},e.prototype._doPaste=function(e,i){if(this._mask){e.preventDefault();var o=this._editor,r=o.value,n=o.selectionStart,s=o.selectionEnd;r=r.substr(0,n)+i+r.substr(s),o.value=this._mask.writeBuffer(r,!0)}else t.prototype._doPaste.call(this,e,i)},e.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=this._editor,i=t.keyCode,o=Rt.ctrlKey(t);if(o){if(this.visible&&Rt.included(i,89,90,121,122))return;if(Rt.isIE){if(86===i&&e.readOnly)return t.preventDefault(),this._pasteHandler(t),!1;if((88===i||67===i||45===i)&&""==e.value&&Ma.copyCutProc(this,t))return!1}}switch(this._inputValue=e.value,i){case 8:case 46:this._sendToParent(t)||(!this.visible&&this._requestStart()?e.readOnly&&!this.allowEmpty||!this._controller._getData(this._editIndex)||(this._mask?(t.preventDefault(),t.stopImmediatePropagation(),this._mask.keydown(t),this._doChanged()):this.text=""):this._mask&&(t.preventDefault(),t.stopImmediatePropagation(),this._mask.keydown(t),this._doChanged()),8===i&&e.readOnly&&(t.preventDefault(),t.stopImmediatePropagation()));break;case 9:return!this._sendToParent(t);case 37:if(!this.visible||0==e.selectionEnd&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);if(e.readOnly&&Rt.isChrome)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 39:if(!this.visible||e.selectionEnd==e.value.length&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);if(e.readOnly&&Rt.isChrome)return!this._sendToParent(t);if(!Rt.specialKey(t)&&this._mask&&this._mask.restrictNull){var r=e.selectionStart;this._mask._moveCaret(r+1,r+1)&&(t.preventDefault(),t.stopImmediatePropagation())}t.stopImmediatePropagation();break;case 36:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 35:if(!this.visible)return!this._sendToParent(t);if(this._mask&&this._mask.restrictNull){var n=e.value?e.value.length-1:0;this._mask._moveCaret(n,n)&&(t.preventDefault(),t.stopImmediatePropagation())}t.stopImmediatePropagation();break;case 32:if(!this.visible||o||t.altKey)return!this._sendToParent(t);break;case 38:case 33:case 40:case 34:case 13:case 27:case 113:case 45:return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);case 229:this._sendToParent(t);break;default:return!this._sendToParent(t,null,!0)}return Rt.isFirefox?!o&&!t.altKey&&229!==i&&i>=32&&(i<112||i>130)&&this._requestStart():Rt.isIE,!0}},e.prototype._keyUpHandler=function(t){if(!this.isDisabled()){var e=t.keyCode;switch(8!=e&&46!=e||Rt.ieOld&&this.visible&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),t.keyCode){case 37:case 39:case 36:case 35:case 32:this.visible||this._sendToParent(t,3);break;default:this._sendToParent(t,3)}}},e.prototype._keyPressHandler=function(t){if(!this.isDisabled()){var e=t.which||t.keyCode,i=Rt.isMac&&t.metaKey,o=Rt.ctrlKey(t);this._sendToParent(t,2),Rt.isFirefox?o||t.altKey||!(0==e||e>=32)||(this._requestStart()?this._mask&&(this._mask._pStart=t.target.selectionStart,this._mask.keyPress(t),this._doChanged(),t.preventDefault()):t.preventDefault()):!i||122!==e&&121!==e?(!i||99!==e&&118!==e&&120!==e)&&(i&&t.shiftKey&&32===e||e>=32&&(this._requestStart()?this._mask&&(this._mask._pStart=t.target.selectionStart,this._mask.keyPress(t),this._doChanged(),t.preventDefault()):t.preventDefault())):t.preventDefault()}},e.prototype._compositionstartHandler=function(t){this.isDisabled()||(this._composing=!0)},e.prototype._compositionendHandler=function(){this._composing=!1},e.prototype._compositionupdateHandler=function(){this._composing=!0,!this._started&&this._requestStart(),this._started&&!this._editor.readOnly&&(this._checkHangeul=!0)},e.prototype._changeHandler=function(t){},e.prototype._inputHandler=function(t){this.isDisabled()||(!Rt.isIE||this._started||this._composing)&&"historyUndo"!==t.inputType&&"historyRedo"!==t.inputType&&(this._mask&&this._mask.input(t),this._doChanged())},e.prototype._getInputSelector=function(){return null},e}(La),$a=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),Object.defineProperty(e.prototype,"inputCharacters",{get:function(){return this._inputCharacters},set:function(t){this._inputCharacters=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ignoreCharacters",{get:function(){return this._ignoreCharacters},set:function(t){this._ignoreCharacters=t},enumerable:!1,configurable:!0}),e.prototype.initOptions=function(){this._inputCharacters=null,this._ignoreCharacters=null,t.prototype.initOptions.call(this)},e.prototype.initDefaultOptions=function(){},e.prototype._inputHandler=function(e){this.$_resetValue(e),t.prototype._inputHandler.call(this,e)},e.prototype._keyDownHandler=function(e){return this._pStart=e.target.selectionStart,t.prototype._keyDownHandler.call(this,e)},e.prototype._createEditor=function(e){var i=t.prototype._createEditor.call(this,e);return i.tabIndex=-1,i},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.$_resetValue=function(t){var e,i,o=this,r=this._editor,n=r.value,s=function(e){e.test(n)&&(i=!0,"insertFromPaste"===t.inputType?(n=n.replace(e,""),o._pStart+=t.data.replace(e,"").length):n=o._inputValue?o._inputValue.replace(e,""):n.replace(e,""))};this.visible&&((e=this.inputCharacters)&&s.call(this,new RegExp("[^"+e+"]","g")),(e=this.ignoreCharacters)&&s.call(this,new RegExp("["+e+"]","g")),i&&(r.value=n,null!=this._pStart&&r.setSelectionRange(this._pStart,this._pStart)),this._pStart=null)},e.INPUT_CSS="rg-text-editor",e}(Na),Aa=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype._createEditor=function(e){var i=t.prototype._createEditor.call(this,e);return i.setAttribute("type","password"),i.tabIndex=-1,i},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.initDefaultOptions=function(){},e.prototype.prepare=function(){},e.INPUT_CSS="rg-password-editor",e}(Na),Va=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype._doDispose=function(){this._editor.onkeydown=null,this._editor.onkeyup=null,this._editor.onkeypress=null,this._editor.oninput=null,this._editor.onpaste=null,this._editor.oncopy=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"minHeight",{get:function(){return this._minHeight},set:function(t){t!=this._minHeight&&(this._minHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){this._minWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"altEnterNewLine",{get:function(){return this._altEnterNewLine},set:function(t){t!=this._altEnterNewLine&&(this._altEnterNewLine=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._editor.value},enumerable:!1,configurable:!0}),e.prototype.setAlignment=function(t){this._container.style.textAlign="left"},e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this._minHeight=0,this._height=0,this._minWidth=0,this._width=0,this._altEnterNewLine=!1,this._editor.style.setProperty("overflow","hidden"),this.setReadOnly(!1)},e.prototype.initDefaultOptions=function(){},e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e),this._editor.maxLength=this.maxLength>0?this.maxLength:2e9},e.prototype.setCellEditValue=function(e){t.prototype.setCellEditValue.call(this,e,!1)},e.prototype.setEditorZIndex=function(t){function e(t,e,i){var o=e.style;t?o.zIndex=String(i+0):o.removeProperty("z-index")}var i=this._grid.displayOptions.baseZindex;e(t,this._editor,i),this._grid.accessibility&&e(t,this._container,i)},e.prototype._doChanged=function(){this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange(),this.$_resetBounds())},e.prototype.$_resetBounds=function(){var t,e,i=Rt.getSize(this._container),o=this._editor,r=this._grid.getEditCellBounds(this,this._editIndex);this._height<0?t=r.height+(Rt.isMobile()?3:1):this._height>0&&(t=this._height),this._width<0?e=r.width+(Rt.isMobile()?3:1):this._width>0&&(e=this._width);var n=i.cx,s=i.cy,a=i.width,l=Math.round(i.height),h=(t&&o.scrollHeight-o.clientHeight)>0?Rt.isMac?0:15:0,u=(e&&o.scrollWidth-o.clientWidth)>0?Rt.isMac?0:15:0;t?(o.style.overflowY="auto",l=t):o.scrollHeight+u>l&&(l=o.scrollHeight+6+u),e?(o.style.overflowX="auto",a=e):o.scrollWidth+h>a&&(a=o.scrollWidth+6+h);var c=isNaN(this._minHeight)?0:this._minHeight;c>0&&(l=Math.max(l,c));var d=isNaN(this._minWidth)?0:this._minWidth;d>0&&(a=Math.max(a,d)),i=Rt.getSize(this._parentElement),a=Math.min(i.width,a),l=Math.min(i.height,l),n+a>i.width&&(n=i.width-a),s+l>i.height&&(s=i.height-l),Rt.setBounds(this._container,Math.max(n,0),Math.max(s,0),a,l)},e.prototype._createEditor=function(e){var i=t.prototype.$_createEditor.call(this,e,"textarea"),o=St(e),r=i.style;r.padding="0px";var n=this._dummyEditor=o.createElement("input");return(r=n.style).width="1px",r.height="1px",r.position="absolute",r.top="0px",r.zIndex="-1",r.border="none",n.tabIndex=-1,Rt.isWin&&this._container.appendChild(n),i},e.prototype.setBounds=function(t,e,i,o){Rt.setBounds(this._container,t,e,i,o),t>Rt.$_INVISIBLE_EDIT_BOUNDS.x&&this.$_resetBounds()},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype._compositionstartHandler=function(t){this.isDisabled()||(this._composing=!0,this._requestStart())},e.prototype._compositionendHandler=function(){this._composing=!1},e.prototype._compositionupdateHandler=function(){this._composing=!0},e.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=this._editor,i=t.keyCode;if(Rt.ctrlKey(t)){if(this.visible&&(90===i||89===i))return;if(Rt.isIE){if(86===i&&e.readOnly)return t.preventDefault(),this._pasteHandler(t),!1;if((88===i||67===i||45===i)&&""==e.value&&Ma.copyCutProc(this,t))return!1}}switch(i){case 8:case 46:this._sendToParent(t)||!this.visible&&this._requestStart()&&(t.preventDefault(),t.stopImmediatePropagation(),!this._editor.readOnly&&this._controller.getData(this._editIndex)&&(this._editor.value="",this._modified=!0,this._dispatchChange()));break;case 9:return!this._sendToParent(t);case 37:if(!this.visible||0==e.selectionEnd&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);break;case 39:if(!this.visible||e.selectionEnd==e.value.length&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);break;case 36:case 35:case 38:case 33:case 40:case 34:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 32:if(!this.visible)return!this._sendToParent(t);break;case 13:var o=Rt.ctrlKey(t);if(this.altEnterNewLine){if(!(t.altKey&&this.editing||t.shiftKey))return!this._sendToParent(t)}else if(!(o&&this.editing||t.shiftKey))return!this._sendToParent(t);if((this.altEnterNewLine&&t.altKey||!this.altEnterNewLine&&o)&&!t.shiftKey){t.preventDefault(),t.stopImmediatePropagation();var r=e.value;if(r)try{this._grid.container._dummyFocus=!0,Rt.isWin&&this._dummyEditor&&this._dummyEditor.focus();var n=e.selectionEnd;r=r.substring(0,n)+"\r\n"+r.substring(n),e.value=r,e.setSelectionRange(n+1,n+1),Rt.isWin&&e.focus(),this._doChanged()}finally{this._grid.container._dummyFocus=!1}}break;case 27:case 113:case 45:return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);case 229:break;default:return this._sendToParent(t,null,!0),!0}return t.keyCode,!0}},e.prototype._keyUpHandler=function(t){if(!this.isDisabled()){var e=t.keyCode;switch(8!=e&&46!=e||Rt.ieOld&&this.visible&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),t.keyCode){case 37:case 39:case 36:case 35:case 32:this.visible||this._sendToParent(t,3);break;default:this._sendToParent(t,3)}}},e.prototype._keyPressHandler=function(t){var e=t.which||t.keyCode,i=Rt.isMac&&t.metaKey;this.isDisabled()||(!i||122!==e&&121!==e?(!i||99!==e&&118!==e)&&(i&&t.shiftKey&&32===e||e>=32&&!this._requestStart()&&t.preventDefault()):t.preventDefault())},e.prototype._inputHandler=function(t){this.isDisabled()||"historyUndo"!==t.inputType&&"historyRedo"!==t.inputType&&this._doChanged()},e.INPUT_CSS="rg-multiline-editor",e}(La),Ba=/[ㄱ-ㅎㅏ-ㅣ가-힝]/g,ja=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._regxAll=/[\d]|,|\.|\-|\+|e|E/,o._regxPos=/[\d]|,|\.|\+|e|E/,o._regxInt=/[\d]|,|\+|\-/,o._regxPosInt=/[\d]|,|\+/,o._regx=o._regxAll,o._decLen=void 0,o._decimalFormatter=void 0,o._isMultiple=!1,o._active=!1,o._stepChanged=!1,o._editor.style["ime-mode"]="disabled",o._editor.style["-webkit-ime-mode"]="disabled",o._editor.style["-moz-ime-mode"]="disabled",o._editor.style["-ms-ime-mode"]="disabled",o}return o(e,t),Object.defineProperty(e.prototype,"positiveOnly",{get:function(){return this._positiveOnly},set:function(t){t!=this._positiveOnly&&(this._positiveOnly=t,this.$_resetRistrict())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"integerOnly",{get:function(){return this._integerOnly},set:function(t){t!=this._integerOnly&&(this._integerOnly=t,this.$_resetRistrict())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editFormat",{get:function(){return this._editFormat},set:function(t){if(t!=this._editFormat)if(this._editFormat=t,t){var e=this._decimalFormatter=new qe(t);e&&(this._decSep=e.separator||Ue.messages.decimalSeparator,this._groupSep=e.groupSep||Ue.messages.thousandsSeparator,this._decLen=Math.max(e.minDigits,e.maxDigits))}else this._decimalFormatter=void 0,this._decSep=Ue.messages.decimalSeparator,this._groupSep=Ue.messages.thousandsSeparator,this._decLen=void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multipleChar",{get:function(){return this._multipleChar},set:function(t){t!=this._multipleChar&&(this._multipleChar=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"addString",{get:function(){return this._addString},set:function(t){t!=this._addString&&(this._addString=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLengthExceptComma",{get:function(){return this._maxLengthExceptComma},set:function(t){t!=this._maxLengthExceptComma&&(this._maxLengthExceptComma=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxIntegerLength",{get:function(){return this._maxIntegerLength},set:function(t){t!=this._maxIntegerLength&&(this._maxIntegerLength=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blankWhenSpace",{get:function(){return this._blankWhenSpace},set:function(t){t!=this._blankWhenSpace&&(this._blankWhenSpace=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(t){t!==this._step&&0!=t&&(this._step=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){this._max=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(t){this._min=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},set:function(t){t!==this._delay&&(this._delay=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textReadOnly",{get:function(){return this._textReadOnly},set:function(t){this._setTextReadOnly(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showStepButton",{get:function(){return this._showStepButton},set:function(t){this._showStepButton=t},enumerable:!1,configurable:!0}),e.prototype.setMask=function(t){this._mask=null},e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this.editFormat=void 0,this._positiveOnly=!1,this._integerOnly=!1,this._multipleChar=void 0,this._addString="000",this._blankWhenSpace=!1,this._maxLengthExceptComma=!1,this._maxIntegerLength=0,this._step=1,this._min=this._max=void 0,this._delay=100,this._active=!1,this._direction="vertical",this._showStepButton=!1,this._textReadOnly=!1,this.$_resetRistrict()},e.prototype.initDefaultOptions=function(){var t=this._grid;t&&Ma.initDefault(this,Xe.editor.numberCellEditor,t.editorOptions.numberCellEditor)},e.prototype.hasButton=function(t,e){return null!=e.showStepButton&&e.showStepButton},Object.defineProperty(e.prototype,"buttonCount",{get:function(){return 2},enumerable:!1,configurable:!0}),e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e),this._editor.maxLength=this.maxLengthExceptComma||this.maxLength<=0?this._defMaxLength:this.maxLength},e.prototype._inputHandler=function(e){e.data&&e.data.match(Ba)?e.target.value=this._inputValue:(this._editFormat&&this.$_editFormatting(e),t.prototype._inputHandler.call(this,e))},e.prototype._keyPressHandler=function(e){var i=e.keyCode||e.which;if(Rt.isFirefox){if(e.ctrlKey||0===e.charCode)return void t.prototype._keyPressHandler.call(this,e)}else if(Rt.isSafari&&Rt.ctrlKey(e)&&Rt.included(i,99,118,120))return void t.prototype._keyPressHandler.call(this,e);var o=!0,r=String.fromCharCode(e.keyCode||e.charCode);(!this._regx.test(r)||e.target.value&&e.target.value.indexOf(this._decSep)>=0&&r==this._decSep)&&(this._multipleChar&&r===this._multipleChar||(o=!1,(!this.blankWhenSpace||" "!==r)&&e.preventDefault()));var n=e.target.selectionStart,s=e.target.selectionEnd,a=e.target.value,l=new RegExp("\\"+this._groupSep,"g"),h=a?a.split(""):[];if(h.splice(n,s-n,r===this._multipleChar?this._addString:r),h=h.join("").replace(l,""),this.maxLength>0&&o&&this.maxLengthExceptComma&&a){var u=h&&"-"===h[0];u&&(h=h.substr(1)),h.length>this.maxLength&&e.preventDefault(),h=u?"-"+h:h}if(this._maxIntegerLength>0&&r!==this._decSep){var c=Math.floor(this.$_strToNum(h));if(!isNaN(c)){var d=Math.abs(c).toString().length;this._maxIntegerLength<d&&e.preventDefault()}}this._isMultiple=r==this._multipleChar,t.prototype._keyPressHandler.call(this,e)},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var i=e.keyCode||e.charCode;if(this._isMultiple=!1,(8===i||46===i)&&this.editing&&this._editFormat){var o=e.target,r=o.value,n=r.length,s=r&&r.split(""),a=o.selectionStart,l=o.selectionEnd;if(a!==l)return t.prototype._keyDownHandler.call(this,e);var h=r[8===i?a-1:a];if(h===this._groupSep||h===this._decSep)if(h===this._decSep&&a===(8===i?r.length:r.length-1));else{s.splice(8===i?a-2:a+1,1),o.value=s.join(""),this.$_editFormatting(e),r=o.value;var u=n-(8===i?r.length:n);o.setSelectionRange(a-u,l-u),this._doChanged(),e.preventDefault()}}return t.prototype._keyDownHandler.call(this,e)}},e.prototype._compositionstartHandler=function(t){this.isDisabled()||this._requestStart()},e.prototype._dispatchChange=function(){this.visible&&(this.$_resetValue(),t.prototype._dispatchChange.call(this))},e.prototype.setEditValue=function(t){var e=parseFloat(t);isNaN(e)?this._editor.value="":this._editFormat&&"number"==typeof e?this._editor.value=this._decimalFormatter.getText(t):this._editor.value=e},e.prototype.getEditValue=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1),this.$_resetValue();var i=this._emptyValue;try{var o=this._editor.value;if(o=o&&o.trim()){var r=new RegExp("\\"+this._groupSep,"g"),n=new RegExp("[\\"+this._decSep+"]+","g");o=(o=(o=(o=(o=(o=o.replace(r,"")).replace(n,".")).replace(/\++/g,"+")).replace(/\-+/g,"-")).replace(/\+\-/g,"+")).replace(/\-\+/g,"-")}o?(i=parseFloat(o),e&&(i=null!=this._max?Math.min(i,this._max):i,i=null!=this._min?Math.max(i,this._min):i)):i=null!=i?i:void 0}catch(e){if(t)throw e}return i},e.prototype.setCellEditValue=function(t){!this.readOnly&&this._requestStart()&&("string"!=typeof t&&"number"!=typeof t||(t=this.$_strToNum(t),this.setEditValue(t),this._doChanged()))},e.prototype.buttonDown=function(t,e){var i,o=e.target;Rt.stopEvent(e),"up"===o.$_editButtonType?i=this.step:"down"===o.$_editButtonType&&(i=-this.step),i&&(this.$_changeStepValue(i),this._active=!0,setTimeout(function(){this._active&&!this._stepTimer&&(this._stepTimer=setInterval(function(){this.$_changeStepValue(i)}.bind(this),this._delay))}.bind(this),300))},e.prototype.buttonUp=function(t,e){this._active=!1,clearInterval(this._stepTimer),this._stepTimer=null},e.prototype.setButtonStyle=function(t,e,i,o,r){var n=t.style;i?(0===e?n.top="0px":n.removeProperty("top"),0===e?n.removeProperty("bottom"):n.bottom="0px",n.right=o+"px",n.height="9px"):(n.top="0px",n.removeProperty("bottom"),n.right=o+r*e+"px",n.height="100%"),n.width=r+"px";var s=0===e?"rg-button-step-up":"rg-button-step-down";return t.className=s,t.$_editButtonType=0===e?"up":"down",!0},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.setFocus=function(){!this._stepChanged&&t.prototype.setFocus.call(this)},e.prototype.$_strToNum=function(t){t=""+t;var e=new RegExp("\\"+this._decSep,"g"),i=new RegExp("\\"+this._groupSep,"g"),o="-"===t[0];t=t.replace(i,"").replace(e,".").replace(/\+/g,"");var r=parseFloat(t);return isNaN(r)?NaN:o?-Math.abs(r):r},e.prototype.$_formatNum=function(t,e,i){var o=t,r=o<0||0==o&&1/o==-1/0?"-":"",n=Math.max(e,i);n=isNaN(n)?2:n;var s=parseInt(o=Math.abs(+o||0).toFixed(n))+"",a=s.length>3?s.length%3:0;if(o.indexOf(".")>=0){for(var l=o.split(".")[1].split("");l.length>0&&"0"===l[l.length-1]&&l.length>e;)l.splice(l.length-1,1);o=l.join(""),n=l.length}return r+(a?s.substr(0,a)+this._groupSep:"")+s.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+this._groupSep)+(n?this._decSep+o:"")},e.prototype.$_editFormatting=function(t){var e=t.target,i=e.value,o=i&&"-"===i[0],r=i&&i[i.length-1]==this._decSep,n=e.selectionStart,s=e.selectionEnd;this._isMultiple&&this._addString&&(i=i.replace(new RegExp("\\"+this._multipleChar,"gi"),this._addString),n+=this._addString.length,s+=this._addString.length);var a,l=i.split(this._decSep);l.length>1&&(l.length=2,l[1]=l[1].substr(0,this._decimalFormatter._maxDigits),i=l.join(this._decSep)),a=2==l.length?Math.min(l[1].length,null!=this._decLen?this._decLen:99):0;var h=this.$_strToNum(i);if(!isNaN(h)){if(this.maxLength>0||this.maxIntegerLength>0){h=Math.abs(h);var u=String(h).split(".");this.maxIntegerLength>0&&(u[0]=u[0].substr(0,this.maxIntegerLength));var c=u.join(".");this.maxLength>0&&(c=c.substr(0,this.maxLength)),h=parseFloat(c),o&&(h=-h)}i=this.$_formatNum(h,a,this._decimalFormatter.maxDigits);var d=(i=r&&this._decLen&&i.indexOf(this._decSep)<0?i+this._decSep:i).length,p=e.value.length;1==Math.abs(d-p)&&(d>p?(n++,s++):i.indexOf(this._decSep)>=n-1&&(n--,s--)),e.value=i,e.setSelectionRange(Math.max(n,0),Math.max(s,0))}},e.prototype.$_resetValue=function(){if(this.visible){var t=this._editor,e=t.selectionStart,i=t.selectionEnd,o=t.value?t.value.length:0;t.value=t.value.replace(Ba,"").trim(),(t.value?t.value.length:0)==o?t.setSelectionRange(e,i):t.setSelectionRange(i,i)}},e.prototype.$_resetRistrict=function(){this._positiveOnly&&this._integerOnly?this._regx=this._regxPosInt:this._positiveOnly?this._regx=this._regxPos:this._integerOnly?this._regx=this._regxInt:this._regx=this._regxAll},e.prototype.$_changeStepValue=function(t){var e=this.getEditValue();e=null==e||e==isNaN(e)?0:e,e+=t,null!=this._max&&(e=Math.min(this._max,e)),null!=this._min&&(e=Math.max(this._min,e)),this.setEditValue(e),this._stepChanged=!0,this._doChanged(),this._stepChanged=!1},e.INPUT_CSS="rg-number-editor",e}(Na),Ha=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-editor-marquee"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),e.style.pointerEvents="none"},e.prototype._doDraw=function(t){},e.prototype.spread=function(){var t=this._dom,e=t.style,i=t.parentElement,o=Rt.getSize(i);e.left=o.left+"px",e.top=-o.top+"px",e.width=o.width+"px",e.height=o.height+"px",this._setClassName(t)},e}(_a),Ga=function(t){function e(e,i){var o=t.call(this,e,i)||this;if(o._isMobile){var r=St(i);o._marquee=new Ha(r)}return o}return o(e,t),e.prototype.hasButton=function(t,e){return!0},Object.defineProperty(e.prototype,"buttonCount",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasList",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isShowMarquee=function(){return this._isMobile&&this._grid.editorOptions.showMarquee&&!this._isTablet},e.prototype._showMarquee=function(t){this._marquee&&(t.appendChild(this._marquee._dom),this._marquee.spread())},e.prototype.registerPositionListener=function(){this._grid.container.addPositionListener(this)},e.prototype.unRegisterPositionListener=function(){this._grid.container.removePositionListener(this)},e.prototype._centerPopup=function(t,e){var i=Rt.getSize(e),o=Rt.getSize(t),r=It(t),n=Rt.getZoom(t),s=r.innerHeight/n;t.appendChild(e),e.style.left=(o.width-i.width)/2+"px",e.style.top=(s-i.height)/2-o.top+"px"},e.prototype._closeMarquee=function(){this._marquee&&Rt.detach(this._marquee._dom)},e.prototype._isMarquee=function(t){return this._marquee&&t===this._marquee._dom},Object.defineProperty(e.prototype,"textReadOnly",{get:function(){return this._textReadOnly},set:function(t){this._setTextReadOnly(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allowEmpty",{get:function(){return this._allowEmpty},set:function(t){this._setAllowEmpty(t)},enumerable:!1,configurable:!0}),e}(Na);t.DropDownPosition=void 0,(ma=t.DropDownPosition||(t.DropDownPosition={})).BUTTON="button",ma.EDITOR="editor",t.DropDownSortStyle=void 0,(ba=t.DropDownSortStyle||(t.DropDownSortStyle={})).NONE="none",ba.ASCENDING="ascending",ba.DESCENDING="descending",t.DropDownValueLabel=void 0,(va=t.DropDownValueLabel||(t.DropDownValueLabel={})).VALUE="value",va.LABEL="label",va.VALUE_LABEL="valueLabel",va.LABEL_VALUE="labelValue";var Wa,Ua,Ya=function(e){function i(t){var o=e.call(this)||this;return o._items=null,o._itemIndex=-1,o._viewGridInside=!1,o._selected=!1,o._clickHandler=function(t){var e=t.currentTarget,o=Rt.getChildIndex(e);o>=0&&(this._itemIndex=o,this._selected=!0,this.fireEvent(i.CLOSE_UP,!0))}.bind(o),o._nextClickHandler=function(t){var e=t.currentTarget;this.$_addMoreItems(e)}.bind(o),o._container=t,o._element=o._createList(t.doc),o}return o(i,e),i.prototype._doDispose=function(){this._container=null,this._containerElement=null,this._items=null,Rt.clearElements(this._element),this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"items",{get:function(){return this._items},set:function(t){if(this._items=[],t)for(var e=0,i=t.length;e<i;e++)this._items.push({label:t[e].label,value:t[e].value,item:t[e].item,index:e})},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemIndex",{get:function(){return this._itemIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"viewGridInside",{get:function(){return this._viewGridInside||Rt.isSlotMode()},set:function(t){this._viewGridInside=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return this._containerElement&&this._containerElement.contains(this._element)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return 0==this.initCount?this._items&&this._items.length:this._element.children.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueIndex",{get:function(){var t=this._items,e=this._itemIndex;return t&&e>=0&&e<t.length?t[e].index:-1},set:function(t){if(t=Math.max(-1,t),this._itemIndex=-1,t>=0)for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].index==t){this._itemIndex=e;break}this._itemIndex>=0&&this.listing&&this._refreshItems()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this._selected},enumerable:!1,configurable:!0}),i.prototype.setItemIndex=function(t,e,i){var o=this._element.childNodes;if((t=Math.max(-1,t))<this._items.length&&(e||t!=this._itemIndex||t>=o.length-1)){if(i&&t>=o.length-1){var r=o[o.length-1];if(r.isMoreButton){var n=t-(o.length-1);n=(Math.floor(n/this.moreItemCount)+1)*this.moreItemCount,this.$_addMoreItems(r,n)}}this._itemIndex=t,this.listing&&this._refreshItems(),this._selected=t>=0}},i.prototype.setZIndex=function(t){this._element.style.zIndex=String(t)},i.prototype.show=function(e,i,o,r,n){this._containerElement=this.viewGridInside?this._container._container:e,this.sortStyle!=t.DropDownSortStyle.NONE&&this.$_sortItems(),this._show(i,o,r,n)},i.prototype.hide=function(){Rt.detach(this._element),this._containerElement=null},i.prototype.currentIsMore=function(t){var e=this._element.childNodes[null!=t?t:this._itemIndex];return e&&e.isMoreButton},i.prototype.addMoreItems=function(){if(this.currentIsMore(null)){var t=this._element.childNodes[this._itemIndex];this.$_addMoreItems(t,0)}},i.prototype._changed=function(){},i.prototype._createList=function(t){var e=t.createElement("div");return e.className="rg-dropdownlist",e.id="rg-dropdown-list-"+za.$$_LIST_ID++,e.setAttribute("role","listbox"),e},i.prototype.$_sortItems=function(){this.sortStyle==t.DropDownSortStyle.ASCENDING?this._items.sort((function(t,e){return t.label<e.label?-1:t.label>e.label?1:0})):this._items.sort((function(t,e){return t.label>e.label?-1:t.label<e.label?1:0}))},i.prototype._show=function(t,e,i,o){var r=this._element;if(r){var n=r.style;n.position="absolute",n.cssFloat="none",n.clear="both",n.boxSizing="border-box",n.minWidth="20px",n.minHeight="10px",n.overflow="auto",n.top="-10000px",n.maxHeight="9999px",n.removeProperty("width"),n.removeProperty("height"),this._firstChild=null,Rt.clearChildren(r),Rt.disableSelection(r),this._containerElement.appendChild(r),this._cellWidth=i,this._itemIndex=-1,this._buildItems(),this.$_resetHeight(),n.removeProperty("max-height"),this._resetWidth(i),this.$_resetPosition(t,e,i,o),this._selected=!1}},i.prototype._getListElement=function(){return this._element},i.prototype.$_resetHeight=function(){var t=this._getListElement();if(this._firstChild){var e=It(this._firstChild),i=Rt.getSize(this._firstChild),o=this._firstChild.currentStyle||e.getComputedStyle(this._firstChild),r=parseInt(o.marginTop.replace("px",""));r=isNaN(r)?0:r;var n=parseInt(o.marginBottom.replace("px",""));n=isNaN(n)?0:n;var s=this.dropDownCount>0?Math.min(this.dropDownCount,this._items.length):this._items.length;t.style.height=(i.height+r)*s+4+n+"px"}else t.style.height="10px"},i.prototype._resetWidth=function(t){var e=this._element,i=Rt.getSize(e),o=this.dropDownWidth,r=o,n=e.offsetWidth?e.offsetWidth+(Rt.ieOld&&"border-box"===e.style.boxSizing?17:0):0;r<=0?(e.style.removeProperty("width"),r=r<0?t:10):e.style.width=r+"px";var s=0;if(this._firstChild){var a=It(this._firstChild),l=this._firstChild.currentStyle||a.getComputedStyle(this._firstChild),h=parseInt(l.marginLeft.replace("px",""));h=isNaN(h)?0:h;var u=parseInt(l.marginRight.replace("px",""));u=isNaN(u)?0:u;for(var c=e.childNodes,d=0;d<c.length;d++)s=Math.max(s,c[d].scrollWidth);s+=e.offsetWidth-e.clientWidth+h+u}o<0&&(s=Math.max(s,r));var p=Rt.getBrowserSize();r=s=Math.min(s,p.width),Rt.ieOld&&(o>=0||s>r)&&(r+=20),r<i.width?e.style.overflowX="hidden":e.style.overflowX="auto",e.style.width=Math.max(r,n)+"px"},i.prototype.$_resetPosition=function(e,i,o,r){this._viewGridInside?Rt.resetPosition(this._container._container,this._container._container,this._element,e,i,o,r,this.dropDownPosition!=t.DropDownPosition.EDITOR):Rt.resetPosition(this._containerElement,this._container._container,this._element,e,i,o,r,this.dropDownPosition!=t.DropDownPosition.EDITOR)},i.prototype._resetItems=function(t,e,i,o){Rt.clearChildren(this._element),this._firstChild=null,this._buildItems(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o)},i.prototype._buildItems=function(e,i){var o=this;void 0===e&&(e=0),void 0===i&&(i=0);var r,n=St(this._element),s=0,a=function(t,e){var i=e&&e.value?e.value.toString():"",o=n.createElement("span");return o.style.whiteSpace="pre",o.innerHTML=i?Rt.htmlEncode(i):"&nbsp;",o.tabIndex=-1,o.className="rg-dropdown-value",Rt.disableSelection(o),t.appendChild(o),o},l=function(t,e){var i=e&&e.label?e.label.toString():"";i=o.trimLabelText?i.trim():i;var r=n.createElement("span");return!o.trimLabelText&&(r.style.whiteSpace="pre"),r.innerHTML=i?Rt.htmlEncode(i):"&nbsp;",r.tabIndex=-1,r.className="rg-dropdown-label",Rt.disableSelection(r),t.appendChild(r),r},h=function(t,e){var i=n.createElement("span");i.style.whiteSpace="pre",i.innerHTML=e?Rt.htmlEncode(e):"&nbsp;",i.tabIndex=-1,i.className="rg-dropdown-seperator",Rt.disableSelection(i),t.appendChild(i)},u=function(t){var e=Rt.getTextLength(t.textContent);e>s&&(r=t,s=e)},c=this._items,d=i||(this._element.children.length>0?this.moreItemCount:this.initCount);if(c&&!(c.length<1)){for(var p=e,f=c.length;p<f;p++){if(this.initCount&&p-e>=d&&p<f){var _=n.createElement("div"),g=_.style;g.position="relative",g.cssFloat="none",g.paddingTop="1px",g.paddingBottom="1px",g.paddingLeft="2px",g.paddingRight="2px",g.whiteSpace="nowrap",g.cursor="pointer",g.textAlign="center",Rt.disableSelection(_),_.nextIndex=p,_.onclick=this._nextClickHandler,_.isMoreButton=!0,_.className="rg-dropdown-more",l(_,{label:this.moreText}),this._element.appendChild(_);break}var y=c[p],m=n.createElement("div");m.setAttribute("role","option"),m.id=this._element.id+"-"+p.toString(),m.tabIndex=-1;var b=m.style;b.position="relative",b.cssFloat="none",b.paddingTop="1px",b.paddingBottom="1px",b.paddingLeft="2px",b.paddingRight="2px",b.whiteSpace="nowrap",b.cursor="default",m.className=p==this._itemIndex?"rg-dropdown-select rg-dropdown-item":"rg-dropdown-item",p===this._itemIndex?m.setAttribute("aria-selected","true"):m.removeAttribute("aria-selected"),Rt.disableSelection(m),this._element.appendChild(m),0==p&&(this._firstChild=m),m.onclick=this._clickHandler;var v=null;if(this._templateCallback)this._templateCallback(m,y);else{switch(this.displayLabels){case t.DropDownValueLabel.LABEL:l(m,y);break;case t.DropDownValueLabel.VALUE:a(m,y);break;case t.DropDownValueLabel.LABEL_VALUE:v=l(m,y),h(m,this.separator),a(m,y);break;case t.DropDownValueLabel.VALUE_LABEL:v=a(m,y),h(m,this.separator),l(m,y)}v&&this.itemColumned&&u(v)}}if(this.itemColumned&&r){var w=Math.ceil(Rt.getSize(r).width);for(p=0,f=this._element.childNodes.length;p<f;p++){(v=this._element.childNodes[p].firstChild).style.display="inline-block",v.style.width=w+"px"}}}},i.prototype.$_addMoreItems=function(t,e){var o=t.nextIndex;t.parentNode&&t.parentNode.removeChild(t),this._buildItems(o,e),this._resetWidth(this._cellWidth),this.fireEvent(i.EDITOR_FOCUS)},i.prototype._refreshItems=function(){for(var t=this._element.childNodes,e=0;e<t.length;e++){(o=t[e]).className=e==this._itemIndex?"rg-dropdown-select rg-dropdown-item":"rg-dropdown-item",e==this._itemIndex?o.setAttribute("aria-selected","true"):o.removeAttribute("aria-selected"),e==this._itemIndex&&this.fireEvent(i.ACTIVE_DESCENDENT,o.id)}var o,r=this._itemIndex;if(r>=0&&r<t.length)if((o=t[r]).offsetTop<this._element.scrollTop)this._element.scrollTop=o.offsetTop;else{var n=o.offsetTop+Rt.getSize(o).height;n>=this._element.scrollTop+this._element.clientHeight&&(this._element.scrollTop=n-this._element.clientHeight)}},i.prototype.$_search=function(t,e){void 0===e&&(e=!1);try{if(this._items&&this._items.length>0&&t){for(var i=this._items,o=i.length,r=this.caseSensitive?t:t.toLowerCase(),n=[],s=0;s<o;s++){if(u=i[s].label.toString())if(u=this.caseSensitive?u:u.toLowerCase(),this.partialMatch){for(var a="",l=0;l<u.length;l++){var h=Rt.hangulToChosung(u[l]);a+=Rt.hangulToChosung(r[l]).org?h.org:h.cho}if(a==r)return void this.setItemIndex(s,e,!0)}else if(u==r)return void this.setItemIndex(s,e,!0);n.push(u)}for(s=0;s<o;s++){var u=n[s];if(this.partialMatch){var c=!1;for(l=0;l<r.length;l++){var d=Rt.hangulToChosung(u[l]);if(!(d.org&&d.org==r[l]||d.cho&&d.cho==r[l])){c=!1;break}c=!0}if(c)return void this.setItemIndex(s,e,!0)}else if(u&&0==u.indexOf(r))return void this.setItemIndex(s,e,!0)}for(s=0;s<o;s++){u=n[s];if(this.partialMatch){var p=Rt.hangulToChosungAll(u),f=Rt.hangulToChosungAll(r),_=p.indexOf(f);a=u.substr(0,_);if(~_){l=0;for(var g=_,y=r.length;l<y;l++,g++){h=Rt.hangulToChosung(u[g]);a+=Rt.hangulToChosung(r[l]).org?h.org:h.cho}}if(a&&a.indexOf(r)>0)return void this.setItemIndex(s,e,!0)}else if(u&&u.indexOf(r)>0)return void this.setItemIndex(s,e,!0)}}this.setItemIndex(-1)}finally{e&&(this._selected=!0)}},i.CLOSE_UP="onDropDownListCloseUp",i.EDITOR_FOCUS="onDropDownListEditorFocus",i.ACTIVE_DESCENDENT="onDropDownListActiveDescendant",i}(Re),za=function(e){function i(t,i){var o=e.call(this,t,i)||this;o._trimLabelText=!0,o._lookup=!1,o._labeling=!1,o._domain=null,o._closing=!1,o._selectedIndex=-1,o._globalMouseHandler=function(t){var e=t.target;if(o._isMarquee(e))o.closeUp(!1,!1);else{var i=o._grid.editController._commandView;if(!(Rt.isMobile()&&i&&i._dom&&i._dom.contains(e))){for(;e;){if(e==o._list._element)return;e=e.parentElement}o.closeUp(!0,!0)}}};var r=o._list=o._createDropDown(t.container);return o._setEditorAria("aria-owns",r._element.id),o._setEditorAria("aria-expanded","false"),o._setEditorAria("aria-haspopup","true"),o._setEditorAria("role","combobox"),o._list.addListener(o),o}return o(i,e),i.prototype._doDispose=function(){this._globalMouseHandler=null,this._list.removeListener(this),this._list.dispose(),this._list=this._items=this._values=this._labels=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"values",{get:function(){return this._values},set:function(t){(t=Rt.makeArray(t,!0))?this._values=t.map((function(t){return null!=t?String(t):t})):this._values=[]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labels",{get:function(){return this._labels},set:function(t){this._labels=t?t.slice():[]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayLabels",{get:function(){return this._displayLabels},set:function(t){this._displayLabels=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"domainOnly",{get:function(){return this._domainOnly},set:function(t){this._domainOnly=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownWidth",{get:function(){return this._dropDownWidth},set:function(t){this._dropDownWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){this._dropDownPosition=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){this._dropDownCount=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownWhenEnter",{get:function(){return this._dropDownWhenEnter},set:function(t){this._dropDownWhenEnter=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemSortStyle",{get:function(){return this._itemSortStyle},set:function(t){this._itemSortStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"caseSensitive",{get:function(){return this._caseSensitive},set:function(t){this._caseSensitive=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"partialMatch",{get:function(){return this._partialMatch},set:function(t){this._partialMatch=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){this._commitOnSelect=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){this._dropDownWhenClick=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trimLabelText",{get:function(){return this._trimLabelText},set:function(t){this._trimLabelText=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"separator",{get:function(){return this._separator},set:function(t){this._separator=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemColumned",{get:function(){return this._itemColumned},set:function(t){this._itemColumned=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"listCallback",{get:function(){return this._listCallback},set:function(t){this._listCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"templateCallback",{get:function(){return this._templateCallback},set:function(t){this._templateCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return this._list.listing},enumerable:!1,configurable:!0}),i.prototype.dropDown=function(t,e){var i=this;if(void 0===t&&(t=!1),void 0===e&&(e=!0),!this.readOnly&&!this.listing&&!this._closing){e&&this._refreshItems(!1,!1,!0);var o=St(this._container),r=It(this._container);if(t||this._items&&this._items.length>0){var n=this._list,s=this._options,a=o.body,l=Rt.getSize(this._container);if(this._grid.accessibility){var h=Rt.getSize(this._grid.container._containerDiv);l.cx=l.x-h.x+l.cx,l.cy=l.y-h.y+l.cy}n.viewGridInside=s.viewGridInside,n.displayLabels=this.displayLabels,n.separator=this.separator,n.itemColumned=this.itemColumned,n.items=this._items,this._saveIndex=this._selectedIndex,this._saveText=this._editor.value,n.caseSensitive=this._caseSensitive,n.partialMatch=this._partialMatch,n.dropDownCount=this._dropDownCount,n.dropDownWidth=this._dropDownWidth,n.dropDownPosition=this._dropDownPosition,n.sortStyle=this._itemSortStyle,n.trimLabelText=this._trimLabelText,n._templateCallback=function(){if(i._templateCallback)return function(t,e){return i._templateCallback(i._grid.handler,i.editIndex.toProxy(),t,e.value,e.label,e.item)}}();var u=this._grid.displayOptions;return n.setZIndex(u.baseZindex+3),this.isShowMarquee()?(this._showMarquee(a),n.viewGridInside=!1,n.show(a,0,0,0,null),this._centerPopup(a,n._element)):(n.show(a,l.cx+1,l.cy+l.height,this._cellBounds.width,Rt.getSize(this._editor)),this.registerPositionListener()),n.valueIndex=this._selectedIndex,this._setEditorAria("aria-expanded","true"),!Rt.isSlotMode()&&r.addEventListener(Rt.isIEMode()?"mousedown":"pointerdown",this._globalMouseHandler),!0}}return!1},i.prototype.resetPosition=function(){var t=Rt.getSize(this._container),e=this._list;if(this._grid.accessibility){var i=Rt.getSize(this._grid.container._containerDiv);t.cx=t.x-i.x+t.cx,t.cy=t.y-i.y+t.cy}e.$_resetPosition(t.cx+1,t.cy+t.height,this._cellBounds.width,Rt.getSize(this._editor))},i.prototype.closeUp=function(t,e){if(this.unRegisterPositionListener(),this.listing){this._closing=!0;var i=this._list,o=this._items;try{var r=It(this._container);!Rt.isSlotMode()&&r.removeEventListener(Rt.isIEMode()?"mousedown":"pointerdown",this._globalMouseHandler),this._closeMarquee(),i.hide();var n=void 0;if(t&&i.selected&&(n=i.valueIndex)>=0&&o&&o.length>n){this._selectedIndex=n;var s=this._labeling?o[n].label:o[n].value;this._editor.value=s,n==this._saveIndex&&s==this._saveText||this._dispatchChange(),e&&this._commitOnSelect&&this._dispatchCommit()}}finally{this._closing=!1,this._setEditorAria("aria-expanded","false"),this.setActiveDescendant(null)}return!0}},i.prototype.initOptions=function(){e.prototype.initOptions.call(this),this._values=[],this._labels=[],this._displayLabels=t.DropDownValueLabel.LABEL,this._separator=" - ",this._itemColumned=!1,this._domainOnly=!1,this._textReadOnly=!1,this._dropDownWidth=-1,this._dropDownPosition=t.DropDownPosition.BUTTON,this._dropDownCount=8,this._itemSortStyle=t.DropDownSortStyle.NONE,this._caseSensitive=!1,this._partialMatch=!1,this._commitOnSelect=!0,this._dropDownWhenClick=!1,this._dropDownWhenEnter=!1,this._listCallback=null,this._templateCallback=null,this._tempItems=null,this._viewGridInside=!1,this._setEditorAria("aria-activedescendant",null)},i.prototype.initDefaultOptions=function(){var t=this._grid;t&&Ma.initDefault(this,Xe.editor.dropdownCellEditor,t.editorOptions.dropdownCellEditor)},i.prototype.setEditIndex=function(t){e.prototype.setEditIndex.call(this,t),this._lookup=!1,this._labeling=!1,this._domain=null,this._items=null,this._refreshItems(!1,!1,!1)},i.prototype.setEditValue=function(t){var i=this,o=-1,r=function(t,o){var r;e.prototype.setEditValue.call(i,t?((r={})[t]=o,r):o)};this._value=t;var n=this._editIndex.dataColumn,s=n.getField(),a=n.objectKey||s.objectKey;if(t=a&&t?t[a]:t,this._lookup){var l=this._domain;if(l){var h=o=l.keys?l.keys.indexOf(t):-1;h>=0&&l.values&&l.values.length>h?l.values[h]:t}else o=this._editIndex.dataColumn.getLookupIndex(t);this._labeling?r(a,l?o>=0&&l.values&&l.values.length>o?l.values[o]:t:o>=0?this._editIndex.dataColumn.getLookupLabel(t,!1):t):r(a,t)}else this._values&&this._labeling&&this._labels?(o=this._values.indexOf(t),r(a,this._labels[o]||t)):r(a,t);this._selectedIndex=o},i.prototype.isEdited=function(){var t=e.prototype.isEdited.call(this);return t&&this.domainOnly&&(t=void 0!==this.$_getEditValue(!1)),t},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype._setEditorAria=function(t,e){e?this._editor.setAttribute(t,e):this._editor.removeAttribute(t)},i.prototype._createDropDown=function(t){return new Ya(t)},i.prototype.setCellEditValue=function(t,i){e.prototype.setCellEditValue.call(this,t,i)},i.prototype.getEditValue=function(t,e){return void 0===t&&(t=!0),!this.isEdited()&&this._selectedIndex<0?this._value:this.$_getEditValue(t,e)},i.prototype.getEditListItem=function(){var t=this._selectedIndex;if(this.isEdited()||!(t<0))return this._list.items&&t>=0&&t<this._list.items.length?this._list.items[t].item:void 0},i.prototype.setBounds=function(t,i,o,r,n){e.prototype.setBounds.call(this,t,i,o,r,n)},i.prototype._createEditor=function(t){return e.prototype._createEditor.call(this,t)},i.prototype._textHandler=function(){this._requestStart()},i.prototype._compositionstartHandler=function(t){e.prototype._compositionstartHandler.call(this,t)},i.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var i=this._list,o=i.itemIndex;switch(t.keyCode){case 8:case 46:var r=Rt.ctrlKey(t);if(!r&&!t.shiftKey&&this.domainOnly&&this.allowEmpty);else if(!r&&!t.shiftKey&&this.textReadOnly)return this._requestStart(),t.preventDefault(),!0;break;case 32:if(this.listing&&i.currentIsMore(o))return i.addMoreItems(),t.preventDefault(),!0;break;case 13:if(this.dropDownWhenEnter&&!this.listing)return this._requestStart(),t.preventDefault(),!0;if(this.listing&&i.currentIsMore(o))return i.addMoreItems(),t.preventDefault(),!0;if(this.closeUp(!0,!1))return!this._sendToParent(t);break;case 27:if(this.closeUp(!1,!1))return t.preventDefault(),!0;break;case 40:if(!t.shiftKey&&t.altKey&&!this.listing)return this._requestStart(),t.preventDefault(),!0;if(this.listing)return this._list.setItemIndex(Math.min(i.itemCount-1,o+1)),t.preventDefault(),!0;break;case 34:if(this.listing)return this._list.setItemIndex(Math.min(i.itemCount-1,o+i.dropDownCount)),t.preventDefault(),!0;break;case 38:if(t.altKey&&this.listing)return this.closeUp(!1,!1),t.preventDefault(),!0;if(this.listing)return this._list.setItemIndex(Math.max(0,o-1)),t.preventDefault(),!0;break;case 33:if(this.listing)return this._list.setItemIndex(Math.max(0,o-i.dropDownCount)),t.preventDefault(),!0}return e.prototype._keyDownHandler.call(this,t)}},i.prototype._keyPressHandler=function(t){this.isDisabled()||(e.prototype._keyPressHandler.call(this,t),t.keyCode&&this.textReadOnly&&t.preventDefault())},i.prototype._inputHandler=function(t){this.isDisabled()||(this.textReadOnly&&(t.target.value=this._oldValue||""),e.prototype._inputHandler.call(this,t))},i.prototype._requestStart=function(t){return!!e.prototype._requestStart.call(this,t)&&(this._isMobile?t&&this.dropDown():!1!==t&&this.dropDown(),!0)},i.prototype._doChanged=function(){this._selectedIndex=-1,e.prototype._doChanged.call(this),this.listing&&this._list.$_search(this._editor.value)},i.prototype.dropDownList=function(t){this.dropDown(t)&&this._setEditorAria("aria-expanded","true")},i.prototype.closeList=function(t){this.closeUp(t,!1),this._setEditorAria("aria-expanded","false")},i.prototype.$_setItems=function(t,e,i){this._items=[];for(var o=0,r=t.length;o<r;o++)this._items.push({value:t[o],label:e&&e.length>o?e[o]:t[o],item:i&&i[o]})},i.prototype._refreshItems=function(e,i,o){var r,n=this,s=function(){return n.displayLabels!==t.DropDownValueLabel.VALUE&&n._labels&&n._labels.length>=n._values.length},a=function(t){if(t&&t.list){var e=[],i=[],o=[],r=t.value||"value",a=t.label||"label";t.list.forEach((function(t){e.push(t[r]),i.push(null!=t[a]?t[a]:t[r]),o.push(t)})),n.$_setItems(n._values=e,n._labels=i,o)}n._labeling=s()},l=function(){if(h.dataColumn&&h.item&&(h.dataRow>=0||Ao(u.itemState))){var t=h.dataColumn;if(t.lookupSource){for(var e=t.lookupKeyFieldIds,i=[],r=0;r<e.length-1;r++)i.push(u.getData(e[r]));var a=t.lookupSource.getTextDomain(i);a&&a.values&&a.values.length>0&&(n.$_setItems(a.keys,a.values,a.listItem),n._labeling=!0,n._lookup=!0,n._domain=a,o&&n.setEditValue(n._value))}else t.values&&t.values.length>0&&(n.$_setItems(t.values,t.labels,t.listItem),n._labeling=s(),n._lookup=!0)}},h=this.editIndex,u=h.item;if((o=o&&!!this._listCallback)&&(r=this._listCallback(this._grid.handler,this.editIndex.toProxy())),r?(this._lookup=!1,this._domain=null,r instanceof Promise?(this._items=null,r.then((function(t){t?a(t):l(),n.dropDown(!1,!1)}))):a(r)):this._values&&(this._values.length>0||i)?(this.$_setItems(this._values,this._labels,null),this._labeling=s()):l(),e&&this.listing){this._list.items=this._items;var c=Rt.getSize(this._container);this._list._resetItems(c.cx+1,c.cy+c.height,this._cellBounds.width,Rt.getSize(this._editor))}},i.prototype.$_getEditValue=function(e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var o=this.text,r=Na.prototype.getEditValue.call(this,e,i),n=this._editIndex.dataColumn,s=this._selectedIndex,a=s>=0,l=n.getField(),h=l.dataType===t.ValueType.OBJECT&&(n.objectKey||l.objectKey),u=h&&r?r[h]:r;if(this._lookup){if(this._domain){if(this._labeling)u=(c=a?s:this._domain.values?this._domain.values.indexOf(o):-1)>=0&&this._domain.keys&&this._domain.keys.length>c?this._domain.keys[c]:u;if(this.domainOnly&&u&&(!this._domain.keys||this._domain.keys.indexOf(u)<0))return Ma.Unselected}else if(this._labeling&&(u=a?n.getLookupValue(s):n.getSourceValue(o)||(h?r[h]:r)),this.domainOnly&&u&&(!n.values||n.values.indexOf(u)<0))return Ma.Unselected}else{var c;if(this._labeling)(c=a?s:this._labels?this._labels.indexOf(o):-1)>=0&&c<this._values.length&&(u=this._values[c]);if(this.domainOnly&&u&&(!this._values||this._values.indexOf(u)<0))return Ma.Unselected}return h?(r[h]=u,r):u},i.prototype.setActiveDescendant=function(t){this._setEditorAria("aria-activedescendant",t)},i.prototype.onDropDownListCloseUp=function(t,e){!Rt.isMobile()&&this.setFocus(),this.closeUp(e,!0)},i.prototype.onDropDownListEditorFocus=function(){this.setFocus()},i.prototype.onDropDownListActiveDescendant=function(t,e){this.setActiveDescendant(e)},i.INPUT_CSS="rg-list-editor",i.$$_LIST_ID=0,i}(Ga),qa=function(e){function i(t){var o=e.call(this,t)||this;return o._selectItemIndices=[],o._acceptText=null,o._cancelText=null,o._showButtons=!1,o._showAllCheck=!1,o._acceptClickHandler=function(t){this.fireEvent(i.CLOSE_UP_2,!0)}.bind(o),o._cancelClickHandler=function(t){this.fireEvent(i.CANCEL,!1)}.bind(o),o._checkClickHandler=function(t){t.stopImmediatePropagation();var e=t.currentTarget,i=e.parentElement;if(i){var o=Rt.getChildIndex(i),r=e.checked;this.$_changeCheckIndex(i,o,r,!0)}}.bind(o),o._allCheckClickHandler=function(t){if(t.stopImmediatePropagation(),2==t.eventPhase&&t.currentTarget==this._allCheckElement)this._allCheck.checked=!this._allCheck.checked,this.$_toggleAllCheck();else if(2==t.eventPhase&&t.currentTarget==this._allCheck)return void this.$_toggleAllCheck()}.bind(o),o._divClickHandler=function(t){Rt.stopEvent(t,!0),t.currentTarget.firstElementChild.click()}.bind(o),o}return o(i,e),Object.defineProperty(i.prototype,"valueIndices",{get:function(){return this._selectItemIndices.slice()},set:function(t){this._selectItemIndices=[],null!=t&&(this._selectItemIndices=t.slice(),this.listing&&this._refreshItems(),this._selected=!1)},enumerable:!1,configurable:!0}),i.prototype.changeCheckIndex=function(t,e,i){var o=this._listElement.childNodes;if(t>=0&&t<o.length){for(var r=o[t],n=r.getElementsByTagName("input"),s=void 0,a=0,l=n.length;a<l;a++)if("checkbox"==n[a].type){s=n[a];break}s&&(s.checked=null!=e?e:!s.checked,this.$_changeCheckIndex(r,t,s.checked,i))}},i.prototype.$_changeCheckIndex=function(t,e,o,r){var n=this._selectItemIndices;if(!(e<0||e>=this._items.length)){var s=this._items[e].index;o?n.indexOf(s)<0&&n.push(s):n.indexOf(s)>=0&&n.splice(n.indexOf(s),1),t.className="rg-multicheck-item"+(o?" rg-multicheck-select":""),t.setAttribute("aria-selected",o?"true":"false"),this._selected=!0,this.$_changeAllCheck(),r&&this.fireEvent(i.CHECK_CLICK)}},i.prototype._createList=function(){var t=this._container.doc,e=t.createElement("div");e.tabIndex=-1,e.className="rg-multicheck",e.id="rg-dropdown-list-"+za.$$_LIST_ID++,e.setAttribute("role","listbox");var i=t.createElement("div");i.className="rg-multicheck-allcheck",this._allCheckElement=i,i.style.paddingLeft="2px",Rt.disableSelection(i),e.appendChild(i);var o=t.createElement("div");o.className="rg-multicheck-list",this._listElement=o,e.appendChild(o);var r=t.createElement("div");return r.style.textAlign="center",r.style.whiteSpace="nowrap",r.className="rg-multicheck-button",this._buttonElement=r,r.style.margin="2px",Rt.disableSelection(r),e.appendChild(r),e},i.prototype._getListElement=function(){return this._listElement},i.prototype.setZIndex=function(t){var e=this._element.style;e.zIndex=String(t),(e=this._listElement.style).zIndex=String(t)},i.prototype.$_toggleAllCheck=function(){for(var t=this._listElement.childElementCount,e=this._allCheck.checked,o=0;o<t;o++)this.changeCheckIndex(o,e,!1);this.fireEvent(i.CHECK_CLICK)},i.prototype.$_changeAllCheck=function(){if(this._showAllCheck){for(var t=!0,e=this._listElement.children,i=0;i<e.length;i++){var o=e[i].firstElementChild;t=t&&o.checked}this._allCheck.checked=t}},i.prototype._show=function(t,e,i,o){var r=this._element;if(r){var n=r.style;n.position="absolute",n.cssFloat="none",n.clear="both",n.boxSizing="border-box",n.minWidth="20px",n.minHeight="10px",n.overflow="visible",n.removeProperty("width"),n.removeProperty("height"),(n=this._listElement.style).position="relative",n.cssFloat="none",n.clear="both",n.boxSizing="border-box",n.minWidth="20px",n.minHeight="10px",n.overflow="auto",(n=this._buttonElement.style).position="relative",n.cssFloat="none",n.clear="both",n.boxSizing="border-box",n.marginLeft="0px",n.marginRight="0px",this._firstChild=null,Rt.clearChildren(this._listElement),Rt.disableSelection(this._listElement),this._containerElement.appendChild(r),this._buildItems(),this.$_buildButtons(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o),this._itemIndex=-1,this._selectItemIndices.length&&this.setItemIndex(this._selectItemIndices.slice().sort((function(t,e){return t-e}))[0]),this._selected=!1}},i.prototype._resetWidth=function(t){e.prototype._resetWidth.call(this,t);var i=this._element,o=Math.floor(Rt.getSize(this._buttonElement).width),r=Rt.getSize(i).width;isNaN(o)||(r=Math.max(r,o)),i.style.width=r+"px"},i.prototype._resetItems=function(t,e,i,o){Rt.clearChildren(this._listElement),this._firstChild=null,this._buildItems(),this.$_buildButtons(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o)},i.prototype._buildItems=function(){var e,o=this._container.doc,r=0,n=function(t,e,i){var r=e?e.value.toString():"",n=o.createElement("label");return n.style.whiteSpace="pre",n.innerHTML=r?Rt.htmlEncode(r):"&nbsp;",n.htmlFor=i&&i.id,n.tabIndex=-1,n.className="rg-dropdown-value",Rt.disableSelection(n),t.appendChild(n),n}.bind(this),s=function(t,e,i){var r=e?e.label.toString():"";r=this._trimLabelText?r.trim():r;var n=o.createElement("label");return!this._trimLabelText&&(n.style.whiteSpace="pre"),n.innerHTML=r?Rt.htmlEncode(r):"&nbsp;",n.htmlFor=i&&i.id,n.tabIndex=-1,n.className="rg-dropdown-label",Rt.disableSelection(n),t.appendChild(n),n}.bind(this),a=function(t,e){var i=o.createElement("span");i.style.whiteSpace="pre",i.style.pointerEvents="none",i.innerHTML=e?Rt.htmlEncode(e):"&nbsp;",i.tabIndex=-1,i.className="rg-dropdown-separator",Rt.disableSelection(i),t.appendChild(i)}.bind(this),l=function(t){var i=Rt.getTextLength(t.textContent);i>r&&(e=t,r=i)}.bind(this),h=this._items;if(h&&!(h.length<1)){for(var u=0,c=h.length;u<c;u++){var d=h[u],p=o.createElement("div");p.setAttribute("role","option"),p.id=this._element.id+"-"+u.toString();var f=p.style;f.position="relative",f.cssFloat="none",f.paddingTop="1px",f.paddingBottom="1px",f.paddingLeft="2px",f.paddingRight="2px",f.whiteSpace="nowrap",f.cursor="default";var _=this._selectItemIndices.indexOf(h[u].index)>=0;p.className="rg-multicheck-item"+(_?" rg-multicheck-select":""),Rt.disableSelection(p),this._listElement.appendChild(p),0==u&&(this._firstChild=p),p.onclick=this._divClickHandler;var g=o.createElement("input");g.id="$multiCheck_item_"+i.$_checkId++,g.type="checkBox",g.onclick=this._checkClickHandler,g.checked=_,p.setAttribute("aria-selected",_?"true":"false"),p.appendChild(g);var y=null;if(this._templateCallback){var m=document.createElement("div");m.style.display="inline-block",p.appendChild(m),this._templateCallback(m,d)}else switch(this.displayLabels){case t.DropDownValueLabel.LABEL:s(p,d,g);break;case t.DropDownValueLabel.VALUE:n(p,d,g);break;case t.DropDownValueLabel.LABEL_VALUE:y=s(p,d,g),a(p,this.separator),n(p,d,g);break;case t.DropDownValueLabel.VALUE_LABEL:y=n(p,d,g),a(p,this.separator),s(p,d,g)}y&&this.itemColumned&&(l(y),p._span=y)}if(this.itemColumned&&e){var b=Math.ceil(Rt.getSize(e).width);if(b>0)for(u=0,c=this._listElement.childNodes.length;u<c;u++){(y=this._listElement.childNodes[u]._span)&&(y.style.display="inline-block",y.style.width=b+"px")}}}},i.prototype.setButtonOptions=function(t,e,i,o,r){this._acceptText=t,this._cancelText=e,this._showButtons=i,this._showAllCheck=o,this._allCheckText=r,this.$_buildButtons()},i.prototype.$_buildButtons=function(){var t=this._container.doc;if(this._buttonElement){this._buttonElement.style.display=this._showButtons?"":"none",Rt.clearChildren(this._buttonElement);var e=t.createElement("label"),o=e.style;e.innerHTML=this._acceptText,e.onclick=this._acceptClickHandler,e.className="rg-multicheck-accept",o.cursor="pointer",Rt.disableSelection(e),this._buttonElement.appendChild(e),o=(e=t.createElement("label")).style,e.innerHTML=this._cancelText,e.onclick=this._cancelClickHandler,e.className="rg-multicheck-cancel",o.marginLeft="2px",o.cursor="pointer",Rt.disableSelection(e),this._buttonElement.appendChild(e);var r=this._allCheckElement;if(r.onclick=this._allCheckClickHandler,Rt.clearChildren(r),this._showAllCheck){r.style.display="";var n=t.createElement("input");n.type="checkbox",n.id="$multiCheck_item_"+i.$_checkId++,n.onclick=this._allCheckClickHandler,this._allCheck=n,r.appendChild(n);var s=t.createElement("label");s.innerHTML=this._allCheckText,s.htmlFor=n.id,s.tabIndex=-1,Rt.disableSelection(s),r.appendChild(s),this.$_changeAllCheck()}else r.style.display="none"}},i.prototype._refreshItems=function(){for(var t=this._listElement.childNodes,e=-1,i=0;i<t.length;i++){e=i<this._items.length?this._items[i].index:-1;var o=t[i];i===this._itemIndex?(Rt.addClassName(o,"rg-multicheck-selectitem"),this.fireEvent(Ya.ACTIVE_DESCENDENT,o.id)):Rt.removeClassName(o,"rg-multicheck-selectitem")}if((e=this._itemIndex)>=0&&e<t.length)if((o=t[e]).offsetTop<this._listElement.scrollTop)this._listElement.scrollTop=o.offsetTop;else{var r=o.offsetTop+Rt.getSize(o).height;r>=this._listElement.scrollTop+this._listElement.clientHeight&&(this._listElement.scrollTop=r-this._listElement.clientHeight)}},i.CLOSE_UP_2="onMultiCheckListCloseUp",i.CANCEL="onMultiCheckListCancel",i.CHECK_CLICK="onMultiCheckListCheckClick",i.$_checkId=0,i}(Ya),Ka=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o._showButtons=!0,o._showAllCheck=!1,o._setEditorAria("aria-multiselectable","true"),o}return o(i,e),Object.defineProperty(i.prototype,"showButtons",{get:function(){return this._showButtons},set:function(t){this._showButtons=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"acceptText",{get:function(){return this._acceptText||Ue.messages.checkListAcceptText},set:function(t){this._acceptText=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cancelText",{get:function(){return this._cancelText||Ue.messages.checkListCancelText},set:function(t){this._cancelText=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"allCheckText",{get:function(){return this._allCheckText||Ue.messages.checkListAllCheckText},set:function(t){this._allCheckText=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showAllCheck",{get:function(){return this._showAllCheck},set:function(t){this._showAllCheck=t},enumerable:!1,configurable:!0}),i.prototype._createDropDown=function(t){return new qa(t)},i.prototype.setMask=function(t){this._mask=null},i.prototype.dropDown=function(t,e){var i=this;if(void 0===t&&(t=!1),void 0===e&&(e=!0),!this.readOnly&&!this.listing&&!this._closing){e&&this._refreshItems(!1,!1,!0);var o=St(this._container),r=It(this._container);if(t||this._items&&this._items.length>0){var n=this._list,s=this._options;this._selectedIndices=function(t,e,i){if(!e)return[];var o=e.split(i);return t.map((function(t,e){if(o.indexOf(t.value)>=0)return e})).filter((function(t){return null!=t}))}(this._items,this._value,this._editIndex.dataColumn.valueSeparator)||[],n.viewGridInside=s.viewGridInside,n.displayLabels=this.displayLabels,n.separator=this.separator,n.itemColumned=this.itemColumned,n.items=this._items;var a=Rt.getSize(this._container);if(this._grid.accessibility){var l=Rt.getSize(this._grid.container._containerDiv);a.cx=a.x-l.x+a.cx,a.cy=a.y-l.y+a.cy}this._saveIndices=this._selectedIndices.slice(),this._saveText=this._editor.value,n.caseSensitive=this.caseSensitive,n.dropDownCount=this.dropDownCount,n.dropDownWidth=this.dropDownWidth,n.dropDownPosition=this.dropDownPosition,n.setButtonOptions(this.acceptText,this.cancelText,this.showButtons,this.showAllCheck,this.allCheckText),n.sortStyle=this.itemSortStyle,n.valueIndices=this._selectedIndices.slice(),n.trimLabelText=this.trimLabelText,n._templateCallback=function(){if(i._templateCallback)return function(t,e){return i._templateCallback(i._grid.handler,i.editIndex.toProxy(),t,e.value,e.label,e.item)}}();var h=this._grid.displayOptions;n.setZIndex(h.baseZindex+3);var u=o.body;return this.isShowMarquee()?(n.viewGridInside=!1,this._showMarquee(u),n.show(u,0,0,0,null),this._centerPopup(u,n._element)):(n.show(u,a.cx+1,a.cy+a.height,this._cellBounds.width,Rt.getSize(this._editor)),this.registerPositionListener()),!Rt.isSlotMode()&&r.addEventListener(Rt.isIEMode()?"mousedown":"pointerdown",this._globalMouseHandler),!0}}return!1},i.prototype.getCheckValues=function(t,e,i){for(var o=[],r=0,n=t.length;r<n;r++)t[r]>=0&&t[r]<e.length&&o.push(this._labeling&&!i?e[t[r]].label:e[t[r]].value);return o},i.prototype.closeUp=function(t,e){if(this.unRegisterPositionListener(),this.listing){this._closing=!0;try{var i=this._list,o=this.editIndex&&this.editIndex.dataColumn,r=It(this._container);!Rt.isSlotMode()&&r.removeEventListener(Rt.isIEMode()?"mousedown":"pointerdown",this._globalMouseHandler),this._closeMarquee(),i.hide(),t&&i.selected?(this._selectedIndices=i.valueIndices.slice(),this._editor.value=this.getCheckValues(this._selectedIndices,this._items).join(o.valueSeparator),Rt.equalArrays(this._saveIndices,this._selectedIndices)&&this._editor.value==this._saveText||(this._dispatchChange(),e&&this.commitOnSelect&&this._dispatchCommit())):this._selectedIndices=this._saveIndices.slice()}finally{this._closing=!1}return!0}return!1},i.prototype.initOptions=function(){e.prototype.initOptions.call(this),this._showButtons=!0,this._showAllCheck=!1},i.prototype.initDefaultOptions=function(){var t=this._grid;t&&Ma.initDefault(this,Xe.editor.multiCheckCellEditor,t.editorOptions.multiCheckCellEditor)},i.prototype.applyOptions=function(t){e.prototype.applyOptions.call(this,t)},i.prototype.setEditValue=function(t){var e=this,i=[],o=-1,r=this._editIndex.dataColumn,n=r.getField(),s=r.objectKey||n.objectKey,a=function(t){Ma.prototype.setEditValue.call(e,t),e._editor.value=null==t?"":t};s&&t&&(t=t[s]);var l=Rt.isArray(t)?t:t?t.split(this._editIndex.dataColumn.valueSeparator):[];if(this._value=t,this._lookup){var h=this._domain;if(h)for(var u=0,c=l.length;u<c;u++)(o=h.keys.indexOf(l[u]))>=0&&i.push(o<h.values.length?h.values[o]:l[u]);this._labeling?a(h?i.join(this._editIndex.dataColumn.valueSeparator):this._editIndex.dataColumn.getLookupLabel(t,!1)):a(t)}else if(this._values){for(u=0,c=l.length;u<c;u++)(o=this._values.indexOf(l[u]))>=0&&i.push(this._labels&&o>=0&&this._labels.length>o?this._labels[o]:l[u]);this._labeling&&this._labels?a(i.join(this._editIndex.dataColumn.valueSeparator)):a(t)}else a(t)},i.prototype.setCellEditValue=function(t,i){e.prototype.setCellEditValue.call(this,t,i)},i.prototype.getEditValue=function(t,e){return void 0===t&&(t=!0),void 0===e&&(e=!1),this.isEdited()||this._list.selected?this.$_getEditValue(t,e):this._value},i.prototype.getEditListItem=function(){var t=this;if(this.isEdited()||!(this._selectedIndices.length<0)){var e=this._list.items.map((function(e,i){if(t._selectedIndices.indexOf(i)>=0)return e&&e.item})).filter((function(t){return null!=t}));return e&&e.length>0?e:void 0}},i.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var i=this._list;if(Rt.ctrlKey(t)&&65==t.keyCode&&this.listing)return t.preventDefault(),i._allCheck&&(i._allCheck.checked=!i._allCheck.checked,i.$_toggleAllCheck()),!0;if(32===t.keyCode)if(this.listing)return i.changeCheckIndex(i.itemIndex,null,!0),t.preventDefault(),!0;return e.prototype._keyDownHandler.call(this,t)}},i.prototype._keyPressHandler=function(t){e.prototype._keyPressHandler.call(this,t),this._list._selected=!1},i.prototype._inputHandler=function(t){e.prototype._inputHandler.call(this,t),this._list._selected=!1},i.prototype.$_getEditValue=function(e,i){function o(t,e,i,o,r){var n=[],s=e&&e.split(r.valueSeparator);if(s&&s.length>0)for(var a=0,l=s.length;a<l;a++)o.indexOf(s[a])>=0&&o.indexOf(s[a])<i.length?n.push(i[o.indexOf(s[a])]):(i.indexOf(s[a])>=0||!t.domainOnly)&&n.push(s[a]);return n}void 0===e&&(e=!1),void 0===i&&(i=!1);var r=this._strToVal(this.text),n=Na.prototype.getEditValue.call(this,e,i),s=this._editIndex.dataColumn,a=s.getField(),l=a.dataType===t.ValueType.OBJECT&&(s.objectKey||a.objectKey),h=l?n[l]:n,u=this._selectedIndices.slice(),c=[],d=this._list.selected;if(this._lookup){if(this._domain){if(this._labeling){if(d)for(var p=0,f=u.length;p<f;p++)u[p]<this._domain.keys.length&&c.push(this._domain.keys[u[p]]);else r&&(c=o(this,r,this._domain.keys,this._domain.values,s));h=c.join(s.valueSeparator)}}else if(this._labeling&&void 0===(h=d?s.getLookupValues(u):s.getSourceValues(r))&&(h=n),this.domainOnly&&h){if(!s.values)return Ma.Unselected;for(p=(h=Rt.isArray(h)?h:h&&h.split?h.split(s.valueSeparator):[h]).length-1;p>=0;p--)s.values.indexOf(h[p])<0&&h.splice(p,1)}}else{if(this._labeling){if(d)for(p=0,f=u.length;p<f;p++)u[p]<this._values.length&&c.push(this._values[u[p]]);else r&&(c=o(this,r,this._values,this._labels,s));h=c.join(s.valueSeparator)}if(this.domainOnly&&h){if(!this._values)return Ma.Unselected;for(p=(h=Rt.isArray(h)?h:h&&h.split?h.split(s.valueSeparator):[h]).length-1;p>=0;p--)this._values.indexOf(h[p])<0&&h.splice(p,1)}}return h=Rt.isArray(h)?h.join(s.valueSeparator):h,l?(n[l]=h,n):h},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype.onMultiCheckListCloseUp=function(t,e){!this._isMobile&&this.setFocus(),this.closeUp(e,!0)},i.prototype.onMultiCheckListCheckClick=function(t){this._editor.value=this.getCheckValues(t._selectItemIndices,this._items).join(this.editIndex.dataColumn.valueSeparator),this._selectedIndices=t._selectItemIndices.slice(),this._saveIndices=t._selectItemIndices.slice(),this._modified=!0,this._dispatchChange(),!this._isMobile&&this._editor.focus()},i.prototype.onMultiCheckListCancel=function(){this._controller.cancelEditor(!0)},i.INPUT_CSS="rg-multicheck-editor",i}(za),Xa=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._searchLength=1,o._searchDelay=1e3,o._useCtrlEnterKey=!1,o._useEnterKey=!1,o._initCount=0,o._moreItemCount=25,o._reInquery=!0,o._timer=void 0,o._editor.setAttribute("aria-autocomplate","list"),o.assignFrom(Xe.editor.searchCellEditor),o}return o(e,t),Object.defineProperty(e.prototype,"searchLength",{get:function(){return this._searchLength},set:function(t){this._searchLength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"searchDelay",{get:function(){return this._searchDelay},set:function(t){this._searchDelay=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useCtrlEnterKey",{get:function(){return this._useCtrlEnterKey},set:function(t){this._useCtrlEnterKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useEnterKey",{get:function(){return this._useEnterKey},set:function(t){this._useEnterKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initCount",{get:function(){return this._initCount},set:function(t){this._initCount=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"moreItemCount",{get:function(){return this._moreItemCount},set:function(t){this._moreItemCount=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"moreText",{get:function(){return this._moreText||Ue.messages.searchEditorMoreText},set:function(t){this._moreText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reInquery",{get:function(){return this._reInquery},set:function(t){this._reInquery=t},enumerable:!1,configurable:!0}),e.prototype.fillItems=function(t,e,i,o){if(this.listing&&t==this.getEditText()){if(o&&!e){e=[],i=[];var r=o.value||"value",n=o.label||"label";o.list.forEach((function(t){e.push(t[r]),i.push(t[n]||t[r])}))}return this.values=e,this.labels=i,this._tempItems=o&&o.list,this._refreshItems(!0,!0,!1),this._list.$_search(this._editor.value,!0),!0}return!1},e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this.initCount=0,this.moreItemCount=25},e.prototype.initDefaultOptions=function(){var t=this._grid;t&&Ma.initDefault(this,Xe.editor.searchCellEditor,t.editorOptions.searchCellEditor)},e.prototype.$_setItems=function(e,i){t.prototype.$_setItems.call(this,e,i,this._tempItems),(!this.values||this.values.length<=0)&&(this.values=e,this.labels=i)},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var i=13==e.keyCode,o=Rt.ctrlKey(e);if(i&&(i=o?this.useCtrlEnterKey:this.useEnterKey&&(!this._items||this._items.length<1)),i&&this.editing){Rt.stopEvent(e),this.$_stopTimer();var r=this.getEditText();return(o||r&&r!=this._searchKey)&&(this.listing||this.dropDown(!0),this._searchKey=r,this._dispatchSearch(r)),!0}return t.prototype._keyDownHandler.call(this,e)}},e.prototype._inputHandler=function(e){this.isDisabled()||(t.prototype._inputHandler.call(this,e),this.$_search())},e.prototype._doEndEdit=function(){t.prototype._doEndEdit.call(this),this.$_stopTimer(),this._searchKey=null},e.prototype.$_getEditValue=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);var i=this.text,o=Na.prototype.getEditValue.call(this,t,e),r=this._selectedIndex,n=r>=0;if(this._labeling){var s=n?r:this._labels?this._labels.indexOf(i):-1;s>=0&&s<this._values.length&&(o=this._values[s])}return this.domainOnly&&o&&(!this._values||this._values.indexOf(o)<0)?Ma.Unselected:o},e.prototype.dropDown=function(e){var i=this._list;return i&&(i.initCount=this.initCount,i.moreItemCount=this.moreItemCount,i.moreText=this.moreText),t.prototype.dropDown.call(this,!0)},e.prototype.buttonClicked=function(t){this.dropDown();var e=this.getEditText(),i=this._dispatchSearchCellButtonClick(e);i&&"object"==typeof i&&(i.values||i.list)&&this.fillItems(e,i.values,i.labels,i)},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.isShowMarquee=function(){return!1},e.prototype._requestStart=function(e){return t.prototype._requestStart.call(this,!0)},e.prototype.$_search=function(){var t=this.getEditText();t&&t.length>=this._searchLength?this.$_startTimer():this.$_stopTimer()},e.prototype.$_startTimer=function(){this.$_stopTimer(),!this.reInquery&&this.listing&&this._list._items.length>0||(this._timer=setTimeout(function(){var t=this.getEditText();t&&t!=this._searchKey&&(this._searchKey=t,this.$_stopTimer(),this._dispatchSearch(t,!0))}.bind(this),this._searchDelay))},e.prototype.$_stopTimer=function(){this._timer&&clearTimeout(this._timer)},e.INPUT_CSS="rg-search-editor",e}(za),Za=function(e){function i(i,o){var r=e.call(this,i,o)||this;return r._values=null,r._items=null,r._labels=null,r._sortStyle=t.DropDownSortStyle.NONE,r._itemIndex=-1,r._displayLabels=null,r._separator=null,r._itemColumned=!1,r._trimLabelText=!0,r.$_selectChanged=null,r._handled=!1,r._globalKeyDownHandler=function(t){var e=It(this._container);if(!(t.target instanceof e.HTMLTableCellElement))return this._keyDownHandler(t)}.bind(r),r}return o(i,e),i.prototype._dodispose=function(){this._editor&&this._editor.removeEventListener("change",this.$_selectChanged),this._values=null,this._labels=null,this._items=null,e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"native",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonCount",{get:function(){return 1},enumerable:!1,configurable:!0}),i.prototype.hasButton=function(t,e){return null==t||t},i.prototype._createEditor=function(t){var e=St(t);this._container=this._createContainer(e),t.appendChild(this._container);var i=e.createElement("select"),o=i.style;return i.setAttribute("aria-hidden","true"),o.position="absolute",o.boxSizing="border-box",o.margin="0px",o.padding="0px",o.wordWrap="normal",o.overflow="hidden",o.resize="none",o.border="none",o.outline="none",o.left="0px",o.top="0px",o.width="100%",o.height="100%",this.$_selectChanged=function(t){var e=t.target;this._itemIndex!==e.selectedIndex&&(this._dispatchChange(),this._dispatchCommit())}.bind(this),i.addEventListener("change",this.$_selectChanged),this._container.appendChild(i),i},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype.initOptions=function(){e.prototype.initOptions.call(this),this._values=[],this._labels=[],this._items=[],this._itemIndex=-1},i.prototype.initDefaultOptions=function(){},i.prototype.setEditIndex=function(t){e.prototype.setEditIndex.call(this,t),this._refreshItems(),this._resetPosition()},i.prototype.setEditValue=function(t){e.prototype.setEditValue.call(this,t),this._itemIndex=-1;for(var i=this._editor.options,o=0,r=i.length;o<r;o++)i[o].value===t?(this._itemIndex=o,i[o].selected=!0):i[o].selected=!1},i.prototype.prepare=function(){var t=It(this._container);this._handled||(!Rt.isSlotMode()&&t.addEventListener("keydown",this._globalKeyDownHandler),this._handled=!0)},i.prototype.unprepare=function(){var t=It(this._container);!Rt.isSlotMode()&&t.removeEventListener("keydown",this._globalKeyDownHandler),this._handled=!1},i.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var i=t.keyCode,o=Rt.isIE&&this.visible;switch(i){case 40:if(t.altKey)return this._requestStart(),!0;if(o)return!1;break;case 13:case 38:case 33:case 34:case 36:case 35:if(o)return!1}return e.prototype._keyDownHandler.call(this,t)}},i.prototype._resetPosition=function(){var t=this._grid.getEditCellBounds(this,this._editIndex);t.x--,t.y--,this.setBounds(t.x,t.y,0,0,0)},i.prototype._refreshItems=function(t,e){void 0===e&&(e=!1);var i=this.editIndex,o=i.item;if(this._values&&(this._values.length>0||e))this.$_setItems(this._values,this._labels);else if(i.dataColumn&&i.item&&(i.dataRow>=0||Ao(o.itemState))){var r=i.dataColumn;if(r.lookupSource){for(var n=r.lookupKeyFieldIds,s=[],a=0;a<n.length-1;a++)s.push(o.getData(n[a]));var l=r.lookupSource.getTextDomain(s);l&&l.values&&l.values.length>0&&this.$_setItems(l.keys,l.values)}else r.values&&r.values.length>0&&this.$_setItems(r.values,r.labels)}},i.prototype.$_setItems=function(t,e){this._items=[];for(var i=this._editor,o=i.options,r=St(i),n=o.length-1;n>=0;n--)o.remove(n);n=0;for(var s=t.length;n<s;n++){var a=r.createElement("option");a.value=t[n],a.text=e&&e.length>n?e[n]:t[n],this._items.push({value:a.value,label:a.text}),i.options.add(a,null)}},i.prototype.getEditValue=function(){return this.$_getEditValue()},i.prototype.$_getEditValue=function(){return this._editor.value},i.INPUT_CSS="rg-nlist-editor",i}(Na);t.TimeSelectType=void 0,(Wa=t.TimeSelectType||(t.TimeSelectType={})).NONE="none",Wa.HOUR="hour",Wa.MINUTE="minute",Wa.SECOND="second",t.CalendarMode=void 0,(Ua=t.CalendarMode||(t.CalendarMode={})).DAY="day",Ua.MONTH="month",Ua.YEAR="year";var Ja=/[ㄱ-ㅎㅏ-ㅣ가-힝]/g,Qa=function(t){if(!t)return null;(t=String(t))&&(t=t.replace(/[^0-9]/g,""));var e=parseInt(t.substr(0,4)),i=parseInt(t.substr(4,2));if(isNaN(e)||e<=0||isNaN(i)||i<0)return null;var o=new Date(e,0,1),r=4-o.getDay()+1;return o.setDate(r),o.getFullYear()==e&&i--,r=7*i,o.setDate(o.getDate()+r),o},tl=function(t,e,i){var o,r=function(t){var i=new Date(t),o=i.getDay();o=o<e?-3-o:4-o;var r=i.getDate();return i.setDate(r+o),i},n=t.getFullYear(),s=r(new Date(n,0,1)),a=r(new Date(n,t.getMonth(),t.getDate())),l=s.getFullYear(),h=a.getFullYear();return h<n?(s=r(new Date(l,0,1)),o=Math.ceil((a.valueOf()-s.valueOf())/6048e5)+(s.getFullYear()===h?1:0)):o=h>n?1:Math.ceil((a.valueOf()-s.valueOf())/6048e5)+(l===h?1:0),String(h)+(null!=i?i:"")+(o<10?"0"+o:String(o))},el=function(t){function e(e){var i=t.call(this)||this;return i._tooltips=[],i._items=[],i._enabled=!0,i._owner=e,i}return o(e,t),e.prototype._doDispose=function(){this._owner=null,this._tooltips=null,this._items=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"tooltips",{get:function(){return this._tooltips},set:function(t){this._tooltips=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(t){this._items=t.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items&&this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName||""},set:function(t){this._styleName=t},enumerable:!1,configurable:!0}),e.prototype.load=function(t){this.clear()},e.prototype.clear=function(){this._items=[],this._tooltips=[]},e.prototype.contains=function(t){return!1},e.prototype.getTooltip=function(t){return null},e}(Lt),il=function(t){function e(e,i){var o=t.call(this,e)||this;return i&&o.load(i),o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.load=function(e){if(t.prototype.load.call(this,e),e){var i=Rt.makeArray(e.dates,!0);e.tooltips=Rt.makeArray(e.tooltips,!0);for(var o=0,r=i.length;o<r;o++){var n=i[o],s=void 0;if(n instanceof Date||"number"==typeof n)(s=new Date(n)).setHours(0,0,0,0);else if("string"==typeof n){4!==n.length&&8!==n.length||!/^[0-9]*$/.test(n)||(n=4===n.length?n.replace(/(\d{2})(\d{2})/,"$1/$2"):n.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3"));var a=n.split(/[.//-]/);if(2==a.length)try{s=parseInt(a[0]).toString()+"/"+parseInt(a[1]).toString()}catch(t){Rt.log("잘못된 날짜형식 (".concat(n,")"))}else 3==a.length&&(s=Mt.getSimpleDateNull(n))}s&&(this._items.push(s),e.tooltips[o]&&this._tooltips.push(e.tooltips[o]))}null!=e.enabled&&(this.enabled=!!e.enabled),this.styleName=e.styleName}},e.prototype.getItemIndex=function(t){for(var e=0,i=this._items.length;e<i;e++){var o=this._items[e];if(o instanceof Date&&o.getFullYear()===t.getFullYear()&&o.getMonth()===t.getMonth()&&o.getDate()===t.getDate())return e;if(o===t.getMonth()+1+"/"+t.getDate())return e}return-1},e.prototype.contains=function(t){return this.getItemIndex(t)>=0},e.prototype.getTooltip=function(t){var e=this.getItemIndex(t);return e>=0?this._tooltips[e]:null},e}(el),ol=function(t){function e(e,i){var o=t.call(this,e)||this;return i&&o.load(i),o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.load=function(e){t.prototype.load.call(this,e),e&&(this._items=Rt.makeArray(e.days,!0),this._tooltips=Rt.makeArray(e.tooltips,!0),this.enabled=!!e.enabled,this.styleName=e.styleName)},e.prototype.contains=function(t){return t instanceof Date&&this._items.indexOf(t.getDay())>=0},e.prototype.getTooltip=function(t){var e=t instanceof Date?this._items.indexOf(t.getDay()):this._items.indexOf(t);return e>=0?this._tooltips[e]:null},e}(el),rl=function(t){function e(){var e=t.call(this)||this;return e._items=[],e._count=-1,e}return o(e,t),e.prototype._doDispose=function(){this._editor=null,this._items=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(t){this._items=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editor",{get:function(){return this._editor},set:function(t){this._editor=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNull",{get:function(){return-1==this._count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),e.prototype.setNull=function(){this.clear()},e.prototype.clear=function(){for(var t=0,e=this._items.length;t<e;t++)this._items[t].clear();this._items=[],this._count=-1},e.prototype.load=function(t){if(this.clear(),t){for(var e=0,i=(t=Rt.isArray(t)?t:[t]).length;e<i;e++){var o=t[e],r=void 0;switch(o.type){case"day":r=new ol(this,o);break;case"date":r=new il(this,o)}r.count>0&&this._items.push(r)}this._count=this._items.length}else this._count=-1},e.prototype.contains=function(t){for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].contains(t))return this._items[e];return null},e}(Lt),nl=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.dropDownPosition=t.DropDownPosition.BUTTON,i.selected=!1,i._viewGridInside=!1,i._date=new Date,i}return o(i,e),Object.defineProperty(i.prototype,"viewGridInside",{get:function(){return this._viewGridInside||Rt.isSlotMode()},set:function(t){this._viewGridInside=t},enumerable:!1,configurable:!0}),i.prototype.$_resetPosition=function(e,i,o,r){this._viewGridInside?Rt.resetPosition(this._container._container,this._container._container,this._element,e,i,o,r,this.dropDownPosition!=t.DropDownPosition.EDITOR):Rt.resetPosition(this._containerElement,this._container._container,this._element,e,i,o,r,this.dropDownPosition!=t.DropDownPosition.EDITOR)},i}(Re),sl=function(e){function i(o,r){var n=e.call(this)||this;return n.minWidth=0,n.maxWidth=0,n.showToday=!0,n.showWeeks=!1,n.startWeek=0,n.weekSelectable=!1,n.weekSeparator="",n._currentMode=t.CalendarMode.DAY,n._focused=!0,n._canceled=!1,n._touchs=null,n._applyTouchs=null,n._clickHandler=function(e){var o=n.$_getCellDate(n._currDate,e.currentTarget.$_day+1);if(n._editor.containsRange(o)){var r=n.holidays&&n.holidays.contains(o);r&&!r.enabled||(n.date=new Date(o),n.selected=!0,n.focused=!0,n._editor.$_selectDate(n._date),!n.showButtons&&n._editor.timeSelectType===t.TimeSelectType.NONE&&n.fireEvent(i.CLOSE_UP,!0))}},n._dblClickHandler=function(t){n.fireEvent(i.CLOSE_UP,!0)},n._yearWeekClickHandler=function(t){var e,o=t.currentTarget.$_yearWeek;o&&(e=Qa(o)),e&&n._editor.containsRange(e)&&(n._date=new Date(e),n.selected=!0,n._editor.$_selectDate(n._date),!n.showButtons&&n.fireEvent(i.CLOSE_UP,!0))},n._mouseupHandler=function(t){!this._isMobile&&this._editor.setFocus()}.bind(n),n._timeWheelHandler=function(t){Rt.stopEvent(t),n._doTimeWheel(t)},n._timeClickHandler=function(t){Rt.stopEvent(t),n._doTimeClick(t)},n._touchStartHandler=function(t){n._touchs=[],n._applyTouchs=[],n._swipeTimer=clearInterval(n._swipeTimer),1!=t.touches.length&&(n._touchId=void 0),n._touchId=t.touches[0].identifier;var e=t.touches[0];n._touchs.push({x:e.clientX,y:e.clientY,t:t.timeStamp}),n._applyTouchs.push({x:e.clientX,y:e.clientY,t:t.timeStamp})},n._touchEndHandler=function(t){n._checkSwipe(t.target),n._touchs=n._applyTouchs=null},n._touchMoveHandler=function(t){if(!(t.touches.length>1)){Rt.stopEvent(t);var e=n._touchs,i=n._applyTouchs,o=t.touches[0],r={x:o.clientX,y:o.clientY,t:t.timeStamp};e.push(r),i.push(r);var s=i[0].y,a=i[i.length-1].y;Math.abs(s-a)>13&&(n._applyTouchs=[],n._doTimeScroll(t.target,s-a))}},n._checkSwipe=function(t){var e=n._touchs,i=e.length;if(!(i<2)){for(var o=e[i-1],r=e[i-2],s=i-3;s>=0&&!(o.t-r.t>100);s--)r=e[s];var a=r.x,l=r.y,h=o.x,u=o.y,c=Math.sqrt(Math.pow(a-h,2)+Math.pow(l-u,2))/Math.max(16,o.t-r.t),d=.998;if(c>.1){var p=Math.log(.1/c)/Math.log(d),f=c*(1-Math.pow(d,p+1))/(1-d),_="right",g=Math.round(180*Math.atan2(u-l,h-a)/Math.PI);return g<0&&(g=360+g),g>45&&g<=135?_="bottom":g>135&&g<=225?_="left":g>225&&g<=315&&(_="top"),n.onSwipeHandler(p,f,_,t)}return!1}},n.$_scrollRow=function(){Rt.getTimer()-n._swipeStarted<n._swipeDuration?n._doTimeScroll(n._swipeTarget,n._swipeDistance):n._swipeTimer=clearInterval(n._swipeTimer)},n.$_nextMonth=function(t){Rt.incMonth(n._currDate,1),n.$_buildCalendar()},n.$_prevMonth=function(t){Rt.incMonth(n._currDate,-1),n.$_buildCalendar()},n.$_nextYearMonth=function(t){Rt.incYear(n._currDate,1),n.$_buildMonths()},n.$_prevYearMonth=function(t){Rt.incYear(n._currDate,-1),n.$_buildMonths()},n.$_nextYear=function(){var t=n._yearTable.tBodies[0].rows[2].cells[3],e=parseInt(t.getAttribute("year"));n.$_buildYear(e)},n.$_prevYear=function(){var t=n._yearTable.tBodies[0].rows[0].cells[0],e=parseInt(t.getAttribute("year"))-4;n.$_buildYear(e)},n._editor=r,n._container=o,n._element=n.$_createPicker(r),n._element.addEventListener(Rt.isIEMode()?"mousedown":"pointerup",n._mouseupHandler),n}return o(i,e),i.prototype.onSwipeHandler=function(t,e,i,o){this._swipeDuration=t,this._swipeStarted=Rt.getTimer(),this._swipeTarget=o;var r=1;switch(i){case"bottom":r=-1;case"top":this._swipeDistance=r*e/20,this._swipeTimer=setInterval(this.$_scrollRow,40)}return!0},i.prototype._doDispose=function(){var t=this;if(this._element){var i=function(e){e&&(e.removeEventListener("wheel",t._timeWheelHandler),e.removeEventListener("click",t._timeClickHandler),e.removeEventListener("touchstart",t._touchStartHandler),e.removeEventListener("touchend",t._touchEndHandler),e.removeEventListener("touchmove",t._touchMoveHandler),e.removeEventListener("dblclick",t._dblClickHandler))};this._element.removeEventListener(Rt.isIEMode()?"mousedown":"pointerup",this._mouseupHandler),i(this._hourElement.$_UL),i(this._minuteElement.$_UL),i(this._secondElement.$_UL),Rt.detach(this._element)}e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"date",{get:function(){return this._date},set:function(e){if(e){if((!this._date||this._date.getTime()!==e.getTime())&&(this._currDate=new Date(e),this._date=new Date(e),this.listing)){switch(this._currentMode){case t.CalendarMode.DAY:this.$_buildCalendar();break;case t.CalendarMode.MONTH:this.$_buildMonths();break;case t.CalendarMode.YEAR:this.$_buildYear(this._date.getFullYear())}this._setTime(this._date,!1)}}else null===e&&(this._date=null)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return this._containerElement&&this._containerElement.contains(this._element)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canceled",{get:function(){return this._canceled},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focused",{get:function(){return this._focused},set:function(t){t!=this._focused&&(this._focused=t,this._element.style.border=t?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=t?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px",this._headerElement.style.backgroundColor=t?"rgba(0, 200, 200, 0.1)":"#e8e8e8",this._calendar.tHead.style.opacity=t?"1.0":"0.5")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"today",{get:function(){return this.date=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentMode",{get:function(){return this._currentMode},set:function(e){if(this._currentMode!==e){this._currentMode=e;for(var i=this._bodyElement,o=void 0,r=this._header,n=r.$_prev,s=r.$_next,a=this._currDate||new Date;o=i.lastElementChild;)i.removeChild(o);var l=a.getMonth(),h=a.getFullYear();switch(this._currentMode){case t.CalendarMode.MONTH:i.appendChild(this._monthsElement),this.$_buildMonths(),n.onclick=this.$_prevYearMonth,s.onclick=this.$_nextYearMonth,n.title="".concat(h-1,"/").concat(l+1),s.title="".concat(h+1,"/").concat(l+1);break;case t.CalendarMode.YEAR:i.appendChild(this._yearsElement),this.$_buildYear(a.getFullYear()),n.onclick=this.$_prevYear,s.onclick=this.$_nextYear,n.title="".concat(10*Math.floor(h/10)-11,"-").concat(10*Math.floor(h/10)),s.title="".concat(10*Math.floor(h/10)+11,"-").concat(10*Math.floor(h/10)+20);break;default:i.appendChild(this._calendarElement),this.$_buildCalendar(),n.onclick=this.$_prevMonth,s.onclick=this.$_nextMonth,n.title=0==l?h-1+"/12":h+"/"+Rt.pad(l),s.title=s.title=11==l?h+1+"/01":h+"/"+Rt.pad(l+2)}}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hours",{get:function(){return this._hours},set:function(e){if(e)this._hours=e.slice();else{this._hours=[];for(var i=0;i<24;i++)this._hours.push(i)}this.$_buildHourMinutes(t.TimeSelectType.HOUR)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minutes",{get:function(){return this._minutes},set:function(e){if(e)this._minutes=e.slice();else{this._minutes=[];for(var i=0;i<60;i++)this._minutes.push(i)}this.$_buildHourMinutes(t.TimeSelectType.MINUTE)},enumerable:!1,configurable:!0}),i.prototype.setWeekDays=function(t){this._weekDays=t.slice()},i.prototype.show=function(t,e,i,o,r){this._containerElement=!Rt.isMobile()&&this.viewGridInside?this._container._container:t,this._element.style.removeProperty("width"),this._timeContainer.style.setProperty("height","0px"),this.$_show(e,i,o,r)},i.prototype.hide=function(){this.focused=!1,Rt.detach(this._element),this._containerElement=null},i.prototype.incDay=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date)).setDate(this._date.getDate()+t):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},i.prototype.incMonth=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),Rt.incMonth(e,t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},i.prototype.startDay=function(){var t=new Date(this._currDate),e=t.getDay()-this.startWeek;return t.setDate(t.getDate()-(e+7)%7),this.date=t},i.prototype.endDay=function(){var t=new Date(this._currDate),e=t.getDay()-this.startWeek;return t.setDate(t.getDate()+(6-e)),this.date=t},i.prototype.incHour=function(t){var e,i=new Date(this._currDate),o=i.getHours(),r=this._hours;return r?(e=r.indexOf(o))>=0?null==(o=r[e+t])&&(o=1===t?r[0]:r[r.length-1]):o=r[0]:o=(24+o+t)%24,i.setHours(o),this.$_setTime(this._hourElement,null,o,!0),this.date=i},i.prototype.incMinute=function(t){var e,i=new Date(this._currDate),o=this._minutes,r=i.getMinutes();return o?(e=o.indexOf(r))>=0?null==(r=o[e+t])&&(r=1===t?o[0]:o[o.length-1]):r=o[0]:r=(24+r+t)%24,i.setMinutes(r),this.$_setTime(this._minuteElement,null,r,!0),this.date=i},i.prototype.incSecond=function(t){var e=new Date(this._currDate),i=e.getSeconds();return i=(60+i+t)%60,e.setSeconds(i),this.$_setTime(this._secondElement,null,i,!0),this.date=e},i.prototype.setCurrentLoc=function(t){var e="focused";1===t?Rt.addClassName(this._hourElement,e):Rt.removeClassName(this._hourElement,e),2===t?Rt.addClassName(this._minuteElement,e):Rt.removeClassName(this._minuteElement,e),3===t?Rt.addClassName(this._secondElement,e):Rt.removeClassName(this._secondElement,e)},i.prototype._changed=function(){},i.prototype.$_getCellDate=function(t,e){var i=new Date(t);return i.setDate(e),i},i.prototype.$_createPicker=function(t){var e=this._container.doc,i=e.createElement("div");this._id=i.id="rg-calendar-"+al.$$_LIST_ID++,i.tabIndex=-1;var o=i.style;return o.position="absolute",o.boxSizing="border-box",o.margin="0px",o.overflow="auto",o.zIndex=String(t._baseZindex+2),i.className="rg-calendar",this._header=this.$_createHeader(e),i.appendChild(this._header),this._bodyElement=this.$_createBody(e),i.appendChild(this._bodyElement),this._calendarElement=this.$_createCalTable(e),this._monthsElement=this.$_createMonths(e),this._yearsElement=this.$_createYears(e),this._footer=this.$_createFooter(e),i.appendChild(this._footer),i},i.prototype.$_createBody=function(t){var e=t.createElement("div");return e.className="rg-calendar-body",e},i.prototype.$_createCalTable=function(t){var e,i=t.createElement("div");(e=i.style).display="flex",e.flexDirection="row";var o=this._dateContainer=t.createElement("div");(e=o.style).display="inline-block",i.appendChild(o),this._calendar=this.$_createCalendar(t),o.appendChild(this._calendar);var r=this._timeContainer=t.createElement("div");return i.appendChild(r),(e=r.style).display="none",e.overflow="hidden",e.height="0px",r.appendChild(this._hourElement=this.$_createHour(t)),r.appendChild(this._minuteElement=this.$_createMinute(t)),r.appendChild(this._secondElement=this.$_createSecond(t)),i},i.prototype._getCell=function(t){for(var e=It(t);t&&!(t instanceof e.HTMLTableCellElement);)t=t.parentElement;return t},i.prototype.$_setCurrentTime=function(t,e,i){for(var o=t.parentElement.clientHeight,r=t.offsetTop,n=0,s=0;s<t.childElementCount;s++){var a=t.children[s];e&&(a.setAttribute("time-value",e[s].toString()),a[Rt.TextProp]=Rt.pad(e[s])),e[s]===i?Rt.addClassName(a,"rg-cal-time-select"):Rt.removeClassName(a,"rg-cal-time-select"),(r+=n||(n=a.clientHeight+2))>o?a.style.visibility="hidden":a.style.removeProperty("visibility")}},i.prototype._doTimeScroll=function(e,i){for(var o=It(this._containerElement),r=e;!(r instanceof o.HTMLUListElement)||null==r;)r=r.parentElement;if(r){var n=r.parentElement;if(!(n.scrollHeight<=n.clientHeight)){var s;switch(r.firstElementChild.getAttribute("kind")){case t.TimeSelectType.HOUR:s=this._currDate.getHours();break;case t.TimeSelectType.MINUTE:s=this._currDate.getMinutes();break;case t.TimeSelectType.SECOND:s=this._currDate.getSeconds()}if(r){for(var a=[],l=0;l<r.childElementCount;l++)a.push(Number(r.children[l].getAttribute("time-value")));i>0?a.push(a.shift()):a.unshift(a.pop()),this.$_setCurrentTime(r,a,s)}}}},i.prototype._doTimeWheel=function(t){this._doTimeScroll(t.target,t.deltaY)},i.prototype._doTimeClick=function(e){var o=e.target,r=new Date(this._currDate),n=o.getAttribute("kind"),s=Number(o.getAttribute("time-value"));switch(n){case t.TimeSelectType.HOUR:r.setHours(s);break;case t.TimeSelectType.MINUTE:r.setMinutes(s);break;case t.TimeSelectType.SECOND:r.setSeconds(s)}this._editor.$_selectDate(this.date=r),this.selected=!0,n===this._editor.timeSelectType&&!this.showButtons&&this.fireEvent(i.CLOSE_UP,!0)},i.prototype._changeCurrent=function(e){switch(this._currentMode){case t.CalendarMode.DAY:this.currentMode=e?t.CalendarMode.MONTH:t.CalendarMode.DAY;break;case t.CalendarMode.MONTH:this.currentMode=e?t.CalendarMode.YEAR:t.CalendarMode.DAY;break;case t.CalendarMode.YEAR:this.currentMode=e?t.CalendarMode.YEAR:t.CalendarMode.MONTH}},i.prototype.$_createHeader=function(e){var i=this,o=function(t,e){var i=t.createElement("span"),o=i.style;return o.position="relative",o.minWidth="17px",o.minHeight="17px",i},r=this,n=this._headerElement=e.createElement("div"),s=n.style;s.position="relative",s.display="flex",n.className="rg-cal-header";var a=n.appendChild(n.$_prev=o(e));a.className="rg-cal-prev-month",a.onclick=this.$_prevMonth;var l=e.createElement("div");(s=l.style).position="relative",s.textAlign="center",s.display="flex",s.alignItems="center",s.justifyContent="center",s.height="100%",s.flexGrow="1",n.appendChild(n.$_title=l),l.className="rg-cal-yearmonth";var h=e.createElement("div");(s=h.style).position="relative",s.fontSize="14px",h.className="rg-cal-year",l.appendChild(l.$_year=h),h.onclick=function(e){i._currentMode!==t.CalendarMode.YEAR&&i._changeCurrent(!0)};var u=this._todayElement=e.createElement("span");(s=u.style).position="relative",u.className="rg-cal-today-button",n.appendChild(u),u.onclick=function(e){var i=new Date;r.focused=!0,r.date=i,r.selected=!0,r.currentMode=r.viewMode||t.CalendarMode.DAY,r._editor.$_selectDate(r._currDate),r._setTime(i,!0)};var c=n.appendChild(n.$_next=o(e));return c.className="rg-cal-next-month",c.onclick=this.$_nextMonth,n},i.prototype.$_createFooter=function(t){var e,o=this,r=t.createElement("div"),n=r.style;return n.display="none",r.className="rg-cal-buttons",(e=this._deleteElement=t.createElement("span")).className="rg-cal-delete-button",(n=e.style).float="left",e.onclick=function(t){o.selected=!0,o.date=null,o._editor.$_selectDate(null)},r.appendChild(e),(e=this._saveElement=t.createElement("span")).className="rg-cal-save-button",(n=e.style).float="right",e.onclick=function(t){o.fireEvent(i.CLOSE_UP,!0)},r.appendChild(e),(e=this._cancelElement=t.createElement("span")).className="rg-cal-cancel-button",(n=e.style).float="right",e.onclick=function(t){o.selected=!1,o._canceled=!0,o.fireEvent(i.CLOSE_UP,!1)},r.appendChild(e),r},i.prototype.$_createCalendar=function(t){var e=i.weeksClass,o=t.createElement("table"),r=o.style;r.margin="2px",o.className="rg-cal-days-table";var n=o.createTHead();n.className="rg-cal-weeks";var s=t.createElement("tr");n.appendChild(s);var a=[],l=t.createElement("th");(r=l.style).minWidth="20px",r.textAlign="center",l.className="rg-cal-week-year-week",s.appendChild(l);var h=t.createElement("span");l.appendChild(h),n.$_weeks=l;for(var u=0;u<7;u++){var c=t.createElement("th");(r=c.style).minWidth="20px",r.textAlign="center",c.className="rg-cal-week-"+e[u],s.appendChild(c);var d=t.createElement("span");c.appendChild(d),a.push(d)}n.$_cells=a;var p=t.createElement("tbody");p.className="rg-cal-days",o.appendChild(o.$_body=p);for(var f=p.$_rows=[],_=p.$_yearweeks=[],g=0;g<6;g++){var y=t.createElement("tr");p.appendChild(y),f.push(y),y.$_cells=a=[];var m=t.createElement("td");(r=m.style).padding="1px",y.appendChild(m);var b=t.createElement("span");m.appendChild(m.$_span=b),_.push(m);for(u=0;u<7;u++){var v=t.createElement("td");(r=v.style).padding="1px",v.className="rg-cal-day rg-cal-week-"+e[(u+this.startWeek)%7],y.appendChild(v),v.onclick=this._clickHandler,v.ondblclick=this._dblClickHandler;var w=t.createElement("span");v.appendChild(v.$_span=w),v.id=this._id+"-"+g.toString()+"-"+u.toString(),a.push(v)}}return o},i.prototype.$_buildYear=function(t){for(var e=this._yearTable.tBodies[0],i=this._currDate.getFullYear(),o=t=10*Math.floor(t/10)-1,r=0;r<3;r++)for(var n=e.rows[r],s=0;s<4;s++){var a=n.cells[s];a.setAttribute("year",t.toString()),a.firstElementChild[Rt.TextProp]=Rt.htmlEncode(this.yearDisplayFormat?this.yearDisplayFormat.replace("{Y}",t+""):t+""),i===t?Rt.addClassName(a,"rg-cal-focusday"):Rt.removeClassName(a,"rg-cal-focusday"),t++}var l="".concat(this.yearDisplayFormat?this.yearDisplayFormat.replace("{Y}",o+""):o," - ").concat(this.yearDisplayFormat?this.yearDisplayFormat.replace("{Y}",--t+""):--t);this._headerElement.$_title.$_year[Rt.TextProp]=Rt.htmlEncode(l)},i.prototype.$_buildMonths=function(){for(var t=this.months,e=0,i=this._currDate.getMonth(),o=this._monthTable.tBodies[0],r=0;r<3;r++)for(var n=o.rows[r],s=0;s<4;s++){var a=n.cells[s];a.setAttribute("month",e.toString());var l=a.firstElementChild;t&&t[e]?l[Rt.TextProp]=Rt.htmlEncode(t[e]):l[Rt.TextProp]=this.monthDisplayFormat?this.monthDisplayFormat.replace("{M}",e+1+""):"".concat(e+1),i===e?Rt.addClassName(a,"rg-cal-focusday"):Rt.removeClassName(a,"rg-cal-focusday"),e++}var h=this._currDate.getFullYear(),u="".concat(this.yearDisplayFormat?this.yearDisplayFormat.replace("{Y}",h+""):h);this._headerElement.$_title.$_year[Rt.TextProp]=Rt.htmlEncode(u)},i.prototype.$_buildHourMinutes=function(e){var i,o,r=this._container.doc;switch(e){case t.TimeSelectType.HOUR:i=this._hourElement,o=this._hours;break;case t.TimeSelectType.MINUTE:i=this._minuteElement,o=this._minutes}var n=i.$_UL;if(n){for(;n.lastElementChild;)n.removeChild(n.lastElementChild);o.forEach((function(t){var i=r.createElement("li");i.className="rg-cal-time-item",i.setAttribute("time-value",t.toString()),i[Rt.TextProp]=Rt.pad(t,2),i.setAttribute("kind",e),n.appendChild(i)}))}},i.prototype.$_monthClick=function(e,o){var r=this._getCell(e.target);if(r){var n=parseInt(r.getAttribute("month")),s=this._currDate.getDate(),a=new Date(this._currDate.getFullYear(),n+1,0).getDate();if(this._currDate.setMonth(n,Math.min(s,a)),this.viewMode===t.CalendarMode.MONTH)return this.selected=!0,this.date=this._currDate,this._editor.$_selectDate(this._currDate),void(this.showButtons&&!o?this.$_buildMonths():this.fireEvent(i.CLOSE_UP,!0));this._changeCurrent(!1),this.$_buildCalendar()}},i.prototype.$_createMonths=function(t){var e=this,i=t.createElement("div"),o=this._monthTable=t.createElement("table");o.className="rg-cal-month-table";var r=t.createElement("tbody");o.appendChild(r);for(var n=0;n<3;n++){var s=r.appendChild(t.createElement("tr"));s.className="rg-cal-month-row";for(var a=0;a<4;a++){var l=s.appendChild(t.createElement("td"));l.className="rg-cal-month-cell",l.appendChild(t.createElement("div"))}}return i.appendChild(o),o.onclick=function(t){e.$_monthClick(t,!1)},o.ondblclick=function(t){e.showButtons&&e.$_monthClick(t,!0)},i},i.prototype.$_yearClick=function(e,o){var r=this._getCell(e.target);if(r){var n=parseInt(r.getAttribute("year"));if(this._currDate.setFullYear(n),this.viewMode===t.CalendarMode.YEAR)return this.selected=!0,this.date=this._currDate,this._editor.$_selectDate(this._currDate),void(this.showButtons&&!o?this.$_buildYear(this._currDate.getFullYear()):this.fireEvent(i.CLOSE_UP,!0));this._changeCurrent(!1)}},i.prototype.$_createYears=function(t){var e=this,i=t.createElement("div"),o=this._yearTable=t.createElement("table");o.className="rg-cal-year-table";for(var r=o.appendChild(t.createElement("tbody")),n=0;n<3;n++){var s=r.appendChild(t.createElement("tr"));s.className="rg-cal-year-row";for(var a=0;a<4;a++){var l=s.appendChild(t.createElement("td"));l.className="rg-cal-year-cell",l.appendChild(t.createElement("div"))}}return i.appendChild(o),o.onclick=function(t){e.$_yearClick(t,!1)},o.ondblclick=function(t){e.showButtons&&e.$_yearClick(t,!0)},i},i.prototype.$_createTimeElt=function(t,e,i,o){var r=e.style;e.className="rg-cal-time rg-cal-time-".concat(o),r.display="inline-block",r.height="100%",r.overflow="hidden",r.position="relative";var n=t.createElement("div");n.className="rg-time-header";var s=t.createElement("div");s.className="rg-time-title",e.$_Label=s,n.appendChild(s),e.appendChild(n);var a=t.createElement("ul");a.addEventListener("wheel",this._timeWheelHandler),a.addEventListener("click",this._timeClickHandler),a.addEventListener("touchstart",this._touchStartHandler),a.addEventListener("touchend",this._touchEndHandler),a.addEventListener("touchmove",this._touchMoveHandler),a.addEventListener("dblclick",this._dblClickHandler),a.className="rg-cal-time-list";for(var l=0;l<i;l++){var h=t.createElement("li");h.className="rg-cal-time-item",h.setAttribute("time-value",l.toString()),h[Rt.TextProp]=Rt.pad(l,2),h.setAttribute("kind",o),a.appendChild(h)}e.appendChild(a),e.$_UL=a},i.prototype.$_createHour=function(e){var i=e.createElement("div");return this.$_createTimeElt(e,i,24,t.TimeSelectType.HOUR),i},i.prototype.$_createMinute=function(e){var i=e.createElement("div");return this.$_createTimeElt(e,i,60,t.TimeSelectType.MINUTE),i},i.prototype.$_createSecond=function(e){var i=e.createElement("div");return this.$_createTimeElt(e,i,60,t.TimeSelectType.SECOND),i},i.prototype.$_show=function(e,i,o,r){this.focused=!1,this.selected=!1,this._canceled=!1,this.showButtons?(this._footer.style.display="",this._saveElement&&(this._saveElement[Rt.TextProp]=Rt.htmlEncode(this.saveLabel)),this._cancelElement&&(this._cancelElement[Rt.TextProp]=Rt.htmlEncode(this.cancelLabel)),this._deleteElement&&(this._deleteElement[Rt.TextProp]=Rt.htmlEncode(this.deleteLabel))):this._footer.style.display="none",this.showToday?(this._todayElement&&(this._todayElement[Rt.TextProp]=Rt.htmlEncode(this.todayLabel)),this._todayElement.style.removeProperty("display")):this._todayElement.style.setProperty("display","none");var n=this._date;this._currDate=n?new Date(n):new Date,this._today=new Date;for(var s,a=this._bodyElement;s=a.lastElementChild;)a.removeChild(s);this._bodyElement.appendChild(this._calendarElement),this.currentMode=this.viewMode||t.CalendarMode.DAY,this.setCurrentLoc(0),this.$_buildCalendar(),Rt.disableSelection(this._element),this._containerElement.appendChild(this._element),this._timeContainer.style.height=Rt.getSize(this._dateContainer).height+"px",this.$_setTimeSelector(),this._setTime(this._currDate,!0),this.$_resetPosition(e,i,o,r),this._element.style.setProperty("width",Math.ceil(Rt.getSize(this._element).width)+"px")},i.prototype.$_checkFocusedWeek=function(t,e,i){var o=["rg-cal-week-year-week"];this.$_isFocusedWeek(t,e.$_yearWeek)&&o.push("rg-cal-week-year-focusweek"),this.weekSelectable&&o.push("rg-week-selectable"),e.className=o.join(" ")},i.prototype.$_isFocusedWeek=function(t,e){return t&&e&&tl(t,this.startWeek)==e},i.prototype.$_isFocusedDay=function(t,e){var i=this._date;return i&&t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&e==i.getDate()},i.prototype.$_isToday=function(t,e){var i=this._today;return i&&t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&e==i.getDate()},i.prototype.$_setTime=function(t,e,i,o){var r=t.$_UL,n=t.$_Label;if(r){n&&e&&(n[Rt.TextProp]=Rt.htmlEncode(e));var s=[].map.call(r.children,(function(t){return Number(t.getAttribute("time-value"))})),a=s.indexOf(i);if(!(a<0)){if(!this.listing||o)if(a>2){var l=s.splice(0,a-2);s.push.apply(s,l)}else if(a<2){l=s.splice(s.length-a);s.unshift.apply(s,l)}this.$_setCurrentTime(r,s,i)}}},i.prototype._setTime=function(t,e){this.$_setTime(this._hourElement,this._editor.hourLabel,t.getHours(),e),this.$_setTime(this._minuteElement,this._editor.minuteLabel,t.getMinutes(),e),this.$_setTime(this._secondElement,this._editor.secondLabel,t.getSeconds(),e)},i.prototype.$_setTimeSelector=function(){var e=this._editor.timeSelectType,i=this._hourElement.style,o=this._minuteElement.style,r=this._secondElement.style;if(i.display=o.display=r.display="none",this.viewMode===t.CalendarMode.DAY){var n=0;switch(e){case t.TimeSelectType.SECOND:r.display="inline-block",n++;case t.TimeSelectType.MINUTE:o.display="inline-block",n++;case t.TimeSelectType.HOUR:i.display="inline-block",n++}var s=this._headerElement.clientHeight+"px";this._hourElement.firstElementChild.style.height=this._minuteElement.firstElementChild.style.height=this._secondElement.firstElementChild.style.height=s,this._timeContainer.style.display=n?"inline-block":"none"}},i.prototype.$_buildCalendar=function(){var t,e,o=i.weeksClass,r=this._header,n=this._currDate,s=r.$_title,a=n.getFullYear(),l=n.getMonth(),h="";if(this.yearMonthDisplayFormat){var u=this.yearMonthDisplayFormat,c=this.months&&this.months[l];h=u.replace("{Y}",a+""),h=c?h.replace("{MM}",c).replace("{M}",c):h.replace("{MM}",Rt.pad(l+1,2)).replace("{M}",l+1+"")}else h=(this.yearDisplayFormat?this.yearDisplayFormat.replace("{Y}",a+""):a)+"&nbsp;",this.months&&this.months.length>0?h+=this.months[l]:h+=this.monthDisplayFormat?this.monthDisplayFormat.replace("{M}",(l+1).toString()):l+1;s.$_year.innerHTML=h,h=s.$_year.innerText;for(var d=this._calendar.tHead.$_cells,p=0;p<7;p++){var f=d[(p+7-this.startWeek)%7];f.innerHTML=Rt.htmlEncode(this._weekDays[p]),f.parentElement.className="rg-cal-week-"+i.weeksClass[p]}this._calendar.tHead.$_weeks.style.display=this.showWeeks?"":"none";for(var _=this._calendar.$_body,g=_.$_yearweeks,y=(p=0,g.length);p<y;p++)g[p].style.display=this.showWeeks?"":"none",g[p].onclick=this.weekSelectable?this._yearWeekClickHandler:null,g[p].ondblclick=this.weekSelectable?this._dblClickHandler:null;var m=_.$_rows,b=Rt.month_days[Rt.isLeapYear(a)?1:0][l],v=new Date(n);v.setDate(1);var w=(v.getDay()+7-this.startWeek)%7;30==b&&6==w||31==b&&w>=5?Rt.addChild(_,m[5]):Rt.removeChild(_,m[5]),28==b&&0==w?Rt.removeChild(_,m[4]):Rt.addChild(_,m[4]);var C,x,I=0,S=g[0];if(d=m[0].$_cells,w>0){var E=a,O=l-1;O<0&&(E--,O=11);var R=Rt.month_days[Rt.isLeapYear(E)?1:0][O];for(p=0;p<w;p++){(F=d[p]).removeAttribute("title");var P=new Date(this._currDate);F.$_day=p-w,P.setDate(F.$_day+1);var k=this._editor.containsRange(P);0===p&&(S.$_yearWeek=tl(P,this.startWeek),S.$_span.innerText=S.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,S,k)),F.$_span.innerHTML=R-w+p+1,F.className="rg-cal-day rg-cal-prev-day "+(k?"":"rg-cal-disable-day ")+"rg-cal-week-"+o[(p+this.startWeek)%7]}}for(p=w;p<7;p++){(F=d[p]).removeAttribute("title"),F.$_day=I++,F.$_span.innerHTML=I,(v=new Date(this._currDate)).setDate(I);k=this._editor.containsRange(v);0===p&&(S.$_yearWeek=tl(v,this.startWeek),S.$_span.innerText=S.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,S,k)),C=this.$_isFocusedDay(n,I),x=this.$_isToday(n,I),C&&this._editor._editor.setAttribute("aria-activedescendant",F.id),F.setAttribute("aria-label",h+" "+I.toString()),x?F.setAttribute("aria-current","date"):F.removeAttribute("aria-current"),k?F.removeAttribute("aria-disabled"):F.setAttribute("aria-disabled","true"),t="rg-cal-day "+(C?"rg-cal-focusday ":""),t+=x?"rg-cal-today ":"",t+=(e=this.holidays&&this.holidays.contains(v))?e.styleName+" rg-cal-holiday ":"",t+=k?"":"rg-cal-disable-day ",t+="rg-cal-week-"+o[(p+this.startWeek)%7],F.className=t,e&&(t=e.getTooltip(this.$_getCellDate(n,I)))&&(F.title=t)}for(var T=1;T<6&&I<b;T++){d=m[T].$_cells;var D=g[T];for(p=0;p<7;p++)if(I<b){(F=d[p]).removeAttribute("title"),F.$_day=I++,(v=new Date(this._currDate)).setDate(I);k=this._editor.containsRange(v);0===p&&(D.$_yearWeek=tl(v,this.startWeek),D.$_span.innerText=D.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,D,k)),F.$_span.innerHTML=I,C=this.$_isFocusedDay(n,I),x=this.$_isToday(n,I),C&&this._editor._editor.setAttribute("aria-activedescendant",F.id),F.setAttribute("aria-label",h+" "+I.toString()),x?F.setAttribute("aria-current","date"):F.removeAttribute("aria-current"),k?F.removeAttribute("aria-disabled"):F.setAttribute("aria-disabled","true"),t="rg-cal-day "+(C?"rg-cal-focusday ":""),t+=this.$_isToday(n,I)?"rg-cal-today ":"",t+=(e=this.holidays&&this.holidays.contains(v))?e.styleName+" rg-cal-holiday ":"",t+=k?"":"rg-cal-disable-day ",t+="rg-cal-week-"+o[(p+this.startWeek)%7],F.className=t,e&&(t=e.getTooltip(this.$_getCellDate(n,I)))&&(F.title=t)}else for(var M=1;p<7;p++){var F;(F=d[p]).removeAttribute("title"),F.$_day=I++,(v=new Date(this._currDate)).setDate(I);k=this._editor.containsRange(v);F.$_span.innerHTML=M++,F.className="rg-cal-day rg-cal-next-day "+(k?"":"rg-cal-disable-day ")+"rg-cal-week-"+o[(p+this.startWeek)%7]}}},i.CLOSE_UP="onDatePickerCloseUp",i.weeksClass=["sun","mon","tue","wed","thu","fri","sat"],i}(nl),al=function(e){function i(t,i){var o=e.call(this,t,i)||this;o._holidays=null,o._currentLoc=0,o._holidayCollection=new rl,o._closing=!1,o._regx=/[\d\-.:/apmz+ ]/i,o._globalMouseHandler=function(t){var e=t.target;if(this._isMarquee(e))this.closeUp(!1);else{for(;e;){if(e===this._list._element)return;e=e.parentElement}this.closeUp(!0)}}.bind(o),o.assignFrom(Xe.editor.dateCellEditor),o._baseZindex=t.displayOptions.baseZindex,o._list=new sl(t.container,o),o._list.addListener(o);var r=o._editor;return r.setAttribute("aria-owns",o._list._element.id),r.setAttribute("aria-expanded","false"),r.setAttribute("aria-haspopup","true"),o}return o(i,e),i.prototype._doDispose=function(){this._globalMouseHandler=null,this._holidayCollection=this._holidayCollection.dispose(),this._list=this._list&&this._list.dispose(),e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"editFormat",{get:function(){return this.datetimeFormat},set:function(t){t!=this.datetimeFormat&&(this.datetimeFormat=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){this._dropDownPosition=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){t!=this._dropDownWhenClick&&(this._dropDownWhenClick=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownWhenEnter",{get:function(){return this._dropDownWhenEnter},set:function(t){this._dropDownWhenEnter=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showToday",{get:function(){return this._showToday},set:function(t){this._showToday=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"yearDisplayFormat",{get:function(){var t=this._grid;return this._yearDisplayFormat||t&&t.editorOptions.dateCellEditor.yearDisplayFormat||Ue.messages.dateEditorYearDisplayFormat},set:function(t){this._yearDisplayFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"monthDisplayFormat",{get:function(){var t=this._grid;return this._monthDisplayFormat||t&&t.editorOptions.dateCellEditor.monthDisplayFormat||Ue.messages.dateEditorMonthDisplayFormat},set:function(t){this._monthDisplayFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"yearMonthDisplayFormat",{get:function(){var t=this._grid;return this._yearMonthDisplayFormat||t&&t.editorOptions.dateCellEditor.yearMonthDisplayFormat||Ue.messages.dateEditorYearMonthDisplayFormat},set:function(t){this._yearMonthDisplayFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"months",{get:function(){var t=this._grid;return this._months||t&&t.editorOptions.dateCellEditor.months||Ue.messages.dateEditorMonths},set:function(t){this._months=Array.isArray(t)?t.slice():void 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"weekDays",{get:function(){var t=this._grid;return this._weekDays||t&&t.editorOptions.dateCellEditor.weekDays||Ue.messages.dateEditorWeekDays},set:function(t){this._weekDays=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showWeeks",{get:function(){return this._showWeeks},set:function(t){this._showWeeks=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"startWeek",{get:function(){return this._startWeek},set:function(t){t=null==t||isNaN(t=Math.floor(t))?0:t,this._startWeek=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"weekSelectable",{get:function(){return this._weekSelectable},set:function(t){this._weekSelectable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"weekSeparator",{get:function(){return this._weekSeparator},set:function(t){this._weekSeparator=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){t!=this._commitOnSelect&&(this._commitOnSelect=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultShowDate",{get:function(){return this._defaultShowDate},set:function(t){t!=this._defaultShowDate&&(this._defaultShowDate=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultDate",{get:function(){return this._defaultDate},set:function(t){t!=this._defaultDate&&(this._defaultDate=t instanceof Date?new Date(t):t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"holidays",{get:function(){return this._holidays},set:function(t){this._holidays=t,t?(this._holidayCollection=this._holidayCollection||new rl,this._holidayCollection.editor=this,this._holidayCollection.load(t)):this._holidayCollection.setNull(),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return this._list.listing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showButtons",{get:function(){return this._showButtons},set:function(t){this._showButtons=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"saveLabel",{get:function(){return this._saveLabel||Ue.messages.dateEditorSaveLabel},set:function(t){this._saveLabel=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cancelLabel",{get:function(){return this._cancelLabel||Ue.messages.dateEditorCancelLabel},set:function(t){this._cancelLabel=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deleteLabel",{get:function(){return this._deleteLabel||Ue.messages.dateEditorDeleteLabel},set:function(t){this._deleteLabel=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"todayLabel",{get:function(){return this._todayLabel||Ue.messages.dateEditorTodayLabel},set:function(t){this._todayLabel=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hourLabel",{get:function(){return this._hourLabel||Ue.messages.dateEditorHourLabel},set:function(t){this._hourLabel=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minuteLabel",{get:function(){return this._minuteLabel||Ue.messages.dateEditorMinuteLabel},set:function(t){this._minuteLabel=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"secondLabel",{get:function(){return this._secondLabel||Ue.messages.dateEditorSecondLabel},set:function(t){this._secondLabel=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hours",{get:function(){return this._hours},set:function(t){var e=this;if("string"==typeof t){this._hours=[];try{t.split(",").forEach((function(t){var i=t.split("-");if(1===i.length&&i[0]&&!isNaN(parseInt(i[0])))e._hours.push(parseInt(i[0]));else if(i.length=2)for(var o=parseInt(i[0]),r=parseInt(i[1]),n=o;n<r;n++)e._hours.indexOf(n)<0&&e._hours.push(n)}))}catch(t){this._hours=void 0}}else this._hours=t?t.slice():null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minutes",{get:function(){return this._minutes},set:function(t){this._minutes=t?t.slice():null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"timeSelectType",{get:function(){return this._timeSelectType},set:function(t){this._timeSelectType=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"viewMode",{get:function(){return this._viewMode},set:function(t){this._viewMode=t},enumerable:!1,configurable:!0}),i.prototype.dropDown=function(e){if(!(this.readOnly||this._controller._readOnly||this.listing||this._closing)){var i=St(this._container),o=Et(i),r=this._grid.editorOptions,n=this._list,s=i.body,a=Rt.getSize(this._container);if(this._grid.accessibility){var l=Rt.getSize(this._grid.container._containerDiv);a.cx=a.x-l.x+a.cx,a.cy=a.y-l.y+a.cy}return this._currentLoc=0,n.viewGridInside=r.viewGridInside,n.dropDownPosition=this._dropDownPosition,n.showToday=this._showToday,n.yearDisplayFormat=this.yearDisplayFormat,n.monthDisplayFormat=this.monthDisplayFormat,n.yearMonthDisplayFormat=this.yearMonthDisplayFormat,n.months=this.months,n.minDate=this._minDate,n.maxDate=this._maxDate,n.showWeeks=this._showWeeks,n.startWeek=this._startWeek||0,n.weekSelectable=this.weekSelectable,n.weekSeparator=this.weekSeparator,n.showButtons=this.showButtons,n.saveLabel=this.saveLabel,n.cancelLabel=this.cancelLabel,n.deleteLabel=this.deleteLabel,n.todayLabel=this.todayLabel,n.currentMode=t.CalendarMode.DAY,n.holidays=this._holidayCollection.isNull?r._holidayCollection:this._holidayCollection,n.hours=this.hours,n.minutes=this.minutes,n.viewMode=this.viewMode,n.setWeekDays(this.weekDays),this.$_setListDate(),this.isShowMarquee()?(this._showMarquee(s),n.show(s,0,0,0,null),this._centerPopup(s,n._element)):(n.show(s,a.cx+1,a.cy+a.height,this._cellBounds.width,Rt.getSize(this._editor)),this.registerPositionListener()),n.focused=e,this._editor.setAttribute("aria-expanded","true"),!Rt.isSlotMode()&&o.addEventListener(Rt.isIEMode()?"mousedown":"pointerdown",this._globalMouseHandler),!0}},i.prototype.resetPosition=function(){var t=this._list,e=Rt.getSize(this._container);if(this._grid.accessibility){var i=Rt.getSize(this._grid.container._containerDiv);e.cx=e.x-i.x+e.cx,e.cy=e.y-i.y+e.cy}t.$_resetPosition(e.cx+1,e.cy+e.height,this._cellBounds.width,Rt.getSize(this._editor))},i.prototype.closeUp=function(t){if(this.unRegisterPositionListener(),this.listing){var e=Et(St(this._container));this._closing=!0;try{e.removeEventListener(Rt.isIEMode()?"mousedown":"pointerdown",this._globalMouseHandler),this._closeMarquee(),this._list.hide(),t&&this._list.selected?(this.$_selectDate(this._list.date),(this._commitOnSelect||this._isMobile)&&this._dispatchCommit()):this._list.canceled&&this._controller.cancelEditor(!1)}finally{this._closing=!1,this._editor.setAttribute("aria-expanded","false")}return!0}},i.prototype.containsRange=function(t){return(!this._minDate||t>=this._minDate)&&(!this._maxDate||t<=this._maxDate)},i.prototype.initOptions=function(){e.prototype.initOptions.call(this),this._textReadOnly=!1,this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._dropDownPosition=t.DropDownPosition.BUTTON,this._dropDownWhenClick=!1,this._dropDownWhenEnter=!1,this._showToday=!0,this._showWeeks=!1,this._startWeek=0,this._weekSelectable=!1,this._weekSeparator="",this._commitOnSelect=!1,this._defaultShowDate=t.DefaultShowDate.NORMAL,this._showButtons=!0,this._cancelLabel=null,this._saveLabel=null,this._deleteLabel=null,this._todayLabel=null,this._timeSelectType=t.TimeSelectType.NONE,this._hours=null,this._minutes=null,this._viewMode=t.CalendarMode.DAY,this._holidayCollection&&this._holidayCollection.setNull(),this._yearDisplayFormat=this._monthDisplayFormat=this._yearMonthDisplayFormat=null},i.prototype.initDefaultOptions=function(){var t=this._grid;t&&Ma.initDefault(this,Xe.editor.dateCellEditor,t.editorOptions.dateCellEditor)},i.prototype.setEditIndex=function(i){var o;e.prototype.setEditIndex.call(this,i);var r=null===(o=this._editField())||void 0===o?void 0:o.dataType;this._weekSelectable=this._weekSelectable&&r!==t.ValueType.DATE&&r!==t.ValueType.DATETIME},i.prototype.setEditValue=function(t){e.prototype.setEditValue.call(this,t),this.weekSelectable?this._date=Qa(t):this._date="string"==typeof t?this._dateConverter.getDateNull(t):t},i.prototype.getEditValue=function(i,o){void 0===i&&(i=!0),void 0===o&&(o=!1);var r=e.prototype.getEditValue.call(this,i),n=this._editField().dataType;return r&&o&&(n==t.ValueType.DATE||n==t.ValueType.DATETIME)&&(r=this._minDate?Math.max(this._minDate.getTime(),r):r,(r=this._maxDate?Math.min(this._maxDate.getTime(),r):r)&&(r=new Date(r))),r},i.prototype._createEditor=function(t){return e.prototype._createEditor.call(this,t)},i.prototype._textHandler=function(){this._requestStart(!1)},i.prototype._compositionstartHandler=function(t){this.isDisabled()||this._requestStart(!1)},i.prototype._keyDownHandler=function(i){if(!this.isDisabled()){var o=this._list,r=this.listing,n=r&&o.focused,s=this._list.currentMode;switch(i.keyCode){case 13:if((i.altKey||this.dropDownWhenEnter)&&13===i.keyCode&&!r)return this._requestStart(),Rt.stopEvent(i,!0),this._list.focused=!0,this.$_setListDate(),!0;var a=!0;if(r&&n&&Rt.included(s,t.CalendarMode.YEAR,t.CalendarMode.MONTH)){if(this._viewMode!==s)return a=!1,o.currentMode=s===t.CalendarMode.YEAR?t.CalendarMode.MONTH:t.CalendarMode.DAY,o.currentMode===t.CalendarMode.DAY&&o.$_buildCalendar(),void Rt.stopEvent(i,!0);a=!0}if(a&&this.closeUp(!0))return Rt.stopEvent(i,!0),!this._sendToParent(i);break;case 27:if(this.closeUp(!1))return Rt.stopEvent(i,!0),!0;break;case 36:case 35:if(n)return Rt.stopEvent(i,!0),this.$_selectDate(36===i.keyCode?o.startDay():o.endDay()),!0;break;case 37:case 39:if(n){if(0===this._currentLoc){switch(this._list.currentMode){case t.CalendarMode.DAY:this.$_selectDate(o.incDay(37===i.keyCode?-1:1));break;case t.CalendarMode.MONTH:this.$_selectDate(o.incMonth(37===i.keyCode?-1:1));break;case t.CalendarMode.YEAR:this.$_selectDate(o.incMonth(37===i.keyCode?-12:12))}return Rt.stopEvent(i,!0),!0}if(this._setLocation(39===i.keyCode))return Rt.stopEvent(i,!0),!0}break;case 33:case 34:if(n){Rt.stopEvent(i,!0);var l=33===i.keyCode?-1:1,h=i.shiftKey?12:1;return s===t.CalendarMode.MONTH?h=12:s===t.CalendarMode.YEAR&&(h=120),this.$_selectDate(o.incMonth(l*h)),!0}break;case 40:case 38:if(i.altKey&&40===i.keyCode&&!r)return this._requestStart(),Rt.stopEvent(i,!0),this._list.focused=!0,this.$_setListDate(),!0;if(i.altKey&&38===i.keyCode&&r)return this.closeUp(!1),Rt.stopEvent(i,!0),!0;if(r){if(Rt.stopEvent(i,!0),n){l=40===i.keyCode?1:-1;0===this._currentLoc?s===t.CalendarMode.MONTH?this.$_selectDate(o.incMonth(4*l)):s===t.CalendarMode.YEAR?this.$_selectDate(o.incMonth(48*l)):this.$_selectDate(o.incDay(7*l)):1===this._currentLoc?this.$_selectDate(o.incHour(1*l)):2===this._currentLoc?this.$_selectDate(o.incMinute(1*l)):3===this._currentLoc&&this.$_selectDate(o.incSecond(1*l))}else this._list.focused=!0;return!0}break;case 84:i.altKey&&r&&(Rt.stopEvent(i,!0),this._list.date=new Date,this.$_selectDate(this._list.date));break;case 9:if(n&&this.timeSelectType!==t.TimeSelectType.NONE&&this._setLocation(!i.shiftKey))return Rt.stopEvent(i,!0),!0}return e.prototype._keyDownHandler.call(this,i)}},i.prototype._setLocation=function(e){var i=this._timeSelectType,o=this._currentLoc,r=1;if(i!==t.TimeSelectType.NONE){switch(i){case t.TimeSelectType.SECOND:r++;case t.TimeSelectType.MINUTE:r++;case t.TimeSelectType.HOUR:r++}return e?++o:--o,o<0||o>=r?!1:(this._list.setCurrentLoc(this._currentLoc=o),!0)}this._currentLoc=0},i.prototype._keyPressHandler=function(t){if(!this.isDisabled()){var i=this._list,o=t.keyCode||t.which,r=String.fromCharCode(o);if(r.toLocaleLowerCase()==this.todayChar){if(Rt.stopEvent(t,!0),this.listing)return i.focused=!0,this.$_selectDate(i.today),i._setTime(i.today,!0),!0}else{if(Rt.isFirefox&&(t.ctrlKey||0===o))return void e.prototype._keyPressHandler.call(this,t);if(Rt.isSafari&&Rt.ctrlKey(t)&&Rt.included(o,99,118,120))return void e.prototype._keyPressHandler.call(this,t);if(!this._regx.test(r))return void t.preventDefault()}e.prototype._keyPressHandler.call(this,t),t.keyCode&&this.textReadOnly&&t.preventDefault()}},i.prototype.$_resetValue=function(t){if(void 0===t&&(t=!1),this.visible||t){var e=this._editor,i=e.selectionStart,o=e.selectionEnd,r=e.value?e.value.length:0;e.value=e.value.replace(Ja,"");var n=e.value?e.value.length:0;this._isMobile||(n==r?e.setSelectionRange(i,o):e.setSelectionRange(o,o))}},i.prototype._dispatchChange=function(){(this._isMobile||this.visible)&&(this.$_resetValue(this._isMobile),e.prototype._dispatchChange.call(this))},i.prototype._changeHandler=function(t){e.prototype._changeHandler.call(this,t)},i.prototype._requestStart=function(t){return!!e.prototype._requestStart.call(this)&&(this._isMobile?t&&this.dropDown(!1):!1!==t&&this.dropDown(!1),!0)},i.prototype.setBounds=function(t,i,o,r,n){e.prototype.setBounds.call(this,t,i,o,r,n)},i.prototype._doChanged=function(){this._isMobile?!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()):(!this._started&&this._requestStart(),this._started&&!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()))},i.prototype.dropDownList=function(t){this.dropDown(!0)},i.prototype.closeList=function(t){this.closeUp(t)},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype.skipMaskChar=function(t){return" "===t},i.prototype._isDateEditor=function(){var e=this._editField().dataType;return e==t.ValueType.DATE||e==t.ValueType.DATETIME||!this.weekSelectable},i.prototype.$_selectDate=function(t){if(t){if(this._date=t,this.containsRange(t)){var e=void 0;e=this.weekSelectable?tl(t,this._startWeek,this.weekSeparator):this._dateConverter.getText(this._date),this._mask&&(e=this._mask.writeBuffer(e)),this._editor.value=e,this._doChanged()}}else this._date=null,this._mask&&this._mask.clearBuffer(),this._editor.value="",this._doChanged()},i.prototype.$_setListDate=function(){var e,i=this._defaultDate instanceof Date?new Date(this._defaultDate):this._dateConverter.getDateNull(this._defaultDate),o=this._editor.value;switch(this._mask&&(o=this._mask.getStripValue()),e=this.weekSelectable?Qa(o):this._dateConverter.getDateNull(o),this._defaultShowDate){case t.DefaultShowDate.TODAY:e=new Date;break;case t.DefaultShowDate.NORMAL:break;case t.DefaultShowDate.TODAY_WHEN_NULL:e=e||new Date;break;case t.DefaultShowDate.DEFAULT_WHEN_NULL:e=e||i;break;case t.DefaultShowDate.DEFAULT:e=i}e&&(this._list.date=e)},i.prototype.onDatePickerCloseUp=function(t,e){!this._isMobile&&this.setFocus(),this.closeUp(e)},i.INPUT_CSS="rg-date-editor",i.$$_LIST_ID=0,i}(Ga),ll=function(t){function e(e,i,o){var r=t.call(this)||this;r._focused=!1;var n=Et(e.doc);return r._jquery=n&&n.jQuery,r._editor=i,r._container=e,r._btOptions=o,r._element=r.$_createList(e.doc),r}return o(e,t),e.prototype._doDispose=function(){this._jquery=null,this._editor=null,this._container=null,this._containerElement=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"date",{get:function(){return this._date},set:function(t){if(this._date=t,t.getTime()!==this._date.getTime()&&(this._currDate=new Date(t),this._date=new Date(t),this.listing)){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());this._jquery&&this._jquery(this._element).datepicker("update",e)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"listing",{get:function(){return this._jquery&&this._jquery(this._element).data("datepicker")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"focused",{get:function(){return this._focused},set:function(t){t!=this._focused&&(this._focused=t,this._element.style.border=t?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=t?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px")},enumerable:!1,configurable:!0}),e.prototype.$_destroy=function(){this._jquery&&this._jquery(this._element).datepicker("destroy")},e.prototype.keydown=function(t){if(this._jquery){this._jquery(this._element).datepicker("keydown",t);var e=this._jquery(this._element).data("datepicker").viewDate;e instanceof Date&&(this.date=e,this._editor&&this._editor.selectDate(this._date))}},e.prototype.$_createList=function(t){var e=t.createElement("div");e.tabIndex=-1,e.id="rg-calendar-"+al.$$_LIST_ID++,e.className="rg-calendar";var i=e.style;return i.position="absolute",i.cssFloat="none",i.clear="both",i.boxSizing="border-box",i.zIndex=String(this._editor._baseZindex+2),i.margin="0px",i.overflow="auto",e},e.prototype.show=function(t,e,i,o,r){if(this._containerElement=!Rt.isMobile()&&this._viewGridInside?this._container._container:t,!this.$_createCalendar())return alert("BootStrap DatePicker Not Include"),!1;this.$_show(e,i,o,r)},e.prototype.$_createCalendar=function(){var t,e=this,i=this._element,o=this._btOptions;return this._date&&(t=new Date(this._date.getFullYear(),this._date.getMonth(),this._date.getDate())),!!this._jquery&&(this._jquery(i).datepicker&&this._jquery(i).datepicker(o).datepicker("setDate",t).on("changeDate",(function(t){var i=t.date;i&&!e._editor.containsRange(i)||(i?(e._date=new Date(i),e.selected=!0):(e._date=void 0,e.selected=!0),e.fireEvent(sl.CLOSE_UP,!0))})),!0)},e.prototype.$_show=function(t,e,i,o){this.focused=!1,this.selected=!1,this._containerElement.appendChild(this._element);var r=this._date;this._currDate=r?new Date(r):new Date,this.$_resetPosition(t,e,i,o),this._element.style.setProperty("width",Math.ceil(Rt.getSize(this._element).width)+"px")},e.prototype.today=function(){return this.date=new Date},e.prototype.incDay=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&e.setDate(this._date.getDate()+t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},e.prototype.incMonth=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&Rt.incMonth(e,t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},e.prototype.firstDay=function(){var t=new Date(this._currDate);return this._date&&t.setDate(1),this.date=t},e.prototype.lastDay=function(){var t=new Date(this._currDate);if(this._date){var e=t.getFullYear(),i=t.getMonth(),o=Rt.month_days[Rt.isLeapYear(e)?1:0][i];t.setDate(o)}return this.date=t},e}(nl),hl=function(e){function i(i,o){var r=e.call(this,i,o)||this;return r._minDate=new Date(1970,0,1),r._maxDate=new Date(2100,11,31),r._dropDownPosition=t.DropDownPosition.BUTTON,r._dropDownWhenClick=!1,r._commitOnSelect=!1,r._regx=/[0-9]|\.|\-|\/|a|A|p|P|m/,r._closing=!1,r._globalMouseHandler=function(t){var e=t.target;if(this._isMarquee(e))this.closeUp(!1);else{for(;e;){if(e==this._list._element)return;e=e.parentNode}this.closeUp(!0)}}.bind(r),r._baseZindex=r._grid.displayOptions.baseZindex,r}return o(i,e),i.prototype._doDispose=function(){this._globalMouseHandler=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"list",{get:function(){return this._list},set:function(t){this._list=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"btOptions",{get:function(){return this._btOptions},set:function(t){this._btOptions=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editFormat",{get:function(){return this.datetimeFormat},set:function(t){this.datetimeFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minDate",{get:function(){return this._minDate},set:function(t){this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxDate",{get:function(){return this._maxDate},set:function(t){this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){this._dropDownWhenClick=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){this._commitOnSelect=t},enumerable:!1,configurable:!0}),i.prototype.resetPosition=function(){var t=this._list,e=this._grid,i=Rt.getSize(this._container);if(e.accessibility){var o=Rt.getSize(this._grid.container._containerDiv);i.cx=i.x-o.x+i.cx,i.cy=i.y-o.y+i.cy}t.$_resetPosition(i.cx+1,i.cy+i.height,this._cellBounds.width,Rt.getSize(this._editor))},i.prototype.dropDown=function(){if(!(this.readOnly||this._controller._readOnly||this.listing||this._closing)){var t=St(this._container),e=Et(t),i=this._grid,o=this._list=new ll(i.container,this,this._btOptions),r=t.body,n=Rt.getSize(this._container);if(i.accessibility){var s=Rt.getSize(this._grid.container._containerDiv);n.cx=n.x-s.x+n.cx,n.cy=n.y-s.y+n.cy}return o.addListener(this),o.viewGridInside=this._options&&this._options.viewGridInside,o.dropDownPosition=this._dropDownPosition,o.minDate=this._minDate,o.maxDate=this._maxDate,this.$_setListDate(),this.isShowMarquee()?(this._showMarquee(r),o.show(r,0,0,0,null),this._centerPopup(r,o._element)):(o.show(r,n.cx+1,n.cy+n.height,this._cellBounds.width,Rt.getSize(this._editor)),this.registerPositionListener()),!Rt.isSlotMode()&&e.addEventListener(Rt.isIEMode()?"mousedown":"pointerdown",this._globalMouseHandler),!0}return!1},i.prototype.closeUp=function(t){if(this.unRegisterPositionListener(),this.listing){var e=Et(St(this._container));this._closing=!0;try{!Rt.isSlotMode()&&e.removeEventListener(Rt.isIEMode()?"mousedown":"pointerdown",this._globalMouseHandler),this._closeMarquee(),t&&this._list.selected&&(this.$_selectDate(this._list.date),(this._isMobile||this._commitOnSelect)&&this._dispatchCommit())}finally{this.$_listDestroy(),this._closing=!1}return!0}return!1},i.prototype.dropDownList=function(){this.dropDown()},i.prototype.closeList=function(t){this.closeUp(t)},i.prototype.$_setListDate=function(){var t=this._editor.value;t&&this._mask&&(t=this._mask.getStripValue());var e=this._dateConverter.getDateNull(t);e&&(this._list.date=e)},i.prototype.selectDate=function(t){this.$_selectDate(t)},i.prototype.$_selectDate=function(t){if(t&&t!=this._date){if(this._date=t,this.containsRange(t)){var e=this._dateConverter.getText(this._date);this._mask&&(e=this._mask.writeBuffer(e)),this._editor.value=e,this._doChanged()}}else void 0===t&&(this._editor.value=this._mask?(this._mask.clearBuffer(),this._mask.writeBuffer(null)):"",this._doChanged())},i.prototype.containsRange=function(t){return(!this._minDate||t>=this._minDate)&&(!this._maxDate||t<=this._maxDate)},Object.defineProperty(i.prototype,"listing",{get:function(){return!!this._list&&this._list.listing},enumerable:!1,configurable:!0}),i.prototype.initOptions=function(){e.prototype.initOptions.call(this),this._dropDownWhenClick=!1,this._textReadOnly=!1,this._viewGridInside=!1,this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._commitOnSelect=!1},i.prototype.initDefaultOptions=function(){},i.prototype._isDateEditor=function(){return!0},i.prototype.setEditValue=function(t){e.prototype.setEditValue.call(this,t),this._date="string"==typeof t?this._dateConverter.getDateNull(t):t},i.prototype.getEditValue=function(i,o){var r=e.prototype.getEditValue.call(this,i),n=this._editField().dataType;return r&&o&&(n==t.ValueType.DATE||n==t.ValueType.DATETIME)&&(r=r.getTime(),r=this._minDate?Math.max(this._minDate.getTime(),r):r,(r=this._maxDate?Math.min(this._maxDate.getTime(),r):r)&&(r=new Date(r))),r},i.prototype._requestStart=function(t){return!!e.prototype._requestStart.call(this,t)&&(this._isMobile?t&&this.dropDown():!1!==t&&this.dropDown(),!0)},i.prototype._textHandler=function(){this._requestStart()},i.prototype._compositionstartHandler=function(){this._requestStart()},i.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var i=this._list,o=this.listing,r=o&&i.focused;switch(t.keyCode){case 13:if(this.closeUp(!0))return Rt.stopEvent(t,!0),!this._sendToParent(t);break;case 27:if(this.closeUp(!1))return Rt.stopEvent(t,!0),!0;break;case 36:if(r)return Rt.stopEvent(t,!0),this.$_selectDate(i.firstDay()),!0;break;case 35:if(r)return Rt.stopEvent(t,!0),this.$_selectDate(i.lastDay()),!0;break;case 37:case 39:if(r)return Rt.stopEvent(t,!0),i&&i.keydown(t),!0;break;case 33:if(r)return Rt.stopEvent(t,!0),this.$_selectDate(i.incMonth(-1)),!0;break;case 34:if(r)return Rt.stopEvent(t,!0),this.$_selectDate(i.incMonth(1)),!0;break;case 40:if(t.altKey&&!o)return this._requestStart(),Rt.stopEvent(t,!0),!0;if(o)return Rt.stopEvent(t,!0),r?i.keydown(t):(i.focused=!0,this.$_setListDate()),!0;break;case 38:if(t.altKey&&o)return this.closeUp(!1),Rt.stopEvent(t,!0),!0;if(o){if(Rt.stopEvent(t,!0),r)i.date.getDate()<=7?i.focused=!1:i.keydown(t);else i.focused=!1;return!0}break;case 84:t.altKey&&o&&(Rt.stopEvent(t,!0),i.date=new Date,this.$_selectDate(i.date))}return e.prototype._keyDownHandler.call(this,t)}},i.prototype._keyPressHandler=function(t){if(!this.isDisabled()){var i=this._list,o=Rt.ctrlKey(t),r=t.keyCode||t.which,n=String.fromCharCode(t.keyCode||t.charCode);if(n.toLocaleLowerCase()==this.todayChar){if(Rt.stopEvent(t,!0),this.listing)return i.focused=!0,this.$_selectDate(i.today()),!0}else{if(Rt.isFirefox&&(t.ctrlKey||0===r))return e.prototype._keyPressHandler.call(this,t);if(Rt.isSafari&&o&&Rt.included(r,99,118,120))return void e.prototype._keyPressHandler.call(this,t);if(!this._regx.test(n))return void t.preventDefault()}e.prototype._keyPressHandler.call(this,t),t.keyCode&&this.textReadOnly&&t.preventDefault()}},i.prototype.$_resetValue=function(t){if(void 0===t&&(t=!1),this.visible||t){var e=this._editor,i=e.selectionStart,o=e.selectionEnd,r=e.value?e.value.length:0;e.value=e.value.replace(Ja,"");var n=e.value?e.value.length:0;this._isMobile||(n==r?e.setSelectionRange(i,o):e.setSelectionRange(o,o))}},i.prototype.setBounds=function(t,i,o,r,n){e.prototype.setBounds.call(this,t,i,o,r,n)},i.prototype._doChanged=function(){this._isMobile?!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()):(this._started&&this._requestStart(),this._started&&!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()))},i.prototype._dispatchChange=function(){(this._isMobile||this.visible)&&(this.$_resetValue(this._isMobile),e.prototype._dispatchChange.call(this))},i.prototype.onDatePickerCloseUp=function(t,e){!this._isMobile&&this.setFocus(),this.closeUp(e)},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype.$_listDestroy=function(){var t=this._list&&this._list._element.parentElement;this._list&&(this._list.$_destroy(),t.removeChild(this._list._element),this._list.dispose(),delete this._list)},i.INPUT_CSS="rg-btdate-editor",i}(Ga),ul=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._minDate=new Date(1970,0,1),o._maxDate=new Date(2100,11,31),o}return o(e,t),Object.defineProperty(e.prototype,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"native",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonCount",{get:function(){return 1},enumerable:!1,configurable:!0}),e.prototype._createEditor=function(e){var i=t.prototype._createEditor.call(this,e);return i.setAttribute("type","date"),i.tabIndex=this._isMobile?-1:0,i},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.initOptions=function(){t.prototype.initOptions.call(this)},e.prototype.initDefaultOptions=function(){},e.prototype.hasButton=function(t,e){return null==t||t},e.prototype.setVisible=function(e,i){void 0===i&&(i=!1),t.prototype.setVisible.call(this,e,i),this.visible&&this._editor.click()},e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e);var i=this._editor;i.min=this._minDate?this.$_toInputDate(this._minDate):"",i.max=this._maxDate?this.$_toInputDate(this._maxDate):""},e.prototype.setEditValue=function(t){this._date="string"==typeof t?this._dateConverter.getDateNull(t):t,this._editor.value=this.$_toInputDate(this._date)},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){if(40===e.keyCode)if(e.altKey)return this._requestStart(),!0;return t.prototype._keyDownHandler.call(this,e)}},e.prototype.setBounds=function(e,i,o,r,n){t.prototype.setBounds.call(this,e,i,o,r,0),this._editor&&Rt.isiOS&&(this._editor.style.minWidth=o+"px",this._editor.style.width=o+"px")},e.prototype.$_toInputDate=function(t){return t?e.Formatter.getText(t):""},e.INPUT_CSS="rg-ndate-editor",e.Formatter=Ge.getFormatter("yyyy-MM-dd"),e}(Na),cl=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.lastLayout=function(){throw new Error("Method not implemented.")},e.prototype.getText=function(t,e,i,o){throw new Error("Method not implemented.")},e.prototype.getCellText=function(t,e){throw new Error("Method not implemented.")},e.prototype.getRows=function(t,e,i){throw new Error("Method not implemented.")},e.prototype.getCell=function(t,e,i){throw new Error("Method not implemented.")},e}(Lt),dl=function(t){function e(e,i,o){var r=t.call(this)||this;return r._colCount=0,r._blockPaste=!1,r._lines=[],r._colCount=0,r._blockPaste=!1,r._parse(e,i,o),r}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._lines.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colCount",{get:function(){return this._colCount},set:function(t){this._colCount=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0==this._lines.length||0==this._colCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"single",{get:function(){return 1==this._lines.length&&1==this._colCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blockPaste",{get:function(){return this._blockPaste},set:function(t){this._blockPaste=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startIndex",{get:function(){return this._startIndex},enumerable:!1,configurable:!0}),e.prototype.get=function(t){return this._lines[t]},e.prototype._parse=function(t,e,i){var o,r,n,s,a,l=this._lines,h=[],u=t.length,c=0,d="";if(""===t)h.push(t),l.push(h),this._colCount=1;else{for(;c<u;)a=!1,o=t.charAt(c),r=c<u-1?t.charAt(c+1):"",'"'==o?s?n&&'"'==r?(d+=o,c++):n?n=!1:d+=o:(s=!0,n=!0):n||"\r"!=o&&"\n"!=o&&"\t"!=o?(s=!0,d+=o):("\t"==o&&(h.push(d),a=!0),"\r"!=o&&"\n"!=o||(h.push(d),this._colCount=Math.max(this._colCount,h.length),l.push(h),h=[],"\r"==o&&"\n"==r&&c++),d="",s=!1),c++;n&&(d='"'+d),(d.length>0||a)&&h.push(d),h.length>0&&(this._colCount=Math.max(this._colCount,h.length),l.push(h))}if(e&&e instanceof Sa&&!e.single&&(!i||1===this._colCount&&1===l.length)){var p=e.startIndex,f=e.endIndex;if(p&&f){var _=e.grid,g=p.layout,y=f.layout,m=p.itemIndex,b=f.itemIndex;if(g.col>y.col){var v=g;g=y,y=v}if(m>b){var w=m;m=b,b=w}g=_.activeCellLayout.getTopOf(g);for(var C=(y=_.activeCellLayout.getBottomOf(y,!0)).col-g.col+1,x=0,I=m;I<=b;I++){var S=_.getItem(I);S&&S.isDataRow&&x++}var E=(y.row-g.row+1)*x;c=0;for(var O=0,R=l.length;O<R;O++){for(var P=l[O].slice(),k=P.length;k<C;k++)l[O].push(P[c]),c=c>=P.length?0:c;this._colCount=Math.max(this._colCount,l[O].length)}c=0;for(O=l.length;O<E;O++)l.push(l[c++]),c=c>=l.length?0:c;this._blockPaste=!0,this._startIndex=Ds.temp(_,m,g)}}},e}(Lt),pl=function(e){function i(){var t=e.call(this)||this;return t._lastLayout=null,t}return o(i,e),i.prototype._doDispose=function(){return e.prototype._doDispose.call(this)},i.prototype.lastLayout=function(){return this._lastLayout},i.prototype.getText=function(t,e,i,o){var r,n,s,a,l,h=t.grid,u=this._rangeToCells(t,null,e,o),c=[];if(h.copyOptions.includeHeaderText)for(s=0;s<u.length;s++){var d=[];for(a=0;a<u[s].length;a++)(r=Rt.cast(u[s][a],as))?d.push(Rt.addQuot(r.header.displayText)):d.push("");c.push(d.join("\t"))}if(!i){i=[];for(var p=e.r1,f=e.r2;p<=f;p++)i.push(p)}return i.forEach((function(e){var i=h.getItem(e);if(i.dataRow>=0||Vo(i.itemState))for(s=0;s<u.length;s++){var o=[];for(a=0;a<u[s].length;a++)(r=Rt.cast(u[s][a],as))&&!r.blankWhenCopy?(n=Ds.temp(h,e,r).clone(),o.push(t.getData(n))):o.push("");l=0!=o.join("\t").length,c.push(o.join("\t"))}})),c.join("\r\n")+(l?"":"\r\n")},i.prototype.getCellText=function(t,e){var i="";return t.grid.copyOptions.includeHeaderText&&(i=e.valueColumn.header.displayText+"\r\n"),i+=t.getData(e)},i.prototype.getRows=function(e,i,o){if(null==i)return null;var r,n=o.grid,s=n.pasteOptions,a=n.getSelection(),l=o.dataColumn;if(a&&a.single&&!n.isTree()&&l&&l.mergeEdit&&n.editOptions.commitByCell){var h=n.getMergedItems(o.itemIndex,l,!0,!0),u=new Ds(n,h[0],l),c=new Ds(n,h[h.length-1],l);a=new Sa(n.selections,t.SelectionStyle.BLOCK,u,c),r=!0}else{if(s.selectBlockPaste&&n.selections.count>1)return void alert(s.multiSelectionPasteFailText);a=s.selectBlockPaste&&a}var d=new dl(i,a,r);if(d.empty)return null;if(d.single)return d.get(0)[0];d.blockPaste&&d.startIndex&&o.assign(d.startIndex);for(var p=n.activeCellLayout._dataCells,f=p[0][o.layout.col],_=p[p.length-1][Math.min(p[0].length-1,o.layout.col+d.colCount-1)],g=new Ds(n,o.itemIndex,f),y=new Ds(n,o.itemIndex,_),m=Ns.create(g,y),b=this._rangeToCells(e,d,m,null),v=void 0,w=void 0,C=void 0,x=void 0,I=[],S=0,E=d.rowCount;S<E;){var O={columns:[],values:[]};for(v=0;v<b.length&&S<E;v++,S++){var R=b[v],P=d.get(S);for(O.columns.push(R),O.values.push(x=[]),C=Math.min(P.length,R.length),w=0;w<C;w++)R[w]?x.push(P[w]):x.push("")}I.push(O)}return I},i.prototype.getCell=function(t,e,i){if(!e)return null;var o=new dl(e);return o.empty?null:o.get(0)[0]},i.prototype._rangeToCells=function(t,e,i,o){i.normalizeData(),this._lastLayout=null;var r=i.c1,n=i.c2,s=t.grid.activeCellLayout._dataCells,a=r===n?r.row:0,l=r===n?r.row:s.length-1,h=[];if(o){for(var u=[],c=a;c<=l;c++){for(var d=[],p=0;p<s[0].length;p++){var f=s[c][p];o.indexOf(f)>=0?(d.push(f.firstColumn),u[p]=u[p]||f):d.push(null)}h.push(d)}for(p=s[0].length-1;p>=0;p--)for(c=a;c<=l;c++)!u[p]&&h[c].splice(p,1)}else for(c=a;c<=l;c++){d=[];var _=r.source,g=n.source,y=_.col,m=g.col+g._defColSpan-1;for(p=y;p<=m;p++){(f=s[c][p])instanceof _s?d.push(f.firstColumn):d.push(null)}h.push(d)}return this._lastLayout=s[l][n.col],h},i}(cl),fl=function(e){function i(t){var i=e.call(this)||this;return i._values=null,i._dataRow=-1,i._grid=t,i}return o(i,e),Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._grid.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checked",{get:function(){return 0!=(1&this._getExtents())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return t.ItemType.ROW},enumerable:!1,configurable:!0}),i.prototype._getExtents=function(){return 0},i.prototype._setExtents=function(t){},Object.defineProperty(i.prototype,"values",{set:function(t){this._values=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataRow",{get:function(){return this._dataRow},set:function(t){this._dataRow=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataId",{get:function(){return this.dataSource.getRowId(this._dataRow)},enumerable:!1,configurable:!0}),i.prototype.getRowObject=function(){for(var t={},e=this.dataSource,i=this._dataRow>=0&&e.getRow(this._dataRow),o=0,r=e.fieldCount;o<r;o++){var n=e.getOrgFieldName(o),s=this._values.hasOwnProperty(o)?this._values[o]:i&&i[o];t[n]=s}return t},i.prototype.getRowData=function(){for(var t=[],e=this.dataSource,i=this._dataRow>=0&&e.getRow(this._dataRow),o=0,r=e.fieldCount;o<r;o++){var n=this._values.hasOwnProperty(o)?this._values[o]:i&&i[o];t[o]=n}return t},i.prototype.getData=function(t){return t=this.dataSource.getFieldIndex(t),this._values.hasOwnProperty(t)||this._dataRow<0?this._values[t]:this.dataSource.getRow(this._dataRow)[t]},i.prototype.setIndex=function(t){this._setIndex(t)},i}(Ho),_l=function(t){function e(e,i){var o=t.call(this,e)||this;return o._item=i,o}return o(e,t),e.prototype._doDispose=function(){return t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},enumerable:!1,configurable:!0}),e}(Ds),gl=function(){function e(t){this._grid=t,this._data=new pl,this._appendingItem=new fl(t),this._appendingIndex=new _l(t,this._appendingItem)}return e.prototype.dispose=function(){return null},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appendingIndex",{get:function(){return this._appendingIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPasting",{get:function(){return this._pasting},enumerable:!1,configurable:!0}),e.prototype.getDataRoots=function(){var t=this._grid._activeCellLayout._dataCells,e=[];if(!t.length||!t[0].length)return e;for(var i=0,o=t[0].length;i<o;i++)e.push(t[0][i].dataRoot);return e},e.prototype.getData=function(e){var i,o,r=this.grid,n=e.layout.firstColumn,s=r.getItem(e.itemIndex),a=r.copyOptions,l=a.datetimeFormat?Ge.getFormatter(a.datetimeFormat):null,h=a.booleanFormat?We.getFormatter(a.booleanFormat):null,u=a.copyTextCallback;if(!s||!(Vo(s.itemState)||s.dataRow>=0))return"";if(o=e.value,n&&!n.blankWhenCopy){if(null==(i=u?u.call(this,r,e.itemIndex,n,o):void 0))if(a.copyDisplayText||n instanceof hs)i=r.getDisplayText(e);else{switch(n instanceof ls?n.valueType:t.ValueType.TEXT){case t.ValueType.DATETIME:case t.ValueType.DATE:i=o?l?l.getText(o):String(o):"";break;case t.ValueType.BOOLEAN:i=null!=o?h?h.formatValue(o):String(o):"";break;case t.ValueType.NUMBER:i=null==o||isNaN(o)?"":String(o);break;case t.ValueType.OBJECT:i=o&&"object"==typeof o?JSON.stringify(o):"";break;default:i=a.lookupDisplay&&n instanceof ls&&(n.lookupDisplay||n.labelField)?br.getText(s,n):null!=o?String(o):""}}return Rt.addQuot(i)}return""},e.prototype.copyEmtpyToClipboard=function(){return""},e.prototype.copyToClipboard=function(t,e,i){return this._data.getText(this,t,e,i)},e.prototype.copyCellToClipboard=function(t){return this._data.getCellText(this,t)},e.prototype.pasteCellFromClipboard=function(t,e){if((t=this._correctIndex(t))&&this._grid.isValid(t)&&null!=e){var i=this._data.getCell(this,e,t);this._pasteSingleCell(t,i)}},e.prototype.pasteFromClipboard=function(t,e){var i=t.clone(),o=this.grid.pasteOptions.forceAppend;if((t=this._correctIndex(t))&&this._grid.isValid(t)){if(null!=e){var r=this._data.getRows(this,e,t);null!=r&&("string"==typeof r?this._pasteSingleCell(t,r):1!=r.length||o?(r.length>1||1===r.length&&o)&&this._pasteMultiLines(t,r):this._pasteSingleLine(t,r[0]))}Ds.areEquals(t,i)||this._grid.setFocusedIndex(i,!1,!1)}},e.prototype._correctIndex=function(t){if(t){var e=this._grid;if(t.normalize(e),this._grid.isValid(t)&&e.pasteOptions.selectionBase&&e.selections.count>0){var i=e.selections.getItem(0).getBounds().firstCell;t.column=i.column,t.itemIndex=i.itemIndex}}return t},e.prototype._convertValue=function(e,i,o,r,n,s){var a,l=void 0,h=o.dataIndex,u=e.getField(h),c=this._grid,d=function(){var t=c.body.getIndexCellStyle(s).editor||o.editor||{};"string"==typeof t&&(t={type:t});var e=c.delegate.getCellEditor(Ma.getEditorType(t));return e.initOptions(),e.initDefaultOptions(),e.applyOptions(t),e};switch(u.dataType){case t.ValueType.NUMBER:l=NaN;var p=void 0;if(r){var f=void 0;(i.applyNumberFormat||i.applyMaxLength)&&(f=a=d());var _=o.name;if(i.applyNumberFormat){var g=f&&f.editFormat||o.numberFormat||c.formatOptions.numberFormat;g&&(p=new qe(g))}var y=i.numberCharExpOfCol(_);y&&(r=r.replace(y,""));var m=i.numberSeparatorOfCol(_);if(m&&(r=r.replace(m,".")),l=p?+parseFloat(r).toFixed(p.maxDigits):parseFloat(r),i.applyMaxLength){var b=String(l).split(".");f&&f.maxIntegerLength>0&&(b[0]=b[0].substr(0,f.maxIntegerLength)),r=b.join("."),f&&f.maxLength>0&&(r=r.substr(0,f.maxLength)),l=parseFloat(r)}}else""==r&&(l=null);break;case t.ValueType.DATETIME:l=null;var v=i.dateReaders;if(r&&v)for(var w=0;w<v.length&&!(l=v[w].toDate(r,!1));w++);null===l&&(l=new Date(r),isNaN(l.getTime())&&(l=null)),null===l&&(l=u.readValue(r));break;case t.ValueType.BOOLEAN:l=void 0;var C=i.boolReader;r&&C&&(l=C.toBoolStrict(r)),void 0===l&&(l=u.readValue(r));break;default:if(r=String(r))if((a=d())instanceof za){var x=i.checkDomainOnly&&a.domainOnly,I=i.convertLookupLabel,S=-1,E=[],O=[];if(x||I)if(a.values&&a.values.length>0)O=a.values,E=a.labels;else if(o.lookupSource){var R=o.lookupSource,P=o.lookupKeyFieldIds,k=[];for(w=0;w<P.length-1;w++)k.push(n[P[w]]);var T=R.getTextDomain(k);O=T&&T.keys,E=T&&T.values}else o.values&&o.values.length>0&&(O=o.values,E=o.labels);if(a instanceof Ka){b=r.split(o.valueSeparator);var D=[];for(w=0;w<b.length;w++){var M=b[w];I&&O&&E&&O.indexOf(M)<0&&(S=E.indexOf(M))>=0&&(M=O[S]),x&&(!O||O.indexOf(M)<0)||D.push(M)}r=D.join(o.valueSeparator)}else r=I&&O&&E&&O.indexOf(r)<0&&(S=E.indexOf(r))>=0?O[S]:r,r=O&&O.indexOf(r)>=0?r:x?"":r}else a instanceof al?(a.mask&&a.mask.writeBuffer(r,!0),r=null==(l=a._strToVal(r))?void 0:l):(i.applyMaxLength&&a&&a instanceof Na&&a.maxLength>0&&(r=r.substr(0,a.maxLength)),o.textInputCase==t.TextInputCase.LOWER?r=r.toLocaleLowerCase():o.textInputCase==t.TextInputCase.UPPER&&(r=r.toLocaleUpperCase()));l=r}if(i.applyEditMask||i.applyInputChars){if(a||(a=d()),i.applyEditMask&&"string"==typeof l){var F=a.mask;F&&(F.clearBuffer(),F.writeBuffer(l,!0),l=F.checkValid()?F.getStripValue():null)}if(i.applyInputChars&&a instanceof $a){var L=a.inputCharacters,N=void 0;a.inputCharacters&&(N=new RegExp("[^"+L+"]","g")).test(l)&&(l=l.replace(N,"")),(L=a.ignoreCharacters)&&(N=new RegExp("["+L+"]","g")).test(l)&&(l=l.replace(N,""))}}return l},e.prototype._fireRowsPasted=function(t){for(var e=this._grid,i=[],o=0;o<t.length;o++)i.push(e.getItemIndexOfRow(t[o]));i.length>0&&e._fireItemsPasted(i)},e.prototype._cellWritable=function(e,i,o){var r=this._grid,n=r._fireCellPasting(e,o.value,o);if("boolean"==typeof n)return n;if(!r.pasteOptions.checkReadOnly)return!0;var s=r.body.getIndexCellStyle(e);if(s&&(null!=s.readOnly||null!=s.editable))return null!=s.editable?s.editable&&!s.readOnly:!s.readOnly;var a=r.body.getRowStyle(e.item,e.itemIndex<r.fixedOptions.rowCount);if("object"==typeof a&&(null!=a.readOnly||null!=a.editable))return null!=a.editable?a.editable&&!a.readOnly:!a.readOnly;var l=r.fixedOptions;if((e.colFixed||e.rightFixed)&&!l.editable||e.rowFixed&&!l.rowEditable)return!1;var h,u=e.item&&e.item.itemState;switch(i||u){case t.ItemState.NORMAL:case t.ItemState.FOCUSED:case t.ItemState.UPDATING:h=r.canUpdate(e.item,e.dataField);break;default:h=!0}var c=this.grid.getBodyCellAt(e,!1);if(c&&c.renderer2&&c.renderer2.canEdit())return h&&!e.dataColumn.readOnly;if(!c){var d=s.renderer||e.dataColumn.renderer;if(d)if("check"===("string"==typeof d?d:d.type)){var p=null==d.editable||d.editable;return h&&p&&!e.dataColumn.readOnly}}return h&&e.dataColumn.isWritable()},e.prototype._pasteSingleCell=function(t,e){var i,o=this._grid,r=o.dataSource,n=t.dataColumn,s=o.pasteOptions;if(null!=e&&r&&n&&!o.editOptions.readOnly&&t.item.canEdit()){e.lastIndexOf("\r\n")==e.length-1&&(e=e.substr(0,e.length-2)),e.lastIndexOf("\n")==e.length-1&&(e=e.substr(0,e.length-1));var a={text:e,value:this._convertValue(r,s,n,e,t.item&&t.item.getRowData(),t),oldValue:t.item.getData(t.dataField)};if(this._cellWritable(t,null,a))if(o.isItemEditing()||/*!grid.editOptions.commitByCell &&*/s.startEdit&&o.edit(t)){i=t.item;var l=[],h=[];h[t.dataField]=a.value,l[t.dataField]=i.getData(t.dataField),o.setCellUpdateEventLock(s.noEditEvent);try{i.setData(n.dataIndex,a.value)}finally{o.setCellUpdateEventLock(!1)}o.validateCellCommit(t,a.value),o.editOptions.commitByCell&&o.commit(!1,!1,!0),o._fireEditItemPasted(i,[t.dataField],l,h),o.refreshView()}else{this._pasting=!0;try{var u=o.validationManager,c=s.forceRowValidation,d=s.forceColumnValidation;i=t.item;var p=this._appendingItem.values=c||d?i.getRowData():[];p[n.dataIndex]=a.value;var f=Vo(i.itemState);if(this._appendingItem.dataRow=i.dataRow,this._appendingItem.setIndex(i.index),this._appendingIndex.column=null,this._appendingIndex.itemIndex=t.itemIndex,c&&u.validateRow(this._appendingItem,f,!0,!0),d){this._appendingIndex.column=n;try{u.validateCell(this._appendingIndex,f,!0)}catch(t){if(!(t instanceof Dn))throw t;if(et(t.level,o.editOptions.commitLevel)<0)throw t}}u.clearInvalidCell(this._appendingIndex),o.updatePastedRow(i,p,!c)}finally{this._pasting=!1}}}},e.prototype._pasteSingleLine=function(e,i){var o,r,n,s,a,l,h,u=this._grid,c=u.dataSource,d=u.pasteOptions,p=u.editOptions,f=!1;if(c&&!p.readOnly&&c){if(u.isItemEditing()||/*!editOptions.commitByCell && */d.startEdit&&u.edit(e)){var _=[],g=[],y=[],m=e.column;for(r=e.item,n=Math.min(i.columns.length,i.values.length),s=0;s<n;s++){var b=i.columns[s],v=i.values[s];for(a=0;a<v.length;a++){h=b[a];var w=v[a];if(h&&h instanceof ls){var C=Ds.temp(u,e.itemIndex,h);r.getData(h.dataIndex);var x={text:w,value:o=this._convertValue(c,d,h,w,r&&r.getRowData(),C),oldValue:e.item.getData(e.dataField)};u.setCellUpdateEventLock(d.noEditEvent);try{(l=this._cellWritable(C,null,x))&&r.setData(h.dataIndex,x.value)}finally{u.setCellUpdateEventLock(!1)}l&&(e.column=h,u.validateCellCommit(e,x.value),_.push(h.dataIndex),g[h.dataIndex]=e.item.getData(e.dataField),y[h.dataIndex]=x.value,f=!0)}}}if(f)p.commitByCell&&u.commit(!1),u._fireEditItemPasted(r,_,g,y),e.column=m,u.refreshView();else{var I=e.item;I&&!Vo(I.itemState)&&u.cancel()}}else{this._pasting=!0;try{var S=u.validationManager,E=d.forceRowValidation,O=d.forceColumnValidation,R=this._appendingItem;r=e.item,R.setIndex(r.index),R.dataRow=r.dataRow,this._appendingIndex.column=null,this._appendingIndex.itemIndex=e.itemIndex;y=R.values=E||O?r.getRowData():[];n=Math.min(i.columns.length,i.values.length);b=void 0,v=void 0;for(s=0;s<n;s++)for(b=i.columns[s],v=i.values[s],a=0;a<v.length;a++)if((h=b[a])&&h instanceof ls){C=Ms.tempItem(u,R,h);o=this._convertValue(c,d,h,v[a],R&&R.getRowData(),C);x={text:v[a],value:o,oldValue:e.item.getData(e.dataField)};(l=this._cellWritable(C,null,x))&&(y[h.dataIndex]=x.value,f=!0)}if(f){var P=Vo(r.itemState);if(E&&S.validateRow(R,P,!0,!0),O)for(s=0;s<n;s++)for(b=i.columns[s],v=i.values[s],a=0;a<v.length;a++){this._appendingIndex.column=b[a];try{S.validateCell(this._appendingIndex,P,!0)}catch(t){if(!(t instanceof Dn))throw t;if(et(t.level,p.commitLevel)<0)throw t}}S.clearInvalidCells(r.dataId),u.updatePastedRow(r,y,!E)}}finally{this._pasting=!1}}u.selections.clear(!0),f&&u.selections.add(e,new Ds(u,e.itemIndex,this._data.lastLayout()),t.SelectionStyle.BLOCK,!0)}},e.prototype._pasteMultiLines=function(e,i){var o=this._grid,r=o.dataSource;if(r){var n=o.pasteOptions,s=n.forceAppend,a=n.checkReadOnly;if(a&&o.editOptions.readOnly)return;var l=n.noDataEvent,h=i.length,u=e.itemIndex,c=r.fieldCount,d=o.getDataColumns(!1),p=d.length,f=o.validationManager,_=n.forceRowValidation,g=n.forceColumnValidation,y=this._appendingItem,m=this._appendingIndex,b=void 0,v=void 0,w=void 0,C=void 0,x=n.eventEachRow,I=[];n.commitEdit&&o.commit(!1)||o.cancel();var S=o.itemCount;l&&r.beginUpdate();var E=void 0,O=void 0,R=!0;if(!o.isTree()){var P=o.itemSource;E=P.filterMode,O=P.sortMode,P.filterMode=t.FilterMode.EXPLICIT,P.sortMode=t.SortMode.EXPLICIT,R=P.isFiltered(null)&&P.filterMode!==E||P.sorted&&P.sortMode!==O}try{for(this._pasting=!0,b=0;b<h&&u<S&&!s;b++)try{if((U=o.getItem(u)).itemState==t.ItemState.APPENDING)break;for(;U&&U.dataRow<0;)u++,U=o.getItem(u);if(null==U)break;var k=i[b],T=y.values=_||g?U.getRowData():[],D=_||g?U.getRowData():[],M=!1,F=[];for(y.setIndex(U.index),y.dataRow=U.dataRow,w=Math.min(k.columns.length,k.values.length),v=0;v<w;v++){var L=k.columns[v],N=k.values[v];for(C=0;C<N.length;C++){if((j=L[C])&&j instanceof ls){var $=Ms.tempItem(o,y,j),A=this._convertValue(r,n,j,N[C],y&&y.getRowData(),$),V={text:N[C],value:A,oldValue:U.getData(j.dataIndex)};(H=this._cellWritable($,null,V))&&(M=M||H||!a,F.push(j.dataIndex),D[j.dataIndex]=U.getData(j.dataIndex),T[j.dataIndex]=V.value)}}}if(M)try{m.column=null,m.itemIndex=U.index;var B=Vo(U.itemState);if(_&&f.validateRow(y,B,!0,!0),g)for(C=0;C<p;C++){var j=d[C];m.column=j;try{f.validateCell(m,B,!0)}catch(t){if(!(t instanceof Dn))throw t;if(et(t.level,o.editOptions.commitLevel)<0)throw t}}o.updatePastedRow(U,T,!_),f.clearInvalidCells(y.dataId),x&&o._fireEditItemPasted(U,F,D,T),I.push(U.dataRow)}catch(t){if(n.stopOnError)throw t}u++}catch(i){throw u=Math.max(e.itemIndex,u-1),o.setFocusedIndex(e,!1),o.selections.clear(!0),o.selections.add(e,new Ds(o,u,this._data.lastLayout()),t.SelectionStyle.BLOCK,!0),i}if(b<h&&n.enableAppend){for(;b<h;b++){k=i[b],T=y.values=[],D=[];y.dataRow=-1,y.setIndex(-1);try{F=[];for(w=Math.min(k.columns.length,k.values.length),v=0;v<w;v++){L=k.columns[v],N=k.values[v];for(C=0;C<N.length;C++){if((j=L[C])&&j instanceof ls){var H;$=Ms.tempItem(o,y,j),A=this._convertValue(r,n,j,N[C],T,$),V={text:N[C],value:A,oldValue:void 0};(H=this._cellWritable($,t.ItemState.APPENDING,V))&&(F.push(j.dataIndex),T[j.dataIndex]=V.value,D[j.dataIndex]=void 0)}}}if(n.fillColumnDefaults)for(C=0;C<p;C++){(j=d[C]).dataIndex>-1&&void 0===T[j.dataIndex]&&void 0!==j.defaultValue&&(T[j.dataIndex]=j.defaultValue)}if(n.fillFieldDefaults)for(C=0;C<c;C++)if(void 0===T[C]){var G=r.getField(C);void 0!==G.defaultValue&&(T[C]=G.defaultValue)}try{if(this._appendingIndex.column=null,this._appendingIndex.itemIndex=-1,_&&f.validateRow(y,!0,!0,!0),n.forceColumnValidation)for(C=0;C<p;C++){j=d[C];this._appendingIndex.column=j;try{f.validateCell(this._appendingIndex,!0,!0)}catch(t){if(!(t instanceof Dn))throw t;if(et(t.level,o.editOptions.commitLevel)<0)throw t}}var W=o.appendPastedRow(T);if(x){var U=o.getItem(o.getItemIndexOfRow(W));o._fireEditItemPasted(U,F,D,T)}I.push(W)}catch(t){if(n.stopOnError)throw t}}catch(i){throw u=Math.max(e.itemIndex,o.itemCount-1),o.setFocusedIndex(e,!1),o.selections.clear(!0),o.selections.add(e,new Ds(e.grid,u,this._data.lastLayout()),t.SelectionStyle.BLOCK,!0),i}}u=l?-1:o.itemCount}this._fireRowsPasted(I)}catch(t){throw this._fireRowsPasted(I),t}finally{if(this._pasting=!1,l&&(r.endUpdate(R),u<0&&(u=r.rowCount)),!o.isTree()){var Y=o.itemSource;R&&(Y.filterMode=E,Y.sortMode=O,Y._refreshItems())}}s&&I.length>0&&((e=e.clone()).itemIndex=u-I.length),o.setFocusedIndex(e,!1),o.selections.clear(!0),o.selections.add(e,new Ds(e.grid,u-1,this._data.lastLayout()),t.SelectionStyle.BLOCK,!0)}},e}(),yl=function(e){function i(t){var i=e.call(this,t)||this;return i._cellButtonWidth=16,i._editButtonWidth=16,i._editButtonHeight=16,i._errorIconWidth=16,i._showChangeMarker=!1,i._formatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:"",text:null},i._buttonHeight=16,i._dataCell=new br,i._hiddenCell=new vr,i._literalCell=new wr,i._seriesCell=new Cr,i._cs=new ns,i._rowCs=new jo,i}return o(i,e),i.prototype._doDispose=function(){this._dataCell=this._dataCell.dispose(),this._hiddenCell=this._hiddenCell.dispose(),this._literalCell=this._literalCell.dispose(),this._seriesCell=this._seriesCell.dispose(),this._cs=null,this._rowCs=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this.refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowStyleCallback",{get:function(){return this._rowStyleCallback},set:function(t){t!==this._rowStyleCallback&&(this._rowStyleCallback=t,this.refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ariaLabelCallback",{get:function(){return this._ariaLabelCallback},set:function(t){this._ariaLabelCallback=t,this.refreshOwner()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellButtonWidth",{get:function(){return this._cellButtonWidth},set:function(t){t!=this._cellButtonWidth&&(this._cellButtonWidth=t,this.refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editButtonWidth",{get:function(){return this._editButtonWidth},set:function(t){t!=this._editButtonWidth&&(this._editButtonWidth=t,this.refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editButtonHeight",{get:function(){return this._editButtonHeight},set:function(t){t!=this._editButtonHeight&&(this._editButtonHeight=t,this._buttonHeight=Math.max(16,t),this.refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"errorIconWidth",{get:function(){return this._errorIconWidth},set:function(t){t!=this._errorIconWidth&&(this._errorIconWidth=t,this.refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonHeight",{get:function(){return this._buttonHeight},enumerable:!1,configurable:!0}),i.prototype.getCell=function(t){return this.getCellAt(t.item,t.column)},i.prototype.getCellAt=function(e,i){var o,r=this._grid;if(i instanceof ls?e.index<0||e instanceof fl?(o=this._hiddenCell,this._hiddenCell.setItem(e)):o=this._dataCell:o=i instanceof hs?this._seriesCell:i instanceof us?this._literalCell:this._dataCell,o.setIndex2(r,e?e.index:-1,i),i instanceof ls){var n=r.validationManager.getError(o.index);n?(o.error=n.message,o.errorLevel=n.level):(o.error=null,o.errorLevel=t.ValidationLevel.IGNORE)}return o},i.prototype.getIndexCellStyle=function(t,e){var i=this.getCell(t);return this.getCellStyle(i,this._cs.clear(),!1,e)},i.prototype.getCellStyle=function(t,e,i,o){void 0===o&&(o=!0);var r,n=t.valueColumn,s=this._cellStyleCallback;s&&(r=s(this._grid.handler,t),e.assign(r)),n&&(r=n.getCellStyle(t),e.assign(r));var a=this.getUserCellStyle(t.index.dataRow,t.valueColumn.name);a&&e.assign(a);var l=e.styleName||n&&n.styleName||"";return o&&(e.styleName="rg-data-cell "+(i?"rg-merged-cell ":"")+l),e},i.prototype.getCellFormatters=function(t,e,i,o){if(e?(e.numberFormatter=e.numberFormatter||t.numberFormatter,e.datetimeWriter=e.datetimeWriter||t.datetimeWriter,e.booleanFormatter=e.booleanFormatter||t.boolFormatter,e.textFormatter=e.textFormatter||t.textFormatter,e.prefix=e.prefix||t.prefix,e.suffix=e.suffix||t.suffix):((e=this._formatter).numberFormatter=t.numberFormatter,e.datetimeWriter=t.datetimeWriter,e.booleanFormatter=t.boolFormatter,e.textFormatter=t.textFormatter,e.prefix=t.prefix,e.suffix=t.suffix,e.text=null),i){var r=i.grid,n=r.body.getCell(i);e=(o=r.body.getCellStyle(n,o)).toFormatter(e)}return e},i.prototype.getRowStyle=function(e,o,r,n){void 0===r&&(r=!1),void 0===n&&(n=!0);var s=this._grid,a=this._rowCs;if(a.clear(),n){var l=this._rowStyleCallback;if(l){var h=l(s.handler,e,o)||{};a.assign(h)}var u=this.getUserCellStyle(e.dataRow,-1);u&&a.assign(u)}if(!a.styleName){var c=i.ROW_STYLE;e.index%2&&s.displayOptions.useAlternateRowStyle&&(c+=i.ALTERNATE_ROW_STYLE),o&&(c+=i.FIXED_ROW_STYLE),r||(c+=i.STATE_ROW_STYLES[e.rowState]||""),e.checked&&(c+=i.CHECKED_ROW_STYLE),e.itemState===t.ItemState.DUMMY&&(c+=i.DUMMY_ROW_STYLE),a.styleName=c}return a},i.prototype.addUserCellStyle=function(t,e,i){var o=this._grid,r=o.getItemOfRow(t,!0);r&&(o.itemSource.addCellStyle(r.dataId,e,i)&&o.refreshView())},i.prototype.removeUserCellStyle=function(t,e){var i=this._grid,o=null!=t?i.getItemOfRow(t,!0):null;(o||null==t)&&(i.itemSource.removeCellStyle(o?o.dataRowId:null,e)&&i.refreshView())},i.prototype.getUserCellStyle=function(t,e){var i=this._grid,o=i.getItemOfRow(t,!0);if(o)return i.itemSource.getUserCellStyle(o.dataId,e)},i.prototype._prepareUpdate=function(){var t=this._grid=this.owner;this._ds=t.dataSource,this._showChangeMarker=t.displayOptions.showChangeMarker},i.ROW_STYLE=" rg-data-row",i.ALTERNATE_ROW_STYLE=" rg-alternate-row",i.FIXED_ROW_STYLE=" rg-fixed-row",i.CHECKED_ROW_STYLE=" rg-checked-row",i.DUMMY_ROW_STYLE=" rg-dummy-row",i.STATE_ROW_STYLES={created:" rg-created-row",deleted:" rg-deleted-row",createAndDeleted:" rg-deleted-row",updated:" rg-updated-row"},i}(dr),ml=function(t){function e(e){var i=t.call(this)||this;return i._grid=e,i}return o(e,t),e.prototype._doDispose=function(){return this._grid=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),e.prototype._changed=function(){this._grid&&this._grid.optionsChanged(this)},e.prototype._invalidateOwner=function(){this._grid&&this._grid.invalidate()},e.prototype._layoutOwner=function(){this._grid&&this._grid.invalidateLayout()},e.prototype._refreshOwner=function(){this._grid&&this._grid.refreshView()},e}(Lt),bl=function(t){function e(e){var i=t.call(this,e)||this;return i._colCount=0,i._rightCount=0,i._rowCount=0,i._rightFixed=!0,i._exceptFromFiltering=!0,i._exceptFromSorting=!0,i._editable=!0,i._rowEditable=!0,i._resizable=!1,i._rowResizable=!1,i._movable=!1,i._colBarWidth=3,i._rightBarWidth=3,i._rowBarHeight=3,i._mergeRows=!1,i._blankRows=!1,i.assignFrom(Xe.fixed),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"colCount",{get:function(){return this._colCount},set:function(t){(t=Math.max(0,t))!=this._colCount&&(this._colCount=t,this.grid&&this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightCount",{get:function(){return this._rightCount},set:function(t){(t=Math.max(0,t))!=this._rightCount&&(this._rightCount=t,this.grid&&this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._rowCount},set:function(t){(t=Math.max(0,t))!=this._rowCount&&(this._rowCount=t,this.$_resetItemSource())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightFixed",{get:function(){return this._rightFixed},set:function(t){t!=this._rightFixed&&(this._rightFixed=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exceptFromFiltering",{get:function(){return this._exceptFromFiltering},set:function(t){t!=this._exceptFromFiltering&&(this._exceptFromFiltering=t,this.$_resetItemSource())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exceptFromSorting",{get:function(){return this._exceptFromSorting},set:function(t){t!=this._exceptFromSorting&&(this._exceptFromSorting=t,this.$_resetItemSource())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowEditable",{get:function(){return this._rowEditable},set:function(t){t!=this._rowEditable&&(this._rowEditable=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowResizable",{get:function(){return this._rowResizable},set:function(t){t!=this._rowResizable&&(this._rowResizable=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colBarWidth",{get:function(){return this._colBarWidth},set:function(t){(t=Math.max(0,t))!=this._colBarWidth&&(this._colBarWidth=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightBarWidth",{get:function(){return this._rightBarWidth},set:function(t){(t=Math.max(0,t))!=this._rightBarWidth&&(this._rightBarWidth=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowBarHeight",{get:function(){return this._rowBarHeight},set:function(t){(t=Math.max(0,t))!=this._rowBarHeight&&(this._rowBarHeight=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mergeRows",{get:function(){return this._mergeRows},set:function(t){t!=this._mergeRows&&(this._mergeRows=t,this.grid._columnMergeRuleChanged(null))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blankRows",{get:function(){return this._blankRows},set:function(t){t!=this._blankRows&&(this._blankRows=t,this.$_resetItemSource(!0))},enumerable:!1,configurable:!0}),e.prototype._refreshOwner=function(){t.prototype._refreshOwner.call(this),this.grid&&this.grid.invalidateColumns()},e.prototype.$_resetItemSource=function(t){var e,i=this.grid;i&&(e=i.itemSource)?(e.setFixed(this._rowCount,!this._exceptFromSorting,!this._exceptFromFiltering,t),this._dirty=!1):this._dirty=!0},e.ROW_BAR_STYLE="rg-fixed-row-bar",e.ROW_BAR_CELL_STYLE="rg-fixed-row-bar-cell",e.COLUMN_BAR_STYLE="rg-fixed-column-bar",e}(ml),vl=function(e){function i(i){var o=e.call(this,i)||this;return o._refreshMode=t.RefreshMode.ALL,o._columnResizable=!0,o._columnMovable=!0,o._columnResizeThreshold=3,o._minCellWidth=8,o._defaultColumnWidth=100,o._fitStyle=t.GridFitStyle.NONE,o._rowResizable=!1,o._eachRowResizable=!1,o._autoClearHeights=!0,o._rowHeight=0,o._rowHeightPadding=0,o._refCalcHeights=!0,o._dataHeights=null,o._minTableRowHeight=23,o._minRowHeight=23,o._maxRowHeight=0,o._hscrollBar=!0,o._vscrollBar=!0,o._liveScroll=!0,o._scrollDuration=0,o._hscrollDuration=0,o._hintDelay=0,o._showTooltip=!1,o._tooltipEllipsisOnly=!1,o._rowChangeDelay=0,o._horzPageScroll=!1,o._showEmptyMessage=!1,o._focusVisible=!0,o._focusType=t.FocusType.LAYER,o._rowFocusType=t.RowMaskType.NONE,o._groupFocusVisible=!1,o._wheelEnabled=!0,o._wheelScrollLines=3,o._wheelScrollHorz=16,o._wheelAccelDelay=0,o._wheelAccelScroll=null,o._wheelEventPropagate=!0,o._rightClickable=!0,o._remergeWhenColumnMoved=!0,o._editItemMerging=!1,o._showInnerFocus=!0,o._toastZIndex=3e3,o._popupDropdownCount=0,o._popupViewDistance=0,o._selectionMode=t.SelectionMode.SINGLE,o._selectionStyle=t.SelectionStyle.BLOCK,o._selectionDisplay=t.SelectionDisplay.CELL,o._selectAndImmediateDrag=!1,o._altSelectAndImmediateDrag=!1,o._selectAtSingleRow=!1,o._rowHoverType=t.RowMaskType.NONE,o._rowBlockType=t.RowMaskType.NONE,o._showEmptyTooltip=!1,o._showChangeMarker=!0,o._showNativeEditButton=!1,o._baseZindex=2e3,o._useAlternateRowStyle=!0,o._useFocusClass=!1,o._watchDisplayChange=!0,o._syncGridHeight=t.SyncGridHeight.NONE,o._groupFocusLevel=-1,o._selectionRemovable=!1,o.assignFrom(Xe.display),Rt.isMobile()&&(o._selectionStyle=t.SelectionStyle.NONE),(Rt.ieNine||Rt.ieTen)&&(o._focusType=t.FocusType.LINE),i.setWatchTimer(o._watchDisplayChange),o}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"refreshMode",{get:function(){return this._refreshMode},set:function(t){t!=this._refreshMode&&(this._refreshMode=t,this.grid.setNeedRefresh(!0),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"columnResizable",{get:function(){return this._columnResizable},set:function(t){this._columnResizable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"columnMovable",{get:function(){return this._columnMovable},set:function(t){this._columnMovable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"columnResizeThreshold",{get:function(){return this._columnResizeThreshold},set:function(t){this._columnResizeThreshold=Math.min(Math.max(3,t),10)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultColumnWidth",{get:function(){return this._defaultColumnWidth},set:function(t){t!=this._defaultColumnWidth&&(this._defaultColumnWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fitStyle",{get:function(){return this._fitStyle},set:function(t){t!=this._fitStyle&&(this._fitStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fitStyleIncludeFixed",{get:function(){return this._fitStyleIncludeFixed},set:function(t){t!=this._fitStyleIncludeFixed&&(this._fitStyleIncludeFixed=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowResizable",{get:function(){return this._rowResizable},set:function(t){this._rowResizable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"eachRowResizable",{get:function(){return this._eachRowResizable},set:function(t){this._eachRowResizable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"autoClearHeights",{get:function(){return this._autoClearHeights},set:function(t){t!=this._autoClearHeights&&(this._autoClearHeights=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"refCalcHeights",{get:function(){return this._refCalcHeights},set:function(t){t!=this._refCalcHeights&&(this._refCalcHeights=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowHeight",{get:function(){return this._rowHeight},set:function(t){t!=this._rowHeight&&(this._rowHeight=t,this._autoClearHeights&&this.grid&&this.grid.clearRowHeights(!1),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowHeightPadding",{get:function(){return this._rowHeightPadding},set:function(t){t!==this._rowHeightPadding&&(this._rowHeightPadding=t,this._autoClearHeights&&this.grid&&this.grid.clearRowHeights(!1),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataHeights",{get:function(){return this._dataHeights},set:function(t){t&&t.length>0?this._dataHeights=t.slice():this._dataHeights=null,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minTableRowHeight",{get:function(){return this._minTableRowHeight},set:function(t){(t=Math.max(i.MIN_TABLE_ROW_HEIGHT,t))!=this._minTableRowHeight&&(this._minTableRowHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){(t=Math.max(i.MIN_TABLE_ROW_HEIGHT,t))!=this._minRowHeight&&(this._minRowHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxRowHeight",{get:function(){return this._maxRowHeight},set:function(t){(t=Math.max(0,t))!=this._maxRowHeight&&(this._maxRowHeight=t,this._autoClearHeights&&this.grid&&this.grid.clearRowHeights(!1),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minCellWidth",{get:function(){return this._minCellWidth},set:function(t){(t=Math.max(0,t))!=this._minCellWidth&&(this._minCellWidth=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hscrollBar",{get:function(){return this._hscrollBar},set:function(t){t!=this._hscrollBar&&(this._hscrollBar=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vscrollBar",{get:function(){return this._vscrollBar},set:function(t){t!=this._vscrollBar&&(this._vscrollBar=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"liveScroll",{get:function(){return this._liveScroll},set:function(t){t!=this._liveScroll&&(this._liveScroll=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollDuration",{get:function(){return this._scrollDuration},set:function(t){this._scrollDuration=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hscrollDuration",{get:function(){return this._hscrollDuration},set:function(t){this._hscrollDuration=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hintDelay",{get:function(){return this._hintDelay},set:function(t){this._hintDelay=Math.max(t,0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){this._showTooltip=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tooltipEllipsisOnly",{get:function(){return this._tooltipEllipsisOnly},set:function(t){this._tooltipEllipsisOnly=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowChangeDelay",{get:function(){return this._rowChangeDelay},set:function(t){this._rowChangeDelay=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"horzPageScroll",{get:function(){return this._horzPageScroll},set:function(t){this._horzPageScroll=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"emptyMessage",{get:function(){return this._emptyMessage},set:function(t){t!=this._emptyMessage&&(this._emptyMessage=t,this.grid.setEmptyMessage(t))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showEmptyMessage",{get:function(){return this._showEmptyMessage},set:function(t){t!=this._showEmptyMessage&&(this._showEmptyMessage=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusVisible",{get:function(){return this._focusVisible},set:function(t){t!=this._focusVisible&&(this._focusVisible=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusType",{get:function(){return this._focusType},set:function(t){t!==this.focusType&&(this._focusType=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowFocusType",{get:function(){return this._rowFocusType},set:function(t){t!=this._rowFocusType&&(this._rowFocusType=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupFocusVisible",{get:function(){return this._groupFocusVisible},set:function(t){t!==this._groupFocusVisible&&(this._groupFocusVisible=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupFocusLevel",{get:function(){return this._groupFocusLevel},set:function(t){t!=this._groupFocusLevel&&(this._groupFocusLevel=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wheelEnabled",{get:function(){return this._wheelEnabled},set:function(t){this._wheelEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wheelScrollLines",{get:function(){return this._wheelScrollLines},set:function(t){this._wheelScrollLines=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wheelScrollHorz",{get:function(){return this._wheelScrollHorz},set:function(t){this._wheelScrollHorz=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wheelAccelDelay",{get:function(){return this._wheelAccelDelay},set:function(t){this._wheelAccelDelay=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wheelAccelScroll",{get:function(){return this._wheelAccelScroll},set:function(t){this._wheelAccelScroll=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wheelDeltaY",{get:function(){return this._wheelDeltaY},set:function(t){this._wheelDeltaY=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wheelEventPropagate",{get:function(){return this._wheelEventPropagate},set:function(t){this._wheelEventPropagate=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightClickable",{get:function(){return this._rightClickable},set:function(t){this._rightClickable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"remergeWhenColumnMoved",{get:function(){return this._remergeWhenColumnMoved},set:function(t){this._remergeWhenColumnMoved=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editItemMerging",{get:function(){return this._editItemMerging},set:function(t){t!=this._editItemMerging&&(this._editItemMerging=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showInnerFocus",{get:function(){return this._showInnerFocus},set:function(t){t!=this._showInnerFocus&&(this._showInnerFocus=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"toastZIndex",{get:function(){return this._toastZIndex},set:function(t){this._toastZIndex=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupDropdownCount",{get:function(){return this._popupDropdownCount},set:function(t){this._popupDropdownCount=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectionMode",{get:function(){return this._selectionMode},set:function(t){t!=this._selectionMode&&(this._selectionMode=t,this.grid.clearAddSelection())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectionStyle",{get:function(){return this._selectionStyle},set:function(t){t!=this._selectionStyle&&(this.grid.selections.clear(!0),this._selectionStyle=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectionDisplay",{get:function(){return this._selectionDisplay},set:function(t){t!=this._selectionDisplay&&(this._selectionDisplay=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectAndImmediateDrag",{get:function(){return this._selectAndImmediateDrag},set:function(t){this._selectAndImmediateDrag=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"altSelectAndImmediateDrag",{get:function(){return this._altSelectAndImmediateDrag},set:function(t){this._altSelectAndImmediateDrag=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectAtSingleRow",{get:function(){return this._selectAtSingleRow},set:function(t){this._selectAtSingleRow=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowHoverType",{get:function(){return this._rowHoverType},set:function(t){t!=this._rowHoverType&&(this._rowHoverType=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowBlockType",{get:function(){return this._rowBlockType},set:function(t){t!=this._rowBlockType&&(this._rowBlockType=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowBlockCallback",{get:function(){return this._rowBlockCallback},set:function(e){e!==this._rowBlockCallback&&(this._rowBlockCallback=e,this._rowBlockType!=t.RowMaskType.NONE&&this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showEmptyTooltip",{get:function(){return this._showEmptyTooltip},set:function(t){this._showEmptyTooltip=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showChangeMarker",{get:function(){return this._showChangeMarker},set:function(t){t!=this._showChangeMarker&&(this._showChangeMarker=t,this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollMessageCallback",{get:function(){return this._scrollMessageCallback},set:function(t){this._scrollMessageCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showNativeEditButton",{get:function(){return this._showNativeEditButton},set:function(t){t!=this._showNativeEditButton&&(this._showNativeEditButton=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"baseZindex",{get:function(){return this._baseZindex},set:function(t){this._baseZindex=Math.max(t,0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useAlternateRowStyle",{get:function(){return this._useAlternateRowStyle},set:function(t){t!=this._useAlternateRowStyle&&(this._useAlternateRowStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useFocusClass",{get:function(){return this._useFocusClass},set:function(t){t!=this._useFocusClass&&(t||(this.grid.setFocusedClass(this.grid.focusedIndex,!1),this.grid.setFocusedRowClass(this.grid.focusedIndex,!1)),this._useFocusClass=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editButtonHeight",{get:function(){return this.grid.body.editButtonHeight},set:function(t){this.grid.body.editButtonHeight=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"watchDisplayChange",{get:function(){return this._watchDisplayChange},set:function(t){t!=this._watchDisplayChange&&(this._watchDisplayChange=t,this.grid.setWatchTimer(t))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"syncGridHeight",{get:function(){return this._syncGridHeight},set:function(e){e!=this._syncGridHeight&&(this._syncGridHeight=e,e!==t.SyncGridHeight.ALWAYS&&this.grid.recallHeight(),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"popupViewDistance",{get:function(){return this._popupViewDistance},set:function(t){this._popupViewDistance=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowHeightCallback",{get:function(){return this._rowHeightCallback},set:function(t){this._rowHeightCallback=t,this.grid.clearRowHeights(!1),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectionRemovable",{get:function(){return this._selectionRemovable},set:function(t){this._selectionRemovable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showTooltipWhileEditing",{get:function(){return this._tooltipOnEditing},set:function(t){this._tooltipOnEditing=t},enumerable:!1,configurable:!0}),i.MIN_TABLE_ROW_HEIGHT=15,i}(ml),wl=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.width=t,this.height=e}return t.create=function(e,i){return void 0===e&&(e=0),void 0===i&&(i=0),new t(e,i)},t.prototype.toString=function(){return"{width: "+this.width+", height: "+this.height+"}"},t.EMPTY=new t,t}(),Cl=function(t){function e(e,i){return void 0===i&&(i=null),t.call(this,e,i)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){for(var t=this.parent;t;){if(t instanceof zc)return t;t=t.parent}return null},enumerable:!1,configurable:!0}),e.prototype.measure=function(t,e,i){return this._setClassName(this._dom),this._doMeasure(t,e,i)},e.prototype.layoutContent=function(t,e){void 0===e&&(e=!1),(this.grid._loading||this.visible)&&(this._doPrepareContent(t),this._doLayoutContent(t,e))},e.prototype._getCssSelector=function(){return""},e.prototype._getCssDisplay=function(){return"table"},e.prototype._doDraw=function(t){this._doRender(t)},e.prototype._doMeasure=function(t,e,i){return new wl(e,i)},e.prototype._doPrepareContent=function(t){},e.prototype._doLayoutContent=function(t,e){},e.prototype._doRender=function(t){},e}(_a);var xl,Il,Sl=function(t){function e(e,i,o){void 0===o&&(o=null);var r=t.call(this,e,o)||this;return r._ff=Rt.isFirefox,r._chromium=Rt.isChromium,r._textProp=Rt.TextProp,r._cursor="default",r._model=i,r}return o(e,t),e.prototype._doDispose=function(){this._model=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),e.prototype.setCursor=function(t){t!==this._cursor&&(this._cursor=t,this._dom.style.cursor=t)},e}(Cl),El=function(t){function e(e){return t.call(this,e,"emptyGridView")||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.setMessage=function(t){this._span.innerHTML=t||Ue.messages.displayEmptyMessage},e.prototype.setFocus=function(){var t=this._span;t.tabIndex=-1,t.focus()},e.prototype._createDom=function(e){var i=t.prototype._createDom.call(this,e),o=this._span=e.createElement("span");return o.role="gridcell",i.appendChild(o),i},e.prototype._getCssSelector=function(){return"rg-empty-grid"},e.prototype._doDraw=function(t){this.setMessage(this.grid.displayOptions.emptyMessage)},e}(Cl),Ol=function(t){function e(e,i,o){void 0===o&&(o=null);var r=t.call(this,e,i,o)||this;return r._explicitWidth=NaN,r}return o(e,t),e.prototype._doDispose=function(){this._tbody=this._thead=this._table=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"tableRowCount",{get:function(){return this._tbody.childElementCount},enumerable:!1,configurable:!0}),e.prototype.getCellPoint=function(t,e){return(e=e||new fa).x+=t.offsetLeft,e.y+=t.offsetTop,e},e.prototype._getTableHidden=function(){return!0},e.prototype._getTableCaption=function(){return""},e.prototype._createDom=function(t){var e=t.createElement("div"),i=this._table=t.createElement("table"),o=i.createCaption();o.textContent="grid table ";var r=o.style;return r.width=r.height="0px",r.overflow="hidden",r.setProperty("padding","0px","important"),r.boxSizing="border-box",(r=i.style).setProperty("table-layout","fixed","important"),r.setProperty("width","100%","important"),i.className="rg-table",e.appendChild(i),this._thead=t.createElement("thead"),i.appendChild(this._thead),this._tbody=t.createElement("tbody"),i.appendChild(this._tbody),e},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),e[g]=this[_],e.style.overflow="hidden"},e.prototype._doPrepareContent=function(t){var e=this._getExplicitWidth(t);Rt.equalNumbers(e,this._explicitWidth)||(this._table.style.width=e>0?e+"px":"100%",this._explicitWidth=e),this._doPrepareTableExtents(t),this._doPrepareTable(t)},e.prototype._doDraw=function(t){this._doRender(t),this._doRenderTable(this._tbody)},e.prototype._visibleChanged=function(){t.prototype._visibleChanged.call(this),this.visible?!this._table.parentElement&&this._dom.appendChild(this._table):Rt.detach(this._table)},e.prototype._getExplicitWidth=function(t){return NaN},e.prototype._doPrepareTableExtents=function(t){this._initExec||(this._initExec=!0,t.grid.accessibility&&this._getTableHidden()&&this._getTableHidden()&&this._table.setAttribute("aria-hidden","true"))},e.prototype._doPrepareTable=function(t){this._doPrepareTableHead(t,this._thead),this._doPrepareTableRows(t,this._tbody)},e.prototype._doPrepareTableHead=function(t,e){var i,o=St(e);0==e.childElementCount?(i=o.createElement("tr"),e.appendChild(i),this._getTableHidden()&&i.setAttribute("aria-hidden","true"),(l=i.style).setProperty("border","0px none","important")):i=e.lastElementChild;for(var r=this._getCellCount(t);i.childElementCount<r;){(a=o.createElement("th")).scope="col",(l=a.style).setProperty("margin","0px","important"),l.setProperty("padding","0px","important"),l.setProperty("font-size","0px","important"),l.setProperty("line-height","0px","important"),l.height="0px",i.appendChild(a)}for(;i.childElementCount>r;)i.removeChild(i.lastChild);for(var n=i.children,s=0;s<n.length;s++){var a,l;(l=(a=n[s]).style).width=this._getCellWidth(t,s)+"px"}},e.prototype._prepareTableRowCells=function(t,e){for(var i=this._getCellCount(t),o=St(e),r=e.childElementCount;r<i;){var n=o.createElement("td");e.appendChild(n);var s=this._prepareCellContent(n,r++);n.appendChild(s)}for(;e.childElementCount>i;){s=e.lastElementChild;this._cleanCellContent(s),e.removeChild(e.lastElementChild)}return e.childElementCount},e.prototype._isFixedHeight=function(t){return!0},e.prototype._getMinRowHeight=function(t){return t.minRowHeight},e.prototype._doPrepareTableRow=function(t,e,i,o){this._prepareTableRowCells(t,o);var r=this._isFixedHeight(t),n=o.children,s=this._isDataTable(),a=r?this._getTableRowHeight(t,i):this._getMinRowHeight(t),l=isNaN(a)||a<2?"0px":a-2+"px",h=o.style;o[g]=this[_],o.$_fix=r,o.$_hei=r?a:0,s||r?h.setProperty("height",a+"px"):h.removeProperty("height"),h.display="";for(var u=this._getStartCell(t)-this._getFirstCell(t),c=n.length;u<c&&u<=this._getEndCell(t);u++){var d=n[u];this._ff&&(d.style.height="100%");var p=d.firstElementChild;p||(p=this._prepareCellContent(d,u),d.appendChild(p));var f=p.style,y=r?l:"";!r&&s&&f.removeProperty("height"),y!=f.maxHeight&&(f.maxHeight=y),"hidden"!==f.overflow&&(f.overflow="hidden")}},e.prototype._doRenderTable=function(t){for(var e=t.children,i=0;i<e.length;i++){var o=e[i];this._renderRow(o,i)}},e.prototype._renderRow=function(t,e){this._doDrawRow(e,t);for(var i=t.children,o=0;o<i.length;o++){var r=i[o];this._renderCell(r.lastElementChild,e,o)}},e.prototype._renderCell=function(t,e,i){this._doDrawCell(e,i,t)},e.prototype._prepareCellContent=function(t,e){return St(t).createElement("div")},e.prototype._cleanCellContent=function(t){},e.prototype._doDrawRow=function(t,e){},e.prototype._doDrawCell=function(t,e,i){},e.prototype._getTableRow=function(t,e){return this._tbody.children[e]},e.prototype._getTableRows=function(t,e,i){for(var o=[],r=0;r<i;r++)o.push(this._tbody.children[e+r]);return o},e.prototype._getTableCell=function(t,e){return this._tbody.children[t].children[e]},e.prototype.getCellContent=function(t,e){return this._tbody.children[t].children[e].firstElementChild},e.prototype.getContentAt=function(t){var e,i=t.grid.layoutManager,o=i.fixedItemCount,r=t.column?t.column.index:0;return e=o>0?t.itemIndex<o?t.itemIndex:t.itemIndex-i.topIndex+1:t.itemIndex-i.topIndex,this.getCellContent(e,r)},e.prototype._getFirstCell=function(t){return t.firstCell},e.prototype._getStartCell=function(t){return t.startCell},e.prototype._getLastCell=function(t){return t.lastCell},e.prototype._getEndCell=function(t){return t.endCell},e}(Sl),Rl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._isDataTable=function(){return!1},e.prototype._doPrepareTableRows=function(t,e){for(var i=Math.max(0,this._getTableRowCount(t)),o=St(e);e.childElementCount<i;){var r=o.createElement("tr");e.appendChild(r)}for(;e.childElementCount>i;)e.removeChild(e.lastChild);for(var n=e.children,s=0;s<i;s++){(r=n[s]).style.height=this._getTableRowHeight(t,s)+"px",this._doPrepareTableRow(t,s,s,r)}},e.prototype._getTableRowCount=function(t){return 1},e}(Ol),Pl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._trCount=0,e._trs=1,e}return o(e,t),e.prototype._isDataTable=function(){return!0},e.prototype._getTrs=function(t){return 1},e.prototype._getTableRowCount=function(t){var e=t.fixedItemCount,i=e+t.itemCount;return i*=this._trs,i+=e>0?1:0},e.prototype.$_getTableIndex=function(t,e){var i=t.fixedItemCount,o=e*this._trs;return i>0&&e>=i?o+1:o},e.prototype._getTableRow=function(t,e){var i=this.$_getTableIndex(t,e);return this._tbody.children[i]},e.prototype._doPrepareTableRows=function(t,e){for(var i=t.$_getItems(),o=this._trs=this._getTrs(t),r=t.fixedItemCount,n=t.itemCount+r,s=this._trCount=Math.max(0,this._getTableRowCount(t)),a=St(e);e.childElementCount<s;){var l=a.createElement("tr");e.appendChild(l)}for(;e.childElementCount>s;)e.removeChild(e.lastChild);var h=e.children,u=0,c=0;if(r>0){for(u=0;u<r;u++)for(var d=0;d<o;d++,c++)this._doPrepareTableRow(t,u,c,h[c]);this.$_prepareFixedBar(t,h[c++])}for(;u<n&&c<s;u++){var p=i[u].isData?o:1;for(d=0;d<p&&c<s;d++,c++)this._doPrepareTableRow(t,u,c,h[c])}},e.prototype.$_prepareFixedBar=function(t,e){var i=It(e),o=this._prepareTableRowCells(t,e),r=t.fixedBarHeight,n=e.style;r>0?(n.height=t.fixedBarHeight+"px",n.display=""):n.display="none";for(var s=e.children,a=0;a<o;a++){var l=s[a];l instanceof i.HTMLTableCellElement&&(l.rowSpan=1,l.style.display=""),(l=s[a].firstElementChild)&&(l.style.maxHeight="0px",l.style.overflow="hidden")}return r},e.prototype._getTableRowHeight=function(t,e){return t.getTableRowHeight(e,1)},e.prototype._getCellContent=function(t){return t.firstElementChild},e.prototype._updateCellContent=function(t,e,i){this._doUpdateCellContent(t,e,this._getCellContent(i))},e.prototype._doUpdateCellContent=function(t,e,i){},e}(Ol),kl=function(t){function e(){var e=t.call(this)||this;return e._valueSeparator=",",e}return o(e,t),Object.defineProperty(e.prototype,"valueSeparator",{get:function(){return this._valueSeparator},set:function(t){this._valueSeparator=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.SERIES_TYPE},enumerable:!1,configurable:!0}),e.prototype._makeText=function(t,e){var i=this.valueSeparator||this.index.seriesColumn.valueSeparator;return e.getDisplayText(t,i)||""},e.SERIES_TYPE="series",e}(qr),Tl=function(t){function e(){var e=t.call(this)||this;return e._baseValue=NaN,e.$_render=function(t,e,i,o){var r=this._values;if(r&&r.length){for(var n=r.length,s=r[0],a=r[0],l=1;isNaN(s)&&l<n;)a=s=r[l++];for(;l<n;l++){var h=r[l];isNaN(h)||(h<s&&(s=h),h>a&&(a=h))}var u=isNaN(this._baseValue)?s:this._baseValue;isNaN(s)||this._renderChart(e,r,s,a,u)}}.bind(e),e}return o(e,t),e.interfaced=function(t){return Rt.included(t.type,Dl.TYPE,Ml.TYPE,Fl.TYPE)},Object.defineProperty(e.prototype,"baseValue",{get:function(){return this._baseValue},set:function(t){this._baseValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstStyle",{get:function(){return this._firstStyle},set:function(t){this._firstStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastStyle",{get:function(){return this._lastStyle},set:function(t){this._lastStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"highStyle",{get:function(){return this._highStyle},set:function(t){this._highStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lowStyle",{get:function(){return this._lowStyle},set:function(t){this._lowStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"belowStyle",{get:function(){return this._belowStyle},set:function(t){this._belowStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pointStyle",{get:function(){return this._pointStyle},set:function(t){this._pointStyle=t},enumerable:!1,configurable:!0}),e.prototype._doInitContent=function(t){var e=St(t),i=this._div=e.createElement("div");i.style.position="relative",i.style.height="100%",t.appendChild(i);var o=(this._svg=Dr.createSVG(i)).style;o.position="absolute",o.left=o.top="0px",o.width=o.height="100%"},e.prototype._doRenderCell=function(t,e,i,o,r){var n=this._svg;n.setAttribute("class",this._getChartStyle()),this._values=this._getValues(e),Dr.renderSVG2(t,n,this.$_render)},e.prototype._getPoints=function(t,e,i){for(var o=t.length,r=[],n=i-e,s=0;s<o;s++){var a=t[s],l=5+s/(o-1)*90,h=10+(isNaN(a)||0==n?80:80*(1-(a-e)/n));r.push(l,h)}return r},e.prototype._getBasePoint=function(t,e,i){var o=e-t;return 0+(isNaN(i)||0==o?100:100*(1-(i-t)/o))},e}(function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._getValues=function(t){return t.value||[]},e}(zr)),Dl=function(t){function e(){var i=t.call(this)||this;return i._chartStyle=e.CHART_STYLE,i.lastStyle=e.LAST_STYLE,i.highStyle=e.HIGH_STYLE,i.lowStyle=e.LOW_STYLE,i}return o(e,t),e.interfaced=function(t){return t.type==e.TYPE},Object.defineProperty(e.prototype,"chartStyle",{get:function(){return this._chartStyle},set:function(t){this._chartStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!1,configurable:!0}),e.prototype._getChartStyle=function(){return this._chartStyle},e.prototype._renderChart=function(t,e,i,o,r){for(var n,s=isNaN(r)?o:Math.max(o,r),a=isNaN(r)?i:Math.min(i,r),l=this._getPoints(e,a,s),h=e.length,u=0;u<h-1;u++)if(t.sline(null,l[2*u]+"%",l[2*u+1]+"%",l[2*(u+1)]+"%",l[2*(u+1)+1]+"%"),n=this.pointStyle){var c=l[2*u],d=l[2*u+1];t.scircle(n,c+"%",d+"%","2")}if(n=this.firstStyle){c=l[0],d=l[1];t.scircle(n,c+"%",d+"%","2")}if(n=this.lastStyle){c=l[2*(h-1)],d=l[2*(h-1)+1];t.scircle(n,c+"%",d+"%","2")}if(n=this.highStyle)for(u=0;u<h;u++)if(e[u]>=o){c=l[2*u],d=l[2*u+1];t.scircle(n,c+"%",d+"%","2")}if(n=this.lowStyle)for(u=0;u<h;u++)if(e[u]<=i){c=l[2*u],d=l[2*u+1];t.scircle(n,c+"%",d+"%","2")}},e.TYPE="sparkline",e.STYLE="rg-sparkline-renderer",e.CHART_STYLE="rg-sparkline-renderer-chart",e.LAST_STYLE="rg-sparkline-renderer-last",e.HIGH_STYLE="rg-sparkline-renderer-high",e.LOW_STYLE="rg-sparkline-renderer-low",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(Tl),Ml=function(t){function e(){var i=t.call(this)||this;return i._chartStyle=e.CHART_STYLE,i._barWidth=.8,i.lastStyle=e.LAST_STYLE,i.highStyle=e.HIGH_STYLE,i.lowStyle=e.LOW_STYLE,i}return o(e,t),e.interfaced=function(t){return t.type===e.TYPE},Object.defineProperty(e.prototype,"chartStyle",{get:function(){return this._chartStyle},set:function(t){this._chartStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"barWidth",{get:function(){return this._barWidth},set:function(t){this._barWidth=Math.min(1,Math.max(0,t))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!1,configurable:!0}),e.prototype._getChartStyle=function(){return this._chartStyle},e.prototype._renderChart=function(t,e,i,o,r){for(var n,s=isNaN(r)?o:Math.max(o,r),a=isNaN(r)?i:r,l=e.length,h=this._getBasePoint(a,s,r),u=100/l,c=0+u/2,d=s-a,p=u*this._barWidth,f=0;f<l;f++){var _=e[f];if(!isNaN(_))if(n=_<=i&&this.lowStyle?this.lowStyle:_>=o&&this.highStyle?this.highStyle:_<r&&this.belowStyle?this.belowStyle:0==f&&this.firstStyle?this.firstStyle:f==l-1&&this.lastStyle?this.lastStyle:null,isNaN(this.baseValue)&&a<0)if(s<0){var g=0,y=0===d?100:Math.max(1,Math.floor(Math.abs(_-s)/d*100));t.pbounds(n,c-p/2,g,p,y)}else{g=0===d?100:Math.floor(Math.abs(a)/d*100),y=Math.max(1,Math.floor(Math.abs(_)/d*100));_>0?t.pbounds(n,c-p/2,100-g-y,p,y):t.pbounds(n,c-p/2,100-g,p,y)}else{y=0==d?100:Math.max(1,Math.floor(100*(_-a)/d));t.pbounds(n,c-p/2,h,p,-y)}c+=u}},e.TYPE="sparkcolumn",e.STYLE="rg-sparkcolumn-renderer",e.CHART_STYLE="rg-sparkcolumn-renderer-chart",e.LAST_STYLE="rg-sparkcolumn-renderer-last",e.HIGH_STYLE="rg-sparkcolumn-renderer-high",e.LOW_STYLE="rg-sparkcolumn-renderer-low",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(Tl),Fl=function(t){function e(){var i=t.call(this)||this;return i._chartStyle=e.CHART_STYLE,i._barWidth=.8,i._belowHeight=.4,i.belowStyle=e.BELOW_STYLE,i}return o(e,t),e.interfaced=function(t){return t.type===e.TYPE},Object.defineProperty(e.prototype,"chartStyle",{get:function(){return this._chartStyle},set:function(t){this._chartStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"barWidth",{get:function(){return this._barWidth},set:function(t){this._barWidth=Math.min(1,Math.max(0,t))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"belowHeight",{get:function(){return this._belowHeight},set:function(t){this._belowHeight=Math.min(1,Math.max(0,t))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!1,configurable:!0}),e.prototype._getChartStyle=function(){return this._chartStyle},e.prototype._renderChart=function(t,e,i,o,r){for(var n=e.length,s=100/n,a=0+s/2,l=s*this._barWidth,h=0+100*(1-this._belowHeight),u=0;u<n;u++){var c=e[u];if(!isNaN(c)&&c!=r){var d=null;c<r&&this.belowStyle&&(d=this.belowStyle);var p=c<r?100:0;t.pbounds(d,Math.floor(a-l/2),Math.floor(p),Math.floor(l),Math.floor(h-p))}a+=s}},e.TYPE="sparkwinloss",e.STYLE="rg-sparkwinloss-renderer",e.CHART_STYLE="rg-sparkwinloss-renderer-chart",e.BELOW_STYLE="rg-sparkwinloss-renderer-below",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(Tl),Ll=function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this,e,i)||this;return o._domIndex=-1,o._trs=1,o._fixedHeight=!1,o}return o(e,t),e.prototype._doDispose=function(){this._item=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"itemIndex",{get:function(){return this._item.index},enumerable:!1,configurable:!0}),e.prototype.updateItem=function(t,e,i,o){this._item=t,this._domIndex=e,this._trs=i,this._fixedHeight=o},e.prototype.clearContent=function(t,e){},e.prototype._createDom=function(){return null},e.prototype.$_getDefaultRenderer=function(t,e){return qr.TYPE},e.prototype._changed=function(){this.invalidate()},e.prototype._getTableRow=function(t,e){return this.parent._getTableRow(t,this._domIndex)},e.prototype._getTableRows=function(t){return this.parent._getTableRows(t,this._domIndex,this._trs)},e.prototype._getCellContent=function(t){return this.parent.getCellContent(this._domIndex,t)},e}(Cl),Nl="rg-expander-expanded",$l="rg-expander-collapsed",Al=function(e){function i(t,i){return void 0===i&&(i=null),e.call(this,t,i)||this}return o(i,e),i.isExpander=function(t){var e=t.className;return"string"==typeof e&&(e==Nl||e==$l||e.indexOf("rg-tree-expanded")>=0||e.indexOf("rg-tree-collapsed")>=0)},i.prototype.resetButtons=function(t,e,i){for(var o=t.layoutManager,r=this._trs,n=this.parent._cells,s=this._getFirstCell(o),a=this._getStartCell(o)-s,l=this._getEndCell(o)-s,h=e&&i&&e.head===i.head&&t.canMergeEditing(i),u=0;u<r;u++)for(var c=n[this._domIndex+u],d=a;d<=l;d++){var p=c[d],f=p.layout,_=f.firstColumn;!f.isProxy&&this._item.isDataRow&&_ instanceof as&&!h&&this.$_setButtons(t,p,p.cell.firstElementChild)}},i.prototype.moveCellButtons=function(t,e,i){var o=Math.min(i-e.item.index,e.rowSpan-1);if(!this.grid.canMergeEditing(e)&&o!=e.buttonsOffset){var r=e.rowIndex,n=r+o,s=t.getTableItemBounds(r),a=t.getTableItemBounds(n),l=t.grid.body.buttonHeight,h=a.y-s.y;h=Math.floor(h+(a.height-l)/2),e.buttons.style.top=h+"px",e.buttonsOffset=o}},i.prototype.cellRefresh=function(t,e,i,o,r){var n=t.layoutManager;this._updateDataCell(t,n,e,i,o,r)},i.prototype.clearContent=function(t,e){for(var i=this.parent,o=this._getFirstCell(t),r=this._getStartCell(t)-o,n=this._getEndCell(t)-o,s=0;s<e;s++)for(var a=i._cells[this._domIndex+s],l=r;l<=n;l++){var h=a[l],u=h.renderer2;u&&u.clearContent(),h.setBorderBottom(1),h.changedMarker&&(Rt.detach(h.changedMarker),h.valueChanged=!1)}},i.prototype._doLayoutContent=function(t,e){void 0===e&&(e=!1);var i=t.grid,o=this._trs,r=i.body,n=this.parent,s=n._cells,a=this._getFirstCell(t),l=this._getStartCell(t)-a,h=this._getEndCell(t)-a,u=i.focusedIndex,c=u&&u.itemIndex==this._item.index,d=u.column,p=this._item.index;this._item instanceof jr&&(h=Math.min(h,this._item.parent.level-1));for(var f=Ds.temp(i,p),_=n._tbody.rows,g=0;g<o;g++)for(var y=s[this._domIndex+g],m=_[this._domIndex+g],b=l;b<=h;b++){var v=y[b],w=v.layout;if(!w.isProxy){var C=w.firstColumn;if(!(w instanceof _s&&i.isRecycleMode()&&m.recycle)||v.merged||w.blanked){v.focused=c&&d===C,v.mouseEntered=!1,f.layout=w;var x=r.getCellAt(this._item,C);v.visible?(v.width=t.getCellWidth(b),v.height=t.getTableRowHeightFixed(v.trow,v.rowSpan),C instanceof as?this._updateDataCell(i,t,r,x,C,v,!0,e):this._clearDataCell(v)):C instanceof as&&this._updateDataCell(i,t,r,x,C,v,!1)}}}},i.prototype._getFirstCell=function(t){return t._firstCell},i.prototype._getLastCell=function(t){return t._lastCell},i.prototype._getStartCell=function(t){return t.getStartCell(!1)},i.prototype._getEndCell=function(t){return this._item instanceof Hr?Math.min(t.getStartCell(!1)+this._item.groupLevel,t.getEndCell(!1)):t.getEndCell(!1)},i.prototype._createRenderer=function(t,e,i,o,r){return t.delegate.createRenderer(i,o,r)},i.prototype.$_getRenderer=function(t,e,i,o,r){var n,s,a,l,h=e.valueColumn.renderer,u=i.renderer;"string"==typeof u?a=u:u&&(a=u.type,l=u),"string"==typeof h?n=h:h&&(n=h.type,s=h),u?r.userRenderer=!0:r.userRenderer&&(r.rendererChanged=!0,r.userRenderer=!1);var c=a||n||(o instanceof hs?kl.SERIES_TYPE:this.$_getDefaultRenderer(t,e));if(!r.renderer2||r.rendererChanged||r.renderer2.type!=c)return this._createRenderer(t,e,c,s,l);r.renderer2&&u&&r.renderer2.assignFrom(u)},i.prototype.$_getCellWidth2=function(t,e,i){return t.getCellWidth2(e,i)},i.prototype.$_clearAriaProperty=function(t){t.removeAttribute("aria-activedescendant"),t.removeAttribute("aria-haspopup")},i.prototype._renderDataCell=function(t,e,i,o,r,n){var s=r.cell,a=t.doc,l=!1,h=this.$_getRenderer(t,i,o,n,r);h&&(r.renderer2&&r.renderer2.clearAndDispose(),r.renderer2=h,r.rendererChanged=!1,l=!0);var u=s.firstElementChild,c=r.renderer2;(r.heighted=this._fixedHeight)&&(u.style.maxHeight=r.height-2+"px"),!l&&c&&c._dom!=u&&(c.clearContent(),l=!0),t.accessibility&&this.$_clearAriaProperty(s),this.$_setButtons(t,r,u);var d=!1,p=r.merged&&t.findGroupItem(r.item,n.dataIndex);if(p&&n.mergeGrouped&&t.rowGroup.$_isExpanderVisible(p)){var f=r.expander;f||((f=r.expander=a.createElement("span")).style.position="absolute",f.style.display="inline-block",f.style.top="2px",f.style.left="2px",s.appendChild(f)),d=p.expanded,f.className=d?Nl:$l}else r.clearExpander();var _=c.styleName;r.expander&&(_+=" "+(d?"rg-expanded-cell":"rg-collapsed-cell")),l?c.initContent(i._index,u,_):c.checkClassName(_)?(c.clearContent(),c.initContent(i._index,u,_)):c.index.assign(i._index),c.renderCell(t,i,r);var g=e._showChangeMarker&&i.isValueChanged();if(g!=r.valueChanged){if(g){var y=r.changedMarker;y||((y=r.changedMarker=a.createElement("div")).className="rg-changed-marker",y.style.position="absolute",y.style.display="block",y.style.top="0px",r.changedMarker=y),s.appendChild(y)}else r.changedMarker&&r.valueChanged&&Rt.detach(r.changedMarker);r.valueChanged=g}Gl.addEdgeMark(o.edgeMark||n.edgeMark,r,a)},i.prototype._clearDataCell=function(e){e.setClassName(""),e.setEditor(null,null),e.button=t.CellButton.NONE,e.error=void 0,e.editable=!1,e.readonly=!0,e.setBorderBottom(1);var i=e.cell.firstElementChild;this._fixedHeight&&(i.style.maxHeight=e.height-2+"px"),e.renderer2&&e.renderer2.clearContent(),e.valueChanged=!1},i.prototype._updateDataCell=function(t,e,i,o,r,n,s,a){void 0===s&&(s=!0),void 0===a&&(a=!1);var l=a?n.style:i.getCellStyle(o,n.style.clear(),n.merged);(null==o.value||""==o.value)&&r instanceof ls&&r.placeHolder&&(l.styleName+=" "+(o.dataColumn.placeHolderStyleName||"rg-data-empty-cell"));var h=t.cellGhostStyle;if(Rt.setStyle(h,n.cell),l.style){for(var u in l.style)h[u]=void 0;l.style&&Rt.setStyle(l.style,n.cell)}n.refreshFormatters(l),i.getCellFormatters(r,n),n.setEditor(l.editor,r.editor),n.button=l.button||r.button,n.buttonWidth=l.buttonWidth,n.error=o.error,n.errorLevel=o.errorLevel;var c=Ds.temp(t,n.item.index,n.dataColumn);if(n.editable=t.getEditableAt(c,n.style),n.readonly=t.getReadOnlyAt(c,n.style),n.editable&&!n.readonly||(l.styleName+=" rg-data-readonly-cell"),n.setClassName(l.styleName),!n.merged&&r instanceof ls&&r.layout.blanked&&!r.equalBlankLine)switch(o.getBlankState()){case E.HEAD:case E.BODY:n.setBorderBottom(0);break;case E.TAIL:case E.NONE:n.setBorderBottom(1)}else n.setBorderBottom(1);s?this._renderDataCell(t,i,o,l,n,r):n.renderer2&&(n.renderer2=n.renderer2&&n.renderer2.clearAndDispose())},i.prototype.$_getButtonVisible=function(e,i,o,r){if(r){var n=e.getIndex(i.item.index,i.dataColumn);return r(e.handler,n.proxy(),i.focused,i.mouseEntered)}var s=!0,a=i&&i.item,l=e.getIndex(e.focusedRow,i.dataColumn),h=i.merged?i.head.contains(e.focusedIndex):a.index===e.focusedRow&&i.dataColumn===e.focusedColumn,u=a.index===e.focusedRow,c=i.mouseEntered&&i.item.isDataRow,d=e.focusedItem&&e.focusedItem.isDataRow;switch(o){case t.ButtonVisibility.ALWAYS:s=!i.mouseEntered&&!i.focused||i.item.isDataRow;break;case t.ButtonVisibility.HIDDEN:s=!1;break;case t.ButtonVisibility.VISIBLE:s=h&&d;break;case t.ButtonVisibility.ROWFOCUSED:s=u?d:c;break;case t.ButtonVisibility.DEFAULT:default:s=h?d:c}return!u&&i.merged&&o===t.ButtonVisibility.ROWFOCUSED?i.head.contains(e.focusedIndex)?d:i.head.contains(l)?i.mouseEntered?i.item.isDataRow:d:i.mouseEntered&&i.item.isDataRow:s},i.prototype.$_buttonWidth=function(e,i){var o=0;if(i.button!=t.CellButton.NONE){var r=i.layout.getDataColumn();this.$_getButtonVisible(e,i,r.buttonVisibility,r.buttonVisibleCallback)&&(o=i.buttonWidth||r.buttonWidth||e.body.cellButtonWidth)}return o},i.prototype.$_editButtonWidth=function(t,e){var i=0;if(e.editable&&!e.readonly){var o=e.layout,r=o.getDataColumn(),n=e.editorType,s=t.delegate.getCellEditor(n),a=t.delegate.getEditConfig(n),l=e.editor||r.editor;if("string"==typeof l&&(l={type:l}),l=Rt.assign({},a,l),s.hasButton(t.displayOptions.showNativeEditButton,l)){var h=!1;Ds.equalsTo(t.focusedIndex,e.item.index,o)&&(h=!!s&&s.listing),t.isEditing()&&e.contains(t.focusedIndex)&&t.canMergeEditing(e)&&e.$_editWidth>0&&(h=!0),(h||e.item.isDataRow&&this.$_getButtonVisible(t,e,r.editButtonVisibility,null))&&(i=t.body.editButtonWidth)}a=l=null}return i},i.prototype.$_editButtonCount=function(t,e){var i=e.editorType,o=t.delegate.getCellEditor(i);return o?o.buttonCount:0},i.prototype.$_editButtonVerti=function(t,e){if("number"===e.editorType){var i=e.editor||e.dataColumn.editor||{};return null==i.direction||"horizontal"!==i.direction}},i.prototype.$_errorWidth=function(t,e){return e.error?t.body.errorIconWidth:0},i.prototype.$_setButtons=function(e,i,o,r){var n,s,a=i.cell,l=e.doc,h=e.layoutManager,u=i.dataColumn,c=this.$_buttonWidth(e,i),d=this.$_editButtonWidth(e,i),p=this.$_errorWidth(e,i),f=d&&this.$_editButtonCount(e,i),_=d&&this.$_editButtonVerti(e,i),g=e.canMergeEditing(i),y=u&&(u.buttonVisibility===t.ButtonVisibility.ROWFOCUSED||u.editButtonVisibility===t.ButtonVisibility.ROWFOCUSED),m=0,b=0,v=void 0;if(c>0&&b++,d>0&&(b+=f),p>0&&b++,i.merged&&(a=(i=i.head).cell,o=i.cell.firstElementChild),b>0){(v=i.buttons)||((v=i.buttons=l.createElement("div")).className="rg-cell-buttons",v.style.position="absolute",v.style.overflow="hidden",a.appendChild(v));var w=e.body.buttonHeight,C=i.height,x=-100;if((n=v.style).height=w+"px",n.right="0px",i.merged){var I=i.rowIndex,S=h.getTableItemBounds(I),E=I,O=e.getIndex(e.focusedRow,i.dataColumn);if(!g&&(i.contains(e.focusedIndex)||y&&i.contains(O)||r))if(e.focusedRow<e.topIndex)x=-100,i.buttonsOffset=-1;else if(e.focusedRow>e.topIndex+h.itemCount)x=1e4,i.buttonsOffset=-1;else{E=I+(e.focusedRow-i.item.index);var R=h.getTableItemBounds(E);x=R.y-S.y,x=Math.floor(x+(R.height-w)/2),i.buttonsOffset=E-I}else x=Rt.getSize(i.cell).height,x=Math.floor((x-w)/2),i.buttonsOffset=g?0:-1}else x=Math.floor((C-w)/2),i.buttonsOffset=0;n.top=Math.floor(x)+"px",m=v.childElementCount}else i.buttons&&(i.clearButtons(),o.style.maxWidth="");for(var P=m;P<b;P++){var k=l.createElement("span");(s=k.style).position="absolute",s.display="inline-block",s.height="100%",s.top="0px",v.appendChild(k)}for(P=m;P>b;P--)v.removeChild(v.lastElementChild);var T=b>0?v.children:null;if(b=0,c>0){if(i.cellButton=T[b++],(s=i.cellButton.style).right="0px",s.width=c+"px",i.resetButtonClass(),e.accessibility){a.removeAttribute("aria-haspopup");var D=i.renderer2;D&&i.button==t.CellButton.POPUP&&!D.itemClickable&&a.setAttribute("aria-haspopup","true")}i.$_buttonWidth=c}else i.cellButton=null,i.$_buttonWidth=0;if(d>0){i.editButtons=[];var M=i.editorType,F=e.delegate.getCellEditor(M);for(P=0;P<f;P++){var L=T[b++];F.setButtonStyle(L,P,_,c,d)||((s=L.style).right=c+d*P+"px",s.width=d+"px",i.resetEditClass(L,P)),i.editButtons.push(L)}i.$_editWidth=d*(_?1:f);var N=Ds.equalsTo(e.editController.editIndex,i.item.index,i.layout),$=e.canMergeEditing(i)&&i.contains(e.editController.editIndex);this.$_setButtonZIndex(e,i,e.isEditing()&&(N||$),F)}else i.editButtons=null,i.$_editWidth=0;if(p>0?(i.errorIcon=T[b],(s=i.errorIcon.style).right=c+i.$_editWidth+"px",s.width=p+"px",s.height="100%",i.resetErrorClass(),i.$_errorWidth=p):(i.errorIcon=null,i.$_errorWidth=0),v){var A=i.$_buttonWidth+i.$_editWidth+i.$_errorWidth,V=this.$_getCellWidth2(h,i.tcol,i.colSpan);n.width=A+"px",o.style.maxWidth=V-A+"px"}else o.style.maxWidth=""},i.prototype.$_setButtonZIndex=function(t,e,i,o){var r=e.merged?e.head:e,n=t.displayOptions.baseZindex;function s(t){!i||o&&o.native?t.removeProperty("z-index"):t.zIndex=String(n+1)}r.editButtons&&r.editButtons.forEach((function(t){s(t.style)})),r.cellButton&&s(r.cellButton.style),r.errorIcon&&s(r.errorIcon.style)},i}(Ll),Vl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype.$_getCellWidth2=function(t,e,i){return t.getFixedCellWidth2(e,i)},e}(Al),Bl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype.$_getCellWidth2=function(t,e,i){return t.getRightCellWidth2(e,i)},e}(Al),jl="rowspan",Hl="colspan",Gl=function(){function e(t){this.cell=null,this.layout=null,this.visible=void 0,this.spanned=!1,this.rowSpan=1,this.colSpan=1,this.className="",this.width=0,this.height=0,this.text=void 0,this.cell=t}return e.addEdgeMark=function(e,i,o){if(e!==i.edgeMark){var r=i.cell;if(e){var n=i.edgeMarker;switch(n||(n=i.edgeMarker=o.createElement("div")),e){case t.EdgeMark.LEFT_TOP:n.className="rg-edgemarker-lefttop";break;case t.EdgeMark.LEFT_BOTTOM:n.className="rg-edgemarker-leftbottom";break;case t.EdgeMark.RIGHT_TOP:n.className="rg-edgemarker-righttop";break;case t.EdgeMark.RIGHT_BOTTOM:n.className="rg-edgemarker-rightbottom";break;default:n.className=e}r.appendChild(n)}else i.edgeMarker&&r.removeChild(i.edgeMarker);i.edgeMark=e}},e.prototype.dispose=function(){this.cell=null},e.prototype.setColSpan=function(t){return this.colSpan!=t&&(this.colSpan=t,t>1?this.cell.colSpan=t:this.cell.removeAttribute(Hl)),this},e.prototype.setRowSpan=function(t){return this.rowSpan!=t&&(this.rowSpan=t,t>1?this.cell.rowSpan=t:this.cell.removeAttribute(jl)),this},e.prototype.setVisible=function(t){return t!==this.visible&&(this.visible=t,this.cell.style.display=t?"":"none"),this},e.prototype.set=function(t,e,i){return this.setColSpan(t).setRowSpan(e).setVisible(i)},e.prototype.clear=function(t){return this.set(1,1,t)},e.prototype.isClickableElt=function(t){return!1},e}(),Wl=function(e){function i(i){var o=e.call(this,i)||this;return o.cellButton=null,o.editButtons=null,o.errorIcon=null,o.buttons=null,o.changedMarker=null,o.expander=null,o.item=null,o.grouped=!1,o.rowIndex=-1,o.rows=0,o.trow=-1,o.tcol=-1,o.head=null,o.merged=!1,o.spanHead=null,o.heighted=!1,o.buttonsOffset=0,o.template=void 0,o.marginRight=-1,o.style=new ns,o.rendererChanged=!1,o.valueChanged=!1,o.mouseEntered=!1,o.focused=!1,o.borderBottom=1,o.readonly=void 0,o.editable=void 0,o.error=void 0,o.errorLevel=t.ValidationLevel.IGNORE,o.$_errorWidth=0,o.button=t.CellButton.NONE,o.$_buttonWidth=0,o.buttonWidth=0,o.$_editWidth=0,o.edgeMarker=null,o.text=i[Rt.TextProp],o}return o(i,e),i.prototype.dispose=function(){e.prototype.dispose.call(this),this.renderer2=this.renderer2&&this.renderer2.clearAndDispose(),this.item=null,this.editButtons&&this.editButtons.forEach((function(t){Rt.detach(t)})),this.buttons=this.cellButton=this.editButtons=this.errorIcon=null,this.changedMarker=this.expander=null,this.layout=null},Object.defineProperty(i.prototype,"dataColumn",{get:function(){return this.layout.getDataColumn()},enumerable:!1,configurable:!0}),i.prototype.reset=function(t){return this.renderer2=this.renderer2&&this.renderer2.clearAndDispose(),this.editButtons&&this.editButtons.forEach((function(t){Rt.detach(t)})),this.buttons=this.cellButton=this.editButtons=this.errorIcon=null,this.changedMarker=this.expander=null,this.cell=t,this},i.prototype.span=function(t){this.spanned=!0,this.spanHead=t,this.clear(!1)},i.prototype.refreshFormatters=function(t){var e;this.textFormatter=null,this.numberFormatter=null,this.datetimeWriter=null,this.booleanFormatter=null,(e=t.textFormat)&&(this.textFormatter=Vn.getFormatter(e)),(e=t.numberFormat)&&(this.numberFormatter=qe.getFormatter(e)),(e=t.datetimeFormat)&&(this.datetimeWriter=Ge.getFormatter(e)),(e=t.booleanFormat)&&(this.booleanFormatter=We.getFormatter(e)),this.prefix=t.prefix,this.suffix=t.suffix,this.text=t.text},i.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},i.prototype.setEditor=function(t,e){this.editor=t,this.editorType=Ma.getEditorType2(t,e)},i.prototype.setBorderBottom=function(t){t!=this.borderBottom&&(this.borderBottom=t,this.cell.style.borderBottom=0==t?"0":"")},i.prototype.setMarginRight=function(t,e){e!=this.marginRight&&(this.marginRight=e,t.style.marginRight=e<=0?"":e+"px")},i.prototype.isCellButton=function(t){return t===this.cellButton},i.prototype.isEditButton=function(t){return this.editButtons&&this.editButtons.some((function(e){return e===t}))},i.prototype.isButton=function(t){return t===this.cellButton||this.isEditButton(t)},i.prototype.resetButtonClass=function(){var e=this.button==t.CellButton.POPUP?"rg-button-popup":"rg-button-action";this.cellButton.className=e},i.prototype.resetEditClass=function(t,e){var i;switch(this.editorType){case"date":case"btdate":case"ndate":i="rg-button-calendar";break;default:i="rg-button-list"}t.className=i},i.prototype.resetErrorClass=function(){var e;switch(this.errorLevel){case t.ValidationLevel.ERROR:e="rg-validation-error";break;case t.ValidationLevel.WARNING:e="rg-validation-warning";break;case t.ValidationLevel.INFO:e="rg-validation-info";break;default:e=""}this.errorIcon.className=e},i.prototype.clearExpander=function(){this.expander&&(this.cell.removeChild(this.expander),this.expander=null)},i.prototype.clearButtons=function(){this.buttons&&(this.cell.removeChild(this.buttons),this.buttons=null,this.$_errorWidth=this.$_buttonWidth=this.$_editWidth=0)},i.prototype.getEditIndex=function(t){var e=this.item.index;return this.merged&&(e+=this.buttonsOffset),t.set(e,this.layout.firstColumn)},i.prototype.contains=function(t){if(t.layout===this.layout){var e=t.itemIndex,i=this.item.index,o=i+this.rowSpan/this.layout._dspan;return i<=e&&e<o}return!1},i.prototype.toString=function(){return"Body Cell("+this.layout.col+", "+this.item.index+", "+this.layout.row+")"},i}(Gl),Ul=function(e){function i(t,i){var o=e.call(this,t,i,"bodyView")||this;return o._itemViews=[],o._cells=[],o._spanned=!1,o._ghostStyle={},o}return o(i,e),i.prototype._doDispose=function(){for(var t=0;t<this._cells.length;t++)for(var i=this._cells[t],o=0;o<i.length;o++)i[o].dispose(),i[o]=null;this._cells=this._ghostStyle=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"fixed",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightFixed",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstCell",{get:function(){return this._cells[0][0]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastCell",{get:function(){return this._cells[this.tableRowCount-1][0]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"spanned",{get:function(){return this._spanned},enumerable:!1,configurable:!0}),i.prototype.bodyCellByCell=function(t){for(var e=t.parentElement[y],i=0;i<this._cells.length;i++){var o=this._cells[i],r=o[0].item;if(r&&r.index==e)for(var n=0;n<o.length;n++){var s=o[n];if(s&&s.cell===t)return s}}},i.prototype.bodyCellAt=function(t){for(var e=0;e<this._cells.length;e++){var i=this._cells[e],o=i[0].item;if(o&&o.index==t.itemIndex)for(var r=0;r<i.length;r++){var n=i[r];if(n&&n.layout===t.layout)return n}}},i.prototype.layoutByCell=function(t){var e=this.bodyCellByCell(t);return e&&e.layout},i.prototype.columnByCell=function(t){var e=this.bodyCellByCell(t);return e&&e.layout&&e.layout._columnObj},i.prototype.cellByLayout=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);for(var o=e;o<this._cells.length;o++)for(var r=this._cells[o],n=i;n<r.length;n++){var s=r[n];if(s&&s.layout===t)return s}},i.prototype.getCellRectAt=function(t,e,i){var o=this.getCellAt(t,e);return o&&this.getCellRect(t,o,i)},i.prototype.getCellRect=function(t,e,i){i&&e.merged&&(e=e.head);var o=e.layout,r=e.trow,n=e.rowSpan,s=i||n>1&&n==o.getDataSpan()?n:e.item.isData?o._dspan:1,a=t.getTableRowBounds(r,s),l=e.tcol,h=e.colSpan;return this.fixed?(a.x=t.getFixedCellPoint(l),a.width=t.getFixedCellWidth2(l,h)):this.rightFixed?(a.x=t.getRightCellPoint(l),a.width=t.getRightCellWidth2(l,h)):(a.x=t.getCellPoint(l),a.width=t.getCellWidth2(l,h)),a},i.prototype.getRowView=function(t){for(var e=0,i=this.childCount;e<i;e++){var o=this.getChild(e);if(o._item===t)return o}},i.prototype.getRowIndex=function(t){return this._cells[t][0].item.index},i.prototype.getViewIndex=function(t){return this._cells[t][0].rowIndex},i.prototype.cleanRows=function(t,e){this.$_cleanRowViews(t),this.$_cutTailBodyCells(e),this.$_cleanTableRows(e)},i.prototype.getLowerOf=function(t){for(var e=this._cells,i=t.trow,o=t.tcol,r=i+1;r<e.length;r++){var n=e[r][o];if(!n.spanned)return n;if(n.spanHead.trow===n.trow)return n.spanHead}},i.prototype.isBottomCell=function(t){for(var e=this._cells,i=t.rowIndex,o=t.trow,r=t.tcol,n=o+1;n<e.length;n++){var s=e[n][r];if(s.rowIndex!=i)break;if(!s.spanned||s.spanHead.trow===s.trow)return!1}return!0},i.prototype.getUpperOf=function(t){for(var e=this._cells,i=t.trow,o=t.tcol,r=i-1;r>=0;r--){var n=e[r][o];if(!n.spanned)return n;if(n.spanHead.trow===n.trow)return n.spanHead}},i.prototype.isTopCell=function(t){for(var e=this._cells,i=t.rowIndex,o=t.trow,r=t.tcol,n=o-1;n>=0;n--){var s=e[n][r];if(s.rowIndex!=i)break;if(!s.spanned||s.rowIndex===t.rowIndex&&s.trow!==t.trow&&s.layout.source)return!1}return!0},i.prototype.getNextVisibleCell=function(t){for(var e=this.bodyCellAt(t);e&&e.spanned;){if(!t.next())return!1;e=this.bodyCellAt(t)}return null!=e},i.prototype.getPrevVisibleCell=function(t){for(var e=this.bodyCellAt(t);e&&e.spanned;){if(!t.prev())return!1;e=this.bodyCellAt(t)}return null!=e},i.prototype.tdClone=function(t){var e=this.grid,i=t&&e.isValid(t)&&this.getCellAt(e.layoutManager,t);if(i){var o=(i=i.merged?i.head:i).cell,r=o.parentElement;if(r){var n=o.cloneNode(!1);n.appendChild(o.firstElementChild.cloneNode(!1)),n.style.display="none",i.rendererChanged=!0,r.insertBefore(n,o.nextElementSibling),i.reset(n),n.setAttribute("tabindex","0");var s=[];if(r=this._table,Rt.isIE)for(;r&&r!==e.container._containerDom;)s.push({top:r.scrollTop,left:r.scrollLeft}),r=r.parentElement;if(n.style.display="",n.focus({preventScroll:!0}),Rt.detach(o),r=this._table,Rt.isIE)for(;r&&r!==e.container._containerDom;){var a=s.shift();a&&a.top!==r.scrollTop&&(r.scrollTop=a.top),a&&a.left!==r.scrollLeft&&(r.scrollLeft=a.left),r=r.parentElement}}else o.focus()}},i.prototype.refreshTdFocused=function(t,e){var i=this.grid,o=t&&i.isValid(t)&&this.getCellAt(i.layoutManager,t);if(o){o=o.merged?o.head:o;var r=this._tbody,n=Array.prototype.slice.call(r.querySelectorAll("td"));e?s.call(this,o):setTimeout(function(){s.call(this,o)}.bind(this),15)}function s(t){var e=t.cell;e&&(n.forEach((function(t){t!==e&&(t.tabIndex=-1)})),e.setAttribute("tabindex","0"),e.focus({preventScroll:!0}))}},i.prototype.cleanRecycle=function(){for(var t=this._tbody,e=0;e<t.rows.length;e++)t.rows[e].recycle=!1},i.prototype.reArrangeRows=function(t,e){for(var i=this.grid,o=this._tbody,r=this._cells,n=i.itemSource,s=0,l=t.topIndex+t.fixedItemCount,h=0;h<o.rows.length;h++)o.rows[h].recycle=!0;var u=0===t.fixedTableRowCount?0:t.fixedTableRowCount+1;if(e<0){for(;e++<0;){s+=n.getItem(l+e+t.itemCount-1).isData?this._trs:1}for(;s-- >0;)o.rows[o.rows.length-1].recycle=!1,o.insertBefore(o.rows[o.rows.length-1],o.rows[u]),r.splice.apply(r,a([u,0],r.splice(-1),!1))}else{for(;e-- >0;){s+=n.getItem(l+e).isData?this._trs:1}for(;s-- >0;){var c=o.removeChild(o.rows[u]);c.recycle=!1,o.appendChild(c),r.push.apply(r,r.splice(u,1))}}},i.prototype._doAttached=function(t){},i.prototype._getCssSelector=function(){return"rg-body"},i.prototype._getTableHidden=function(){return!1},i.prototype._getTableCaption=function(){var t=this.grid;return t&&t.accessibility&&t.WaiOptions&&t.WaiOptions.getDescription()||""},i.prototype._isFixedHeight=function(t){return!t.isAutoRowHeights()},i.prototype._getTrs=function(t){return t.trs},i.prototype._getTableRowCount=function(t){var i=t.fixedItemCount,o=this.grid,r=this._trs;if(t.syncHeight()){for(var n=0,s=0,a=this.grid.itemCount;s<a;s++)n+=o.getItem(s).isData?r:1;return n+(i?1:0)}if(t.isAutoRowHeights())return(a=Math.max(0,Math.ceil(t._itemsBounds/t.grid.displayOptions.minTableRowHeight)+this._trs-1))+(t.grid.displayOptions.refCalcHeights?5:0);if(t.isRowGrouped()){for(var l=i+t.itemCount,h=(n=0,0);h<l;h++)n+=t.getItem(h).isData?r:1;return n+=i?1:0}return e.prototype._getTableRowCount.call(this,t)},i.prototype.$_getTableIndex=function(t,e){var i=t.fixedItemCount;if(e>=i&&t.isRowGrouped()){var o=this._trs,r=i*o;i>0&&r++;for(var n=i;n<e;n++)t.getItem(n).isData?r+=o:r++;return r}r=e*this._trs;return i>0&&e>=i?r+1:r},i.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},i.prototype._doPrepareTableHead=function(t,i){e.prototype._doPrepareTableHead.call(this,t,i);var o=this.grid;if(o._columnsDirty||o._needPosition||o._cellLayoutDirty||t.syncHeight()){this._table.caption.innerHTML=this._getTableCaption();for(var r=this._getFirstCell(t),n=this._getLastCell(t)-r+1,s=t.cellLayouts._dataCells,a=0;a<1;a++)for(var l=s[a],h=i.children[a],u=0;u<n;u++){var c=l[u+r];c=c.isProxy?c.source:c;var d=h.children[u];c&&d&&(d[Rt.TextProp]=c.header.getDisplayText()||c.firstColumn.header.displayText)}}},i.prototype._doMeasure=function(t,e,i){return this._spanned=!1,new wl},i.prototype.$_refreshRowCells=function(t,e,i,o,r,n,s){for(var a=this._cells,l=s.children,h=this._getFirstCell(t),u=this._getLastCell(t)-h+1,c=a.length,d=o+n;c<d;c++)a.push([]);for(var p=0;p<n;p++){var f=a[o],_=l[o];this.grid.accessibility&&(e?_.removeAttribute("aria-hidden"):_.setAttribute("aria-hidden","true")),this._ghostStyle&&Rt.setStyle(this._ghostStyle,_);for(var g=_.children,y=r[p],m=0;m<u;m++){var b=g[m],v=y[m+h],w=f[m];w?w.cell!==b?w.reset(b):w.layout!==v&&(w.rendererChanged=!0,w.layout=v,w.clear(!0)):(w=f[m]=new Wl(b)).layout=v,w.spanned=!1,w.item=e,w.rowIndex=i,w.trow=o,w.tcol=m}o++;for(m=u;m<f.length;m++)Rt.isDebugging()&&f[m],f[m].dispose();f.length=u}},i.prototype.layoutRow=function(t,e,i,o,r,n){function s(t,e){var i=this._ghostStyle=this._ghostStyle||{};for(var o in t)i[o]=void 0;Rt.setStyle(t,e)}void 0===n&&(n=!1);var a,l=t.lm,h=t.fixedItemCount,u=this.model,c=l.cellLayouts._dataCells,d=this._tbody.rows,p=r.isData?this._trs:1;this.$_refreshRowCells(l,r,i,o,c,p,this._tbody),this.childCount<=i?(a=this.$_borrowView(r),this.addChild(a)):a=this.getChild(i),this.$_setRowCellsDisplay(l,t,e,this._cells,r,i,o,p);var f=r.index,_=d[o];if(_.style.display="",_[y]=f,_[m]=o,a.updateItem(r,o,p,this._isFixedHeight(l)),r.isDataRow||r instanceof Hr){var g=l.getItemBounds(i);g.width=this.width,a.setRect(g);var b=u.getRowStyle(r,f<h),v=b.styleName;if(r.isDataRow){r.setEditable(b.editable,b.readOnly);for(var w=1;w<this._trs;w++){(C=d[o+w])[m]=o+w,C[y]=f,Rt.setClassName(C,v),b.style&&s.call(this,b.style,C)}}a.layoutContent(l,n),Rt.setClassName(_,v),b.style&&s.call(this,b.style,_)}else if(r.isData){for(w=1;w<this._trs;w++){var C;(C=d[o+w])[m]=o+w,C[y]=f}this.grid.isRecycleMode()&&d[o].recycle||a.clearContent(l,this._trs),r instanceof jr&&a.layoutContent(l)}else a.clearContent(l,1)},i.prototype.layoutFixedBar=function(t,e){var i=t.cellLayouts._dataCells,o=this._tbody,r=o.rows[e],n=this.$_prepareFixedBar(t,r),s=t.grid.hoveredCell;s&&s.trow==e&&s.rowIndex==t.fixedItemCount&&t.grid.$_setHoveredCell(null,-1),r[m]=e,r[y]=-99,r.style.display=n>0?"":"none",Rt.setClassName(r,bl.ROW_BAR_STYLE),this.$_refreshRowCells(t,null,-1,e,i,1,o),this.$_setFixedBarCellsDisplay(t,this._cells,e);for(var a=0,l=this._cells[e];a<l.length;a++){var h=l[a];h.renderer2&&h.renderer2.clearContent(),h.className="",h.clearExpander(),h.clearButtons()}return n},i.prototype._doRender=function(t){},i.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},i.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},i.prototype._getTableRowHeight=function(t,e){return t.getTableRowHeight(e,1)},i.prototype._doDrawCell=function(t,e,i){},i.prototype.getCellAt=function(t,e){var i=e.layout,o=t.fixedItemCount,r=t.topIndex,n=e.itemIndex;if((o>0&&n<o||n>=r&&n-r>=o&&n-r<o+t.itemCount)&&(n>=o&&(n-=r),(n=this.$_getTableIndex(t,n))<this._cells.length))for(var s=0;s<this._trs;s++){var a=this._cells[n+s];if(a)for(var l=0;l<a.length;l++){var h=a[l];if(h&&h.layout===i)return h}}return null},i.prototype.getCellView=function(t,e){var i=this.getCellAt(t,e);return i&&i.cell},i.prototype.spanRight=function(t,e){if(e){var i=this.getCellAt(t,e);i&&(i.spanned&&(i=i.spanHead),i&&(e.layout=this._cells[i.trow][i.tcol+i.colSpan-1].layout))}},i.prototype.spanHead=function(t,e){if(e){var i=this.getCellAt(t,e);i&&(i.spanned&&(i=i.spanHead),i&&(e.layout=i.layout))}},i.prototype.setRowViewHeight=function(t,e){var i=this.getRowView(t);i.height=t.height,i.y=e},i.prototype._doSizeChanged=function(){this.applyBounds()},i.prototype._getStartCell=function(t){return t.getStartCell(!1)},i.prototype._getEndCell=function(t){return t.getEndCell(!1)},i.prototype.$_removeView=function(t){var e=this.removeChildAt(t);e.validate(),this._itemViews.push(e)},i.prototype.$_borrowView=function(t){var e=this._itemViews.pop();return e||(e=this.createRowElement()),e},i.prototype.createRowElement=function(){return new Al(this.doc)},i.prototype.$_setFixedBarCellsDisplay=function(t,e,i){for(var o=this._getFirstCell(t),r=this._getFirstCell(t)-o,n=this._getLastCell(t)-o,s=e[i],a=bl.ROW_BAR_CELL_STYLE,l=r;l<=n;l++){var h=s[l];h.clear(!0),Rt.setClassName(h.cell,a)}},i.prototype.$_setRowCellsDisplay=function(t,e,i,o,r,n,s,a){var l=this._getFirstCell(t),h=this._getFirstCell(t)-l,u=this._getLastCell(t)-l,c=e.grid,d=e.fixedItemCount,p=i,f=r.isData,_=r.level;if(f||e.mergedRowGrouped)for(var g=0;g<a;g++)for(var y=(U=o[s+g]).length,m=h;m<=u;m++){var b=(Y=U[m]).layout,v=b.getDataColumn(),w=b.parent,C=w&&w.vertical;if(Y.merged=!1,Y.head=null,Y.grouped=!1,Y.spanned);else if(b.isProxy){for(var x=void 0,I=s;I<s+a;I++){var S=o[I];if(!S)break;for(var E=0;E<S.length;E++)if(S[E].layout===b.source){x=S[E];break}if(x)break}x?Y.span(x):Y.clear(!1)}else if(!f&&m+l>=_)Y.grouped=!0,Y.clear(!0);else{var O=!0,R=void 0,P=1;v&&v.mergeGrouped&&v.groupLevel<=r.parent.level||r.isDataRow&&(void 0===(P=(R=b.spanCallback)?R(c.handler,b,Y.item.index):void 0)&&(P=b.dataSpan),void 0===P&&(O=!1,P=b.cellSpan));var k=0;if(P>1){var T=0,D=b.vindex+1;if(C)for(P--;T++<P&&T<a;){if(!(B=w.getVisible(D++)))break;k+=B._dspan,this._cells[s+g+T][m].span(Y),this._spanned=!0}else{for(var M=b._dspan,F=[],L=0;L<M;L++)F.push(0);for(var N=0;N<M;N++){F[N]+=b._defColSpan;for(var $=1;$<P&&m-h+$<y;$++){var A=this._cells[s+g+N][m+$].layout;A&&!A.isProxy&&(F[N]+=A._defColSpan)}}var V=Math.max.apply(Math,F);for(O=O&&V===P;T++<P-1&&m-h+T<y&&(O||D<w.visibleCount);){var B;if(!(B=O?U[m+T].layout:w.getVisible(D++)))break;!B.isProxy&&(k+=B._defColSpan)}for(b._defColSpan+k!==P&&(k=0),T=1;T<b._defColSpan+k;T++){if(M>1&&O)for($=1;$<a&&M>$;$++)this._cells[s+g+$][m+T].span(Y);U[m+T].span(Y)}}}var j=b._defColSpan,H=b._dspan,G=b.merged&&b.merges;if(G&&r instanceof jr&&m>=r.parent.level&&(G=null),G)if(Y.merged=G.isMerged(n,d),G.isHidden(n,d))Y.set(j+k,H,!1),Y.head=p[m-h];else{var W=void 0;W=r.isDataRow?(Y.rows=G.getMerged(n,d))*H:G.getMerged2(c,r.index,n-d,H),Y.set(j+k,W,!0),p[m-h]=Y.head=Y}else C?Y.set(j,H+k,!0):Y.set(j+k,H,!0)}}else{var U=o[s];for(m=h;m<=u;m++){var Y;(Y=U[m]).clear(!1),Y.merged=!1,Y.grouped=!0}}},i.prototype.$_refreshSpans=function(t,e,i){},i.prototype.$_cleanRowViews=function(t){for(;this.childCount>t;)this.$_removeView(this.childCount-1)},i.prototype.$_cutTailBodyCells=function(t){for(var e=this._cells,i=t;i<e.length;i++)for(var o=e[i],r=0;r<o.length;r++)o[r].dispose(),o[r]=null;e.length=t},i.prototype.$_cleanTableRows=function(t){var e=this._tbody.rows;if(this.grid.isRecycleMode())for(var i=e.length-1;i>=t;i--){var o=e[i];Rt.detach(o)}else{for(i=e.length-1;i>=this._cells.length;i--)for(var r=e[i].cells,n=r.length;n--;){for(var s=r[n];s.childElementCount>1;)s.removeChild(s.lastElementChild);s.removeAttribute(jl),s.removeAttribute(Hl)}for(i=e.length-1;i>=t;i--){(o=e[i]).childElementCount>0?(o[m]=-1,o.style.display="none"):Rt.detach(o)}}},i.prototype.$_resetHeights=function(t,e){var i=this._tbody.children,o=0;if(t.length>0){for(var r=1;r<t.length;r++)i[o++].style.height=t[r]-t[r-1]+"px";o++}for(r=1;r<e.length;r++)i[o++].style.height=e[r]-e[r-1]+"px"},i.prototype.$_resetCellStyleHeights=function(t,e){var i=this._tbody.children,o=0;if(t.length>0){for(var r=1;r<t.length;r++)for(var n=t[r]-t[r-1],s=i[o++].cells,a=0;a<s.length;a++)s[a].style.height=n+"px";o++}for(r=1;r<e.length;r++)for(n=e[r]-e[r-1],s=i[o++].cells,a=0;a<s.length;a++)s[a].style.height=n+"px"},i.prototype.$_resetCellHeights2=function(t,e){for(var i=t.grid.body.buttonHeight,o=0,r=this._cells.length;o<r;o++)for(var n=this._cells[o],s=0,a=n.length;s<a;s++){var l=n[s],h=l.height,u=t.getTableRowHeightFixed(l.trow,l.rowSpan);if(h!=u&&(l.height=u,(l.$_buttonWidth>0||l.$_editWidth>0)&&l.buttons&&(l.buttons.style.top=Math.floor((u-i)/2)+"px")),e&&!l.heighted){var c=Math.max(0,l.height-2);l.cell.firstElementChild.style.maxHeight=c+"px",Rt.ieTen&&(l.cell.firstElementChild.style.height=c+"px")}}},i.prototype.$_focusChanged=function(t,e,i){this.$_cellStateChanged(t,e,"focused",i)},i.prototype.$_mouseEnteredChanged=function(t,e,i){this.$_cellStateChanged(t,e,"mouseEntered",i)},i.prototype.$_cellStateChanged=function(e,i,o,r){var n=e.canMergeEditing(i);if(i&&i.item,i&&r!=i[o]){var s=this.getRowView(i.item);if(s instanceof Ll){var a=this.model,l=i.dataColumn;if(i[o]=r,l&&e.getCellType(i.cell)===t.GridCellType.DATA){var h=a.getCellAt(i.item,l);if(s.$_setButtons(e,i,i.cell.firstElementChild),i.merged&&i.head){var u=i.head,c=e.layoutManager,d=this.getCellRect(c,i,!1),p=this.getCellRect(c,i,!0),f=u.renderer2;if(i.focused){var _=d.top-p.top+d.height/2-p.height/2;f.moveClickElement(_,n)}else i.mouseEntered||u.contains(e.focusedIndex)||f.moveClickElement(0,n)}s instanceof Al&&i.renderer2&&"focused"===o&&i.renderer2.refreshFocusChanged&&s.cellRefresh(e,a,h,l,i)}}}},i.prototype.$_buttonZIndexChanged=function(t,e,i,o){var r=e&&e.item;if(r&&r.isDataRow){var n=this.getRowView(r);if(n instanceof Ll)e.dataColumn&&n.$_setButtonZIndex(t,e,i,o)}},i.prototype.$_rendererChanged=function(t){for(var e=this._cells,i=0;i<e.length;i++)for(var o=e[i],r=0;r<o.length;r++)o[r].layout===t&&(o[r].rendererChanged=!0)},i}(Pl),Yl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"fixed",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype._getCssSelector=function(){return"rg-fixed-body"},e.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype._getCellCount=function(t){return t.fixedCellCount},e.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},e.prototype.createRowElement=function(){return new Vl(this.doc)},e}(Ul),zl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"rightFixed",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype._getCssSelector=function(){return"rg-fixed-body"},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype.createRowElement=function(){return new Bl(this.doc)},e.prototype._getCellCount=function(t){return t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},e}(Ul),ql=function(t){function e(e){var i=t.call(this,e)||this;return i.check=null,i.checkSpan=null,i.sort=null,i.filter=null,i.popup=null,i.textSpan=null,i.expander=null,i.rendererClass="",i.html=void 0,i.tooltip="",i.checkWidth=0,i.marginLeft=0,i.marginRight=0,i.marginTop=0,i.marginBottom=0,i.edgeMarker=null,i.textSpan=e.firstElementChild.firstElementChild,i}return o(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.textSpan=this.cell=this.check=this.sort=this.filter=this.expander=this.checkSpan=null,this.layout=null,this.renderCallback=null},e.prototype.span=function(){this.spanned=!0,this.clear(!1)},e.prototype.clear=function(e){t.prototype.clear.call(this,e);var i=this.cell.firstElementChild,o=this.textSpan,r=i.style;return this.check=this.check&&Rt.detach(this.check),this.checkSpan=this.checkSpan&&Rt.detach(this.checkSpan),this.filter=this.filter&&Rt.detach(this.filter),this.sort=this.sort&&Rt.detach(this.sort),this.popup=this.popup&&Rt.detach(this.popup),this.expander=this.expander&&Rt.detach(this.expander),this.checkWidth=0,this.className&&(this.cell.className=this.className=""),this.rendererClass&&(i.className=this.rendererClass=""),0!=this.marginLeft&&(r.marginLeft="",this.marginLeft=0),0!=this.marginRight&&(r.marginRight="",this.marginRight=0),0!=this.marginTop&&(r.marginTop="",this.marginTop=0),0!=this.marginBottom&&(r.marginBottom="",this.marginBottom=0),this.text&&(o[Rt.TextProp]=this.text=""),this.html&&(o.innerHTML=this.html="",this.renderCallback=null),this},e.prototype.setText=function(t,e){e!=this.text&&(t[Rt.TextProp]=this.text=e,this.html="",this.renderCallback=null)},e.prototype.setHtml=function(t,e,i){if(e!=this.html)return t.innerHTML=this.html=e,this.text="",this.renderCallback=i&&dn(t,i),!0},e.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},e.prototype.setRendererClassName=function(t,e){e!=this.rendererClass&&(t.className=this.rendererClass=e)},e.prototype.setDivMarigns=function(t,e,i,o,r){e!=this.marginLeft&&(t.marginLeft=e?e+"px":"",this.marginLeft=e),i!=this.marginRight&&(t.marginRight=i?i+"px":"",this.marginRight=i),o!=this.marginTop&&(t.marginTop=o?o+"px":"",this.marginTop=o),r!=this.marginBottom&&(t.marginBottom=r?r+"px":"",this.marginBottom=r)},e.prototype.getIndex=function(t){return t.set(-1,this.layout.firstColumn)},e.prototype.isClickableElt=function(t){return t===this.filter||t===this.popup||t===this.check||t===this.expander||t===this.checkSpan},e}(Gl),Kl=function(e){function i(t,i){var o=e.call(this,t,i,"headerView")||this;return o._fixedHeight=!0,o._rowPoints=[],o._cells=[],o._pointerEnterHandler=o.$_pointerEnter.bind(o),o._pointerLeaveHandler=o.$_pointerLeave.bind(o),o}return o(i,e),i.renderCell=function(t,e){e[Rt.TextProp]=t.text||""},i.prototype._doDispose=function(){for(var t=0;t<this._cells.length;t++)for(var i=this._cells[t],o=0;o<i.length;o++)i[o].cell.removeEventListener("pointerenter",this._pointerEnterHandler),i[o].cell.removeEventListener("pointerleave",this._pointerLeaveHandler),i[o].dispose(),i[o]=null;this._cells=null,e.prototype._doDispose.call(this)},i.prototype.tableCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var r=i[o];if(r&&r.cell===t)return r}},i.prototype.tableCellByLayout=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++)if(i[o].layout===t)return i[o]},i.prototype.tableCellByLayout2=function(t,e){var i=this._cells,o=i.length;if(!(o<1)){for(var r=i[0].length,n=this._getFirstCell(t),s=this._getStartCell(t)-n,a=this._getEndCell(t)-n,l=s;l<=a;l++)for(var h=0;h<o;h++)if(i[h][l].layout===e)return i[h][l];for(l=s-1;l>=0;l--)for(h=0;h<o;h++)if(i[h][l].layout===e)return i[h][l];for(l=a+1;l<r;l++)for(h=0;h<o;h++)if(i[h][l].layout===e)return i[h][l]}},i.prototype.layoutByCell=function(t){var e=this.tableCellByCell(t);return e&&e.layout},i.prototype.columnByCell=function(t){var e=this.layoutByCell(t);return e&&e._columnObj},i.prototype.getSpanRoot=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var r=i[o];if(r.layout===t){if(r.spanned)if(r.layout.parent.vertical){for(var n=e-1;n>=0;n--)if(!this._cells[n][o].spanned)return this._cells[n][o].layout}else for(n=o-1;n>=0;n--)if(!i[n].spanned)return i[n].layout;return t}}},i.prototype.refresh=function(t){for(var e=t.focusedColumn,i=t.layoutManager,o=this._getFirstCell(i),r=this._getLastCell(i)-o+1,n=0;n<this._cells.length;n++)for(var s=this._cells[n],a=0;a<r;a++){var l=s[a],h=l.layout;if(l.visible){var u=l.cell;h instanceof _s&&(u[b]=h.isColumn(e)),l.setClassName(this.$_getCellSelector(h,u))}}},i.prototype.getRowAt=function(t){for(var e=1;e<this._rowPoints.length-1;e++)if(t<this._rowPoints[e])return e-1;return this._rowPoints.length-2},i.prototype.getLayoutHeight=function(t,e,i){var o,r;return t instanceof vs?(o=t.hrow,r=i?t.hlen:t.hspan):(o=t.hrow,r=i?e.rowSpan:t.hspan),this._rowPoints[o+r]-this._rowPoints[o]},i.prototype.getLayoutPos=function(t){return this._rowPoints[t.hrow]},i.prototype._getCssSelector=function(){return"rg-header"},i.prototype._isFixedHeight=function(){return this._fixedHeight},i.prototype._getMinRowHeight=function(t){return this._minRowHeight},i.prototype._prepareCellContent=function(t,e){var i=St(t),o=i.createElement("div"),r=i.createElement("span");return t.addEventListener("pointerenter",this._pointerEnterHandler,!1),t.addEventListener("pointerleave",this._pointerLeaveHandler,!1),o.appendChild(r),o},i.prototype._cleanCellContent=function(t){t.removeEventListener("pointerenter",this._pointerEnterHandler,!1),t.removeEventListener("pointerleave",this._pointerLeaveHandler,!1)},i.prototype._doMeasure=function(t,e,i){var o=this.model,r=t.layoutManager.headerRows,n=o.height,s=o.heights||[],a=o._fitHeights||[],l=[];if(this._minRowHeight=o.minRowHeight,this._maxRowHeight=o.maxRowHeight,Math.max(0,s.length,a.length)>0){for(var h=0,u=0;u<r;u++){var c=Math.max(a[u]||s[u]||this._minRowHeight,this._minRowHeight);this._maxRowHeight>0&&(c=Math.min(c,this._maxRowHeight)),h+=l[u]=c}n=h}return n=n<=0?Math.max(this._minRowHeight,t.heightMeasurer.headerHeight(this._getCssSelector(),o.styleName||"","rg-header-cell"))*r:Math.max(this._minRowHeight*r,n),this._fixedHeight=n>=0,n=Math.max(this._minRowHeight*r,o.minHeight,n),this._maxRowHeight>0&&(n=Math.min(n,this._maxRowHeight*r)),o.setCalcHeights(l,!1),wl.create(e,n)},i.prototype._doPrepareTableExtents=function(t){e.prototype._doPrepareTableExtents.call(this,t);var i=this.model,o=this._rowPoints,r=this.height,n=i.getCalcHeights(),s=Math.floor(r/t.headerRows);if(o.length=this._getTableRowCount(t)+1,o[0]=0,o.length>0){for(var a=1;a<o.length-1;a++)o[a]=o[a-1]+(n[a-1]||s);o[a]=r}},i.prototype.$_refreshHeadTitle=function(t,e){for(var i=this._cells[0],o=e.children[0],r=0;o&&r<i.length;r++){var n=i[r].layout.source,s=o.children[r];s&&n&&(s[Rt.TextProp]=n.header.getDisplayText()||n.firstColumn.header.displayText)}},i.prototype._doLayoutContent=function(t){var e=t.grid,i=e.focusedColumn,o=this.model,r=t.cellLayouts._headerCells,n=r.length,s=this._getFirstCell(t),a=this._getStartCell(t)-s,l=this._getEndCell(t)-s;this.$_refreshCells(t,r,this._tbody),this.$_refreshSpans(t,n),this.$_refreshHeadTitle(t,this._thead);for(var h=0;h<n;h++)for(var u=this._cells[h],c=a;c<=l;c++){var d=u[c];if(d.visible||c===a){var p=void 0;d.layout.isProxy?(p=d.layout.source,d=this.tableCellByLayout(p)):p=d.layout;var f=d.cell;if(f[b]=p.isColumn(i),d.setClassName(this.$_getCellSelector(p,f)),p.isNull)d.setText(d.textSpan,p.header.getDisplayText());else if(p instanceof vs){var _=o.getCell(p);p.hideChildHeaders&&p.tiedColumn?(_=o.getCell(p.tiedColumn.layout),this._updateCell(e,o,_,d)):this._updateGroupCell(e,o,_,d)}else{_=o.getCell(p);this._updateCell(e,o,_,d)}}}},i.prototype._doRender=function(t){},i.prototype._getTableRowCount=function(t){return t.headerRows},i.prototype._getTableRowHeight=function(t,e){return t.fitHeader()?0:this._rowPoints[e+1]-this._rowPoints[e]},i.prototype.$_getCellHeight=function(t){var e=t.layout.hrow,i=this._rowPoints[e];return this._rowPoints[e+t.rowSpan]-i},i.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},i.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},i.prototype._getCellWidth2=function(t,e,i){return t.getCellWidth2(e,i)},i.prototype._doDrawCell=function(t,e,i){},i.prototype._doPrepareTableRow=function(t,i,o,r){e.prototype._doPrepareTableRow.call(this,t,i,o,r);var n=this.model;Rt.setClassName(r,n.getStyleName())},i.prototype.$_getCellSelector=function(t,e){var i="",o=this.grid,r=function(t){for(var e=0,i=t.items;e<i.length;e++){var n=i[e];if(n instanceof _s&&!o.isSelectedLayout(n))return!1;if(n instanceof vs)return r(n)}return!0};if(t instanceof vs){i="rg-header-group-cell ".concat(t.header.styleName||"").trim();var n=1===t.visibleCount?t.first:t;o.isSelectedLayout(n)&&r(t)&&(i+=" rg-group-header-select")}else{i="rg-header-cell",e[b]?i+=" rg-header-focus":o.isSelectedLayout(t)&&(i+=" rg-header-select");var s=t.firstColumn;i+=" ".concat(s&&s.header.styleName||"")}return i.trim()},i.prototype.$_hoverChanged=function(t,e){var i=this.grid;if(!i.container._updateRequested){var o=i.getTableCell(t.target),r=this.tableCellByCell(o),n=this.model,s=r.layout,a=n.getCell(s);r.hovered=e,s instanceof _s?this._updateCell(this.grid,n,a,r):s instanceof vs&&s.hideChildHeaders&&s.tiedColumn&&(a=n.getCell(s.tiedColumn.layout),this._updateCell(this.grid,n,a,r))}},i.prototype.$_pointerEnter=function(t){this.$_hoverChanged(t,!0)},i.prototype.$_pointerLeave=function(t){this.$_hoverChanged(t,!1)},i.prototype._getStartCell=function(t){return t.getStartCell()},i.prototype._getEndCell=function(t){return t.getEndCell()},i.prototype.$_refreshCells=function(t,e,i){for(var o=this._cells,r=i.children,n=r.length,s=this._getFirstCell(t),a=this._getLastCell(t)-s+1,l=o.length;l<n;l++)o.push([]);for(var h=0;h<n;h++){for(var u=o[h],c=r[h].children,d=e[h],p=0;p<a;p++){var f=c[p],_=d[p+s],g=u[p];g?g.cell!==f||g.layout!=_&&(g.layout=_,g.clear(!0)):(g=u[p]=new ql(c[p])).layout=_,g.height=this.$_getCellHeight(g),g.width=this._getCellWidth(t,p),g.spanned=!1}for(p=a;p<u.length;p++)u[p].dispose();u.length=a}for(h=n;h<o.length;h++){var y=o[h];for(p=0;p<y.length;p++)y[p].dispose(),y[p]=null}o.length=n},i.prototype.$_refreshSpans=function(t,e){for(var i=this._getFirstCell(t),o=this._getFirstCell(t)-i,r=this._getLastCell(t)-i,n=0;n<e;n++)for(var s=this._cells[n],a=s.length,l=o;l<=r;l++){var h=s[l],u=h.layout,c=u.parent,d=c&&c.vertical;if(h.spanned);else if(u.isProxy)h.clear(!1);else{var p=0,f=u.getHeaderSpan()-1;if(f>0){var _=0,g=u.vindex+1;if(d)for(;_++<f&&_<e;){p+=c.getVisible(g++)._hspan,this._cells[n+_][l].span()}else for(;_++<f&&l-o+_<a&&g<c.visibleCount;){p+=c.getVisible(g++)._cspan,s[l+_].span()}}(u instanceof vs||u.isNull)&&(this.grid._columnsDirty||this.grid._cellLayoutDirty)&&h.clear(!0),d?h.set(u._cspan,u._hspan+p,!0):h.set(u._cspan+p,u._hspan,!0),h.width=this._getCellWidth2(t,l,h.colSpan)}}},i.prototype._updateCell=function(e,o,r,n){var s=e.doc,a=e.layoutManager,l=e.sortingOptions,h=e.filteringOptions,u=n.layout.boundColumn,c=r.checkLocation,d=c&&c!=t.ColumnHeaderItemLocation.NONE,p=r.useCheckImage,f=o.checkWidth+2,_=d?o.checkHeight:0,g=u&&this.$_canSortHandleVisible(l,u,n),y=u&&u.sortDirection||t.SortDirection.NONE,m=g?o.sortWidth:0,b=u&&this.$_canFilterHandleVisible(h,u,n)?o.filterWidth:0,v=u&&this.$_canPopupHandleVisible(o,u,n)?o.popupWidth:0,w=n.cell.firstElementChild,C=n.textSpan,x=n.width,I=this.$_getCellHeight(n),S=0,E=0,O=0,R=0,P=w.style;n.setRendererClassName(w,i.RENDERER_STYLE),a.fitHeader()?P.removeProperty("max-height"):P.setProperty("max-height",Math.max(I-2,0)+"px");var k,T=n.check,D=n.checkSpan;if(n.checkWidth=0,d){var M=C.style;T||(T=s.createElement("input"),n.check=T,T.type="checkbox",T.tabIndex=-1,T.className="rg-header-check",(P=T.style).position="absolute",P.display="inline-block",P.verticalAlign="middle",D=s.createElement("span"),n.checkSpan=D,(P=D.style).position="absolute",P.display="inline-block",P.verticalAlign="middle"),P=(k=p?D:T).style,k.style.setProperty("display","inline-block"),Rt.addChild(w,T),Rt.addChild(w,D),Rt.setInert(T,!e.accessibility),p?T.style.setProperty("display","none"):D.style.setProperty("display","none"),T.checked=u.checked,T.indeterminate=u.indeterminate,T.title=r.text+" "+u.checked?"checked":"unchecked",D.className="".concat(i.CHECK_IMAGE_STYLE," ").concat(u.indeterminate?"indeterminate":u.checked?"checked":"unchecked");var F=-1,L=-1;switch(M.removeProperty("display"),P.removeProperty("left"),P.removeProperty("top"),c){case t.ColumnHeaderItemLocation.CENTER:M.display="none",P.position="relative";break;case t.ColumnHeaderItemLocation.LEFT:case t.ColumnHeaderItemLocation.LEFT_EDGE:Rt.insertBefore(w,k,n.textSpan),c===t.ColumnHeaderItemLocation.LEFT?(P.position="relative",n.checkWidth=f):(P.position="absolute",S+=f,F=0,L=Math.floor((I-o.checkHeight)/2));break;case t.ColumnHeaderItemLocation.RIGHT:case t.ColumnHeaderItemLocation.RIGHT_EDGE:Rt.insertBefore(w,n.textSpan,k),c===t.ColumnHeaderItemLocation.RIGHT?(P.position="relative",n.checkWidth=f):(P.position="absolute",E+=f,F=x-f,L=Math.floor((I-o.checkHeight)/2));break;case"top":case"topEdge":Rt.insertBefore(w,k,n.textSpan),c===t.ColumnHeaderItemLocation.TOP?(M.display="block",P.position="relative"):(P.position="absolute",O+=_,F=Math.floor((x-m-b-o.checkWidth)/2),L=0);break;case"bottom":case"bottomEdge":Rt.insertBefore(w,n.textSpan,k),c===t.ColumnHeaderItemLocation.BOTTOM?(M.display="block",P.position="relative"):(P.position="absolute",R+=_,F=Math.floor((x-m-b-o.checkWidth)/2),L=I-o.checkHeight)}F>-1&&(P.left=F+"px"),L>-1&&(P.top=L+"px")}else C&&C.style.removeProperty("display"),T&&(Rt.detach(T),Rt.detach(D));var N=n.filter;b>0?(N?P=N.style:(N=s.createElement("span"),n.filter=N,(P=N.style).position="absolute",P.display="inline-block"),Rt.addChild(w,N),N.className="rg-header-filtering"+(u.isFiltered()?" filter-activated":""),E+=b,P.left=x-E+"px",P.top=Math.floor((I-o.filterHeight)/2)+"px",P.width=b+"px",P.height=o.filterWidth+"px"):Rt.detach(N);var $=n.sort;if(g){switch($?P=$.style:($=s.createElement("span"),n.sort=$,(P=$.style).position="absolute",P.display="inline-block"),Rt.addChild(w,$),y){case t.SortDirection.DESCENDING:$.className="rg-header-sort-descending";break;case t.SortDirection.ASCENDING:$.className="rg-header-sort-ascending";break;default:$.className="rg-header-sort-none"}E+=m,P.left=x-E+"px",P.width=m+"px",l.showSortOrder&&u.sortOrder>=0?($[Rt.TextProp]=(u.sortOrder+1).toString(),P.top=Math.max(0,Math.floor((I-o.sortHeight-10)/2))+"px",P.height=Math.min(n.height,o.sortHeight+10)+"px",P.backgroundPositionY=Rt.isIE?"5px":"70%",P.lineHeight=Rt.isIE?"1.5em":"1em"):($[Rt.TextProp]="",P.backgroundPositionY="center",P.top=Math.floor((I-o.sortHeight)/2)+"px",P.height=o.sortHeight+"px")}else Rt.detach($);var A=n.popup;v>0?(A?P=A.style:(A=s.createElement("span"),n.popup=A,(P=A.style).position="absolute",P.display="inline-block"),Rt.addChild(w,A),A.className="rg-header-popup",E+=v,P.left=x-E+"px",P.top=Math.floor((I-o.popupHeight)/2)+"px",P.width=v+"px",P.height=o.popupWidth+"px"):Rt.detach(A),P=w.style,n.showTooltip=r.showTooltip,n.tooltipEllipsisOnly=r.tooltipEllipsisOnly,n.tooltip=r.tooltip,n.setDivMarigns(P,S,E,O,R);var V=u.header.realizeTemplate(),B=u.header.templateEvents;if(V){var j=n.setHtml(C,V,B);n.renderCallback&&n.renderCallback.forEach((function(t){t.callback.call(null,e.handler,u.header,t.elt,j)}))}else n.setText(C,r.text||"");Gl.addEdgeMark(r.edgeMark,n,s)},i.prototype._updateGroupCell=function(t,e,i,o){var r=t.doc,n=t.layoutManager,s=o.cell.firstElementChild,a=o.textSpan,l=this.$_getCellHeight(o),h=o.layout,u=0,c=s.style;n.fitHeader()?c.removeProperty("max-height"):c.setProperty("max-height",Math.max(l-2,0)+"px");var d=this.$_canExpanderHandleVisible(h),p=o.expander;if(d){o.expander||((p=o.expander=r.createElement("span")).style.position="absolute",p.style.display="inline-block"),p.className=h.expanded?"rg-column-expanded":"rg-column-collapsed";var f=p.style;f.left="2px",f.top=Math.floor((l-e.expanderHeight)/2)+"px",f.width=e.expanderWidth+"px",f.height=e.expanderHeight+"px",u+=e.expanderWidth+2,s.appendChild(o.expander)}else o.expander&&s.removeChild(o.expander);o.showTooltip=i.showTooltip,o.tooltipEllipsisOnly=i.tooltipEllipsisOnly,o.tooltip=i.tooltip,o.setDivMarigns(c,u,0,0,0);var _=h.header.realizeTemplate(),g=h.header.templateEvents;if(_){var y=o.setHtml(a,_,g);o.renderCallback&&o.renderCallback.forEach((function(e){e.callback.call(null,t.handler,h.header,e.elt,y)}))}else o.setText(a,i.text||"");Gl.addEdgeMark(i.edgeMark,o,r)},i.prototype.$_canPopupHandleVisible=function(e,i,o){if(null==i.header.popupMenuName)return!1;switch(e.showPopupMenu){case t.HandleVisibility.VISIBLE:case t.HandleVisibility.ALWAYS:return!0;case t.HandleVisibility.HOVERED:return o.hovered;case t.HandleVisibility.HIDDEN:return!1}},i.prototype.$_canFilterHandleVisible=function(e,i,o){var r=e.enabled&&i.hasFilters&&i.filterable&&i.filterIconVisible;if(r)switch(e.handleVisibility){case t.HandleVisibility.HIDDEN:r=!1;break;case t.HandleVisibility.HOVERED:r=o.hovered;break;case t.HandleVisibility.ACTIVE_OR_HOVERED:r=i.isFiltered()||o.hovered}return r},i.prototype.$_canSortHandleVisible=function(e,i,o){switch(e.handleVisibility){case t.HandleVisibility.VISIBLE:return i.sortOrder>=0;case t.HandleVisibility.HOVERED:return o.hovered&&i.sortOrder>=0;case t.HandleVisibility.ALWAYS:return i.sortable||i.sortOrder>=0;case t.HandleVisibility.HIDDEN:return!1}},i.prototype.$_canCheckHandleVisible=function(t,e){return!1},i.prototype.$_canExpanderHandleVisible=function(t){return t.isExpandable()},i.prototype.$_checkHeight=function(){return(this.model&&this.model.dirty||this._dirty)&&this._table.offsetHeight!=this._rowPoints[this._rowPoints.length-1]},i.prototype.getHeights=function(t,e){var i=this._tbody.rows,o=this.model,r=o.heights||[],n=o.minRowHeight,s=o.maxRowHeight;if(0==t.length)for(var a=0,l=this._rowPoints.length-1;a<l;a++)t[a]=0;for(a=0;a<t.length;a++)t[a]=Math.max(n,t[a],r[a]||0,i[a]?i[a].offsetHeight+e:0),s>0&&(t[a]=Math.min(t[a],s))},i.RENDERER_STYLE="rg-header-renderer",i.CHECK_IMAGE_STYLE="rg-header-check-image",i}(Rl),Xl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype._getCellCount=function(t){return t.fixedCellCount},e.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},e.prototype._getCellWidth2=function(t,e,i){return t.getFixedCellWidth2(e,i)},e.prototype.tableCellByLayout2=function(t,e){return this.tableCellByLayout(e)},e}(Kl),Zl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype._getCellCount=function(t){return t.cellCount-1},e.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},e.prototype._getCellWidth2=function(t,e,i){return t.getRightCellWidth2(e,i)},e.prototype.tableCellByLayout2=function(t,e){return this.tableCellByLayout(e)},e}(Kl),Jl=function(e){function i(i){var o=e.call(this)||this;return o._refreshMode=t.RefreshMode.ALL,o._leftPos=0,o._rightFixed=!0,o._footerCount=0,o._headerSummaryCount=0,o._layoutCount=0,o._fixedLayoutCount=0,o._rightLayoutCount=0,o._firstLayout=0,o._lastLayout=0,o._layoutsLength=0,o._layouts=[],o._layoutPoints=[],o._fixedLayoutPoints=[],o._rightLayoutPoints=[],o._cellCount=0,o._fixedCellCount=0,o._rightCellCount=0,o._firstCell=0,o._lastCell=0,o._startCell=0,o._endCell=0,o._cellPoints=[],o._fixedCellPoints=[],o._rightCellPoints=[],o._trs=1,o._rowGrouped=!1,o._items=[],o._topIndex=0,o._itemCount=0,o._fixedItemCount=0,o._fullItemCount=0,o._fixedItemPoints=[],o._itemPoints=[],o._fixedTableRowCount=0,o._tableRowCount=0,o._fixedTableRowPoints=[],o._tableRowPoints=[],o._fixedTableItemPoints=[],o._tableItemPoints=[],o._fixedDataHeight=0,o._dataRowHeights=[],o._dataHeight=0,o._fixedBarWidth=0,o._rightBarWidth=0,o._fixedBarHeight=0,o._itemsBounds=0,o._fixedWidth=0,o._rightWidth=0,o._fixedHeight=0,o._autoRowHeights=!1,o._minRowHeight=vl.MIN_TABLE_ROW_HEIGHT,o._minItemHeight=vl.MIN_TABLE_ROW_HEIGHT,o._maxHeight=vl.MIN_TABLE_ROW_HEIGHT,o._itemHeight=0,o._hscrolled=!1,o._vscrolled=!1,o._hscrollBar=!1,o._vscrollBar=!1,o._scrollBarWidth=0,o._scrollBarHeight=0,o._scrollWidth=0,o._fitStyle=void 0,o._grid=i,o}return o(i,e),i.prototype._doDispose=function(){this._grid=null,this._rs=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerCount",{get:function(){return this._footerCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerSummaryCount",{get:function(){return this._headerSummaryCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vscrollBar",{get:function(){return this._vscrollBar},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hscrollBar",{get:function(){return this._hscrollBar},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollBarWidth",{get:function(){return this._scrollBarWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollBarHeight",{get:function(){return this._scrollBarHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataBounds",{get:function(){return this._dataBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bodyBounds",{get:function(){return this._bodyBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedBodyBounds",{get:function(){return this._fixedBodyBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"gridBounds",{get:function(){return this._gridBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerBounds",{get:function(){return this._headerBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryBounds",{get:function(){return this._summaryBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerBounds",{get:function(){return this._footerBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterPanelBounds",{get:function(){return this._filterPanelBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topContentBounds",{get:function(){return this._topContentBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftContentBounds",{get:function(){return this._leftContentBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowBarBounds",{get:function(){return this._rowBarBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sideContentBounds",{get:function(){return this._sideContentBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"contentBounds",{get:function(){return this._contentBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedContentBounds",{get:function(){return this._fixedContentBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nonFixedBounds",{get:function(){return this._nonFixedBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightContentBounds",{get:function(){return this._rightContentBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headBounds",{get:function(){return this._headBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sumBounds",{get:function(){return this._sumBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footBounds",{get:function(){return this._footBounds},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedWidth",{get:function(){return this._fixedWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightWidth",{get:function(){return this._rightWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultItemHeight",{get:function(){return this._itemHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topIndex",{get:function(){return this._topIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedItemCount",{get:function(){return this._fixedItemCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fullItemCount",{get:function(){return this._fullItemCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedTableRowCount",{get:function(){return this._fixedTableRowCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tableRowCount",{get:function(){return this._tableRowCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trs",{get:function(){return this._cellLayouts.dataRows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftPos",{get:function(){return this._leftPos},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellLayouts",{get:function(){return this._cellLayouts},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"layoutCount",{get:function(){return this._layoutCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedLayoutCount",{get:function(){return this._fixedLayoutCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightLayoutCount",{get:function(){return this._rightLayoutCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstLayout",{get:function(){return this._firstLayout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastLayout",{get:function(){return this._lastLayout},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightFirstLayout",{get:function(){return this._layoutCount-this._rightLayoutCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightFirstCell",{get:function(){var t=this._layouts[this.rightFirstLayout];return t?t.col:1/0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"layoutsLength",{get:function(){return this._layoutsLength},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cellCount",{get:function(){return this._cellCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedCellCount",{get:function(){return this._fixedCellCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightCellCount",{get:function(){return this._rightCellCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstCell",{get:function(){return this._firstCell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastCell",{get:function(){return this._lastCell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"startCell",{get:function(){return this._startCell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"endCell",{get:function(){return this._endCell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isColumnFitted",{get:function(){return!!this._fitStyle},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollWidth",{get:function(){return this._scrollWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedBarWidth",{get:function(){return this._fixedBarWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightBarWidth",{get:function(){return this._rightBarWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedHeight",{get:function(){return this._fixedHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fixedBarHeight",{get:function(){return this._fixedBarHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGrouped",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergedRowGrouped",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupFields",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupLevels",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clientRect",{get:function(){return this._clientRect},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerRows",{get:function(){return this._cellLayouts.headerRows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataRows",{get:function(){return this._cellLayouts.dataRows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topPanelVisible",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minRowHeight",{get:function(){return this._minRowHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minItemHeight",{get:function(){return this._minItemHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fitStyle",{get:function(){return this._fitStyle},enumerable:!1,configurable:!0}),i.prototype.syncHeight=function(){return this.grid.displayOptions.syncGridHeight!==t.SyncGridHeight.NONE},i.prototype.fitSyncHeight=function(){return this._fitSyncHeight},i.prototype.fitHeader=function(){return this._fitHeader},i.prototype.getStartCell=function(e){if(void 0===e&&(e=!0),e)return this._firstCell;var i=this.grid,o=i.isRecycleMode();switch(this._refreshMode){case t.RefreshMode.VISIBLE_ONLY:return this._startCell;case t.RefreshMode.RECYCLE:return o?i._needRefresh&&i._horzScrolled?this._firstCell:this._startCell:this._firstCell;default:return this._firstCell}},i.prototype.getEndCell=function(e){if(void 0===e&&(e=!0),e)return this._lastCell;var i=this.grid,o=i.isRecycleMode();switch(this._refreshMode){case t.RefreshMode.VISIBLE_ONLY:return this._endCell;case t.RefreshMode.RECYCLE:return o?i._needRefresh&&i._horzScrolled?this._lastCell:this._endCell:this._lastCell;default:return this._lastCell}},i.prototype.getLayout=function(t){return this._layouts[t]},i.prototype.getLayoutBounds=function(t){return new ot(this._layoutPoints[t],0,this._layoutPoints[t+1]-this._layoutPoints[t],0)},i.prototype.getLayoutWidth=function(t){return this._layoutPoints[t+1]-this._layoutPoints[t]},i.prototype.getPositionToVIndex=function(t){for(var e=this._layoutPoints,i=0;i<e.length-1;i++)if(t>=e[i]&&t<e[i+1])return i;return-1},i.prototype.getFixedLayoutWidth=function(t){return this._fixedLayoutPoints[t+1]-this._fixedLayoutPoints[t]},i.prototype.getRightLayoutWidth=function(t){return this._rightLayoutPoints[t+1]-this._rightLayoutPoints[t]},i.prototype.getCellIndex=function(t){for(var e=this._cellPoints,i=0;i<e.length-1;i++)if(t>=e[i]&&t<e[i+1])return i;return-1},i.prototype.getHorzColumnIndex=function(t){for(var e=t,i=0;e;)i+=!e.group||e.group.horizontal?e.vindex:0,e=e.group;return i},i.prototype.getLeftCell=function(){return this.getCellIndex(this._leftPos)},i.prototype.getCellPoint=function(t){return this._cellPoints[t]},i.prototype.getCellWidth=function(t){return this._cellPoints[t+1]-this._cellPoints[t]},i.prototype.getCellWidth2=function(t,e){var i=this._cellPoints;return i[Math.min(i.length-1,t+e)]-i[t]},i.prototype.getFixedCellPoint=function(t){return this._fixedCellPoints[t]},i.prototype.getFixedCellWidth=function(t){return this._fixedCellPoints[t+1]-this._fixedCellPoints[t]},i.prototype.getFixedCellWidth2=function(t,e){var i=this._fixedCellPoints;return i[Math.min(i.length-1,t+e)]-i[t]},i.prototype.getRightCellPoint=function(t){return this._rightCellPoints[t]},i.prototype.getRightCellWidth=function(t){return this._rightCellPoints[t+1]-this._rightCellPoints[t]},i.prototype.getRightCellWidth2=function(t,e){var i=this._rightCellPoints;return i[Math.min(i.length-1,t+e)]-i[t]},i.prototype.$_getItems=function(){return this._items},i.prototype.getItem=function(t){return this._items[t]},i.prototype.getDataRowHeights=function(t){var e=this.grid.displayOptions,i=[],o=e.dataHeights;if(o&&o.length>0)for(var r=0;r<t;r++){var n=Math.floor(Math.max(e.minTableRowHeight,o[r]||e.minTableRowHeight));i.push(n)}return i.slice()},i.prototype.setFitHeader=function(t,e){this._fitHeader=t,this._paddingHeight=e},i.prototype._calcDefaultRowHeight=function(t){var e=this.grid.displayOptions.rowHeight,i=this._dataRowHeights=this.getDataRowHeights(this._trs);return i&&i.length>0&&(e=i.reduce((function(t,e){return t+e}),0)),e<=0&&(e=t.heightMeasurer.rowHeight*this._trs),i.length>0&&this._maxHeight>0&&(e>this._maxHeight||e<this._minItemHeight)&&(this._dataRowHeights=[]),this._maxHeight>0&&(e=Math.min(this._maxHeight,e)),e=Math.max(this._minItemHeight,e)},i.prototype.measure=function(t,e,i,o,r){var n=this._grid;this._rs=n.itemSource,this._cellLayouts=n._activeCellLayout,this._footerCount=n.footers.visibleCount,this._headerSummaryCount=n.headerSummaries.visibleCount,this._leftPos=e,this._topIndex=i,this._focusIndex&&!n.isValid(this._focusIndex)&&this._focusIndex.normalize(n),this._prevVscrollBar=this._vscrollBar,this._prevHscrollBar=this._hscrollBar,this._doMeasure(t,o,r),this._prevVscrollBar===this._vscrollBar&&this._prevHscrollBar===this._hscrollBar||(n._columnsDirty=!0)},i.prototype.layout=function(t,e){void 0===e&&(e=!1);var i=this._grid;i.invalidateGridObject(),this._doLayout(i,t),this._adjustLayout(i,this._gridBounds.clone(),e),this._prevFocused=this._focusIndex,this._focusIndex=null,this._oldSyncHeight=i.displayOptions.syncGridHeight},i.prototype.getItemHeight=function(t){var e=t.index;return e<this._fixedItemCount?this._fixedItemPoints[e+1]-this._fixedItemPoints[e]:(e-=this._fixedItemCount-this._topIndex,this._itemPoints[e+1]-this._itemPoints[e])},i.prototype.getTableItemHeight=function(t){return t<this._fixedItemCount?this._fixedTableItemPoints[t+1]-this._fixedTableItemPoints[t]:(t-=this._fixedItemCount,this._tableItemPoints[t+1]-this._tableItemPoints[t])},i.prototype.getTableItemIndex=function(t){for(var e=0;e<this._fixedItemCount;e++)if(t<=this._fixedTableItemPoints[e+1])return e;for(e=0;e<this._itemCount;e++)if(t<=this._tableItemPoints[e+1])return e+this._fixedItemCount;return-1},i.prototype.getTableItemTop=function(t){return t<this._fixedItemCount?this._fixedTableItemPoints[t]:(t-=this._fixedItemCount,this._tableItemPoints[t])},i.prototype.getTableItemBottom=function(t){return t<this._fixedItemCount?this._fixedTableItemPoints[t+1]:(t-=this._fixedItemCount,this._tableItemPoints[t+1])},i.prototype.getItemBounds=function(t){var e,i;return this._fixedItemCount>0&&t<this._fixedItemCount?(e=this._fixedItemPoints[t],i=this._fixedItemPoints[t+1]-e):(t-=this._fixedItemCount,e=this._itemPoints[t],i=this._itemPoints[t+1]-e),new ot(0,e,1e3,i)},i.prototype.getItemRect=function(t,e){void 0===e&&(e=!1);var i,o,r=(e?this._fixedContentBounds:this._bodyBounds).y;return this._fixedItemCount>0&&t<this._fixedItemCount?(i=this._fixedItemPoints[t]+r,o=this._fixedItemPoints[t+1]+r-i):(t-=this._fixedItemCount,i=this._itemPoints[t]+r,o=this._itemPoints[t+1]+r-i),new ot(0,i,1e3,o)},i.prototype.getTableItemBounds=function(t){var e,i;return this._fixedItemCount>0&&t<this._fixedItemCount?(e=this._fixedTableItemPoints[t],i=this._fixedTableItemPoints[t+1]-e):(t-=this._fixedItemCount,e=this._tableItemPoints[t],i=this._tableItemPoints[t+1]-e),new ot(0,e,1e3,i)},i.prototype.getTableRowHeightFixed=function(t,e){var i=this._fixedTableRowPoints.length;return t<i-1?this._fixedTableRowPoints[Math.min(t+e,i-1)]-this._fixedTableRowPoints[t]:(i>1&&(t-=i),this._tableRowPoints[Math.min(t+e,this._tableRowPoints.length-1)]-this._tableRowPoints[t])},i.prototype.getTableRowHeight=function(t,e){return t<this._fixedTableRowCount?this._fixedTableRowPoints[Math.min(t+e,this._fixedTableRowPoints.length-1)]-this._fixedTableRowPoints[t]:(this._fixedItemCount>0&&(t-=this._fixedItemCount*this._trs+1),this._tableRowPoints[Math.min(t+e,this._tableRowPoints.length-1)]-this._tableRowPoints[t])},i.prototype.getTableRowBounds=function(t,e){var i,o;return this._fixedTableRowCount>0&&t<this._fixedTableRowCount?(i=this._fixedTableRowPoints[t],o=this._fixedTableRowPoints[Math.min(t+e,this._fixedTableRowCount)]-i):(this._fixedTableRowCount>0&&(t-=this._fixedTableRowCount+1),i=this._tableRowPoints[t],o=this._tableRowPoints[Math.min(t+e,this._tableRowCount)]-i),new ot(0,i,1e3,o)},i.prototype.getTableRowIndex=function(t){t-=this.contentBounds.y+this.bodyBounds.y;for(var e=0;e<this._fixedTableRowCount;e++)if(t<=Math.round(this._fixedTableRowPoints[e+1]))return e;for(e=0;e<this._tableRowCount;e++)if(t<=Math.round(this._tableRowPoints[e+1]))return e+(this._fixedTableRowCount>0?this._fixedTableRowCount+1:0);return-1},i.prototype.setLeftPos=function(t,e){var i=this._grid;this._leftPos=e,this.$_calcLeftPos(),i.contentPane.x=this._contentBounds.x=this.fixedContentBounds.right-this._leftPos},i.prototype.isMergedCell=function(t){return!1},i.prototype.getMergeRoom=function(t){var e=t.layout;if(e instanceof _s&&e.canMerge()){var i=e.merges;return i&&i.getRoom(t)}return null},i.prototype.getHeaderCellAt=function(t,e,i){void 0===i&&(i=!1);var o,r=this._grid,n=this._cellLayouts._headerCells,s=-1;if(t<this._fixedContentBounds.right){o=r.fixedHeaderView,t-=this._fixedContentBounds.x;for(var a=0;a<this._fixedCellCount;a++)if(t>=this._fixedCellPoints[a]&&t<this._fixedCellPoints[a+1]){s=a;break}}else if(t>this._rightContentBounds.x){o=r.rightHeaderView,t-=this._rightContentBounds.x;for(a=0;a<this._rightCellCount;a++)if(t>=this._rightCellPoints[a]&&t<this._rightCellPoints[a+1]){s=a+this._cellCount-this._rightCellCount;break}}else{o=r.headerView,t-=this._contentBounds.x;for(a=0;a<this._cellPoints.length;a++)if(t>=this._cellPoints[a]&&t<this._cellPoints[a+1]){s=a+this._fixedCellCount;break}}if(s>=0){var l=n[o.getRowAt(e-this._headerBounds.y-this._contentBounds.y)][s];return(l=o.getSpanRoot(l))&&!i?l.source:l}},i.prototype.getHeaderCellRect=function(t,e){void 0===e&&(e=!1);var i,o,r=this.grid,n=t.hcol,s=this.cellCount-this.rightCellCount;if(n<this._fixedCellCount){var a=this._fixedContentBounds.x,l=n,h=(o=r.fixedHeaderView.tableCellByLayout(t))?o.colSpan:t.cols;i=new ot(this._fixedCellPoints[l]+a,0,this._fixedCellPoints[l+h]-this._fixedCellPoints[l],0)}else if(n>=s){a=this._rightContentBounds.x+this._grid.fixedOptions.rightBarWidth,l=n-s,h=(o=r.rightHeaderView.tableCellByLayout(t))?o.colSpan:t.cols;i=new ot(this._rightCellPoints[l]+a,0,this._rightCellPoints[l+h]-this._rightCellPoints[l],0)}else{a=this._contentBounds.x,l=n-this._fixedCellCount,h=(o=r.headerView.tableCellByLayout(t))?o.colSpan:t.cols;i=new ot(this._cellPoints[l]+a,0,this._cellPoints[l+h]-this._cellPoints[l],0)}return i.y=this._contentBounds.y+r.headerView.getLayoutPos(t),i.height=r.headerView.getLayoutHeight(t,o,e),i},i.prototype.getDataRect=function(t){var e,i=(t=t.source).col,o=t instanceof vs?t._clen:t._defColSpan,r=this.cellCount-this.rightCellCount;if(i<this._fixedCellCount){var n=this._fixedContentBounds.x,s=i;e=new ot(this._fixedCellPoints[s]+n,0,this._fixedCellPoints[s+o]-this._fixedCellPoints[s],0)}else if(i>=r){n=this._rightContentBounds.x+this._grid.fixedOptions.rightBarWidth,s=i-r;e=new ot(this._rightCellPoints[s]+n,0,this._rightCellPoints[s+o]-this._rightCellPoints[s],0)}else{n=this._contentBounds.x,s=i-this._fixedCellCount;e=new ot(this._cellPoints[s]+n,0,this._cellPoints[s+o]-this._cellPoints[s],0)}return e},i.prototype.getBodyView=function(t){var e=this.rightFirstLayout,i=(t instanceof ps?t:t.layout).root.vindex;return i<this._fixedLayoutCount?this._grid.fixedBodyView:i>=e?this._grid.rightBodyView:this._grid.bodyView},i.prototype.$_getItemIndexByPosY=function(t,e){var i=this.grid,o=this._trs,r=-1,n=0,s=function(t,e,i){for(var s=0;s<e*o;s++)t>=i[s]&&t<i[s+1]&&(r=0===s?0:Math.floor(s/o),n=0===s?0:s%o)},a=i.bodyView.boundsByContainer();return t<i.headerView.boundsByContainer().y?r=e?i.topItem:-3:t>=a.y&&t<a.y+this.dataBounds.height?(t-=a.y,this._fixedItemCount>0&&t<this._fixedHeight?s(t,this._fixedItemCount,this._fixedTableRowPoints):(s(t,this._itemCount,this._tableRowPoints),r>=0&&(r+=i.topItem))):e?r=this._itemCount+i.topItem:(s(t,this._footerCount,i.footerView._rowPoints),r=-2),{itemIndex:r,rowIndex:n}},i.prototype.mouseToIndex=function(t,e,i,o){if(o.set(-1,null),this._layoutCount<1)return o;var r=this.grid;if(o.itemIndex=this.$_getItemIndexByPosY(i,!0).itemIndex,t){var n=r.getCellViewOf(t),s=n&&r.getBodyView(n),a=s instanceof Ul&&s.layoutByCell(n);if(a)return o.layout=a,o}return o},i.prototype.mouseToIndex2=function(t,e,i){var o,r,n=this.grid,s=this.cellLayouts._dataCells,a=this.$_getItemIndexByPosY(e,i),l=a.itemIndex,h=function(t,e,i){for(var o=0;o<e;o++)if(t>=i[o]&&t<i[o+1])return o},u=s[a.rowIndex],c=this._cellCount-this._fixedCellCount-this._rightCellCount;return t>0&&(t>this._rightContentBounds.x?(r=h(t-=this._rightContentBounds.x,this._rightCellCount,this._rightCellPoints),o=u&&u[this._fixedCellCount+c+r]):(t-=this._rowBarBounds.width)<this._fixedWidth?(r=h(t,this._fixedCellCount,this._fixedCellPoints),o=u&&u[r]):(r=h(t=t-this._fixedWidth+this.leftPos,c,this._cellPoints),o=u&&u[this._fixedCellCount+r])),i&&!o&&(o=t<=0?u&&u[0]:u&&u[u.length-1]),new Ds(n,l,o&&o.source)},i.prototype.cellIsVisible=function(t){var e=t.itemIndex,i=this._fixedItemCount,o=this._cellLayouts,r=this._cellPoints;if(e>=i){if(e<this._topIndex+i)return!1;if(this._itemCount+i===0)return!1;if(0==this._fullItemCount&&e==this._topIndex+i)return!0;if(e>=this._topIndex+i+this._fullItemCount)return!1}var n=t.layout;if(o!==this.grid.activeCellLayout||!o.contains(n)||!o.getDataCellPos(n.firstColumn))return!1;var s=n.col;if(s>=(i=this._fixedLayoutCount)){if(r[s=n.col-this._fixedCellCount]<this._leftPos)return!1;if(r[s+n.cols]-this._leftPos>this._nonFixedBounds.width)return!1}return!0},i.prototype.clearFocusRequest=function(){this._focusIndex=null},i.prototype.focusIsVisible=function(t){return(t=t||this._focusIndex)&&this.cellIsVisible(t)},i.prototype.makeCellVisible=function(t){this._focusIndex=t.clone()},i.prototype.isAutoRowHeights=function(){return this._autoRowHeights},i.prototype.isRowGrouped=function(){return this._rowGrouped},i.prototype.scrollToNextCell=function(){for(var t=0;t<this._cellCount;t++)if(this._cellPoints[t]>this._leftPos)return this._cellPoints[t];return this._leftPos},i.prototype.scrollToPrevCell=function(){for(var t=this._cellCount-1;t>=0;t--)if(this._cellPoints[t]<this._leftPos)return this._cellPoints[t];return this._leftPos},i.prototype.needRelayout=function(){return this._autoRowHeights&&this._fitStyleChanged&&this._fitStyle==t.GridFitStyle.EVEN_FILL||this.syncHeight()&&this._fitSyncChanged},i.prototype.$_calcFixedCellPoints=function(t,e){var i=this._layoutCount=e.visibleCount,o=e._cellWidths,r=this._fixedLayoutCount=Math.min(t.colCount,i);if(this._rightLayoutCount=Math.max(0,Math.min(t.rightCount,i-r-1)),this._rightFixed=t.rightFixed,this._cellCount=0,this._fixedCellCount=0,this._rightCellCount=0,this._layouts=[],this._fixedLayoutPoints=[],this._fixedWidth=0,this._rightWidth=0,this._rightBarWidth=0,this._fixedCellPoints=[],r>0){var n=this._layouts,s=this._fixedLayoutPoints,a=this._fixedCellPoints,l=0,h=0;s.push(l),a.push(l);for(var u=0;u<r;u++){for(var c=e.getVisible(u),d=c.cols,p=0;p<d;p++)l+=o[h++],a.push(l);n.push(c),s.push(l)}this._fixedCellCount=this._cellCount=h,this._fixedWidth=s[r]+(this._fixedBarWidth=t.colBarWidth)}},i.prototype.$_calcCellPoints=function(t){var e=t.visibleCount-this._fixedLayoutCount-this._rightLayoutCount,i=t._cellWidths,o=this._layoutPoints=[],r=this._cellPoints=[],n=this._fixedLayoutCount,s=this._layouts;if(this._firstCell=this._lastCell=this._cellCount,this._layoutsLength=0,e>0){var a=0,l=this._cellCount;o.push(a),r.push(a);for(var h=0;h<e;h++){for(var u=t.getVisible(h+n),c=u.cols,d=0;d<c;d++)a+=i[l++],r.push(a);s.push(u),o.push(a)}this._layoutsLength=a,this._cellCount=l,this._lastCell=l-1}},i.prototype.$_calcRightCellPoints=function(t,e){var i=e._cellWidths,o=this._layoutCount,r=this._rightLayoutPoints=[],n=this._rightCellPoints=[],s=this._layouts;if(this._rightLayoutCount>0){var a=0,l=this._cellCount;r.push(a),n.push(a);for(var h=o-this._rightLayoutCount;h<o;h++){for(var u=e.getVisible(h),c=0;c<u.cols;c++)a+=i[l++],n.push(a);s.push(u),r.push(a)}this._rightCellCount=l-this._cellCount,this._cellCount=l,this._rightWidth=r[this._rightLayoutCount]+(this._rightBarWidth=t.rightBarWidth)}},i.prototype.$_calcScrollWidth=function(t){this._scrollWidth=t.width-this._leftContentBounds.width-this._sideContentBounds.width-this._fixedContentBounds.width-this._rightContentBounds.width},i.prototype.$_calcLeftPos=function(){var e=this._focusIndex&&this._focusIndex.layout,i=this._leftPos;if(e){var o=e.root.vindex,r=this._cellPoints,n=this.grid,s=n.editOptions.focusMoveStep===t.FocusMoveStep.GROUP;if(!n.isSwiping&&o>=this._fixedLayoutCount&&o<this.rightFirstLayout){var a=e.col-this._fixedCellCount,l=r[a],h=n.displayOptions.horzPageScroll&&"keydown"===n._eventFrom&&n._prevTop===this._topIndex;if(l<this._leftPos)h&&this._leftPos>=r[a+1]&&(l=l-(this.gridBounds.width+r[a]-r[a+1])+(this._fixedContentBounds.width+this._rightContentBounds.width)),i=l;else{var u=e.getAncestor(n.displayOptions.groupFocusLevel),c=r[a+(s?u.cols:e.cols)]-this._leftPos-this._scrollWidth;h&&r[a]-this._leftPos>=this._scrollWidth&&(c=Math.max(r[a]-r[this.getLeftCell()],c)),c>0&&(i=Math.min(l,this._leftPos+c))}}}(i=Math.max(0,Math.min(i,this._layoutsLength-this._scrollWidth)))!==this._leftPos&&(this.grid._horzScrolled=!0,this._leftPos=i),this._firstLayout=this._fixedLayoutCount,this._lastLayout=this._layoutCount>0?this._layoutCount-this._rightLayoutCount-1:-1},i.prototype.$_checkFitting=function(e,i){var o=e.fitStyle,r=this.grid,n=r.fixedOptions,s=r.activeCellLayout.count;if(o!=t.GridFitStyle.NONE){if(s>=0&&n.colCount+n.rightCount>=s)return e.fitStyleIncludeFixed?o:void 0;var a=this._cellPoints,l=a.length;if(l>0)return o==t.GridFitStyle.EVEN_FILL||i-a[l-1]>0?o:void 0}},i.prototype.$_fitColumns=function(e,i,o){var r=e.fitStyle,n=this._fixedLayoutCount,s=!1;if(e.fitStyleIncludeFixed&&this._fixedCellCount+this._rightCellCount>0){var a=this._layouts.slice(0,n),l=this._layouts.slice(n,this.rightFirstLayout),h=this._layouts.slice(this.rightFirstLayout),u=[{points:this._fixedLayoutPoints,layouts:a,cellPoints:this._fixedCellPoints},{points:this._layoutPoints,layouts:l,cellPoints:this._cellPoints},{points:this._rightLayoutPoints,layouts:h,cellPoints:this._rightCellPoints}],c=0;u.forEach((function(t){var e=t.points;e.length>0&&(c+=e[e.length-1])}));var d=this._clientRect.width-this._leftContentBounds.width-this._sideContentBounds.width-this._scrollBarWidth;if(d=d-(this._fixedCellCount?this._fixedBarWidth:0)-(this._rightCellCount?this._rightBarWidth:0),r===t.GridFitStyle.FILL){var p=0,f=0,_=[];u.forEach((function(t){for(var e=t.points,i=t.widths=[],o=1;o<e.length;o++){var r=e[o]-e[o-1];_.push(r),i.push(r)}}));for(var g=0;g<this._layouts.length;g++){(I=(k=this._layouts[g]).fillWidth)>0?p+=I:f+=_[g]}(s=p>0)&&(f=d-f,u.forEach((function(t){for(var e=t.points,i=1;i<e.length;i++){var o=t.layouts[i-1].fillWidth;e[i]=o>0?e[i-1]+o*f/p:e[i-1]+t.widths[i-1]}})))}s||u.forEach((function(t){for(var e=t.points,i=1;i<e.length;i++)e[i]=Math.round(e[i]*(d/c))})),u.forEach((function(t,i){var o=t.points,r=t.cellPoints,n=o.length,s=0;r.length=0,r.push(s);for(var a=0;a<n-1;a++){for(var l=t.layouts[a],h=o[a+1]-o[a],u=l.cols,c=s,d=l._setFitWidth(h,null,e.fitStyle),p=0;p<u-1;p++)c+=d[p],r.push(Math.round(c));s+=h,r.push(Math.round(s))}r[r.length-1]=o[n-1]})),this._layoutsLength=Rt.getLast(this._layoutPoints)||0,this._fixedWidth=this._fixedCellCount?Rt.getLast(this._fixedLayoutPoints)+this._fixedBarWidth:0,this._rightWidth=this._rightCellCount?Rt.getLast(this._rightLayoutPoints)+this._rightBarWidth:0,this._fixedContentBounds.width=this._fixedWidth,this.$_measureFixedPane(this.grid),this._contentBounds.left=this._fixedContentBounds.right,this._contentBounds.width=this._layoutsLength,this.$_measureContentPane(this.grid),this._rightContentBounds.left=this._contentBounds.right+this._scrollBarWidth,this._rightContentBounds.width=this._rightWidth,this.$_measureRightPane(this.grid),this._nonFixedBounds=new ot(this._fixedContentBounds.right,this._fixedContentBounds.y,this._layoutsLength,this._fixedContentBounds.height)}else{for(g=0;g<this._layoutCount;g++){(k=this._cellLayouts.getVisible(g)).isFixed&&k._clearFitWidth()}var y=this._layoutsLength,m=this._layoutPoints,b=m.length,v=[];for(g=1;g<m.length;g++)v.push(m[g]-m[g-1]);if(b>0){var w=this._layouts;if(r==t.GridFitStyle.FILL){var C=0,x=0;for(g=0;g<b-1;g++){var I;(I=w[g+n].fillWidth)>0?x+=I:C+=v[g]}if(s=x>0){C=o-C;for(g=1;g<b;g++){var S=(k=w[g-1+n]).fillWidth;m[g]=S>0?m[g-1]+S*C/x:m[g-1]+v[g-1]}}}if(!s)for(g=1;g<b;g++)m[g]=m[g]*o/y;var E=0;for(g=0;g<b-1;g++)m[g]=Math.round(m[g]);for(g=1;g<b-1;g++){var O=m[g]-m[g-1];O<2?(E=2-O,m[g]+=2-O):E>0&&O>2+E&&(m[g]-=E,E=0)}var R=this._cellPoints=[],P=0;R.push(P);for(g=0;g<b-1;g++){for(var k=this._cellLayouts.getVisible(g+n),T=m[g+1]-m[g],D=k.cols,M=P,F=k._setFitWidth(T,null,r),L=0;L<D-1;L++)M+=F[L],R.push(Math.round(M));P+=T,R.push(Math.round(P))}R[R.length-1]=m[b-1]=o}this._layoutsLength=m[b-1]=o}},i.prototype.$_measureTopPane=function(t){this._doMeasureTopPane(t,this._topContentBounds)},i.prototype._doMeasureTopPane=function(t,e){e.height=0},i.prototype.$_measureViewHeights=function(t,e){var i;i=0,t.header.visible?(this._headerBounds=e.clone(),i=t.headerView.measure(t,e.width,e.height).height,this._headerBounds.height=i):this._headerBounds?this._headerBounds.setEmpty():this._headerBounds=new ot,this._fixedHeaderBounds=this._headerBounds.clone(),this._rightHeaderBounds=this._headerBounds.clone(),this._headBounds.y=e.y,this._headBounds.height=i,e.topBy(i),i=0,t.filterPanel.visible?(this._filterPanelBounds=e.clone(),i=t.filterPanelView.measure(t,e.width,e.height).height,this._filterPanelBounds.height=i):(this._filterPanelBounds=this._filterPanelBounds||new ot,this._filterPanelBounds.setEmpty()),this._fixedFilterBounds=this._filterPanelBounds.clone(),this._rightFilterBounds=this._filterPanelBounds.clone(),this._filterBounds.y=e.y,this._filterBounds.height=i,e.topBy(i),i=0,t.headerSummaries.canShow?(this._summaryBounds=e.clone(),i=t.headerSummaryView.measure(t,e.width,e.height).height,t.fixedHeaderSummaryView,this._summaryBounds.height=i):this._summaryBounds?this._summaryBounds.setEmpty():this._summaryBounds=new ot,this._fixedSummaryBounds=this._summaryBounds.clone(),this._rightSummaryBounds=this._summaryBounds.clone(),this._sumBounds.y=e.y,this._sumBounds.height=i,e.topBy(i),i=0,t.footers.canShow?(this._footerBounds=e.clone(),i=t.footerView.measure(t,e.width,e.height).height,this._footerBounds.height=i):this._footerBounds?this._footerBounds.setEmpty():this._footerBounds=new ot,this._fixedFooterBounds=this._footerBounds.clone(),this._rightFooterBounds=this._footerBounds.clone(),this._footBounds.y=e.bottom-this._footerBounds.height,this._footBounds.height=i;var o=this._sumBounds.bottom;i=this._footBounds.y-o,this._rowBarBounds.y=o,this._rowBarBounds.height=i},i.prototype.$_measureLeftPane=function(t){var e,i=this._leftContentBounds.clone().move();this._headBounds=i.clone(),this._sumBounds=i.clone(),this._footBounds=i.clone(),this._filterBounds=i.clone(),e=t.rowBarContainer.measure(t,i.width,i.height),this._rowBarBounds=i.clone(),this._rowBarBounds.width=e.width,this._leftContentBounds.width=e.width,i.leftBy(e.width),this._headBounds.width=this._sumBounds.width=this._footBounds.width=this._filterBounds.width=this._leftContentBounds.width},i.prototype._measureSidePane=function(t){var e=t.sideContentPane;if(t.isSidePaneVisible()){var i=this._sideContentBounds.clone(),o=e.measure(t,i.width,i.height);this._sideContentBounds.width=o.width}else e&&e.measure(t,0,0),this._sideContentBounds.width=0},i.prototype.$_measureFixedPane=function(t){var e=this._fixedContentBounds.width=this._fixedWidth,i=this._fixedContentBounds.clone().move();this._fixedHeaderBounds.x=i.x,this._fixedHeaderBounds.y=i.y,this._fixedHeaderBounds.width=i.width,i.topBy(this._fixedHeaderBounds.height),this._fixedFilterBounds.x=i.x,this._fixedFilterBounds.y=i.y,this._fixedFilterBounds.width=i.width,i.topBy(this._fixedFilterBounds.height),e>0&&(t.fixedFilterView._rowPoints=t.filterPanelView._rowPoints.slice()),this._fixedSummaryBounds.x=i.x,this._fixedSummaryBounds.y=this._fixedFilterBounds.bottom,this._fixedSummaryBounds.width=i.width,i.topBy(this._fixedSummaryBounds.height),e>0&&(t.fixedHeaderSummaryView._rowPoints=t.headerSummaryView._rowPoints.slice()),this._fixedFooterBounds.x=i.x,this._fixedFooterBounds.y=i.bottom-this._fixedFooterBounds.height,this._fixedFooterBounds.width=i.width,i.bottomBy(-this._fixedFooterBounds.height),e>0&&(t.fixedFooterView._rowPoints=t.footerView._rowPoints.slice()),this._fixedBodyBounds=i},i.prototype.$_measureRightPane=function(t){var e=this._rightWidth;this._rightContentBounds.width=e;var i=this._rightContentBounds.clone();i.x=this._rightBarWidth,i.y=0,i.width-=i.x,this._rightHeaderBounds.x=i.x,this._rightHeaderBounds.y=i.y,this._rightHeaderBounds.width=i.width,i.topBy(this._rightHeaderBounds.height),this._rightFilterBounds.x=i.x,this._rightFilterBounds.y=i.y,this._rightFilterBounds.width=i.width,i.topBy(this._rightFilterBounds.height),e>0&&(t.rightFilterView._rowPoints=t.filterPanelView._rowPoints.slice()),this._rightSummaryBounds.x=i.x,this._rightSummaryBounds.y=this._rightFilterBounds.bottom,this._rightSummaryBounds.width=i.width,i.topBy(this._rightSummaryBounds.height),e>0&&(t.rightHeaderSummaryView._rowPoints=t.headerSummaryView._rowPoints.slice()),this._rightFooterBounds.x=i.x,this._rightFooterBounds.y=i.bottom-this._rightFooterBounds.height,this._rightFooterBounds.width=i.width,i.bottomBy(-this._rightFooterBounds.height),e>0&&(t.rightFooterView._rowPoints=t.footerView._rowPoints.slice()),this._rightBodyBounds=i},i.prototype.$_measureContentPane=function(t){var e=this._layoutsLength;this._contentBounds.width=e;var i=this._contentBounds.clone();i.x=i.y=0,this._headerBounds&&(this._headerBounds.x=i.x,this._headerBounds.y=i.y,this._headerBounds.width=i.width,i.topBy(this._headerBounds.height)),this._filterPanelBounds&&(this._filterPanelBounds.x=i.x,this._filterPanelBounds.y=i.y,this._filterPanelBounds.width=i.width,i.topBy(this._filterPanelBounds.height)),this._summaryBounds&&(this._summaryBounds.x=i.x,this._summaryBounds.y=this._filterPanelBounds.bottom,this._summaryBounds.width=i.width,i.topBy(this._summaryBounds.height)),this._dataBounds=i.clone(),this._footerBounds&&(this._footerBounds.x=i.x,this._footBounds.y=this._footerBounds.y=i.bottom-this._footerBounds.height,this._footerBounds.width=i.width,i.bottomBy(-this._footerBounds.height)),this._bodyBounds=i},i.prototype.getRowHeightOfCallback=function(t,e){var i=t.getItem(e),o=t.displayOptions.rowHeightCallback;if(o){var r=o.call(this,t.handler,i.type,e),n=[],s=void 0,a=this.trs;if(null!=r){if(Array.isArray(r)){n=r.slice(0,a);for(l=r.length;l<a;l++)n.push(this.minRowHeight)}else{s=0;for(var l=1;l<a;l++){var h=Math.max(this.minRowHeight,l%2?Math.floor(r/a):Math.round(r/a));n.push(h),s+=h}n.push(Math.max(r-s,this.minRowHeight))}var u=n.reduce((function(t,e){return t+e}),0);return i.heights=n.slice(),u}}},i.prototype.$_getItemHeight=function(e,i){var o=e.getItem(i),r=o.height;if(!isNaN(r))return r;if(this._autoRowHeights)return this._minItemHeight;if(e.displayOptions.rowHeightCallback&&Rt.included(o.type,t.ItemType.ROW,t.ItemType.TREE)){var n=this.getRowHeightOfCallback(e,i);if(n)return n;o.heights=null}else o.heights=null;return this._itemHeight},i.prototype.$_calcItemPoints=function(t){var e=this.grid;if("mousedown"===e._eventFrom&&this._focusIndex&&!1!==t&&this._topIndex<this._focusIndex.itemIndex-this._fixedItemCount-Math.max(0,this._fullItemCount-1))return;t=null==t||t;var i=e.itemSource,o=this.syncHeight(),r=o?1/0:this._itemsBounds;this._topIndex=o?0:this._topIndex;var n=0,s=i?Math.min(i.fixedCount,i.itemCount):0;if(this._fixedItemCount=0,this._fixedBarHeight=0,this._fixedHeight=0,this._fixedItemPoints=[],s>0){this._fixedItemPoints.push(n);for(var a=0;a<s&&n<r;a++){n+=this.$_getItemHeight(e,a),this._fixedItemPoints.push(n),this._fixedItemCount++}this._fixedHeight=n,n+=this._fixedBarHeight=e.fixedOptions.rowBarHeight}var l=e.itemCount-this._fixedItemCount;if(this._itemPoints=[n],this._itemCount=0,this._fullItemCount=0,l>0&&n<r){var h=this._topIndex,u=-1;if(this._focusIndex&&(u=this._focusIndex.itemIndex)>=this._fixedItemCount&&u<h+this._fixedItemCount){var c=u-this._fixedItemCount;null==(d=e.topIndexChanging(h,u-this._fixedItemCount-h,!0,!1))||isNaN(d)||(c=this._topIndex+d),h=this._topIndex=c}for(a=h;a<l&&n<r;a++){n+=this.$_getItemHeight(e,a+this._fixedItemCount),this._itemCount++,this._itemPoints.push(n)}if(this._fullItemCount=this._itemCount-(n>r?1:0),t&&u>=this._topIndex+this._fixedItemCount+this._fullItemCount){n=this.fixedItemCount>0?this._fixedHeight+e.fixedOptions.rowBarHeight:0;var d,p=u-this._fixedItemCount-Math.max(0,this._fullItemCount-1)-this._topIndex;null==(d=e.topIndexChanging(this._topIndex,p,t,!1))||isNaN(d)||(p=d),this._topIndex+=p,this._itemPoints=[n],this._itemCount=0,this._fullItemCount=0;for(a=this._topIndex;a<e.itemCount-this._fixedItemCount&&n<r;a++){n+=this.$_getItemHeight(e,a+this._fixedItemCount),this._itemCount++,this._itemPoints.push(n)}this._fullItemCount=this._itemCount-(n>=r?1:0)}}else this._topIndex=0},i.prototype.$_updateScrollInfo=function(e,i,o){var r=this,n=function(t){return!1!==i.vscrollBar&&!d&&(r._topIndex>0||e.itemCount>r._itemCount+r._fixedItemCount||h>r._bodyBounds.height-t)},s=this._reqScrollBarWidth,a=this._reqScrollBarHeight,l=o?this._tableItemPoints:this._itemPoints,h=l[l.length-1],u=this._layoutsLength,c=i.fitStyle==t.GridFitStyle.EVEN_FILL,d=this.syncHeight();this._hscrolled=!1!==i.hscrollBar&&u>this._scrollWidth,this._vscrolled=n(0);var p="always"===i.hscrollBar||a>0&&this._hscrolled&&!c,f="always"===i.vscrollBar||s>0&&this._vscrolled;p!=f&&(p?(s>0&&!d&&(f=h>this._bodyBounds.height-a,this._hscrolled=u>this._scrollWidth-s),this._vscrolled=n(a)):(a>0&&!c&&(p=u>this._scrollWidth-s,this._vscrolled=n(a)),this._hscrolled=!1!==i.hscrollBar&&!c&&u>this._scrollWidth-s)),this._hscrollBar=p,this._vscrollBar=f,this._scrollBarWidth=f?s:0,this._scrollBarHeight=p?a:0,this._scrollWidth-=this._scrollBarWidth},i.prototype.$_recalcScrollInfo=function(t){this._scrollWidth+=this._scrollBarWidth,this._bodyBounds.height+=this._scrollBarHeight,this._gridBounds.height+=this._scrollBarHeight,this._clientRect.height+=this._scrollBarHeight,this.$_updateScrollInfo(t,t.displayOptions,!0),this._bodyBounds.height-=this._scrollBarHeight,this._gridBounds.height-=this._scrollBarHeight,this._clientRect.height-=this._scrollBarHeight},i.prototype.$_adjustVerticals=function(){var t=this._scrollBarHeight,e=this._itemPoints;if(t>0){this._leftContentBounds.height-=t,this._footBounds.y-=t,this._rowBarBounds.height-=t,this._sideContentBounds.height-=t,this._fixedContentBounds.height-=t,this._fixedFooterBounds.y-=t,this._fixedBodyBounds.height-=t,this._nonFixedBounds.height-=t,this._contentBounds.height-=t,this._footerBounds.y-=t,this._bodyBounds.height-=t,this._rightContentBounds.height-=t,this._rightFooterBounds.y-=t,this._rightBodyBounds.height-=t;for(var i=this.syncHeight()?1/0:this._bodyBounds.height;e[e.length-2]>i;)this._itemCount--,e.pop();var o=this._fullItemCount=Math.max(0,this._itemCount-(e[this._itemCount]>=i?1:0)),r=this._focusIndex?this._focusIndex.itemIndex:-1;if(r>=0&&o>0&&this._itemCount>o&&r>=this._topIndex+this._fixedItemCount+o){for(var n=this.grid,s=e[this._itemCount],a=0;s>i;)s-=e[++a];var l=n._prevTop+1!==this._topIndex;if(a>0&&"mousedown"!==n._eventFrom){var h=n.topIndexChanging(this._topIndex,a,!!this._focusIndex,!0);null==h||isNaN(h)||(a=h),e.splice(0,a),this._topIndex+=a,this._itemCount-=a,this._fullItemCount-=a,s=e[0];for(var u=0;u<e.length;u++)e[u]-=s;if(s=e[e.length-1],n.itemCount<this._topIndex+this._fixedItemCount+this._itemCount)this._itemCount--;else for(;s<i&&this._topIndex+this._fixedItemCount+this._itemCount<n.itemCount;)e.push(s+=this.$_getItemHeight(n,this._topIndex+this._fixedItemCount+this._itemCount)),this._itemCount++,this._fullItemCount++;l&&(this._topIndex,this._fixedItemCount,this._fullItemCount)}}}if(this._dataBounds.height=e[e.length-1],this._fullItemCount==this._itemCount){var c=e[e.length-1];this._rowBarBounds.height=c}},i.prototype.$_adjustHorizontals=function(t){this._rightContentBounds.x-=this._scrollBarWidth,this.$_calcLeftPos();var e=this._cellPoints,i=e.length,o=this._leftPos,r=o+this._nonFixedBounds.width;this._startCell=this._endCell=this._firstCell;for(var n=0;n<i;n++)if(e[n]>o){this._startCell+=n-1;break}for(n=i-2;n>=0;n--)if(e[n]<r){this._endCell+=n;break}},i.prototype.$_calcTableRowPoints=function(){var t,e,i=this._trs,o=this._items,r=this._fixedItemCount,n=this._itemCount+r,s=this._fixedTableRowPoints=[],a=this._tableRowPoints=[],l=this._dataRowHeights,h=0;if(this._fixedTableRowCount=this._tableRowCount=0,this._fixedDataHeight=this._dataHeight=0,r>0){for(var u=this._fixedItemPoints;h<r;h++){var c=u[h];if(t=o[h],s.push(c),this._fixedTableRowCount++,t.isData){e=t.heights||l;for(var d=Math.floor((u[h+1]-c)/i),p=Math.round(u[h+1]-c)/i,f=1;f<i;f++)s.push(c+=e[f-1]?e[f-1]:f%2?d:p),this._fixedTableRowCount++}}s.push(this._fixedDataHeight=this._fixedItemPoints[r])}if(this.itemCount>0){for(u=this._itemPoints;h<n;h++){c=u[h-r],d=u[h-r+1]-c;if(t=o[h],a.push(c),this._tableRowCount++,t.isData){e=t.heights||l;var _=Math.floor(d/i);for(p=Math.round(d/i),f=1;f<i;f++)a.push(c+=e[f-1]?e[f-1]:f%2?_:p),this._tableRowCount++}}a.push(this._dataHeight=u[this._itemCount]),this._dataHeight+=this._fixedDataHeight}},i.prototype._doMeasure=function(t,e,i){var o=this,r=this._grid,n=r.displayOptions,s=r.fixedOptions,a=t.clone();this._refreshMode=n.refreshMode,this._autoRowHeights=n.rowHeight<0,this._items=[],this._trs=this._cellLayouts.dataRows,this._rowGrouped=this.rowGrouped||this.mergedRowGrouped,this._hscrolled=this._vscrolled=!1,this._hscrollBar=this._vscrollBar=!1,this._reqScrollBarWidth=e,this._reqScrollBarHeight=i,this._minRowHeight=n.minTableRowHeight,this._maxHeight=n.maxRowHeight,this._minItemHeight=Math.max(this._minRowHeight*this._trs,n.minRowHeight),1==this._trs&&(this._minRowHeight=this.minItemHeight),r.heightMeasurer.measure(r),this.$_calcFixedCellPoints(s,this._cellLayouts),this.$_calcCellPoints(this._cellLayouts),this.$_calcRightCellPoints(s,this._cellLayouts),this._itemHeight=this._calcDefaultRowHeight(r);var l=r.container._containerDiv;!this.syncHeight()&&this._oldSyncHeight&&this._oldSyncHeight!==r.displayOptions.syncGridHeight&&l.style.height!==r.container._orgCssHeight&&(l.style.height=r.container._orgCssHeight),o._topContentBounds=a.clone(),o.$_measureTopPane(r),a.topBy(o.topPanelVisible?o._topContentBounds.height:0),o._leftContentBounds=a.clone(),o.$_measureLeftPane(r),a.leftBy(o._leftContentBounds.width),o._sideContentBounds=a.clone(),o._measureSidePane(r),a.leftBy(o._sideContentBounds.width),o.$_measureViewHeights(r,a.clone().move()),o._fixedContentBounds=a.clone(),o.$_measureFixedPane(r),a.leftBy(o._fixedContentBounds.width),o._rightContentBounds=a.clone(),o.$_measureRightPane(r),o._rightContentBounds.x=a.right-o._rightContentBounds.width,a.width-=o._rightContentBounds.width,o._contentBounds=a.clone(),o.$_measureContentPane(r),o._clientRect=t.clone(),o._nonFixedBounds=new ot(o._fixedContentBounds.right,o._fixedContentBounds.y,t.width-o._fixedContentBounds.right-o.rightContentBounds.width,o._fixedContentBounds.height),this._itemsBounds=t.height-this._topContentBounds.height-this._headerBounds.height-this._filterPanelBounds.height-this._summaryBounds.height-this._footBounds.height+1,this.$_calcItemPoints(),this.$_calcScrollWidth(t),this.$_updateScrollInfo(r,n);var h=this._fitStyle;(this._fitStyle=this.$_checkFitting(n,this._scrollWidth))?(this.$_fitColumns(n,this.cellLayouts,this.scrollWidth),this._contentBounds.width=this._layoutsLength):r._activeCellLayout.$_clearFitWidths(),(this._fitStyleChanged=this._fitStyle!=h)&&r.clearRowHeights(!1),this.$_adjustVerticals(),this.$_adjustHorizontals(t),this._gridBounds=new ot(this._fixedContentBounds.x,this._fixedContentBounds.y,t.right-this._fixedContentBounds.x-this._scrollBarWidth,this._footerBounds.y-0),this._clientRect.width-=this._scrollBarWidth,this._clientRect.height-=this._scrollBarHeight,this._nonFixedBounds.width-=this._scrollBarWidth,this._topContentBounds.width-=this._scrollBarWidth},i.prototype.$_layoutTopPane=function(t,e){var i=this._topContentBounds;this.topPanelVisible?e.setRect(i):e.setBounds(-10,-10,1,1),this._doLayoutTopPane(t,e)},i.prototype._doLayoutTopPane=function(t,e){},i.prototype.$_layoutLeftPane=function(t,e){var i=this._leftContentBounds;function o(t,e,i,o){(t.visible=e.visible)&&(t._table.parentElement!==t._dom&&t._dom.appendChild(t._table),i&&(t.setRect(o),t.layoutContent(this)))}(t.rowBarContainer.visible=e.visible=!i.isEmpty)?(e.setRect(i),o.call(this,t.headView,t.header,!1,this._headBounds),o.call(this,t.sumView,t.headerSummaries,!0,this._sumBounds),o.call(this,t.footView,t.footers,!0,this._footBounds),o.call(this,t.filterView,t.filterPanel,!0,this._filterBounds)):[t.headView,t.sumView,t.footView,t.filterView].forEach((function(t){t&&Rt.detach(t._table)}))},i.prototype._layoutSidePane=function(t,e){var i=this._sideContentBounds;e.setRect(i),(e.visible=!i.isEmpty)&&e.layoutContent(this,i.width,i.height)},i.prototype._prepareItems=function(t){for(var e=this._topIndex+this._fixedItemCount,i=0;i<this._fixedItemCount;i++){var o=this._rs.getItem(i);this._items.push(o)}var r=this.grid.bodyView,n=t?r._getTableRowCount(this):this._itemCount;for(i=0;i<n;i++){if(!(o=this._rs.getItem(i+e)))break;this._items.push(o)}t&&(this._itemCount=this._items.length-this._fixedItemCount)},i.prototype.$_layoutFixedPane=function(t,e){var i,o=this._fixedContentBounds;if(e.visible=!o.isEmpty){var r=t._columnsDirty||t._cellLayoutDirty||t._needPosition,n=r||t._dataChanged||t._itemCheckChanged;e.setRect(o),((i=t.fixedHeaderView).visible=t.header.visible)&&(i.setRect(this._fixedHeaderBounds),i.layoutContent(this)),((i=t.fixedHeaderSummaryView).visible=t.headerSummaries.canShow)&&(n||t.headerSummaries.dirty)&&(i.setRect(this._fixedSummaryBounds),i.layoutContent(this)),((i=t.fixedFilterView).visible=t.filterPanel.visible)&&(r||t.filterPanel.dirty)&&(i.setRect(this._fixedFilterBounds),i.layoutContent(this)),((i=t.fixedFooterView).visible=t.footers.canShow)&&(n||t.footers.dirty)&&(i.setRect(this._fixedFooterBounds),i.layoutContent(this)),(i=t.fixedBodyView).visible=!0,e.layoutContent(this,o.width,o.height)}else t.fixedHeaderView.visible=!1,t.fixedHeaderSummaryView.visible=!1,t.fixedFilterView.visible=!1,t.fixedFooterView.visible=!1,t.fixedBodyView.visible=!1},i.prototype.$_layoutRightPane=function(t,e){var i,o=this._rightContentBounds,r=t._columnsDirty||t._cellLayoutDirty||t._needPosition,n=r||t._dataChanged||t._itemCheckChanged;(e.visible=!o.isEmpty)?(this._rightFixed||this._hscrolled||(o.x=this._contentBounds.right),e.setRect(o),((i=t.rightHeaderView).visible=t.header.visible)&&(i.setRect(this._rightHeaderBounds),i.layoutContent(this)),((i=t.rightHeaderSummaryView).visible=t.headerSummaries.canShow)&&(n||t.headerSummaries.dirty)&&(i.setRect(this._rightSummaryBounds),i.layoutContent(this)),((i=t.rightFilterView).visible=t.filterPanel.visible)&&(r||t.filterPanel.dirty)&&(i.setRect(this._rightFilterBounds),i.layoutContent(this)),((i=t.rightFooterView).visible=t.footers.canShow)&&(n||t.footers.dirty)&&(i.setRect(this._rightFooterBounds),i.layoutContent(this)),(i=t.rightBodyView).visible=!0,e.layoutContent(this,o.width,o.height)):(t.rightHeaderView.visible=!1,t.rightHeaderSummaryView.visible=!1,t.rightFilterView.visible=!1,t.rightFooterView.visible=!1,t.rightBodyView.visible=!1)},i.prototype.$_layoutContentPane=function(t,e){var i,o=this._contentBounds,r=t._columnsDirty||t._cellLayoutDirty||t._needPosition,n=r||t._dataChanged||t._itemCheckChanged;(e.visible=!o.isEmpty)?(o.x-=this._leftPos,e.setRect(o),((i=t.headerView).visible=t.header.visible)&&(this._headerBounds.width=o.width,i.setRect(this._headerBounds),i.layoutContent(this)),((i=t.filterPanelView).visible=t.filterPanel.visible)&&(r||t.filterPanel.dirty)&&(this._filterPanelBounds.width=o.width,i.setRect(this._filterPanelBounds),i.layoutContent(this)),((i=t.headerSummaryView).visible=t.headerSummaries.canShow)&&(n||t.headerSummaries.dirty)&&(this._summaryBounds.width=o.width,i.setRect(this._summaryBounds),i.layoutContent(this)),((i=t.footerView).visible=t.footers.canShow)&&(n||t.footers.dirty)&&(this._footerBounds.width=o.width,i.setRect(this._footerBounds),i.layoutContent(this)),(i=t.bodyView).visible=!0,this._bodyBounds.width=o.width,e.layoutContent(this,o.width,o.height)):t.headerView.visible=t.headerSummaryView.visible=t.footerView.visible=t.bodyView.visible=!1},i.prototype.$_layoutWatingPane=function(t,e){var i=t.bounds.clone();e.setRect(i),e.layoutContent(this,i.width,i.height)},i.prototype._doLayout=function(t,e){var i;this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),i=t._topContentPane,this.$_layoutTopPane(t,i),i=t._leftContentPane,this.$_layoutLeftPane(t,i),i=t._fixedContentPane,this.$_layoutFixedPane(t,i),i=t._rightContentPane,this.$_layoutRightPane(t,i),i=t._contentPane,this.$_layoutContentPane(t,i)},i.prototype.$_adjustHeader=function(t,e,i,o){var r=this;if(!this._fitHeader)return 0;var n,s=t.fixedHeaderView,a=t.rightHeaderView,l=t.headerView,h=l.height;this._fitHeader=!1;for(var u=[],c=0,d=[{visible:i,bounds:this._fixedHeaderBounds,view:s},{visible:o,bounds:this._rightHeaderBounds,view:a},{visible:e,bounds:this._headerBounds,view:l}],p=0;p<d.length;p++){var f=d[p],_=f.visible,g=f.view;_&&g.getHeights(u,this._paddingHeight)}if((c=u.reduce((function(t,e){return t+e}),0))<t.header.minHeight){var y=(t.header.minHeight-c)/u.length;u.reduce((function(t,e,i){var o=u[i]+y;return u[i]=Math.round(t+o),o-u[i]}),0),c=u.reduce((function(t,e){return t+e}),0)}return n=c-h,this._headBounds.height=c,t.header.setCalcHeights(u.slice(),!0),d.forEach((function(t){var e=t.visible,i=t.view,o=t.bounds;e&&(o.height=c,i.setRect(o),i.layoutContent(r))})),n},i.prototype._adjustLayout=function(e,i,o){void 0===o&&(o=!1);var r,n=this._autoRowHeights,s=e._fixedContentPane,a=e._rightContentPane,l=e._contentPane,h=e.fixedHeaderView,u=e.rightHeaderView,c=e.headerView,d=e.headView.visible,p=s.visible,f=a.visible,_=l.visible,g=0,y=0,m=this.$_adjustHeader(e,_,p&&c.visible&&h.visible,f&&u.visible);if(0!=m&&(y=this._fixedFilterBounds.y=this._rightFilterBounds.y=this._filterPanelBounds.y=this._filterBounds.y+=m,p&&(e.fixedFilterView.y=y),f&&(e.rightFilterView.y=y),_&&(e.filterPanelView.y=y),d&&(e.filterView.y=y)),0!=m&&(this._fixedSummaryBounds.y=this._rightSummaryBounds.y=this.summaryBounds.y=this._sumBounds.y=this._filterBounds.bottom),e.headerSummaries.canShow&&0!=m&&(p&&(e.fixedHeaderSummaryView.y=this._fixedSummaryBounds.y),f&&(e.rightHeaderSummaryView.y=this._rightSummaryBounds.y),_&&(e.headerSummaryView.y=this._summaryBounds.y),d&&(e.sumView.y=this._sumBounds.y)),i.topBy(this._headBounds.height+this._sumBounds.height+this._filterBounds.height),0!=m&&(y=this._sumBounds.bottom,g=Math.min(i.height,this._rowBarBounds.height),this._fixedBodyBounds.y=this.bodyBounds.y=this._rightBodyBounds.y=y,this._fixedBodyBounds.height=this._bodyBounds.height=this._rightBodyBounds.height=g,this._dataBounds.y=y),(r=e.fixedBodyView).visible&&r.setRect(this._fixedBodyBounds),(r=e.bodyView).visible&&r.setRect(this._bodyBounds),(r=e.rightBodyView).visible&&r.setRect(this._rightBodyBounds),this.$_layoutBodyRows(e,p,_,f,this._bodyBounds.height,!0,o),this.$_adjustTableRowHeights(),(n||m)&&this.$_recalcScrollInfo(e),this.syncHeight()){var b=this.topContentBounds.height+this.headerBounds.height+this.footerBounds.height+this.summaryBounds.height+this.scrollBarHeight+this._filterBounds.height,v=e.container._containerDom,w=e.container._containerDiv,C=v.offsetWidth-v.clientWidth,x=w.offsetHeight,I=this._tableItemPoints[this._tableItemPoints.length-1];(this._fitSyncHeight=this.itemCount>0&&(b+I+C>=x||e.displayOptions.syncGridHeight===t.SyncGridHeight.ALWAYS))?w.style.height=b+I+C+"px":(e.recallHeight(),I=x-b-C+(this.topPanelVisible?0:1));var S=new ot(0,0,v.clientWidth,v.clientHeight);e.setRect(S),this._topContentBounds.width=S.width,this.$_layoutTopPane(e,this.grid._topContentPane),this._bodyBounds.height=this._fixedBodyBounds.height=this._rightBodyBounds.height=I,e.bodyView.setRect(this._bodyBounds),e.fixedBodyView.setRect(this._fixedBodyBounds),e.rightBodyView.setRect(this._rightBodyBounds),this._contentBounds.height=this._fixedContentBounds.height=this._rightContentBounds.height=this._headerBounds.height+this._summaryBounds.height+this._bodyBounds.height+this._footerBounds.height+this._filterBounds.height,this._contentBounds.x=this._leftContentBounds.width+this._sideContentBounds.width+this._fixedContentBounds.width,this.$_layoutContentPane(e,e._contentPane),this.$_layoutFixedPane(e,e._fixedContentPane),this.$_layoutRightPane(e,e._rightContentPane),this._gridBounds.height=this._headerBounds.height+this._summaryBounds.height+this._bodyBounds.height+this._filterBounds.height,this._footBounds.y=this._footerBounds.y=this._fixedFooterBounds.y=this._rightFooterBounds.y=this._bodyBounds.bottom,e.footView.y=e.footerView.y=e.fixedFooterView.y=e.rightFooterView.y=this._bodyBounds.bottom,i=this._gridBounds.clone()}else this._fitSyncHeight=!1;if(this._topIndex>0){var E=n?this._minItemHeight:this._itemHeight;if(this._contentBounds.y+this._dataBounds.bottom+E<=this._gridBounds.bottom&&(n?this.$_fillBottomAuto(e,p,_,f,this._bodyBounds.height):this.$_fillBottomFixed(e,p,_,f,this._bodyBounds.height)),0==this._topIndex){var O=this._vscrollBar;this.$_recalcScrollInfo(e),this._vscrollBar!=O&&this._fitStyle&&(this.$_layoutBodyRows(e,p,_,f,this._bodyBounds.height,!1),this.$_adjustTableRowHeights())}}e.fixedBodyView.visible&&e.fixedBodyView.$_resetCellHeights2(this,n),e.bodyView.visible&&e.bodyView.$_resetCellHeights2(this,n),e.rightBodyView.visible&&e.rightBodyView.$_resetCellHeights2(this,n);var R=this._tableItemPoints;(this._dataBounds.height=R[R.length-1],y=this._sumBounds.bottom,g=Math.min(i.height,this._dataBounds.height),this._rowBarBounds.y=y,this._rowBarBounds.height=g,p)&&e._fixedContentPane.layoutBars(this,this._fixedContentBounds.width,this._fixedContentBounds.height);f&&e._rightContentPane.layoutBars(this,this._rightContentBounds.width,this._rightContentBounds.height);(r=e.headView).visible&&(r.setRect(this._headBounds),r.layoutContent(this)),(r=e.rowBarContainer).visible&&(r.setRect(this._rowBarBounds),r.layoutContent(this))},i.prototype.$_layoutBodyRows=function(t,e,i,o,r,n,s){void 0===n&&(n=!0),void 0===s&&(s=!1);var a=this,l=e&&this._fixedCellCount>0?t.fixedBodyView:null,h=i&&this.cellCount>0?t.bodyView:null,u=(o&&this._rightCellCount)>0?t.rightBodyView:null,c=[l,h,u];function d(t,e,i,o){a._items.push(t),c.forEach((function(r,n){r&&r.layoutRow(e,v[n],i,o,t,s)}))}function p(e,i,o,r){var n=e.height,s=[];if(!t.displayOptions.refCalcHeights||isNaN(n)){for(var a=0;a<E;a++)s[a]=0;c.forEach((function(e){for(var i=e&&e._tbody.children,r=0;i&&r<E;r++)s[r]=Math.ceil(Math.max(s[r],S,i[o+r].offsetHeight+t.displayOptions.rowHeightPadding))})),e.heights=s}else if(e.heights)s=e.heights;else{var l=0,h=0;for(a=0;a<E;a++)l+=h=a%2?Math.floor(n/E):Math.round(n/E),s.push(h);s.push(C-l)}n=0;var u=s.reduce((function(t,e){return t+e}),0)+3;if(u>O){var d=O/u;u=O;for(var p=0;p<s.length-1;p++)u-=s[p]=Math.max(S,Math.floor(s[p]*d));s[s.length-1]=Math.max(S,u)}for(p=0;p<E;p++)n+=s[p],r.push(i+=s[p]);return g.setRowHeight(e,n,!1),c.forEach((function(t){t&&t.setRowViewHeight(e,i-n)})),n}var f,_=this._dataRowHeights;if(n&&this.$_checkColumnMerging(t,this.syncHeight()),f=h||l||u){var g=t.itemSource,y=g?Math.min(g.fixedCount,g.itemCount):0,m=this._autoRowHeights,b={lm:this,grid:t,topIndex:this._topIndex,fixedItemCount:y,mergeFixed:t.fixedOptions.mergeRows,mergedRowGrouped:this.mergedRowGrouped,rowGroupFields:this.rowGroupFields},v=[[],[],[]];c.forEach((function(t){t&&t._doPrepareContent(a)})),r=this.syncHeight()?1/0:r;var w,C,x,I,S=this._minRowHeight,E=f._trs,O=this._maxHeight>0?Math.min(Math.max(this._maxHeight,S*E),r):r,R=Math.floor(c.reduce((function(t,e){return e?Math.max(e.tableRowCount,t):t}),0)/E),P=0,k=0,T=0,D=[],M=[],F=[];this._fixedTableRowCount=0,this._tableRowCount=0,this._fixedDataHeight=this._dataHeight=0,this._items=[];var L=Math.min(y,this._fixedItemCount,Math.ceil(r/S));if(this._fixedHeight=0,y>0){D.push(k),M.push(T);for(var N=P,$=0;$<L;$++)d(g.getItem($),b,$,N),N+=E;for($=0;$<y&&k<r;$++){I=g.getItem($);var A=E;if(this._items.indexOf(I)<0&&d(I,b,$,P),m)T+=C=p(I,T,P,M);else{w=T,C=this._fixedItemPoints[$+1]-this._fixedItemPoints[$],x=Math.floor(C/A);for(var V=Math.round(C/A),B=I.heights||_,j=0;j<A-1;j++)M.push(T+=B[j]?B[j]:j%2?V:x);M.push(T=w+C)}this._fixedTableRowCount+=A,k+=C,D.push(k),this._fixedDataHeight=k,P+=A}this._fixedHeight=k,k<r&&(C=0,c.forEach((function(t){t&&(C=t.layoutFixedBar(a,P))})),P++,k+=C,T+=C),R=R-this._fixedItemCount-1}this._fixedItemCount=D.length?D.length-1:0;var H=t.itemCount-this._fixedItemCount,G=[k];if(F.push(k),L=Math.min(H,R,Math.ceil((r-k)/S)),this._itemCount=0,this._fullItemCount=0,H>0&&k<r){var W=this._topIndex,U=-1;this._focusIndex&&(U=this._focusIndex.itemIndex)>=this._fixedItemCount&&U<W+this._fixedItemCount&&(W=this._topIndex=U-this._fixedItemCount);for(N=P,$=0;$<L&&$+W<H&&(I=g.getItem($+W+y));$++)d(I,b,this._fixedItemCount+$,N),N+=I.isData?E:1;for($=W;$<H&&k<r;$++){A=(I=g.getItem($+y)).isData?E:1;if(this._items.indexOf(I)<0&&d(I,b,this._fixedItemCount+$-W,P),I.isData)if(m)T+=C=p(I,T,P,F);else{w=T,C=this._itemPoints[$-W+1]-this._itemPoints[$-W],x=Math.floor(C/A);for(V=Math.round(C/A),B=I.heights||_,j=0;j<A-1;j++)F.push(T+=B[j]?B[j]:j%2?V:x);F.push(T=w+C)}else C=this._itemPoints[$-W+1]-this._itemPoints[$-W],F.push(T+=C);this._tableRowCount+=A,k+=C,G.push(k),this._itemCount++,this._dataHeight=k,P+=A}this._fullItemCount=this._itemCount-(k>r?1:0)}m&&c.forEach((function(t){t&&t.$_resetHeights(M,F)})),Rt.ieOld&&c.forEach((function(t){t&&t.$_resetCellStyleHeights(M,F)})),this._fixedItemPoints=D,this._itemPoints=G,this._fixedTableRowPoints=M,this._tableRowPoints=F,this._dataBounds.height=G[G.length-1];var Y=this._items.length=this.fixedItemCount+this._itemCount;c.forEach((function(t){t&&t.cleanRows(Y,P)}))}},i.prototype.$_adjustTableRowHeights=function(){if(this.fixedItemCount+this._itemCount!=0){for(var t=this._items,e=this._trs,i=this._fixedTableRowPoints,o=this._fixedTableItemPoints=[0],r=0,n=1,s=this._fixedItemCount;n<=s;n++,r++)o.push(i[n*e]);i=this._tableRowPoints,o=this._tableItemPoints=[i[0]];n=0;var a=0;for(s=this._itemCount;n<s;n++,r++)t[r].isData?o.push(i[a+=e]):o.push(i[++a])}else this._tableItemPoints=this._tableRowPoints.slice()},i.prototype.$_fillBottomFixed=function(t,e,i,o,r){for(var n=this._dataBounds.height,s=this._topIndex,a=0;(n+=this.$_getItemHeight(this.grid,s--))<this._bodyBounds.height&&s>=0;)a++;this._topIndex=Math.max(0,this._topIndex-a),this.$_calcItemPoints(!1),this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),this.$_layoutBodyRows(t,e,i,o,r),this.$_adjustTableRowHeights()},i.prototype.$_fillBottomAuto=function(t,e,i,o,r){for(;this._topIndex>0&&this._gridBounds.bottom-this._contentBounds.y-this._dataBounds.bottom>this._minItemHeight;){var n=this._tableItemPoints,s=n[1]-n[0];if(this._topIndex--,this.$_calcItemPoints(!1),this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),this.$_layoutBodyRows(t,e,i,o,r),this.$_adjustTableRowHeights(),s+(n=this._tableItemPoints)[n.length-1]+this._contentBounds.y+this._dataBounds.y>this._gridBounds.bottom){this._topIndex++,this.$_calcItemPoints(),this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),this.$_layoutBodyRows(t,e,i,o,r),this.$_adjustTableRowHeights();break}}},i.prototype.$_prepareColumnMerges=function(t,e,i,o){for(var r=this._fixedItemCount,n=this._itemCount,s=!1,a=0,l=t.length;a<l;a++){var h=t[a],u=h&&h.layout;if(u&&u.canMerge())(c=u.merges)||((c=new Kn(u)).clear(),c.initialize(Bn.INIT_COUNT)),c.refreshRooms(e,i,o),c.prepareCells(r,n),c.refreshCells(r,this.topIndex),u.$_setMerged(!0),s=!0;else u.$_setMerged(!1)}var c,d=this.grid.checkBar;d.canMerge()?((c=d.merges)||((c=new pa(d)).clear(),c.initialize(Bn.INIT_COUNT)),c.refreshRooms(e,i,o),c.prepareCells(r,n),c.refreshCells(r,this.topIndex),d._merged=!0):d._merged=!1;return s},i.prototype.$_checkColumnMerging=function(t,e){void 0===e&&(e=!1);var i=t.fixedOptions,o=i.rowCount,r=this._contentBounds.height/this._minItemHeight-o,n=this._topIndex,s=o>0&&i.mergeRows,a=e?o:o+n,l=e?t.itemCount-1:Math.min(t.itemCount-1,o+n+r-1);l>=0&&this.$_prepareColumnMerges(t.getHorzColumns(),a,l,s)},i}(Lt),Ql=function(t){function e(e){var i=t.call(this,e)||this;return i.summaryIndex=0,i.rowIndex=-1,i.rendererClass="",i.style=new Zn,i.html=void 0,i.text=e[Rt.TextProp],i}return o(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.layout=null,this.renderCallback=null},e.prototype.span=function(){this.spanned=!0,this.clear(!1)},e.prototype.clear=function(e){t.prototype.clear.call(this,e);var i=this.cell.firstElementChild;return this.className&&(this.cell.className=this.className=""),this.rendererClass&&(i.className=this.rendererClass=""),this.text&&(i[Rt.TextProp]=this.text=""),this.html&&(i.innerHTML=this.html="",this.renderCallback=null),this},e.prototype.refreshFormatters=function(t){var e;this.textFormatter=null,this.numberFormatter=null,this.datetimeWriter=null,this.booleanFormatter=null,(e=t.textFormat)&&(this.textFormatter=Vn.getFormatter(e)),(e=t.numberFormat)&&(this.numberFormatter=qe.getFormatter(e)),(e=t.datetimeFormat)&&(this.datetimeWriter=Ge.getFormatter(e)),(e=t.booleanFormat)&&(this.booleanFormatter=We.getFormatter(e)),this.prefix=t.prefix,this.suffix=t.suffix,this.text=t.text},e.prototype.setText=function(t){t!==this.displayText&&(this.cell.firstElementChild[Rt.TextProp]=(this.displayText=t)||"",this.renderCallback=null)},e.prototype.setHtml=function(t,e){if(t!==this.html){var i=this.cell.firstElementChild;return i.innerHTML=(this.html=t)||"",this.renderCallback=e&&dn(i,e),!0}},e.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},e.prototype.setRendererClassName=function(t){t!=this.rendererClass&&(this.cell.firstElementChild.className=this.rendererClass=t)},e}(Gl),th=function(t){function e(e,i,o){var r=t.call(this,e,i,o)||this;return r._rowPoints=[],r._cells=[],r}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.tableCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var r=i[o];if(r&&r.cell===t)return r}return null},e.prototype.tableCellsByLayout=function(t){for(var e=[],i=0;i<this._cells.length;i++)for(var o=this._cells[i],r=0;r<o.length;r++){var n=o[r];n&&n.layout===t&&e.push(n)}return e},e.prototype.layoutByCell=function(t){var e=this.tableCellByCell(t);return e&&e.layout},e.prototype.columnByCell=function(t){var e=this.layoutByCell(t);return e&&e._columnObj},e.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},e.prototype._doDrawCell=function(t,e,i){},e.prototype._doRender=function(t){},e.prototype._getStartCell=function(t){return t.getStartCell()},e.prototype._getEndCell=function(t){return t.getEndCell()},e.prototype._prepareCellContent=function(t,e){return St(t).createElement("div")},e.prototype._doMeasure=function(t,e,i){for(var o=t.layoutManager,r=this._getSummaryRows(o),n=this._getCollection(),s=this._getSummaryHeight(t.heightMeasurer),a=0,l=this._rowPoints=[a],h=0,u=t.layoutManager.getDataRowHeights(r),c=u.reduce((function(t,e){return t+e}),0),d=0,p=n.visibleCount;d<p;d++){var f=n.getVisible(d),_=Math.max(c,f.height);_<=0&&(_=s*r),_=Math.max(f.minHeight,_);var g=f.heights;if(g&&g.length>0){for(var y=0;y<r;y++)g[y]=isNaN(g[y])||null==g?s:g[y];_=g.reduce((function(t,e){return t+e}),0)}for(var m=Math.floor(_/r),b=0,v=0;v<r-1;v++)g&&g.length>0?(a+=g[v],l.push(a),b+=g[v]):u[v]?(a+=Math.round(u[v]*(_/c)),l.push(a),b+=Math.round(u[v]*(_/c))):(a+=m,l.push(a),b+=m);a+=_-b,l.push(a),h+=_}return wl.create(e,h)},e.prototype.$_refreshHeadTitle=function(t,e){for(var i=this._cells[0],o=e.children[0],r=0;o&&r<i.length;r++){var n=i[r].layout.source,s=o.children[r];s&&n&&(s[Rt.TextProp]=(n.header.getDisplayText()||n.firstColumn.header.displayText)+" summary")}},e.prototype._doLayoutContent=function(t){var e=t.grid,i=this._getCollection(),o=this._getSummaryCount(t),r=t.cellLayouts._dataCells,n=r.length,s=this._getFirstCell(t),a=this._getStartCell(t)-s,l=this._getEndCell(t)-s;this._refreshCells(t,o,r,this._tbody),this.$_refreshSpans(t,n*o),this.$_refreshHeadTitle(t,this._thead);for(var h=0;h<o;h++)for(var u=i.getVisible(h),c=0;c<n;c++){var d=this._cells[h*n+c],p=this._getTableRow(t,h*n+c);Rt.setClassName(p,u.styleName||"");for(var f=a;f<=l;f++){var _=d[f];if(_.visible){var g=_.layout;if(g.isProxy)_.setText(""),_.setClassName(u.getCellStyleName());else if(g instanceof vs)_.setText(""),_.setClassName(u.getCellStyleName());else{var y=u.getCell(g);this._updateCell(e,u,y,_)}}}}},e.prototype._updateCell=function(t,e,i,o){var r=i,n=r.getSummary(),s=e.getCellStyle(i,o.style.clear());if(o.setClassName(s.styleName),o.setRendererClassName(this._getRendererStyle()),o.refreshFormatters(s),n){e.getCellFormatters(n,o);var a=r.getTemplate(o),l=n.templateEvents;if(void 0===a)o.setText(r.getDisplayText(o));else{var h=o.setHtml(a,l);o.renderCallback&&o.renderCallback.forEach((function(i){i.callback.call(null,t.handler,r.valueColumn,n.summaryIndex,e,i.elt,h)}))}}else o.setText("")},e.prototype._getTableRowHeight=function(t,e){return this._rowPoints[e+1]-this._rowPoints[e]},e.prototype._refreshCells=function(t,e,i,o){for(var r=this._cells,n=o.children,s=n.length,a=i.length,l=this._getFirstCell(t),h=this._getLastCell(t)-l+1,u=r.length;u<s;u++)r.push([]);u=0;for(var c=0;u<e&&c<s;u++)for(var d=this.model.getVisible(u).childIndex,p=0;p<a;p++){for(var f=r[c],_=n[c].children,g=i[p],y=0;y<h;y++){var m=g[y+l],b=f[y];b?b.cell!==_[y]||b.layout!=m&&(b.layout=m,b.clear(!0)):(b=f[y]=new Ql(_[y])).layout=m,b.spanned=!1,b.summaryIndex=d,b.rowIndex=c}c++;for(y=h;y<f.length;y++)f[y].dispose();f.length=h}for(c=s;c<r.length;c++){var v=r[c];for(y=0;y<v.length;y++)v[y].dispose(),v[y]=null}r.length=s},e.prototype.$_refreshSpans=function(t,e){for(var i=this._getFirstCell(t),o=this._getFirstCell(t)-i,r=this._getLastCell(t)-i,n=t.cellLayouts._dataCells.length,s=this._rowPoints,a=0;a<e;a++)for(var l=this._cells[a],h=l.length,u=o;u<=r;u++){var c=l[u],d=c.layout,p=d.parent,f=p&&p.vertical;if(c.spanned);else if(d.isProxy)c.clear(!1);else{var _=0,g=0,y=this._getSpanOf(d,c.summaryIndex)-1,m=this._getUserSpanOf(d,c.summaryIndex);if(m){var b=m.footerCount||0,v=b>0?b*e:m.rowspan||1,w=m.colspan||1;c.set(w,v,!0);for(var C=0;C<v;C++)for(var x=0;x<w;x++){var I=this._cells[C+a]&&this._cells[C+a][x+u];I&&I!==c&&I.span()}}if(!m&&y>0){var S=0,E=d.vindex+1;if(f)for(;S++<y&&S<n;){if(!(O=p.getVisible(E++)))break;g+=O._dspan,this._cells[a+S][u].span()}else for(;S++<y&&u-o+S<h&&E<p.visibleCount;){var O;if(!(O=p.getVisible(E++)))break;_+=O._cspan,l[u+S].span()}}d.isNull&&c.clear(!0),!m&&c.set(d._cspan+_,d._dspan+g,!0),c.rowSpan>1&&(c.height=s[c.rowIndex+c.rowSpan]-s[c.rowIndex],c.cell.firstElementChild.style.maxHeight=c.height-2+"px")}}},e.prototype._doPrepareTableRow=function(e,i,o,r){t.prototype._doPrepareTableRow.call(this,e,i,o,r)},e}(Rl),eh=function(t){function e(e,i){return t.call(this,e,i,"footerView")||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-footer"},e.prototype._getRendererStyle=function(){return"rg-footer-renderer"},e.prototype._getSummaryRows=function(t){return t.dataRows},e.prototype._getCollection=function(){return this.model},e.prototype._getSummaryHeight=function(t){return t.footerHeight},e.prototype._getSummaryCount=function(t){return t.footerCount},e.prototype._getSpanOf=function(t,e){return t.getFooterSpan(e)},e.prototype._getUserSpanOf=function(t,e){return t.getFooterUserSpan(e)},e.prototype._getTableRowCount=function(t){return t.dataRows*t.footerCount},e.prototype._getSummaryItem=function(t,e){return t.firstColumn.footers.get(e)},e}(th),ih=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-footer"},e.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype._getCellCount=function(t){return t.fixedCellCount},e.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},e}(eh),oh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-footer"},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype._getCellCount=function(t){return t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},e}(eh),rh=function(t,e){return"object"==typeof t&&Object.prototype.toString.call(t).indexOf(e)>=0},nh=function(t){function e(e,i){var o=t.call(this)||this;return o._active=!1,o._completed=!1,o._dragging=!1,o._currentX=0,o._currentY=0,o._container=e,o._name=i,o}return o(e,t),Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dragging",{get:function(){return this._dragging},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startWhenCreated",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completed",{get:function(){return this._completed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linkable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clickable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollable",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.activate=function(){this._active||(this._doActivate(),this._active=!0)},e.prototype.deactivate=function(){this._active&&(this.cancel(),this._doDeactivate(),this._active=!1)},e.prototype.start=function(t,e,i,o){return void 0===o&&(o=null),this.cancel(),!(!this._active||!this._doStart(t,e,i,o))&&(this._currentX=this._startX=e,this._currentY=this._startY=i,this._dragging=!0,this._completed=!1,this._showFeedback(e,i),!0)},e.prototype.drag=function(t,e,i,o){return!(!this._dragging||(this._currentX=e,this._currentY=i,!this._doDrag(t,e,i,o)))&&(this._moveFeedback(e,i),!0)},e.prototype.cancel=function(){try{if(this._dragging)try{this._dragging=!1,this._doCanceled(this._currentX,this._currentY)}finally{this._doEnded()}}finally{this._hideFeedback()}},e.prototype.drop=function(t,e,i,o){try{if(this._dragging)try{this._currentX=e,this._currentY=i,this._dragging=!1,this._canAccept(t,e,i,o)?(this._doCompleted(t,e,i,o),this._completed=!0):this._doCanceled(e,i)}finally{this._doEnded()}}finally{this._hideFeedback()}},e.prototype.getRequest=function(){return null},e.prototype.getNextRequest=function(t,e){return null},e.prototype.init=function(t,e,i){this._doInit(t,e,i)},Object.defineProperty(e.prototype,"currentX",{get:function(){return this._currentX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentY",{get:function(){return this._currentY},enumerable:!1,configurable:!0}),e.prototype._showFeedback=function(t,e){},e.prototype._moveFeedback=function(t,e){},e.prototype._hideFeedback=function(){},e.prototype._doActivate=function(){},e.prototype._doDeactivate=function(){},e.prototype._doStart=function(t,e,i,o){return!0},e.prototype._doDrag=function(t,e,i,o){return!0},e.prototype._doCanceled=function(t,e){},e.prototype._canAccept=function(t,e,i,o){return!0},e.prototype._doCompleted=function(t,e,i,o){},e.prototype._doEnded=function(){},e.prototype._doInit=function(t,e,i){},e}(Lt);t.DataDropMode=void 0,(xl=t.DataDropMode||(t.DataDropMode={})).COPY="copy",xl.MOVE="move",t.DragFeedbackStyle=void 0,(Il=t.DragFeedbackStyle||(t.DragFeedbackStyle={})).LINE="line",Il.ROW="row",Il.CELL="cell",Il.GROUP="group";var sh,ah=function(e){function i(i){var o=e.call(this,i)||this;return o._dropMode=t.DataDropMode.COPY,o._feedbackStyle=t.DragFeedbackStyle.LINE,o._scroll=!0,o._cursor="move",o._dropOtherElement=!1,o._dropOtherGrid=!0,o.assignFrom(Xe.dataDrop),o}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"dragCallback",{get:function(){return this._dragCallback},set:function(t){this._dragCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"callback",{get:function(){return this._callback},set:function(t){this._callback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropMode",{get:function(){return this._dropMode},set:function(t){this._dropMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"feedbackStyle",{get:function(){return this._feedbackStyle},set:function(t){this._feedbackStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldMap",{get:function(){return this._fieldMap},set:function(t){this._fieldMap=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fieldMapCallback",{get:function(){return this._fieldMapCallback},set:function(t){this._fieldMapCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"proxyLabel",{get:function(){return this._proxyLabel||Ue.messages.dataDropProxyLabel},set:function(t){this._proxyLabel=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"labelCallback",{get:function(){return this._labelCallback},set:function(t){this._labelCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scroll",{get:function(){return this._scroll},set:function(t){this._scroll=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cursor",{get:function(){return this._cursor},set:function(t){this._cursor=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropOtherElement",{get:function(){return this._dropOtherElement},set:function(t){this._dropOtherElement=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropOtherGrid",{get:function(){return this._dropOtherGrid},set:function(t){this._dropOtherGrid=t},enumerable:!1,configurable:!0}),i.prototype.getEnabled=function(t,e,i,o,r,n){if(!this.dropOtherElement&&n||this.grid!==t&&!t.dataDropOptions.dropOtherGrid)return!1;var s=this._dragCallback;if(s)return!1!==s(t.handler,e,n||this.grid.handler,i.index,i.column);if(this.grid===t&&!n){var a=t.layoutManager;return(r-=a.contentBounds.y)<=a.footerBounds.y&&r>=a.summaryBounds.bottom}return!0},i.prototype.getLabel=function(e,i,o,r){var n=this._labelCallback,s=void 0;return n&&(s=n(e.handler,i,r||this.grid.handler,o.index,o.column)),void 0===s&&this.proxyLabel&&(s=(s=(s=(s=this.proxyLabel.replace("${rows}",i.length+"")).replace("${mode}",e==this.grid||this.dropMode==t.DataDropMode.MOVE?Ue.messages.dataDropModeMove:Ue.messages.dataDropModeCopy)).replace("${from}",i[0]+"")).replace("${to}",o.index+"")),s},i}(ml),lh=function(t){function e(e,i){var o=t.call(this,e.container,i)||this;return o._grid=e,o}return o(e,t),e.prototype._doDispose=function(){this._grid=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startWhenCreated",{get:function(){return!1},enumerable:!1,configurable:!0}),e}(nh),hh=function(t){function e(e,i){var o=t.call(this,e.layout.grid,"columnResizeTracker")||this;o._request=e,o._feedback=i;var r=e.layout;return o._layoutX=e.x-r.domWidth,o._offset=e.offset,o}return o(e,t),e.prototype._doDispose=function(){this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,e,i,o){var r=this.grid.layoutManager,n=r.contentBounds.y,s=r.contentBounds.bottom;return this._feedback.resize(2,s-n),this._feedback.move(e-this._offset,n),this.grid.addFeedbackElement(this._feedback),!0},e.prototype._doDrag=function(t,e,i,o){var r=this.grid.displayOptions.minCellWidth;return e>=this._layoutX+r&&e<this._layoutX+1e6&&(this._feedback.x=e,!0)},e.prototype._doCompleted=function(t,e,i,o){var r=this.grid.displayOptions.minCellWidth,n=Math.max(r,this._feedback.x-this._layoutX+this._offset);this._request.layout.changeCellWidth(n,this.grid.layoutManager.isColumnFitted)},e.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback),this.grid.container.setCursor("default")},e}(lh),uh=function(t){function e(e,i,o){var r=t.call(this,e.layout.grid,"columnMoveTracker")||this;return r._timer=null,r._colLoop=0,r._colPrevLoop=0,r._interval=0,r._request=e,r._layout=e.layout,r._cellFeedback=i,r._feedback=o,r}return o(e,t),e.prototype._doDispose=function(){this._request=this._layout=this._cellFeedback=this._feedback=this._target=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,i,o,r){var n=this.grid,s=n.layoutManager,a=this._layout.parent,l=this._request.offset,h=s.getHeaderCellRect(this._layout,!0);a.horizontal?(this._offset=l>0?l:i-h.x,this._feedback.setBounds(h.x,h.y,e.WING_SIZE,h.height)):(this._offset=l>0?l:o-h.y,this._feedback.setBounds(h.x,h.y,h.width,e.WING_SIZE)),this._request.offset=this._offset,this._feedback.visible=!1,this._cellFeedback.setBounds(h.x,h.y,h.width,h.height),this._cellFeedback.model=n.header.getCell(this._layout),this._cellFeedback.dragging=!1,n.addFeedbackElement(this._cellFeedback),n.addFeedbackElement(this._feedback);var u=this._feedback._dom.style;return u.borderLeft=u.borderRight=u.borderTop=u.borderBottom="",!0},e.prototype._doDrag=function(t,e,i,o){var r=this.grid,n=this._layout.parent,s=this.grid.layoutManager;if(i<s.contentBounds.y&&r.canGrouping())return!1;if(e<s.gridBounds.x||e>s.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var a=s.getHeaderCellAt(e,i),l=this.$_findTarget(a);Rt.log("MOVE: ",this._layout.displayText+" => "+(null==l?void 0:l.displayText)),l&&!r.canMoveToLayout(l)&&(l=null),this.$_setTarget(l),this._cellFeedback.dragging=!0,n.horizontal?this._cellFeedback.x=e-this._offset:this._cellFeedback.y=i-this._offset}return!0},e.prototype._doCanceled=function(){this.$_stopTimer()},e.prototype._doCompleted=function(){this.$_stopTimer(),this._target&&(this._layout.vindex=this._target.vindex,this._layout.owner.setMoveColumn(this._layout))},e.prototype._doEnded=function(){this.$_stopTimer(),this.grid.removeFeedbackElement(this._feedback),this.grid.removeFeedbackElement(this._cellFeedback)},e.prototype.getNextRequest=function(t,e){return this.grid.activeTool.getNextRequest(this._request,this._cellFeedback,t,e)},e.prototype.$_startTimer=function(){this._timer||(this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this.$_timerHandler.bind(this),60))},e.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},e.prototype.$_timerHandler=function(){var t=this._grid,e=this.currentX,i=t.layoutManager,o=0;e>i.clientRect.right?(o=Math.max(0,Math.min(3,(e-i.clientRect.right)/40)),this._interval=4-o,this._colLoop++):e<i.gridBounds.x&&(o=Math.max(0,Math.min(3,(i.gridBounds.x-e)/40)),this._interval=4-o,this._colLoop++),o>0&&(this._interval=4-o),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,e>i.clientRect.right?t.leftCell+=1:e<i.gridBounds.left&&t.leftPos>0&&(t.leftCell-=1)),this.$_setTarget(null)},e.prototype.$_findTarget=function(t){if(t)for(var e=this._layout.parent;t;){if(t.parent===e)return t;t=t.parent}},e.prototype.$_setTarget=function(t){var e=this._request.layout,i=e.parent,o=this._feedback,r=o._dom.style,n=this.grid.layoutManager;if(this.currentX,this.currentY,this._target=t,o.visible=null!=t&&t.parent===i&&t!==e){var s=n.getHeaderCellRect(t,!0);if(i.horizontal){var a=e.hcol;r.height=s.height+"px",t.hcol<a?(r.borderRight="none",r.borderLeft="",o.x=s.x):t.hcol>a&&(r.borderLeft="none",r.borderRight="",o.x=s.right-o.width)}else{var l=e.row;r.width=s.width+"px",t.row<l?(r.borderBottom="none",r.borderTop="",o.y=s.y):t.row>l&&(r.borderTop="none",r.borderBottom="",o.y=s.bottom-o.height)}}},e.WING_SIZE=7,e}(lh),ch=function(t){function e(e,i){var o=t.call(this,e.grid,"rowResizeTracker")||this;return o._request=e,o._feedback=i,o}return o(e,t),e.prototype._doDispose=function(){this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,e,i,o){var r=this.grid.layoutManager,n=r.leftContentBounds.x,s=r.rightContentBounds.right;return this._feedback.resize(s-n,2),this._feedback.move(n,i-this._request.offset),this.grid.addFeedbackElement(this._feedback),!0},e.prototype._doDrag=function(t,e,i,o){return i-this._request.offset-this._request.rowTop>=this.grid.displayOptions.minRowHeight&&(this._feedback.y=i-this._request.offset,!0)},e.prototype._doCompleted=function(t,e,i,o){var r=this.grid,n=r.displayOptions,s=Math.max(n.minRowHeight,i-this._request.offset-this._request.rowTop);(s=0===n.maxRowHeight?s:Math.min(n.maxRowHeight,s))>=r.layoutManager.bodyBounds.height&&(s=r.layoutManager.bodyBounds.height-1),this._request.variable?r.setRowHeight(this._request.itemIndex,s):n.rowHeight=s},e.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},e}(lh),dh=function(t){function e(e,i){var o=t.call(this,e.grid,"rowResizeTracker")||this;return o._request=e,o._feedback=i,o}return o(e,t),e.prototype._doDispose=function(){this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,e,i,o){var r=this.grid.layoutManager,n=r.leftContentBounds.x,s=r.rightContentBounds.right;return this._feedback.resize(s-n,2),this._feedback.move(n,i-this._request.offset),this.grid.addFeedbackElement(this._feedback),!0},e.prototype._doDrag=function(t,e,i,o){return i-this._request.offset-this._request.top>=this.grid.header.minHeight&&(this._feedback.y=i-this._request.offset,!0)},e.prototype._doCompleted=function(t,e,i,o){var r=this.grid.header,n=Math.max(r.minHeight,i-this._request.offset-this._request.top);r.height=n},e.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},e}(lh),ph=function(e){function i(t,i,o){var r=e.call(this,t.grid,"rowMoveTracker")||this;return r._timer=null,r._request=t,r._proxy=i,r._line=o,r}return o(i,e),i.updateLineFeedback=function(e,i,o,r,n,s,a,l,h){var u={index:-1,position:0,column:void 0};if(s<0||a<-20||s>=e.width||a>=e.height+20)return n.visible=!1,u;var c=n.feedbackStyle=e.dataDropOptions.feedbackStyle,d=e.layoutManager,p=d.defaultItemHeight;a-=d.contentBounds.y;var f=0,_=d.contentBounds.right,g=-1,y=-1,m=0,b=2,v=e.cellToIndex(h),w=!1,C=Rt.included(c,t.DragFeedbackStyle.CELL,t.DragFeedbackStyle.GROUP);if(a<d.summaryBounds.bottom)y=Math.max(0,d.topIndex-1),g=d.getTableItemTop(0);else if(a>=d.footerBounds.y)y=d.topIndex+d.fullItemCount,g=d.getTableItemBottom(d.fullItemCount);else{var x=a-d.summaryBounds.bottom,I=d.getTableItemIndex(x);I<0&&d.itemCount>0&&(I=(Number.MAX_VALUE,d.itemCount-1));var S=d.getTableItemHeight(I);if((y=I)>=d.fixedItemCount&&(y+=d.topIndex),y!=i||C){var E=d.getTableItemTop(I);if(c===t.DragFeedbackStyle.ROW){g=E||0,b=S||p;var O=Math.floor(S/3);x<E+O?m=-1:x>E+2*O&&(m=1)}else if(c===t.DragFeedbackStyle.GROUP){if(v&&e.isValid(v)){var R=d.getDataRect(v.layout.root),P=v.layout.root.first;b=S,g=E,_=(f=R.x)+R.width,u.column=P.getDataColumn().name,w=P!==o}}else if(c===t.DragFeedbackStyle.CELL){if(v&&e.isValid(v)){var k=d.getBodyView(v);g=(R=k.getCellRectAt(d,v,!0)).y,b=(R=k.boundsByContainer(R)).height,_=(f=R.x)+R.width,w=v.layout!==o,u.column=v.layout.getDataColumn().name}}else x<E+S/2?(g=E,y>i&&(y=Math.max(d.topIndex,y-1)),m=-1):((g=I>-1?d.getTableItemBottom(I):l?0:-1)>=0&&y<i&&y++,m=1)}}return g+=d.contentBounds.y+d.summaryBounds.bottom,n.visible=y>i?y>i+r-1:(y>=0||c===t.DragFeedbackStyle.ROW)&&(y!=i||w),n.visible?(n.resize(_-f,b),0==e.itemCount&&c!==t.DragFeedbackStyle.ROW&&(g+=p),n.move(f,g)):y=-1,e.dataDropOptions.scroll&&(a<d.summaryBounds.bottom?e.topIndex--:a>=d.footerBounds.y&&e.topIndex++),u.index=y,u.position=m,u},i.prototype._doDispose=function(){this._request=null,this._proxy=null,this._line=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"request",{get:function(){return this._request},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sourceItems",{get:function(){return this._sourceItems},enumerable:!1,configurable:!0}),i.prototype.setEnabled=function(t){this._proxy.setEnabled(t)&&this._proxy.draw()},i.prototype.setLabel=function(t){this._proxy.setLabel(t)&&this._proxy.draw()},Object.defineProperty(i.prototype,"startWhenCreated",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"linkable",{get:function(){return!0},enumerable:!1,configurable:!0}),i.prototype.getRequest=function(){return this._request},i.prototype._doStart=function(e,i,o,r){var n,s,a=this.grid,l=St(e),h=a.selections.count;if(this._sourceItems=[],0===h||(n=a.selections.getItem(0),(s=n&&n.style)==t.SelectionStyle.COLUMNS||s==t.SelectionStyle.SINGLE_COLUMN))if(a.displayOptions.selectionStyle===t.SelectionStyle.NONE)a.selections.selectBlock(a.focusedIndex,!0);else switch(a.dataDropOptions.feedbackStyle){case t.DragFeedbackStyle.LINE:case t.DragFeedbackStyle.ROW:a.selections.selectRow(this._request.itemIndex,!0);break;case t.DragFeedbackStyle.CELL:case t.DragFeedbackStyle.GROUP:a.selections.selectBlock(a.focusedIndex,!0)}if(a.selections.count>=1){this._sourceItems=a.selections.getItem(0).getItemIndices(),l.body.appendChild(this._proxy._dom),a.addFeedbackElement(this._line);var u=this.$_updateLine(i,o,e);return this._proxy.setZIndex(a.displayOptions.baseZindex+6),this.$_updateProxy(i,o,u,e),!0}return!1},i.prototype._doDrag=function(t,e,i,o){var r=this.grid.layoutManager;t=this.$_getTarget(o,t);var n=this.$_updateLine(e,i,t);return this.$_updateProxy(e,i,n,t),(i-=r.contentBounds.y)>r.footerBounds.y||i<r.summaryBounds.bottom?this.$_startTimer():this.$_stopTimer(),!0},i.prototype._doCompleted=function(e,i,o,r){var n=this._targetRow,s=this.grid;e=this.$_getTarget(r,e);var a,l=s.container.findContainer(null,e);if(l?n.index>=0&&(a=s.canMoveRow(!0,!1)&&s.dataDropOptions.getEnabled(s,this._sourceItems,n,i,o)):a=s.canMoveRow(!1,!0)&&s.dataDropOptions.getEnabled(s,this._sourceItems,n,i,o,e),a){var h=this._request.itemIndex,u=s.dataDropOptions.callback;if(u)l?u(s.handler,this._sourceItems,s.handler,n.index,n.column):u(s.handler,this._sourceItems,e,null,null);else if(l===s.container){var c=n.index>h?n.index-(h+this._sourceItems.length-1):n.index-h,d=s.dataDropOptions.feedbackStyle;Rt.included(d,t.DragFeedbackStyle.CELL,t.DragFeedbackStyle.GROUP)||s.moveSelection(c,"mouseup")}}},i.prototype._doCanceled=function(t,e){},i.prototype._doEnded=function(){this.$_stopTimer(),this.grid.removeFeedbackElement(this._line),Rt.detach(this._proxy._dom)},i.prototype.$_getTarget=function(t,e){var i;if(Rt.isMobile()){var o=St(t.target);i=o&&o.elementFromPoint(t.clientX,t.clientY)}return i||e},i.prototype.$_updateLine=function(t,e,o){return this._targetRow=i.updateLineFeedback(this.grid,this._request.itemIndex,this._request.layout,this._sourceItems.length,this._line,t,e,!1,o)},i.prototype.$_updateProxy=function(t,e,i,o){var r=this.grid,n=r.container.findContainer(null,o),s=n!==r.container,a=Rt.getOffset(r.container._containerDom);a.y+=e,a.x+=t+20;var l=!0;if(!s)for(var h=r.selections.getItem(0).getItems(),u=h[0].level,c=1,d=h.length;c<d;c++)if(h[c].level!==u){l=!1;break}if(l=n?l&&r.canMoveRow(!0,s)&&(s||r.dataDropOptions.getEnabled(r,this._sourceItems,i,t,e)):l&&r.canMoveRow(!1,!0)&&r.dataDropOptions.getEnabled(r,this._sourceItems,i,t,e,o),this._proxy.move(a.x,a.y),this._proxy.setEnabled(void 0!==l?l:i.index>=0),!s||!n){var p=r.dataDropOptions.getLabel(r,this._sourceItems,i,!n&&o);this._proxy.setLabel(p)}return this._proxy.draw(),l},i.prototype.$_startTimer=function(){this._timer||(this._timer=setInterval(this.$_timerHandler.bind(this),100))},i.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},i.prototype.$_timerHandler=function(){var t=this.currentX,e=this.currentY;this.$_updateLine(t,e,null)},i}(lh),fh=function(t){function e(e,i,o,r){var n=t.call(this,e.index.grid,i)||this;return n._request=e,n._currX=o,n._currY=r,n}return o(e,t),e.prototype._doDispose=function(){this._request.dispose(),this._request=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"startWhenCreated",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clickable",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollable",{get:function(){var t=this._getItem().getBounds();return t.top===t.bottom},enumerable:!1,configurable:!0}),e.prototype.getRequest=function(){return this._request},e.prototype._doCanceled=function(){},e.prototype._doEnded=function(){var t=this._getItem();this.grid.selections.$_ended(t)},e.prototype.spanHome=function(t){var e=this.grid;e.getBodyViewAt(t).spanHead(e.layoutManager,t)},e.prototype.spanRight=function(t){var e=this.grid;e.getBodyViewAt(t).spanRight(e.layoutManager,t)},e.prototype.immediateDrag=function(t){var e=this.grid;return e.displayOptions.selectAndImmediateDrag||e.displayOptions.altSelectAndImmediateDrag&&t.altKey},e}(lh),_h=function(e){function i(t,i,o){var r=e.call(this,t,"blockSelectTracker",i,o)||this;return r._timer=null,r._rowPrevLoop=0,r._rowLoop=0,r._colPrevLoop=0,r._colLoop=0,r._interval=0,r}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype._getItem=function(){return this._item||this.grid.selections.lastItem()},i.prototype._doStart=function(e,i,o,r){var n=this.grid,s=n.selections,a=n.layoutManager,l=r&&r.shiftKey,h=Rt.ctrlKey(r),u=this._request.index;if(a.isMergedCell(u)&&!(u=n.pointToIndex(e,i,o,!0)).layout)return!1;if(l)this._item=s.count>0&&s.lastItem();else{var c=void 0;h||1===s.count&&s.lastItem()instanceof Sa?c=s.lastItem():s.clear(!0),this._item=c&&c instanceof Sa?c:s.add(u,u,t.SelectionStyle.BLOCK,!0)}return!!this._item},i.prototype._doDrag=function(t,e,i,o){if(this._item){var r=this.grid;if(this.immediateDrag(o))return!1;var n=r.layoutManager;if(this._currX=e,this._currY=i,i-n.contentBounds.y>n.footerBounds.y||i<n.gridBounds.y||e<n.gridBounds.x||e>n.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var s=r.pointToIndex(t,e,i,!0);s.column&&s.itemIndex>=0&&(Ds.compareHorz(s,this._item.startIndex)>=0?(this.spanRight(s),this.spanHome(this._item.startIndex)):this.spanRight(this._item.startIndex),this._item.resizeTo(s))}return!0}},i.prototype._doEnded=function(){this.$_stopTimer(),e.prototype._doEnded.call(this)},i.prototype.getNextRequest=function(t,e){return this.grid.activeTool.getNextRequest(this._request,null,t,e)},i.prototype.$_startTimer=function(){this._timer||(this._rowLoop=this._rowPrevLoop=this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},i.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},i.prototype.$_timerHandler=function(){var t=this._grid,e=this._currX,i=this._currY,o=t.layoutManager,r=0,n=0;i>o.footerBounds.y?(n=Math.max(0,Math.min(3,(i-o.footerBounds.y)/40)),this._interval=4-n,this._rowLoop++):i<o.gridBounds.y&&(n=Math.max(0,Math.min(3,(o.gridBounds.y-i)/40)),this._interval=4-n,this._rowLoop++),e>o.clientRect.right?(r=Math.max(0,Math.min(3,(e-o.clientRect.right)/40)),this._interval=4-r,this._colLoop++):e<o.gridBounds.x&&(r=Math.max(0,Math.min(3,(o.gridBounds.x-e)/40)),this._interval=4-r,this._colLoop++);var s=!1;if(Math.max(r,n)>0&&(this._interval=4-Math.max(r,n)),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,i>o.footerBounds.y?t.topItem+o.fullItemCount<t.itemCount&&(t.topIndex=t.topIndex+1,s=!0):i<o.gridBounds.y&&t.topItem>o.fixedItemCount&&(t.topIndex=t.topIndex-1,s=!0)),s||this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,e>o.clientRect.right?(t.leftPos+=e-o.clientRect.right,s=!0):e<o.gridBounds.left&&t.leftPos>0&&(t.leftPos-=o.gridBounds.left-e,s=!0)),s){var a=t.pointToIndex(null,e,i,!1);a.column&&(a.itemIndex=Math.min(Math.max(0,a.itemIndex,t.topIndex),t.itemCount-1),this._item.resizeTo(a))}},i}(fh),gh=function(e){function i(t,i,o){var r=e.call(this,t,"rowsSelectTracker",i,o)||this;return r._timer=null,r._prevLoop=0,r._loop=0,r._colPrevLoop=0,r._colLoop=0,r._interval=0,r}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype._getItem=function(){return this._item||this.grid.selections.lastItem()},i.prototype._doStart=function(e,i,o,r){var n=this.grid,s=n.selections,a=n.layoutManager,l=r&&r.shiftKey,h=Rt.ctrlKey(r),u=this._request.index;if(a.isMergedCell(u)&&(u=n.pointToIndex(e,i,o,!0)),l)this._item=s.count>0&&s.lastItem();else{var c=void 0;h||1===s.count&&s.lastItem()instanceof Ea?c=s.lastItem():s.clear(!0),this._item=c&&c instanceof Ea?c:s.add(u,u,t.SelectionStyle.ROWS,!0)}return!!this._item},i.prototype._doDrag=function(t,e,i,o){if(this._item){var r=this.grid;if(this.immediateDrag(o))return!1;var n=r.layoutManager;if(this._currX=e,this._currY=i,i>n.footerBounds.y||i<n.gridBounds.y||e<0||e>n.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var s=this.grid.pointToIndex(t,e,i,!1);s.itemIndex>=0&&this._item.resizeTo(s)}return!0}return!1},i.prototype._doEnded=function(){this.$_stopTimer(),e.prototype._doEnded.call(this)},i.prototype.getNextRequest=function(t,e){return this.grid.activeTool.getNextRequest(this._request,null,t,e)},i.prototype.$_startTimer=function(){this._timer||(this._loop=this._prevLoop=this._colLoop=this._colPrevLoop=0,this._interval=1,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},i.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},i.prototype.$_timerHandler=function(){var t,e,i=this._grid,o=this._currX,r=this._currY,n=i.layoutManager;(r>n.footerBounds.y?(t=Math.max(0,Math.min(3,(r-n.footerBounds.y)/40)),this._interval=4-t,this._loop++):r<n.gridBounds.y&&(t=Math.max(0,Math.min(3,(n.gridBounds.y-r)/40)),this._interval=4-t,this._loop++),this._loop-this._prevLoop>=this._interval)?(this._prevLoop=this._loop,r>n.footerBounds.y?i.topIndex=i.topIndex+1:r<n.gridBounds.y&&(i.topIndex=i.topIndex-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).itemIndex=Math.min(Math.max(0,e.itemIndex,i.topIndex),i.itemCount-1),this._item.resizeTo(e)):(o>n.clientRect.right?(t=Math.max(0,Math.min(3,(o-n.clientRect.right)/40)),this._interval=4-t,this._colLoop++):o<0&&(t=Math.max(0,Math.min(3,(n.gridBounds.x-o)/40)),this._interval=4-t,this._colLoop++),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,o>n.clientRect.right?i.leftLayout=i.leftLayout+1:o<n.gridBounds.x&&i.leftPos>0&&(i.leftLayout=i.leftLayout-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).itemIndex>=0&&(e.itemIndex=Math.min(Math.max(0,e.itemIndex,i.topIndex),i.itemCount-1),this._item.resizeTo(e))))},i}(fh),yh=function(e){function i(t,i,o){var r=e.call(this,t,"columnsSelectTracker",i,o)||this;return r._timer=null,r._prevLoop=0,r._loop=0,r._rowPrevLoop=0,r._rowLoop=0,r._interval=0,r}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"startWhenCreated",{get:function(){return!0},enumerable:!1,configurable:!0}),i.prototype._getItem=function(){return this._item||this.grid.selections.lastItem()},i.prototype._doStart=function(e,i,o,r){var n,s=this.grid,a=s.selections,l=s.layoutManager,h=r&&r.shiftKey,u=Rt.ctrlKey(r),c=this._request.index;return l.isMergedCell(c)&&(c=s.pointToIndex(e,i,o,!0)),h?n=a.count>0&&a.lastItem():u||1===a.count&&a.lastItem()instanceof Oa?n=a.lastItem():a.clear(!0),n&&a.containsLayout(c.layout,Oa)?this._item=n:this._item=a.add(c,c,t.SelectionStyle.COLUMNS,!0),!!this._item},i.prototype._doDrag=function(t,e,i,o){if(this._item){var r=this.grid.layoutManager;if(this._currX=e,this._currY=i,e<r.gridBounds.x||e>r.clientRect.right||i>r.footerBounds.y||i<0)this.$_startTimer();else{this.$_stopTimer();var n=this.grid.pointToIndex(t,e,i,!1);null!=n.column&&this._item.resizeTo(n)}return!0}return!1},i.prototype._doEnded=function(){this.$_stopTimer(),e.prototype._doEnded.call(this)},i.prototype.$_startTimer=function(){this._timer||(this._loop=this._prevLoop=this._rowLoop=this._rowPrevLoop=0,this._interval=1,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},i.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},i.prototype.$_timerHandler=function(){var t,e,i=this._grid,o=this._currX,r=this._currY,n=i.layoutManager;(o>n.clientRect.right?(t=Math.max(0,Math.min(3,(o-n.clientRect.right)/40)),this._interval=4-t,this._loop++):o<n.gridBounds.x&&(t=Math.max(0,Math.min(3,(n.gridBounds.x-o)/40)),this._interval=4-t,this._loop++),this._loop-this._prevLoop>=2*this._interval)?(this._prevLoop=this._loop,o>n.clientRect.right?i.leftLayout=i.leftLayout+1:o<n.gridBounds.x&&i.leftPos>0&&(i.leftLayout=i.leftLayout-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).column&&this._item.resizeTo(e)):(r>n.footerBounds.y?(t=Math.max(0,Math.min(3,(r-n.footerBounds.y)/40)),this._interval=4-t,this._rowLoop++):r<0&&(t=Math.max(0,Math.min(3,(n.gridBounds.y-r)/40)),this._interval=4-t,this._rowLoop++),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,r>n.footerBounds.y?i.topIndex=i.topIndex+1:r<n.gridBounds.y&&(i.topIndex=i.topIndex-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).column&&this._item.resizeTo(e)))},i}(fh),mh=function(t){function e(e,i){var o=t.call(this)||this;return o._clickX=0,o._clickY=0,o._mouseX=0,o._mouseY=0,o._longTimerHandler=function(){o._longPressed=!0},o._owner=e,o._name=i,o.previous=null,o}return o(e,t),e.prototype._doDispose=function(){this._dragTracker=null,this.previous=null,this._owner=null,this._mouseEventTarget=this._clickTarget=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dragTracker",{get:function(){return this._dragTracker},set:function(t){t!==this._dragTracker&&(this._dragTracker&&this._dragTracker.deactivate(),this._dragTracker=t,this._dragTracker&&this._dragTracker.activate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dragging",{get:function(){return this._dragTracker&&this._dragTracker.dragging},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseX",{get:function(){return this._mouseX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseY",{get:function(){return this._mouseY},enumerable:!1,configurable:!0}),e.prototype.findElementAt=function(t,e,i){return this._owner.findElementAt(t,e,i)},e.prototype.activate=function(t){this._doActivated(t)},e.prototype.deactivate=function(){this._doDeactivated()},e.prototype.keyDown=function(t){return this._doKeyDown(t)},e.prototype.keyUp=function(t){return this._doKeyUp(t)},e.prototype.keyPress=function(t){return this._doKeyPress(t)},e.prototype.copyHandler=function(t){return this._doCopyEvent(t)},e.prototype.pasteHandler=function(t){return this._doPasteEvent(t)},e.prototype.pointerDown=function(t){var e=this._mouseX=this._clickX=t.mouseX,i=this._mouseY=this._clickY=t.mouseY;this._longPressed=!1,this._touchEvents=[{x:e,y:i,t:t.timeStamp}],this.dragging&&this._stopDragTracker(e,i,!1,t),this._doPointerDown(t)},e.prototype.mouseDown=function(t){var e=this._mouseX=this._clickX=t.mouseX,i=this._mouseY=this._clickY=t.mouseY;this._doMouseDown(t),this.dragging&&this._stopDragTracker(e,i,!1,t)},e.prototype.pointerCancel=function(t){var e=this._mouseX=t.mouseX,i=this._mouseY=t.mouseY;this.dragging?this._stopDragTracker(e,i,!0,t):(this._dragTracker instanceof fh&&this._dragTracker._doEnded(),this._dragTracker=null),this._touchEvents=[],this._doPointerCancel(t)},e.prototype.dragFrom=function(t,e){},e.prototype.dropFrom=function(t,e){},e.prototype.cancelFrom=function(t){},e.prototype.pointerMove=function(t){var e=this._mouseX=t.mouseX,i=this._mouseY=t.mouseY,o=this.dragTracker,r=t.buttons;if(o){if(o.dragging){if(1===r){if(!o.drag(this._mouseEventTarget,e,i,t)){var n=o.getNextRequest(e,i);n&&(this._stopDragTracker(e,i,!0,t),this.dragTracker=this._getDragTracker(n,e,i),this._startDragTracker(e,i,t))}}else this._stopDragTracker(e,i,!0,t);return}var s=this.owner.getThreshold();if(Math.abs(e-this._clickX)>=s||Math.abs(i-this._clickY)>=s){if(1===r)return void this._startDragTracker(e,i,t);this._stopDragTracker(e,i,!0,t),this._dragTracker=null}}this._doPointerMove(t)},e.prototype.pointerUp=function(t){var e=this,i=this._mouseX=t.mouseX,o=this._mouseY=t.mouseY;clearTimeout(this._longTimer),this._touchEvents&&this._touchEvents.push({x:t.mouseX,y:t.mouseY,t:t.timeStamp}),this.dragging?(Rt.isMobile()&&"pointerup"===t.type&&this._checkSwipe(t),this._stopDragTracker(i,o,!1,t),this._dragTracker&&this._dragTracker.clickable&&!this._longPressed&&this._doPointerUp(t)):(this._dragTracker&&this._dragTracker._doEnded(),this._dragTracker=null,this._doPointerUp(t)),setTimeout((function(){e._longPressed=!1}),100),this._touchEvents=[]},e.prototype.mouseEnter=function(t){this._doMouseEnter(t)},e.prototype.mouseLeave=function(t){this._doMouseLeave(t)},e.prototype.mouseOver=function(t){this._doMouseOver(t)},e.prototype.mouseOutside=function(){this._doMouseOutside()},e.prototype.mouseWheel=function(t){return this._doMouseWheel(t)},e.prototype.contextMenu=function(t){return this._doContextMenu(t)},e.prototype.click=function(t){this._doClick(t)},e.prototype.dblclick=function(t){this._doDblClick(t)},e.prototype.setFocus=function(t){this._doSetFocus(t)},e.prototype.focusLeave=function(t){this._doFocusLeave(t)},e.prototype.resetFocused=function(){},e.prototype.globalKeyup=function(t){this._doGlobalKeyup(t)},e.prototype.globalKeydown=function(t){this._doGlobalKeydown(t)},e.prototype.touchMove=function(t){return this._doTouchMove(t)},e.prototype._checkSwipe=function(t){},Object.defineProperty(e.prototype,"mouseEventTarget",{get:function(){return this._mouseEventTarget},enumerable:!1,configurable:!0}),e.prototype.isMouseEventTarget=function(t){return t._dom===this._mouseEventTarget},e.prototype._doActivated=function(t){},e.prototype._doDeactivated=function(){},e.prototype._doKeyDown=function(t){return!1},e.prototype._doKeyUp=function(t){return!1},e.prototype._doKeyPress=function(t){return!1},e.prototype._doCopyEvent=function(t){},e.prototype._doPasteEvent=function(t){},e.prototype._doPointerDown=function(t){},e.prototype._doPointerCancel=function(t){},e.prototype._doPointerMove=function(t){},e.prototype._doPointerUp=function(t){},e.prototype._doMouseDown=function(t){},e.prototype._doMouseEnter=function(t){},e.prototype._doMouseLeave=function(t){},e.prototype._doMouseOver=function(t){},e.prototype._doMouseOutside=function(){},e.prototype._doMouseWheel=function(t){return!1},e.prototype._doContextMenu=function(t){},e.prototype._doClick=function(t){},e.prototype._doDblClick=function(t){},e.prototype._doSetFocus=function(t){},e.prototype._doFocusLeave=function(t){},e.prototype._doGlobalKeyup=function(t){},e.prototype._doGlobalKeydown=function(t){},e.prototype._getDragTracker=function(t,e,i){return null},e.prototype._startDragTracker=function(t,e,i){void 0===i&&(i=null),this._dragTracker&&(this._dragTracker.start(this._mouseEventTarget,t,e,i)?this._doDragTrackerStarted(this._dragTracker):this._dragTracker=null)},e.prototype._stopDragTracker=function(t,e,i,o){if(this.dragging){var r=this._dragTracker;i?r.cancel():r.drop(this._mouseEventTarget,t,e,o),this._doDragTrackerFinished(r,i)}},e.prototype._doDragTrackerStarted=function(t){},e.prototype._doDragTrackerFinished=function(t,e){},e.prototype._findTableCell=function(t){return this.owner.getTableCell(t||this.mouseEventTarget)},e.prototype._doTouchMove=function(t){return!0},e}(Lt),bh=function(t){function e(){return t.call(this)||this}return o(e,t),Object.defineProperty(e.prototype,"cursor",{get:function(){return"default"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dblClickable",{get:function(){return!1},enumerable:!1,configurable:!0}),e}(Lt);!function(t){t.LINE="line",t.PAGE="page",t.THUMB_TRACK="thumbTrack",t.THUMB_END="thumbEnd",t.SCROLL_END="scrollEnd"}(sh||(sh={}));var vh,wh,Ch=function(t){function e(e,i,o){var r=t.call(this,e,o)||this;return r._scrollBar=i,r}return o(e,t),e.prototype._doDispose=function(){this._scrollBar=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"scrollBar",{get:function(){return this._scrollBar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertical",{get:function(){return this._scrollBar.vertical},enumerable:!1,configurable:!0}),e.prototype._doDraw=function(t){this._doRender(t)},e.prototype._doRender=function(t){},e.prototype._changed=function(){this.invalidate()},e}(_a),xh=function(t){function e(e){return t.call(this,e,null,"scrollEdgeView")||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-scrolledge"},e}(Ch),Ih=function(t){function e(e){return t.call(this,e.doc,e,"scrollTrackView")||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-scrolltrack"},e}(Ch),Sh=function(t){function e(e,i){var o=t.call(this,e.doc,e,"scrollButtonView")||this;return o._enabled=!0,o._far=i,o}return o(e,t),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"far",{get:function(){return this._far},enumerable:!1,configurable:!0}),e.prototype._getCssSelector=function(){return this.scrollBar.vertical?this._far?"rg-scroll-down":"rg-scroll-up":this._far?"rg-scroll-right":"rg-scroll-left"},e}(Ch),Eh=function(t){function e(e){return t.call(this,e.doc,e,"scrollThumbView")||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-scrollthumb"},e}(Ch),Oh=function(t){function e(e,i){void 0===i&&(i=!1);var o=t.call(this,e.doc,"scrollBarView")||this;return o._lineScrollSize=1,o._pageScrollSize=1,o._minThumbSize=20,o._min=0,o._max=0,o._pos=0,o._page=0,o._maxPosition=0,o._buttonSize=20,o._needLayout=!0,o._tipView=null,o._container=e,o._vertical=i,o._track=new Ih(o),o.addChild(o._track),o._thumb=new Eh(o),o.addChild(o._thumb),o._nearButton=new Sh(o,!1),o.addChild(o._nearButton),o._farButton=new Sh(o,!0),o.addChild(o._farButton),o}return o(e,t),e.prototype._doDispose=function(){this._track=this._track.dispose(),this._thumb=this._thumb.dispose(),this._nearButton=this._nearButton.dispose(),this._farButton=this._farButton.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineScrollSize",{get:function(){return this._lineScrollSize},set:function(t){(t=Math.max(1,t))!=this._lineScrollSize&&(this._lineScrollSize=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageScrollSize",{get:function(){return this._pageScrollSize},set:function(t){(t=Math.max(1,t))!=this._pageScrollSize&&(this._pageScrollSize=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minThumbSize",{get:function(){return this._minThumbSize},set:function(t){(t=Math.max(8,t))!=this._minThumbSize&&(this._minThumbSize=t,this.invalidateLayout())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertical",{get:function(){return this._vertical},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pos",{get:function(){return this._pos},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxPosition",{get:function(){return this._maxPosition},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonSize",{get:function(){return this._buttonSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tipView",{set:function(t){this._tipView=t},enumerable:!1,configurable:!0}),e.prototype.layoutContent=function(){this._needLayout&&(this._needLayout=!1,this._doLayoutContent())},e.prototype.setProperties=function(t,e,i,o){t=Math.max(0,t),e=Math.max(t,e),this._scrollable=o,t==this._min&&e==this._max&&i==this._page||(this._min=t,this._max=e,this._page=i,this._pos=Math.min(this._max,Math.max(this._min,this._pos)),this._maxPosition=Math.max(0,this._max-this._page),this.invalidate(),this._needLayout=!0)},e.prototype.setPosition=function(t,e){void 0===e&&(e=!0),(t=Math.min(this._maxPosition,Math.max(this._min,t)))!=this._pos&&(this._pos=t,this.invalidate(),this._needLayout=!0,e&&this.layoutContent())},e.prototype.ptInTrack=function(t,e,i){var o=this.containerToElement(t,e);if(this._vertical){if(o.y>=this._nearButton.height&&o.x<this._farButton.y)return!i&&o.y<this._thumb.y||i&&o.y>=this._thumb.bottom}else if(t>=this._nearButton.width&&t<this._farButton.x)return!i&&o.x<this._thumb.x||i&&o.x>=this._thumb.right;return!1},e.prototype.setText=function(t){if(this._tipView&&t){this._tipView.show(),this._tipView.setText(t);var e=void 0,i=void 0;if(this._vertical){var o=this._tipView.width();e=this.x-o-5,i=this._thumb.y}else{var r=this._tipView.height();e=this._thumb.x,i=this.y-r-5}this._tipView.move(e,i)}},e.prototype._getCssSelector=function(){return this._vertical?"rg-vscrollbar":"rg-hscrollbar"},e.prototype.draw=function(){t.prototype.draw.call(this)},e.prototype._doDraw=function(t){},e.prototype._doSizeChanged=function(){this.invalidateLayout()},e.prototype.invalidateLayout=function(){this._needLayout=!0,t.prototype.invalidateLayout.call(this)},e.prototype._doLayoutContent=function(){var t=this._vertical,e=this._buttonSize,i=this.height,o=this.width,r=(t?i:o)-2*e,n=Math.min(r,Math.max(this._minThumbSize,Math.floor(r*this._page/(this._max-this._min+1)))),s=e+Math.min(r-n,Math.max(0,Math.floor((r-n)*this._pos/(this._maxPosition-this._min))));this._track.setBounds(0,0,o,i),isNaN(s)&&(s=e),t?(this._nearButton.setBounds(0,0,o,e),this._farButton.setBounds(0,i-e,o,e),n<=r&&this._thumb.setBounds(2,s,o-4,n)):(this._nearButton.setBounds(0,0,e,i),this._farButton.setBounds(o-e,0,e,i),n<=r&&this._thumb.setBounds(s,2,n,i-4)),this._thumb.visible=this._scrollable},e.prototype._doScroll=function(t,i,o){this.fireEvent(e.SCROLLED,t,i,o)},e.SCROLLED="onScrollBarScrolled",e}(_a),Rh=function(t){function e(e){return t.call(this,e,"scrollThumbTracker")||this}return o(e,t),e.prototype._doDispose=function(){this._thumb=this._thumb&&this._thumb.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"thumb",{get:function(){return this._thumb},set:function(t){this._thumb=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startWhenCreated",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype._doStart=function(t,e,i,o){var r=this._thumb.scrollBar,n=r.containerToElement(e,i);return r.vertical?this._offset=n.y-this._thumb.y:this._offset=n.x-this._thumb.x,Rt.isSlotMode()&&o instanceof PointerEvent&&t.setPointerCapture(o.pointerId),!0},e.prototype._doDrag=function(t,e,i,o){return this.$_doScroll(e,i,sh.THUMB_TRACK)},e.prototype._doCompleted=function(t,e,i,o){return Rt.isSlotMode()&&o instanceof PointerEvent&&t.releasePointerCapture(o.pointerId),this.$_doScroll(e,i,sh.THUMB_END)},e.prototype._doCanceled=function(t,e){},e.prototype._doEnded=function(){},e.prototype.$_doScroll=function(t,e,i){var o=this._thumb.scrollBar,r=o._maxPosition-o._min+1,n=o._buttonSize,s=o.containerToElement(t,e);if(o.vertical){if((a=o.height-2*n-this._thumb.height)<=0)return!1;s.y-=this._offset,s.y=(s.y-n)*r/a,o._doScroll(i,0,Math.max(Math.floor(s.y),0))}else{var a;if((a=o.width-2*n-this._thumb.width)<=0)return!1;s.x-=this._offset,s.x=(s.x-n)*r/a,o._doScroll(i,0,Math.max(Math.floor(s.x),0))}return!0},e}(nh),Ph=function(t){function e(){var e=t.call(this)||this;return e._active=!1,e._timer=void 0,e._ready=!1,e}return o(e,t),Object.defineProperty(e.prototype,"active",{get:function(){return void 0!==this._timer},enumerable:!1,configurable:!0}),e.prototype.start=function(t){this._button=t,this._scrollBar=t.scrollBar,this._active=!0,setTimeout(function(){this._ready&&(this._ready=!1,clearInterval(this._timer),this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),20))}.bind(this),300),this._ready=!0,this.$_fireEvent()},e.prototype.move=function(t,e){var i=this._button.containerToElement(t,e);this._active=this._button.containsInClient(i.x,i.y)},e.prototype.stop=function(){this._ready=!1,this._timer&&(this._timer=clearInterval(this._timer))},e.prototype.$_fireEvent=function(){var t=this._button.far?1:-1,e=sh.LINE;this._scrollBar._doScroll(e,this._scrollBar.lineScrollSize*t,0)},e}(Re),kh=function(t){function e(){var e=t.call(this)||this;return e._active=!1,e._timer=void 0,e._ready=!1,e._mouseX=0,e._mouseY=0,e}return o(e,t),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},enumerable:!1,configurable:!0}),e.prototype.start=function(t,e,i,o){var r=this;this._scrollBar=t,this._far=e,this._active=!0,setTimeout((function(){r._ready&&(r._ready=!1,r._timer=setInterval((function(){r._active&&r.$_fireEvent()}),50))}),300),this._ready=!0;var n=this._scrollBar.containerToElement(i,o);this._mouseX=n.x,this._mouseY=n.y,this.$_fireEvent()},e.prototype.move=function(t,e){var i=this._scrollBar.containerToElement(t,e);this._mouseX=i.x,this._mouseY=i.y,this._active=this._scrollBar.ptInTrack(i.x,i.y,this._far)},e.prototype.stop=function(){this._ready=!1,this._timer&&clearInterval(this._timer)},e.prototype.$_fireEvent=function(){var t=null,e=0,i=this._scrollBar._thumb;if(this._scrollBar.vertical){var o=this._mouseY;this._far&&o>i.bottom?(t=sh.PAGE,e=1):!this._far&&o<i.y&&(t=sh.PAGE,e=-1)}else{var r=this._mouseX;this._far&&r>i.right?(e=1,t=sh.PAGE):r<i.x&&(t=sh.PAGE,e=-1)}0!=e&&this._scrollBar._doScroll(t,this._scrollBar.pageScrollSize*e,0)},e}(Lt),Th=function(t){function e(e){var i=t.call(this,e,"scrollTool")||this;return i._buttonTimer=new Ph,i._trackTimer=new kh,i._thumbTracker=new Rh(e),i}return o(e,t),e.prototype._doDispose=function(){this._thumbTracker.cancel(),this._thumbTracker=this._thumbTracker.dispose(),this._buttonTimer.stop(),this._buttonTimer=this._buttonTimer.dispose(),this._trackTimer.stop(),this._trackTimer=this._trackTimer.dispose(),t.prototype._doDispose.call(this)},e.prototype._doPointerDown=function(t){var e=t.mouseX,i=t.mouseY;this._clickElement=null,this.dragTracker=null,this._buttonTimer.stop(),this._trackTimer.stop();var o=this.findElementAt(e,i,!1);if(0===t.button&&o instanceof Ch)if(this._clickElement=o,o instanceof Sh)this._buttonTimer.start(o);else if(o instanceof Eh)this._thumbTracker.thumb=o,this.dragTracker=this._thumbTracker;else if(o instanceof Ih){var r=o.scrollBar.ptInTrack(e,i,!0);this._trackTimer.start(o.scrollBar,r,e,i)}},e.prototype._doPointerMove=function(t){var e=t.mouseX,i=t.mouseY,o=this._clickElement,r=this._buttonTimer,n=this._trackTimer;1===t.buttons?o instanceof Sh&&r.active?r.move(e,i):o instanceof Ih&&n.active&&n.move(e,i):(r.active&&r.stop(),n.active&&n.stop())},e.prototype._doPointerUp=function(t){this._clickElement&&this._clickElement.scrollBar._doScroll(sh.SCROLL_END,0,-1),this._clickElement=null,this._buttonTimer.stop(),this._trackTimer.stop()},e}(mh),Dh=function(t){function e(e){var i=t.call(this)||this;return i._container=e,i._element=i.$_createElement(e.doc),i}return o(e,t),e.prototype._doDispose=function(){this._element=Rt.detach(this._element),this._container=null,t.prototype._doDispose.call(this)},e.prototype.show=function(){this._container._container.appendChild(this._element)},e.prototype.hide=function(){Rt.detach(this._element)},e.prototype.move=function(t,e){Rt.move(this._element,t,e)},e.prototype.setText=function(t){this._element.innerHTML=t},e.prototype.width=function(){return this._element.offsetWidth},e.prototype.height=function(){return this._element.offsetHeight},e.prototype.$_createElement=function(t){var e=t.createElement("div"),i=e.style;return i.position="absolute",i.padding="4px 4px",i.boxSizing="border-box",i.display="lnline-block",i.pointerEvents="none",i.userSelect="none",e.className="rg-scroll-tip-view",e},e}(Lt),Mh=function(t){function e(e,i,o){var r=t.call(this,e,i)||this;return r._contaner=o,r}return o(e,t),Object.defineProperty(e.prototype,"container",{get:function(){return this._contaner},enumerable:!1,configurable:!0}),e.prototype._getCssSelector=function(){},e.prototype._doDraw=function(t){},e}(_a),Fh=function(t){function e(i,o,r){var n=t.call(this)||this;return n._disabled=!1,n._updateRequested=!1,n._layoutNeeded=!1,n._invalidated=!1,n._currentX=0,n._currentY=0,n._defaultCursor="default",n._drawing=!1,n._eventHandlers={},n._eventNodes=[],n._containerRender=n._render.bind(n),n._scrollTool=new Th(n),n._cursor="default",n._testWidth=NaN,n._testHeight=NaN,n._positionListener=[],n._scrollHandler=function(t){var e=St(n._containerDom),i=It(n._containerDom);Rt.isSlotMode()||t.target!==e&&!Rt.isAncestorOf(t.target,n._containerDom,t)||(n._scrollTimer=n._scrollTimer&&i.cancelAnimationFrame(n._scrollTimer),n._scrollTimer=i.requestAnimationFrame((function(){n._positionListener.forEach((function(t){t.resetPosition()}))})))},n.prepareContainer(i,o,r),n.invalidateLayout(),n._registerEventHandlers(n._rootElement._dom,n._containerDom,o),n.activeTool=n._defaultTool=n._createDefaultTool(),e.$_Containers[n.$_hash]=n,n}return o(e,t),e.prototype.getMouseContainer=function(){return e.$_Containers[e.$_mouseContainer]},e.prototype.findContainer=function(t,i){for(var o in e.$_Containers){var r=e.$_Containers[o];if(r.contains(i||t.target))return r}return null},e.getActiveGrid=function(){var t=e.$_Containers[e.$_ActiveGrid];return t&&t._gridView},e.refreshGrids=function(){var t=e.$_Containers;for(var i in t){var o=t[i];(o&&o._gridView).refreshView(!0)}},e.setActiveGrid=function(t){if(t!==e.$_ActiveGrid){var i=e.$_Containers[t],o=void 0;if(i=i&&i._gridView,window.RealGrid&&(o=window.RealGrid.onActiveGridChanged)){var r=e.$_Containers[e.$_ActiveGrid];o((r=r&&r._gridView)&&r.handler,i&&i.handler)}i._fireGridActivated()}e.$_ActiveGrid=t},e.getGridInstance=function(t){if("string"==typeof t&&(t=document.getElementById(t)),rh(t,"HTMLDivElement"))for(var i in e.$_Containers){var o=e.$_Containers[i];if(o._containerDiv===t)return o.gridView}},e.clearContainer=function(t){e[t]&&delete e[t],e.$_ActiveGrid===t&&(e.$_ActiveGrid=null)},e.disposeStatic=function(){this.$_Containers=null,this.$_ActiveGrid=null},e.prototype._doDispose=function(){this._activeTool=null,this._defaultTool=this._defaultTool&&this._defaultTool.dispose(),this._scrollTool=this._scrollTool&&this._scrollTool.dispose(),this.$_removeListenerAll(null),Rt.detach(this._containerDom),this._containerDom=null,this._container=null,this._doc=null,Rt.clearElements(this._containerDiv),t.prototype._doDispose.call(this),delete e.$_Containers[this.$_hash]},Object.defineProperty(e.prototype,"doc",{get:function(){return this._doc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(t){t!=this._disabled&&(this._disabled=t,this._doDisabledChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeTool",{get:function(){return this._activeTool},set:function(t){if((t=t||this._defaultTool)!=this._activeTool){var e=this._activeTool;e&&e.deactivate(),this._activeTool=t,t&&t.activate(e)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultTool",{get:function(){return this._defaultTool},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"measurer",{get:function(){return this._measurer},enumerable:!1,configurable:!0}),e.prototype.findElementAt=function(t,e,i){return this._rootElement.findChildAt(t-this._rootElement._x,e-this._rootElement._y,i)},e.prototype.getTableCell=function(t){return null},e.prototype.setCursor=function(t){t!=this._cursor&&(this._containerDom.style.cursor=this._cursor=t)},e.prototype.setFocus=function(){this._containerDom.focus()},e.prototype.updateNow=function(){this._layoutNeeded=!0,this.invalidate(!0),this._render(Rt.getTimer())},e.prototype.toScreen=function(t){var e=Rt.getSize(this._containerDom);return t.x+=e.left,t.y+=e.top,t},e.prototype.getHtml=function(){return this._containerDom.outerHTML},e.prototype.addElement=function(t){return this._rootElement.addChild(t)},e.prototype.removeElement=function(t){return this._rootElement.removeChild(t)},e.prototype.resetSize=function(t){void 0===t&&(t=null),this.updateNow(),t&&setTimeout(t,0)},e.prototype.measureText=function(t,e,i){this._textMeasurer.className=t;var o=this._textMeasurer.style;return i?(o.fontSize=i.fontSize,o.fontFamily=i.fontFamily,o.fontWeight=i.fontWeight,o.fontStyle=i.fontStyle):(o.removeProperty("font-size"),o.removeProperty("font-family"),o.removeProperty("font-weight"),o.removeProperty("font-style")),this._textMeasurer.innerHTML=e,this._textMeasurer.offsetWidth},e.prototype.$_refreshCheckMeasurer=function(){if(!this._checkRect){var t=Rt.getSize(this._checkMeasurer),e=Et(this._doc).getComputedStyle(this._checkMeasurer);this._checkRect={width:t.width+parseInt(e.marginLeft)+parseInt(e.marginRight),height:t.height+parseInt(e.marginTop)+parseInt(e.marginBottom)}}return this._checkRect},e.prototype.measureCheckWidth=function(){return this.$_refreshCheckMeasurer().width},e.prototype.measureCheckHeight=function(){return this.$_refreshCheckMeasurer().height},e.prototype.contains=function(t){var e=t;if(e instanceof Et(this.doc).HTMLElement)for(var i=e.parentElement;i;){if(i===this._containerDom)return!0;i=i.parentElement}return!1},e.prototype.cancelOtherContainer=function(t){for(var i in e.$_Containers){var o=e.$_Containers[i];if(o!==this){var r=o._activeTool;r&&r.cancelFrom(t)}}},e.prototype.getContainerWidth=function(){return Rt.getSize(this._containerDiv).width},e.prototype._doDisabledChanged=function(){},e.prototype.prepareContainer=function(t,e,i){if(!t)throw new Error("container is null!");if(rh(t,"HTMLDivElement")?this._containerDiv=t:this._containerDiv=document.getElementById(t),!rh(this._containerDiv,"HTMLDivElement"))throw new Error(Ue.messages.gridContainerNotFind+t);var o=this._doc=this._containerDiv.ownerDocument,r=Et(o),n=this._containerDiv.getElementsByClassName("rg-root");if(n&&n.length>0)throw new Error(Ue.messages.gridElementAttachFail);r.requestAnimationFrame=r.requestAnimationFrame||function(t){return r.setTimeout(t,10)},r.cancelAnimationFrame=r.cancelAnimationFrame||function(t){r.clearTimeout(t)};var s=this._containerDom=o.createElement("div");this._container=this._containerDom;var a=s.style;this._cursor=a.cursor,this._containerDiv.appendChild(s),s.setAttribute("tabindex","0"),a.position="relative",a.width="100%",a.height="100%",a.boxSizing="border-box",a.overflow="hidden",a["-webkit-touch-callout"]="none",a["-webkit-user-select"]="none",a["user-select"]="none",a["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",this._rootElement=this._createRootElement(o),this._measurer=o.createElement("div"),this._measurer.setAttribute("inert",""),this._container.appendChild(this._measurer);var l=this._textMeasurer=o.createElement("span");l.setAttribute("inert",""),l.style.position="absolute",l.style.left="-10000px",l.style.top="-10000px",l.style.display="block",this._container.appendChild(l);var h=this._checkMeasurer=o.createElement("input");h.type="checkbox",h.title="grid check measurer",h.tabIndex=-1,h.setAttribute("inert",""),h.style.position="absolute",h.style.left="-1000px",h.style.top="-11000px",h.style.display="block",this._container.appendChild(h),this._doPrepareContainer(s,e,i)},e.prototype._doPrepareContainer=function(t,e,i){},e.prototype._createRootElement=function(t){var e=new Mh(t,"root",this);return this._containerDom.appendChild(e._dom),e},e.prototype.isLayoutNeeded=function(){return this._layoutNeeded},e.prototype.invalidateLayout=function(){this._layoutNeeded||(this._layoutNeeded=!0,this.invalidate(!0))},e.prototype.cancelRequestAnimation=function(){var t=Et(this._doc);this._requestTimer&&t.cancelAnimationFrame(this._requestTimer)},e.prototype.invalidate=function(t){var e=Et(this._doc);this._updateRequested&&this._invalidated||!t&&this._drawing||(this._requestTimer||(this._requestTimer=e.requestAnimationFrame(this._containerRender)),this._updateRequested=!0,this._invalidated=!0)},e.prototype.invalidateElement=function(t){var e=Et(this._doc);this._drawing||this._updateRequested||(this._requestTimer||(this._requestTimer=e.requestAnimationFrame(this._containerRender)),this._updateRequested=!0)},e.prototype._render=function(t){if(!this.disposing){this._updateRequested=!1,this._drawing=!0;try{this._doBeforeRender(),this.$$_render(t)}finally{this._drawing=!1,this._invalidated=!1,this._requestTimer=null,this._doAfterRender()}}},e.prototype.$$_render=function(t){var e=this._containerDom,i=isNaN(this._testWidth)?e.clientWidth:this._testWidth,o=isNaN(this._testHeight)?e.clientHeight:this._testHeight;if(this._layoutChildren(new ot(0,0,i,o)),this._layoutNeeded)try{this._doLayout(new ot(0,0,i,o))}finally{this._layoutNeeded=!1}else this._doPrepareRender(new ot(0,0,i,o));this._doRenderHtml(new ot(0,0,i,o))},e.prototype._doLayout=function(t){},e.prototype._doAfterRender=function(){},e.prototype._doPrepareRender=function(t){},e.prototype._doRenderHtml=function(t){this._doDrawContainer(t),this._drawElement(this._rootElement),this._validateChildren(this._rootElement)},e.prototype._doDrawContainer=function(t){},e.prototype._drawElement=function(t){t.draw();for(var e=0,i=t.childCount;e<i;e++){var o=t.getChild(e);o.visible&&this._drawElement(o)}},e.prototype._validateChildren=function(t){for(var e=0,i=t.childCount;e<i;e++){t.getChild(e).validate()}},e.prototype._setFocusAndScroll=function(t){t.setFocus?t.setFocus():t.focus&&t.focus({preventScroll:!0})},e.prototype._registerEventHandlers=function(t,e,i){var o=Rt.isIEMode()?"mouse":"pointer",r=Rt.isSlotMode()?e.parentElement:It(t);t.style.cursor=this._defaultCursor,this.$_addListener(It(t),"resize",this._resizeHandler.bind(this),!1),this.$_addListener(r,"".concat(o,"move"),this._pointerMoveHandler.bind(this),!1),this.$_addListener(r,"".concat(o,"up"),this._pointerUpHandler.bind(this),!1),this.$_addListener(r,"focus",this._focusHandlerFireFox.bind(this),!0),this.$_addListener(r,"focusin",this._focusinHandler.bind(this),!0),this.$_addListener(r,"focusout",this._focusoutHandler.bind(this),!0),this.$_addListener(r,"".concat(o,"down"),this._globalPointerDownHandler.bind(this),!1),this.$_addListener(r,"keyup",this._globalKeyupHandler.bind(this),!1),this.$_addListener(r,"keydown",this._globalKeydownHandler.bind(this),!1),this.$_addListener(r,"scroll",this._scrollHandler,!0),e&&(this.$_addListener(e,"keydown",this._keyDownHandler.bind(this),!1),this.$_addListener(e,"keyup",this._keyUpHandler.bind(this),!1),this.$_addListener(e,"keypress",this._keyPressHandler.bind(this),!1),(Rt.isMobile()||i)&&(this.$_addListener(e,"copy",this._copyHandler.bind(this),!1),this.$_addListener(e,"cut",this._copyHandler.bind(this),!1),this.$_addListener(e,"paste",this._pasteHandler.bind(this),!1))),this.$_addListener(t,"click",this._clickHandler.bind(this),!1),!Rt.isMobile()&&this.$_addListener(t,"dblclick",this._dblclickHandler.bind(this),!1),this.$_addListener(t,"".concat(o,"down"),this._pointerDownHandler.bind(this),!1),this.$_addListener(t,"".concat(o,"enter"),this._pointerEnterHandler.bind(this),!1),this.$_addListener(t,"".concat(o,"leave"),this._pointerLeaveHandler.bind(this),!1),this.$_addListener(t,"".concat(o,"over"),this._pointerOverHandler.bind(this),!1),this.$_addListener(t,"".concat(o,"cancel"),this._pointerCancelHandler.bind(this),!1),this.$_addListener(t,"focus",this._focusHandler.bind(this),!1),this.$_addListener(t,"contextmenu",this._contextMenuHander.bind(this),!1),this.$_addListener(t,"blur",this._blurHandler.bind(this),!1),this.$_addListener(t,"selectstart",this._selectstartHandler.bind(this),!1),this.$_addListener(t,"wheel",this._wheelHandler.bind(this),!!Rt.isPassive()&&{capture:!1,passive:!1}),this.$_addListener(t,"touchmove",this._touchMoveHandler.bind(this),!1)},e.prototype.$_addListener=function(t,e,i,o){t in this._eventHandlers||(this._eventHandlers[t]={}),e in this._eventHandlers[t]||(this._eventHandlers[t][e]=[]),this._eventHandlers[t][e].push([i,o]),t.addEventListener(e,i,o),this._eventNodes.indexOf(t)<0&&this._eventNodes.push(t)},e.prototype.$_removeListener=function(t,e,i){if(t in this._eventHandlers){var o=this._eventHandlers[t];if(e in o){for(var r=o[e],n=r.length;n--;){var s=r[n];t.removeEventListener(e,s[0],s[1]),r.splice(n,1)}i&&delete o[e]}}},e.prototype.$_removeListenerAll=function(t){void 0===t&&(t=null);for(var e=t?[t]:this._eventNodes,i=0,o=e.length;i<o;i++){var r=e[i];if(r in this._eventHandlers){var n=this._eventHandlers[r];for(var s in n)for(var a=n[s],l=a.length;l--;){var h=a[l];r.removeEventListener(s,h[0],h[1])}}}},e.prototype.$_existListener=function(t,e){var i=this._eventHandlers[t];return i&&i[e]},e.prototype.addMouseEvent=function(t){Rt.isIEMode()||(this.$_addListener(this._rootElement._dom,"mousedown",this._mouseDownHandler.bind(this),{once:!0}),this.$_addListener(this._rootElement._dom,"mouseup",this._mouseUpHandler.bind(this),{once:!0}))},e.prototype.removeMouseEvent=function(){Rt.isIEMode()||(this.$_removeListener(this._rootElement._dom,"mousedown",!0),this.$_removeListener(this._rootElement._dom,"mouseup",!0))},e.prototype._doResized=function(t){var e=this;this._zoomRatio=Rt.getZoom(this._containerDiv),setTimeout((function(){e._zoomRatio=Rt.getZoom(e._containerDiv,!0)}),500)},e.prototype._isEnabled=function(){return!this.disposing&&this._activeTool&&!this._disabled},e.prototype._isOutChildElement=function(t){return!1},e.prototype.$_checkKeyElement=function(t){var e=It(t.target),i=t.target instanceof e.HTMLTableCellElement||t.target instanceof e.HTMLSpanElement;return t.target===t.currentTarget&&t.target===this._containerDom||i&&Rt.isAncestorOf(this._containerDom,t.target,t)},e.prototype.addPositionListener=function(t){this._positionListener.push(t)},e.prototype.removePositionListener=function(t){var e=this._positionListener.indexOf(t);e>=0&&this._positionListener.splice(e,1)},e.prototype._keyDownHandler=function(t){var e=this;if(this._isEnabled()&&this.$_checkKeyElement(t)){var i=t.code;if(Rt.isMobile()&&Rt.ctrlKey(t)&&Rt.included(i,"KeyC","KeyX","KeyV")){var o=document.createElement("input");o.style.position="absolute",o.style.width="0px",o.style.height="0px",o.style.top="-1000px",o.readOnly=!0,this._containerDom.appendChild(o),o.value="test",o.focus({preventScroll:!0}),o.select(),Rt.isiOS&&(t.preventDefault(),"KeyC"===i?document.execCommand("copy"):"KeyX"===i?document.execCommand("cut"):"KeyV"===i&&document.execCommand("paste")),setTimeout((function(){e.setFocus(),Rt.detach(o)}),10)}else this._activeTool.keyDown(t)}},e.prototype._keyUpHandler=function(t){this._isEnabled()&&this.$_checkKeyElement(t)&&this._activeTool.keyUp(t)},e.prototype._keyPressHandler=function(t){this._isEnabled()&&this.$_checkKeyElement(t)&&this._activeTool.keyPress(t)},e.prototype._copyHandler=function(t){this._isEnabled()&&!t.defaultPrevented&&this._activeTool.copyHandler(t)},e.prototype._pasteHandler=function(t){this._isEnabled()&&!t.defaultPrevented&&this._activeTool.pasteHandler(t)},e.prototype.eventToContainer=function(t){var e=this._containerDom.getBoundingClientRect(),i=this._zoomRatio;return 1==i&&i!=Rt.$$_zoom?new fa((t.clientX/Rt.$$_zoom-e.left)/i,(t.clientY/Rt.$$_zoom-e.top)/i):new fa((t.clientX-e.left)/i,(t.clientY-e.top)/i)},e.prototype.toOffset=function(t){var e=this._containerDom.getBoundingClientRect();return 1==this._zoomRatio&&this._zoomRatio!=Rt.$$_zoom?(t.mouseX=(t.clientX/Rt.$$_zoom-e.left)/this._zoomRatio,t.mouseY=(t.clientY/Rt.$$_zoom-e.top)/this._zoomRatio):(t.mouseX=(t.clientX-e.left)/this._zoomRatio,t.mouseY=(t.clientY-e.top)/this._zoomRatio),t},e.prototype.toOffsetTouch=function(t){var e=this._containerDom.getBoundingClientRect(),i=t.touches[0]||t.changedTouches[0];return t.mouseX=(i.clientX-e.left)/this._zoomRatio,t.mouseY=(i.clientY-e.top)/this._zoomRatio,t},e.prototype._clickHandler=function(t){this._clickTimer=this._clickTimer&&clearTimeout(this._clickTimer),this._isEnabled()?this._activeTool.click(this.toOffset(t)):t.preventDefault()},e.prototype._dblclickHandler=function(t){this._isEnabled()?this._activeTool.dblclick(this.toOffset(t)):t.preventDefault()},e.prototype.$_setMouseTarget=function(t){for(var e=It(this._containerDom),i=t.target;i&&!(i instanceof e.HTMLElement);)i=i.parentElement||i.parentNode;this.activeTool._mouseEventTarget=i instanceof e.HTMLElement?i:null},e.prototype.$_pointerDownHandler=function(t,i){if(this._isEnabled()){e.$_mouseContainer=this.$_hash,this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY;var o=this.findElementAt(this._currentX,this._currentY,!1);o&&o.getAncestor(Oh)&&0===t.button?(this.activeTool.setFocus(),this.activeTool!==this._scrollTool&&(this._scrollTool.previous=this.activeTool),this.activeTool=this._scrollTool):this.activeTool!==this._defaultTool&&(this._defaultTool.previous=this.activeTool,this.activeTool=this._defaultTool),this.$_setMouseTarget(t),i.call(this.activeTool,t)}else t.preventDefault();t.defaultPrevented||(this.activeTool._clickTarget=t.target)},e.prototype._pointerDownHandler=function(t){(Rt.isIEMode()||t.isPrimary)&&this.$_pointerDownHandler(t,this.activeTool.pointerDown)},e.prototype._mouseDownHandler=function(t){this.$_pointerDownHandler(t,this.activeTool.mouseDown)},e.prototype._mouseUpHandler=function(t){this.removeMouseEvent(),this.$_pointerUpHandler(t)},e.prototype._pointerMoveHandler=function(t){var i;if(this._containerDom.parentElement&&(Rt.isIEMode()||t.isPrimary)&&(this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled())){i=this._activeTool,this.$_setMouseTarget(t),i.pointerMove(t);var o=i.dragTracker;if(o&&o.linkable&&e.$_mouseContainer==this.$_hash)for(var r in e.$_Containers){var n=e.$_Containers[r];n!==this&&(i=n._activeTool)&&i.dragFrom(t,o)}}},e.prototype.$_pointerUpHandler=function(t){var i=e.$_mouseContainer==this.$_hash,o=this._activeTool;try{if(this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()){var r=o.dragTracker;if(this.$_setMouseTarget(t),o.pointerUp(t),o instanceof Th&&(this.activeTool=o.previous),r&&r.linkable&&i){var n=Rt.isMobile()&&document.elementFromPoint(t.clientX,t.clientY),s=this.findContainer(t,n);if(s&&s!==this){var a=s._activeTool;a&&a.dropFrom(t,r)}}}else t.preventDefault()}finally{o&&(this.setCursor("default"),o.dragTracker=null),i&&(e.$_mouseContainer=-1)}},e.prototype._pointerUpHandler=function(t){(Rt.isIEMode()||t.isPrimary)&&((this.activeTool.dragging||!this.$_existListener(this._rootElement._dom,"mouseup")||this.activeTool._longPressed)&&(this.removeMouseEvent(),this.$_pointerUpHandler(t)),Rt.isMobile()||!Rt.isSafari||t.defaultPrevented||this.activeTool._clickTarget!==t.target||(this._clickTimer=setTimeout((function(){var e=new PointerEvent("click",{bubbles:t.bubbles,cancelable:t.cancelable,view:t.view,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,button:t.button,buttons:t.buttons,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY});t.target.dispatchEvent(e)}),50)))},e.prototype._pointerEnterHandler=function(t){this._isEnabled()&&this._activeTool.mouseEnter(this.toOffset(t))},e.prototype._pointerLeaveHandler=function(t){this._isEnabled()&&this._activeTool.mouseLeave(this.toOffset(t))},e.prototype._pointerOverHandler=function(t){this._isEnabled()&&this._activeTool.mouseOver(this.toOffset(t))},e.prototype._pointerCancelHandler=function(t){this._isEnabled()&&this._activeTool.pointerCancel(this.toOffset(t))},e.prototype._contextMenuHander=function(t){this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.contextMenu(this.toOffset(t)))},e.prototype._wheelHandler=function(t){this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.mouseWheel(this.toOffset(t))&&Rt.stopEvent(t))},e.prototype._focusHandler=function(t){},e.prototype._blurHandler=function(t){},e.prototype._selectstartHandler=function(t){return!1},e.prototype._focusinHandler=function(t){},e.prototype._globalPointerDownHandler=function(t){Rt.isAncestorOf(this._containerDiv,t.target,t)||this._isOutChildElement(t)||this._isEnabled()&&this._activeTool.focusLeave(t)},e.prototype._globalKeyupHandler=function(t){this._activeTool.globalKeyup(t)},e.prototype._globalKeydownHandler=function(t){this._activeTool.globalKeydown(t)},e.prototype._focusoutHandler=function(t){var e=t.relatedTarget,i=t.target,o=!!this._focused,r=Rt.isAncestorOf(this._containerDiv,i,t),n=e&&Rt.isAncestorOf(this._containerDiv,e,t);if(!n){var s=!e;if((s=s||r&&!n&&!this._isOutChildElement(t))&&(this._focused=!1,this._isEnabled()&&this._activeTool.focusLeave(t)),!this._focused&&o!==!!this._focused){var a=Rt.isChromium?!t.relatedTarget&&!t.sourceCapabilities:void 0;this._focusChanged(this._focused,a,t)}}},e.prototype._focusHandlerFireFox=function(t){var e=!!this._focused;if(t.target===this._containerDom||Rt.isAncestorOf(this._containerDom,t.target,t)?this._isEnabled()&&!this._dummyFocus&&(this._focused=!0,this._activeTool.setFocus(t.target)):this._isOutChildElement(t)?this._focused=!0:this._containerDom.setAttribute("tabindex","0"),this._focused&&e!==!!this._focused){var i=Rt.isChromium?!t.relatedTarget&&!t.sourceCapabilities:void 0;this._focusChanged(this._focused,i,t)}},e.prototype._touchMoveHandler=function(t){if(!(t.touches.length>1))return this.toOffsetTouch(t),this._activeTool.touchMove(t)},e.$_Containers={},e.$_mouseContainer=-1,e.$_ActiveGrid=null,e}(Re),Lh=function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this,e,i)||this;return o._fixed=!1,o._index=new Ds,o}return o(e,t),e.prototype._doDispose=function(){this._index&&this._index.dispose(),this._index=null,this._cellDom=Rt.detach(this._cellDom),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"fixed",{get:function(){return this._fixed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},set:function(t){Ds.areEquals(this._index,t)||(this._index.assignFrom(t),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){return this._index.item},enumerable:!1,configurable:!0}),e.prototype.updateCell=function(t,e,i){i!=this._cellDom&&(i&&this._clearCellDom(i),this._clearCellCache(),this._cellDom=i),this.index=e.index,this._doPrepareValue(t,e),this._doUpdateContent(t,e,this._cellDom)},e.prototype.removeCellDom=function(t){void 0===t&&(t=!1),t&&this._cellDom&&this._clearCellDom(this._cellDom),this._cellDom=null,this._clearCellCache()},e.prototype._createDom=function(t){return null},e.prototype._clearCellDom=function(t){t.innerHTML=""},e.prototype._clearCellCache=function(){},Object.defineProperty(e.prototype,"valueColumn",{get:function(){return this._index.valueColumn},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataColumn",{get:function(){return this._index.dataColumn},enumerable:!1,configurable:!0}),e.prototype._changed=function(){this.invalidate()},e.prototype._doPrepareValue=function(t,e){},e.prototype._doUpdateContent=function(t,e,i){},e.prototype._doLayoutContent=function(t){},e}(Cl),Nh=function(t){function e(e,i,o){void 0===o&&(o="gridHeadCellView");var r=t.call(this,e,o)||this;return r._text="",r._styleName="",r._textChanged=!1,r._model=i,r}return o(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),e.prototype.setStyleName=function(t,e,i){i==this._styleName&&e==this._cellDom||(this._styleName=i,this._className="",this._setClassName(t))},e.prototype._getCssSelector=function(){return this._styleName},e.prototype._clearCellCache=function(){t.prototype._clearCellCache.call(this),this._textChanged=!0},e.prototype._doPrepareValue=function(t,e){this._model.headText!=this._text&&(this._text=this._model.headText||"",this._textChanged=!0)},e.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[Rt.TextProp]=this._text)},e}(Lh),$h=function(e){function i(t,i){var o=e.call(this,t,i,"chekHeadCellView")||this;return o._checked=!1,o._indeterminate=!1,o}return o(i,e),Object.defineProperty(i.prototype,"checked",{get:function(){return this._checked},set:function(t){this._checked=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"indeterminate",{get:function(){return this._indeterminate},set:function(t){this._indeterminate=t},enumerable:!1,configurable:!0}),i.prototype._clearCellCache=function(){this._check=this._image=this._span=this._label=null},i.prototype._doUpdateContent=function(e,i,o){var r,n=e.doc,s=this.model,a=s.showAll&&!s.exclusive;if(a&&!this._check){var l=this._check=n.createElement("input");l.id="$$-grid-head-check-"+this.model.$_hash,r=l.style,l.type="checkbox",l.className="rg-checkbox",l.tabIndex=-1,r.display=s.useImages?"none":"inline-block",o.appendChild(l);var h=this._image=n.createElement("span");(r=h.style).display=s.useImages?"inline-block":"none",o.appendChild(h);var u=this._label=n.createElement("label");u.setAttribute("for",this._check.id),u[Rt.TextProp]="grid head check",(r=u.style).display="none",o.appendChild(u)}if(a?(this._check.style.display=s.useImages?"none":"inline-block",this._image.style.display=s.useImages?"inline-block":"none",this._image.className=this._checked?"rg-checkbar-head-checked":this._indeterminate?"rg-checkbar-head-indeterminate":"rg-checkbar-head-unchecked",this._check.checked=this._checked,Rt.setInert(this._check,!e.accessibility),this._check.indeterminate=this._indeterminate):(Rt.detach(this._check),Rt.detach(this._image),Rt.detach(this._label),this._check=this._image=this._label=null),this._textChanged&&(this._span||(this._span=n.createElement("span"),this._span.style.display="block",o.appendChild(this._span)),this._span[Rt.TextProp]=this._text),a&&this._span&&this._text){var c=s.useImages?this._image:this._check,d=this._span,p=c.parentElement,f=null!=s.itemGap?s.itemGap+"px":"5px";switch((r=d.style).margin="",s.checkLocation){case t.ColumnHeaderItemLocation.BOTTOM:p.insertBefore(d,c),r.display="block",r.marginBottom=f;break;case t.ColumnHeaderItemLocation.LEFT:p.insertBefore(c,d),r.display="inline-block",r.marginLeft=f;break;case t.ColumnHeaderItemLocation.RIGHT:p.insertBefore(d,c),r.display="inline-block",r.marginRight=f;break;case t.ColumnHeaderItemLocation.TOP:default:p.insertBefore(c,d),r.display="block",r.marginTop=f}}},i.prototype.$_updateContent=function(){var t=this.model;t.showAll&&!t.exclusive&&this._check&&(this._check.checked=this._checked,this._check.indeterminate=this.indeterminate,this._image.className=this._checked?"rg-checkbar-head-checked":this._indeterminate?"rg-checkbar-head-indeterminate":"rg-checkbar-head-unchecked")},i}(Nh),Ah=function(t){function e(e){var i=t.call(this,e.doc,null,"gridHeadView")||this;i._cells=[];var o=e.doc;return i.addChild(i._indicatorCell=new Nh(o,e.rowIndicator)),i.addChild(i._stateCell=new Nh(o,e.stateBar)),i.addChild(i._checkCell=new $h(o,e.checkBar)),i}return o(e,t),e.prototype._doDispose=function(){this._cells=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"allChecked",{get:function(){return this._checkCell.checked},set:function(t){var e=this._checkCell;e.checked=t,e.$_updateContent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indeterminate",{get:function(){return this._checkCell.indeterminate},set:function(t){var e=this._checkCell;e.indeterminate=t,e.$_updateContent()},enumerable:!1,configurable:!0}),e.prototype.getHeadModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},e.prototype.getCellType=function(t){var e=this.getHeadModel(t);return e instanceof Xs?e.getCellType():void 0},e.prototype._getCssSelector=function(){return"rg-head"},e.prototype._doPrepareTableExtents=function(e){t.prototype._doPrepareTableExtents.call(this,e);var i,o=e.grid.rowBarContainer,r=o.getSectionObject();this._cells=[];for(var n=0,s=r;n<s.length;n++){var a=s[n];a instanceof ea&&(((i=this._indicatorCell).visible=i.model.visible)?(this._cells.push(i),i.width=o.rowIndicator.width):i.removeCellDom()),a instanceof oa&&(((i=this._stateCell).visible=i.model.visible)?(this._cells.push(i),i.width=o.stateBar.width):i.removeCellDom()),a instanceof na&&(((i=this._checkCell).visible=i.model.visible)?(this._cells.push(i),i.width=o.checkBar.width):i.removeCellDom(!0))}},e.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},e.prototype._doLayoutContent=function(t){var e=t.grid,i=this._cells.length;this._getTableRowCount(t);for(var o=this._thead,r=o&&o.children[0],n=0;n<i;n++){var s=this._cells[n],a=s.model;if(a.dirty||s._dirty||e._columnsDirty){var l=a.getHeadCell(),h=this._getTableCell(0,n),u=h.firstElementChild,c=this.$_getCellSelector()+" "+a.getHeadStyleName();if(r){var d=r.children[n];d&&(d[Rt.TextProp]=a.getCellType()+" head")}s.setStyleName(h,u,c),s.updateCell(e,l,u)}}},e.prototype._doRender=function(t){},e.prototype._doDraw=function(t){this._cells.forEach((function(t){t.validate()}))},e.prototype._getTableRowCount=function(t){return 1},e.prototype._getTableRowHeight=function(t,e){return this.height},e.prototype._getCellCount=function(t){return this._cells.length},e.prototype._getCellWidth=function(t,e){return this._cells[e].width},e.prototype._doPrepareTableRow=function(e,i,o,r){t.prototype._doPrepareTableRow.call(this,e,i,o,r);var n=e.grid.header.styleName;Rt.setClassName(r,n)},e.prototype.$_getCellSelector=function(){return e.CELL_CSS},e.CELL_CSS="rg-head-cell",e}(Rl),Vh=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._text="",e._styleName="",e._textChanged=!1,e}return o(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},set:function(t){t!==this._model&&(this._model=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t||"",this._textChanged=!0,this._changed())},enumerable:!1,configurable:!0}),e.prototype.setStyleName=function(t,e){e!=this._styleName&&(this._styleName=e,this._setClassName(t))},e.prototype._getCssSelector=function(){return this._styleName},e.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[Rt.TextProp]=this._text)},e.prototype._doRender=function(t){},e}(Lh),Bh=function(t){function e(e,i,o){var r=t.call(this,e,i,o)||this;r._cells=[],r._count=0;for(var n=0;n<3;n++)r.addChild(r._cells[n]=r._createCellElement(e));return r}return o(e,t),e.prototype._doDispose=function(){this._cells=null,t.prototype._doDispose.call(this)},e.prototype._getCellModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},e.prototype.getCellType=function(t){var e=this._getCellModel(t);return e instanceof Xs?e.getCellType():void 0},e.prototype._getCssSelector=function(){return this._domCssSelector},e.prototype._doPrepareTableExtents=function(e){t.prototype._doPrepareTableExtents.call(this,e);var i,o=e.grid.rowBarContainer,r=o.getSectionObject();this._count=0;for(var n=0,s=r;n<s.length;n++){var a=s[n];a.visible&&((i=this._cells[this._count++]).model=a,a instanceof ea?i.width=o.rowIndicator.width:a instanceof oa?i.width=o.stateBar.width:a instanceof na&&(i.width=o.checkBar.width))}},e.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},e.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._count,o=this._thead,r=o&&o.children[0];this.childCount<i;)this.addChild(this._cells[this.childCount]);for(;this.childCount>i;)this.removeLast();for(var n=0;n<i;n++){var s=this.getChild(n),a=s.model;if(a.dirty||e._columnsDirty){var l=this._sectionCell(a),h=this._getTableCell(0,n),u=h.firstElementChild,c=this._getSectionStyleName(a);if(r){var d=r.children[n];d&&(d[Rt.TextProp]=this._getHeadTrText(a))}s.setStyleName(h,c),s.text=this._getSectionText(a),s.updateCell(e,l,u)}}},e.prototype._doRender=function(t){},e.prototype._doDraw=function(t){this._cells.forEach((function(t){t.validate()}))},e.prototype._getTableRowCount=function(t){return 1},e.prototype._getTableRowHeight=function(t,e){return this.height},e.prototype._getCellCount=function(t){return this._count},e.prototype._getCellWidth=function(t,e){return this._cells[e].width},e.prototype._doPrepareTableRow=function(e,i,o,r){t.prototype._doPrepareTableRow.call(this,e,i,o,r)},e}(Rl),jh=function(t){function e(e){return t.call(this,e,"gridFootCellView")||this}return o(e,t),e}(Vh),Hh=function(t){function e(e){var i=t.call(this,e,null,"gridFootView")||this;return i._domCssSelector="rg-foot",i}return o(e,t),e.prototype.getFootModel=function(t){return this._getCellModel(t)},e.prototype._createCellElement=function(t){return new jh(t)},e.prototype._sectionCell=function(t){return t.getFootCell()},e.prototype._getSectionStyleName=function(t){return this.$_getCellSelector()+" "+t.getFootStyleName()},e.prototype._getHeadTrText=function(t){return t.getCellType()+" foot"},e.prototype._getSectionText=function(t){return t.footText},e.prototype.$_getCellSelector=function(){return"rg-foot-cell"},e}(Bh),Gh=function(t){function e(e){var i=t.call(this,e)||this;return i._datetimeFormat=Ge.DEFAULT_FORMAT,i._datetimeWriter=Ge.Default,i._numberFormatter=qe.getFormatter(i._numberFormat=qe.DEFAULT_FORMAT),i.assignFrom(Xe.format),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"textFormat",{get:function(){return this._textFormat},set:function(t){t!=this._textFormat&&(this._textFormat=t,this._textFormatter=t?Vn.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?Ge.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?qe.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?We.getFormatter(t):null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textFormatter",{get:function(){return this._textFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boolFormatter",{get:function(){return this._boolFormatter},enumerable:!1,configurable:!0}),e}(ml),Wh=function(t){function e(e){var i=t.call(this)||this;return i._message="",i._visible=!0,i._zIndex=void 0,i._styleName="rg-toast",i.assignFrom(e),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"message",{get:function(){return"string"==typeof this._message?this._message:this._message?this._message():void 0},set:function(t){this._message=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){this._styleName=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=t},enumerable:!1,configurable:!0}),e.prototype.assignFrom=function(e){"string"==typeof e?(this._message=e,this._message&&(this._visible=!0)):"boolean"==typeof e?this._visible=e:t.prototype.assignFrom.call(this,e)},e.prototype.toProxy=function(t){return{message:this.message,visible:this.visible,zIndex:this.zIndex,styleName:this.styleName}},e}(Lt),Uh=function(t){function e(e){var i=t.call(this)||this;return i._minWidth=0,i._maxWidth=0,i._dropdownCount=8,i._showing=!1,i.transitionend=function(t){var e=i._element;e.style.removeProperty("transition"),e.style.removeProperty("opacity"),e.removeEventListener("transitionend",i.transitionend),Rt.detach(e)},i._container=e,i._element=i.$_createElement(e.doc),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){this._minWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropDownCount",{get:function(){return this._dropdownCount},set:function(t){this._dropdownCount=t},enumerable:!1,configurable:!0}),e.prototype.show=function(t){this._showing=!0;try{this.$_show(t)}finally{this._showing=!1}},e.prototype.hide=function(t){var e=this._element;e&&e.parentNode&&(t?(e.addEventListener("transitionend",this.transitionend,{once:!0}),e.style.opacity="0"):Rt.detach(e))},e.prototype.$_createElement=function(t){var e=t.createElement("div");e.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),this.$_disableSelection(e);var i=this._span=t.createElement("span");return this.$_disableSelection(i),e.appendChild(i),e},e.prototype.$_show=function(t){var e=t.message;if(e){var i=this._element;if(i){var o=this._span,r=this._container._gridView.displayOptions;o.innerHTML=e,i.className=t.styleName;var n=i.style;i.removeEventListener("transitionend",this.transitionend),n.removeProperty("opacity"),n.removeProperty("transition"),n.position="absolute",n.overflow="hidden",n.zIndex=null!=t.zIndex?t.zIndex:r.toastZIndex,this._container._container.appendChild(i);var s=Rt.getSize(i),a=Rt.getSize(this._container._container),l=s.width+10,h=s.height+10,u=a.width,c=a.height;n.left=(u-l)/2+"px",n.top=(c-h)/2+"px";var d=t.fadeOut;if(d>0){n.opacity="1";var p=d/2;n.transition="opacity ".concat(p,"s ease ").concat(p,"s")}}}},e.prototype.$_disableSelection=function(t){void 0!==t.onselectstart?t.onselectstart=function(){return!1}:void 0!==t.style.MozUserSelect?t.style.MozUserSelect="none":t.onmousedown=function(){return!1}},e}(Lt),Yh=function(t){function e(e){var i=t.call(this)||this;return i._active=!1,i._container=e.container,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._active},enumerable:!1,configurable:!0}),e.prototype.show=function(t,e,i){var o=this;if(!this._active||e){this.close(!1);var r=t instanceof Wh?t:t?new Wh(t):null;if(r&&r.visible)return this._toast||(this._toast=new Uh(this._container)),this._toast.show(r),this._active=!0,void(i?setTimeout((function(){try{i()}finally{o.close(r.fadeOut>0)}}),0):r.fadeOut>0&&this.close(!0))}i&&i()},e.prototype.close=function(t){this._active&&(this._toast&&this._toast.hide(t),this._active=!1)},e}(Lt),zh=function(e){function i(t){var i=e.call(this,t)||this;return i._pageSorting=!1,i._toast=new Wh({visible:!1,message:i._messageCallback}),i.assignFrom(Xe.sorting),i}return o(i,e),i.prototype._doDispose=function(){this._toast=this._toast.dispose(),e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"enabled",{get:function(){var t=Xe.sorting.enabled;return void 0!==this._enabled?this._enabled:void 0===t||t},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._style||Xe.sorting.style||t.SortStyle.EXCLUSIVE},set:function(t){t!=this._style&&(this._style=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"handleVisibility",{get:function(){return this._handleVisibility||Xe.sorting.handleVisibility||t.HandleVisibility.VISIBLE},set:function(t){t!=this._handleVisibility&&(this._handleVisibility=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitBeforeSorting",{get:function(){var t=Xe.sorting.commitBeforeSorting,e=this._commitBeforeSorting;return void 0!==e?e:void 0===t||t},set:function(t){t!=this._commitBeforeSorting&&(this._commitBeforeSorting=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"keepFocusedRow",{get:function(){var t=Xe.sorting.keepFocusedRow,e=this._keepFocusedRow;return void 0!==e?e:void 0!==t&&t},set:function(t){t!=this._keepFocusedRow&&(this._keepFocusedRow=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textCase",{get:function(){return this._textCase||Xe.sorting.textCase||t.SortCase.SENSITIVE},set:function(t){t!=this._textCase&&(this._textCase=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showSortOrder",{get:function(){var t=Xe.sorting.showSortOrder,e=this._showSortOrder;return void 0!==e?e:void 0!==t&&t},set:function(t){t!=this._showSortOrder&&(this._showSortOrder=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pageSorting",{get:function(){return this._pageSorting},set:function(t){t!=this._pageSorting&&(this._pageSorting=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"toast",{get:function(){return this._toast},set:function(t){t&&!t.message&&(t=r(r({},t),{message:this._messageCallback})),this._toast&&this._toast.assignFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nullsOrder",{get:function(){return this._nullsOrder||Xe.sorting.nullsOrder||t.NullsOrder.DEFAULT},set:function(t){t!==this._nullsOrder&&(this._nullsOrder=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"outerSort",{get:function(){return this._outerSort},set:function(t){t!==this._outerSort&&(this._outerSort=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortDataRow",{get:function(){var t=Xe.sorting.sortDataRow,e=this._sortDataRow;return void 0!==e?e:void 0===t||t},set:function(t){t!==this._sortDataRow&&(this._sortDataRow=t,this._changed())},enumerable:!1,configurable:!0}),i.prototype.assignFrom=function(t){e.prototype.assignFrom.call(this,t),this.grid&&this.grid.sortOptionsChanged()},i.prototype._changed=function(){e.prototype._changed.call(this),this.grid&&this.grid.sortOptionsChanged()},i.prototype._messageCallback=function(){var t;return(null===(t=Xe.sorting.toast)||void 0===t?void 0:t.message)||Ue.messages.sortingToastMessage},i}(ml),qh=function(t){function e(e,i){return void 0===i&&(i=null),t.call(this,e,i)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){for(var t=this.parent;t;){if(t instanceof zc)return t;t=t.parent}return null},enumerable:!1,configurable:!0}),e.prototype.measure=function(t,e,i){return this._doMeasure(t,e,i)},e.prototype.layoutContent=function(t,e,i){this._doLayoutContent(t,e,i)},e.prototype._doMeasure=function(t,e,i){return new wl(e,i)},e.prototype._doLayoutContent=function(t,e,i){},e}(ga),Kh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._initDom=function(e){t.prototype._initDom.call(this,e)},e}(qh),Xh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(qh),Zh=function(t){function e(e){var i=t.call(this,e.doc,"fixedColumnBar")||this;return i._grid=e,i}return o(e,t),e.prototype._getCssSelector=function(){return bl.COLUMN_BAR_STYLE},e}(ga),Jh=function(t){function e(e,i){return void 0===i&&(i=null),t.call(this,e,i)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.layoutBars=function(t,e,i){this._layoutBars(t,e,i)},e.prototype._doLayoutContent=function(e,i,o){this._barView||(this._barView=this._createBar(e.grid),this.addChild(this._barView),this._barView2=this._createBar(e.grid),this.addChild(this._barView2)),t.prototype._doLayoutContent.call(this,e,i,o)},e.prototype._createBar=function(t){return new Zh(t)},e.prototype._layoutBars=function(t,e,i){var o=t.fixedBarWidth,r=t.footBounds.height;if(this._barView.visible=o>0,this._barView2.visible=!1,this._barView.visible){var n=Math.min(i-r,t.dataBounds.bottom);this._barView.setBounds(e-o,0,o,n),r>0&&(this._barView2.visible=!0,this._barView2.setBounds(e-o,i-r,o,r))}},e}(Xh),Qh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-right-column-bar"},e}(ga),tu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._createBar=function(){return new Qh(this.doc,"rightColumnBar")},e.prototype._layoutBars=function(t,e,i){var o=t.rightBarWidth,r=t.footBounds.height;if(this._barView.visible=o>0,this._barView2.visible=!1,this._barView.visible){var n=Math.min(i-r,t.dataBounds.bottom);this._barView.setBounds(0,0,o,n),r>0&&(this._barView2.visible=!0,this._barView2.setBounds(0,i-r,o,r))}},e}(Jh),eu=function(e){function i(i){var o=e.call(this,i)||this;return o._readOnly=!1,o._editable=!Rt.isMobile(),o._checkable=!0,o._updatable=!0,o._appendable=!1,o._insertable=!1,o._deletable=!1,o._revertable=!1,o._erasable=!1,o._movable=!1,o._commitByCell=!1,o._editWhenFocused=!1,o._commitWhenNoEdit=!1,o._commitWhenExitLast=!1,o._commitWhenLeave=!1,o._crossWhenExitLast=!1,o._validateOnEdited=!0,o._hintOnError=!0,o._showInvalidFormatMessage=!0,o._confirmWhenDelete=!0,o._editWhenClickFocused=!1,o._commitLevel=t.ValidationLevel.IGNORE,o._useTabKey=!0,o._useArrowKeys=!0,o._skipReadOnly=!1,o._skipReadOnlyCell=!1,o._verticalMoveStep=t.VerticalMoveStep.CELL,o._focusMoveStep=t.FocusMoveStep.CELL,o._enterToTab=!1,o._enterToNextCell=!0,o._enterToNextRow=!1,o._enterToEdit=!1,o._maxLengthToNextCell=!1,o._forceInsert=!1,o._forceAppend=!1,o._checkDiff=!1,o._checkCellDiff=!1,o._strictDiff=!1,o._deletableWhenEdit=!0,o._showCommitError=!1,o._firstCellWhenInsert=!1,o._appendWhenInsertKey=!1,o._appendWhenExitLast=!1,o._showOnlyValidationMessage=!0,o._displayEmptyEditRow=!1,o._buttonClickWhenSpace=!1,o._exitGridWhenTab=t.ExitGridWhenTab.NONE,o._cancelWhenLastUndo=!1,o._exceptDataClickWhenButton=!1,o._removeValidateOnCommit=!1,o._validateOnlyEditColumn=!1,o._columnEditableFirst=!1,o._currentChangingFirst=!1,o._movableWhenFocusedOnly=!1,o.assignFrom(Xe.edit),o}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},set:function(t){t!=this._readOnly&&(this._readOnly=t,this._refreshOwner(),this.$_invalidateEditor())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._refreshOwner(),this.$_invalidateEditor())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"columnEditableFirst",{get:function(){return this._columnEditableFirst},set:function(t){t!=this._columnEditableFirst&&(this._columnEditableFirst=t,this._refreshOwner(),this.$_invalidateEditor())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkable",{get:function(){return this._checkable},set:function(t){t!=this._checkable&&(this._checkable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"updatable",{get:function(){return this._updatable},set:function(t){t!=this._updatable&&(this._updatable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"appendable",{get:function(){return this._appendable},set:function(t){t!=this._appendable&&(this._appendable=t,this.displayEmptyEditRow=this._displayEmptyEditRow,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"insertable",{get:function(){return this._insertable},set:function(t){t!=this._insertable&&(this._insertable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deletable",{get:function(){return this._deletable},set:function(t){t!=this._deletable&&(this._deletable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"revertable",{get:function(){return this._revertable},set:function(t){t!=this._revertable&&(this._revertable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"erasable",{get:function(){return this._erasable},set:function(t){t!=this._erasable&&(this._erasable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitByCell",{get:function(){return this._commitByCell},set:function(t){t!=this._commitByCell&&(this._commitByCell=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editWhenFocused",{get:function(){return this._editWhenFocused},set:function(t){this._editWhenFocused=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitWhenNoEdit",{get:function(){return this._commitWhenNoEdit},set:function(t){this._commitWhenNoEdit=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitWhenExitLast",{get:function(){return this._commitWhenExitLast},set:function(t){this._commitWhenExitLast=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitWhenLeave",{get:function(){return this._commitWhenLeave},set:function(t){this._commitWhenLeave=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"crossWhenExitLast",{get:function(){return this._crossWhenExitLast},set:function(t){this._crossWhenExitLast=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"validateOnEdited",{get:function(){return this._validateOnEdited},set:function(t){this._validateOnEdited=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hintOnError",{get:function(){return this._hintOnError},set:function(t){this._hintOnError=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"removeValidateOnCommit",{get:function(){return this._removeValidateOnCommit},set:function(t){this._removeValidateOnCommit=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"validateOnlyEditColumn",{get:function(){return this._validateOnlyEditColumn},set:function(t){this._validateOnlyEditColumn=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deleteRowsMessage",{get:function(){return this._deleteRowsMessage||Ue.messages.deleteRowsMessage},set:function(t){this._deleteRowsMessage=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"invalidFormatMessage",{get:function(){return this._invalidFormatMessage||Ue.messages.invalidFormatMessage},set:function(t){this._invalidFormatMessage=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showInvalidFormatMessage",{get:function(){return this._showInvalidFormatMessage},set:function(t){this._showInvalidFormatMessage=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"confirmWhenDelete",{get:function(){return this._confirmWhenDelete},set:function(t){this._confirmWhenDelete=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editWhenClickFocused",{get:function(){return this._editWhenClickFocused},set:function(t){this._editWhenClickFocused=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitLevel",{get:function(){return this._commitLevel},set:function(t){this._commitLevel=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useTabKey",{get:function(){return this._useTabKey},set:function(t){this._useTabKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useArrowKeys",{get:function(){return this._useArrowKeys},set:function(t){this._useArrowKeys=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"skipReadOnly",{get:function(){return this._skipReadOnly},set:function(t){this._skipReadOnly=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"skipReadOnlyCell",{get:function(){return this._skipReadOnlyCell},set:function(t){this._skipReadOnlyCell=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"verticalMoveStep",{get:function(){return this._verticalMoveStep},set:function(t){this._verticalMoveStep=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focusMoveStep",{get:function(){return this._focusMoveStep},set:function(t){this._focusMoveStep=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enterToTab",{get:function(){return this._enterToTab},set:function(t){this._enterToTab=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enterToNextCell",{get:function(){return this._enterToNextCell},set:function(t){this._enterToNextCell=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enterToNextRow",{get:function(){return this._enterToNextRow},set:function(t){this._enterToNextRow=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enterToEdit",{get:function(){return this._enterToEdit},set:function(t){this._enterToEdit=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxLengthToNextCell",{get:function(){return this._maxLengthToNextCell},set:function(t){this._maxLengthToNextCell=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"forceInsert",{get:function(){return this._forceInsert},set:function(t){this._forceInsert=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"forceAppend",{get:function(){return this._forceAppend},set:function(t){this._forceAppend=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkDiff",{get:function(){return this._checkDiff},set:function(t){this._checkDiff=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkCellDiff",{get:function(){return this._checkCellDiff},set:function(t){this._checkCellDiff=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"strictDiff",{get:function(){return this._strictDiff},set:function(t){this._strictDiff=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"deletableWhenEdit",{get:function(){return this._deletableWhenEdit},set:function(t){this._deletableWhenEdit=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitEditingMessage",{get:function(){return this._commitEditingMessage||Ue.messages.commitEditingMessage},set:function(t){this._commitEditingMessage=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showCommitError",{get:function(){return this._showCommitError},set:function(t){this._showCommitError=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"firstCellWhenInsert",{get:function(){return this._firstCellWhenInsert},set:function(t){this._firstCellWhenInsert=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"appendWhenInsertKey",{get:function(){return this._appendWhenInsertKey},set:function(t){this._appendWhenInsertKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"appendWhenExitLast",{get:function(){return this._appendWhenExitLast},set:function(t){this._appendWhenExitLast=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showOnlyValidationMessage",{get:function(){return this._showOnlyValidationMessage},set:function(t){this._showOnlyValidationMessage=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"displayEmptyEditRow",{get:function(){return this._displayEmptyEditRow},set:function(t){var e=this.grid;this._displayEmptyEditRow=t,e.itemSource&&(this._displayEmptyEditRow&&this._appendable?e.itemSource.appendDummy():e.itemSource.cancelDummy(),this._refreshOwner())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonClickWhenSpace",{get:function(){return this._buttonClickWhenSpace},set:function(t){this._buttonClickWhenSpace=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exitGridWhenTab",{get:function(){return this._exitGridWhenTab},set:function(t){this._exitGridWhenTab=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cancelWhenLastUndo",{get:function(){return this._cancelWhenLastUndo},set:function(t){this._cancelWhenLastUndo=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exceptDataClickWhenButton",{get:function(){return this._exceptDataClickWhenButton},set:function(t){this._exceptDataClickWhenButton=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scrollOnEditing",{get:function(){return this._scrollOnEditing},set:function(t){this._scrollOnEditing=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentChangingFirst",{get:function(){return this._currentChangingFirst},set:function(t){this._currentChangingFirst=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"movableWhenFocusedOnly",{get:function(){return this._movableWhenFocusedOnly},set:function(t){this._movableWhenFocusedOnly=t},enumerable:!1,configurable:!0}),i.prototype.isWritable=function(){return this._editable&&!this._readOnly},i.prototype.canUpdate=function(t){return!this._readOnly&&(t||this._updatable)},i.prototype.canInsert=function(){return!this._readOnly&&this._insertable},i.prototype.canAppend=function(){return!this._readOnly&&this._appendable},i.prototype.canDelete=function(){return!this._readOnly&&this._deletable},i.prototype.$_invalidateEditor=function(){this.grid&&this.grid.requestPrepareEditor()},i}(ml),iu=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){this._cell=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"value",{set:function(t){this._value=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cell",{set:function(t){this._cell=t},enumerable:!1,configurable:!0}),e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_VALUE:return this._value;case e.ID_ROW:return this._cell.itemIndex+1;case e.ID_COLUMN_HEADER:var i=this._cell&&this._cell.column;return i&&i.header&&i.header.text?i.header.text:i.displayText}throw new $t("Invalid identifier key: "+t)},e.ID_VALUE=0,e.ID_ROW=1,e.ID_COLUMN_HEADER=2,e.IDENTS={value:e.ID_VALUE,row:e.ID_ROW,dcount:e.ID_COLUMN_HEADER},e}(Wt),ou=function(t){function e(e){var i=t.call(this,e)||this;return i._months=null,i._weekDays=null,i._viewGridInside=!1,i._holidays=null,i._dateCellEditor={},i._numberCellEditor={},i._dropdownCellEditor={},i._multiCheckCellEditor={},i._searchCellEditor={},i._showMarquee=!0,i._titleExprRuntime=new iu,i.assignFrom(Xe.editor),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat||Ue.messages.dateEditorYearDisplayFormat},set:function(t){this._yearDisplayFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat||Ue.messages.dateEditorMonthDisplayFormat},set:function(t){this._monthDisplayFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"months",{get:function(){return this._months||Ue.messages.dateEditorMonths},set:function(t){this._months=t.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weekDays",{get:function(){return this._weekDays||Ue.messages.dateEditorWeekDays},set:function(t){this._weekDays=t.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dateCellEditor",{get:function(){return this._dateCellEditor},set:function(t){this._dateCellEditor=r({},t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberCellEditor",{get:function(){return this._numberCellEditor},set:function(t){this._numberCellEditor=r({},t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropdownCellEditor",{get:function(){return this._dropdownCellEditor},set:function(t){this._dropdownCellEditor=r({},t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multiCheckCellEditor",{get:function(){return this._multiCheckCellEditor},set:function(t){this._multiCheckCellEditor=r({},t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"searchCellEditor",{get:function(){return this._searchCellEditor},set:function(t){this._searchCellEditor=r({},t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showMarquee",{get:function(){return this._showMarquee},set:function(t){this._showMarquee=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){this._viewGridInside=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"titleStatement",{get:function(){return this._titleStatement},set:function(t){t!=this._titleStatement&&(this._titleStatement=t,t?this._titleExprStatement?this._titleExprStatement.source=t:this._titleExprStatement=new rr(t):this._titleExprStatement=null,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"holidays",{get:function(){return this._holidays},set:function(t){t!=this._holidays&&(this._holidays=t,t?(this._holidayCollection=this._holidayCollection||new rl,this._holidayCollection.load(t)):this._holidayCollection&&this._holidayCollection.clear(),this._changed())},enumerable:!1,configurable:!0}),e}(ml),ru=function(t){function e(e){var i=t.call(this,e)||this;return i._enabled=!0,i.assignFrom(Xe.copy),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"singleMode",{get:function(){return this._singleMode},set:function(t){this._singleMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){this._datetimeFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){this._booleanFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(t){this._lookupDisplay=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"copyDisplayText",{get:function(){return this._copyDisplayText},set:function(t){this._copyDisplayText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"includeHeaderText",{get:function(){return this._includeHeaderText},set:function(t){this._includeHeaderText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"copyTextCallback",{get:function(){return this._copyTextCallback},set:function(t){this._copyTextCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cutReadOnlyCell",{get:function(){return this._cutReadOnlyCell},set:function(t){this._cutReadOnlyCell=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multiSelectionCopyFailText",{get:function(){return this._multiSelectionCopyFailText||Ue.messages.multiSelectionCopyFailText},set:function(t){this._multiSelectionCopyFailText=t},enumerable:!1,configurable:!0}),e}(ml),nu=function(t){function e(e){var i=t.call(this,e)||this;return i._enabled=!0,i._startEdit=!0,i._commitEdit=!0,i._enableAppend=!0,i._numberCharsOfCols={},i._numberSeparatorOfCols={},i._stopOnError=!0,i._throwValidationError=!0,i.assignFrom(Xe.paste),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"singleMode",{get:function(){return this._singleMode},set:function(t){this._singleMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startEdit",{get:function(){return this._startEdit},set:function(t){this._startEdit=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"commitEdit",{get:function(){return this._commitEdit},set:function(t){this._commitEdit=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableAppend",{get:function(){return this._enableAppend},set:function(t){this._enableAppend=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"forceAppend",{get:function(){return this._forceAppend},set:function(t){this._forceAppend=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillFieldDefaults",{get:function(){return this._fillFieldDefaults},set:function(t){this._fillFieldDefaults=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillColumnDefaults",{get:function(){return this._fillColumnDefaults},set:function(t){this._fillColumnDefaults=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"forceRowValidation",{get:function(){return this._forceRowValidation},set:function(t){this._forceRowValidation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"forceColumnValidation",{get:function(){return this._forceColumnValidation},set:function(t){this._forceColumnValidation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormats",{get:function(){return this._datetimeFormats},set:function(t){if(t!==this._datetimeFormats)if(this._datetimeFormats=t&&t.concat(),t){this._dateReaders=[];for(var e=0;e<this._datetimeFormats.length;e++)this._dateReaders.push(new Mt(this._datetimeFormats[e]))}else this._dateReaders=null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dateReaders",{get:function(){return this._dateReaders},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolReader=t&&new Tt(t))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boolReader",{get:function(){return this._boolReader},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberChars",{get:function(){return this._numberChars},set:function(t){if(t!==this._numberChars)if(this._numberChars=t,t&&t.length>0){for(var e="[",i=0;i<t.length;i++){var o=t[i];e+="\\"==o?"\\"+o:o}e+="]",this._numberCharExp=new RegExp(e,"g")}else this._numberCharExp=null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberSeparator",{get:function(){return this._numberSeparator},set:function(t){this._numberSeparator=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberCharsOfCols",{get:function(){return this._numberCharsOfCols},set:function(t){if(t!==this._numberCharsOfCols&&(this._numberCharsOfCols=t,this._numberCharExpOfCols={},t))for(var e in t){var i=t[e];if(i instanceof Array&&i.length>0){for(var o="[",r=0,n=i.length;r<n;r++){var s=i[r];o+="\\"==s?"\\"+s:s}o+="]",this._numberCharExpOfCols[e]=new RegExp(o,"g")}else this._numberCharExpOfCols[e]=null}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberCharExp",{get:function(){return this._numberCharExp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberSeparatorOfCols",{get:function(){return this._numberSeparatorOfCols},set:function(t){this._numberSeparatorOfCols=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectionBase",{get:function(){return this._selectionBase},set:function(t){this._selectionBase=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectBlockPaste",{get:function(){return this._selectBlockPaste},set:function(t){this._selectBlockPaste=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stopOnError",{get:function(){return this._stopOnError},set:function(t){this._stopOnError=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noEditEvent",{get:function(){return this._noEditEvent},set:function(t){t!=this._noEditEvent&&(this._noEditEvent=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noDataEvent",{get:function(){return this._noDataEvent},set:function(t){this._noDataEvent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventEachRow",{get:function(){return this._eventEachRow},set:function(t){this._eventEachRow=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checkReadOnly",{get:function(){return this._checkReadOnly},set:function(t){this._checkReadOnly=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checkDomainOnly",{get:function(){return this._checkDomainOnly},set:function(t){this._checkDomainOnly=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"convertLookupLabel",{get:function(){return this._convertLookupLabel},set:function(t){this._convertLookupLabel=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"applyNumberFormat",{get:function(){return this._applyNumberFormat},set:function(t){this._applyNumberFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"applyEditMask",{get:function(){return this._applyEditMask},set:function(t){this._applyEditMask=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"applyMaxLength",{get:function(){return this._applyMaxLength},set:function(t){this._applyMaxLength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"applyInputChars",{get:function(){return this._applyInputChars},set:function(t){this._applyInputChars=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"throwValidationError",{get:function(){return this._throwValidationError},set:function(t){this._throwValidationError=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multiSelectionPasteFailText",{get:function(){return this._multiSelectionPasteFailText||Ue.messages.multiSelectionPasteFailText},set:function(t){this._multiSelectionPasteFailText=t},enumerable:!1,configurable:!0}),e.prototype.numberCharExpOfCol=function(t){return t&&this._numberCharExpOfCols&&this._numberCharExpOfCols[t]?this._numberCharExpOfCols[t]:this._numberCharExp},e.prototype.numberSeparatorOfCol=function(t){return t&&this._numberSeparatorOfCols&&this._numberSeparatorOfCols[t]?this._numberSeparatorOfCols[t]:this._numberSeparator},e}(ml),su=function(t){function e(e){var i=t.call(this,e)||this;return i._longTapDuration=500,i._doubleTapInterval=500,i._tapThreshold=10,i._showEditCommander=!1,i._showTooltip=!1,i._scrollPropagate=!0,i.assignFrom(Xe.mobile),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"longTapDuration",{get:function(){return this._longTapDuration},set:function(t){t!=this._longTapDuration&&(this._longTapDuration=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doubleTapInterval",{get:function(){return this._doubleTapInterval},set:function(t){t!=this._doubleTapInterval&&(this._doubleTapInterval=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tapThreshold",{get:function(){return this._tapThreshold},set:function(t){t!=this._tapThreshold&&(this._tapThreshold=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showEditCommander",{get:function(){return this._showEditCommander},set:function(t){t!=this._showEditCommander&&(this._showEditCommander=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollOnEditing",{get:function(){return this.grid.editOptions.scrollOnEditing},set:function(t){this.grid.editOptions.scrollOnEditing=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollPropagate",{get:function(){return this._scrollPropagate},set:function(t){this._scrollPropagate=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showSelectionHandle",{get:function(){return this._showSelectionHandle},set:function(t){t!=this._showSelectionHandle&&(this._showSelectionHandle=t,this._changed())},enumerable:!1,configurable:!0}),e}(ml),au=function(t){function e(e){var i=t.call(this)||this;return i._grid=e,i}return o(e,t),e.prototype._doDispose=function(){this._grid=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),e.prototype.canFocus=function(){return!0},e}(bh),lu=function(t){function e(e,i){var o=t.call(this,e)||this;return o._style=i,o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"style",{get:function(){return this._style},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"manager",{get:function(){return this.grid.selections},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(function(t){function e(e){var i=t.call(this,e.grid)||this;return i._index=e,i}return o(e,t),e.prototype._doDispose=function(){this._index.dispose(),this._index=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),e}(au)),hu=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._doDispose=function(){this._layout=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,i,o){return this._layout=t,this._x=e,this._y=i,this._offset=o,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"col-resize"},enumerable:!1,configurable:!0}),e}(au),uu=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._doDispose=function(){this._layout=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},set:function(t){this._offset=t},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,i,o){return this._layout=ps.getSource(t),this._x=e,this._y=i,null!=o&&(this._offset=o),this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"default"},enumerable:!1,configurable:!0}),e}(au),cu=function(t){function e(e){var i=t.call(this,e)||this;return i._itemIndex=-1,i._variable=!1,i._rowTop=0,i._offset=0,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"itemIndex",{get:function(){return this._itemIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"variable",{get:function(){return this._variable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowTop",{get:function(){return this._rowTop},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,i,o){return this._itemIndex=t,this._variable=e,this._rowTop=i,this._offset=o,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"row-resize"},enumerable:!1,configurable:!0}),e.prototype.canFocus=function(){return!1},e}(au),du=function(t){function e(e){var i=t.call(this,e)||this;return i._offset=0,i._top=0,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"top",{get:function(){return this._top},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e){return this._top=t,this._offset=e,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"row-resize"},enumerable:!1,configurable:!0}),e}(au),pu=function(e){function i(t){var i=e.call(this,t)||this;return i._itemIndex=-1,i._offset=0,i._layout=null,i}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"itemIndex",{get:function(){return this._itemIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"offset",{get:function(){return this._offset},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),i.prototype.init=function(e,i){return this._selStyle=e&&e.style,this._selStyle&&this._selStyle!=t.SelectionStyle.COLUMNS&&this._selStyle!=t.SelectionStyle.SINGLE_COLUMN?(this._itemIndex=e.getBounds().top,this._layout=e.startLayout,this._offset=i-this._itemIndex):(this._itemIndex=i,this._offset=0,this._layout=null),this},Object.defineProperty(i.prototype,"cursor",{get:function(){return this.grid.dataDropOptions.cursor},enumerable:!1,configurable:!0}),i.prototype.canFocus=function(){return this._selStyle==t.SelectionStyle.COLUMNS||this._selStyle==t.SelectionStyle.SINGLE_COLUMN},i}(au),fu=function(t){function e(e){var i=t.call(this)||this;return i._type=e,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"inputFocusable",{get:function(){return this._inputFocusable},set:function(t){this._inputFocusable=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dom",{get:function(){return this._dom},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemClickable",{get:function(){return this._itemClickable},set:function(t){this._itemClickable=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){return this._index&&this._index.grid.handler},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showTooltip",{get:function(){return this._showTooltip},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refreshFocusChanged",{get:function(){return this._refreshFocusChanged},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clickOnlyFocusedCell",{get:function(){return this._clickOnlyFocusedCell},enumerable:!1,configurable:!0}),e.prototype._doRenderCell=function(t,e,i,o,r){var n={};n.focused=i.focused,this.render(t.handler,e,o,r,n)},e.prototype.tooltip=function(t,e){},e.prototype.canEdit=function(){return t.prototype.canEdit.call(this)},e.prototype.canClick=function(e){return t.prototype.canClick.call(this,e)},e.prototype.canEditClickAt=function(e){return t.prototype.canEditClickAt.call(this,e)},e.prototype.canClickSpaceKey=function(e){return t.prototype.canClickSpaceKey.call(this,e)},e.prototype.click=function(e,i,o){return t.prototype.click.call(this,e,i,o)},e.prototype.itemClick=function(e){t.prototype.itemClick.call(this,e)},e.prototype.preventDefaultEditClick=function(e){t.prototype.preventDefaultEditClick.call(this,e)},e.prototype.preventDefaultClick=function(e){t.prototype.preventDefaultClick.call(this,e)},e.prototype._doEditClick=function(e,i,o){return t.prototype._doEditClick.call(this,e,i,o)},e}(zr),_u=function(t){function e(e,i){var o=t.call(this)||this;return o._inputFocusable=!1,o._tags={},e&&"function"==typeof e.render?(o._impl=e,o._impl.type=i,o.assignFrom(o._impl)):o._impl=null,o._itemClickable=!0,o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"inputFocusable",{get:function(){return this._inputFocusable},set:function(t){this._inputFocusable!==t&&(this._inputFocusable=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tags",{get:function(){return this._tags},set:function(t){this._tags=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){return this.index.grid.handler},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._impl&&this._impl.type},enumerable:!1,configurable:!0}),e.prototype._doInitContent=function(t){this._impl&&this._impl.initContent&&this._impl.initContent.call(this,t)},e.prototype._doClearContent=function(t){this._impl&&this._impl.clearContent&&this._impl.clearContent.call(this,t)},e.prototype._doRenderCell=function(t,e,i,o,r){var n={};n.focused=i.focused,this._impl&&this._impl.render&&this._impl.render.call(this,t.handler,e,o,r,n)},e.prototype.preventDefaultEditClick=function(e){return this._impl&&this._impl.preventEditClick?this._impl.preventEditClick.call(this,e):t.prototype.preventDefaultEditClick.call(this,e)},e.prototype._doEditClick=function(e,i,o){return this._impl&&this._impl.editClick?this._impl.editClick.call(this,e,i,o):t.prototype._doEditClick.call(this,e,i,o)},e.prototype.canEditClickAt=function(e){return this._impl&&this._impl.canEditClickAt?this._impl.canEditClickAt.call(this,e):t.prototype.canEditClickAt.call(this,e)},e.prototype.preventDefaultClick=function(e){return this._impl&&this._impl.preventClick?this._impl.preventClick.call(this,e):t.prototype.preventDefaultClick.call(this,e)},e.prototype._doClick=function(e,i){return this._impl&&this._impl.click?this._impl.click.call(this,i):t.prototype._doClick.call(this,e,i)},e.prototype._doEditKey=function(e,i,o){return this._impl&&this._impl.editKey?this._impl.editKey.call(this,i,o):t.prototype._doEditKey.call(this,e,i,o)},e.prototype.canClick=function(e){return this._impl&&this._impl.canClick?this._impl.canClick.call(this,e):t.prototype.canClick.call(this,e)},e.prototype.canEdit=function(){return this._impl&&this._impl.canEdit?this._impl.canEdit.call(this):t.prototype.canEdit.call(this)},e.prototype.canEditKey=function(e){return this._impl&&this._impl.canEditKey?this._impl.canEditKey.call(this,e):t.prototype.canEditKey.call(this,e)},e}(zr),gu=function(t){function e(e,i,o,r){var n=t.call(this)||this;return n._row=e,n._field=i,n._value=o,n._column=r,n._oldValue=Rt.deepCopy(e.getData(i)),n}return o(e,t),e.prototype.undo=function(){this._row.setData(this._field,this._oldValue),this.$_focusCell()},e.prototype.redo=function(){this._row.setData(this._field,this._value),this.$_focusCell()},e.prototype.$_focusCell=function(){var t=this._column.grid,e=t.focusedIndex.clone();e.layout=this._column.layout,t.setFocusedIndex(e),t.makeCellVisible(e)},e}(hi),yu=function(e){function i(t){var i=e.call(this)||this;return i._editIndex=new Ds,i._starting=!1,i._needPrepare=!1,i._needDropdown=!1,i._modified=!1,i._commiting=!1,i._canceling=!1,i._resetting=!1,i._dirty=!1,i._editable=!1,i._readOnly=!1,i._grid=t,i._access=t.accessibility,i._access||(i._defaultEditor=t.delegate.getDefaultCellEditor(),i._defaultEditor&&i._defaultEditor.setController(i),i._defaultEditor&&i._internalHideEditor(i._defaultEditor)),i}return o(i,e),i.prototype._doDispose=function(){this._grid=null,this._editIndex&&this._editIndex.dispose(),this._editIndex=null,this._editor&&this._editor.dispose(),this._editor=null,this._defaultEditor&&this._defaultEditor.dispose(),this._defaultEditor=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},enumerable:!1,configurable:!0}),i.prototype.onEditorStart=function(t){if(!t.visible&&!this._commiting&&!this._canceling)return this._activateEditor(!1,!1)},i.prototype.onEditorKeyDown=function(t,e){var i=Rt.ctrlKey(e);return t&&(t.textReadOnly||i||e.altKey||!this._isEditKey(e.keyCode)?t.textReadOnly?t._editor.readOnly=t.textReadOnly:229==e.keyCode&&t.setReadOnly(this._readOnly):t.setReadOnly(this._readOnly)),this._grid.activeTool.keyDown(e)},i.prototype.onEditorKeyPress=function(t,e){return this._grid.activeTool.keyPress(e)},i.prototype.onEditorKeyUp=function(t,e){return this._grid.activeTool.keyUp(e)},i.prototype.onEditorChange=function(t){if(this._modified||(this._modified=!0,this._grid._editorStarted(t,this._editIndex)),this.editing){this._grid.makeCellVisible(this._editIndex);var e=t.getEditValue(!1,!1);e=e===Ma.Unselected?t.getEditText():e,this._grid._editorChange(t,this._editIndex,e)}},i.prototype.onEditorSearch=function(t,e){this._grid._editorSearch(this._editor,this._editIndex,e)},i.prototype.onSearchCellButtonClick=function(t,e){return this._grid._searchCellButtonClick(this._editor,this._editIndex,e)},i.prototype.onEditorCommit=function(t){return this.commitEditor(!0,!1,!0,!1)},Object.defineProperty(i.prototype,"editIndex",{get:function(){return this._editIndex.clone()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editing",{get:function(){return this._editor&&this._editor.editing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"editValue",{get:function(){return this._editor&&this._editor.value},enumerable:!1,configurable:!0}),i.prototype.setFocus=function(e,i){var o;if(i&&(!this._editor||i!==this._editor.editor)){var r=It(i),n=this._grid,s=void 0,a=null===(o=this._editor)||void 0===o?void 0:o.editor;if((i instanceof r.HTMLInputElement||i instanceof r.HTMLSelectElement||i instanceof r.HTMLTextAreaElement)&&(s=n.getTableCell(i))){var l=n.getCellType(s),h=n.getTableView(s),u=h&&h.tableCellByCell&&h.tableCellByCell(s);if(l===t.GridCellType.DATA){var c=this._grid.focusedIndex.clone(),d=this._grid.getBodyCellAt(c,!0),p=d&&d.renderer2;if((p instanceof _n||p instanceof _u||p instanceof fu)&&p.inputFocusable)return;a&&(a.tabIndex=-1)}else if(l===t.GridCellType.INLINE_FILTER){if(n.isItemEditing()&&n.filterPanel.beforeCommit&&n.commit(!1),!n.isEditing())return a&&(a.tabIndex=0),void n.makeColumnVisible(u.layout&&u.layout.firstColumn)}else if(Rt.included(l,t.GridCellType.HEADER,t.GridCellType.LAYOUT_HEADER,t.GridCellType.FOOTER,t.GridCellType.SUMMARY)&&!u.isClickableElt(i)&&Rt.isFocusableTemplate(s,i))return}}this.$_focusToEditor(e,i)},i.prototype.resetEditor=function(t){if(this.editing){if(this._grid.isValid(this._editIndex)){if(this._resetBounds(),t&&this.editing){var e=this.getData(this._editIndex);this._resetting=!0;try{this._editor.setEditValue(e),this._editor.beginEdit(!1,!0)}finally{this._resetting=!1}}}else this.hideEditor();return!0}},i.prototype.invalidateEditor=function(){this._dirty=!0},i.prototype.closeList=function(t){this._editor&&this._editor.closeList(t)},i.prototype.focusedIndexChanging=function(){return!this.editing||(this.closeList(!0),this.commitEditor(!0,!1,!0,!1))},i.prototype.focusedIndexChanged=function(t,e,i){this._hideEditor(),this._grid.isValid(e)&&(i?this._prepareEditor(e):this._needPrepare=!0)},i.prototype.prepareEditor=function(t){this._needPrepare&&(this._needPrepare=!1,this._grid.isValid(t)&&(this._prepareEditor(t),this._needDropdown=!1))},i.prototype.requestPrepareEditor=function(t){this._needPrepare=!0,this._needDropdown=t},i.prototype.showEditor=function(t,e){var i=this._grid,o=this._editor;if(i&&i.isValid(t)&&t.item.canEdit()){if(o&&o.editing)return i.makeCellVisible(t),!0;if(o&&!o.editing&&(!this._showEditorTimer&&this._prepareEditor(t),i.makeCellVisible(t),this._activateEditor(!1,!0,e)))return!0}},i.prototype.showList=function(t){var e=this._grid,i=this._editor;if(i&&i.editing&&(e.makeCellVisible(t),this.cancelEditor(!0)),e&&e.isValid(t)&&(this._prepareEditor(t),e.makeCellVisible(t),i&&this._editable&&!i.editing))return i.dropDownList(!0),!0},i.prototype.caretToLast=function(){this._editor&&this._editor.caretToLast()},i.prototype.hideEditor=function(){if(this.editing){this._modified=!1,this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}},i.prototype.commitEditor=function(t,e,i,o){if(!this.editing||this._commiting)return!0;var r=this._editor;if(!r)return!1;var n,s,a=this._grid,l=a.validationManager,h=a.editOptions,u=this._editIndex,c=u.dataColumn,d=!0,p=r._mask;this._commiting=!0;try{if(r.commit(),(this._modified||r.isEdited())&&c&&c.dataIndex>=0)try{try{if((n=p&&!p.checkValid()?Ma.InvalidFormat:r.getEditValue(!0,!0))===Ma.InvalidFormat)d=!1,h.showInvalidFormatMessage&&p&&p.showInvalidFormatMessage&&alert(p&&p.invalidFormatMessage||h.invalidFormatMessage);else if(n===Ma.Unselected)this._modified=!1,d=!0;else{var f=this._getData(u),_={text:r.getEditText(),value:n,oldValue:f},g=r.getEditListItem();g&&(_.item=g),d=this._grid.getEditValue(r,u,_),n=_.value,"boolean"!=typeof d&&(d=o||this._grid.editorCommit(u,f,n))}}catch(t){d=!1}this._grid.isItemEditing()?d&&n!==Ma.Unselected&&(this._setData(u,n),this._grid.isItemEditing(u.item)&&(n=this._getData(u),this._grid.validateCellCommit(u,n)),this._modified=!1):this._modified=!1}catch(t){s=t,d=!1}if(this._resetting=!0,d&&t)try{this._internalHideEditor(r),this._prepareEditor(u,i),r.isEdited()||this._grid.activeTool.resetFocused()}finally{this._resetting=!1}if(s){if(e)throw s;h.showCommitError&&alert(s.message||s)}}finally{this._commiting=!1}if(d&&a.isCellEditing()){var y=a.itemSource,m=y.editingItem.invalidFields;if(a.editOptions.validateOnEdited){var b=l.getError(u);if(b)return m.push(c.dataIndex),h.showCommitError&&alert(b.userMessage||b.message||b),!1;m.indexOf(c.dataIndex)>=0&&m.splice(m.indexOf(c.dataIndex),1),l.clearInvalidCell(u)}if(m.length>0)return!0;var v=a.canMergeEditing(a.getBodyCellAt(u,!0));if(!y.commit(v))return y.cancel(),!0;l.cloneError(-1,u.dataId),l.clearInvalidCells(-1);var w=Ds.temp(a,u.itemIndex,c);if(v&&n!==Ma.Unselected){var C=c.layout.merges.getRoom(u),x={},I={};I[c.fieldName]=n;for(var S=C.head;S<=C.tail;S++){var E=a.getItem(S);w.itemIndex=E.index,E.isDataRow&&(x[E.dataRow]=I),a.editOptions.validateOnEdited&&l.clearInvalidCell(w)}y.updateRows2(x)}}return d},i.prototype.cancelEditor=function(t){if(this.editing){this._canceling=!0;try{try{this._modified=!1,this._grid.editorCancel(this._editor,this._editIndex)}catch(t){throw t}this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}finally{this._canceling=!1,this._grid.editorCanceled()}if(this._grid.editOptions.commitByCell){var e=this._grid.itemSource;e.isUpdating&&e.cancel()}}},i.prototype.fillSearchItems=function(t,e,i,o,r){this.editing&&this._editIndex.column===t&&this._editor instanceof Xa&&this._editor.fillItems(e,i,o,r)},i.prototype.buttonClicked=function(t,e){var i=this._editor,o=this._grid,r=o.getBodyCellAt(t,!1),n=t.layout.getDataColumn();i&&Ds.areEquals(this._editIndex,t)&&i.hasButton(o.displayOptions.showNativeEditButton,r.editor||n.editor)&&i.buttonClicked(this._editIndex,e)},i.prototype.buttonDown=function(t,e){this._editor&&this._editor.buttonDown(t,e)},i.prototype.buttonUp=function(t,e){this._editor&&this._editor.buttonUp(t,e)},i.prototype.getData=function(t){return this._getData(t)},i.prototype.setEditValue=function(t,e){this._editor&&this._editor.setCellEditValue(t,e)},i.prototype.currentEditor=function(){return this._editor},i.prototype.detachEditors=function(){for(var t=this._grid.delegate.editors,e=0,i=Object.keys(t);e<i.length;e++){t[i[e]].detach()}},i.prototype.attachEditor=function(t,e){var i=this._editor,o=this._editIndex,r=this._grid;i&&r&&r.isValid(o)&&this._access&&(i.attach(t),i.setInert(e))},i.prototype._internalHideEditor=function(t){this.closeList(!1),t.setVisible(!1,!1),t.endEdit(),!this._grid._loading&&this._grid._fireHideEditor(t.editIndex)},i.prototype.$_hideEdit=function(t,e){e&&(e.setEditIndex(t),e.setVisible(!1),this.$_focusToEditor())},i.prototype.$_getCellEditor=function(t){var e,i=this._grid,o=i.getBodyCellAt(t);if(!(e=o&&o.editor)){var r=t.valueColumn;r&&(e=r.editor)}var n=i.delegate.getCellEditor(Ma.getEditorType(e));return n&&(n.initOptions(),n.initDefaultOptions(),e&&n.applyOptions(e),n.setController(this)),n},i.prototype.resetEditable=function(e){var i=this._editor;if(!i)return!1;var o=this._grid;i.setReadOnly(!1);var r=o.editorOptions,n=e.valueColumn,s=e.item,a=o.canEditAt(e);if(r._titleExprStatement&&this._editor.setEditorTitle(e),!a)return this._editable=!1,this.$_hideEdit(e,this._editor),!1;var l=!o.canWriteAt(e);if(!l){var h=s.dataSource,u=h?h.getField(e.dataField):null;l=!u||u.dataType==t.ValueType.OBJECT&&null==(n.objectKey||u.objectKey)}return this._readOnly=l,this._editor.setReadOnly(this._readOnly),this._editor.setEditIndex(e),this._editable=!0,!0},i.prototype._prepareEditor=function(t,e){void 0===e&&(e=!0);var i=this._grid.editOptions;if(this._dirty=!1,this._grid.isValid(t)&&t.item.canEdit()&&(this._hideEditor(e),this._editor=this.$_getCellEditor(t),this._editor)){this._editIndex.assign(t);var o=this._getData(t);this.resetEditable(t)?(this._editor.prepare(),this._editor.setEditValue(o),this._editor.selectAll(),(!i.editWhenFocused&&!this._needDropdown||this._editor.editing)&&this._editor.setVisible(!1),e&&this.$_focusToEditor()):this._editor&&(this._editor.editor.value=this._editor._valToStr(o))}},i.prototype._hideEditor=function(t){if(this._editor)try{this._editor.setVisible(!1)}finally{this._editor.unprepare(),this._editor.endEdit(),this._access&&this._editor.setInert(!1),this._editor=null,this._editable=!1}},i.prototype._initEditor=function(t,e,i){this._dirty&&(this._dirty=!1,this._starting||this._prepareEditor(this._editIndex));var o=this._editor;o&&(o.endEdit(),this._resetBounds(),o.setVisible(!0,!0),o.beginEdit(t,e),t&&o.clear(),e&&o.selectAll(),i&&o.dropDownList(!1),i||this.$_focusToEditor(!0))},i.prototype.$_setEditorAttrs=function(t){var e=this._editor;if(e)for(var i in t)"callback"!=i&&(void 0===t[i]?e._editor.removeAttribute(i):e._editor.setAttribute(i,t[i]))},i.prototype._editorActivated=function(t){this._grid.editorActivated(t)},i.prototype._activateEditor=function(t,e,i){void 0===i&&(i=!1);var o=this._grid,r=this._editor,n=this._editIndex,s={},a={};if(this._editable&&r&&!r.editing&&o.$_canShowEditor(n,s,a)){s.type&&(r=this._editor=o.delegate.getCellEditor(Ma.getEditorType(s.type))||r),Rt.isEmpty(s)||(r.applyOptions(s),r.setEditIndex(n));var l=r._editor;return r.textReadOnly?r.textReadOnly&&l&&(l.readOnly=r.textReadOnly):r.setReadOnly(this._readOnly),this.$_setEditorAttrs(a),this._access&&this._editor.setInert(!0),this._initEditor(t,e,i),this._modified=!1,this._editorActivated(this._editor),this._showEditorTimer=clearTimeout(this._showEditorTimer),a&&"function"==typeof a.callback&&a.callback(),!0}return!1},i.prototype._resetBounds=function(){if(this._editor){var t=this._grid.getEditCellBounds(this._editor,this._editIndex);this._access&&(t.x=t.y=0);var e=this._grid.getEditBounds(this._editor,this._editIndex).width;Rt.isMobile()&&Rt.isiOS&&(e-=3),t.x--,t.y--,t.width++,t.height++,Rt.isMobile()&&(t.y-=1,t.height+=2),this._editor.setBounds(t.x,t.y,t.width,t.height,e),t=this._grid.getEditCellBounds(this._editor,this._editIndex),this._editor.setCellBounds(t.x,t.y,t.width,t.height)}},i.prototype.$_focusToEditor=function(t,e){var i=this._grid;if(t||i.$_editFocused){var o=this._editor||this._defaultEditor;i.$_showFocusCell=i.$_showFocusCell||e&&o&&e!==o._editor,i.container._setFocusAndScroll(o),this.editing||this._editor&&this._editor.selectAll()}},i.prototype._getData=function(t){var e=t.dataColumn,i=t.item;if(e&&i&&i.isDataRow){var o=e.dataIndex;if(o>=0)return i.getData(o)}},i.prototype._setData=function(t,e){var i=t.item;if(i){var o=t.dataColumn.dataIndex;o>=0&&(this._grid.undoable?this._grid.execute(new gu(t.item,o,e,t.column)):i.setData(o,e))}},i.prototype._isEditKey=function(t){return 8==t||t>=46&&t<=90||t>=96&&t<=111||t>=186&&t<=222||13==t&&this._grid.editOptions.enterToEdit},i}(Lt),mu=function(t){function e(e,i,o){var r=t.call(this,e,i,o)||this;return r._col=-1,r._colChanged=!1,r}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.getCellIndex=function(t){return t.parentElement[y]},e.prototype.refresh=function(t,e){for(var i=0;i<e;i++){var o=this._getTableCell(i);o[b]=t.isFocusedRow(o.parentElement[y]),Rt.setClassName(o,this.$_getCellSelector(o))}},e.prototype._createDom=function(){return null},e.prototype._prepareContent=function(t,e){var i=St(t).createElement("div");return this._prepareCellContent(i,t),i},e.prototype._clearCellContent=function(t){var e=t.firstElementChild;e&&Rt.detach(e)},e.prototype._prepareCellContent=function(t,e){},e.prototype._updateCellContent=function(t,e,i,o){i[this._textProp]=e.text},e.prototype._doRender=function(t){},e.prototype.$_setCol=function(t){(this._colChanged=t!=this._col)&&(this._col=t)},e.prototype._layoutCell=function(t,e,i){if(this._colChanged){i.removeAttribute("rowspan"),i.style.removeProperty("display");var o=i.firstElementChild;this._clearCellContent(o),this._prepareCellContent(o,i)}},e.prototype._getTableCell=function(t){return this.parent._tbody.children[t].children[this._col]},e.prototype.$_getCellSelector=function(t){var e=this.model.cellStyleCallback,i=this.grid,o=t.parentElement[y],r=i.getItem(o),n=i.getCellType(t);if(e){var s=e(this.grid.handler,n,null==r?void 0:r.index);return s?" "+s:""}return""},e}(Sl),bu=function(e){function i(t,i){return e.call(this,t,i,"rowIndicatorView")||this}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype._getCssSelector=function(){return"rg-rowindicator"},i.prototype.measureWidth=function(t){var e=this.model,i=e.width;if(0==i&&t.dataSource){var o=t.dataSource.rowCount+"";i=t.container.measureText("rg-rowindicator-cell",o)+1}return i=Math.max(e.minWidth>0?e.minWidth:i,Math.min(e.maxWidth>0?e.maxWidth:i)),e._displayWidth=i,i},i.prototype._layoutCell=function(t,i,o){if(e.prototype._layoutCell.call(this,t,i,o),i){var r=this.model.getCell(i);Rt.setClassName(o,this.$_getCellSelector(o)),this._updateCellContent(t,r,o.firstElementChild,o)}},i.prototype.$_getCellSelector=function(i){var o=this.grid,r=i.parentElement[y],n=i[b],s=this.model,a="rg-rowindicator-cell";if(-99===r)return bl.ROW_BAR_CELL_STYLE;if(n){a+=s.showFocus?" rg-rowindicator-focus":"";var l=o.getItem(r);Rt.isDebugging();var h=l&&l.itemState;Vo(h)?a+=" rg-rowindicator-inserting":h==t.ItemState.UPDATING&&(a+=" rg-rowindicator-editing")}else o.isSelectedItem(r)&&s.showSelection&&(a+=" rg-rowindicator-select");return a+=e.prototype.$_getCellSelector.call(this,i)},i}(mu),vu=function(e){function i(t,i){var o=e.call(this,t,i,"stateBarView")||this;return o._textMark=!1,o}return o(i,e),i.prototype.rowOf=function(t){return t.parentElement[y]},i.prototype._getCssSelector=function(){return"rg-statebar"},i.prototype.measureWidth=function(t){return t.stateBar.width},i.prototype._layoutCell=function(i,o,r){if(e.prototype._layoutCell.call(this,i,o,r),o){var n=this.model,s=n.mark;this._textMark=s==t.StateMark.TEXT;var a=n.getCell(o);Rt.setClassName(r,this.$_getCellSelector(r)),this._updateCellContent(i,a,r.firstElementChild,r)}},i.prototype._updateCellContent=function(t,e,i,o){i[Rt.TextProp]=this._textMark&&e.text||""},i.prototype.$_getCellSelector=function(i){var o=this.grid,r=o.getItem(i.parentElement[y]),n=i.parentElement[y],s=i[b],a=this.model,l=a.mark==t.StateMark.IMAGE,h="rg-statebar-cell ";if(-99===n)return bl.ROW_BAR_CELL_STYLE;if(s?a.showFocus&&(h+=" rg-statebar-focus"):n>=0&&a.showSelection&&this.grid.isSelectedItem(n)&&(h+=" rg-statebar-select"),o.isItemEditing(r)&&this._error&&this.model.errorVisible)switch(this._error.level){case t.ValidationLevel.INFO:h+=" rg-statebar-info";break;case t.ValidationLevel.WARNING:h+=" rg-statebar-warning";break;case t.ValidationLevel.ERROR:h+=" rg-statebar-error"}else if(r&&n>=0&&l){switch(r.rowState){case t.RowState.UPDATED:h+=" rg-statebar-updated";break;case t.RowState.CREATED:h+=" rg-statebar-created";break;case t.RowState.DELETED:h+=" rg-statebar-deleted";break;case t.RowState.CREATE_AND_DELETED:h+=" rg-statebar-create-and-deleted"}}return h+=e.prototype.$_getCellSelector.call(this,i)},i}(mu),wu=function(t){function e(e,i){var o=t.call(this,e,i,"checkBarView")||this;return o._fixedCount=0,o._prevChecked=-1,o._exclusive=!1,o._typeChanged=!1,o._useImage=!1,o._imageChanged=!1,o}return o(e,t),e.prototype.rowOf=function(t){return t.parentElement[y]},e.prototype._getCssSelector=function(){return"rg-checkbar"},e.prototype._doPrepareContent=function(t){var e=t.grid.checkBar;(this._typeChanged=e.exclusive!==this._exclusive)&&(this._exclusive=e.exclusive),(this._imageChanged=e.useImages!==this._useImage)&&(this._useImage=e.useImages)},e.prototype._clearCellContent=function(e){e[this._textProp]="",t.prototype._clearCellContent.call(this,e)},e.prototype._prepareCellContent=function(t,i){var o=St(t),r=e.FOR_ID+this.rowOf(i)+"-"+this.model.$_hash,n=o.createElement("input"),s=n.style;n.type=this._exclusive?"radio":"checkbox",n.id=r,n.tabIndex=-1,n.className=this._exclusive?"rg-radio":"rg-checkbox",s.display=this._useImage?"none":"inline-block",t.appendChild(n);var a=o.createElement("span");(s=a.style).display=this._useImage?"inline-block":"none",t.appendChild(a);var l=o.createElement("label");l.setAttribute("for",r),(s=l.style).display="none",t.appendChild(l)},e.prototype.measureWidth=function(t){return this.model.width},e.prototype._layoutCell=function(e,i,o){t.prototype._layoutCell.call(this,e,i,o);var r=i&&this.model.getCell(i);Rt.setClassName(o,this.$_getCellSelector(o)),o.style.display="",o.removeAttribute("rowspan");var n=e.fixedOptions.rowCount,s=e.checkBar;if(s._merged&&i){var a=s._merges,l=i.itemIndex;if(l=l<n?l:l-e.layoutManager.topIndex,a.isMerged(l,n))if(a.isHidden(l,n))o.style.display="none",o.removeAttribute("rowspan");else{var h=a.getMerged(l,n);o.rowSpan=h}else o.removeAttribute("rowspan")}r&&this._updateCellContent(e,r,o.firstElementChild.firstElementChild,o)},e.prototype._updateCellContent=function(t,i,o,r){var n=i.item,s=o,a=t.checkBar,l=t.editOptions,h=e.FOR_ID+this.rowOf(r)+"-"+this.model.$_hash;n&&(s.checked=n.checked,s.indeterminate=n.indeterminate,s.disabled=!l.checkable||!n.checkable),s.id=h,Rt.setInert(s,!t.accessibility);var u=r.firstElementChild,c="none",d=a.showGroup&&a.fieldIndex<0&&!a.merged;n instanceof Go||n instanceof In?c="":n instanceof Yo?a.showGroupFooter&&d&&(c=""):n instanceof Wo&&d&&(c=""),u.style.display=c;var p=this._useImage;this._typeChanged&&(s.setAttribute("type",this._exclusive?"radio":"checkbox"),s.className=this._exclusive?"rg-radio":"rg-checkbox");var f=s.nextElementSibling;if(this._imageChanged&&f&&(s.style.display=p?"none":"inline-block",f.style.display=p?"inline-block":"none"),p&&f){var _=this._exclusive?"rg-checkbar-radio":"rg-checkbar";!this._exclusive&&n.indeterminate?_+=" ".concat(n.indeterminate?"indeterminate":""):_+="".concat(n.checked?"-checked":"-unchecked"),_+=" ".concat(s.disabled?"disabled":""),f.className=_.trim()}var g=f.nextElementSibling;g.removeAttribute("for"),g.setAttribute("for",h),g[Rt.TextProp]=this.rowOf(r)+1+" row "+(n&&n.checkable?n.checked?"checked":"unchecked":"check disable")},e.prototype.getCheckBox=function(t){return t.firstElementChild.firstElementChild},e.prototype.$_getCellSelector=function(i){var o=e.CELL_CSS,r=i[b],n=this.model,s=i.parentElement[y],a=this.grid.getItem(s);return o+=a&&a.checkable?"":" rg-checkbar-disabled",-99===s?bl.ROW_BAR_CELL_STYLE:(r?n.showFocus&&(o+=" rg-checkbar-focus"):n.showSelection&&this.grid.isSelectedItem(s)&&(o+=" rg-checkbar-select"),o+=t.prototype.$_getCellSelector.call(this,i))},e.prototype.$_setPrevChecked=function(t){this._prevChecked=t},e.FOR_ID="$$-check-bar-cell",e.CELL_CSS="rg-checkbar-cell",e}(mu),Cu=function(e){function i(t){var i=e.call(this,t.doc,null,"rowBarContainer")||this;i._bars=[],i._views=[],i._count=0;var o=t.doc;return i.addChild(i._indicatorView=new bu(o,t.rowIndicator)),i.addChild(i._stateView=new vu(o,t.stateBar)),i.addChild(i._checkView=new wu(o,t.checkBar)),i}return o(i,e),i.prototype._doDispose=function(){this._bars=this._views=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"rowIndicator",{get:function(){return this._indicatorView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stateBar",{get:function(){return this._stateView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkBar",{get:function(){return this._checkView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bars",{get:function(){return this._bars},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stateError",{get:function(){return this._stateView._error},set:function(t){this._stateView._error=t},enumerable:!1,configurable:!0}),i.prototype.isVisible=function(){return!!this._bars.length},i.prototype.getCellIndex=function(t){return t.parentElement[y]},i.prototype.refresh=function(t){var e=this;this._views&&this._views.forEach((function(i){i.visible&&i.refresh(t,e._count+(t.fixedOptions.rowCount>0?1:0))}))},i.prototype.rowOf=function(t){return t.parentElement[y]},i.prototype.getCheckBox=function(t){return this._checkView.getCheckBox(t)},i.prototype.getCellType=function(e){var i=this._views[e.cellIndex];return i instanceof bu?t.GridCellType.INDICATOR:i instanceof vu?t.GridCellType.STATE:i instanceof wu?t.GridCellType.CHECK:void 0},i.prototype.isRowIndicator=function(t){return this._views[t.cellIndex]instanceof bu},i.prototype.getSectionObject=function(t){void 0===t&&(t=!1);var e=this.getChildren().map((function(t){return t.model}));return(e=e.filter((function(e){return!t||e.visible?e:void 0}))).sort((function(t,e){var i=t.displayOrder,o=e.displayOrder;return i==o?t.staticOrder-e.staticOrder:i-o}))},i.prototype._getCssSelector=function(){return"rg-rowbarcontainer"},i.prototype._getFirstCell=function(t){return 0},i.prototype._getEndCell=function(t){return this._bars.length},i.prototype._isFixedHeight=function(){return!0},i.prototype._doPrepareContent=function(t){if(this._views.length){this._dirty&&this._dom.appendChild(this._table);for(var i=0,o=this._views;i<o.length;i++){var r=o[i];(r._dirty||r.model.dirty)&&r._doPrepareContent(t)}}else Rt.detach(this._table);e.prototype._doPrepareContent.call(this,t)},i.prototype._prepareCellContent=function(t,e){return this._views[e]._prepareContent(t,e)},i.prototype._getTableRowHeight=function(t,e){var i=t.fixedItemCount;return i>0&&e>i?t.getTableItemHeight(e-1):t.getTableItemHeight(e)},i.prototype._doMeasure=function(t,e,i){this.$_prepareBars(t);for(var o=0,r=0,n=this._views;r<n.length;r++){var s=n[r];o+=s.width=s.measureWidth(t)}return new wl(o,i)},i.prototype._doLayoutContent=function(t){for(var e=t.grid,i=t.topIndex,o=t.itemCount,r=t.fixedItemCount,n=this._count=r+o,s=this._bars.length,a=e.focusedRow,l=this._views,h=this._thead,u=h&&h.children[0],c=e.displayOptions.useAlternateRowStyle,d=0;d<n;d++){var p=d<r?d:d+i,f=Ds.temp(e,p),_=this._getTableRow(t,d);Rt.setClassName(_,this.getStyleName(f.item,f.itemIndex%2&&c)),_[y]=p;for(var g=0;g<s;g++){var m=_.cells[g];if(m[b]=p==a,l[g]._layoutCell(e,f,m),0===d&&u){var v=u.cells[g];v&&(v[Rt.TextProp]=this.getCellType(m)+" column")}}}r>0&&this._layoutFixedBar(e.fixedOptions,r)},i.prototype._doUpdateCellContent=function(t,e,i){i[this._textProp]=e.text},i.prototype._doRender=function(t){},i.prototype._doDraw=function(t){this._views.forEach((function(t){t.validate()}))},i.prototype._getCellCount=function(t){return this._bars.length},i.prototype._getCellWidth=function(t,e){return this._views[e].width},i.prototype.$_prepareBars=function(t){for(var e=this._bars=this.getSectionObject(!0),i=this._views=[],o=0,r=e.length;o<r;o++){var n=e[o],s=void 0;(s=n instanceof ea?this._indicatorView:n instanceof oa?this._stateView:this._checkView).$_setCol(o),s._colChanged=s._colChanged||n.visChanged,i.push(s),n.visChanged=!1}this.getChildren().forEach((function(t){t instanceof mu&&(t.visible=i.indexOf(t)>=0)}))},i.prototype._layoutFixedBar=function(t,e){var i=this._tbody.children[e];i[m]=e,i[y]=-99,Rt.setClassName(i,bl.ROW_BAR_STYLE);for(var o=0;o<i.childElementCount;o++){var r=i.children[o];r[b]=!1;var n=this._views[o];n._colChanged&&n._layoutCell(this.grid,null,r),Rt.setClassName(r,bl.ROW_BAR_CELL_STYLE)}},i.prototype.getStyleName=function(t,e){var o=i.ROW_STYLE;return o+=yl.STATE_ROW_STYLES[t.rowState]||"",(o+=e?i.ALTERNATE_ROW_STYLE:"").trim()},i.ROW_STYLE="rg-row-bar",i.ALTERNATE_ROW_STYLE=" rg-alternate-row-bar",i}(Pl),xu=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"targetElement",{get:function(){return this._targetElement},set:function(t){this._targetElement=t},enumerable:!1,configurable:!0}),e}(au),Iu=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e}(xu),Su=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"handle",{get:function(){return this._handle},set:function(t){this._handle=t},enumerable:!1,configurable:!0}),e}(xu),Eu=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),Object.defineProperty(e.prototype,"request",{get:function(){return this._request},set:function(t){this._request=t},enumerable:!1,configurable:!0}),e.prototype.stop=function(){},e.prototype.end=function(t){this._doEnd(t)},e.prototype._doEnd=function(t){},e.prototype.getRequest=function(){return this._request},e}(lh),Ou=function(e){function i(t){var i=e.call(this,t,"mobileBodyScrollTracker")||this;return i._tapX=NaN,i._tapY=NaN,i._vertical=!0,i}return o(i,e),i.prototype._doDispose=function(){this._grid=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"clickable",{get:function(){return void 0===this._scrolling},enumerable:!1,configurable:!0}),i.prototype._doStart=function(e,i,o,r){var n=this._grid;if(n.isEditing())switch(n.mobileOptions.scrollOnEditing){case t.ScrollOnEditing.CANCEL:n.cancelEditor(!0);break;case t.ScrollOnEditing.COMMIT:n.commitEditor(!0);case t.ScrollOnEditing.DEFAULT:}return this._scrolling=void 0,this._dragTableItemPoints=n.layoutManager._tableItemPoints,this._dragTopIndex=n.topIndex,this._dragLeftPos=n.leftPos,this._doDrag(e,i,o,r),!0},i.prototype._doDrag=function(t,e,i,o){var r=this._grid,n=r.activeTool,s=e-this._tapX,a=i-this._tapY,l=n.findElementAt(o.mouseX,o.mouseY,!1);if(this._vertical=!(l instanceof th)&&Math.abs(2*a)>=Math.abs(s),this._vertical){if(Math.abs(a)>10){var h=r.topIndex,u=r.layoutManager.fullItemCount,c=r.itemCount;if(u===c)return this._scrolling=!1,!1;if(void 0===this._scrolling){if(h+u>=c&&a<0||0==h&&a>0)return this._scrolling=!1,!1;this._scrolling=!0}else if(this._scrolling){for(var d=0,p=this._dragTableItemPoints;++d<p.length&&!(p[d]>=Math.abs(a)););r.topIndex=this._dragTopIndex+--d*(a>0?-1:1)}}}else Math.abs(s)>10&&(this._scrolling=!0,r.leftPos=this._dragLeftPos-s);return!0},i.prototype._doEnd=function(t){this._scrolling=void 0},i.prototype._doCanceled=function(t,e){this._scrolling=void 0},i.prototype._doInit=function(t,e,i){this._tapY=e,this._tapX=t,this._scrolling=void 0},i}(Eu),Ru=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._doStart=function(t,e,i,o){return!0},e.prototype._doDrag=function(t,e,i,o){var r=this._grid.pointToIndex(null,e,i,!1);if(r&&r.itemIndex>=0){var n=this.request.handle,s=n.selectionMask.item;s&&s.inflate(n.dir,r)}return!0},e}(Eu),Pu=function(t){function e(e,i){var o=t.call(this,e.doc,"mobileSelectionHandle")||this;return o._dir=i,o._owner=e,o}return o(e,t),e.prototype._doDispose=function(){this._owner=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"selectionMask",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dir",{get:function(){return this._dir},enumerable:!1,configurable:!0}),e.prototype._getCssSelector=function(){return e.STYLE_NAME+this._dir+"-handle"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),e.style.background="red"},e.prototype._doDraw=function(){},e.STYLE_NAME="rg-selection-handle",e}(_a),ku=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype._doDispose=function(){},e.prototype.getSelectHandle=function(t){for(var e in this._views){var i=this._views[e];if(i.leftHandle._dom===t)return i.leftHandle;if(i.topHandle._dom===t)return i.topHandle;if(i.bottomHandle._dom===t)return i.bottomHandle;if(i.rightHandle._dom===t)return i.rightHandle}},e.prototype.addView=function(t){var e=t.$_hash,i=this._views[e];return i||(i=this._pool.pop()||new Tu(this.doc),this._views[e]=i),i._item=t,this.addChild(i),this.addChild(i.leftHandle),this.addChild(i.topHandle),this.addChild(i.bottomHandle),this.addChild(i.rightHandle),i},e.prototype.clearViews=function(){for(var t in this._views){var e=this._views[t];this.removeChild(e.leftHandle),this.removeChild(e.topHandle),this.removeChild(e.bottomHandle),this.removeChild(e.rightHandle),this.removeChild(e),this._pool.push(e)}this._views={}},e.prototype.layout=function(){var t=this._grid.layoutManager,e=new ot;for(var i in this._views){var o=this._views[i],r=o.item,n=!1,s=new ot;if(o.prepare(),r instanceof Ea){n=this.$_getMobileSelectionRowsRect(t,r,o,s);var a=t.gridBounds;e.set(s.x,s.y,a.width,s.height),o._lefted=!0,o._righted=!0}else r instanceof Oa||(n=this.$_getMobileSelectionRangeRect(t,r,o,s,e));if(n){var l=t.footerBounds.y+t.contentBounds.y;s.bottom>l&&(o._bottomed=!0,s.bottom=l)}o.visible=n,o.visible&&(o.setRectI(s),o.updateElement(),this._layoutHandle(o,s,e),o.invalidate(!1,!0))}},e.prototype._layoutHandle=function(t,e,i){var o,r,n=13,s=13,a=this._grid.mobileOptions.showSelectionHandle;!t._lefted&&a?(t.leftHandle.visible=!0,o=i.x-6.5,r=e.y+(e.height-n)/2,t.leftHandle.setBounds(o,r,s,n)):t.leftHandle.visible=!1,o=i.x+(i.width-s)/2,r=e.y-6.5,!t._toped&&o>=e.x&&a?(t.topHandle.visible=!0,t.topHandle.setBounds(o,r,s,n)):t.topHandle.visible=!1,r=e.bottom-6.5,!t._bottomed&&o>=e.x&&a?(t.bottomHandle.visible=!0,t.bottomHandle.setBounds(o,r,s,n)):t.bottomHandle.visible=!1,!t._righted&&a?(t.rightHandle.visible=!0,o=i.right-6.5,r=e.y+(e.height-n)/2,t.rightHandle.setBounds(o,r,s,n)):t.rightHandle.visible=!1},e.prototype.$_getMobileSelectionRowsRect=function(e,i,o,r){return t.prototype.$_getSelectionRowsRect.call(this,e,i,o,r)},e.prototype.$_getMobileSelectionColumnsRect=function(e,i,o,r){return t.prototype.$_getSelectionColumnsRect.call(this,e,i,o,r)},e.prototype.$_getMobileSelectionRangeRect=function(e,i,o,r,n){return!(i instanceof Sa&&i.move)&&t.prototype.$_getSelectionRangeRect.call(this,e,i,o,r,n)},e}(ka),Tu=function(t){function e(e){var i=t.call(this,e)||this;return i._leftHandle=new Pu(i,"left"),i._topHandle=new Pu(i,"top"),i._bottomHandle=new Pu(i,"bottom"),i._rightHandle=new Pu(i,"right"),i}return o(e,t),e.prototype._doDispose=function(){this._leftHandle=this._leftHandle.dispose(),this._topHandle=this._topHandle.dispose(),this._bottomHandle=this._bottomHandle.dispose(),this._rightHandle=this._rightHandle.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"leftHandle",{get:function(){return this._leftHandle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHandle",{get:function(){return this._topHandle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHandle",{get:function(){return this._bottomHandle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightHandle",{get:function(){return this._rightHandle},enumerable:!1,configurable:!0}),e.prototype.prepare=function(){t.prototype.prepare.call(this)},e.prototype.updateElement=function(){t.prototype.updateElement.call(this)},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("overflow","hidden"),this.setImportantStyle("pointer-events","none")},e.prototype._visibleChanged=function(){this._leftHandle.visible=this._topHandle.visible=this._bottomHandle.visible=this._rightHandle.visible=this.visible},e}(Pa),Du=function(){function e(){}return e.assignData=function(t){var i=new e;return Object.keys(t).forEach((function(e){return i[e]=t[e]})),i},e.getData=function(t){var i=new e;return i.cellType=t,i},e.getSub=function(t,i){var o=new e;return o.cellType=t,o.subType=i,o},e.getField=function(t,i,o){var r=new e;return r.cellType=t,r.field=r.fieldIndex=i,r.fieldName=o,r},e.getItem=function(t,i,o){var r=new e;return r.cellType=t,r.itemIndex=i,null!=o&&(r.dataRow=o),r},e.getLayout=function(i,o){var r=new e;return r.cellType=i,o instanceof vs?(r.subType=t.GridCellType.LAYOUT_HEADER,r.column=o.name):(r.column=o.firstColumn&&o.firstColumn.name,o.firstColumn instanceof ls&&(r.field=r.fieldIndex=o.firstColumn.dataIndex,r.fieldName=o.firstColumn.fieldName)),r},e.getCell=function(i,o,r){var n=new e;i===t.GridCellType.DATA&&(n.editable=o.editable,n.readOnly=o.readonly);var s=o.layout;return n.cellType=i,n.itemIndex=r?r.itemIndex:o.item.index,n.dataRow=r?r.dataRow:o.item.dataRow,n.column=o.layout.firstColumn&&o.layout.firstColumn.name,s.firstColumn instanceof ls&&(n.field=n.fieldIndex=s.firstColumn.dataIndex,n.fieldName=s.firstColumn.fieldName),n.fieldName&&(n.value=r.value),n},e.getGroupFooter=function(t,i,o,r){var n=new e,s=o.firstColumn;return n.cellType=t,n.itemIndex=i,n.index=r,n.column=s&&s.name,s instanceof ls&&(n.field=n.fieldIndex=s.dataIndex,n.fieldName=s.fieldName),n},e.getSummary=function(t,i,o){var r=new e;return r.cellType=t,r.index=i,r.column=o.firstColumn&&o.firstColumn.name,o.firstColumn instanceof ls&&(r.field=r.fieldIndex=o.firstColumn.dataIndex,r.fieldName=o.firstColumn.fieldName),r},e.getGroupElt=function(t,i){var o=new e;return o.cellType=t,o.groupLevel=i,o},e}(),Mu=function(e){function i(i,o){var r=e.call(this,i,"focusView")||this;return r._editing=!1,r._focusType=t.FocusType.LAYER,r._inner=o,r}return o(i,e),Object.defineProperty(i.prototype,"focusType",{get:function(){return this._focusType},set:function(t){t!==this._focusType&&(this._focusType=t,this.$_typeChanged(t))},enumerable:!1,configurable:!0}),i.prototype.$_createLine=function(t){function e(t,e,i){var o=t.createElement("div");o.className=e?"rg-focus-inner-line":"rg-focus-line";var r=o.style;return r.display="none",r.position="absolute",r.boxSizing="border-box",r.left="0px",r.top="0px",1!==i&&(r.borderTop="none"),2!==i&&(r.borderBottom="none"),3!==i&&(r.borderLeft="none"),4!==i&&(r.borderRight="none"),o}var i=St(t);t.appendChild(this._topLine=e(i,this._inner,1)),t.appendChild(this._bottomLine=e(i,this._inner,2)),t.appendChild(this._leftLine=e(i,this._inner,3)),t.appendChild(this._rightLine=e(i,this._inner,4))},i.prototype.$_typeChanged=function(e){var i=this._dom.style;this._topLine||this.$_createLine(this._dom),e===t.FocusType.LINE?(i.height="0px",i.width="0px",i.border="none",this._topLine.style.display=this._bottomLine.style.display=this._leftLine.style.display=this._rightLine.style.display="block",this.invalidate()):(i.removeProperty("border"),this._topLine.style.display=this._bottomLine.style.display=this._leftLine.style.display=this._rightLine.style.display="none")},i.prototype.$_linePosition=function(t,e,i,o){var r=this._topLine.style,n=this._bottomLine.style,s=this._leftLine.style,a=this._rightLine.style,l=this.parent.width,h=this.parent.height;n.left=r.left=-t+"px",n.width=r.width=l+t+"px",n.top=o-2+"px",a.height=s.height=h+"px",a.left=i-2+"px",n.display=h<o?"none":"block",s.display=t<0?"none":"block",a.display=l<i?"none":"block"},i.prototype.setEditing=function(t,e,i){t!=this._editing&&(this._editing=t,this.resetStyleName())},i.prototype.setActivated=function(t){this._setClassName(null)},i.prototype._getCssSelector=function(){return(this._inner?"rg-focus-inner":this._editing?"rg-focus-editing":"rg-focus")+(this.container._focused?"":" rg-deactive-focus")},i.prototype.setBounds=function(i,o,r,n){if(this._focusType===t.FocusType.LINE){var s=this._dom.style;s.left=i+"px",s.top=o+"px",this.width=r,this.height=n,this.$_linePosition(i,o,r,n)}else this.x++,e.prototype.setBounds.call(this,i,o,r,n)},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},i.prototype._beforeDraw=function(i){if(this._focusType===t.FocusType.LINE){this._setClassName(i);var o=i.style;o.left=this.x+"px",o.top=this.y+"px"}else e.prototype._beforeDraw.call(this,i)},i}(ga),Fu=function(e){function i(i,o){void 0===o&&(o=!1);var r=e.call(this,i,"focusMask")||this;return r._focusType=t.FocusType.LAYER,r._focusView=new Mu(i,o),r.addChild(r._focusView),r}return o(i,e),i.prototype._doDispose=function(){this._focusView&&this._focusView.dispose(),this._focusView=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"focusType",{get:function(){return this._focusType},set:function(t){t!==this._focusType&&(this._focusType=t,this._focusView.focusType=t,this.$_typeChanged(t))},enumerable:!1,configurable:!0}),i.prototype.$_typeChanged=function(e){var i=this._dom.style;e===t.FocusType.LINE?(i.removeProperty("overflow"),i.width="0px",i.height="0px"):(i.overflow="hidden",i.width=this.width+"px",i.height=this.height+"px")},i.prototype.updateElement=function(t,e,i,o,r){this._focusView.setBounds(t,e,i,o),this._focusView.setEditing(r,0,!1)},i.prototype.setActivated=function(t){this._focusView.setActivated(t)},i.prototype._getCssSelector=function(){return"rg-focus-mask"},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none"),this.setImportantStyle("background","none"),this.setImportantStyle("border","none"),this.setImportantStyle("overflow","hidden")},i.prototype._beforeDraw=function(i){if(this._focusType===t.FocusType.LINE){this._setClassName(i);var o=i.style;o.left=this.x+"px",o.top=this.y+"px"}else e.prototype._beforeDraw.call(this,i)},i.prototype.setRect=function(i){this._focusType===t.FocusType.LINE?i.x==this.x&&i.y==this.y&&i.width==this.width&&i.height==this.height||(this.x=i.x,this.y=i.y,this.width=i.width,this.height=i.height):e.prototype.setRect.call(this,i)},i}(ga),Lu=function(t){function e(e){var i=t.call(this,e,"groupFocusView")||this;return i.visible=!0,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-group-focus"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(ga),Nu=function(t){function e(e,i){var o=t.call(this,e,"focusMask")||this;return o._groupFocusView=new Lu(e),o.addChild(o._groupFocusView),o}return o(e,t),e.prototype._doDispose=function(){this._groupFocusView=this._groupFocusView&&this._groupFocusView.dispose(),t.prototype._doDispose.call(this)},e.prototype.updateElement=function(t,e,i,o){this._groupFocusView.setBounds(t,e,i,o)},e.prototype._getCssSelector=function(){return"rg-group-focus-mask"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none"),this.setImportantStyle("background","none"),this.setImportantStyle("border","none"),this.setImportantStyle("overflow","hidden")},e.prototype._beforeDraw=function(e){t.prototype._beforeDraw.call(this,e)},e}(ga),$u=function(t){function e(e){var i=t.call(this,e,"rowBlockView")||this;return i.visible=!1,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-rowblock"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(ga),Au=function(t){function e(e){return t.call(this,e,"headerCellResizer")||this}return o(e,t),e.prototype._getCssSelector=function(){return"_rg-col-resizer_"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(ga),Vu=function(t){function e(e){var i=t.call(this,e,"headerCellFeedback")||this;return i._modelChanged=!1,i.dragging=!1,i}return o(e,t),e.prototype._doDispose=function(){this._model=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"model",{set:function(t){this._model=t,this._modelChanged=!0},enumerable:!1,configurable:!0}),e.prototype._createDom=function(t){var e=t.createElement("table");e.setAttribute("aria-hidden","true");var i=e.createCaption();i.textContent="grid table feedback",i.style.width=i.style.height="0px",i.style.padding="none",i.style.boxSizing="border-box",i.style.overflow="hidden",e.style.setProperty("table-layout","fixed","important");var o=t.createElement("tbody");e.appendChild(o);var r=t.createElement("tr");o.appendChild(r);var n=this._cell=t.createElement("td");return r.appendChild(n),n.className="rg-header rg-header-cell _rg-header-cell-feedback_",e},e.prototype._getCssSelector=function(){return"rg-table"},e.prototype._doDraw=function(t){this.dragging&&!this._modelChanged||(Kl.renderCell(this._model,this._cell),this._modelChanged=!1)},e}(ga),Bu=function(t){function e(e){return t.call(this,e,"headerCellMover")||this}return o(e,t),e.prototype._getCssSelector=function(){return"_rg-header-cell-mover_"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e)},e.prototype._doDraw=function(t){},e}(ga),ju=function(e){function i(i){var o=e.call(this,i,"rowMoverLine")||this;return o._feedbackStyle=t.DragFeedbackStyle.LINE,o}return o(i,e),Object.defineProperty(i.prototype,"feedbackStyle",{set:function(t){this._feedbackStyle=t},enumerable:!1,configurable:!0}),i.prototype._getCssSelector=function(){switch(this._feedbackStyle){case t.DragFeedbackStyle.LINE:return"_rg-row-mover-line_";case t.DragFeedbackStyle.ROW:return"_rg-row-mover-block_";case t.DragFeedbackStyle.GROUP:case t.DragFeedbackStyle.CELL:return"_rg-row-mover-group_"}},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},i}(ga),Hu=function(t){function e(e){var i=t.call(this,e,"rowMover")||this;return i._enabled=!0,i}return o(e,t),e.prototype.setEnabled=function(t){if(t!=this._enabled)return this._enabled=t,this.invalidate(),!0},e.prototype.setLabel=function(t){if(t!=this._label)return this._label=t,this.invalidate(),!0},e.prototype.setZIndex=function(t){this._dom.style.zIndex=String(t)},e.prototype._getCssSelector=function(){var t="_rg-row-mover-proxy_";return this._enabled||(t+=" _rg-row-mover-proxy-disabled_"),t},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none"),e.style.whiteSpace="nowrap"},e.prototype._setSizeStyle=function(t){},e.prototype._doDraw=function(t){t[Rt.TextProp]=this._label},e}(ga),Gu=function(e){function i(t,i){var o=e.call(this,t,i)||this;o._rowBlockStart=-1,o._rowBlockEnd=-1;var r=t.doc,n=o._grid=t.gridView;return o._skipIndex=n.getIndex(),o._tempIndex=n.getIndex(),o._tempInnerIndex=n.getIndex(),n.addFeedbackElement(o._rowBlockMask=new $u(r)),n.addFeedbackElement(o._rowFocusView=new Uu(r)),n.addFeedbackElement(o._focusMask=new Fu(r)),n.addFeedbackElement(o._innerFocusMask=new Fu(r,!0)),n.addFeedbackElement(o._groupFocusMask=new Nu(r)),o}return o(i,e),i.prototype._doDispose=function(){this._skipIndex&&this._skipIndex.dispose(),this._skipIndex=null,this._tempInnerIndex=this._tempInnerIndex.dispose(),this._focusMask=this._focusMask.dispose(),this._innerFocusMask=this._innerFocusMask.dispose(),this._rowFocusView&&this._rowFocusView.dispose(),this._rowFocusView=null,this._rowBlockMask&&this._rowBlockMask.dispose(),this._rowBlockMask=null,this._groupFocusMask=this._groupFocusMask&&this._groupFocusMask.dispose(),this._grid=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"focused",{get:function(){return this._grid.focusedIndex},enumerable:!1,configurable:!0}),i.prototype.setFocused=function(t,e,i,o){void 0===o&&(o=null);var r=this._grid;if(r.isValid(t)){var n=r.getItem(t.itemIndex);return!r.isEditing()&&n instanceof Xo&&r.append(),e?o&&o.repeat&&(!o.repeat||this._userActionIndex)||(this._userActionIndex=r.focusedIndex.clone()):this._userActionIndex=null,this._grid.setFocusedIndex(t,e,!0,i)}return!1},i.prototype.layoutChanged=function(){this.$_resetFocusView(),this.$_resetRowBlockMask(),this.$_resetFocusButton(this.grid.focusedIndex),this._doLayoutChanged()},i.prototype.resetFocused=function(){this.$_resetFocusView()},i.prototype.focusedIndexChanging=function(t){},i.prototype.focusedIndexChanged=function(t,e){var i=this.grid,o=i.layoutManager,r=o.fixedItemCount,n=e.itemIndex;this.grid.setFocusedClass(t,!1),t.itemIndex!==e.itemIndex&&this.grid.setFocusedRowClass(t,!1),(!this.grid.isValid(e)||r>0&&n<r||n>=o.topIndex+r&&n<=r+o.topIndex+o.fullItemCount)&&this.$_resetFocusView(),!i.isEditing()&&e.item instanceof Xo&&i.append()},i.prototype.currentRowChanged=function(e,i){var o=this.grid,r=o.displayOptions;if(this._rowBlockStart=-1,this._rowBlockEnd=-1,r.rowBlockType!=t.RowMaskType.NONE){var n=r.rowBlockCallback;if(n){var s;(s=n(o.handler,o.getItemIndexOfRow(i)))?(this._rowBlockStart=s.start,this._rowBlockEnd=s.end):this._rowBlockStart=this._rowBlockEnd=-1}}this.$_resetRowBlockMask()},i.prototype.getNextRequest=function(t,e,i,o){return null},i.prototype.isMouseEventTarget=function(t){if(t instanceof Lh){var i=t.getAncestor(Ol);if(i)return i.getContentAt(t.index)==this.mouseEventTarget}return e.prototype.isMouseEventTarget.call(this,t)},i.prototype._doSetFocus=function(t){!Rt.isMobile()&&this.grid.setFocus(t),this._focusMask.setActivated(this.grid.container._focused)},i.prototype._doFocusLeave=function(t){var e=this.grid;e._resetTdFocus=void 0,e.editOptions.commitWhenLeave&&(e.isEditing()||e.isItemEdited())&&e.commit(!1,void 0,!1),Rt.isSlotMode()&&e.closePopups(),this._focusMask.setActivated(e.container._focused)},i.prototype._doGlobalKeyup=function(t){var e=this.grid;"Tab"===t.code?e.setEventFrom("keyup_tab"):e.setEventFrom("keyup")},i.prototype._doGlobalKeydown=function(t){var e=this.grid;"Tab"===t.code?e.setEventFrom("keydown_tab"):e.setEventFrom("keydown")},i.prototype._doLayoutChanged=function(){},i.prototype.$_resetFocusView=function(){var e=this._grid,i=e.layoutManager,o=e.displayOptions,r=e.focusedIndex,n=e.fixedOptions,s=this._tempInnerIndex.assign(r),a=!1,l=!1,h=!1;if(o.focusVisible&&e.isValid(s)&&!e.isEditing()){var u=s.item,c=e.getBodyViewAt(s),d=c.getCellAt(i,s),p=d;if(!d&&s.layout.merged){var f=i.getMergeRoom(s);f&&(s.itemIndex=i.fixedItemCount+i.topIndex,f.contains(s)&&(d=c.getCellAt(i,s)),d||(s.itemIndex=i.fixedItemCount+i.topIndex+i.itemCount-1,f.contains(s)&&(d=c.getCellAt(i,s))))}if(d&&!d.grouped){var _=e.isEditing(),g=c.getCellRectAt(i,s,!0);if((g=c.boundsByContainer(g)).width>0&&g.height>0){var y=0,m=g.width;if(!s.colFixed&&!s.rightFixed){var b=i.fixedContentBounds;y=Math.max(0,b.right-g.x),m=Math.max(0,g.width-y),b=i.rightContentBounds,m-=g.right-b.x}if(m>0){_&&(g.y--,g.height+=1);var v=g.clone();if((b=i.footerBounds.clone()).y+=i.contentBounds.y,Math.max(0,g.bottom-b.y),g.width=Math.min(g.width,m),g.x+=y,g.bottom=Math.min(g.bottom,b.y),this._focusMask.setRect(g),this._focusMask.focusType=o.focusType,this._focusMask.updateElement(-y,0,v.width,v.height,_),a=!0,!(e.canMergeEditing(p)&&!1))if(p&&p.merged){if(o.showInnerFocus)if((I=c.getCellRectAt(i,s,!1)).height<g.height){this._innerFocusMask.focusType=o.focusType,I.height=Math.min(I.height,g.height);var w=(I=c.boundsByContainer(I)).width-8,C=I.height-8;I.bottom=Math.min(g.bottom+4,I.bottom),this._innerFocusMask.setRect(I.inflate(-4,-4,-4,-4)),this._innerFocusMask.updateElement(0,0,w,C,_),h=!0}}else{var x=c.getCellAt(i,s);if(x&&x.renderer2&&x.editable&&x.renderer2.canShowInnerFocus()){var I=c.getCellRectAt(i,s,!1);w=(I=c.boundsByContainer(I)).width-8,C=I.height-8;I.bottom=Math.min(g.bottom+4,I.bottom),this._innerFocusMask.setRect(I.inflate(-4,-4,-4,-4)),this._innerFocusMask.updateElement(0,0,w,C,_),h=!0}}}}}else if(!u.isData){var S=e.getRowView(c,u);if(S){g=S.boundsByContainer();this._focusMask.updateElement(0,0,g.width,g.height,!1),g.x<i.leftContentBounds.right&&(g.x=i.leftContentBounds.right,g.width-=i.leftContentBounds.right-g.x),this._focusMask.setRect(g),a=!0}}}var E=o.rowFocusType;if(E!=t.RowMaskType.NONE){var O=i.footerBounds.y+i.contentBounds.y,R=i.fixedItemCount;if((k=(k=s.itemIndex)>=R?k-i.topIndex:k)>=0&&k<=i.itemCount-1){switch((g=i.getTableItemBounds(k)).y+=i.contentBounds.y+i.bodyBounds.y,g.bottom>O&&(g.bottom=O),E){case t.RowMaskType.DATA:g.x=e.fixedContentPane.x,g.right=e.rightContentPane.width?e.rightContentPane.right:e.contentPane.right;break;case t.RowMaskType.FILL:g.x=0,g.width=e.width;break;case t.RowMaskType.ROW:g.x=0,g.right=e.rightContentPane.width?e.rightContentPane.right:e.contentPane.right}this._rowFocusView.setRect(g),l=!0}else l=!1}if(this._groupFocusMask.visible=o.groupFocusVisible&&e.isValid(r)){var P=r.layout.getAncestor(o.groupFocusLevel);if(P){var k;O=i.footerBounds.y+i.contentBounds.y,R=i.fixedItemCount;if((k=(k=r.itemIndex)>=R?k-i.topIndex:k)>=0&&k<=i.itemCount+R-1){g=i.getTableItemBounds(k),y=0;(I=i.getDataRect(P)).height=g.height,g.x=I.x;m=I.width;g.y+=i.contentBounds.y+i.bodyBounds.y,g.bottom>O&&(g.bottom=O);b=void 0;if(b=!r.colFixed&&n.colCount>0?i.fixedContentBounds:i.rowBarBounds,g.x=Math.max(b.right,I.x),y=Math.min(0,I.x-b.right),!r.rightFixed&&n.rightCount>0){var T=i.rightContentBounds;m-=Math.max(0,I.right-T.x)}m<=0&&(this._groupFocusMask.visible=!1),g.width=m,g.x-=1,g.y-=1,g.width++,g.height++,this._groupFocusMask.setRect(g),this._groupFocusMask.updateElement(y,0,I.width+1,I.height+1)}else this._groupFocusMask.visible=!1}}this._rowFocusView.visible=l,this._focusMask.visible=a,this._innerFocusMask.visible=h,this._focusMask.visible,e.setFocusedClass(r,!0),e.setFocusedRowClass(r,!0)},i.prototype.$_resetRowBlockMask=function(){var e=this.grid,i=e.layoutManager,o=i.fixedItemCount,r=e.topItem,n=this._rowBlockMask,s=e.displayOptions.rowBlockType,a=this._rowBlockStart,l=this._rowBlockEnd,h=Math.max(a-r+o,o),u=Math.min(Math.max(l-r+o),i.itemCount+o-1);if(n.visible=s&&s!=t.RowMaskType.NONE&&h>=0&&u>=0&&h<i.itemCount&&h<=u&&a!==l,n.visible){var c=i.footerBounds.y+i.contentBounds.y,d=i.getTableItemBounds(h),p=i.getTableItemBounds(u);switch((d=d.union(p)).y+=i.contentBounds.y+i.bodyBounds.y,d.bottom>c&&(d.bottom=c),s){case t.RowMaskType.DATA:d.x=e.fixedContentPane.x,d.right=e.rightContentPane.width?e.rightContentPane.right:e.contentPane.right;break;case t.RowMaskType.FILL:d.x=0,d.width=e.width;break;case t.RowMaskType.ROW:d.x=0,d.right=e.rightContentPane.width?e.rightContentPane.right:e.contentPane.right}n.setRect(d)}},i.prototype.$_resetFocusButton=function(t){var e,i=this.grid;if(i.isValid(t)){var o=i.getBodyViewAt(t),r=i.getBodyCellAt(t),n=this._tempIndex.assign(t);if(!r&&n.layout.merged){var s=i.layoutManager;(e=s.getMergeRoom(n))&&(n.itemIndex=s.fixedItemCount+s.topIndex,e.contains(n)&&(r=i.getBodyCellAt(n)),r||(n.itemIndex=s.fixedItemCount+s.topIndex+s.itemCount-1,e.contains(n)&&(r=i.getBodyCellAt(n))))}var a=o&&r&&o.getRowView(r.item);a&&a.$_setButtons(i,r,r.cell.firstElementChild,e)}},i.prototype._doCancel=function(t){if(t.closeFilterSelector(),t.isEditing())t.cancelEditor(!0);else if(t.isItemEditing())t.itemEditCancel()&&t.cancel();else if(this.dragging&&this.dragTracker)try{this._stopDragTracker(null,null,!0,null),this.dragTracker.cancel(),this.dragTracker.linkable&&t.container.cancelOtherContainer(this.dragTracker)}catch(t){throw t}finally{this.dragTracker=null}},i.prototype._doEnter=function(t,e,i,o){var r=t.isEditing(),n=o.shiftKey;if(r&&!e.enterToTab)t.commitEditor(!0);else{var s=i.clone(),a=e.skipReadOnly,l=e.skipReadOnlyCell,h=t.editController,u=Ds.areEquals(h.editIndex,s)&&h.currentEditor(),c=u&&u.dropDownWhenEnter,d=e.enterToEdit||c;if(t.isValid(s)){if(e.enterToNextRow&&(!n&&s.itemIndex<t.itemCount-1||n&&s.itemIndex>0))n?s.up():s.down(),l&&this._checkReadOnly(s)&&(this._skipReadOnlyCell(s,n?-1:1)||s.assign(i));else if(!n&&(!d||r)&&e.enterToTab&&e.enterToNextCell&&e.crossWhenExitLast&&(s.isLast||e.skipReadOnly&&s.isEditableLast)&&s.itemIndex<t.itemCount-1)s.down(),s.firstCell(),a&&this._skipReadOnly(s,1);else if(n&&(!d||r)&&e.enterToTab&&e.enterToNextCell&&e.crossWhenExitLast&&(s.isFirst||e.skipReadOnly&&s.isEditableFirst)&&s.itemIndex>0)s.up(),s.lastCell(),a&&this._skipReadOnly(s,-1);else if((!r||e.enterToTab)&&e.commitWhenExitLast&&s.isLast){try{t.commit(e.commitWhenNoEdit)}catch(i){throw i instanceof Dn&&(i=t._fireValidationFail(s.item.index,i.column,i))&&alert(e.showOnlyValidationMessage&&i.userMessage?i.userMessage:i.toString()),i}e.appendWhenExitLast&&s.itemIndex===t.itemCount-1&&(t.append(),t.isItemEditing()&&(s.down(),s.firstCell()))}else if(e.enterToTab&&(t.isEditing()||this._checkReadOnly(s))||!d){if(t.isEditing())if(!t.commitEditor(!0))return!0;e.enterToNextCell&&(n?(s.prev(),this._getPrevVisible(t,s)):(s.next(),this._getNextVisible(t,s)),a&&!this._skipReadOnly(s,n?-1:1)&&s.assign(i))}}else s.normalize(t);Ds.areEquals(s,i)?t.isValid(s)&&d&&!r&&!t.isEditing()&&i&&i.dataColumn&&!this._checkReadOnly(i)&&t.showEditor(i,!1,c):this.setFocused(s,!0,!0)}return!0},i.prototype._doTab=function(t,e,i,o){var r=i.clone(),n=!1,s=o.shiftKey;if(t.isValid(r)){if(e.useTabKey){var a=e.exitGridWhenTab;if(s){if(e.crossWhenExitLast&&(r.isFirst||e.skipReadOnly&&r.isEditableFirst)&&r.itemIndex>0?(r.up(),r.lastCell()):(r.prev(),this._getPrevVisible(t,r)),e.skipReadOnly&&!this._skipReadOnly(r,-1)&&r.assign(i),Ds.areEquals(r,i)&&a){switch(a){case"row":n=!0;break;case"grid":n=r.itemIndex<=0}if(n)return!Rt.isMobile()&&t.container._containerDom.setAttribute("tabindex","-1"),!1}}else{if(e.crossWhenExitLast&&(r.isLast||e.skipReadOnly&&r.isEditableLast)&&r.itemIndex<t.itemCount-1)r.down(null,e.skipReadOnly&&r.isEditableLast&&e.crossWhenExitLast),r.firstCell();else if(e.commitWhenExitLast&&r.isLast){try{t.commit(e.commitWhenNoEdit)}catch(i){throw i instanceof Dn&&(i=t._fireValidationFail(r.itemIndex,i.column,i))&&alert(e.showOnlyValidationMessage&&i.userMessage?i.userMessage:i.toString()),i}e.appendWhenExitLast&&(t.append(),t.isItemEditing()&&(r.down(),r.firstCell()))}else r.next(),this._getNextVisible(t,r);if(e.skipReadOnly&&!this._skipReadOnly(r,1)&&r.assign(i),Ds.areEquals(r,i)&&a){switch(a){case"row":n=!0;break;case"grid":n=r.itemIndex>=t.itemCount-1}if(n)return!1}}return Ds.areEquals(r,i)||this.setFocused(r,!0,!0),o&&(o.preventDefault&&o.preventDefault(),o.stopImmediatePropagation()),!0}}else r.normalize(t),this._skipReadOnly(r,1);return s&&!Rt.isMobile()&&t.container._containerDom.setAttribute("tabindex","-1"),!1},i.prototype._getNextVisible=function(t,e){t.getBodyViewAt(e).getNextVisibleCell(e)},i.prototype._getPrevVisible=function(t,e){t.getBodyViewAt(e).getPrevVisibleCell(e)},i.prototype._checkReadOnly=function(t){var e=this.grid;if(!e.isValid(t))return!0;var i=e.getWritableAt(t,!0);return null!=i?!i:!t.dataColumn.isWritable()},i.prototype._skipReadOnly=function(t,e){var i=!1;if(this.grid.editOptions.skipReadOnly){var o=this._skipIndex;if(o.assign(t),!(i=!this._checkReadOnly(o)))if(e>0){for(;o.next();)if(!this._checkReadOnly(o)){t.assign(o),i=!0;break}}else for(;o.prev();)if(!this._checkReadOnly(o)){t.assign(o),i=!0;break}}return i},i.prototype._skipReadOnlyCell=function(t,e,i){var o=this.grid,r=!t.dataColumn.isWritable()&&!0;if(!r&&o.editOptions.skipReadOnlyCell){var n=this._skipIndex;n.assign(t),r=!this._checkReadOnly(n)}return r},i.prototype._commitCancel=function(e,i){var o=this.grid;try{switch(e.itemState){case t.ItemState.INSERTING:return o.commit(i.forceInsert)||o.cancel(!0),!0;case t.ItemState.APPENDING:return o.commit(i.forceAppend)||o.cancel(!0),!0;case t.ItemState.UPDATING:return o.commit(i.commitWhenNoEdit)||o.cancel(!0),!0}}catch(t){if(t instanceof Dn)return(t=o._fireValidationFail(e.index,t.column,t))&&alert(i.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),!1;if(t instanceof Tn)return!1;throw t}return!1},i.prototype._editButtonClicked=function(t,e){},i}(mh),Wu=function(t){function e(e){var i=t.call(this,e,"rowHoverView")||this;return i.visible=!1,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-rowhover"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(ga),Uu=function(t){function e(e){var i=t.call(this,e,"rowFocusView")||this;return i.visible=!1,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-rowfocus"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(ga),Yu=function(e){function i(t,i){var o=e.call(this,t,i)||this;o._checkScroll=Date.now(),o._prevScroll=Date.now(),o._wheelDeltaY=0,o._tempRect=new ot,o._reqPoint=new fa,o._swipeTimer=null,o._swipeDistance=0,o._swipeDuration=0,o._swipeStarted=null,o._swipeAmount=0;var r=t.doc,n=o.grid;return o._cellResizer=new Au(r),o._cellMover=new Bu(r),o._cellFeedback=new Vu(r),o._rowMoverLine=new ju(r),o._rowMoverProxy=new Hu(r),o._colResizeReq=new hu(n),o._colMoveReq=new uu(n),o._rowResizeReq=new cu(n),o._headerResizeReq=new du(n),o._rowMoveReq=new pu(n),o._tooltipIndex=new Ds(n),Rt.isMobile()&&(o._touchScrollRequest=new Iu(n),o._touchScrollTracker=new Ou(n),o._touchSelectRequest=new Su(n),o._touchSelectTracker=new Ru(n)),o}return o(i,e),i.prototype._doDispose=function(){this._clickCell=null,this._clickElement=null,this._cellResizer=this._cellResizer.dispose(),this._cellMover=this._cellMover.dispose(),this._cellFeedback=this._cellFeedback.dispose(),this._rowMoverLine=this._rowMoverLine.dispose(),this._rowMoverProxy=this._rowMoverProxy.dispose(),this._colResizeReq=this._colResizeReq.dispose(),this._colMoveReq=this._colMoveReq.dispose(),this._rowMoveReq=this._rowMoveReq.dispose(),this._rowResizeReq=this._rowResizeReq.dispose(),this._headerResizeReq=this._headerResizeReq.dispose(),clearTimeout(this._tooltipShowTimer),e.prototype._doDispose.call(this)},i.prototype._doDeactivated=function(){this._clickCell=this._clickElement=null},i.prototype._doDragTrackerFinished=function(t,e){e||t.clickable||(this._clickCell=this._clickElement=null)},i.prototype.$_getIndexAt=function(t,e,i,o,r){var n=t.getDataCellIndex(o,this._tempIndex),s=i.getCellAt(e,n);if(s&&s.merged){var a=e.getTableRowIndex(r);if(a<0)return n;var l=i.getRowIndex(a);n.itemIndex=Math.min(Math.max(s.item.index,l),s.item.index+s.rowSpan-1)}return n},i.prototype._doPointerDown=function(e){var i=e.mouseX,o=e.mouseY,r=Rt.ctrlKey(e),n=e.shiftKey,s=e.altKey,a=e.button,l=this.grid,h=l.layoutManager,u=l.displayOptions,c=l.focusedIndex.clone(),d=l.selections.exclusiveMode;this._longTimer=Rt.isMobile()&&setTimeout(this._longTimerHandler,l.mobileOptions.longTapDuration),this._hideTooltip(),l.closePopups(),l.setEventFrom("mousedown"),this._scrollY=window.scrollY,this._swipeTimer=clearInterval(this._swipeTimer),this._touchMoving=!1;var p,f=this._clickCell=null,_=this._clickElement=null;if(this._userActionIndex=null,0==a||l.displayOptions.rightClickable&&2==a){var g=this._tempIndex,m=this.mouseEventTarget,b=0==a&&!(Rt.isMac&&e.ctrlKey)&&(this._getEditRequest(m,c,i,o,r,n,s)||this._getSelectRequest(m,i,o,r,n,s)||Rt.isMobile()&&this._getTouchRequest(e));if(b instanceof au&&!b.canFocus())b instanceof pu&&(f=this._clickCell=this._findTableCell(),_=this._clickElement=this.findElementAt(i,o,!1));else if(f=this._clickCell=this._findTableCell(),_=this._clickElement=this.findElementAt(i,o,!1),f){var v=l.getTableView(f),w=v instanceof Kl,C=v instanceof Ul,x=v instanceof Cu&&v.isRowIndicator(f);if(r&&u.selectionRemovable&&!d&&(!b||b instanceof lu)){var I=null;if(C?g=this.$_getIndexAt(l,h,v,f,o):w?(g.layout=v.layoutByCell(f),I=Oa):x&&(g.itemIndex=f.parentElement[y],I=Ea),S=l.selections.getItemByIndex(g,I))return l.selections.remove(S),void(C&&this.setFocused(g,!1,0===l.selections.getItems().length))}if(w||C||x){var S=l.selections.lastItem();if(C?(g=this.$_getIndexAt(l,h,v,f,o),l.editOptions.focusMoveStep===t.FocusMoveStep.GROUP&&(g.layout=g.layout.getAncestor(l.displayOptions.groupFocusLevel).first)):w?(g.assign(l.focusedIndex),g.layout=v.layoutByCell(f)):(g.assign(l.focusedIndex),g.itemIndex=f.parentElement[y]),w)if(r&&n)S&&this.$_resizeSelection(S,g,t.SelectionStyle.COLUMNS);else{if(n)return;r&&b instanceof lu&&l.selections.containsLayout(g.layout,Oa)&&(b=null)}else{if(n&&S){var E=w?t.SelectionStyle.COLUMNS:x?t.SelectionStyle.ROWS:null;return void this.$_resizeSelection(S,g,E)}if(C){if(this.$_checkAppending(l.focusedIndex,!0,g))return this._clickElement=null,void(this._clickCell=null);var O=v.getCellAt(h,g),R=v.bodyCellByCell(this._clickCell);if(R&&O&&0===a&&R.isEditButton(e.target))this.setFocused(g,!0,!0)&&O.editable&&!O.readonly&&l.editController.buttonDown(g,e);else if(Rt.isMobile()&&b instanceof Iu){this.grid.container.addMouseEvent(null)}else{var P=!(r&&l.selections.containsCell(g));this.setFocused(g,!r,P)||b instanceof lu&&(b=null)}}else if(x&&l.rowIndicator.selectable)if(r&&b instanceof lu&&l.selections.containsItem(g.itemIndex,Ea)&&(b=null),null==g.column&&g.item.isDataRow&&(g.layout=l.getFirstLayout()),b instanceof lu){if(this.setFocused(g,d||!r,!1)){var k=S&&Ca(S)?S.getItemIndices():[];(1!==k.length||k[0]!==g.itemIndex)&&l.selections.selectRow(g.itemIndex,!r)}h.clearFocusRequest()}else{P=void 0;P=l.displayOptions.selectionStyle===t.SelectionStyle.SINGLE_ROW?!(r&&l.selections.containsItem(g.itemIndex,null)):!(r&&l.selections.containsCell(g)),this.setFocused(g,d||!r,P)}}}}else(p=_)&&"itemIndex"in p&&(g.assign(l.focusedIndex),g.itemIndex=_.itemIndex,null==g.column&&(g.layout=l.getFirstLayout()),this.setFocused(g,!0,!0));!b||l.isItemEditing()&&b.selectable||(this.dragTracker=this._getDragTracker(b,i,o),b instanceof hu&&e.target.setPointerCapture(e.pointerId))}l.$_resetHovering(i,o);var T=this.dragTracker;T&&T.startWhenCreated?this._startDragTracker(i,o,e):T&&T.init(i,o,e)},i.prototype._doPointerCancel=function(t){this.grid.container.removeMouseEvent()},i.prototype._doMouseDown=function(t){var e=this.grid,i=e.editOptions,o=Rt.ctrlKey(t),r=e.selections.exclusiveMode,n=t.mouseX,s=t.mouseY,a=this._tempIndex;if(Ds.areEquals(a,this.focused)&&i.editWhenClickFocused)e.showEditor();else{var l=!(o&&e.selections.containsCell(a));this.setFocused(a,r||!o,l)}e.$_resetHovering(n,s)},i.prototype.$_checkOtherGridRowMoving=function(t,e){this._dragTimer=this._dragTimer&&clearInterval(this._dragTimer);var i=this.grid,o=i.container,r=o.getMouseContainer(),n={index:-1,position:0,column:void 0};if(r&&r!==o){var s=Rt.isMobile()&&document.elementFromPoint(t.clientX,t.clientY);if(o.findContainer(t,s)!==o)i.removeFeedbackElement(this._rowMoverLine);else if(e instanceof ph){for(var a=o.eventToContainer(t),l=o.findElementAt(a.x,a.y,!1),h=!1,u=[Al,mu,Cu,zc,Ul],c=0;c<u.length;c++)if(l instanceof u[c]){h=!0;break}if(0==i.itemCount||h){var d=ph.updateLineFeedback(i,Number.MAX_VALUE,null,1,this._rowMoverLine,a.x,a.y,!0,t.target),p=i.canMoveRow(!0,!0)&&i.dataDropOptions.getEnabled(r.gridView,e.sourceItems,d),f=i.dataDropOptions.getLabel(r.gridView,e.sourceItems,d,null);return e.setEnabled(p),e.setLabel(f),p&&(d.index=Math.max(0,d.index)),i.addFeedbackElement(this._rowMoverLine),p?d:n}l instanceof eh?(e.setEnabled(!1),this._dragTimer=setInterval((function(){i.topIndex++}),100)):l instanceof Kl?(e.setEnabled(!1),this._dragTimer=setInterval((function(){i.topIndex--}),100)):l?(e.setEnabled(!1),i.removeFeedbackElement(this._rowMoverLine)):i.removeFeedbackElement(this._rowMoverLine)}}return n},i.prototype.getNextRequest=function(t,e,i,o){if(t instanceof lu){var r=this.grid.getSelection();return this._rowMoveReq.init(r,r.startItem)}return null},i.prototype.dragFrom=function(t,e){e instanceof ph&&this.$_checkOtherGridRowMoving(t,e)},i.prototype.dropFrom=function(t,e){if(e instanceof ph){var i=this.grid,o=this.$_checkOtherGridRowMoving(t,e);this._dragTimer=this._dragTimer&&clearInterval(this._dragTimer),i.removeFeedbackElement(this._rowMoverLine),o.index>=0&&i.$_dropData(e.grid,e.sourceItems,o)}},i.prototype.cancelFrom=function(t){var e=this.grid;this._dragTimer=this._dragTimer&&clearInterval(this._dragTimer),t instanceof ph&&e.removeFeedbackElement(this._rowMoverLine)},i.prototype._doPointerMove=function(t){var e,i=t.mouseX,o=t.mouseY,r=Rt.ctrlKey(t),n=this.grid,s=n.layoutManager,a=this.mouseEventTarget,l=t.shiftKey,h=t.altKey;n.$_resetHovering(i,o)||this._hideTooltip();var u=n.container,c=u.getMouseContainer();if(!c||u===c){var d=this.dragTracker;if(!d||!d.active){var p=this._getEditRequest(a,n.focusedIndex,i,o,r,l,h);if(Rt.isMobile()&&!p&&(p=this._getTouchRequest(t)),!p&&n.editOptions.movable&&t.altKey&&n.displayOptions.altSelectAndImmediateDrag&&(p=this._getSelectRequest(a,i,o,r,l,h))&&(e=n.dataDropOptions.cursor),!e&&p&&p.cursor&&(e=p.cursor),n.setCursor(a,e||"default"),!p&&!this.dragging){var f=this._findTableCell(),_=f&&n.getTableView(f);if(_ instanceof Ul){var g=_.bodyCellByCell(f);if(g&&g.merged){var y=g.head||g,m=this.$_getIndexAt(n,s,_,f,o);if(!y.contains(n.focusedIndex)){if(g.buttons){var b=_.getRowView(y.item);b instanceof Al&&b.moveCellButtons(s,y,m.itemIndex)}var v=n.canMergeEditing(y);if(y.renderer2&&y.renderer2.refreshFocusChanged){var w=_.getCellRectAt(s,m,!1),C=_.getCellRect(s,y,!0),x=y.renderer2,I=w.top-C.top+w.height/2-C.height/2;x.moveClickElement(I,v)}}}}}}}},i.prototype._doPointerUp=function(e){var i=this._findTableCell(),o=this.grid,r=o.focusedIndex,n=o.layoutManager;o.setEventFrom("mouseup");var s=o.getCellType(i);if(o.setCursor(this.mouseEventTarget,"default"),o.editController.buttonUp(null,e),Rt.isMobile()){if(this._longPressed&&Rt.isiOS){var a=new PointerEvent("contextmenu",{bubbles:!0,clientX:e.clientX,clientY:e.clientY});return void e.target.dispatchEvent(a)}s===t.GridCellType.DATA&&this.dragTracker&&this.dragTracker.clickable&&!Ds.areEquals(this._tempIndex,r)&&this.setFocused(this._tempIndex,!0,!0)}if(s===t.GridCellType.DATA&&(!this.dragTracker||this.dragTracker.scrollable)){var l=i&&o.cellToIndex(i);o.isValid(r)&&Ds.areEquals(r,l)&&!n.focusIsVisible(r)&&(n.makeCellVisible(r),o.invalidateLayout())}},i.prototype._doClick=function(e,i,o){if(Rt.isMobile()&&this._longPressed)Rt.stopEvent(e,!0);else{i=i||e.mouseX,o=o||e.mouseY;var r,n=this.grid,s=this.findElementAt(i,o,!1),a=this._findTableCell(),l=n.getCellType(a),h=this.focused,u=l===t.GridCellType.DATA&&n.cellToIndex(a);(!n._eventFrom||n._eventFrom.indexOf("key")>=0)&&(this._clickCell=a=this._findTableCell(e.target),n.getCellType(a)===t.GridCellType.DATA&&(h=n.getDataCellIndex(a))),n.setEventFrom(null);try{if(a&&a==this._clickCell){var c=n.getCellType(a),d=void 0,p=void 0;switch(c){case t.GridCellType.HEAD:if(this.$_gridCellClicked(r=Du.getSub(c,n.headView.getCellType(a))),"check"===r.subType){var f=n.headView._checkCell;Rt.included(e.target,f._check,f._image,f._span)&&this._checkAllClicked()}break;case t.GridCellType.FOOT:this.$_gridCellClicked(Du.getSub(c,n.footView.getCellType(a)));break;case t.GridCellType.INDICATOR:case t.GridCellType.STATE:case t.GridCellType.CHECK:c===t.GridCellType.CHECK&&this.$_checkCellClicked2(a,e),d=n.rowBarContainer.rowOf(a),p=n.getRowOfItem(d);var _=n.getItem(d);(c!==t.GridCellType.CHECK||_.checkable)&&this.$_gridCellClicked(Du.getItem(c,d,p));break;case t.GridCellType.HEADER:var g=n.getHeaderView(a),m=g.tableCellByCell(a);if(!(this._getEditRequest(this.mouseEventTarget,h,i,o,!1,!1,!1)instanceof hu)&&this._doColumnHeaderClicked(e,m.layout)){var b=g.layoutByCell(a);b instanceof vs&&b.hideChildHeaders&&b.tiedColumn&&(b=b.tiedColumn.layout),this.$_gridCellClicked(Du.getLayout(c,b))}break;case t.GridCellType.DATA:var w=n.getBodyView(a).bodyCellByCell(a),C=Ds.areEquals(h,u)||w.contains(h);if(C||n.editOptions.focusMoveStep===t.FocusMoveStep.GROUP&&(C=h.layout.root===u.layout.root&&h.itemIndex===u.itemIndex),C&&w.grouped)this.$_gridCellClicked(Du.getItem(t.GridCellType.GROUP_HEADER,w.item.index,null));else{if(C&&w.isCellButton(e.target))return this.$_cellButtonClicked(w),void(!n.editOptions.exceptDataClickWhenButton&&this.$_gridCellClicked(Du.getCell(c,w,h)));if(C&&Al.isExpander(e.target))return void(!n.editOptions.exceptDataClickWhenButton&&this.$_gridCellClicked(Du.getCell(c,w,h)));var x=n.editController._editor,I=w.isEditButton(e.target);if(C&&(I||!w.readonly&&x&&x.dropDownWhenClick)){if(n.layoutManager.focusIsVisible(this.focused))return n.canMergeEditing(w)?this._tempIndex=n.focusedIndex.clone():w.getEditIndex(this._tempIndex),!x||x.editing&&x.listing||this._editButtonClicked(this._tempIndex,e),void this.$_gridCellClicked(Du.getCell(c,w,h));I&&n.editController.requestPrepareEditor(!0)}else if(n.isValid(h)&&!Rt.ctrlKey(e)){var S=!Ds.areEquals(this._userActionIndex,n.focusedIndex);(S&&n.editOptions.editWhenFocused||!S&&n.editOptions.editWhenClickFocused)&&n.showEditor()}var E=w.renderer2;if(E)if(C||!E.clickOnlyFocusedCell)return r=Du.getCell(c,w,u),this.$_performRendererClick(w,e,r)?void((!n.editOptions.exceptDataClickWhenButton||!E.itemClickable)&&this.$_gridCellClicked(r)):void this.$_gridCellClicked(Du.getCell(c,w,u));Rt.isInteractive(e.target)&&Rt.stopEvent(e,!0)}break;case t.GridCellType.FOOTER:var O=n.getFooterView(a).tableCellByCell(a);this.$_gridCellClicked(Du.getSummary(c,O.summaryIndex,O.layout));break;case t.GridCellType.SUMMARY:var R=n.getSummaryView(a).tableCellByCell(a);this.$_gridCellClicked(Du.getSummary(c,R.summaryIndex,R.layout));break;case t.GridCellType.INLINE_FILTER:var P=n.getFilterView(a).tableCellByCell(a),k=e.target;k===P.operatorButton&&n.popupMenuManager.show(P.popupMenu,k,this._tempIndex.set(-1,P.layout,this.grid),!1);break;case t.GridCellType.SUM:this.$_gridCellClicked(Du.getSub(c,n.sumView.getCellType(a)));break;case t.GridCellType.FILTER:this.$_gridCellClicked(Du.getSub(c,n.filterView.getCellType(a)));break;case t.GridCellType.GROUP_FOOTER:var T=n.getBodyView(a).bodyCellByCell(a),D=T.item.footerIndex;this.$_gridCellClicked(Du.getGroupFooter(c,T.item.index,T.layout,D));break;case t.GridCellType.GROUP_HEAD:case t.GridCellType.GROUP_FOOT:var M=a[v];this.$_gridCellClicked(Du.getGroupElt(c,M));break;case t.GridCellType.GROUP_BAR:var F=a[y];p=this.grid.getRowOfItem(F),this.$_gridCellClicked(Du.getItem(c,F,p))}}else if(s&&s===this._clickElement){var L=this._getClickData(s,e);L&&(L.cellType===t.GridCellType.GRID_EMPTY&&n.isEditing()&&n.commitEditor(!0),this.$_gridCellClicked(L))}}finally{if(Rt.isMobile()&&e.timeStamp!==this._clickTimeStamp){var N=n.mobileOptions.doubleTapInterval||500;this._clickTimeStamp&&this._clickTimeStamp+N>e.timeStamp&&this._clickElt===this._findTableCell(e.target)?l!==t.GridCellType.DATA||Ds.areEquals(this._clickIndex,u)?(this._clickTimeStamp=null,this._clickIndex=null,this._doDblClick(e)):this._clickTimeStamp=e.timeStamp:(this._clickTimeStamp=e.timeStamp,this._clickElt=this._findTableCell(e.target),l===t.GridCellType.DATA&&(this._clickIndex=u.clone()))}}}},i.prototype._getClickData=function(e,i){if(e instanceof zc||e instanceof El||e instanceof Ul)return Du.getData(t.GridCellType.GRID_EMPTY);if(2===i.button&&e instanceof Ch){var o=t.GridCellType.SCROLL_BAR,r=e.scrollBar&&e.scrollBar.vertical;if(e instanceof Eh)return Du.assignData({cellType:o,subType:t.GridCellType.SCROLL_THUMB,vertical:r});if(e instanceof Sh)return Du.assignData({cellType:o,subType:t.GridCellType.SCROLL_BUTTON,vertical:r,far:e.far});if(e instanceof Ih)return Du.assignData({cellType:o,subType:t.GridCellType.SCROLL_TRACK,vertical:r});if(e instanceof xh)return Du.assignData({cellType:o,subType:t.GridCellType.SCROLL_EDGE})}},i.prototype.$_commitRendererEdit=function(t,e,i){var o=e.item,r=e.dataField,n=e.dataColumn,s=!1;try{(s=t.editorCommit(e,o.getData(r),i))&&(t.undoable?t.execute(new gu(e.item,r,i,e.column)):o.setData(r,i),t.isItemEditing(e.item)&&t.validateCellCommit(e,i))}catch(e){if(!t.editOptions.showCommitError)throw e;alert(e.message||e)}if(s&&t.isCellEditing()){var a=t.itemSource,l=a.editingItem.invalidFields,h=t.validationManager.getError(e);if(h)return l.push(n.dataIndex),void(t.editOptions.showCommitError&&alert(h.userMessage||h.message||h));if(l.indexOf(n.dataIndex)>=0&&l.splice(l.indexOf(n.dataIndex),1),t.validationManager.clearInvalidCell(e),l.length>0)return;var u=t.canMergeEditing(t.getBodyCellAt(e,!0));if(a.commit(u)||a.cancel(),u){var c=n.layout.merges.getRoom(e),d={},p={};p[n.fieldName]=i;for(var f=c.head;f<=c.tail;f++){var _=t.getItem(f);_.isDataRow&&(d[_.dataRow]=p)}a.updateRows2(d)}}},i.prototype.$_performRendererClick=function(t,e,i){var o,r=t.renderer2,n=this.grid,s=n.layoutManager;if(r){if(t.merged)if(e.pointerType){var a=e.mouseY,l=this._findTableCell(),h=l&&n.getTableView(l);o=this.$_getIndexAt(n,s,h,l,a)}else o=n.focusedIndex.clone();else o=r.index;if(n.canWriteAt(o)&&r.canEdit()&&r.canEditClickAt(e)&&n.edit(o)){var u=r.editClick(o,e);if(u)return u.commit&&this.$_commitRendererEdit(n,o,u.value),!0}if(r.canClick(e)){var c=r.click(o,e);if(c)return Rt.extendObj(i,c),!1===n._fireCellItemClicked(o,c)&&r.preventDefaultClick(e),!0}return r.preventDefaultEditClick(e),!1}},i.prototype.$_performRendererKey=function(e,i){var o,r=e.renderer2,n=e.head;if(r)o=r.index;else{if(!n||!(r=n.renderer2))return;var s=e.rowIndex-n.rowIndex;(o=r.index.clone()).incRow(s)}var a=this.grid,l=a.canWriteAt(o)&&r.canEdit();if(Ds.areEquals(o,a.focusedIndex)){var h=Du.getCell(a.getCellType(e.cell),e,o);if(l&&r.canEditKey(i)||r.canClickSpaceKey(i))return r.itemClick(i),!0;if(32===i.keyCode&&a.editOptions.buttonClickWhenSpace&&!Rt.specialKey(i))return e.button===t.CellButton.ACTION||e.button===t.CellButton.POPUP?(a.closePopups(),e.cellButton.click(),!0):(this.$_gridCellClicked(h),!0)}},i.prototype._doDblClick=function(e){var i=e.mouseX,o=e.mouseY,r=Rt.ctrlKey(e),n=e.shiftKey,s=e.altKey,a=this.grid,l=a.layoutManager,h=this.focused,u=this.findElementAt(i,o,!1),c=this._findTableCell();if(a.setEventFrom(null),c&&c==this._clickCell){var d=a.getCellType(c),p=void 0,f=void 0;switch(d){case t.GridCellType.HEAD:this.$_gridCellDblClicked(Du.getSub(d,a.headView.getCellType(c)));break;case t.GridCellType.FOOT:this.$_gridCellDblClicked(Du.getSub(d,a.footView.getCellType(c)));break;case t.GridCellType.INDICATOR:case t.GridCellType.STATE:case t.GridCellType.CHECK:p=a.rowBarContainer.rowOf(c),f=a.getRowOfItem(p),this.$_gridCellDblClicked(Du.getItem(d,p,f));break;case t.GridCellType.HEADER:var _=a.getHeaderView(c),g=_.tableCellByCell(c);if(g&&g.isClickableElt(e.target));else(m=_.layoutByCell(c))instanceof vs&&m.hideChildHeaders&&m.tiedColumn&&(m=m.tiedColumn.layout),this.$_gridCellDblClicked(Du.getLayout(d,m));var m,b=this._getEditRequest(this.mouseEventTarget,a.focusedIndex,i,o,r,n,s);if(b instanceof hu)(m=b.layout).firstColumn&&a.fitLayoutWidth(m);break;case t.GridCellType.DATA:var w=a.getBodyView(c),C=w.bodyCellByCell(c),x=this.$_getIndexAt(a,l,w,c,o);if(Al.isExpander(e.target))return;if(C.grouped)this.$_gridCellDblClicked(Du.getItem(t.GridCellType.GROUP_HEADER,C.item.index,null));else if(this.$_gridCellDblClicked(Du.getCell(d,C,h)),Ds.areEquals(x,h)){var I=a.editController.currentEditor();a.showEditor(x,void 0,Rt.isMobile()&&(null==I?void 0:I.hasList))}break;case t.GridCellType.FOOTER:var S=a.getFooterView(c).tableCellByCell(c);this.$_gridCellDblClicked(Du.getSummary(d,S.summaryIndex,S.layout));break;case t.GridCellType.SUMMARY:var E=a.getSummaryView(c).tableCellByCell(c);this.$_gridCellDblClicked(Du.getSummary(d,E.summaryIndex,E.layout));break;case t.GridCellType.SUM:this.$_gridCellDblClicked(Du.getSub(d,a.sumView.getCellType(c)));break;case t.GridCellType.GROUP_FOOTER:var O=a.getBodyView(c).bodyCellByCell(c),R=O.item.footerIndex;this.$_gridCellDblClicked(Du.getGroupFooter(d,O.item.index,O.layout,R));break;case t.GridCellType.GROUP_HEAD:case t.GridCellType.GROUP_FOOT:var P=c[v];this.$_gridCellDblClicked(Du.getGroupElt(d,P));break;case t.GridCellType.GROUP_BAR:var k=c[y];f=a.getRowOfItem(k),this.$_gridCellDblClicked(Du.getItem(d,k,f))}}else if(u&&u===this._clickElement){var T=this._getClickData(u,e);T&&this.$_gridCellDblClicked(T)}},i.prototype._doMouseWheel=function(t){var e=this,i=this.grid;function o(t,e){return Rt.isSafari?Math.floor(t)===t:Rt.isChromium?e%120!=0:Rt.isFirefox?e%(Rt.isMac?48:120)!=0:void 0}i.setEventFrom(null),i.scrollOnEditing();var r=i.displayOptions,n=t.deltaX,s=t.deltaY,a=t.wheelDeltaX,l=t.wheelDeltaY;if(r.wheelEnabled&&!t.ctrlKey){if(!i._fireWheel(t))return!0;var h=(t.shiftKey||Math.abs(n)>Math.abs(s))&&0!==r.wheelScrollHorz;if(void 0!==this._scrollDirection&&this._scrollDirection!==h)return!0;if(clearTimeout(this._scrollTimer),this._scrollTimer=setTimeout((function(){e._scrollDirection=void 0}),100),this._scrollDirection=h,h){var u=i.leftPos;n=t.shiftKey?n||s:n;var c=Math.abs(r.wheelScrollHorz||16)*(n>0?1:-1);if(i.leftPos=u+c,(0===u||i.leftPos===u)&&o(n,a)){if((0===i.leftPos||i.leftPos===u)&&"undefined"!=typeof visualViewport){var d=visualViewport;if(n<0?d.offsetLeft+n>0:d.pageLeft+d.width+n<i.doc.documentElement.scrollWidth)return!1}return!0}return!0}var p=i.topIndex,f=Date.now(),_=Math.abs(r.wheelScrollLines);_=_||3;var g=o(s,l)?i.displayOptions.wheelDeltaY||10:0;if(g>0){if(!(this._wheelDeltaY+Math.abs(s)>=g))return this._wheelDeltaY+=Math.abs(s),!0;this._wheelDeltaY=0}if(r.wheelAccelDelay>0)if(f>this._prevScroll+300)this._checkScroll=f;else if(this._checkScroll+r.wheelAccelDelay<f){var y=r.wheelAccelScroll;if(y&&!isNaN(y))_=parseInt(y);else if("string"==typeof y){var m=y.trim();if(m.indexOf("%")>0){var b=i.itemCount;_=parseInt(m.substr(0,m.length-1))/100*b}}}return this._prevScroll=f,i.topIndex=i.topIndex+(s>0?_:-_),!r.wheelEventPropagate||p!=i.topIndex}return!1},i.prototype._doMouseEnter=function(t){},i.prototype._doMouseLeave=function(t){var e=t.mouseX,i=t.mouseY;this._hideTooltip(),this.$_setHoveredHeaderCell(null,e,i),this.$_setHoveredCell(null,e,i)},i.prototype._doMouseOver=function(t){},i.prototype._doContextMenu=function(e){var i=this.grid,o=this._findTableCell(),r=i.getCellType(o);return Rt.isMobile()&&i.displayOptions.rightClickable&&r===t.GridCellType.DATA&&!Ds.areEquals(this._tempIndex,i.focusedIndex)&&this.setFocused(this._tempIndex,!0,!0),i.doContextMenu(e)},i.prototype.$_doHome=function(t,e,i){var o=t.clone();if(t.first(),i&&this._checkReadOnly(t)&&!this._skipReadOnlyCell(t,1,o))return t.assign(e),!0},i.prototype.$_doEnd=function(t,e,i){var o=t.clone();if(t.last(),i&&this._checkReadOnly(t)&&!this._skipReadOnlyCell(t,-1,o))return t.assign(e),!0},i.prototype._doKeyDown=function(i){var o,r=i.keyCode,n=Rt.isMac,s=Rt.ctrlKey(i),a=i.shiftKey,l=i.altKey,h=this.grid,u=h.editOptions,c=h.layoutManager,d=h.popupMenuManager,p=u.skipReadOnly,f=u.skipReadOnlyCell,_=h.focusedIndex,g=_.clone(),y=u.verticalMoveStep;if(i.repeat||(this._userActionIndex=null),!h._fireKeyDown(i))return!0;if(!h.isEditing()&&h.accessibility&&Rt.included(r,36,35,40,34,38,33,32,37,39)&&Rt.stopEvent(i),d.isShow()&&Rt.included(r,37,39,38,40,13,32)){var m=h.getBodyCellAt(_);return d.keyDown(i,m&&m.cell),!0}if((h.setEventFrom("keydown"),_&&!h.isEditing())&&((m=h.getBodyCellAt(_))&&this.$_performRendererKey(m,i)))return!0;if(!h.isEditing()&&h.accessibility&&(67===r||86===r)&&s)return h.editController.setFocus(!0),!1;if(27==r)h.closePopups(),this._doCancel(h);else{if(13==r)return this._doEnter(h,u,g,i);if(9==r)return this._doTab(h,u,g,i);if(113==r)!h.isEditing()&&g.dataColumn&&(h.accessibility&&h.$_setEditFocused(!0,null),h.showEditor(g,a));else{if(Rt.isMac&&s&&a&&90===r)return h.redo();if(90==r&&s)return h.undo();if(89==r&&s)return h.redo();if(45==r)u.appendWhenInsertKey||0==h.itemCount?h.append():h.insert(g.item,a,s);else{if(46==r)return s&&a?(h.revertSelection(),!0):s?(h.deleteSelection(),!0):!!a&&(h.eraseSelection(!1,!1),!0);if(l&&a&&40==r)h.moveSelection(1,"keydown");else if(l&&a&&38==r)h.moveSelection(-1,"keydown");else if(32==r&&a&&s&&h.rowBarContainer.rowIndicator.visible&&h.editOptions.checkable){var b=h.selections.getItem(0),v=b&&(Ca(b)||Rt.included(b.style,t.SelectionStyle.BLOCK,t.SelectionStyle.GROUP))&&b.getItems(h.checkBar.merged||h.checkBar.fieldIndex>=0);v||h.checkBar.merged?(v=v||[g.item],h.toggleChecks(v,g.item)):h.toggleCheck(g.itemIndex),n&&i.preventDefault()}else if(h.editOptions.useArrowKeys&&Rt.included(r,36,35,39,37,40,38,34,33)){Rt.isMobile()&&i&&i.preventDefault&&i.preventDefault();var w=h.itemCount;if(40==r&&0==w)return h.append(),!0;if(!h.isValid(g))return g.normalize(h),this.setFocused(g,!0,!0),!0;if((Rt.included(r,40,34)||35==r&&s)&&g.isBottom&&this.$_checkAppending(g))return!0;if((Rt.included(r,38,33)||36==r&&s)&&g.isTop&&this.$_checkAppending(g,!0))return!0;var C=h.getBodyViewAt(g);if(!C)return!0;switch(r){case 36:if(s){if(i.preventDefault(),this.$_doHome(g,_,p))break}else g.home(),this._skipReadOnly(g,1);break;case 35:if(s){if(this.$_doEnd(g,_,p))break}else g.end(),this._skipReadOnly(g,-1);break;case 39:if(C.spanRight(c,g),g.right(),p&&this._checkReadOnly(g)&&!this._skipReadOnly(g,1)){g.assign(_);break}break;case 37:if(g.left(),p&&this._checkReadOnly(g)&&!this._skipReadOnly(g,-1)){g.assign(_);break}break;case 38:if(n&&s){this.$_doHome(g,_,p);break}try{if(0==g.itemIndex&&g.isTop){if(this.$_commitCancel(g.item,u))return!0;h.filterPanel.visible?h.inlineFilterFocus(g.layout):g.up(y)}else{if(s)return void h.topIndex--;g.up(y,h.isItemEditing(g.item))}}finally{f&&this._checkReadOnly(g)&&(this._skipReadOnlyCell(g,-1)||g.assign(_))}break;case 33:if(o=g.clone(),g.incRow(-c.fullItemCount),p&&this._checkReadOnly(g)&&!this._skipReadOnlyCell(g,1,o)){g.assign(_);break}break;case 40:if(n&&s){this.$_doEnd(g,_,p);break}try{if(g.itemIndex!=w-1||!g.isBottom&&y!=t.VerticalMoveStep.ROW){if(s)return h.topIndex++,!0;g.down(y,h.isItemEditing(g.item))}else{if(g.isBottom&&this._commitCancel(g.item,u))return!0;h.append(),g.down(y,h.isItemEditing(g.item))}}finally{f&&this._checkReadOnly(g)&&(this._skipReadOnlyCell(g,1)||g.assign(_))}break;case 34:if(g.itemIndex==h.itemCount-1&&g.isBottom&&Vo(g.item.itemState))return h.commit(u.forceAppend),!0;if(o=g.clone(),g.incRow(c.fullItemCount),p&&this._checkReadOnly(g)&&!this._skipReadOnlyCell(g,-1,o)){g.assign(_);break}}return C.spanHead(c,g),a&&h.selections.count>0&&!wa(h.displayOptions.selectionStyle)?(this.setFocused(g,!1,!1),h.selections.lastItem().resizeTo(g)):this.setFocused(g,!0,!0,i),!0}}}}return e.prototype._doKeyDown.call(this,i)},i.prototype._doKeyPress=function(t){this.grid._fireKeyPress(t)},i.prototype._doKeyUp=function(t){var e=this.grid;this._userActionIndex&&!Ds.areEquals(this._userActionIndex,e.focusedIndex)&&e.isValid(e.focusedIndex)&&e.editOptions.editWhenFocused&&e.showEditor(e.focusedIndex,!1,!1),this._userActionIndex=null,this.grid._fireKeyUp(t)},i.prototype._doCopyEvent=function(t){var e=this.grid;e&&!e.isEditing()&&e.copyToClipboard(t,null)},i.prototype._doPasteEvent=function(t){this.grid&&this.grid.fromClipboard(t)},i.prototype._editButtonClicked=function(t,i){this.grid.makeCellVisible(t),this.grid.showEditor(t,!1,!0)&&this.grid.editorButtonClicked(t,i),e.prototype._editButtonClicked.call(this,t,i)},i.prototype._getSelectRequest=function(e,i,o,r,n,s){var a=this.grid,l=a.displayOptions,h=l.selectionMode,u=l.selectionStyle,c=this._findTableCell(e);if(!c)return null;var d=l.selectAndImmediateDrag||l.altSelectAndImmediateDrag&&s;if(!d&&(h==t.SelectionMode.NONE||u==t.SelectionStyle.NONE))return null;var p=a.getCellType(c);if(p==t.GridCellType.INDICATOR){if(a.rowIndicator.selectable&&(d||!wa(u)))return new lu(a.getIndex(a.rowBarContainer.getCellIndex(c)),t.SelectionStyle.ROWS)}else if(p==t.GridCellType.HEADER){if(r&&a.rowIndicator.selectable){var f=a.layoutByDataCell(c);if(!wa(u))return new lu(a.getIndex(-1,f),t.SelectionStyle.COLUMNS)}}else if(p==t.GridCellType.DATA){var _=a.getDataCellIndex(c,this._tempIndex);if(r&&a.selections.containsCell(_))return null;if((d||!wa(u))&&!Rt.isMobile())return new lu(_.clone(),u)}return null},i.prototype._getEditRequest=function(e,i,o,r,n,s,a){var l=Et(this.grid.doc),h=this.grid;h.layoutManager;var u=h.displayOptions,c=this._findTableCell(e);if(!c)return null;var d=h.getTableView(c),p=!Rt.isInteractive(e)&&this.$_getRowResizeRequest(d,c,o,r,n,s,a);if(p)return p;if(d instanceof Cu&&d.isRowIndicator(c)){Rt.isIE&&(a=a||n);var f=!(O=h.getSelection())||!Rt.included(O.style,t.SelectionStyle.COLUMNS,t.SelectionStyle.SINGLE_COLUMN);if(f=f&&!Rt.included(h.dataDropOptions.feedbackStyle,t.DragFeedbackStyle.CELL,t.DragFeedbackStyle.GROUP),(a||h.rowIndicator.draggableSelectedRows&&f)&&h.canMoveRow(!1,!1)){var _=h.rowBarContainer.rowOf(c),g=!1;if(O?g=O.containsItem(_):_==i.itemIndex&&(g=!0),g)return this._rowMoveReq.init(O,_)}}else if(d instanceof Kl){if(e instanceof l.HTMLInputElement)return null;if(!n){var y=d.layoutByCell(c);if(y){var m=h.cellToContainer(c,this._reqPoint.setEmpty());if(u.columnResizable){var b=h.getHeaderCellAt(y),v=h.activeCellLayout,w=h.displayOptions.columnResizeThreshold,C=m.x+(b?b.width:y.domWidth),x=void 0,I=void 0;if(m.x+w>=o&&!y.$_rfixed?(x=v.getHeaderLeftOf(y),I=o-m.x):C-w<=o&&(x=y,I=o-C),x&&x._isResizable()&&(!x.isFixed||h.fixedOptions.resizable))return this._colResizeReq.init(x,o,r,I)}if(u.columnMovable&&y._isMovable()&&(!y.isRoot||h.canMoveLayout(y)))return this._colMoveReq.init(y,o,r,-1)}}}else if(d instanceof Ul){var S=h.getDataCellIndex(c,this._tempIndex);_=S&&S.itemIndex;if(h.canMoveRow(!1,!1)&&_>=0){var E=!1,O=h.getSelection();if((b=h.getBodyCellAt(S,!0)).expander===e)return null;if(Rt.isIE&&(a=a||n),O?!(E=O.containsItem(_))||a&&!h.displayOptions.altSelectAndImmediateDrag||(E=h.editOptions.movableWhenFocusedOnly?Ds.areEquals(i,S):O.containsLayout(S.layout)&&(a||this._canMoveRowAt(d,S,o))):i&&_==i.itemIndex&&(E=!!a||!Rt.isMobile()&&Ds.areEquals(S,i)&&this._canMoveRowAt(d,S,o)),E)return this._rowMoveReq.init(O,_)}}else if(d instanceof Ah){var R=d.boundsByContainer();if(h.header.resizable&&r<=R.bottom+1&&r>=R.bottom-2)return this._headerResizeReq.init(R.top,r-R.bottom-1)}},i.prototype.$_resizeSelection=function(e,i,o){var r=this.grid.selections,n=e?e.runStyle:o;if(!wa(n)&&Rt.included(o,t.SelectionStyle.ROWS,t.SelectionStyle.COLUMNS,t.SelectionStyle.SINGLE_COLUMN)&&(n=o),e){if(e.runStyle!=n){this.grid.selections.clear(!0);var s=e.getBounds();e=r.add(s.firstCell,s.lastCell,n,!0)}r.canResize(e)&&e.resizeTo(i)}else e=r.add(i,i,n,!0)},i.prototype._canMoveRowAt=function(t,e,i){return!!Rt.isMobile()||i<t.boundsByContainer(t.getCellRectAt(this.grid.layoutManager,e,!1)).x+20},i.prototype.$_getRowResizeRequest=function(t,e,i,o,r,n,s){var a=-1,l=this.grid;if(t instanceof Cu?a=e.parentElement.$_row:t instanceof Ul&&(l.rowBarContainer.isVisible()||t.rightFixed||(l.fixedOptions.colCount>0&&t.fixed||0===l.fixedOptions.colCount)&&0===e.cellIndex&&(a=e.parentElement.$_row)),a<0)return null;var h=l.layoutManager,u=l.displayOptions,c=u.eachRowResizable&&!r,d=h.fixedItemCount,p=h.contentBounds.y,f=t.boundsByContainer(this._tempRect.setWidth(t.width));if(f.width<=0||i<f.x||i>=f.right)return null;if(a<d){if(l.fixedOptions.rowResizable&&(!u.dataHeights||u.dataHeights.length<=0)&&((f=h.getItemRect(a)).y+=p,o<=f.bottom+2&&o>=f.bottom-3))return this._rowResizeReq.init(a,c,f.y,o-f.bottom-1)}else if(u.rowResizable&&(!u.dataHeights||u.dataHeights.length<=0))for(var _=h.itemCount,g=l.topIndex,y=0;y<_;y++){var m=y+g+d;if(m==a&&((f=h.getItemRect(y+d)).y+=p,o<=f.bottom+2&&o>=f.bottom-3))return this._rowResizeReq.init(m,c,f.y,o-f.bottom-1)}return null},i.prototype._getDragTracker=function(e,i,o){if(e instanceof lu)switch(e.style){case t.SelectionStyle.ROWS:case t.SelectionStyle.SINGLE_ROW:return new gh(e,i,o);case t.SelectionStyle.COLUMNS:return new yh(e,i,o);case t.SelectionStyle.BLOCK:case t.SelectionStyle.GROUP:case t.SelectionStyle.NONE:return new _h(e,i,o)}else{if(e instanceof hu)return new hh(e,this._cellResizer);if(e instanceof uu)return new uh(e,this._cellFeedback,this._cellMover);if(e instanceof cu)return new ch(e,this._cellResizer);if(e instanceof pu)return new ph(e,this._rowMoverProxy,this._rowMoverLine);if(e instanceof du)return new dh(e,this._cellResizer);if(Rt.isMobile()){if(e instanceof Iu)return this._touchScrollTracker.request=e,this._touchScrollTracker;if(e instanceof Su)return this._touchSelectTracker.request=e,this._touchSelectTracker}}return null},i.prototype.$_checkCellClicked2=function(e,i){if(e!==i.target&&e.firstElementChild!==i.target){var o=It(e),r=this.grid,n=r.checkBar,s=r.rowBarContainer.getCheckBox(e);if(r.editOptions.checkable){var a=r.getEditItem(),l=r.getItem(e.parentElement[y]),h=!0;if(a&&a.dataRow!==l.dataRow){var u=r.editOptions;try{switch(a.itemState){case t.ItemState.APPENDING:h=r.commit(u.forceAppend);break;case t.ItemState.INSERTING:h=r.commit(u.forceInsert);break;case t.ItemState.UPDATING:h=r.commit(u.commitWhenNoEdit)}}catch(t){throw i.preventDefault(),t}}if(!1===h)return void i.preventDefault();if(l.checkable){var c=s.checked;n.exclusive?c=!n.toggleRadio||!l.checked:i.target instanceof o.HTMLSpanElement&&(c=!s.checked),s.checked=c}this._doCheck(s,l,i.shiftKey)}else i.preventDefault()}},i.prototype._doCheck=function(t,e,i){var o=this.grid,r=o.checkBar,n=o.rowBarContainer.checkBar;if(o.editOptions.checkable){var s=o.checkBar;if(e.checkable&&(s.showGroup||e.dataRow>=0)&&t){var a=n._prevChecked,l=void 0,h=void 0,u=[],c=-1,d=-1,p=void 0;if(i&&a>=0&&!r.exclusive||s.merged){i&&a>=0?(l=Ds.temp(o,a,null),h=o.getItem(a).checked,s.merged?(c=(p=s.merges.getRoom(l))?p.head:a,d=p?p.tail:a):(c=Math.min(a,e.index),d=Math.max(a,e.index))):(h=t.checked,c=d=e.index,n.$_setPrevChecked(e.index),r.exclusive&&o.itemSource._clearChecked()),s.merged&&(l=Ds.temp(o,e.index,null),p=s.merges.getRoom(l),c=Math.min(p?p.head:e.index,c),d=Math.max(p?p.tail:e.index,d));for(var f=c;f<=d;f++){var _=o.getItem(f);_.checkable&&_.dataRow>=0&&u.push(_)}u.length>0&&o.itemSource.checkItems(u,h,!0)}else if(o.itemSource.checkItem(e,t.checked,s.exclusive,!0),n.$_setPrevChecked(e.index),s.focusMove){var g=o.focusedIndex.clone();g.itemIndex=e.index,!o.isValid(g)&&null==g.column&&g.item.isDataRow&&(g.layout=o.getFirstLayout()),this.setFocused(g,!0,!0)}}}},i.prototype._checkAllClicked=function(){var t=this.grid;if(!t.empty&&t.editOptions.checkable){var e=t.checkBar,i=t.headView;e.showAll&&!e.exclusive&&(i.allChecked=!i.allChecked,i.indeterminate=!1,t.itemSource.checkAll(i.allChecked,e.visibleOnly,e.checkableOnly,!0,e.showGroup&&!e.merged&&e.fieldIndex<0))}},i.prototype._doColumnHeaderClicked=function(t,e){var i=2==t.button,o=Rt.ctrlKey(t),r=t.target;if(!i){var n=void 0;e instanceof _s?n=e.getDataColumn():e instanceof vs&&e.hideChildHeaders&&e.tiedColumn&&(n=e.tiedColumn);var s=this.grid,a=s.getHeaderView(this._clickCell).tableCellByCell(this._clickCell);if(n)if(r===a.check||r===a.checkSpan)a.check.checked=n.checked=!n.checked,s._columnCheckedChanged(n);else if(r===a.filter&&n.hasFilters)s.selectColumnFilters(a);else{if(r!==a.popup)return!!Rt.isClickableTemplate(a.cell,r)||(!(n.sortable&&s.sortingOptions.enabled&&!o)||(s.sortColumn(n,t),!0));var l=n.header.popupMenuName,h=s.getCellViewOf(a.cell);l&&h&&s.popupMenuManager.show(l,h,null,!0)}else if(e instanceof vs){if(r!==a.expander||!e.expandable)return!0;e.expanded=!e.expanded}}},i.prototype.$_gridCellClicked=function(t){this.grid._fireCellClicked(t)},i.prototype.$_gridCellDblClicked=function(t){this.grid._fireCellDblClicked(t)},i.prototype.$_setHoveredCell=function(t,e,i){var o=this.grid,r=this._findTableCell();if(t&&r){var n=o.getTableView(r),s=this.$_getIndexAt(o,o.layoutManager,n,r,i);if(t!==this._tooltipCell||!Ds.areEquals(this._tooltipIndex,s)){this._hideTooltip(),this._tooltipShowTimer&&clearTimeout(this._tooltipShowTimer);var a=o.displayOptions.hintDelay;if(t)if(a>0){var l=this;this._tooltipShowTimer=setTimeout(function(){l.$_showTooltip2(t,s)}.bind(l),a)}else this.$_showTooltip2(t,s)}}},i.prototype._hideTooltip=function(){this.grid.tooltipManager.close(),this._tooltipCell=null,this._tooltipIndex.reset()},i.prototype.$_showTooltip2=function(e,i){var o=this.grid,r=o.validationManager.getError(i);if(o.editOptions.hintOnError&&r)this.$_showTooltip(e,i,{message:r.message});else{var n=e.renderer2,s=o.getCellType(e.cell),a=i.item,l=this._findTableCell();if(!l)return;var h=l.firstElementChild,u=h.clientWidth<h.scrollWidth||h.clientHeight<h.scrollHeight,c=o.displayOptions,d=a&&s===t.GridCellType.DATA&&(!Rt.isMobile()||o.mobileOptions.showTooltip);if(a instanceof Hr?d=d&&i.dataColumn&&i.dataColumn.groupLevel>0&&a.groupLevel+1>=i.dataColumn.groupLevel:a instanceof jr&&(d=d&&i.dataColumn&&a.level>i.dataColumn.groupLevel),(d=d&&!!n)&&(d=c.showTooltip?!1!==n.showTooltip:n.showTooltip),d&&(c.tooltipEllipsisOnly&&!1!==n.tooltipEllipsisOnly||!0===n.tooltipEllipsisOnly)&&(d=u),d&&!Ds.areEquals(i,this._tooltipIndex)){var p=n.getTooltip(e,i);if(p||c.showEmptyTooltip){var f=o._fireShowTooltip(i,p,u);f&&("boolean"==typeof f?f={message:p}:"string"==typeof f&&(f={message:f}),this.$_showTooltip(e,i,f))}}}},i.prototype.$_showTooltip=function(t,e,i){var o=this.grid,r=o.tooltipManager,n=o.layoutManager;if(!r.visible||this._tooltipCell!=t){this._hideTooltip();var s=o.getBodyView(t.cell),a=s.getCellRectAt(n,e,!1);a=s.boundsByContainer(a);var l=t.layout.isFixed?a.x:Math.max(a.x,n.nonFixedBounds.x),h=a.y+a.height;r.show(i,l,h,a.height,!1),this._tooltipCell=t,this._tooltipIndex.assign(e)}},i.prototype.$_showStateError=function(t,e){var i=this.grid,o=i.tooltipManager,r=i.layoutManager;if(t!==this._tooltipCell){this._hideTooltip();var n=i.focusedIndex.itemIndex,s=i.rowBarContainer.boundsByContainer(),a=r.getItemBounds(n<r.fixedItemCount?n:n-r.topIndex);o.show({message:e},s.x,s.y+a.bottom,a.height,!0),this._tooltipCell=t,this._tooltipIndex.assign(null)}},i.prototype.$_setHoveredHeaderCell=function(t,e,i){if(t!=this._tooltipCell){this._hideTooltip(),this._tooltipShowTimer&&clearTimeout(this._tooltipShowTimer);var o=this.grid.displayOptions.hintDelay;if(o>0){var r=this;this._tooltipShowTimer=setTimeout(function(){r.$_showHeaderTooltip2(t)}.bind(r),o)}else this.$_showHeaderTooltip2(t)}},i.prototype.$_showHeaderTooltip2=function(t){var e=this.grid,i=e.header.showTooltip,o=e.header.tooltipEllipsisOnly,r=this._findTableCell();if(r){var n=r.firstElementChild,s=n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight;if(!1!==i&&this._tooltipCell!=t){var a=t&&t.showTooltip;if(void 0===i?a:!1!==a){var l=t.tooltip||t.text,h=!0;if((o&&!1!==t.tooltipEllipsisOnly||!0===t.tooltipEllipsisOnly)&&(h=s),h&&l){var u=e._fireShowHeaderTooltip(t.layout.firstColumn,l,t.layout,s);u&&("boolean"==typeof u?u={message:l}:"string"==typeof u&&(u={message:u}),this.$_showHeaderTooltip(t,u))}}}}},i.prototype.$_showHeaderTooltip=function(t,e){var i=this.grid,o=i.tooltipManager,r=i.layoutManager;if(!o.visible||this._tooltipCell!=t){this._hideTooltip();var n=r.getHeaderCellRect(t.layout,!1),s=t.layout.isFixed?n.x:Math.max(n.x,r.nonFixedBounds.x),a=n.y+n.height;o.show(e,s,a,0,!0),this._tooltipCell=t}},i.prototype.$_cellButtonClicked=function(e){var i=this.grid,o=e.layout.firstColumn;if(o){var r=e.getEditIndex(this._tempIndex);switch(e.button){case t.CellButton.POPUP:var n=o.popupMenuName,s=i.getCellViewOf(e.cell);n&&s&&i.popupMenuManager.show(n,s,r,!0);break;case t.CellButton.ACTION:i._doCellButtonClicked(r)}}},i.prototype.$_commitCancel=function(e,i){var o=this.grid;try{switch(e.itemState){case t.ItemState.INSERTING:return o.commit(i.forceInsert)||o.cancel(!0),!0;case t.ItemState.APPENDING:return o.commit(i.forceAppend)||o.cancel(!0),!0;case t.ItemState.UPDATING:return o.commit(i.commitWhenNoEdit)||o.cancel(!0),!0}}catch(t){if(t instanceof Dn)return(t=o._fireValidationFail(e.index,t.column,t))&&alert(i.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),!1;if(t instanceof Tn)return!1;throw t}return!1},i.prototype.$_checkAppending=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=null);var o=this.grid;if(t.itemIndex==o.itemCount-1&&Vo(t.item.itemState)){var r=t.itemIndex;if(!i||i.itemIndex!=r){try{o.commit(o.editOptions.forceAppend,!0)?((t=t.clone()).itemIndex=r,o.isValid(t)||(t.itemIndex=o.getItemIndexOfRow(o.dataSource.rowCount-1)),this.setFocused(t,!0,!0)):e&&(o.cancel(!0),i&&this.setFocused(i,!0,!0))}catch(t){if(t instanceof Dn)return(t=o._fireValidationFail(r,t.column,t))&&alert(o.editOptions.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),!0;if(t instanceof Tn)return!0;throw t}return!0}}return!1},i.prototype._getTouchRequest=function(e){var i=this.grid,o=i.selectionLayer;if(o instanceof ku){var r=o.getSelectHandle(e.target);if(r)return this._touchSelectRequest.handle=r,this._touchSelectRequest}if(e.target instanceof HTMLInputElement)return null;var n=i.getCellViewOf(e.target),s=i.getCellType(n);if(!n){var a=this.findElementAt(e.mouseX,e.mouseY,!1),l=this._getClickData(a,e);s=l&&l.cellType}switch(s){case t.GridCellType.DATA:var h=i.getBodyCellbyCell(e.target);if(h&&h.isEditButton(e.target))return;return this._touchScrollRequest;case t.GridCellType.GRID_EMPTY:case t.GridCellType.FOOTER:case t.GridCellType.SUMMARY:case t.GridCellType.GROUP_FOOTER:case t.GridCellType.GROUP_HEADER:case t.GridCellType.INDICATOR:case t.GridCellType.STATE:case t.GridCellType.CHECK:return this._touchScrollRequest}},i.prototype._doTouchMove=function(t){var e,i=this.grid.mobileOptions,o=this.dragTracker,r=!!o;return o instanceof Ou&&(r=o._scrolling||void 0===o._scrolling),Rt.isMobile()&&Rt.isiOS&&(e=t.touches&&t.touches[0].touchType),"stylus"===e?(o&&o._scrolling||this._swipeTimer||!i.scrollPropagate||!t.cancelable)&&t.preventDefault():(r||this._swipeTimer||!i.scrollPropagate)&&t.cancelable&&t.preventDefault(),o&&void 0===o._scrolling||(this._longPressed=!1,this._longTimer=this._longTimer&&clearTimeout(this._longTimer)),this._touchEvents.push({x:t.mouseX,y:t.mouseY,t:t.timeStamp}),!1},i.prototype._checkSwipe=function(e){if(this.dragTracker instanceof Ou){var i=this.grid,o=this._clickCell&&i.getTableView(this._clickCell);if(!((o=o||this.findElementAt(e.mouseX,e.mouseY,!1))instanceof th||o instanceof El||o instanceof Ul)){var r=this._getClickData(o,e);if(r&&r.cellType!==t.GridCellType.GROUP_HEADER)return}var n=this._touchEvents,s=n.length;if(!(s<2)){for(var a=n[s-1],l=n[s-2],h=s-3;h>=0&&!(a.t-l.t>100);h--)l=n[h];var u=l.x,c=l.y,d=a.x,p=a.y,f=Math.sqrt(Math.pow(u-d,2)+Math.pow(c-p,2))/Math.max(16,a.t-l.t),_=.998;if(f>.1){var g=Math.log(.1/f)/Math.log(_),y=f*(1-Math.pow(_,g+1))/(1-_),m="right",b=Math.round(180*Math.atan2(p-c,d-u)/Math.PI);if(b<0&&(b=360+b),b>45&&b<=135?m="bottom":b>135&&b<=225?m="left":b>225&&b<=315&&(m="top"),o instanceof th&&Rt.included(m,"bottom","top"))return;return this.onSwipeHandler(g,y,m,e)}}}},i.prototype.onSwipeHandler=function(t,e,i,o){this._touchMoving=!0,this._swipeDuration=t,this._swipeStarted=Rt.getTimer(),this._swipeAmount=0;var r=1;switch(i){case"right":r=-1;case"left":this._swipeDistance=r*e/20,this._swipeTimer=setInterval(this.$_scrollLeftPos.bind(this),50);break;case"bottom":r=-1;case"top":this._swipeDistance=r*e/20,this._swipeTimer=setInterval(this.$_scrollRow.bind(this),50)}return!0},i.prototype.$_checkTopBottom=function(t){var e=this.grid,i=e.layoutManager;return 0===e.topIndex&&t<0||e.topIndex+i.fullItemCount>=e.itemCount&&t>0},i.prototype.$_scrollRow=function(){var t=Rt.getTimer();if(Math.abs(this._scrollY-window.scrollY)>10)this._touchMoving=this._swipeTimer=clearInterval(this._swipeTimer);else if(t-this._swipeStarted<this._swipeDuration){var e=Math.floor(50*(this._swipeDistance-this._swipeAmount)/this._swipeDuration);this._swipeAmount-=e,this.grid.topIndex+=e,this.$_checkTopBottom(e)&&(this._swipeTimer=clearInterval(this._swipeTimer))}else this._swipeTimer=clearInterval(this._swipeTimer)},i.prototype.$_scrollLeftPos=function(){Rt.getTimer()-this._swipeStarted<this._swipeDuration?this.grid.leftPos+=Math.floor(this._swipeDistance):this._touchMoving=this._swipeTimer=clearInterval(this._swipeTimer)},i}(Gu),zu=function(t){function e(){var e=t.call(this)||this;return e._valueSeparator="/",e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"separator",{get:function(){return this._valueSeparator},set:function(t){this._valueSeparator=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueSeparator",{get:function(){return this._valueSeparator},set:function(t){this._valueSeparator=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"separatorStyle",{get:function(){return this._separatorStyle||e.SEPARATOR_STYLE},set:function(t){this._separatorStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"targetStyle",{get:function(){return this._targetStyle||e.TARGET_STYLE},set:function(t){this._targetStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualStyle",{get:function(){return this._actualStyle||e.ACTUAL_STYLE},set:function(t){this._actualStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"template",{get:function(){return this._template},set:function(t){this._template=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),e.prototype._doInitContent=function(t){var e=St(t);this._templateDiv=e.createElement("div");var i=this._templateDiv.style;i.width=i.height="100%",i.position="relative",this._targetSpan=e.createElement("span"),this._actualSpan=e.createElement("span"),(this._separatorSpan=e.createElement("span"))[Rt.TextProp]=Rt.htmlEncode(this._valueSeparator||this.index.valueColumn.valueSeparator),t.appendChild(this._actualSpan),t.appendChild(this._separatorSpan),t.appendChild(this._targetSpan),t.appendChild(this._templateDiv)},e.prototype._doRenderCell=function(t,e,i,o,r){var n=e.value;this._targetSpan.className=this.targetStyle,this._separatorSpan.className=this.separatorStyle,this._actualSpan.className=this.actualStyle,this._templateDiv.style.display="none";var s=null==n[0]?"":String(n[0]),a=null==n[1]?"":String(n[1]),l="";if(this._template){var h=this._template;h.indexOf("${target}")>0&&h.indexOf("${actual")>0&&(l="none",h=h.replace("${target}",s).replace("${actual}",a),this._templateDiv.style.display="",this._templateDiv.innerHTML=h)}this._targetSpan.style.display=this._separatorSpan.style.display=this._actualSpan.style.display=l,n.length?(this._targetSpan[Rt.TextProp]=s,this._actualSpan[Rt.TextProp]=a):(this._targetSpan[Rt.TextProp]="",this._actualSpan[Rt.TextProp]="")},e.prototype._makeText=function(t,e){var i=this._valueSeparator||this.index.seriesColumn.valueSeparator;return e.getDisplayText(t,i)},e.TYPE="actualtargettext",e.TARGET_STYLE="rg-actualtarget-target",e.ACTUAL_STYLE="rg-actualtarget-actual",e.SEPARATOR_STYLE="rg-actualtarget-separator",e}(zr),qu=function(t){function e(){var e=t.call(this)||this;return e._minValue=0,e._maxValue=100,e.$_render=function(t,i,o,r){var n=e._values;if(n&&!(n.length<2)){var s=n[0],a=n[1];if(null!=s&&null!=a){i.sbounds(e.backgroundStyle,"0%","10%","100%","80%");var l="1px";e.strokeWidth>0&&(l="".concat(e.strokeWidth,"px"));var h="40%",u="30%";if(e.actualHeight){var c=e.actualHeight,d=parseFloat(c);if(c.indexOf("%")>=0)u="".concat((100-d)/2,"%"),h="".concat(d,"%");else u="".concat((.9*r-d)/2,"px"),h="".concat(d,"px")}var p=e.getValueRate(a);i.sbounds(e.actualStyle,l,u,"".concat(p,"%"),h);var f=e.targetWidth||3,_=e.getValueRate(s)*((o-f)/o);i.sbounds(e.targetStyle,"".concat(_,"%"),"10%","".concat(f,"px"),"80%")}}},e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doInitOptions=function(){this._actualStyle=e.ACTUAL_STYLE,this._targetStyle=e.TARGET_STYLE,this._backgroundStyle=e.BASE_STYLE,this._minValue=0,this._maxValue=100,this._strokeWidth=this._targetWidth=this._actualHeight=void 0},Object.defineProperty(e.prototype,"backgroundStyle",{get:function(){return this._backgroundStyle||e.BASE_STYLE},set:function(t){this._backgroundStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"targetStyle",{get:function(){return this._targetStyle||e.TARGET_STYLE},set:function(t){this._targetStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualStyle",{get:function(){return this._actualStyle||e.ACTUAL_STYLE},set:function(t){this._actualStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxValue",{get:function(){return this._maxValue},set:function(t){this._maxValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minValue",{get:function(){return this._minValue},set:function(t){this._minValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(t){this._strokeWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"targetWidth",{get:function(){return this._targetWidth},set:function(t){this._targetWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualHeight",{get:function(){return this._actualHeight},set:function(t){"number"==typeof t?this._actualHeight=t+"px":t.indexOf("%")>0||t.indexOf("px")>0?this._actualHeight=t:this._actualHeight="".concat(t,"%")},enumerable:!1,configurable:!0}),e.prototype.getValueRate=function(t){t=parseFloat(t);var e=Math.floor((t-this._minValue)/(this._maxValue-this._minValue)*1e4)/100;return Math.min(e,100)},Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!1,configurable:!0}),e.prototype._doInitContent=function(t){var e=St(t),i=t.style,o=this._div=e.createElement("div");(i=o.style).position="relative",i.height="100%",t.appendChild(o),(i=(this._svg=Dr.createSVG(o)).style).position="absolute",i.left=i.top="0px",i.width=i.height="100%"},e.prototype._doRenderCell=function(t,e,i,o,r){var n=this._svg;this._values=e.value||[],Dr.renderSVG2(t,n,this.$_render,o,r)},e.prototype._makeText=function(t,e){return e.getDisplayText(t,this.index.seriesColumn.valueSeparator)},e.TYPE="actualtargetbullet",e.STYLE="rg-bullet-renderer",e.BASE_STYLE="rg-bullet-background",e.TARGET_STYLE="rg-bullet-target",e.ACTUAL_STYLE="rg-bullet-actual",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(zr),Ku=function(t){function e(e){var i=t.call(this)||this;return i._cellEditors={},i._customRenderers={},i._grid=e,i}return o(e,t),e.registryCustomRenderer=function(t,i,o){t&&i&&(e.$_customRenderers[t]&&!o||(e.$_customRenderers[t]=i))},e.prototype._doDispose=function(){this._grid=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editors",{get:function(){return this._cellEditors},enumerable:!1,configurable:!0}),e.prototype.getDefaultCellEditor=function(){if(!this._defaultEditor){var t=this._grid.container._container;this._defaultEditor=new $a(this._grid,t),this._cellEditors.line=this._defaultEditor,this._defaultEditor.setController(this._grid.editController)}return this._defaultEditor},e.prototype.getCellEditor=function(t){var e=this._grid.container._container,i=this._cellEditors[t];if(!i){switch(t){case"list":case"dropdown":i=new za(this._grid,e);break;case"nlist":i=new Za(this._grid,e);break;case"multiline":i=new Va(this._grid,e);break;case"number":i=new ja(this._grid,e);break;case"date":i=new al(this._grid,e);break;case"btdate":i=new hl(this._grid,e);break;case"search":i=new Xa(this._grid,e);break;case"checklist":i=new Ka(this._grid,e);break;case"password":i=new Aa(this._grid,e);break;case"ndate":i=new ul(this._grid,e);break;default:i=this.getDefaultCellEditor()}this._cellEditors[t]=i,i&&i.setController(this._grid.editController),this._grid.accessibility&&i.detach()}return i},e.prototype.getEditConfig=function(t){var e=this.grid,i=e.editorOptions;if(e&&t)switch(t){case"list":case"dropdown":return Rt.assign({},Xe.editor.dropdownCellEditor,i.dropdownCellEditor);case"number":return Rt.assign({},Xe.editor.numberCellEditor,i.numberCellEditor);case"date":return Rt.assign({},Xe.editor.dateCellEditor,i.dateCellEditor);case"search":return Rt.assign({},Xe.editor.searchCellEditor,i.searchCellEditor);case"checklist":return Rt.assign({},Xe.editor.multiCheckCellEditor,i.multiCheckCellEditor)}},e.prototype.$_checkFlexible=function(t,e){if(!Rt.ieOld&&!Rt.ieTen)return t&&t.flexible||e&&e.flexible},e.prototype.createRenderer=function(t,i,o){var r=null;if(t){switch(t){case qr.TYPE:r=new qr;break;case Xr.TYPE:r=new Xr;break;case Zr.TYPE:r=new Zr;break;case Qr.TYPE:r=this.$_checkFlexible(i,o)?new tn:new Qr;break;case en.TYPE:r=this.$_checkFlexible(i,o)?new rn:new en;break;case nn.TYPE:r=new nn;break;case an.TYPE:r=this.$_checkFlexible(i,o)?new ln:new an;break;case sn.TYPE:r=new sn;break;case hn.TYPE:r=new hn;break;case un.TYPE:r=new un;break;case cn.TYPE:r=new cn;break;case kl.SERIES_TYPE:r=new kl;break;case Dl.TYPE:r=new Dl;break;case Ml.TYPE:r=new Ml;break;case Fl.TYPE:r=new Fl;break;case _n.TYPE:r=new _n;break;case on.TYPE:r=new on;break;case zu.TYPE:r=new zu;break;case qu.TYPE:r=new qu}if(!r){var n=this._customRenderers[t]||e.$_customRenderers[t];n&&(r="function"==typeof n?new n(t):new _u(n,t))}r||(Rt.log("Renderer type is invalid: "+t),r=new qr),i&&r.assignFrom(i),o&&r.assignFrom(o)}return r},e.prototype.addCustomRenderer=function(t,e){t&&e&&(this._customRenderers[t]=e)},e.prototype.removeCustomRenderer=function(t){delete this._customRenderers[t]},e.prototype.existsCustomRenderer=function(t){return this._customRenderers.hasOwnProperty(t)},e.prototype.clearCustomRenderers=function(){this._customRenderers={}},e.$_customRenderers={},e}(Lt),Xu=function(t){function e(e,i,o){void 0===i&&(i=0);var r=t.call(this,e)||this;if(i<1)throw new Error("LookupTable levels must be equals or greater than 1");return r._levels=i,r._tree={},r}return o(e,t),e.prototype._doDispose=function(){this._tree=null,t.prototype._doDispose.call(this)},e.prototype.clear=function(){this._tree={},this._changed()},e.prototype.exists=function(t){var e;if((t=Rt.makeArray(t))&&(e=t.length)>0&&e<=this._levels){if((e=Math.min(e,this._levels)-1)>0){for(var i=this._tree,o=0;o<e&&(i=i[t[o]]);o++);return null!=i&&i.hasOwnProperty(t[e])}return this._tree.hasOwnProperty(t[0])}return!1},e.prototype.fill=function(t,e,i){if(t&&t.length>0&&e&&e.length>0){for(var o=Math.min(t.length,e.length),r=0;r<o;r++){var n=Rt.makeArray(t[r]);this.$_add(n,e[r],null==i?void 0:i.list[r])}this._changed()}},e.prototype.fillRows=function(t){if(t&&t.length>0){for(var e=0,i=t.length;e<i;e++)this.$_addRow(t[e]);this._changed()}},e.prototype.add=function(t,e){t&&(this.$_add(t,e),this._changed())},e.prototype.addRow=function(t){t&&(this.$_addRow(t),this._changed())},e.prototype.lookup=function(t,e,i){var o;if(this._levels>1){var r=void 0,n=this._levels-1;for(o=this._tree,r=0;r<n&&(o=o[t[r]]);r++);}else o=this._tree;var s=t[t.length-1];if(s){if(o){for(var a=String(s).split(e),l=[],h=(r=0,a.length);r<h;r++){var u=a[r],c=o[u]&&o[u].value;l.push(c||(i||u))}return l.join(e)}return i||s}},e.prototype.getDomain=function(t){if(!t||t.length!=this._levels-1)throw new Error("Keys length must be "+(this._levels-1));var e,i,o=this._tree,n=[],s=[],a=[];if(this._levels>1)for(e=0,i=t.length;e<i;e++)if(!(o=o[t[e]]))return{keys:n,values:s,listItem:a};var l=[];for(var h in o)"__id__"!==h&&l.push(r({key:h},o[h]));return l.sort((function(t,e){return t.__id__-e.__id__})).map((function(t){n.push(t.key),s.push(t.value),a.push(t.item)})),{keys:n,values:s,listItem:a}},e.prototype.getLookupData=function(t){var e=this.getDomain(t);return{keys:e.keys.map((function(e){return a(a([],t,!0),[e],!1)})),values:e.values.slice(),listResult:{list:e.listItem.slice()}}},e.prototype.getTextDomain=function(t){for(var e=this.getDomain(t),i=e.keys,o=e.values,r=0,n=e.keys.length;r<n;r++)i[r]=i[r]?String(i[r]):null,o[r]=o[r]?String(o[r]):null;return e},e.prototype.$_add=function(t,e,i){if(t){t=Rt.makeArray(t);var o,r,n,s=this._levels;if(t.length<s)throw Error("Keys length must be equals or greater than "+s);var a=this._tree;for(o=0;o<s-1;o++)(n=a[r=t[o]])||(a[r]=n={__id__:0}),a=n;a[t[s-1]]={__id__:a.__id__++,value:e,item:i}}},e.prototype.$_addRow=function(t){if(t){if(t.length-1<this._levels)throw Error("Keys length must be equals or greater than "+this._levels);var e=t[this._levels],i=t.slice(0,this._levels);this.$_add(i,e,t[this._levels+1])}},e}(function(t){function e(e){var i=t.call(this)||this;return i._id=e,i}return o(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),e.prototype._changed=function(){this.fireEvent(e.CHANGED)},e.CHANGED="onLookupSourceChanged",e}(Re)),Zu=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i._sources={},e&&i.load(e),i}return o(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this)},e.prototype.load=function(t){if(t=Rt.makeArray(t)){this._sources={};for(var e=0,i=t.length;e<i;e++)this.$_add(t[e]);this._changed()}},e.prototype.add=function(t){var e=this.$_add(t);return e&&this._changed(),e},e.prototype.remove=function(t){this.$_remove(t)&&this._changed()},e.prototype.getSource=function(t){return this._sources[t]},e.prototype.$_createSource=function(t){if(t){var e=new Xu(t.id,t.levels,t.ordered);return e.fill(t.keys,t.values,t.listResult),e}return null},e.prototype.$_add=function(t){if(t&&t.id&&this._sources[t.id]!=t){var e=this.$_createSource(t);if(e)return this.$_remove(t.id),this._sources[t.id]=e,e.addListener(this),e}},e.prototype.$_remove=function(t){if(t){var e=this._sources[t];if(e)return e.removeListener(this),delete this._sources[t],!0}return!1},e.prototype.onLookupSourceChanged=function(t){this._changed()},e}(function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._changed=function(){this.fireEvent(e.CHANGED)},e.CHANGED="onLookupSourceProviderChanged",e}(Re)),Ju=function(t){function e(e){var i=t.call(this)||this;return i._visible=!0,i._enabled=!0,e&&e.name&&(i._name=e.name),e&&i.assignFrom(e),i}return o(e,t),e.prototype._doDispose=function(){return t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled&&!this.isSeparator()},set:function(t){this._enabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(t){this._label=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"group",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){this._styleName=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"manager",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checked",{get:function(){return null},enumerable:!1,configurable:!0}),e.prototype.click=function(){},e.prototype.isSeparator=function(){return!1},e}(Re),Qu=function(e){function i(t,i){var o=e.call(this,i)||this;return o._parent=t,o}return o(i,e),i.prototype._doDispose=function(){this._parent=null,this._callback=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"group",{get:function(){return this._group},set:function(t){this._group=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checked",{get:function(){return this._checked},set:function(t){this._checked=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"callback",{get:function(){return this._callback},set:function(t){this._callback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},set:function(t){this._parent=t},enumerable:!1,configurable:!0}),i.prototype.isSeparator=function(){return"-"===this._label||this._type===t.MenuItemType.SEPARATOR},i.prototype.getData=function(){return{label:this._label,checked:this._checked,enabled:this._enabled,tag:this.tag}},i.prototype.click=function(){"check"===this._type&&(this._checked=!this._checked),this._parent&&this._parent.itemClicked(this)},Object.defineProperty(i.prototype,"manager",{get:function(){return this._parent.manager},enumerable:!1,configurable:!0}),i.prototype._itemClicked=function(t){},i}(Ju),tc=function(e){function i(t,i){var o=e.call(this,i)||this;return o._parent=t,o._items=o._load(i.children),o}return o(i,e),i.prototype._doDispose=function(){this._items&&this._items.forEach((function(t,e){t.dispose()})),this._items=null,this._parent=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"children",{get:function(){return this._items},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"manager",{get:function(){for(var t=this._parent;t;){if(t.popupMenuManager instanceof ic)return t.popupMenuManager;if(t instanceof ic)return t;t=t._parent}return null},enumerable:!1,configurable:!0}),i.prototype.count=function(){return this._items?this._items.length:0},i.prototype.itemClicked=function(e){if(e.parent==this&&e.type===t.MenuItemType.RADIO){var i=e.group,o=void 0;if(i){for(var r=0;r<this._items.length;r++)(o=this._items[r])instanceof Qu&&o.type===t.MenuItemType.RADIO&&o.group===i&&(o.checked=!1);e.checked=!0}}var n=this.manager.grid;"function"==typeof e.callback?e.callback.call(this,n.handler,e.toProxy(),this.manager.clickData):this._parent instanceof ic?this._parent.doMenuItemClick(e,this.manager.clickData):this._parent.onMenuItemClick?this._parent.onMenuItemClick(e,this.manager.clickData):this._parent.itemClicked(e)},i.prototype.addMenu=function(t,e){var i;void 0===e&&(e=-1);var o=this._load(Rt.makeArray(t));e<0&&(e=this._items.length),(i=this._items).splice.apply(i,a([e,0],o,!1))},i.prototype.removeMenu=function(t){var e=this.getMenu(t);if(e){var i=this._items.indexOf(e);return this._items.splice(i,1),e.dispose(),!0}},i.prototype.getMenu=function(t){return Rt.find(this._items,(function(e){return e.name===t}))},i.prototype._load=function(t){var e=[];if(t)for(var o=0,r=t.length;o<r;o++){var n=t[o];if(Rt.isArray(n.children)&&n.children.length>0){var s=new i(this,n);e.push(s)}else{s=new Qu(this,n);e.push(s)}}return e},i.CLICKED="onPopupMenuClicked",i}(Ju),ec=function(e){function i(t){var i=e.call(this)||this;return i._showing=!1,i._viewGridInside=!1,i._container=t,i._element=i._createElement(),i._element.addEventListener("contextmenu",(function(t){t.preventDefault()})),i}return o(i,e),i._borrowView=function(t){var e=i.$_views[t.$_hash]||[];return i.$_views[t.$_hash]=e,e.pop()||new i(t)},i._returnView=function(t){i.$_views[t._container.$_hash].push(t)},i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"parentView",{get:function(){return this._parentView},set:function(t){this._parentView=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"childView",{get:function(){return this._childView},set:function(t){this._childView=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currDiv",{get:function(){return this._currDiv},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"manager",{get:function(){return this._menu.manager},enumerable:!1,configurable:!0}),i.prototype.getElementId=function(){return"rg-popup-"+this._menu.name},i.prototype.show=function(t,e,i,o,r,n,s,a){if(!this._showing){this._showing=!0;try{var l=i.parent;for(this._parentView=e,this._firstItem=null,this._menu=i;l._parent&&!(l instanceof zc);)l=l.parent;l&&(this._viewGridInside=l instanceof zc?l.editorOptions.viewGridInside:l instanceof ic&&l.grid.editorOptions.viewGridInside),this.$_show(t,this._menu,o,r,n,s)}finally{this._showing=!1}}},i.prototype.boundsByContainer=function(){return null},i.prototype.hide=function(t){void 0===t&&(t=!0),t&&this._parentView?this._parentView.hide(!0):(this.$_hideChildView(),Rt.detach(this._element))},i.prototype.hideChild=function(){this.$_hideChildView()},i.prototype.changeItemIndex=function(t){var e,i=this._itemIndex,o=this._menu._items;if(0==t)return this._itemIndex=-1,void this.$_refreshItems(this._itemIndex);if(o&&!(i>=o.length)){for(;(e=o[i+=t])&&!e.enabled;);e&&(this._itemIndex=i,this.$_refreshItems(this._itemIndex))}},i.prototype.getActiveElementId=function(){var t=this._menu._items[this._itemIndex];return t?t._elementId:""},i.prototype.menuItemClicked=function(t){this._menuItemClicked(t)},i.prototype.$_show=function(t,e,i,o,r,n){if(this._element){var s=t.doc,a=this._element,l=a.style,h=this.manager,u=t.gridView.displayOptions.baseZindex,c=t._containerDiv;this._element.style.zIndex=String(u+4);var d,p=h.dropdownCount;if(this._viewGridInside)d=t._container;else{var f=c.parentNode;d=!Rt.isSlotMode()||1!==f.nodeType&&11!==f.nodeType?s.body:f}this._containerElement=d,a.id="rg-popup-"+this._menu.name,this._menu=e,this._itemIndex=-1,Rt.clearElements(a),this.$_buildItems(e),Rt.disableSelection(a),d.appendChild(a);var _=0;if(p&&e.children.length>p)for(var g=0,y=0;g<e.children.length&&y<p;g++){var m=this._element.children[g];m.menuItem.isSeparator()||(_+=m.offsetHeight,y++)}_>0&&_<a.offsetHeight?(l.height=_+2+"px",l.overflow="auto"):(l.removeProperty("height"),l.overflow="hidden"),this.movePosition(t,i,o,r,n)}},i.prototype.movePosition=function(t,e,i,o,r,n){var s=t.doc,a=Et(s),l=this._element,h=l.style,u=t._containerDiv,c=this._containerElement,d=Rt.getBrowserSize(),p=Rt.getSize(s.body),f=Rt.getSize(u),_=Rt.getZoom(u),g=d.width,y=d.height,m=Rt.getSize(l),b=(a.pageXOffset||s.documentElement.scrollLeft)/_,v=(a.pageYOffset||s.documentElement.scrollTop)/_;if(s.documentElement.scrollWidth>s.documentElement.clientWidth&&(y-=18),s.documentElement.scrollHeight>s.documentElement.clientHeight&&(g-=18),this._viewGridInside?(m.height>=f.height&&(h.height=f.height-4+"px",h.overflow="auto",m=Rt.getSize(this._element)),i+f.top+m.height>f.bottom&&(i=this._parentView?f.bottom-m.height-f.top-3:i-m.height-r),e+f.left+m.width>f.right&&(e=this._parentView?f.right-m.width-f.left-3:e-m.width-o)):(this._parentView||(c===u.parentNode?(e+=u.offsetLeft,i+=u.offsetTop):(e+=f.left-p.left,i+=f.top-p.top)),m.height>=y&&(h.height=y-4+"px",h.overflow="auto",m=Rt.getSize(this._element)),i+m.height>=y+v-3&&(i=i-m.height-3)<0&&(i=Math.max(0,y-m.height-3)),e+m.width>=g+b-3?e=Math.max(0,g-m.width-3):void 0!==o&&m.width<o&&(e+=o-m.width)),Rt.move(l,Math.max(0,e),Math.max(0,i)),n&&this._currDiv&&this._childView){var w=Rt.getSize(l),C=l.offsetLeft+w.width+this.manager.grid.displayOptions.popupViewDistance,x=l.offsetTop+this._currDiv.offsetTop-l.scrollTop;this._childView.movePosition(t,C,x,null,null,n)}},i.prototype._createElement=function(){var t=function(t){27==t.keyCode&&this.hide()}.bind(this),e=this._container.doc.createElement("div");return e.style.setProperty("position","absolute","important"),e.className="rg-popup-menu",e.setAttribute("role","listbox"),e.tabIndex=-1,this._container.$_addListener(e,"keydown",t,!1),e},i.prototype._showChild=function(t){if(this==this.manager.showingView&&!(this._childView&&this._childView._menu===t.menuItem||this._currDiv!==t)){this.$_hideChildView();var e=t.menuItem,o=Rt.getSize(this._element),r=this._element.offsetLeft+o.width+this.manager.grid.displayOptions.popupViewDistance,n=this._element.offsetTop+t.offsetTop-this._element.scrollTop;this._childView=i._borrowView(this._container),this._childView.show(this._container,this,e,r,n)}},i.prototype.$_hideChildView=function(){this.manager.showingView=null,this._childView&&(this._childView.$_hideChildView(),Rt.detach(this._childView._element),i._returnView(this._childView)),this._childView=null},i.prototype._menuItemActived=function(t){this._currDiv=t;var e=t.menuItem,i=this.manager.showingView=this.manager.activeView=t.menuView;e instanceof Qu?i.childView&&i.$_hideChildView():e instanceof tc&&e.enabled&&(this._timer&&clearTimeout(this._timer),this._timer=setTimeout((function(){i._showChild(t)}),200))},i.prototype._menuItemDeactived=function(t){},i.prototype._menuItemClicked=function(t){var e=t.menuItem;e instanceof tc?e.enabled&&this._showChild(t):e?e.enabled&&(this.manager._containerDom.focus({preventScroll:!0}),this.hide(!0),this.manager.close(),e.enabled&&e.click()):this.$_hideChildView()},i.prototype.$_refreshItems=function(t){for(var e=this._element,i=0,o=e.childElementCount;i<o;i++){var r=e.childNodes[i];if(i===t?Rt.addClassName(r,"rg-popup-item-focused"):Rt.removeClassName(r,"rg-popup-item-focused"),i==t){var n=r.offsetTop,s=r.offsetHeight+4,a=e.offsetHeight,l=e.scrollTop;l>n?e.scrollTop=Math.max(0,e.scrollTop+(n-l)):l+a<n+s&&(e.scrollTop=e.scrollTop+n+s-(l+a)),this._menuItemActived(r)}}},i.prototype.$_buildItems=function(e){for(var o=e.children,r=[],n=this._container.doc,s=0,a=o.length;s<a;s++){var l=i.$_menuId++,h=o[s];if(h.visible){var u=n.createElement("div");if(u.menuView=this,u.menuItem=h,u.setAttribute("role","option"),u.id=h._elementId="rg-popup-item"+l,h instanceof Qu&&h.isSeparator()){u.className="rg-popup-separator";var c=n.createElement("hr");c.className="rg-popup-separator-hr",u.appendChild(c),u.onmouseover=function(t){this._menuItemActived(t.currentTarget)}.bind(this)}else{!this._firstItem&&(this._firstItem=u),r.length=0,r.push("rg-popup-item"),h.group&&r.push("rg-popup-"+h.group),!h.enabled&&r.push("rg-popup-item-disable"),u.className=r.join(" "),u.onclick=function(t){this._menuItemClicked(t.currentTarget)}.bind(this),u.onmouseover=function(t){this._menuItemActived(t.currentTarget)}.bind(this),u.onmouseout=function(t){this._menuItemDeactived(t.currentTarget)}.bind(this),r=["rg-popup-content"],Rt.included(h.type,t.MenuItemType.CHECK,t.MenuItemType.RADIO)&&(h.checked?r.push(h.group?"rg-popup-radio-checked":"rg-popup-check-checked"):r.push(h.group?"rg-popup-radio":"rg-popup-check")),h.styleName&&r.push(h.styleName),h instanceof tc&&r.push("rg-popup-expander");var d=n.createElement("span");d.id="$popupMenu_item_"+l,d.innerHTML=h.label,d.className=r.join(" "),Rt.disableSelection(d),u.appendChild(d)}Rt.disableSelection(u),this._element.appendChild(u)}}},i.$_menuId=0,i.$_views={},i}(Re),ic=function(e){function i(t){var i=e.call(this)||this;return i._grolbalMouseHandler=function(t){for(var e=t.target;e;){if(e===this._mainView._element||e.menuItem)return;e=e.parentElement}this.close()}.bind(i),i._container=t,i._containerDom=t._containerDom,i._menus=[],i}return o(i,e),i.prototype._doDispose=function(){this.close(),this._mainView=null,this._showingView=null,this._clickData=null,this._activeView=null,this._container=this._containerDom=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"clickData",{get:function(){return this._clickData},set:function(t){this._clickData=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"grid",{get:function(){return this._container.gridView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropdownCount",{get:function(){if(this._container&&this._container.gridView)return this._container.gridView.displayOptions.popupDropdownCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showingView",{get:function(){return this._showingView},set:function(t){this._showingView=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"activeView",{get:function(){return this._activeView},set:function(t){this._activeView=t},enumerable:!1,configurable:!0}),i.prototype.popupManager=function(){return this},i.prototype.isShow=function(){return!!this._mainView},i.prototype.indexOf=function(t){for(var e=this._menus.length;e--;)if(Rt.compareTextValue(this._menus[e].name,t,!0,!1))return e;return-1},i.prototype.getMenu=function(t){return Rt.find(this._menus,(function(e){return e.name===t}))},i.prototype.addMenu=function(t,e,i,o){if(void 0===i&&(i=!1),void 0===o&&(o=null),Rt.isWhiteSpace(t))throw"Menu name is empty.";var r=Rt.find(this._menus,(function(e){return e.name===t}));if(r&&!i)return r;this.close();var n=this._menus.indexOf(r);return r&&r.dispose(),r=new tc(o||this,{name:t,children:e}),n>=0?this._menus.splice(n,1,r):this._menus.push(r),r},i.prototype.removeMenu=function(t){var e=this.indexOf(t);e>-1&&this._menus.splice(e,1).forEach((function(t){return t.dispose()}))},i.prototype.show=function(e,o,r,n){var s=this.grid,a=It(this._containerDom),l=r&&s.getBodyCellAt(r);if("string"==typeof e&&e){var h=Rt.getSize(this._containerDom),u=void 0;if(l){var c=l.cellButton||l.merged&&l.head.cellButton||l.cell;u=Rt.getSize(c)}else u=Rt.getSize(o);var d=u.bottom,p=u.left-h.x,f=d-h.y,_=u.width,g=u.height;if(o instanceof a.HTMLTableCellElement){var y=s.getCellType(o),m=s.getTableView(o),b=void 0;if(y===t.GridCellType.DATA)b=(l=l||m.bodyCellByCell(o)).grouped?Du.getItem(t.GridCellType.GROUP_HEADER,l.item.index,null):Du.getCell(y,l,r);else if(y===t.GridCellType.HEADER){var v=m.layoutByCell(o);v instanceof vs&&v.hideChildHeaders&&v.tiedColumn&&(v=v.tiedColumn.layout),b=Du.getLayout(y,v)}this.clickData=b}else if(o instanceof a.HTMLElement){var w=s.getCellViewOf(o),C=(m=s.getTableView(w)).tableCellByCell&&m.tableCellByCell(w);(y=s.getCellType(w))===t.GridCellType.INLINE_FILTER&&(this.clickData=Du.getLayout(y,C.layout))}var x=n?this.fireObjectEvent(i.POPUP_MENU_POPUP,p,f,this.clickData,e,!1):e;if("string"==typeof x)e=x;else if(!1===x||null!=x)return;var I=this.getMenu(e);I&&this.$_show(I,p,f,_,g,o)}},i.prototype.$_show=function(t,e,i,o,r,n){var s=It(this._containerDom);this._mainView=this._activeView=ec._borrowView(this._container),this._mainView.show(this._container,null,t,e,i,o,r),this._popupPosition={x:e,y:i,width:o,height:r},this._container.addPositionListener(this),!Rt.isSlotMode()&&n&&n.setAttribute("aria-activedescendant",this._mainView.getElementId()),!Rt.isSlotMode()&&s.addEventListener(Rt.isIEMode()?"mousedown":"pointerdown",this._grolbalMouseHandler,!1)},i.prototype.resetPosition=function(){var t=this._popupPosition;this._mainView.movePosition(this._container,t.x,t.y,t.width,t.height,!0)},i.prototype.showContext=function(t,e,i,o,r){t&&!this._mainView&&(this.clickData=r,this.$_show(t,i,o,0,0,null))},i.prototype.close=function(){if(this._container.removePositionListener(this),this._mainView){var t=It(this._containerDom);this._mainView.hide(),ec._returnView(this._mainView),this._mainView=null,!Rt.isSlotMode()&&t.removeEventListener(Rt.isIEMode()?"mousedown":"pointerdown",this._grolbalMouseHandler,!1)}},i.prototype.keyDown=function(t,e){this._doKeydown(t,e)},i.prototype.doMenuItemClick=function(t,e){this.fireEvent(i.MENU_ITEM_CLICKED,t,e)},i.prototype._doKeydown=function(t,e){var i=this._activeView,o=null==i?void 0:i.currDiv;switch(t.keyCode){case 40:i.changeItemIndex(1);break;case 38:i.changeItemIndex(-1);break;case 37:i.parentView&&(i.changeItemIndex(0),i.hideChild(),this._showingView=this._activeView=i.parentView||this._mainView);break;case 39:i&&i.childView&&(i=this._showingView=this._activeView=i.childView).changeItemIndex(1);break;case 13:case 32:o&&o.parentElement&&i.menuItemClicked(o)}!Rt.isSlotMode()&&e&&e.setAttribute("aria-activedescendant",i.getActiveElementId())},i.MENU_ITEM_CLICKED="onPopupMenuManagerMenuItemClicked",i.POPUP_MENU_POPUP="onPopupMenuManagerPopup",i}(Re),oc=function(t){function e(){return t.call(this,"summaryCell")||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"summaryIndex",{get:function(){return this._childIndex},set:function(t){this._childIndex=t},enumerable:!1,configurable:!0}),e.prototype._getSummary=function(t,e){return t&&t.headerSummaries.get(e)},e}(Ws),rc=function(t){function e(e){var i=t.call(this,e)||this;return i.assignFrom(Xe.headerSummary),i}return o(e,t),e.prototype.getCellStyleName=function(){return e.CELL_CSS},e.prototype._createCell=function(){return new oc},e.CELL_CSS="rg-header-summary-cell",e}(Ys),nc=function(t){function e(e){var i=t.call(this,e)||this;return i.visible=!1,i.assignFrom(Xe.headerSummaries),i}return o(e,t),e.prototype._createSummary=function(t){return new rc(t||this._grid)},e}(qs),sc=function(t){function e(e,i){return t.call(this,e,i,"headerSummaryView")||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-header-summary"},e.prototype._getRendererStyle=function(){return"rg-header-summary-renderer"},e.prototype._getSummaryRows=function(t){return t.dataRows},e.prototype._getCollection=function(){return this.model},e.prototype._getSummaryHeight=function(t){return t.summaryHeight},e.prototype._getSummaryCount=function(t){return t.headerSummaryCount},e.prototype._getSpanOf=function(t,e){return t.getSummarySpan(e)},e.prototype._getUserSpanOf=function(t,e){return t.getSummaryUserSpan(e)},e.prototype._getSummaryItem=function(t,e){return t.firstColumn.headerSummaries.get(e)},e.prototype._getTableRowCount=function(t){return t.dataRows*t.headerSummaryCount},e}(th),ac=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-header-summary"},e.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype._getCellCount=function(t){return t.fixedCellCount},e.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},e}(sc),lc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-header-summary"},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype._getCellCount=function(t){return t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},e}(sc),hc=function(t){function e(e){return t.call(this,e,"gridSumCellView")||this}return o(e,t),e}(Vh),uc=function(t){function e(e){var i=t.call(this,e,null,"gridSumView")||this;return i._domCssSelector="rg-sum",i}return o(e,t),e.prototype.getSumModel=function(t){return this._getCellModel(t)},e.prototype._createCellElement=function(t){return new hc(t)},e.prototype._sectionCell=function(t){return t.getSumCell()},e.prototype._getSectionStyleName=function(t){return this.$_getCellSelector()+" "+t.getSumStyleName()},e.prototype._getHeadTrText=function(t){return t.getCellType()+" sum"},e.prototype._getSectionText=function(t){return t.sumText},e.prototype.$_getCellSelector=function(){return"rg-sum-cell"},e}(Bh),cc=function(e){function i(i){var o=e.call(this,i)||this;return o._enabled=!0,o._handleVisibility=t.HandleVisibility.VISIBLE,o._commitBeforeFiltering=!0,o._includeParentItem=!0,o._clearFocusWhenFiltered=!1,o._toast=new Wh({visible:!1,message:o._messageCallback}),o._selector=new dc(i),o._automating=new pc(i),o.assignFrom(Xe.filtering),o}return o(i,e),i.prototype._doDispose=function(){this._selector=this._selector.dispose(),this._automating=this._automating.dispose(),this._toast=this._toast.dispose(),e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"handleVisibility",{get:function(){return this._handleVisibility},set:function(t){t!=this._handleVisibility&&(this._handleVisibility=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"commitBeforeFiltering",{get:function(){return this._commitBeforeFiltering},set:function(t){this._commitBeforeFiltering=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"includeParentItem",{get:function(){return this._includeParentItem},set:function(t){this._includeParentItem=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selector",{get:function(){return this._selector},set:function(t){this._selector&&this._selector.assignFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"automating",{get:function(){return this._automating},set:function(t){this._automating&&this._automating.assignFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"toast",{get:function(){return this._toast},set:function(t){t&&!t.message&&(t=r(r({},t),{message:this._messageCallback})),this._toast&&this._toast.assignFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clearFocusWhenFiltered",{get:function(){return this._clearFocusWhenFiltered},set:function(t){t!=this._clearFocusWhenFiltered&&(this._clearFocusWhenFiltered=t)},enumerable:!1,configurable:!0}),i.prototype.assignFrom=function(t){e.prototype.assignFrom.call(this,t),t.selector&&this._selector.assignFrom(t.selector),t.automating&&this._automating.assignFrom(t.automating),t.toast&&this._toast.assignFrom(t.toast)},i.prototype._messageCallback=function(){var t;return(null===(t=Xe.filtering.toast)||void 0===t?void 0:t.message)||Ue.messages.filterToastMessage},i}(ml),dc=function(t){function e(e){var i=t.call(this,e)||this;return i._listHeight=170,i._partialSearch=!0,i._filterReset=!0,i._showEmptyFilter=!0,i._maxWidth=0,i._width=0,i._minWidth=0,i._style="rg-filter-selector",i}return o(e,t),Object.defineProperty(e.prototype,"listHeight",{get:function(){return this._listHeight},set:function(t){this._listHeight=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showButtons",{get:function(){return!!this._showButtons},set:function(t){this._showButtons=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"partialSearch",{get:function(){return this._partialSearch},set:function(t){this._partialSearch=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"acceptText",{get:function(){return this._acceptText||Ue.messages.filterSelectorAcceptText},set:function(t){this._acceptText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cancelText",{get:function(){return this._cancelText||Ue.messages.filterSelectorCancelText},set:function(t){this._cancelText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allCheckText",{get:function(){return this._allCheckText||Ue.messages.filterSelectorAllCheckText},set:function(t){this._allCheckText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showEmptyFilter",{get:function(){return this._showEmptyFilter},set:function(t){this._showEmptyFilter=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emptyFilterText",{get:function(){return this._emptyFilterText||Ue.messages.filterSelectorEmptyFilterText},set:function(t){this._emptyFilterText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"searchPlaceholder",{get:function(){return this._searchPlaceholder||Ue.messages.filterSelectorSearchPlaceholder},set:function(t){this._searchPlaceholder=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"searchedCheckText",{get:function(){return this._searchedCheckText||Ue.messages.filterSelectorSearchedCheckText},set:function(t){this._searchedCheckText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){this._style=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"closeWhenClick",{get:function(){return!!this._closeWhenClick},set:function(t){this._closeWhenClick=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filterReset",{get:function(){return this._filterReset},set:function(t){this._filterReset=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filtersResetText",{get:function(){return this._filtersResetText||Ue.messages.filterSelectorFiltersResetText},set:function(t){this._filtersResetText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filterResetText",{get:function(){return this._filterResetText||Ue.messages.filterSelectorFilterResetText},set:function(t){this._filterResetText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useFilterResetImage",{get:function(){return this._useFilterResetImage},set:function(t){this._useFilterResetImage=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth=Math.max(t,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){this._minWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textToTitle",{get:function(){return!!this._textToTitle},set:function(t){this._textToTitle=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"searchIgnoreCase",{get:function(){return!!this._searchIgnoreCase},set:function(t){this._searchIgnoreCase=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeWhenEnter",{get:function(){return!!this._activeWhenEnter},set:function(t){this._activeWhenEnter=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"expandCategory",{get:function(){return!!this._expandCategory},set:function(t){this._expandCategory=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(t){this._title=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showTitle",{get:function(){return this._showTitle},set:function(t){this._showTitle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"preserveSelection",{get:function(){return this._preserveSelection},set:function(t){this._preserveSelection=t},enumerable:!1,configurable:!0}),e.prototype.toProxy=function(e){return t.prototype.toProxy.call(this,e)},e}(ml),pc=function(e){function i(i){var o=e.call(this,i)||this;return o._dateCategorize=!0,o._numberCategorize=!0,o._textCategorize=!1,o._timeCategorize=t.TimeCategory.NONE,o._lookupDisplay=!1,o}return o(i,e),Object.defineProperty(i.prototype,"dateCategorize",{get:function(){return this._dateCategorize},set:function(t){this._dateCategorize=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberCategorize",{get:function(){return this._numberCategorize},set:function(t){this._numberCategorize=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textCategorize",{get:function(){return this._textCategorize},set:function(t){this._textCategorize=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"timeCategorize",{get:function(){return this._timeCategorize},set:function(t){this._timeCategorize=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dateCategoryCallback",{get:function(){return this._dateCategoryCallback},set:function(t){this._dateCategoryCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberCategoryCallback",{get:function(){return this._numberCategoryCallback},set:function(t){this._numberCategoryCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textCategoryCallback",{get:function(){return this._textCategoryCallback},set:function(t){this._textCategoryCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dateYearFormat",{get:function(){return this._dateYearFormat||Ue.messages.filterSelectorDateYearFormat},set:function(t){this._dateYearFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dateQuarterFormat",{get:function(){return this._dateQuarterFormat||Ue.messages.filterSelectorDateQuarterFormat},set:function(t){this._dateQuarterFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dateMonthFormat",{get:function(){return this._dateMonthFormat||Ue.messages.filterSelectorDateMonthFormat},set:function(t){this._dateMonthFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dateDayFormat",{get:function(){return this._dateDayFormat||Ue.messages.filterSelectorDateDayFormat},set:function(t){this._dateDayFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hourFormat",{get:function(){return this._hourFormat||Ue.messages.filterSelectorHourFormat},set:function(t){this._hourFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minuteFormat",{get:function(){return this._minuteFormat||Ue.messages.filterSelectorMinuteFormat},set:function(t){this._minuteFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"secondFormat",{get:function(){return this._secondFormat||Ue.messages.filterSelectorSecondFormat},set:function(t){this._secondFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(t){this._lookupDisplay=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filteredDataOnly",{get:function(){return this._filteredDataOnly},set:function(t){this._filteredDataOnly=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selectCallback",{get:function(){return this._callback},set:function(t){this._callback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"userFilterPosition",{get:function(){return this._userFilterPositoin},set:function(t){this._userFilterPositoin=t},enumerable:!1,configurable:!0}),i.prototype.toProxy=function(t){return{timeCategorize:this._timeCategorize,dateCategorize:this._dateCategorize,numberCategorize:this._numberCategorize,textCategorize:this._textCategorize,dateCategoryCallback:this._dateCategoryCallback,numberCategoryCallback:this._numberCategoryCallback,textCategoryCallback:this._textCategoryCallback,dateYearFormat:this._dateYearFormat,dateQuarterFormat:this._dateQuarterFormat,dateMonthFormat:this._dateMonthFormat,dateDayFormat:this._dateDayFormat,hourFormat:this._hourFormat,minuteFormat:this._minuteFormat,secondFormat:this._secondFormat,lookupDisplay:this._lookupDisplay,filteredDataOnly:this._filteredDataOnly}},i}(ml);t.UserFilterPosition=void 0,(vh=t.UserFilterPosition||(t.UserFilterPosition={})).FIRST="first",vh.LAST="last",vh.NONE="none",function(t){t[t.ALL=0]="ALL",t[t.YQ=1]="YQ",t[t.YM=2]="YM",t[t.Y=3]="Y",t[t.QM=4]="QM",t[t.Q=5]="Q",t[t.M=6]="M",t[t.NONE=7]="NONE"}(wh||(wh={}));var fc=function(){function e(t){this._options=t}return e.HasPartial=function(t,e,i){if(i&&(t=t&&t.toLowerCase(),e=e&&e.toLowerCase()),t.indexOf(e)>=0)return!0;for(var o=Rt.hangulToChosungAll(t),r=Rt.hangulToChosungAll(e),n=-1,s=!1;(n=o.indexOf(r,n+1))>=0;){for(var a=0;a<r.length&&a+n<o.length;a++){var l=Rt.hangulToChosung(t[a+n]),h=Rt.hangulToChosung(e[a]);if(h.org&&h.org!==l.org||!h.cho||h.cho!==l.cho){s=!1;break}s=!0}if(s)return!0}return!1},e.getDateProperty=function(t,e){if(!t)return null;switch(e){case 0:return t.getFullYear();case 1:return t.getMonth()>5?2:1;case 2:return Math.floor(t.getMonth()/3);case 3:return t.getMonth();case 4:var i=new Date(t.getFullYear(),t.getMonth(),1);return i.setDate(i.getDate()-i.getDay()),Math.floor((t.getTime()-i.getTime())/6048e5)+1;case 5:return t.getDate();case 6:return t.getHours()}},e.prototype.dispose=function(){return this._filters=null,this._options=null,null},Object.defineProperty(e.prototype,"searched",{get:function(){return this._searched},enumerable:!1,configurable:!0}),e.prototype.buildItems=function(e,i,o,r){void 0===r&&(r=!0);var n=function(t){if(t===a.userFilterPosition){for(var i=[],o=e.filters.items,r=0;r<o.length;r++)i.push(o[r].toProxy(!1));i.length>0&&h.addAll(i,!0,!1)}},s=this._options.selector,a=this._options.automating,l=s.emptyFilterText;this._autoFilter=o;var h=this._filters=o?e.autoFilters:e.filters,u=[];if(o){e.autoFilters.activeCount>0&&(u=this._getActivatedFilters(e.autoFilters)),e.autoFilters.clear(!1),n(t.UserFilterPosition.FIRST);var c=!1,d=void 0;this._valueType=e.valueType;var p=a.filteredDataOnly?e.grid.getDistinctItemValues(e.dataIndex):i.getDistinctValues(e.dataIndex);switch(this._valueType){case t.ValueType.DATETIME:(c=a.timeCategorize)!==t.TimeCategory.NONE&&(d=this._categorizeTimeValues(p,c,l)),d&&d.length||(d=(c=a.dateCategorize)&&a.dateCategoryCallback?a.dateCategoryCallback(e,p):this._categorizeDateValues(p,c,l));break;case t.ValueType.NUMBER:d=(c=a.numberCategorize)&&a.numberCategoryCallback?a.numberCategoryCallback(e,p):this._categorizeNumberValues(p,c,l);break;case t.ValueType.BOOLEAN:d=[];for(var f=!1,_=0;_<p.length;_++){var g=p[_];null!=g?d.push({text:g.toString().toUpperCase(),value:g}):f=!0}f&&s.showEmptyFilter&&d.push({text:l,empty:!0});break;case t.ValueType.TEXT:c=a.textCategorize,d=e.lookupSource&&this._options.automating.lookupDisplay&&!a.textCategoryCallback?this._categorizeLookupTree(i,e,l):c&&a.textCategoryCallback?a.textCategoryCallback(e,p):this._categorizeTextValues(p,c,l)}d&&this._createCategories(d,null,e.valueType,h),n(t.UserFilterPosition.LAST),this._filters.activateItems(u,!0,r)}},e.prototype.search=function(t){var i=[];function o(t,e){if(i.indexOf(t)<0){for(var o=[],r=t;r;)i.indexOf(r)<0&&o.push(r),r=r.category;Array.prototype.push.apply(i,o.reverse())}}for(var r=0,n=this._filters.count;r<n;r++){var s=this._filters.getItem(r);if(!(s instanceof ar)){var a=this._autoFilter&&s.tag||s.toString(),l=this._autoFilter&&this._options.automating.lookupDisplay&&this._filters.getOwner()&&this._filters.getOwner().lookupDisplay,h=this._options.selector.searchIgnoreCase,u=e.HasPartial;(u(a,t,h)||l&&u(s.toString(),t,h))&&o(s)}}return i},e.prototype._getActivatedFilters=function(t){for(var e=[],i=t.count;i--;){var o=t.getItem(i);o instanceof ar||!o.active||e.push(o.name)}return e},e.prototype._createCategories=function(i,o,r,n){var s=n.getOwner(),a=this._options.automating.lookupDisplay&&s.lookupDisplay,l=a&&s.lookupSource;function h(e,i,o){if(l&&o.fieldIds){for(var r=o,n=[],s=0;s<r.fieldIds.length;s++)null==r.keys[s]||""==r.keys[s]?n.push("(values[".concat(r.fieldIds[s],"] is empty)")):n.push("(values[".concat(r.fieldIds[s],"] = '").concat(r.keys[s],"')"));return n.join(" and ")}if(null==e||o.empty)return"value is empty";if(i==t.ValueType.DATETIME){var a=o;return a.criteria||"(year(value) = ".concat(a.year,") and (month(value) = ").concat(a.month+1,") and (day(value) = ").concat(a.day,")")}return i==t.ValueType.BOOLEAN?o.value?"value":"not(value)":i==t.ValueType.NUMBER?"value = "+e:"value = '"+(e=e.replace(/\\/g,"\\\\").replace(/\'/g,"\\'"))+"'"}function u(e,i,o){return r===t.ValueType.TEXT&&e&&!i.empty?s.getLookupLabel(e,!1):o}for(var c=Rt.pad,d=0,p=i.length;d<p;d++){var f=i[d],_=f.hasOwnProperty("childs"),g=f.hasOwnProperty("values"),y=void 0,m=_||g;m?y=new ar:(y=new sr(h(f.value,r,f)),Object.prototype.hasOwnProperty.call(f,"callback")?y.callback=f.callback:this._options.automating.selectCallback&&(y.callback=this._options.automating.selectCallback),y.filterValue=f.value),y.text=l?f.text:a?u(f.value,f,f.text):f.text;var b=void 0;if(b=f.name?f.name:f.empty?e.EMPTY_FILTER:r==t.ValueType.DATETIME&&_&&o?o.name+" "+f.text:"".concat(m?"$_cat_":"").concat(f.text),y.name=b,this._filters.add(y,!1),o&&o.addChild(y),y instanceof ar){if(_)this._createCategories(f.childs,y,r,n);else if(Rt.isArray(f.values))for(var v=f.values,w=0,C=v.length;w<C;w++){var x=v[w],I=x+"",S=new sr(h(x,r,f));S.name=I,S.text=a?u(x,f,I):I,S.tag=I,S.filterValue=x,this._options.automating.selectCallback&&(S.callback=this._options.automating.selectCallback),y.addChild(S),this._filters.add(S,!1)}}else if(r!=t.ValueType.DATETIME||f.empty)y.tag=f.text;else if(this._options.automating.timeCategorize!==t.TimeCategory.NONE){var E=f;y.tag=E.tag||E.name}else{var O=f;y.tag=O.tag||"".concat(O.year,"-").concat(c(O.month+1,2),"-").concat(c(O.day,2))}}},e.prototype.formatFilterText=function(t,e,i,o,r){var n=o+"",s=e.charAt(0),a=Rt.pad(o,r);return t?t.indexOf("{".concat(s))>=0?t.replace("{".concat(e,"}"),a).replace("{".concat(i,"}"),n):t.replace(e,a).replace(i,n):n},e.prototype.$$_formatYear=function(t,e){var i=e+"";return t?t.replace("{YYYY}",i).replace("{YY}",i.slice(-2)).replace("YYYY",i).replace("YY",i.slice(-2)):i},e.prototype.$$_formatQuater=function(t,e){return this.formatFilterText(t,"QQ","Q",e+1,2)},e.prototype.$$_formatMonth=function(t,e){return this.formatFilterText(t,"MM","M",e+1,2)},e.prototype.$$_formatDay=function(t,e){return this.formatFilterText(t,"DD","D",e,2)},e.prototype.$$_formatDateStr=function(t,e,i,o){var r=this.$$_formatYear(t,e);return r=this.$$_formatMonth(r,i),r=this.$$_formatDay(r,o)},e.prototype.$$_formatHour=function(t,e){return this.formatFilterText(t,"HH","H",e,2)},e.prototype.$$_formatminute=function(t,e){return this.formatFilterText(t,"MM","M",e,2)},e.prototype.$$_formatSecond=function(t,e){return this.formatFilterText(t,"SS","S",e,2)},e.prototype._categorizeTimeValues=function(e,i,o){var r=this,n=this._options.automating;var s={hourCnt:new Map,minuteCnt:new Map,secondCnt:new Map},a=s.hourCnt,l=s.minuteCnt,h=s.secondCnt,u=function(e){var o=e.map((function(e){var o=1e3;switch(i){case t.TimeCategory.HOUR:o*=60;case t.TimeCategory.MINUTE:o*=60}return e&&Math.floor(e.getTime()/o)*o}));return o.sort((function(t,e){return t>e?1:t<e?-1:0})),o.filter((function(t,e,i){return i.indexOf(t)===e})).map((function(t){return t&&new Date(t)}))}(e).map((function(t){if(!t)return{date:t};var e={year:t.getFullYear(),month:t.getMonth(),day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds()},i=e.year,o=e.month,s=e.day,u=e.hour,c=e.minute,d=e.second;return a.set(u,1),l.set(c,1),h.set(d,1),{date:t,dateStr:r.$$_formatDateStr(n.dateDayFormat,i,o,s),year:i,month:o,day:s,hour:u,minute:c,second:d}}));if(i===t.TimeCategory.AUTO)if(h.size>1)i=t.TimeCategory.SECOND;else if(l.size>1)i=t.TimeCategory.MINUTE;else{if(!(a.size>1))return;i=t.TimeCategory.HOUR}for(var c=!1,d={},p=[],f=function(e,i){var o,s;switch(i){case t.TimeCategory.HOUR:return(o=d[e.dateStr])||(o=d[e.dateStr]={text:e.dateStr,childs:[]},p.push(o)),o;case t.TimeCategory.MINUTE:return(o=(s=f(e,t.TimeCategory.HOUR))[e.hour])||(o=s[e.hour]={text:r.$$_formatHour(n.hourFormat,e.hour),childs:[]},s.childs.push(o)),o;case t.TimeCategory.SECOND:return(o=(s=f(e,t.TimeCategory.MINUTE))[e.minute])||(o=s[e.minute]={text:r.$$_formatminute(n.minuteFormat,e.minute),childs:[]},s.childs.push(o)),o}},_=0,g=u;_<g.length;_++){var y=g[_];if(y.date){var m=f(y,i),b=Rt.pad,v=b(y.hour,2),w=b(y.minute,2),C=b(y.second,2);switch(i){case t.TimeCategory.SECOND:m.childs.push({text:this.$$_formatSecond(n.secondFormat,y.second),name:"".concat(y.dateStr," ").concat(y.hour,":").concat(y.minute,":").concat(y.second),tag:"".concat(y.dateStr," ").concat(v,":").concat(w,":").concat(C),criteria:"timestamp(value, 1) === ".concat(1e3*Math.floor(y.date.getTime()/1e3)),value:" "});break;case t.TimeCategory.MINUTE:m.childs.push({text:this.$$_formatminute(n.minuteFormat,y.minute),tag:"".concat(y.dateStr," ").concat(v,":").concat(w),name:"".concat(y.dateStr," ").concat(y.hour,":").concat(y.minute),criteria:"timestamp(value, 2) === ".concat(60*Math.floor(y.date.getTime()/6e4)*1e3),value:" "});break;case t.TimeCategory.HOUR:m.childs.push({text:this.$$_formatHour(n.hourFormat,y.hour),tag:"".concat(y.dateStr," ").concat(v),name:"".concat(y.dateStr," ").concat(y.hour),criteria:"timestamp(value, 3) === ".concat(60*Math.floor(y.date.getTime()/36e5)*60*1e3),value:" "})}}else c||(c=!0,p.push({name:"empty Node",text:o,empty:!0,criteria:"!value"}))}return p},e.prototype._categorizeDateValues=function(t,i,o){var r=this;if(!t)return null;var n=!1,s=!1,a=!1;for(var l=e.getDateProperty,h=0,u=0,c=0,d={year:null,quarter:null,month:null,day:null},p=t.length,f=0;f<p;f++){var _=t[f];if(_){var g=l(_,0),y=l(_,2),m=l(_,3),b=l(_,5);d?g!=d.year?(h++,u++,c++):y!=d.quarter||m!=d.month?(u++,c++):b!=d.day&&c++:(h++,u++,c++),d.year=g,d.quarter=y,d.month=m,d.day=b}}var v=this._options.automating,w=[],C=[];i&&((n=h>1&&u>6)&&(w.push(0),C.push((function(t,e,i){return r.$$_formatYear(v.dateYearFormat,i)}))),(s=u/h>6)&&(w.push(2),C.push(n?function(t,e,i){return r.$$_formatQuater(v.dateQuarterFormat,i)}:function(t,e,i){return r.$$_formatYear(v.dateYearFormat,t)+" "+r.$$_formatQuater(v.dateQuarterFormat,i)})),(a=c>9&&u>3)&&(w.push(3),C.push(n||s?function(t,e,i){return r.$$_formatMonth(v.dateMonthFormat,i)}:function(t,e,i){return r.$$_formatYear(v.dateYearFormat,t)+" "+r.$$_formatMonth(v.dateMonthFormat,i)}))),w.push(5),C.push((function(t,e,i){return r.$$_formatDateStr(v.dateDayFormat,t,e,i)}));var x=[];return function t(i,r,l,h,u){void 0===h&&(h=0),void 0===u&&(u=-1),u=-1==u?i.length-1:u;for(var c,d,p=null,f=h,_=!1,g=function(o){var u=i[o],g=function(t,i,o){for(var r=[],n=0;n<=o;n++)r.push(e.getDateProperty(t,i[n]));return r}(u,w,r),m=function(t,e,i){if(!t)return null;switch(e[i]){case 0:return t.getFullYear().toString();case 1:return t.getFullYear().toString()+Math.floor(t.getMonth()/6).toString();case 2:return t.getFullYear().toString()+Math.floor(t.getMonth()/3).toString();case 3:return t.getFullYear().toString()+t.getMonth().toString();case 5:return t.getFullYear().toString()+t.getMonth()+t.getDate()}}(u,w,r);if(o>h&&m!=p){var b=c[r];if(d)if(r===w.length-1){var v={text:"",year:d.getFullYear(),month:d.getMonth(),day:d.getDate(),value:d};v.text=C[r](v.year,v.month,v.day),l.push(v)}else{var x={text:"",childs:[]},I=function(){x.year=d.getFullYear()},S=function(){x.quarter=Math.floor(d.getMonth()/3)},E=function(){x.month=d.getMonth()},O=n&&s&&a?wh.ALL:n&&s?wh.YQ:n&&a?wh.YM:n?wh.Y:s&&a?wh.QM:s?wh.Q:a?wh.M:wh.NONE;O===wh.ALL?0===r?I():1===r?(I(),S()):2===r&&(I(),S(),E()):O===wh.YQ?0===r?I():1===r&&(I(),S()):O===wh.YM?0===r?I():1===r&&(I(),E()):O===wh.Y?I():O===wh.QM?0===r?S():1===r&&(S(),E()):O===wh.Q?S():O===wh.M&&E(),x.text=C[r](d.getFullYear(),d.getMonth(),b),l.push(x),t.call(y,i,r+1,x.childs,f,o-1)}f=o}o>h&&null==d&&(_=!0),p=m,c=g,d=u},y=this,m=h;m<=u+1;m++)g(m);0==r&&_&&this._options.selector.showEmptyFilter&&l.push({text:o,empty:!0})}.call(this,t,0,x),x},e.prototype._categorizeNumberValues=function(t,e,i){if(!t||!t.length)return null;var o=t.filter((function(t){return null!=t&&null!=t&&!isNaN(t)})).sort((function(t,e){return t-e})),r=o.length,n=o.length!==t.length,s=1,a=[];if(e&&r>15)for(s=Math.round(r/Math.min(Math.max(4,Math.round(r/5)),8));o.length>0;){var l=o.splice(0,s);a.push({text:l[0]+" ~ "+l[l.length-1],values:l})}else for(var h=0;h<r;h++)a.push({text:o[h]+"",value:o[h]});return n&&this._options.selector.showEmptyFilter&&a.push({text:i,empty:!0}),a},e.prototype._categorizeLookupTree=function(t,e,i){var o=e.grid,r=[];if(this._options.automating.filteredDataOnly)o._items._rs.getAllItems().forEach((function(t){r.push(t.dataRow)}));else if(o.isTree())t.getDescendants(null,-1).forEach((function(t){r.push(t.rowId)}));else for(var n=t.rowCount,s=0;s<n;s++)r.push(s);var a=[],l=e.lookupKeyFieldIds,h={},u={};function c(r,n,s,a,l){var h=s.shift(),d=t.getValue(n,h);l.push(h),a.push(d);var p=r[d];p||(p=r[d]={value:d,name:a.join("-"),keys:a.slice(),fieldIds:l.slice()}),s.length?(!p.text&&(p.text=function(t,e,i){var r=u[t];if(!r)for(var n=o.columnsByField(t),s=0;s<n.length;s++)if(n[s].lookupSource||n[s].lookupDisplay){r=u[t]=n[s];break}return r?r.lookupSource?r.lookupSource.lookup(e,r.valueSeparator):r.lookupDisplay?r.getLookupLabel(i,!1):i:i}(h,a,d)||d||i),p.childs=p.childs||{},c(p.childs,n,s,a,l)):!p.text&&(p.text=d?e.lookupSource.lookup(a,e.valueSeparator)||d:i)}for(s=0;s<r.length;s++)c(h,r[s],l.slice(),[],[]);return function t(e,i){Object.keys(e).sort().forEach((function(o){var r=e[o],n={value:r.value,text:r.text,name:r.name,fieldIds:r.fieldIds,keys:r.keys};i.push(n),r.hasOwnProperty("childs")&&(n.childs=[],t(r.childs,n.childs))}))}(h,a),a},e.prototype._categorizeTextValues=function(t,e,i){if(!t)return null;var o=t.length,r=[],n=!1;if(e&&o>15){for(var s=[{},{},{},{}],a=[0,0,0,0],l=[0,0,0,0],h=0;h<o;h++){var u=t[h];if(u){var c=(w=u[0]).charCodeAt(0),d=!1,p=void 0;s[p=c>=48&&c<=57?0:c>=65&&c<=90||c>=97&&c<=122?1:c>=1e4?2:3][w]?s[p][w].push(u):(s[p][w]=[u],d=!0),a[p]++,d&&l[p]++}else n=!0}for(var f=Math.min(Math.max(4,Math.round(o/5)),8),_=0;_<4;_++){var g=0==a[_]?0:Math.max(1,Math.min(l[_],Math.round(a[_]/o*f))),y=Math.round(l[_]/g),m=y,b=s[_],v="",w="",C=[];for(w in b)m===y&&(v=w),C.push.apply(C,s[_][w]),0==--m&&(r.push({text:v+" ~ "+w,values:C}),C=[],m=y);C.length>0&&r.push({text:v+" ~ "+w,values:C})}}else{h=0;for(var x=t.length;h<x;h++){var I=t[h];I?r.push({text:I,value:I}):n=!0}}return n&&this._options.selector.showEmptyFilter&&r.push({text:i,empty:!0}),r},e.EMPTY_FILTER="$$empty",e}(),_c=function(t){function e(e,i,o){var r=t.call(this)||this;r._opened=!1,r._selectInfo={},r._wheelDelay=50,r._grid=o,r._gridContainer=o.container._containerDom;var n=e.doc,s=r._element=n.createElement("div");return s.style.position="absolute",s.style.display="none",s.className=i.selector.style,r._options=i,r._soptions=i.selector,r._manager=new fc(r._options),r._globalMouseDownHandler=r._globalMouseDownHandler.bind(r),r._globalKeyDownHandler=r._globalKeyDownHandler.bind(r),r._scrollHandler=r._scrollHandler.bind(r),r._wheelHandler=r._wheelHandler.bind(r),r._resetClickHandler=r._resetClickHandler.bind(r),r._searchInputHandler=r._searchInputHandler.bind(r),r._searchKeyDownHandler=r._searchKeyDownHandler.bind(r),r._checkAllClickHandler=r._checkAllClickHandler.bind(r),r._confirmClickHandler=r._confirmClickHandler.bind(r),r._cancelClickHandler=r._cancelClickHandler.bind(r),r._itemClickHandler=r._itemClickHandler.bind(r),r}return o(e,t),Object.defineProperty(e.prototype,"opened",{get:function(){return this._opened},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"column",{get:function(){return this._targetColumn},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return St(this._element)},enumerable:!1,configurable:!0}),e.prototype._doDispose=function(){this._soptions=null,this._manager=this._manager.dispose(),this._grid=null,Rt.detach(this._element),t.prototype._doDispose.call(this)},e.prototype.resetPosition=function(){var t=this._element,e=this._soptions,i=this._targetColumn,o=this._targetCell,r=Rt.getSize(o),n=this._gridContainer.parentElement.clientWidth,s=e.width,a=i.filterSelectorWidth,l=t.style,h=e.minWidth,u=0;a>0?u=a:-1===s?(u=this._viewWidth,h=Math.max(h,140)):-2===s?u=i.layout.cellWidth:s>0&&(u=s),u>0?(h>0&&(u=Math.max(h,u)),e.maxWidth>0&&(u=Math.min(u,e.maxWidth)),u=Math.min(u,n),l.width=Math.max(u,h)+"px"):l.removeProperty("width"),Rt.resetPosition(t.offsetParent,null,t,r.x,r.bottom,r.width,r,!0)},e.prototype.show=function(t,e,i,o){this._opened&&this.hide();var r=this._element,n=this._soptions,s=this._grid,a=s.container,l=s.displayOptions,h=It(r),u=a._containerDiv;(Rt.isSlotMode()?u:a.doc.body).appendChild(r),this._targetColumn=t,this._targetCell=e,r.className=n.style,r.tabIndex=-1,r.style.display="block",r.style.zIndex="".concat(l.baseZindex+7),this._autoFiltering=t.autoFilter,this._build(t,i,this._autoFiltering),this.resetPosition(),a.addPositionListener(this),!Rt.isSlotMode()&&h.addEventListener(Rt.isIEMode()?"mousedown":"pointerdown",this._globalMouseDownHandler,!1),!Rt.isSlotMode()&&h.addEventListener("keydown",this._globalKeyDownHandler,!1),o&&(this._searchInput&&(this._searchInput.value=o),this._doSearch(o)),this._opened=!0,!Rt.isMobile()&&this._searchInput&&this._searchInput.focus({preventScroll:!0})},e.prototype.hide=function(){if(this._opened){var t=this._grid.container;t._focused&&this._gridContainer.focus({preventScroll:!0}),Rt.detach(this._element);var e=It(this._element);t.removePositionListener(this),!Rt.isSlotMode()&&e.removeEventListener(Rt.isIEMode()?"mousedown":"pointerdown",this._globalMouseDownHandler,!1),!Rt.isSlotMode()&&e.removeEventListener("keydown",this._globalKeyDownHandler,!1),this._finalize(),this._element.style.display="none",this._opened=!1}},e.prototype._createItemInfo=function(t){this._items=[],this._visbleItemMap={};for(var e=this._soptions,i=(t=t instanceof hr?t.items:t).length,o=[],r=0;r<i;r++){var n=t[r],s=n.level;if(this._autoFiltering||n.visible){var a={text:n.toString(),index:r,level:s,filter:n};if(this._items.push(a),n instanceof ar)a.expanded=e.expandCategory;else{var l=e.preserveSelection&&this._selectInfo[n.name]?this._selectInfo[n.name].checked:n.active;a.state=l?tr.ACTIVE:tr.UNACTIVE}if(o[s]=a,s>0){var h=o[s-1];a.parent=h,h.childs||(h.childs=[]),h.childs.push(a)}this._visbleItemMap[r]=a}}this._calcluateStates(),this._visibleCount=this._calcVisibleItems()},e.prototype._setSelectInfo=function(t){var e=this;t.items.forEach((function(t){(t.criteria||t.callback)&&(e._selectInfo[t.name]={filter:t,active:t.active,checked:t.active})}))},e.prototype._build=function(t,e,i){var o=this._soptions,r=this._applyBatch=o.showButtons,n=this.doc;this._selectInfo={},this._manager.buildItems(t,e,i,!1);var s=this._filters=i?t.autoFilters:t.filters;this._createItemInfo(s),this._setSelectInfo(s),this._headerDiv=n.createElement("div"),this._headerDiv.className="rg-filter-header",o.showTitle&&this._buildTitle(this._headerDiv),o.filterReset&&this._buildReset(this._headerDiv),this._soptions.partialSearch&&this._buildSearchbox(this._headerDiv),this._buildSelectAllBox(),this._element.appendChild(this._headerDiv);var a=this._viewportDiv=n.createElement("div");a.className="rg-filter-list-viewport",a.style.height=o.listHeight+"px",a.addEventListener("scroll",this._scrollHandler),a.addEventListener("wheel",this._wheelHandler),this._listDiv=n.createElement("div"),this._listDiv.className="rg-filter-list",this._listDiv.style.position="relative",a.appendChild(this._listDiv),this._element.appendChild(a),this._calcAllChecked(),this._calcluateStates(),this._buildItems(),r&&this._buildFooter(this._element),this._searched=!1},e.prototype._finalize=function(){var t;this._visbleItemMap={};for(var e=this._items.length;e--;)this._items[e].filter=null,this._items[e].parent=null,this._items[e].childs=null,this._items[e]=null;this._items=[],(t=this._resetDiv)&&(t.removeEventListener("click",this._resetClickHandler),this._resetDiv=Rt.detach(this._resetDiv)),(t=this._titleDiv)&&(this._titleDiv=Rt.detach(this._titleDiv)),(t=this._searchDiv)&&(t.removeEventListener("input",this._searchInputHandler),t.removeEventListener("keydown",this._searchKeyDownHandler),this._searchInput=Rt.detach(this._searchInput),this._searchDiv=Rt.detach(this._searchDiv)),this._selectAllDiv.removeEventListener("click",this._checkAllClickHandler),this._selectAllDiv=Rt.detach(this._selectAllDiv),this._headerDiv=Rt.detach(this._headerDiv),this._footerDiv&&(this._confirmButton.removeEventListener("click",this._confirmClickHandler),this._cancelButton.removeEventListener("click",this._cancelClickHandler),this._confirmButton=Rt.detach(this._confirmButton),this._cancelButton=Rt.detach(this._cancelButton),this._footerDiv=Rt.detach(this._footerDiv));for(e=this._itemElements.length;e--;)this._removeItem(e);this._itemElements=[];var i=this._viewportDiv;i.removeEventListener("scroll",this._scrollHandler),i.removeEventListener("wheel",this._wheelHandler),this._listDiv=Rt.detach(this._listDiv),this._viewportDiv=Rt.detach(this._viewportDiv)},e.prototype._buildSelectAllBox=function(){var t=this.doc,e=this._soptions,i=e.allCheckText,o=this._selectAllDiv=t.createElement("div");o.className="rg-filter-select-all",e.textToTitle&&i&&(o.title=i);var r=this._selectAllCheck=t.createElement("input");r.type="checkbox",r.className="rg-filter-checkbox",this._setCheckState(r,this._allCheck),o.appendChild(r);var n=this._selectAllText=t.createElement("div");n.className="rg-filter-text",n.innerHTML=Rt.htmlEncode(i),o.appendChild(n);var s=this._columnReset=t.createElement("div");e.useFilterResetImage?(s.className="rg-filter-column-reset image",s.innerHTML=""):(s.className="rg-filter-column-reset",s.innerHTML=Rt.htmlEncode(e.filterResetText)),o.appendChild(s),this._headerDiv.appendChild(this._selectAllDiv),this._selectAllDiv.addEventListener("click",this._checkAllClickHandler)},e.prototype._buildReset=function(t){var e=this.doc,i=this._resetDiv=e.createElement("div");i.className="rg-filter-reset",i.appendChild(e.createTextNode(this._soptions.filtersResetText)),i.addEventListener("click",this._resetClickHandler),t.appendChild(i)},e.prototype._buildTitle=function(t){var e=this.doc,i=this._titleDiv=e.createElement("div");i.className="rg-filter-title",i.appendChild(e.createTextNode(this._soptions.title||this._targetColumn.displayText)),t.appendChild(i)},e.prototype._buildItems=function(){var t="temp임시",e=Rt.getTextLength(t),i=0;this._filters.items.forEach((function(o){i=Math.max(i,o.level);var r=o.toString();e<Rt.getTextLength(r)&&(e=Rt.getTextLength(r),t=r)}));var o=this._listDiv,r=o.style;r.display="inline-block";var n=this._buildItemElement(t,0,void 0,"rg-filter-item");n.style.position="relative",o.appendChild(n);var s=Rt.getSize(n);this._itemHeight=Math.floor(s.height),this._viewWidth=Math.floor(s.width)+15*i+4,o.removeChild(n),r.height="1500px";var a=this._viewportDiv.offsetWidth-this._viewportDiv.clientWidth;r.removeProperty("height");var l=this._visibleCount,h=this._viewportDiv.offsetHeight;this._pageCount=Math.min(this._items.length,Math.ceil(h/this._itemHeight));var u=this._pageCount;r.height=l*this._itemHeight+"px",u<=this._items.length&&(this._viewWidth+=a+2),r.removeProperty("display");var c=l<u?l:u;this._itemElements=[];for(var d=0;d<c;d++){var p=this._visibleItems[d];this._itemElements.push(this._buildItem(p,d))}},e.prototype._buildSearchbox=function(t){var e=this.doc,i=this._searchDiv=e.createElement("div");i.className="rg-filter-searchbox";var o=this._searchInput=this.doc.createElement("input");o.type="text",o.placeholder=Rt.isIE?"":this._soptions.searchPlaceholder,o.className="rg-filter-search-input",o.autocomplete="off",o.addEventListener("input",this._searchInputHandler),o.addEventListener("keydown",this._searchKeyDownHandler),i.appendChild(o),t.appendChild(i)},e.prototype._buildFooter=function(t){var e=this.doc;this._footerDiv=e.createElement("div"),this._footerDiv.className="rg-filter-button";var i=this._confirmButton=e.createElement("input");i.type="button",i.className="rg-filter-accept",i.value=this._soptions.acceptText,i.addEventListener("click",this._confirmClickHandler),this._footerDiv.appendChild(i);var o=this._cancelButton=e.createElement("input");o.type="button",o.className="rg-filter-cancel",o.value=this._soptions.cancelText,o.addEventListener("click",this._cancelClickHandler),this._footerDiv.appendChild(o),t.appendChild(this._footerDiv)},e.prototype._buildItem=function(t,e){var i=this._items,o=this._listDiv,r=i[t],n=r.expanded,s=this._buildItemElement(r.text,r.level,r.state,"rg-filter-item",n);return s.filter_id=t+"",s.style.position="absolute",s.style.height=this._itemHeight+"px",s.style.top=e*this._itemHeight+"px",s.addEventListener("click",this._itemClickHandler),o.appendChild(s),s},e.prototype._removeItem=function(t){var e=this._itemElements[t];e.removeEventListener("click",this._itemClickHandler),Rt.detach(e),this._itemElements.splice(t,1)},e.prototype._buildItemElement=function(t,e,i,o,r){var n,s=this.doc,a=s.createElement("div");o&&(a.className=o,a.tabIndex=-1),this._soptions.textToTitle&&t&&(a.title=t);var l=s.createElement("div");l.className="rg-filter-item-indent-"+e,a.appendChild(l);var h=s.createElement("div"),u="rg-filter-expander";void 0!==r&&(u+=" "+(r?"rg-filter-expander-expanded":"rg-filter-expander-collapsed")),h.className=u,a.appendChild(h);var c=s.createElement("input");c.type="checkbox",c.className="rg-filter-checkbox",this._setCheckState(c,i),a.appendChild(c);var d=s.createElement("div");return n=d.style,d.className="rg-filter-text",n.position="relative",n.display="inline",n.pointerEvents="none",d.innerHTML=Rt.htmlEncode(t),a.appendChild(d),a},e.prototype._calculateState=function(t){for(var e=void 0,i=0,o=t.length;i<o;i++){var r=t[i];if(e&&r.state!=e)return tr.INDETERMINATE;e=r.state}return e||tr.UNACTIVE},e.prototype._calcluateStates=function(){for(var t=this._items.length;t--;){var e=this._items[t];e.childs&&(e.state=this._calculateState(e.childs))}},e.prototype._calcVisibleItems=function(){function t(t){for(var e=t.parent;e;){if(!e.expanded)return!1;e=e.parent}return!0}var e=0;this._visibleItems=[];for(var i=0,o=this._items.length;i<o;i++){var r=this._items[i];r.parent&&!t(r)||(e++,this._visibleItems.push(i))}return e},e.prototype._setCheckState=function(t,e){t.checked=e==tr.ACTIVE,t.indeterminate=e==tr.INDETERMINATE},e.prototype._calcAllChecked=function(){this._allCheck=this._calculateState(this._items.filter((function(t){return!t.level}))),this._setCheckState(this._selectAllCheck,this._allCheck)},e.prototype._redrawCheck=function(){for(var t=this._itemElements.length;t--;){var i=this._itemElements[t],o=parseInt(i.filter_id),r=this._visbleItemMap[o],n=i.childNodes[e.INDEX_CHECKBOX];this._setCheckState(n,r.state)}},e.prototype._doRedraw=function(t){void 0===t&&(t=0);var e=this._itemElements,i=this._pageCount,o=Math.min(i,this._visibleCount),r=Math.max(0,this._visibleItems.indexOf(t));r+i>this._visibleCount&&(r=Math.max(0,this._visibleCount-i));for(var n=0,s=0;s<o;s++){var a=this._visibleItems[s+r];!e[s]&&s<o&&e.push(this._buildItem(a,s)),this._changeItemModel(e[s],a),n++}for(s=e.length-1;s>n-1;s--)this._removeItem(s);var l=this._visibleCount*this._itemHeight;this._listDiv.style.height=l+"px";var h=this._viewportDiv;h.scrollTop+h.offsetHeight>l&&(h.scrollTop=l-h.offsetHeight)},e.prototype._changeItemModel=function(t,e){var i=It(t),o=this._items[e];t.filter_id=e+"",this._soptions.textToTitle&&o.text&&(t.title=o.text);for(var r=t.childNodes.length;r--;){var n=t.childNodes.item(r);if(n instanceof i.HTMLElement){var s=n.className;if(s)if(s.indexOf("rg-filter-item-indent-")>-1)n.className="rg-filter-item-indent-"+o.level;else if(s.indexOf("rg-filter-expander")>-1){var a="rg-filter-expander";void 0!==o.expanded&&(a+=" "+(o.expanded?"rg-filter-expander-expanded":"rg-filter-expander-collapsed")),n.className=a}else if(n instanceof i.HTMLInputElement&&"rg-filter-checkbox"==s)this._setCheckState(n,o.state);else if(s.indexOf("rg-filter-text")>=0){var l=Rt.htmlEncode(o.text),h=this._searchInput?Rt.htmlEncode(this._searchInput.value):"",u="g"+(this._soptions.searchIgnoreCase?"i":"");l=h?l.replace(new RegExp(Rt.escapeRegExp(h),u),(function(t,e,i){return'<span class="rg-filter-search-text">'.concat(t,"</span>")})):l,n.innerHTML="<span>"+l+"</span>"}}}},e.prototype._doScroll=function(){for(var t=this._itemElements,e=Math.max(0,Math.floor(Math.min(this._viewportDiv.scrollTop,this._listDiv.offsetHeight-this._viewportDiv.offsetHeight)/this._itemHeight)),i=0,o=t.length;i<o;i++){var r=this._visibleItems[e+i];this._changeItemModel(t[i],r),t[i].style.top=(e+i)*this._itemHeight+"px"}},e.prototype._doSearch=function(t,e){void 0===e&&(e=!0),t?this._createItemInfo(this._manager.search(t)):this._createItemInfo(this._filters),this._selectAllText.textContent=t?this._soptions.searchedCheckText:this._soptions.allCheckText,e&&this._calcAllChecked(),this._doRedraw(),this._searched=!!t},e.prototype._resetActive=function(t,e){var i=this._grid.itemSource.isFiltered(this.column.dataIndex),o=this._targetColumn,r=this._selectAllCheck;r.checked=r.indeterminate=!1,this._doSearch(this._searchInput.value="",!1);for(var n=this._items.length;n--;){this._items[n].state=tr.UNACTIVE}this._redrawCheck(),t&&this._filters.activateAll(!1,!0,i,!0),this._selectInfo={},!e&&o.autoFilter&&this._options.automating.filteredDataOnly&&this.$_refreshItem(o),this._setSelectInfo(this._filters)},e.prototype._activateAll=function(t){for(var e=!this._applyBatch,i=this._items.length;i--;){var o=this._items[i];if(!o.childs){o.state=t?tr.ACTIVE:tr.UNACTIVE;var r=this._selectInfo[o.filter.name];r&&(r.checked=t)}}if(e&&(this._searched?this._doFilterApply():this._filters.activateAll(t,!0)),this._calcluateStates(),this._itemElements.length){var n=this._itemElements[0].filter_id,s=Math.max(0,this._visibleItems.indexOf(parseInt(n)));this._doRedraw(s)}},e.prototype._doCheck=function(t,e){var i=this,o=function(t,r,n,s){if(t.state!=r)if(t.state=r,t.childs)for(var a=t.childs.length;a--;)o(t.childs[a],r,n,s);else{var l=t.filter,h=i._selectInfo[l.name];n?(h&&(h.checked=r==tr.ACTIVE),s.push(t)):(l.active=e,h&&(h.checked=h.active=e))}},r=e?tr.ACTIVE:tr.UNACTIVE,n=this._applyBatch||void 0!==t.childs,s=[];if(o(t,r,n,s),n&&!this._applyBatch){for(var a=[],l=0,h=s.length;l<h;l++){var u=s[l].filter.name;a.push(u);var c=this._selectInfo[u];c&&(c.active=e)}a.length>0&&this._filters.activateItems(a,e)}for(var d=t.parent;d;)d.state=this._calculateState(d.childs),d=d.parent;(t.parent||t.childs)&&this._redrawCheck(),this._calcAllChecked()},e.prototype._doFilterApply=function(){this._filters._updating=!0;try{for(var t=Object.keys(this._selectInfo),e=[],i=0;i<t.length;i++){var o=this._selectInfo[t[i]];o.active!=o.checked&&e.push(o)}for(i=e.length;i--;){var r=e[i];r.filter.active=r.active=r.checked}this._filters._updating=!1,e.length&&this._filters.changed(1==e.length?e[0].filter:null,!1)}finally{this._filters._updating=!1}},e.prototype._doExpand=function(t,e){t.expanded=e,this._visibleCount=this._calcVisibleItems();var i=parseInt(this._itemElements[0].filter_id);this._doRedraw(i)},e.prototype._globalMouseDownHandler=function(t){for(var e=t.target;e;){if(e===this._element)return;e=e.parentElement}this.hide()},e.prototype._globalKeyDownHandler=function(t){if(27==t.keyCode){var e=this._grid;e&&e.isValid(e.focusedIndex)&&e.setFocus(),this.hide()}},e.prototype._wheelHandler=function(t){var e=t.deltaY;0!==e&&(null==this._prevWheelTimeStamp||this._prevWheelTimeStamp+this._wheelDelay<t.timeStamp)&&(this._prevWheelTimeStamp=t.timeStamp,e=(e>0?2:-2)*this._itemHeight,this._viewportDiv.scrollTop+=e,this._doScroll()),t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation()},e.prototype._scrollHandler=function(t){this._doScroll()},e.prototype._searchInputHandler=function(t){var e=t.target;e instanceof It(e).HTMLInputElement&&this._doSearch(e.value)},e.prototype._searchKeyDownHandler=function(t){if(13==t.keyCode&&(this._doSearch(this._searchInput.value),this._searched&&this._soptions.activeWhenEnter&&this._items.length)){var e=this._selectAllCheck;e.checked=!(e.indeterminate=!1),this.$_allCheck(!0)}},e.prototype.$_refreshItem=function(t){for(var e=this._itemElements.length;e--;)this._removeItem(e);this._itemElements=[],this._manager.buildItems(t,t.grid.dataSource,t.autoFilter,!1),this._createItemInfo(t.autoFilters),this._buildItems()},e.prototype._resetClickHandler=function(){this._grid.resetFilters(!0);var t=this._soptions.closeWhenClick;this._resetActive(!1,t),t&&this.hide()},e.prototype.$_allCheck=function(t){this._activateAll(t),this._allCheck=t?tr.ACTIVE:tr.UNACTIVE,!this._applyBatch&&this._soptions.closeWhenClick&&this.hide()},e.prototype._checkAllClickHandler=function(t){var e=this._selectAllCheck,i=t.target;i===this._columnReset?this._resetActive(!0,!1):i!==e?(e.checked=!e.checked,e.indeterminate=!1,this.$_allCheck(e.checked)):i===e&&this.$_allCheck(e.checked)},e.prototype._itemClickHandler=function(t){for(var i=t.target,o=i.className.indexOf("rg-filter-expander")>-1,r="rg-filter-checkbox"==i.className,n=i;n&&"rg-filter-item"!==n.className;)n=n.parentElement;!n&&(n=t.currentTarget);var s=parseInt(n.filter_id),a=this._visbleItemMap[s];if(o)void 0!==a.expanded&&this._doExpand(a,!a.expanded);else{var l=void 0;r?l=i:(l=n.children.item(e.INDEX_CHECKBOX)).checked=!l.checked,this._doCheck(a,l.checked),!this._applyBatch&&this._soptions.closeWhenClick&&this.hide()}},e.prototype._confirmClickHandler=function(){this._doFilterApply(),this.hide()},e.prototype._cancelClickHandler=function(){this.hide()},e.INDEX_CHECKBOX=2,e}(Re),gc=function(t){function e(e,i){var o=t.call(this)||this;return o.$_touchendHandler=null,o._container=e,o._element=o.$_createElement(e.doc),o._isMessage=i,o.$_touchendHandler=function(t){t.preventDefault(),this.hide()}.bind(o),Rt.isMobile()&&o._element.addEventListener("touchend",o.$_touchendHandler,!1),o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this),this._element&&this._element.removeEventListener("touchend",this.$_touchendHandler),Rt.detach(this._element)},e.prototype.show=function(t,e,i,o,r){this.$_show(t,e,i,o,r)},e.prototype.hide=function(){clearTimeout(this._timer),Rt.detach(this._element)},e.prototype.$_createElement=function(t){var e=t.createElement("div");return e.style.pointerEvents="none",e.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),this.$_disableSelection(e),this._span=t.createElement("span"),e.appendChild(this._span),this.$_disableSelection(this._span),e},e.prototype.$_disableSelection=function(t){void 0!==t.onselectstart?t.onselectstart=function(){return!1}:void 0!==t.style.MozUserSelect?t.style.MozUserSelect="none":t.onmousedown=function(){return!1}},e.prototype.$_show=function(t,e,i,o,r){var n=this,s=this._container.gridView.displayOptions.baseZindex+4,a=this._element,l=t&&t.message;if(a&&l){this._span.innerHTML=l.replace(/\n/g,"<br>");var h=this._isMessage?"rg-message":"rg-tooltip";t.styleName&&(h="".concat(h," ").concat(t.styleName)),Rt.setClassName(a,h);var u=a.style;u.position="absolute",u.left="0px",u.top=i+"px",u.overflow="hidden",u.zIndex=String(s),this._container._container.appendChild(a);var c=Rt.getSize(a),d=Rt.getSize(this._container._container);u.left=d.width-c.width>e?e+"px":Math.max(d.right-c.width-d.left-2,0)+"px",c.bottom>d.bottom&&(a.style.top=r?Math.max(0,i-(c.bottom-d.bottom))+"px":Math.max(i-c.height-o,0)+"px"),u.visibility="visible",clearTimeout(this._timer),t.hideDuration&&(this._timer=setTimeout((function(){n.hide()}),t.hideDuration))}},e}(Lt),yc=function(t){function e(e){var i=t.call(this)||this;return i._active=!1,i._messageActive=!1,i._container=e.container,i}return o(e,t),e.prototype._doDispose=function(){this._container=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._active},enumerable:!1,configurable:!0}),e.prototype.show=function(t,e,i,o,r){return!(this._active||(this.close(),!t))&&(this._tipView||(this._tipView=new gc(this._container,!1)),this._tipView.show(t,e,i,o,r),this._active=!0,!0)},e.prototype.showMessage=function(t,e,i){t&&((this._messageView||(this._messageView=new gc(this._container,!0))).show(t,e,i,0,!1),this._messageActive=!0)},e.prototype.close=function(){return!!this._active&&(this._tipView&&this._tipView.hide(),this._active=!1,!0)},e.prototype.closeMessage=function(){this._messageActive&&(this._messageView&&this._messageView.hide(),this._messageActive=!1)},e}(Lt),mc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},bc={};!function(t){var e,i=mc&&mc.__extends||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)});Object.defineProperty(t,"__esModule",{value:!0}),t.h=t.r=void 0;var o=function(){function t(){}return t.encode=function(e){for(var i=t.CHARACTERS,o=[],r=e.length,n=r%3,s=r-n,a=0;a<s;){var l=e[a++]<<16|e[a++]<<8|e[a++];o.push(i.charAt(l>>>18&63)),o.push(i.charAt(l>>>12&63)),o.push(i.charAt(l>>>6&63)),o.push(i.charAt(63&l))}switch(n){case 2:l=e[s++]<<16|e[s++]<<8,o.push(i.charAt(l>>>18&63)),o.push(i.charAt(l>>>12&63)),o.push(i.charAt(l>>>6&63)),o.push(t.SUFFIX);break;case 1:l=e[s++]<<16,o.push(i.charAt(l>>>18&63)),o.push(i.charAt(l>>>12&63)),o.push(t.SUFFIX),o.push(t.SUFFIX)}return o.join("")},t.decode=function(e){for(var i=t.CHARACTERS,o=t.SUFFIX,r=e.split(""),n=[],s=r.length;r[--s]===o;);for(var a=0;a<s;){var l=i.indexOf(r[a++])<<18;a<=s&&(l|=i.indexOf(r[a++])<<12),a<=s&&(l|=i.indexOf(r[a++])<<6),a<=s&&(l|=i.indexOf(r[a++])),n.push(l>>>16&255),n.push(l>>>8&255),n.push(255&l)}for(;0===n[n.length-1];)n.pop();return n},t.SUFFIX="=",t.CHARACTERS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t}(),r=function(){function t(){}return t.union=function(t,e){var i=e.s3[255&t],o=e.s2[255&(t>>=8)],r=e.s1[255&(t>>=8)];return((r=((r=((t=e.s0[255&(t>>=8)])>>16)+(r>>16)+((65535&t)+(65535&r)>>16)<<16|(65535&t)+(65535&r)&65535)>>16^o>>16)<<16|65535&(65535&r^65535&o))>>16)+(i>>16)+((65535&r)+(65535&i)>>16)<<16|(65535&r)+(65535&i)&65535},t.xor=function(t,e){return(t>>16^e>>16)<<16|65535&(65535&t^65535&e)},t._encryptBlock=function(e,i){var o=e.left,r=e.right,n=t.xor,s=t.union;o=n(o,i.p[0]),r=n(r,n(s(o,i),i.p[1]));o=n(o,n(s(r,i),i.p[2])),r=n(r,n(s(o,i),i.p[3])),o=n(o,n(s(r,i),i.p[4])),r=n(r,n(s(o,i),i.p[5])),o=n(o,n(s(r,i),i.p[6])),r=n(r,n(s(o,i),i.p[7])),o=n(o,n(s(r,i),i.p[8])),r=n(r,n(s(o,i),i.p[9])),o=n(o,n(s(r,i),i.p[10])),r=n(r,n(s(o,i),i.p[11])),o=n(o,n(s(r,i),i.p[12])),r=n(r,n(s(o,i),i.p[13])),o=n(o,n(s(r,i),i.p[14])),r=n(r,n(s(o,i),i.p[15])),o=n(o,n(s(r,i),i.p[16])),e.right=o,e.left=n(r,i.p[17])},t._decryptBlock=function(e,i){var o=e.left,r=e.right,n=t.xor,s=t.union;o=n(o,i.p[17]),r=n(r,n(s(o,i),i.p[16]));o=n(o,n(s(r,i),i.p[15])),r=n(r,n(s(o,i),i.p[14])),o=n(o,n(s(r,i),i.p[13])),r=n(r,n(s(o,i),i.p[12])),o=n(o,n(s(r,i),i.p[11])),r=n(r,n(s(o,i),i.p[10])),o=n(o,n(s(r,i),i.p[9])),r=n(r,n(s(o,i),i.p[8])),o=n(o,n(s(r,i),i.p[7])),r=n(r,n(s(o,i),i.p[6])),o=n(o,n(s(r,i),i.p[5])),r=n(r,n(s(o,i),i.p[4])),o=n(o,n(s(r,i),i.p[3])),r=n(r,n(s(o,i),i.p[2])),o=n(o,n(s(r,i),i.p[1])),e.right=o,e.left=n(r,i.p[0])},t._init=function(e){for(var i,o=e.split("").map((function(t){return 255&t.charCodeAt(0)})),r=(e=t.kb,t._encryptBlock),n=0,s=0,a={left:0,right:0},l={p:e.p.slice(0).map((function(e){for(var i=o.length,r=0;r<4;r++)s=s*t.POW8|o[n++%i];return(e>>16^s>>16)<<16|65535&(65535&e^65535&s)})),s0:e.s0.slice(0),s1:e.s1.slice(0),s2:e.s2.slice(0),s3:e.s3.slice(0)},h=0,u=l.p.length;h<u;)r(a,l),l.p[h++]=a.left,l.p[h++]=a.right;for(h=0;h<4;h++)for(i=0,u=l["s"+h].length;i<u;)r(a,l),l["s"+h][i++]=a.left,l["s"+h][i++]=a.right;return l},t.encrypt=function(e,i){for(var r=t._encryptBlock,n=t._init(i),s=8-(7&e.length),a=0;a<s;a++)e+=String.fromCharCode(s);var l=0,h=[],u=e.length>>3,c={left:null,right:null};for(a=0;a<u;a++)c.left=e.charCodeAt(l)*t.POW24|e.charCodeAt(l+1)*t.POW16|e.charCodeAt(l+2)*t.POW8|e.charCodeAt(l+3),c.right=e.charCodeAt(l+4)*t.POW24|e.charCodeAt(l+5)*t.POW16|e.charCodeAt(l+6)*t.POW8|e.charCodeAt(l+7),r(c,n),h.push(c.left>>24&255),h.push(c.left>>16&255),h.push(c.left>>8&255),h.push(255&c.left),h.push(c.right>>24&255),h.push(c.right>>16&255),h.push(c.right>>8&255),h.push(255&c.right),l+=8;return o.encode(h)},t.decrypt=function(e,i){for(var r=t._decryptBlock,n=t._init(i),s=[],a=o.decode(e),l=0,h=a.length>>3,u={left:null,right:null},c=0;c<h;c++){u.left=a[l]*t.POW24|a[l+1]*t.POW16|a[l+2]*t.POW8|a[l+3],u.right=a[l+4]*t.POW24|a[l+5]*t.POW16|a[l+6]*t.POW8|a[l+7],r(u,n);var d=u.left,p=u.right;s.push(d>>24&255),s.push(d>>16&255),s.push(d>>8&255),s.push(255&d),s.push(p>>24&255),s.push(p>>16&255),s.push(p>>8&255),s.push(255&p),l+=8}return s[s.length-1]!==s[s.length-2]&&1!==s[s.length-1]||(e=s[s.length-1],s.splice(s.length-e,e)),s.map((function(t){return String.fromCharCode(t)})).join("")},t.POW2=Math.pow(2,2),t.POW3=Math.pow(2,3),t.POW4=Math.pow(2,4),t.POW8=Math.pow(2,8),t.POW16=Math.pow(2,16),t.POW24=Math.pow(2,24),t.kb={p:[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s0:[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],s1:[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],s2:[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],s3:[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],k:[202,218,204,100]},t}(),n=String.fromCharCode(100,107,100,108),s=function(){function t(t){this._gk=null!=t?t:n}return t.prototype._ldk=function(t){for(var e="",i=0,o=t.length;i<o;i++)e+=String.fromCharCode(t[i]>>1);return e},t.prototype.get=function(){return this._gk+this._ldk(r.kb.k)},t}(),a=function(){function t(){}return t.run=function(t,e){return e=new s(e).get(),r.encrypt(t,e)},t}();t.r=a;var l=function(t){function e(){var i=t.call(this)||this;return Object.setPrototypeOf(i,e.prototype),i}return i(e,t),e}(Error),h=function(){function t(t,e){this._gk=e,this._code=t,this._lic=this.run()}return t.prototype.run=function(){for(var t={},e=r.decrypt(this._code,new s(this._gk).get()).split(";"),i=0,o=e.length;i<o;i++){var n,a=(n=e[i].split("="))[0];(n=n[1])&&0<n.length&&(t[a]=n)}return t},Object.defineProperty(t.prototype,"lic",{get:function(){return this._lic},enumerable:!1,configurable:!0}),t.prototype.is=function(t,e){return t in this._lic&&this._lic[t]===e},t.prototype.includes=function(t,e){return t in this._lic&&0<=e.indexOf(this._lic[t])},t.prototype.expired=function(t,e){return!(t in this._lic)||!this._lic[t]||(t=this._lic[t],e=(e?new Date(new Date(t).setMonth(new Date(t).getMonth()+e)):new Date(t)).getTime(),t=Date.now(),!isNaN(e)&&e<t)},t.prototype.validate=function(t){var e=this,i=!1;try{t.forEach((function(t){var o=Object.keys(t),r=Object.values(t);o.forEach((function(t,o){if(o=r[o],!(i=Array.isArray(o)?e.includes(t,o):e.is(t,o)))throw new l}))}))}catch(t){if(!(t instanceof l))throw t;i=!1}return i},t}();t.h=h}(bc);var vc=function(t){function e(i,o){var r,n=this;switch(i){case 2:r="invalid product-name";break;case 8:r="invalid domain";break;case 16:r="The period of use has expired";break;case 64:r="invalid license type";break;default:r="No license or invalid license."}return n=t.call(this,"".concat(r,"\nlicense: ").concat(o))||this,Object.setPrototypeOf(n,e.prototype),n.name="LicenseError",n.type=i,n.license=o,n}return o(e,t),e}(Error);function wc(t,e){return t==e||0===t.indexOf("*")&&(t=t.substr(1,t.length-1),e.substr(e.indexOf(t),t.length)==t)}function Cc(t,e,i){for(var o=t.split(","),r=0,n=o.length;r<n;r++){var s=o[r];if(wc(s,e))return!0;if(i&&s&&"*"===s[0]&&"*."!==s.substr(0,1))if(new RegExp("^/"+s.substr(1)+"/").exec(i))return!0}return!1}var xc=function(t){function e(e){var i=t.call(this,"rowGroupHeaderCell")||this;return i._rowGroup=e,i}return o(e,t),e.prototype._doDispose=function(){this._rowGroup=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"text",{get:function(){return this.item instanceof Uo?this._rowGroup.getHeaderText(this.item):""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){},enumerable:!1,configurable:!0}),e}(gr),Ic=function(t){function e(e){var i=t.call(this,"rowGroupFooterCell")||this;return i._footerIndex=0,i._value=NaN,i._rowGroup=e,i}return o(e,t),e.$_getValue=function(t,e){if(e){var i=e.grid,o=t.parent,r=o.getFooterIndex(t),n=e.groupFooters.get(r),s=n&&n.expression,a=n&&n.valueCallback;if(s||a){var l=null;if(s&&e instanceof ls){var h=i.rowGroupSummaryRuntime;h.setColumn(e,e.grid.summarizer),h.setItem(o),l=n.evaluate(h)}return a?a(i.handler,e,r,o,l):l}if(o&&e instanceof ls&&i.isGroupedColumn(e)){var u=i.rowGroup.getFooterText(o);return null==u?void 0:u}}else;},e.getValue=function(t,i){try{return e.$_getValue(t,i)}catch(t){return gr.ERROR}},e.$_displayText=function(t,e,i,o){var r;if(o&&null!=o.text)r=o.text;else if(void 0!==i&&e){if(i instanceof Date){var n=o.datetimeWriter;r=n?n.getText(i):String(i)}else if("number"==typeof i){var s=o.numberFormatter;r=s?s.getText(i):isNaN(i)?"":String(i)}else"string"==typeof i?r=i+"":"boolean"==typeof i&&(r=String(i));if(r){var a=o.prefix;a&&(r=a+r),(a=o.suffix)&&(r+=a)}}if(null==r){var l=Rt.cast(t.parent,Uo);if(e){var h=e.groupFooters.get(l.getFooterIndex(t));h&&(r=h.text)}}return r||""},e.prototype._doDispose=function(){this._rowGroup=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"footerIndex",{get:function(){return this._footerIndex},enumerable:!1,configurable:!0}),e.prototype.calculate=function(t){this._value=NaN,this._error=null;try{this._value=e.$_getValue(this.index.item||t,this.index.dataColumn||this.index.literalColumn)}catch(t){this._error=t,this._errorDetail=t,Rt.log("FOOTER ERROR: "+t)}},e.prototype.getDisplayText=function(t){return this._error?gr.ERROR:e.$_displayText(this.index.item,this.index.dataColumn||this.index.literalColumn,this._value,t)},e.prototype.getSummary=function(){return this._getSummary(this.valueColumn,this._footerIndex)},e.prototype.getTemplate=function(t){var e=this._getSummary(this.valueColumn,this._footerIndex);return e?e.realizeGroupSummary(this,t):void 0},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.index.item.level},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(e){t.prototype.setIndex.call(this,e),this._footerIndex=e.item.$_footerIndex},e.prototype._getSummary=function(t,e){return t.groupFooters.get(e)},e}(gr),Sc=function(t){function e(){var e=t.call(this,"rowGroupBarCell")||this;return e._level=0,e}return o(e,t),Object.defineProperty(e.prototype,"level",{get:function(){return this.item.level},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getText",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){},enumerable:!1,configurable:!0}),e}(gr),Ec=function(t){function e(e){var i=t.call(this)||this;return i._index=0,i.$_owner=e,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!==this._styleCallback&&(this._styleCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this._changed())},enumerable:!1,configurable:!0}),e.prototype._changed=function(){this.$_owner&&this.$_owner.$_itemChanged(this)},e}(Lt),Oc=function(t){function e(e){var i=t.call(this)||this;return i._items=[],i._owner=e,i._items.push(new Ec(i)),i.assignFrom(Xe.rowGroup.footers),i}return o(e,t),e.prototype._doDispose=function(){for(var e=0,i=this._items;e<i.length;e++){i[e].dispose()}this._items=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},set:function(t){t=Math.max(t,1);var e=this._items;if(t!==e.length){for(var i=void 0;e.length<t;)(i=new Ec(this))._index=e.length,e.push(i);for(;e.length>t;)(i=e.pop()).dispose();this.$_itemChanged(null)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.get=function(t){return this._items[t]},e.prototype.assignFrom=function(e){t.prototype.assignFrom.call(this,e);var i=this._items,o=e&&e.items?Rt.makeArray(e.items,!0):e;if(Array.isArray(o))for(var r=Math.max(o.length,1),n=0;n<r;n++)i[n]||(i[n]=new Ec(this)),i[n].assignFrom(o[n]),i[n]._index=n;else i[0].assignFrom(o),i[0]._index=0;this.$_itemChanged(null)},e.prototype.$_itemChanged=function(t){this._owner&&this._owner.rowGroupFooterChanged(t)},e}(Lt),Rc=function(e){function i(i){var o=e.call(this,i)||this;return o._mergeMode=!1,o._sorting=!0,o._expandedAdornments=t.RowGroupAdornments.BOTH,o._collapsedAdornments=t.RowGroupAdornments.HEADER,o._indentVisible=!0,o._indentVisibleLevel=0,o._levelIndent=20,o._headerStatement="${groupField}: ${groupValue} - ${rowCount} rows",o._expanderVisibility=t.ExpanderVisibility.DEFAULT,o._headerCell=new xc(o),o._footerCell=new Ic(o),o._barCell=new Sc,o._headerStatementExpr=new rr(o._headerStatement),o._footerStatementExpr=new rr,o._statementRuntime=new _r,o._footerFormatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:"",text:void 0},o._footers=new Oc(o),o.assignFrom(Xe.rowGroup),o}return o(i,e),i.prototype._doDispose=function(){this._footers=this._footers.dispose(),e.prototype._doDispose.call(this)},i.prototype.rowGroupFooterChanged=function(t){this._counterAware&&this._counterAware.groupfFooterCounterChanged(this)},i.prototype.getGroupFooterCount=function(t){return this._footers.count},i.prototype.setCounterAware=function(t){this._counterAware=t},Object.defineProperty(i.prototype,"mergeMode",{get:function(){return this._mergeMode},set:function(t){t!=this._mergeMode&&(this._mergeMode=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorting",{get:function(){return this._sorting},set:function(t){t!=this._sorting&&(this._sorting=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandedAdornments",{get:function(){return this._expandedAdornments},set:function(t){t!=this._expandedAdornments&&(this._expandedAdornments=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapsedAdornments",{get:function(){return this._collapsedAdornments},set:function(e){e!==t.RowGroupAdornments.NONE&&e!=this._collapsedAdornments&&(this._collapsedAdornments=e,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"createFooterCallback",{get:function(){return this._createFooterCallback},set:function(t){t!==this._createFooterCallback&&(this._createFooterCallback=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this,!0))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"indentVisible",{get:function(){return this._indentVisible},set:function(t){t!=this._indentVisible&&(this._indentVisible=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this),this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"indentVisibleLevel",{get:function(){var t=this._indentVisibleLevel;if(!this._grid||!t||x(this.expandedAdornments)||x(this.collapsedAdornments))return 0;var e=t>=1?1:-1;return t=Math.min(this._grid.rowGroupLevels,Math.abs(t))*e},set:function(t){t!==this._indentVisibleLevel&&(this._indentVisibleLevel=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"levelIndent",{get:function(){return this._levelIndent},set:function(t){(t=Math.max(0,t))!=this._levelIndent&&(this._levelIndent=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footers",{get:function(){return this._footers},set:function(t){this.setFooters(t)},enumerable:!1,configurable:!0}),i.prototype.setFooters=function(t){this._footers.assignFrom(t)},Object.defineProperty(i.prototype,"headerStatement",{get:function(){return this._headerStatement},set:function(t){t!==this._headerStatement&&(this._headerStatement=t,this._headerStatementExpr.source=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerCallback",{get:function(){return this._headerCallback},set:function(t){this._headerCallback=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footerStatement",{get:function(){return this._footerStatement},set:function(t){t!=this._footerStatement&&(this._footerStatement=t,this._footerStatementExpr.source=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergeExpanderVisibility",{get:function(){return this.expanderVisibility},set:function(t){this.expanderVisibility=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanderVisibility",{get:function(){return this._expanderVisibility},set:function(t){t!==this.expanderVisibility&&(this._expanderVisibility=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanderVisibleCallback",{get:function(){return this._expanderVisibleCallback},set:function(t){this._expanderVisibleCallback=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueForGroupCallback",{get:function(){return this._valueForGroupCallback},set:function(t){this._valueForGroupCallback=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this,!0),this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resetOriginVindex",{get:function(){return this._resetOriginVindex},set:function(t){this._resetOriginVindex=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blankGroupData",{get:function(){return this._blankGroupData},set:function(t){t!==this._blankGroupData&&(this._blankGroupData=t,this._changed())},enumerable:!1,configurable:!0}),i.prototype.getHeaderCell=function(t){return this._headerCell.setIndex(Ds.temp(this.owner,t.index)),this._headerCell},i.prototype.getFooterCell=function(t){var e=t.item;return this._footerCell.setIndex(t),this._footerCell.calculate(e),this._footerCell},i.prototype.getFooterStyleName=function(t){var e=this._footers.get(t.$_footerIndex),i="rg-rowgroup-footer rg-rowgroup-footer-level-"+String(t.parent.level),o=e.styleName,r=e.styleCallback;return o&&(i+=" "+o),r&&(o=r(this._grid.handler,t.index,e.index))&&(i+=" "+o),i},i.prototype.getFooterCellStyle=function(t,e,o){void 0===o&&(o=!0);var r=t.footerIndex,n=this._footers.get(r).cellStyleCallback,s=t.index.column.groupFooters.get(t.footerIndex);if(n){var a=n(this._grid.handler,t);e.assign(a)}if(s){var l=s.styleCallback;if(l){var h=l(this._grid.handler,t);e.assign(h)}}return!e.styleName&&s&&(e.styleName=s.styleName),o&&(e.styleName?e.styleName=i.FOOTER_CELL_STYLE+" "+e.styleName:e.styleName=i.FOOTER_CELL_STYLE),e},i.prototype.getFooterCellFormatters=function(t,e){return e&&t?(e.numberFormatter=e.numberFormatter||t.numberFormatter,e.datetimeWriter=e.datetimeWriter||t.datetimeWriter,e.booleanFormatter=e.booleanFormatter||t.boolFormatter,e.textFormatter=e.textFormatter||t.textFormatter,e.prefix=e.prefix||t.prefix,e.suffix=e.suffix||t.suffix):t&&((e=this._footerFormatter).numberFormatter=t.numberFormatter,e.datetimeWriter=t.datetimeWriter,e.booleanFormatter=t.boolFormatter,e.textFormatter=t.textFormatter,e.prefix=t.prefix,e.suffix=t.suffix),e},i.prototype.getBarCell=function(t){return this._barCell.setIndex(t),this._barCell},i.prototype.getHeaderText=function(t){return!this._headerStatement&&this._headerCallback?this._headerCallback(this.owner.handler,t):(this._statementRuntime.setGrid(this.owner),this._statementRuntime.setGroup(t),this._headerStatementExpr.evaluate(this._statementRuntime))},i.prototype.getFooterText=function(t){if(this._footerStatement&&this._footerStatementExpr)return this._statementRuntime.setGrid(this.owner),this._statementRuntime.setGroup(t),this._footerStatementExpr.evaluate(this._statementRuntime)},i.prototype.getIndentCount=function(t){var e=this.indentVisibleLevel;return 0===e?t:Math.min(Math.abs(e),t)},i.prototype._doChanged=function(){this.owner.$_rowGroupChanged(this)},i.prototype.$_isExpanderVisible=function(e){var i;if(!e.expanded)return!0;if(this._expanderVisibleCallback)i=null==(i=this._expanderVisibleCallback.call(this._grid,this._grid.handler,e))||i;else switch(this._expanderVisibility){case t.ExpanderVisibility.NONE:i=!1;break;case t.ExpanderVisibility.ALWAYS:i=!0;break;default:i=Vr(e)}return!!i&&(e instanceof Uo?e.footerCount>0||x(this.collapsedAdornments):void 0)},i.FOOTER_CELL_STYLE="rg-rowgroup-footer-cell",i.FOOTER_CELL_RENDERER="rg-rowgroup-footer-renderer",i}(dr),Pc=function(t){function e(e){var i=t.call(this,e.doc,"gridDebugLayer")||this;return i._owner=e,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.layout=function(){var t=this._owner.layoutManager;this.$_setBounds(this._grid,t.gridBounds.clone().inflate(-1,-1));var e=t.dataBounds.clone();e.offset(t.contentBounds.x,t.contentBounds.y),this.$_setBounds(this._data,e)},e.prototype._getCssSelector=function(){return"rg-debug-layer"},e.prototype._initDom=function(t){var e=t.style,i=St(t);e.position="absolute",t.appendChild(this._client=this.$_createElement(i,"Client")),t.appendChild(this._topContent=this.$_createElement(i,"Top Content")),t.appendChild(this._leftContent=this.$_createElement(i,"Left Content")),t.appendChild(this._fixedContent=this.$_createElement(i,"Fixed Content")),t.appendChild(this._content=this.$_createElement(i,"Content")),t.appendChild(this._rightContent=this.$_createElement(i,"Right Content")),t.appendChild(this._grid=this.$_createElement(i,"Grid Bounds","b")),t.appendChild(this._data=this.$_createElement(i,"Data Bounds","g")),t.appendChild(this._nonFixed=this.$_createElement(i,"Non Fixed","g"))},e.prototype.$_createElement=function(t,e,i){void 0===i&&(i="r");var o=t.createElement("span"),r=o.style;return r.display="inline-block",r.position="absolute",r.boxSizing="border-box",r.pointerEvents="none","b"==i?(r.border="2px dashed rgba(0, 0, 255, 0.5)",r.color="blue"):"g"==i?(r.paddingTop="20px",r.border="2px solid rgba(0, 128, 0, 0.5)",r.color="rgb(0, 128, 0)"):(r.border="1px solid rgba(255, 0, 0, 0.7)",r.color="red"),r.fontWeight="bold",r.textAlign="center",r.verticalAlign="middle",r.whiteSpace="normal",o[Rt.TextProp]=e,o},e.prototype.$_setBounds=function(t,e){var i=t.style;e.isEmpty?i.display="none":(i.display="inline-block",i.left=e.x+"px",i.top=e.y+"px",i.width=e.width+"px",i.height=e.height+"px",i.lineHeight=e.height+"px")},e}(ga);!function(t){function e(){var e=t.call(this)||this;return e._min=0,e._max=100,e._step=1,e._next=0,e._completed=!1,e._timer=void 0,e}o(e,t),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(t){this._min=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){this._max=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(t){this._step=t},enumerable:!1,configurable:!0}),e.prototype.execute=function(t){if(t){this._runner=t,this._next=this._min;var e=It(t.container);t.container instanceof e.HTMLElement&&(this._view.setProperties(this._min,this._max,this._min),this._view.show(t.container)),this.$_runNext()}},e.prototype.$_runNext=function(){if(this._next<this._max){var t=this._runner.run(this._next);if(this._next+=this._step,this._view.setPosition(this._next,t),this._next<this._max)return void setTimeout(function(){this.$_runNext()}.bind(this),0)}!this._completed&&this.$_complete()},e.prototype.$_complete=function(){try{this._runner.complete&&this._runner.complete()}finally{this._completed=!0,this._view.close()}}}(Re);var kc,Tc=function(t){function e(e){var i=t.call(this)||this;i._message="Load data...",i._min=0,i._max=0,i._pos=0;var o=St(e);return i._dom=i.$_createElement(o),i}return o(e,t),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(t){this._message=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._pos},enumerable:!1,configurable:!0}),e.prototype.setPosition=function(t,e){(t=Math.max(this._min,Math.min(this._max,t)))!=this._pos&&(this._pos=t,this._message=e,this.$_refreshView())},e.prototype.setProperties=function(t,e,i,o,r){void 0===o&&(o=null),void 0===r&&(r=!1),this._min=t,this._max=Math.max(t,e),this._max==this._min&&(this._max=this._min+1),this._pos=Math.max(this._min,Math.min(this._max,i)),this._message=o,r&&this.$_refreshView()},e.prototype.setZIndex=function(t){this._dom.style.zIndex=String(t+5)},e.prototype.show=function(t,e){void 0===e&&(e=null),this._container=t,e&&this.$_setMessage(e),t.appendChild(this._dom);var i=Rt.getSize(t),o=Rt.getSize(this._dom);Rt.move(this._dom,(i.width-o.width)/2,(i.height-o.height)/3)},e.prototype.close=function(){Rt.detach(this._dom)},e.prototype.$_createElement=function(t){var e=t.createElement("div");e.className="rg-progress";var i=e.style;return i.position="absolute",i.zIndex="3001",i.minWidth="250px",i.padding="8px 10px",e.appendChild(e.$_bar=this.$_createBar(t)),e.appendChild(e.$_msg=this.$_createMsg(t)),e},e.prototype.$_createBar=function(t){var e=t.createElement("div");e.className="rg-progress-bar";var i=e.style;i.width="100%",i.height="13px",i.marginBottom="4px";var o=t.createElement("div");return o.className="rg-progress-progress",(i=o.style).height="100%",i.width="0px",e.appendChild(e.$_led=o),e},e.prototype.$_createMsg=function(t){var e=t.createElement("div"),i=t.createElement("span");i.className="rg-progress-message";var o=e.style;return o.width="100%",o.textAlign="center",e.appendChild(e.$_span=i),e},e.prototype.$_refreshView=function(){var t=this._dom,e=t.$_bar,i=e.$_led;t.$_msg.$_span.innerHTML=Rt.htmlEncode(this._message);var o=Rt.getSize(e);i.style.width=Math.min(o.width-1,Math.floor(o.width*(this._pos-this._min)/(this._max-this._min)))+"px"},e.prototype.$_setMessage=function(t){this._dom.$_msg.$_span.innerHTML=Rt.htmlEncode(this._message)},e}(Re),Dc=function(t){function e(e){var i=t.call(this)||this;return i._container=e,i}return o(e,t),e.prototype.show=function(t,e,i){this._view||(this._view=new Tc(t)),this._view.setZIndex(i),this._view.show(t||this._container,e||"Load data...")},e.prototype.close=function(){this._view&&this._view.close()},e.prototype.setProperties=function(t,e,i,o){this._view&&(o||(o=this._title||"Load data... ",e>t&&(o+=Math.floor(100*(i-t)/(e-t))+"% ("+i+" / "+e+")")),this._view.setProperties(t,e,i,o,!0))},e.prototype.showLoader=function(t,e){this._loaderView||(this._loaderView=new Mc(t)),this._loaderView.setZIndex(e),this._loaderView.show(t||this._container)},e.prototype.closeLoader=function(){this._loaderView&&this._loaderView.close()},e.prototype.loaderShowing=function(){return this._loaderView&&this._loaderView.isShowing()},e}(Re),Mc=function(t){function e(e){var i=t.call(this)||this,o=St(e);return i._dom=i.$_createElement(o),i}return o(e,t),e.prototype.show=function(t){t.appendChild(this._dom)},e.prototype.setZIndex=function(t){this._dom.style.zIndex=String(t+5)},e.prototype.close=function(){Rt.detach(this._dom)},e.prototype.isShowing=function(){return!!this._dom.parentElement},e.prototype.$_createElement=function(t){var e=t.createElement("div");return e.className="rg-load-indicator",e.style.position="absolute",e},e}(Re),Fc=function(t){function e(e){var i=t.call(this,e)||this;return i._title="리얼그리드 테이블 (테이블에서 엔터키로 버튼 링크등의 기능이 실행됩니다)",i._description="${columns} 열로 이루어진 데이터 테이블입니다.",i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(t){this._title!==t&&(this._title=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this._description},set:function(t){this._description!==t&&(this._description=t)},enumerable:!1,configurable:!0}),e.prototype.getDescription=function(){var t,e=this.title?"<strong>"+this.title+"</strong>":"",i="";if(t=this.grid){var o=t.layoutManager.cellLayouts._dataCells,r=o&&o[0];r&&r.forEach((function(t){t.isProxy||(i+=t.displayText+", ")}))}return e+(i=this.description?"<span>"+this.description.replace("${columns}",i.substr(0,i.length-2))+"</span>":"")},e}(ml),Lc=function(t){function e(e){var i=t.call(this,e.doc,"watermark")||this;return i._grid=e,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(t){this._message=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},set:function(t){this._active=t},enumerable:!1,configurable:!0}),e.prototype.refresh=function(){var t=32===this._grid.container._lkCheck;if(t){this._active=!0;var e=this._dom;if(e&&!e.parentElement)this._grid._dom.appendChild(e);this.$_setDiv(e,t),this.$_setSpan(this._span,t,this.message||Pt.decode("6riw6rCE7J20IOunjOujjOuQmOyXiOyKteuLiOuLpA==")),this.resetSize(),this._grid.container.disabled=!0}},e.prototype._getCssSelector=function(){return"rg-watermark-layer"},e.prototype._initDom=function(t){var e=St(t);t.appendChild(this._span=this.$_createElement(e,""))},e.prototype._setSizeStyle=function(t){var e=this._active;t.width=e?"100%":"0px",t.height=e?"100%":"0px"},e.prototype.$_setDiv=function(t,e){var i=t.style;i.position="absolute",i.zIndex="1",e?(this.setImportantStyle("background-color","rgba(80, 80, 80, 0.5)"),this.setImportantStyle("display","block"),i.removeProperty("pointer-events")):i.pointerEvents="none"},e.prototype.$_setSpan=function(t,e,i){var o=t.style;e&&(o.display="inline-block",o.position="absolute",o.boxSizing="border-box",o.pointerEvents="none",o.fontWeight="bold",o.textAlign="center",o.verticalAlign="middle",o.whiteSpace="normal",o.top="50%",o.left="50%",o.transform="translate(-50%, -50%)",o.fontSize="50px",t[Rt.TextProp]=i)},e.prototype.$_createElement=function(t,e){return t.createElement("span")},e}(ga),Nc=function(t){function e(){return t.call(this,"filterPanelCell")||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e}(gr),$c=function(e){function i(i){var o=e.call(this,i)||this;return o._showInput=!0,o._height=23,o._minRowHeight=23,o._filterDelay=500,o._ignoreCase=!0,o._trimData=!1,o._beforeCommit=!0,o._defaultNumberOperator=t.InlineFilterOperator.GREATER_EQUAL,o._defaultTextOperator=t.InlineFilterOperator.CONTAINS,o._defaultDateOperator=t.InlineFilterOperator.GREATER_EQUAL,o.visible=!1,o.assignFrom(Xe.filterPanel),o._cell=new Nc,o}return o(i,e),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(t){t!==this._height&&(this._height=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){t!==this._minRowHeight&&(this._minRowHeight=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showInput",{get:function(){return this._showInput},set:function(t){t!=this._showInput&&(this._showInput=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ignoreCase",{get:function(){return this._ignoreCase},set:function(t){t!==this._ignoreCase&&(this._ignoreCase=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterDelay",{get:function(){return this._filterDelay},set:function(t){this._filterDelay=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"beforeCommit",{get:function(){return this._beforeCommit},set:function(t){t!=this._beforeCommit&&(this._beforeCommit=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textOperators",{get:function(){if(!i.$_DefaultTextOperators){var t=Ue.messages;i.$_DefaultTextOperators={contains:t.filterOperatorContains,notContains:t.filterOperatorNotContains,startsWith:t.filterOperatorStartsWith,endsWith:t.filterOperatorEndsWith,equal:t.filterOperatorEqual,notEqual:t.filterOperatorNotEqual,empty:t.filterOperatorEmpty,reset:t.filterOperatorReset}}return this._textOperators||i.$_DefaultTextOperators},set:function(t){this._grid.closePopups(!1);var e=this.$_setOperators(t);e&&(this._textOperators=e),this.$_getPopup(i.$_TEXT_POPUP,this.textOperators,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"numberOperators",{get:function(){if(!i.$_DefaultNumberOperators){var t=Ue.messages;i.$_DefaultNumberOperators={equal:t.filterOperatorEqual,notEqual:t.filterOperatorNotEqual,greater:t.filterOperatorGreater,greaterEqual:t.filterOperatorGreaterEqual,lower:t.filterOperatorLower,lowerEqual:t.filterOperatorLowerEqual,between:t.filterOperatorBetween,empty:t.filterOperatorEmpty,reset:t.filterOperatorReset}}return this._numberOperators||i.$_DefaultNumberOperators},set:function(t){this._grid.closePopups(!1);var e=this.$_setOperators(t);e&&(this._numberOperators=e),this.$_getPopup(i.$_NUMBER_POPUP,this.numberOperators,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dateOperators",{get:function(){if(!i.$_DefaultDateOperators){var t=Ue.messages;i.$_DefaultDateOperators={contains:t.filterOperatorContains,notContains:t.filterOperatorNotContains,startsWith:t.filterOperatorStartsWith,endsWith:t.filterOperatorEndsWith,equal:t.filterOperatorEqual,notEqual:t.filterOperatorNotEqual,greater:t.filterOperatorGreater,greaterEqual:t.filterOperatorGreaterEqual,lower:t.filterOperatorLower,lowerEqual:t.filterOperatorLowerEqual,empty:t.filterOperatorEmpty,reset:t.filterOperatorReset}}return this._dateOperators||i.$_DefaultDateOperators},set:function(t){this._grid.closePopups(!1);var e=this.$_setOperators(t);e&&(this._dateOperators=e),this.$_getPopup(i.$_DATE_POPUP,this.dateOperators,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trimData",{get:function(){return this._trimData},set:function(t){t!==this._trimData&&(this._trimData=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterPanelCallback",{get:function(){return this._filterPanelCallback},set:function(t){this._filterPanelCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!==this._styleName&&(this._styleName=t,this._changed())},enumerable:!1,configurable:!0}),i.prototype.getPopup=function(e){switch(e.valueType){case t.ValueType.DATE:case t.ValueType.DATETIME:return this.$_getPopup(i.$_DATE_POPUP,this.dateOperators,!1);case t.ValueType.NUMBER:case t.ValueType.UINT:case t.ValueType.INT:case t.ValueType.UNUM:return this.$_getPopup(i.$_NUMBER_POPUP,this.numberOperators,!1);case t.ValueType.TEXT:case t.ValueType.CHAR:return this.$_getPopup(i.$_TEXT_POPUP,this.textOperators,!1)}},i.prototype.clearInput=function(t){("string"!=typeof t||(t=this._grid.columnByName(t)))&&this._grid.clearInlineFilter(t)},i.prototype.getCell=function(t){var e=this._cell,i=t.getDataColumn();return e.index.set(-1,i),e.showInput=!!i&&(i.filterable&&(this.showInput?!1!==i.showInlineFilter:i.showInlineFilter)),e.filterOperator=i._inlineFilterOp||this.$_getDefaultOperator(i),e.filterText=i._inlineFilterText||"",e},i.prototype.assignFrom=function(t){e.prototype.assignFrom.call(this,t)},i.prototype._doChanged=function(){this._grid&&this._grid.invalidatePosition()},i.prototype.$_getPopup=function(t,e,i){var o=this._grid,r=o.popupMenuManager,n=r.getMenu(t);if(!n||i){for(var s=[],a=Object.keys(e),l=o.filterOperatorCallback.bind(o),h=0,u=a;h<u.length;h++){var c=u[h],d=new Qu(null,{label:e[c],tag:c,styleName:"rg-inline-filter-icon rg-inline-filter-".concat(Rt.camelToHyphen(c)),callback:l});s.push(d)}n=r.addMenu(t,s,!0,null)}return n.name},i.prototype.$_getDefaultOperator=function(e){switch(e.valueType){case t.ValueType.DATE:case t.ValueType.DATETIME:return this._defaultDateOperator;case t.ValueType.NUMBER:case t.ValueType.UNUM:case t.ValueType.UINT:case t.ValueType.INT:return this._defaultNumberOperator;case t.ValueType.CHAR:case t.ValueType.TEXT:return this._defaultTextOperator}},i.prototype._createCell=function(){return new Nc},i.prototype.$_setOperators=function(e){var i,o=Object.keys(e),r=!1;if(o.length>0){var n=Object.keys(t.InlineFilterOperator);i={};for(var s=0;s<o.length;s++)for(var a=o[s],l=0;l<n.length;l++)t.InlineFilterOperator[n[l]].toLowerCase()==a.toLowerCase()&&(i[t.InlineFilterOperator[n[l]]]=e[a],r=!0)}return r&&i?i:null},i.$_TEXT_POPUP="$$_textOperators_$$",i.$_NUMBER_POPUP="$$_numberOperators_$$",i.$_DATE_POPUP="$$_dateOperators_$$",i}(dr),Ac=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.input=null,t.operatorButton=null,t.popupMenu=null,t}return o(i,e),i.prototype.span=function(){this.spanned=!0,this.clear(!1)},i.prototype.clear=function(t){return e.prototype.clear.call(this,t),this.className&&(this.cell.className=this.className=""),this},i.prototype.setOperator=function(t){this.setClass(t),this.setPlaceHolder(t)},i.prototype.setClass=function(t){this.operatorButton&&(this.operatorButton.className="rg-filter-panel-operator "+(t?" rg-inline-filter-".concat(Rt.camelToHyphen(t)):""))},i.prototype.setPlaceHolder=function(e){this.input&&(this.input.placeholder=e===t.InlineFilterOperator.BETWEEN?"value1 ~ value2":"")},i.prototype.setFocus=function(){this.input.focus()},i}(Gl),Vc=function(e){function i(t,i){var o=e.call(this,t,i,"filterPanelView")||this;return o._rowPoints=[],o._cells=[],o}return o(i,e),i.prototype._doDispose=function(){for(var t=0;t<this._cells.length;t++)for(var i=this._cells[t],o=0;o<i.length;o++)i[o].dispose(),i[o]=null;this._cells=null,e.prototype._doDispose.call(this)},i.prototype.tableCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var r=i[o];if(r&&r.cell===t)return r}},i.prototype.tableCellByLayout=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++)if(i[o].layout===t)return i[o]},i.prototype.layoutByCell=function(t){var e=this.tableCellByCell(t);return e&&e.layout},i.prototype.columnByCell=function(t){var e=this.layoutByCell(t);return e&&e._columnObj},i.prototype.operatorChange=function(e,i,o,r){var n=i.tag,s=o.getDataColumn(),a=this.model.getCell(o);n===t.InlineFilterOperator.RESET&&(e.input.value="",n=a.filterOperator),e.setOperator(n),this._filterRun(this.model,e.input.value,n,s)},i.prototype.clearInput=function(t,e){if(t)t.input.value="",this._filterRun(this.model,"",void 0,e);else for(var i=0,o=this._cells.length;i<o;i++)for(var r=0,n=this._cells[i].length;r<n;r++){(t=this._cells[i][r]).input.value="";var s=t.layout.getDataColumn();s._inlineFilterText="",s&&s.setInlineFilter(void 0,!1)}},i.prototype.setFocus=function(t){t.setFocus()},i.prototype._getCssSelector=function(){return"rg-filter-panel"},i.prototype._getTableHidden=function(){return!1},i.prototype._getRendererStyle=function(){return"rg-filter-panel-renderer"},i.prototype._getTableRowCount=function(t){return t.dataRows},i.prototype._getTableRowHeight=function(t,e){return this._rowPoints[e+1]-this._rowPoints[e]},i.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},i.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},i.prototype._doPrepareTableRow=function(t,i,o,r){e.prototype._doPrepareTableRow.call(this,t,i,o,r);var n=t.grid;Rt.setClassName(r,n.filterPanel.styleName||"rg-filter-panel-row")},i.prototype._prepareCellContent=function(t,e){var i=St(t).createElement("div");return i.className=this._getRendererStyle(),i},i.prototype._doMeasure=function(t,e,i){for(var o=t.layoutManager.dataRows,r=Math.max(t.filterPanel.height,t.filterPanel.minRowHeight*o),n=0,s=this._rowPoints=[n],a=0;a<o-1;a++)s.push(n+=Math.round(r/o));return s.push(n=r),wl.create(e,n)},i.prototype._doLayoutContent=function(t){var e=t.grid,i=t.cellLayouts._dataCells,o=i.length,r=this._getFirstCell(t),n=this._getStartCell(t)-r,s=this._getEndCell(t)-r,a=this.model;this.$_refreshCells(t,i,this._tbody),this.$_refreshSpans(t,o),this.$_refreshHeadTitle(t,this._thead);for(var l=0;l<o;l++){var h=this._cells[l];this._getTableRow(t,l);for(var u=n;u<=s;u++){var c=h[u];if(c.visible){var d=c.layout;if(d.isProxy||d instanceof vs)c.clear(!1);else{var p=a.getCell(d);this._updateCell(e,a,p,c)}}}}},i.prototype._updateCell=function(t,e,i,o){var r=t.doc,n=t.container,s=o.input,a=o.operatorButton,l=o.cell.firstElementChild;if(a||(a=o.operatorButton=r.createElement("span"),l.appendChild(a)),!s){(s=o.input=r.createElement("input")).type="text",n.$_addListener(s,"keydown",this._keydownHandler.bind(this),!1),n.$_addListener(s,"keyup",this._keyupHandler.bind(this),!1),n.$_addListener(s,"input",this._inputHandler.bind(this),!1);var h="$$-rg-filter-cell"+i.valueColumn.$_hash;s.id=h;var u=document.createElement("label");u.style.display="none",u.setAttribute("for",h),l.appendChild(u),l.appendChild(s)}s.value!=i.filterText&&(s.value=i.filterText);var c=this._rowPoints[1]-this._rowPoints[0];l.style.display=i.showInput?"":"none";var d=a.style;d.width="20px",d.height="".concat(c-6,"px");(d=s.style).width=o.width-30+"px",d.height="".concat(c-6,"px"),o.setOperator(i.filterOperator),o.popupMenu=e.getPopup(o.layout.getDataColumn())},i.prototype._keydownHandler=function(t){this.grid,9===(t.keyCode||t.charCode)&&this._timer&&this.$_search(t,!0)},i.prototype._keyupHandler=function(e){var i=this.grid,o=e.keyCode||e.charCode;if(Rt.included(o,38,40)){var r=i.getTableCell(e.target),n=this.tableCellByCell(r),s=Ds.temp(i,-1,n.layout),a=void 0;if(38!==o||s.isTop){if(40===o){if(s.isBottom)return s.itemIndex=i.topIndex,i.setFocusedIndex(s,!0,!0,!0),void i.setFocus();s.down(t.VerticalMoveStep.CELL),a=s.layout}}else s.up(t.VerticalMoveStep.CELL),a=s.layout;a&&(n=this.tableCellByLayout(s.layout)).setFocus()}else 13===o&&this.$_search(e,!0)},i.prototype._inputHandler=function(t){this.$_search(t,!1)},i.prototype.$_search=function(t,e){var i,o=t.target,r=this.grid,n=this.model;i=o.value;var s=r.getTableCell(o),a=this.columnByCell(s);if(a){var l=n.getCell(a.layout);e?(clearTimeout(this._timer),this._filterRun(n,i,l.filterOperator,a)):this._startTimer(i,l.filterOperator,a)}},i.prototype._startTimer=function(t,e,i){var o=this.model;clearTimeout(this._timer),this._timer=setTimeout(function(){this._filterRun(o,t,e,i)}.bind(this),o.filterDelay)},i.prototype._filterRun=function(e,i,o,r){var n,s,a=i,l=e.filterPanelCallback,h=!0;if(l){var u=this.grid;if("boolean"==typeof(h=l.call(this,u.handler,r,o,i))){if(!1!==h)return r.setInlineFilter(void 0,!0),void(r._inlineFilterText=i)}else if(h&&(o=h.operator,i=h.text,!o))return}if(null!=i&&""!=i||o===t.InlineFilterOperator.EMPTY)switch(r.valueType){case t.ValueType.DATE:case t.ValueType.DATETIME:case t.ValueType.NUMBER:var c=i=i.replace(/[^0-9\-.~]/g,"");switch(Rt.included(r.valueType,t.ValueType.DATE,t.ValueType.DATETIME)?(i=i.replace(/-/g,""),s="datestr(value)",c='"'.concat(i,'"')):s="value",o){case t.InlineFilterOperator.EQUAL:n="".concat(s," = ").concat(c);break;case t.InlineFilterOperator.NOT_EQUAL:n="".concat(s," <> ").concat(c);break;case t.InlineFilterOperator.GREATER:n="".concat(s," > ").concat(c);break;case t.InlineFilterOperator.GREATER_EQUAL:n="".concat(s," >= ").concat(c);break;case t.InlineFilterOperator.LOWER:n="".concat(s," < ").concat(c);break;case t.InlineFilterOperator.LOWER_EQUAL:n="".concat(s," <= ").concat(c);break;case t.InlineFilterOperator.CONTAINS:n="".concat(s," like '%").concat(i,"%'");break;case t.InlineFilterOperator.NOT_CONTAINS:n="".concat(s," not like '%").concat(i,"%'");break;case t.InlineFilterOperator.STARTS_WITH:n="".concat(s," like '").concat(i,"%'");break;case t.InlineFilterOperator.ENDS_WITH:n="".concat(s," like '%").concat(i,"'");break;case t.InlineFilterOperator.EMPTY:n="value is empty";break;case t.InlineFilterOperator.BETWEEN:var d=c.split("~").sort((function(t,e){return parseFloat(t)-parseFloat(e)}));n=2===d.length&&d[1]?"(value >= ".concat(d[0],") and (value <= ").concat(d[1],")"):"value >= ".concat(d[0])}break;case t.ValueType.TEXT:default:s=r.lookupDisplay?"text":"value",s=e.trimData?"trim(".concat(s,")"):s;var p=e.ignoreCase?"i":"";switch(i=e.trimData&&i?i.trim():i,i=(i=e.ignoreCase&&i?i.toLowerCase():i).replace(/\\/g,"\\\\").replace(/\'/g,"\\'"),o){case t.InlineFilterOperator.CONTAINS:n="".concat(s," ").concat(p,"likehan '%").concat(i,"%'");break;case t.InlineFilterOperator.NOT_CONTAINS:n="".concat(s," not ").concat(p,"likehan '%").concat(i,"%'");break;case t.InlineFilterOperator.STARTS_WITH:n="".concat(s," ").concat(p,"likehan '").concat(i,"%'");break;case t.InlineFilterOperator.ENDS_WITH:n="".concat(s," ").concat(p,"likehan '%").concat(i,"'");break;case t.InlineFilterOperator.EQUAL:n="".concat(s," ").concat(p,"like '").concat(i,"'");break;case t.InlineFilterOperator.NOT_EQUAL:n="".concat(s," not ").concat(p,"like '").concat(i,"'");break;case t.InlineFilterOperator.EMPTY:n="value is empty"}}else n=void 0;var f=this.tableCellByLayout(r.layout);n!=f.criteria&&(f.criteria=n,r.setInlineFilter(n,!0)),o&&(r._inlineFilterOp=o),r._inlineFilterText=a},i.prototype._getStartCell=function(t){return t.getStartCell()},i.prototype._getEndCell=function(t){return t.getEndCell()},i.prototype.$_getCellHeight=function(t){var e=t.layout.hrow,i=this._rowPoints[e];return this._rowPoints[e+t.rowSpan]-i},i.prototype.$_refreshCells=function(t,e,i){for(var o=this._cells,r=i.children,n=r.length,s=this._getFirstCell(t),a=this._getLastCell(t)-s+1,l=o.length;l<n;l++)o.push([]);for(var h=0;h<n;h++){for(var u=o[h],c=r[h].children,d=e[h],p=0;p<a;p++){var f=c[p],_=d[p+s],g=u[p];g?g.cell!==f||g.layout!=_&&(g.layout=_,g.clear(!0)):(g=u[p]=new Ac(c[p])).layout=_,g.height=this.$_getCellHeight(g),g.width=this._getCellWidth(t,p),g.spanned=!1}for(p=a;p<u.length;p++)u[p].dispose();u.length=a}for(h=n;h<o.length;h++){var y=o[h];for(p=0;p<y.length;p++)y[p].dispose(),y[p]=null}o.length=n},i.prototype.$_refreshSpans=function(t,e){for(var i=this._getFirstCell(t),o=this._getFirstCell(t)-i,r=this._getLastCell(t)-i,n=t.cellLayouts._dataCells.length,s=0;s<e;s++)for(var a=this._cells[s],l=a.length,h=o;h<=r;h++){var u=a[h],c=u.layout,d=c.parent,p=d&&d.vertical;if(u.spanned);else if(c.isProxy)u.clear(!1);else{var f=0,_=0,g=c.getDataSpan()-1;if(g>0){var y=0,m=c.vindex+1;if(p)for(;y++<g&&y<n;){if(!(b=d.getVisible(m++)))break;_+=b._dspan,this._cells[s+y][h].span()}else for(;y++<g&&h-o+y<l&&m<d.visibleCount;){var b;if(!(b=d.getVisible(m++)))break;f+=b._cspan,a[h+y].span()}}c.isNull&&u.clear(!0),u.set(c._cspan+f,c._dspan+_,!0)}}},i.prototype.$_refreshHeadTitle=function(t,e){for(var i=this._cells[0],o=e.children[0],r=0;o&&r<i.length;r++){var n=i[r].layout.source,s=o.children[r];s&&n&&(s[Rt.TextProp]=n.header.getDisplayText()||n.firstColumn.header.displayText)}},i.RENDERER_STYLE="rg-filter-renderer",i}(Rl),Bc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-filter-panel"},e.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype._getCellCount=function(t){return t.fixedCellCount},e.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},e}(Vc),jc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-filter-panel"},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype._getCellCount=function(t){return t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},e}(Vc),Hc=function(t){function e(e){return t.call(this,e,"gridFilterCellView")||this}return o(e,t),e}(Vh),Gc=function(t){function e(e){var i=t.call(this,e,null,"gridFilterView")||this;return i._domCssSelector="rg-filter",i}return o(e,t),e.prototype.getFilterModel=function(t){return this._getCellModel(t)},e.prototype._createCellElement=function(t){return new Hc(t)},e.prototype._sectionCell=function(t){return t.getFilterCell()},e.prototype._getSectionStyleName=function(t){return this.$_getCellSelector()+" "+t.getFilterStyleName()},e.prototype._getHeadTrText=function(t){return t.getCellType()+" filter"},e.prototype._getSectionText=function(t){return""},e.prototype._doPrepareTableRow=function(e,i,o,r){t.prototype._doPrepareTableRow.call(this,e,i,o,r);var n=e.grid;Rt.setClassName(r,n.filterPanel.styleName)},e.prototype.$_getCellSelector=function(){return"rg-filter-cell"},e}(Bh),Wc=function(){function t(t,e){this._containerDom=t,this._commandType=e,this.$_createDom()}return t.prototype.getCommandType=function(){return this._commandType},t.prototype.$_getStyle=function(){return"commit"===this._commandType?"rg-editor-commit":"cancel"===this._commandType?"rg-editor-cancel":void 0},t.prototype.$_createDom=function(){var t=this._containerDom,e=St(t),i=this._dom=e.createElement("div");i.style.touchAction="none",this.$_createButton(),Rt.addChild(t,i)},t.prototype.$_createButton=function(){var t=St(this._containerDom),e=this._button=t.createElement("div");e.style.touchAction="none",e.style.pointerEvents="none",e.className=this.$_getStyle(),Rt.addChild(this._dom,e)},t}(),Uc=function(t){function e(e){var i=t.call(this)||this;return i._owner=e,i._commands=[],i.$_clickHandler=i._clickHandler.bind(i),i}return o(e,t),Object.defineProperty(e.prototype,"showing",{get:function(){return this._showing},enumerable:!1,configurable:!0}),e.prototype.setContainerDom=function(t){this._containerDom=t},e.prototype.show=function(t){var i=St(this._containerDom);this._dom||((this._dom=i.createElement("div")).className=e.STYLE);if(!this._commands||0==this._commands.length){var o=new Wc(this._dom,"commit");this._commands.push(o),o=new Wc(this._dom,"cancel"),this._commands.push(o)}Rt.addChild(this._containerDom,this._dom),this._dom.addEventListener("click",this.$_clickHandler),this._showing=!0,this.$_setPosition(t)},e.prototype.hide=function(){this._showing=!1,this._dom.removeEventListener("click",this.$_clickHandler),Rt.detach(this._dom)},e.prototype.setPosition=function(t){this._dom&&this.$_setPosition(t)},e.prototype._clickHandler=function(t){t.target!==this._dom&&this.$_doClick(t)},e.prototype.$_doClick=function(t){var e=this.$_findCommand(t.target);if(e)switch(e.getCommandType()){case"commit":this._owner.commitCommand(t);break;case"cancel":this._owner.cancelCommand(t)}},e.prototype.$_findCommand=function(t){for(var e=0;e<this._commands.length;e++)if(this._commands[e]._dom===t)return this._commands[e];return null},e.prototype.$_setPosition=function(t){var e=this._dom.style,i=Rt.getSize(this._dom),o=t.right-i.width,r=t.top-i.height;e.left=o+"px",e.top=r+"px"},e.STYLE="rg-mobile-command-view",e}(Lt),Yc=function(t){function e(e){var i=t.call(this,e)||this;return i._commandView=new Uc(i),i._commandView.setContainerDom(e.container._containerDom),i}return o(e,t),e.prototype.commitCommand=function(t){this.commitEditor(!0,!1,!0,!1)},e.prototype.cancelCommand=function(t){this.cancelEditor(!0)},e.prototype._showCommand=function(t){this._commandView&&this._commandView.show(t)},e.prototype._resetPosition=function(t){this._commandView&&this._commandView.setPosition(t)},e.prototype._hideCommand=function(){this._commandView&&this._commandView.showing&&this._commandView.hide()},e.prototype._editorActivated=function(e){t.prototype._editorActivated.call(this,e);var i=this._grid;if(this._grid.mobileOptions.showEditCommander&&i.$_canShowEditCommand(this._editIndex)){var o=this._grid.getEditCellBounds(this._editor,this._editIndex);this._showCommand(o)}},e.prototype._internalHideEditor=function(e){t.prototype._internalHideEditor.call(this,e),this._hideCommand()},e.prototype._resetBounds=function(){t.prototype._resetBounds.call(this);var e=this._grid.getEditCellBounds(this._editor,this._editIndex);this._resetPosition(e)},e}(yu),zc=function(i){function r(t,o,r){var n=i.call(this,t.doc,!0)||this;n._debugging=!1,n._scrollBarWidth=16,n._scrollBarHeight=16,n._loading=!0,n._dataLoad=!1,n._gridObjects=[],n._tableViews={},n._columnMap={},n._columnLayouts=new cs,n._columnLock=0,n._columnsDirty=!1,n._columnSummaryRuntime=new As,n._columnValidationRuntime=new Nn,n._rowValidationRuntime=new Ln,n._layouted=!1,n._resetting=!1,n._needMerge=!1,n._leftPos=0,n._horzScrolled=!1,n._topIndex=0,n._prevTop=0,n._prevLeftPos=0,n._prevLast=-1,n._updateLock=!1,n._hoveredY=-1,n._focusing=!1,n._dataChanged=!1,n._validations=new Fn(!1),n.$_editFocused=!1,n.$_showFocusCell=!1,n._itemCheckChanged=!1,n._cellUpdateEventLock=!1,n._currentRowId=-1,n._currentRow=-1,n._scrolledTime=0,n._cellLayoutDirty=!1,n._needRefresh=!0,n._needPosition=!0,n._keepLeftPos=!1,n._cellGhostStyle={};var s=t.doc,a=function(){var t,i=null;try{if(t=e.code||realGrid2Lic,!(i=new bc.h(t,"dkdl"))||!i.lic||!Object.keys(i.lic).length)throw new Error}catch(e){return{type:1,code:t}}if(!i.is("name",e.name))return{type:2,code:t};var o=null===window||void 0===window?void 0:window.location,r=o?o.hostname:"",n=o?o.pathname.toLowerCase():"",s=Cc,a=i.is("lic","Enterprise"),l=i.is("lic","Evaluation"),h=i.is("lic","Limited"),u=i.is("lic","Subscription"),c=s(i.lic.server,r,n),d=!a&&s(i.lic.server,"*",null);return a||l||h||u?c||d?!a&&i.expired("expire",1)?d||u?{type:32,code:t}:{type:16,code:t}:(e.license=i.lic.lic,e.expire=i.lic.expire,{type:0,code:t}):{type:8,code:t}:{type:64,code:t}}();switch(t[Pt.decode("X2xrQ2hlY2s=")]=a.type,a.type){case 0:case 32:break;default:throw t.dispose(),new vc(a.type,a.code)}n._container=t,n._accessibility=o,n._addGridObject(n._header=new Hs(n)),n._addGridObject(n._footers=new Ks(n)),n._addGridObject(n._headerSummaries=new nc(n)),n._addGridObject(n._rowIndicator=new ea(n)),n._addGridObject(n._stateBar=new oa(n)),n._addGridObject(n._checkBar=new na(n)),n._addGridObject(n._body=new yl(n)),n._addGridObject(n._filterPanel=new $c(n)),n.addChild(n._rootElement=new ga(s,"grid root view")),n._debugView=new Pc(n),32===a.type&&n.addChild(n._watermarkLayer=new Lc(n)),n.addChild(n._emptyView=new El(s)),n.addElement(n._contentPane=new Xh(s,"contentPane")),n.addElement(n._rightContentPane=new tu(s,"rightContentPane")),n.addElement(n._fixedContentPane=new Jh(s,"fixedContentPane")),n._doContentPanesCreated(),n.addElement(n._leftContentPane=new Kh(s,"leftContentPane")),n._sideContentPane=n._createSidePane(),n._sideContentPane&&n.addElement(n._sideContentPane),n.addElement(n._topContentPane=new qh(s,"topContentPane")),n._filterPanelView=new Vc(s,n._filterPanel),n._fixedFilterView=new Bc(s,n._filterPanel),n._rightFilterView=new jc(s,n._filterPanel),n._bodyView=n._createBodyView(n._body),n._fixedBodyView=n._createFixedBodyView(n._body),n._rightBodyView=n._createRightBodyView(n._body),n._headerView=new Kl(s,n._header),n._fixedHeaderView=new Xl(s,n._header),n._rightHeaderView=new Zl(s,n._header),n._headerSummaryView=new sc(s,n._headerSummaries),n._fixedHeaderSummaryView=new ac(s,n._headerSummaries),n._rightHeaderSummaryView=new lc(s,n._headerSummaries),n._footerView=new eh(s,n.footers),n._fixedFooterView=new ih(s,n.footers),n._rightFooterView=new oh(s,n.footers),n._rowBarContainer=new Cu(n),n._headView=new Ah(n),n._sumView=new uc(s),n._footView=new Hh(s),n._filterView=new Gc(s);for(var l=[n._rowBarContainer,n._bodyView,n._fixedBodyView,n._rightBodyView,n._headerView,n._fixedHeaderView,n._rightHeaderView,n._headerSummaryView,n._fixedHeaderSummaryView,n._rightHeaderSummaryView,n._footerView,n._fixedFooterView,n._rightFooterView,n._headView,n._sumView,n._footView,n._filterView,n._filterPanelView,n._fixedFilterView,n._rightFilterView],h=l.length-1;h>=0;h--){var u=l[h];n._tableViews[u.$_hash]=u}return n._contentPane.addChild(n._headerView),n._contentPane.addChild(n._headerSummaryView),n._contentPane.addChild(n._filterPanelView),n._contentPane.addChild(n._bodyView),n._contentPane.addChild(n._footerView),n._fixedContentPane.addChild(n._fixedBodyView),n._fixedContentPane.addChild(n._fixedFooterView),n._fixedContentPane.addChild(n._fixedHeaderSummaryView),n._fixedContentPane.addChild(n._fixedHeaderView),n._fixedContentPane.addChild(n._fixedFilterView),n._rightContentPane.addChild(n._rightBodyView),n._rightContentPane.addChild(n._rightFooterView),n._rightContentPane.addChild(n._rightHeaderSummaryView),n._rightContentPane.addChild(n._rightHeaderView),n._rightContentPane.addChild(n._rightFilterView),n._leftContentPane.addChild(n._rowBarContainer),n._leftContentPane.addChild(n._footView),n._leftContentPane.addChild(n._sumView),n._leftContentPane.addChild(n._headView),n._leftContentPane.addChild(n._filterView),n._doCreateOtherElements(),n.addElement(n._selectionLayer=n._createSelectionLayer()),n.addElement(n._feedbackLayer=new ga(s,"feedbackLayer")),n.addFeedbackElement(n._rowHoverView=new Wu(s)),n.addElement(n._hscrollBar=new Oh(t,!1)),n.addElement(n._vscrollBar=new Oh(t,!0)),n.addElement(n._scrollEdge=new xh(s)),n._hscrollBar.addListener(n),n._vscrollBar.addListener(n),n._selections=new Ia(n),n._selections.addListener(n),n._fixedOptions=new bl(n),n._displayOptions=new vl(n),n._formatOptions=new Gh(n),n._editOptions=new eu(n),n._editorOptions=new ou(n),n._copyOptions=new ru(n),n._pasteOptions=new nu(n),n._dataDropOptions=new ah(n),n._sortingOptions=new zh(n),n._filteringOptions=new cc(n),n._waiOptions=new Fc(n),n._mobileOptions=new su(n),n._initStyles(),n._columns=new Bs(n),n._activeCellLayout=n._defaultCellLayout=new Ps(n),n._defaultCellLayout.addListener(n),n._delegate=n._createDelegate(),n._layoutManager=n._createLayoutManager(),n._editController=n._createEditController(),n._validationManager=new $n(n),n._lookupProvider=new Zu,n._lookupProvider.addListener(n),n._clipboardManager=new gl(n),n._progressManager=new Dc(n._container._containerDom),n._popupMenuManager=new ic(n._container),n._popupMenuManager.addListener(n),n._tooltipManager=new yc(n),n._filterSelector=new _c(n._container,n._filteringOptions,n),n._toastManager=new Yh(n),n._currentIndex=new Ds(n),n._editorIndex=new Ds(n),n._focusedIndex=new Ds(n),o&&(n._waiOptions.assignFrom(r),n.checkBar.useImages=!0),n}return o(r,i),r.createColumn=function(t){if(t){var e=t.type;return"series"==e?new hs(t):"literal"===e?new us(t):new ls(t)}return null},r.prototype._doDispose=function(){return this.clearListener(),this._container=this._container.dispose(),this._gridObjects.length=0,this._header=this._header.dispose(),this._headerSummaries=this._headerSummaries.dispose(),this._footers=this._footers.dispose(),this._rowIndicator=this._rowIndicator.dispose(),this._stateBar=this._stateBar.dispose(),this._checkBar=this._checkBar.dispose(),this._body=this._body.dispose(),this._filterPanel=this._filterPanel.dispose(),this._rootElement=this._rootElement.dispose(),this._contentPane=this._contentPane.dispose(),this._rightContentPane=this._rightContentPane.dispose(),this._fixedContentPane=this._fixedContentPane.dispose(),this._leftContentPane=this._leftContentPane.dispose(),this._sideContentPane=this._sideContentPane&&this._sideContentPane.dispose(),this._topContentPane=this._topContentPane&&this._topContentPane.dispose(),this._bodyView=this._bodyView.dispose(),this._fixedBodyView=this._fixedBodyView.dispose(),this._rightBodyView=this._rightBodyView.dispose(),this._headerView=this._headerView.dispose(),this._fixedHeaderView=this._fixedHeaderView.dispose(),this._rightHeaderView=this._rightHeaderView.dispose(),this._headerSummaryView=this._headerSummaryView.dispose(),this._fixedHeaderSummaryView=this._fixedHeaderSummaryView.dispose(),this._rightHeaderSummaryView=this._rightHeaderSummaryView.dispose(),this._footerView=this._footerView.dispose(),this._fixedFooterView=this._fixedFooterView.dispose(),this._rightFooterView=this._rightFooterView.dispose(),this._rowBarContainer=this._rowBarContainer.dispose(),this._headView=this._headView.dispose(),this._sumView=this._sumView.dispose(),this._footView=this._footView.dispose(),this._filterPanelView=this._filterPanelView.dispose(),this._fixedFilterView=this._fixedFilterView.dispose(),this._rightFilterView=this._rightFilterView.dispose(),this._selectionLayer=this._selectionLayer.dispose(),this._feedbackLayer=this._feedbackLayer.dispose(),this._hscrollBar=this._hscrollBar.dispose(),this._vscrollBar=this._vscrollBar.dispose(),this._scrollEdge=this._scrollEdge.dispose(),this._selections=this._selections.dispose(),this._fixedOptions=this._fixedOptions.dispose(),this._displayOptions=this._displayOptions.dispose(),this._formatOptions=this._formatOptions.dispose(),this._editOptions=this._editOptions.dispose(),this._editorOptions=this._editorOptions.dispose(),this._copyOptions=this._copyOptions.dispose(),this._pasteOptions=this._pasteOptions.dispose(),this._sortingOptions=this._sortingOptions.dispose(),this._filteringOptions=this._filteringOptions.dispose(),this._mobileOptions=this._mobileOptions&&this._mobileOptions.dispose(),this._columns=this._columns.dispose(),this._activeCellLayout&&this._activeCellLayout.dispose(),this._activeCellLayout=null,this._defaultCellLayout=this._defaultCellLayout.dispose(),this._delegate=this._delegate.dispose(),this._layoutManager=this._layoutManager.dispose(),this._editController=this._editController&&this._editController.dispose(),this._filterSelector=this._filterSelector.dispose(),this._toastManager=this._toastManager.dispose(),this._tableViews=null,this._lookupProvider=this._lookupProvider&&this._lookupProvider.dispose(),this._columnSummaryRuntime=this._columnSummaryRuntime&&this._columnSummaryRuntime.dispose(),this._popupMenuManager=this._popupMenuManager&&this._popupMenuManager.dispose(),this._tooltipManager=this._tooltipManager&&this._tooltipManager.dispose(),this._focusedIndex=this._focusedIndex.dispose(),this._scrollTipView=this._scrollTipView&&this._scrollTipView.dispose(),this._waiOptions=this._waiOptions&&this._waiOptions.dispose(),this._watermarkLayer=this._watermarkLayer&&this._watermarkLayer.dispose(),Ds.clearTemp(),this._cellGhostStyle={},i.prototype._doDispose.call(this)},Object.defineProperty(r.prototype,"debugging",{get:function(){return this._debugging},set:function(t){t!=this._debugging&&(this._debugging=t,t?(this.addChild(this._debugView),this.invalidateLayout()):this.removeChild(this._debugView))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"activeTool",{get:function(){return this.container.activeTool},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scrollBarWidth",{get:function(){return this._scrollBarWidth},set:function(t){(t=Math.max(0,t))!=this._scrollBarWidth&&(this._scrollBarWidth=t,this.invalidateLayout(),this.invalidatePosition())},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scrollBarHeight",{get:function(){return this._scrollBarHeight},set:function(t){(t=Math.max(0,t))!=this._scrollBarHeight&&(this._scrollBarHeight=t,this.invalidateLayout(),this.invalidatePosition())},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"body",{get:function(){return this._body},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"header",{get:function(){return this._header},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"footers",{get:function(){return this._footers},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"footer",{get:function(){return this._footers.get(0)},enumerable:!1,configurable:!0}),r.prototype.setFooters=function(t){this._footers.assignFrom(t)},Object.defineProperty(r.prototype,"headerSummaries",{get:function(){return this._headerSummaries},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"headerSummary",{get:function(){return this._headerSummaries.get(0)},enumerable:!1,configurable:!0}),r.prototype.setHeaderSummaries=function(t){this._headerSummaries.assignFrom(t)},Object.defineProperty(r.prototype,"rowIndicator",{get:function(){return this._rowIndicator},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"checkBar",{get:function(){return this._checkBar},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stateBar",{get:function(){return this._stateBar},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"filterPanel",{get:function(){return this._filterPanel},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"activeCellLayout",{get:function(){return this._activeCellLayout},enumerable:!1,configurable:!0}),r.prototype._cellLayoutChanged=function(){this._cellLayoutDirty=!0},Object.defineProperty(r.prototype,"layoutCount",{get:function(){return this._activeCellLayout.visibleCount},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"visibleLayoutCount",{get:function(){return this._activeCellLayout.visibleCount},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"columnCount",{get:function(){return this._columns.count},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dataSource",{get:function(){return this._items?this._items.dataSource:null},set:function(t){this.dataSource;this._items&&(this._items.dataSource=t),this.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"itemSource",{get:function(){return this._items},set:function(t){this._items&&this._items.removeListener(this),this._items=t,this._items&&(this._items.addListener(this),this.fixedOptions&&this.fixedOptions._dirty&&this.fixedOptions.$_resetItemSource())},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxItemCount",{get:function(){return this.itemSource.maxItemCount},set:function(t){this.itemSource.maxItemCount=Math.max(0,t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"itemCount",{get:function(){return this._items?this._items.itemCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rowCount",{get:function(){return this._items?this._items.rowCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"visibleRowCount",{get:function(){return this._items?this._items.rowCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dataCount",{get:function(){var t=this.dataSource;return t?t.rowCount:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"columnSummaryRuntime",{get:function(){return this._columnSummaryRuntime},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"columnValidationRuntime",{get:function(){return this._columnValidationRuntime},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rowValidationRuntime",{get:function(){return this._rowValidationRuntime},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"focusedIndex",{get:function(){return this._focusedIndex},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"focusedLayout",{get:function(){return this._focusedIndex&&this._focusedIndex.layout},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"focusedColumn",{get:function(){return this._focusedIndex&&this._focusedIndex.layout&&this._focusedIndex.layout.firstColumn},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"focusedRow",{get:function(){return this._focusedIndex?this._focusedIndex.itemIndex:-1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"focusedItem",{get:function(){return this._focusedIndex&&this._focusedIndex.item},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rowBarContainer",{get:function(){return this._rowBarContainer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"topContentPane",{get:function(){return this._topContentPane},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sideContentPane",{get:function(){return this._sideContentPane},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leftContentPane",{get:function(){return this._leftContentPane},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"contentPane",{get:function(){return this._contentPane},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fixedContentPane",{get:function(){return this._fixedContentPane},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rightContentPane",{get:function(){return this._rightContentPane},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bodyView",{get:function(){return this._bodyView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fixedBodyView",{get:function(){return this._fixedBodyView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rightBodyView",{get:function(){return this._rightBodyView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"headerView",{get:function(){return this._headerView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fixedHeaderView",{get:function(){return this._fixedHeaderView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rightHeaderView",{get:function(){return this._rightHeaderView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"headerSummaryView",{get:function(){return this._headerSummaryView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fixedHeaderSummaryView",{get:function(){return this._fixedHeaderSummaryView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rightHeaderSummaryView",{get:function(){return this._rightHeaderSummaryView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"footerView",{get:function(){return this._footerView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fixedFooterView",{get:function(){return this._fixedFooterView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rightFooterView",{get:function(){return this._rightFooterView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"filterPanelView",{get:function(){return this._filterPanelView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fixedFilterView",{get:function(){return this._fixedFilterView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rightFilterView",{get:function(){return this._rightFilterView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"headView",{get:function(){return this._headView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sumView",{get:function(){return this._sumView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"footView",{get:function(){return this._footView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"filterView",{get:function(){return this._filterView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fixedOptions",{get:function(){return this._fixedOptions},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"displayOptions",{get:function(){return this._displayOptions},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"formatOptions",{get:function(){return this._formatOptions},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"editOptions",{get:function(){return this._editOptions},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"editorOptions",{get:function(){return this._editorOptions},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"copyOptions",{get:function(){return this._copyOptions},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pasteOptions",{get:function(){return this._pasteOptions},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dataDropOptions",{get:function(){return this._dataDropOptions},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sortingOptions",{get:function(){return this._sortingOptions},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"filteringOptions",{get:function(){return this._filteringOptions},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mobileOptions",{get:function(){return this._mobileOptions},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"WaiOptions",{get:function(){return this._waiOptions},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"accessibility",{get:function(){return this._accessibility},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"delegate",{get:function(){return this._delegate},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"heightMeasurer",{get:function(){return this.container.heightMeasurer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"layoutManager",{get:function(){return this._layoutManager},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"selections",{get:function(){return this._selections},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"selectionLayer",{get:function(){return this._selectionLayer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"editController",{get:function(){return this._editController},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"validations",{get:function(){return this._validations},set:function(t){this._validations.assignFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"validationManager",{get:function(){return this._validationManager},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"popupMenuManager",{get:function(){return this._popupMenuManager},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tooltipManager",{get:function(){return this._tooltipManager},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"toastManager",{get:function(){return this._toastManager},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"topIndex",{get:function(){return this._topIndex},set:function(t){if((t=Math.max(0,Math.min(t,this.itemCount-this.layoutManager.fixedItemCount-1,this._vscrollBar?this._vscrollBar.maxPosition:0)))!=this._topIndex){var e=this.topIndexChanging(this._topIndex,t-this._topIndex,!1,!1);null==e||isNaN(e)||(t=this._topIndex+e,t=Math.min(this.itemCount-1,Math.max(0,t))),this._topIndex!==t&&(this._needRefresh=!0),this._topIndex=t,this.refreshView(),Rt.isMobile()&&this.isEditing()&&!this.isItemEditing()?this.closePopups(!1):this.closePopups()}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"topItem",{get:function(){return this._topIndex+this.layoutManager.fixedItemCount},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leftPos",{get:function(){return this._leftPos},set:function(e){(e=Math.max(0,Math.min(e,this._hscrollBar?this._hscrollBar._maxPosition:0)))!=this._leftPos&&(this._leftPos=e,this._horzScrolled=!0,this._displayOptions.refreshMode==t.RefreshMode.VISIBLE_ONLY||this.isRecycleMode()&&this._needRefresh?this.refreshView():this.invalidate(),this.closePopups()),!this.isRecycleMode()&&this._debugging&&this._debugView.layout()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leftCell",{get:function(){return this._layoutManager.getCellIndex(this.leftPos)},set:function(t){this.leftPos=this._layoutManager.getCellPoint(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leftLayout",{get:function(){return this._layoutManager.firstLayout},set:function(t){var e=this._layoutManager;t=Math.max(e.fixedLayoutCount,Math.min(t,e.layoutCount-1)),this.leftPos=e.getLayoutBounds(t).x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lookupProvider",{get:function(){return this._lookupProvider},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hoveredCell",{get:function(){return this._hoveredCell},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"empty",{get:function(){return 0==this.itemCount||0==this.visibleLayoutCount},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sorted",{get:function(){return this.itemSource.sorted},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"spanned",{get:function(){return this._bodyView.visible&&this._bodyView.spanned||this._fixedBodyView.visible&&this._fixedBodyView.spanned||this._rightBodyView.visible&&this._rightBodyView.spanned},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isSwiping",{get:function(){var t=this.activeTool,e=t.dragTracker;return e instanceof Eu&&e.dragging||t._touchMoving||this._keepLeftPos},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"cellGhostStyle",{get:function(){return this._cellGhostStyle=this._cellGhostStyle||{}},enumerable:!1,configurable:!0}),r.prototype.addFeedbackElement=function(t){if(t&&!this._feedbackLayer.contains(t))return this._feedbackLayer.addChild(t),!0},r.prototype.removeFeedbackElement=function(t){var e=this._feedbackLayer.indexOf(t);return e>=0&&(this._feedbackLayer.removeChildAt(e),!0)},r.prototype.setEventFrom=function(t){this._eventFrom=t},r.prototype.getVisibleLayout=function(t){return this._activeCellLayout.getVisible(t)},r.prototype.getColumn=function(t){return this._columns.getColumn(t)},r.prototype.setColumns=function(t){var e=!1;this._columns.setColumns(t),this._columnMap={};for(var i=this._columns.count-1;i>=0;i--){var o=this._columns.getColumn(i);this._columnMap[o.$_hash]=o,o instanceof ls&&o.getActiveFilters(!0).length>0&&(e=!0)}this._columnsReset(),e&&this.dataSource&&this.applyFilters()},r.prototype.setCellLayout=function(t){this._beforeChangeLayout();var e,i=this.isValid(this.focusedIndex)&&this.focusedIndex.column,o=this.activeCellLayout;try{t?(e=new Rs(this).load(t)).addListener(this):e=this._defaultCellLayout,e.isDefault()&&this.setColumns(this._columns.columns),e.resetColumns(this._columns)}catch(t){throw e&&!e.isDefault()&&e.dispose(),o&&o.resetColumns(this._columns),t}o&&!o.isDefault()&&o.dispose(),this._activeCellLayout=e,this._cellLayoutDirty=!0,this.invalidateLayout(),e.$_refresh(this._columns,this.displayOptions.minCellWidth),e.invalidate(),i&&(this.focusedIndex.layout=e.layoutByColumn(i)||e.layoutByColumn(e.firstColumn),this.$_makeFocusedIndexVisible()),this.clearAddSelection(!0,!!i,!1),this.clearRowHeights(),this._populateMerges(),this.refreshView()},r.prototype._checkEditing=function(){if(this.itemSource instanceof Jo&&this.itemSource.isEditing())throw new Error("Item is editing")},r.prototype.addColumn=function(t,e){this._checkEditing();var i=this._columns.add(t,e);return i&&(this._columnMap[i.$_hash]=i,this._columnsReset(),i instanceof ls&&i.getActiveFilters(!0).length>0&&this.dataSource&&this.applyFilters()),i},r.prototype.removeColumn=function(t){return"string"==typeof t&&(t=this.columnByName(t)),!!t&&(this._checkEditing(),!!this._columns.remove(t)&&(delete this._columnMap[t.$_hash],this._columnsReset(),t instanceof ls&&t.getActiveFilters(!0).length>0&&this.dataSource&&this.applyFilters(),!0))},r.prototype.addLayout=function(t,e){return this.activeCellLayout.addLayout(t,e)},r.prototype.removeLayout=function(t){var e=this.focusedIndex,i=this.isValid(e);t=this.activeCellLayout.removeLayout(t),i&&t===e.layout&&(e.layout=this._activeCellLayout.first,e.normalize(this),!this._cellLayoutDirty&&this.clearAddSelection(!0))},r.prototype.restoreColumns=function(t){this._columns.restoreColumns(),this._columnsReset()},r.prototype.linearizeColumns=function(t){var e=this._activeCellLayout.collectColumns(!0,!0,!0);if(t=Rt.makeArray(t),e&&e.length>0){if(t&&t.length>0)for(var i=function(i){e.sort((function(e,o){var r=e[t[i]],n=o[t[i]];return r<n?1:r>n?-1:0}))},o=0;o<t.length;o++)i(o);var r=[];e.forEach((function(t){r.push(t.name)})),this.setCellLayout(r)}},r.prototype.registerColumnLayouts=function(t){this._columnLayouts.load(t)},r.prototype.findColumnLayout=function(t){return this._columnLayouts.find(t)},r.prototype.invalidateColumn=function(t){this._columnLock<=0&&this._resetColumnIndices(t),this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},r.prototype.invalidateColumns=function(){this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},r.prototype.beginUpdate=function(){this._updateLock=!0},r.prototype.endUpdate=function(t){(t||this._updateLock)&&(this._updateLock=!1,this.refreshView())},r.prototype.invalidate=function(){this._container&&this._container.invalidate(!1)},r.prototype.invalidateLayout=function(t){(t||!this._updateLock&&!this._loading)&&i.prototype.invalidateLayout.call(this)},r.prototype.invalidatePosition=function(){this._needPosition=!0},r.prototype.setNeedRefresh=function(t){this._needRefresh=!0,t&&i.prototype.invalidate.call(this,!1,!0)},r.prototype.invalidateCellLayouts=function(){this._updateLock||(this.clearRowHeights(),i.prototype.invalidateLayout.call(this),this._columnsDirty=!0)},r.prototype.refreshView=function(t,e){if(!this._loading){if(t){var i=this._container;this.setNeedRefresh(!0),i._layoutNeeded=!0,this._needPosition=!0,this._horzScrolled=this._horzScrolled||this._needRefresh,i._render(Date.now())}else e&&(this._needPosition=!0),this.invalidateLayout();this.topIndex=this._topIndex,this.leftPos=this._leftPos}},r.prototype.resetGrid=function(t){this._resetting=!0,t&&(this.topIndex=0,this.leftPos=0),this.refreshView()},r.prototype.getFirstCell=function(){if(this.itemCount>0){for(var t=0,e=0,i=this.itemCount;e<i;e++)if(this.getItem(e)instanceof Go){t=e;break}return new Ds(this,t>=0?t:0,this.getFirstColumn())}return null},r.prototype.$_setEditFocused=function(t,e){if(t!=this.$_editFocused){if(this.$_editFocused=t,t&&this.$_showFocusCell){var i=this.focusedIndex;!i||this.isValid(i)}this.$_showFocusCell=!1}t&&e&&"focusin"==e.type&&Rt.isAncestorOf(this._container._container,e.target,e)&&Fh.setActiveGrid(this.container.$_hash)},r.prototype.getItem=function(t){return this._items.getItem(t)},r.prototype.getItemIndexOfRow=function(t){return this._items.getIndexOfRow(t,!1)},r.prototype.getItemOfRow=function(t,e){return this._items.getItemOfRow(t,e)},r.prototype.getItemIndicesOfRows=function(t){return this._items.getIndicesOfRows(t,!1)},r.prototype.getRowOfItem=function(t){var e=this.getItem(t);return e?e.dataRow:-1},r.prototype.getItemOfModel=function(t){return null},r.prototype.getRowsOfItems=function(t,e){void 0===e&&(e=!1);for(var i=[],o=0,r=t;o<r.length;o++){var n=r[o],s=this.getItem(n),a=s?s.dataRow:-1;(e||a>=0)&&i.push(a)}return i},r.prototype.getIndicatorIndex=function(t,e){return e?this.itemCount-t.index-1:t.index},r.prototype.indicatorReverse=function(e){return e===t.IndicatorValue.REVERSE},r.prototype.getAllItems=function(){return this._items.getAllItems()},r.prototype.getImage=function(t){return null},r.prototype.getIndex=function(t,e){return void 0===t&&(t=-1),void 0===e&&(e=null),new Ds(this,t,e)},r.prototype.getDataCellIndex=function(t,e){var i=t.parentElement,o=this._tableViews[i.$_view],r=i.$_row,n=o.layoutByCell(t);return null!=e?e.set(r,n):Ds.temp(this,r,n)},Object.defineProperty(r.prototype,"handler",{get:function(){return this.$_handler},enumerable:!1,configurable:!0}),r.prototype.getDataColumns=function(t){return void 0===t&&(t=!0),this._activeCellLayout.getDataColumns(t)},r.prototype.optionsChanged=function(t){this._columnsDirty=!0,this.refreshView()},r.prototype.sortOptionsChanged=function(){this.itemSource&&this.itemSource.setSortingOptions(this._sortingOptions)},r.prototype.scrollRow=function(t){var e=this.topIndex;this.topIndex=e+t},r.prototype.showFilterSelector=function(t,e){if(t&&t.hasFilters){var i=this.getHeaderCellAt(t.layout);return this.selectColumnFilters(i,e)}},r.prototype.selectColumnFilters=function(t,e){if(this.isItemEditing(null)){if(!this.filteringOptions.commitBeforeFiltering)return;try{if(!this.commit(!1))return}catch(t){var i=this.focusedItem;if(i&&t instanceof Dn)return void((t=this._fireValidationFail(i.index,t.column,t))&&alert(this.editOptions.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()));throw t}}var o=t.layout.boundColumn;if(this._fireFiltering(o))return this.hideEditor(!0),this._filterSelector.show(o,t.cell,this.dataSource,e),!0},r.prototype.closeFilterSelector=function(){this._filterSelector.hide()},r.prototype.closePopups=function(t){void 0===t&&(t=!0),this._filterRunning||this._filterSelector.hide(),this._popupMenuManager.close(),this._tooltipManager.close(),this._tooltipManager.closeMessage(),t&&this._editController.closeList(!1)},r.prototype.layoutByDataCell=function(t){var e=t.parentElement;return this._tableViews[e.$_view].layoutByCell(t)},r.prototype.columnByHash=function(t){return this._columnMap[t]},r.prototype.columnByDataCell=function(t){return this._bodyView.columnByCell(t)||this._fixedBodyView.columnByCell(t)||this._rightBodyView.columnByCell(t)},r.prototype.columnByName=function(t){return this._columns.columnByName(t)},r.prototype.columnByField=function(t){return"string"==typeof t&&(t=this.dataSource.getFieldIndex(t)),this._columns.columnByField(t)},r.prototype.columnsByField=function(t){return"string"==typeof t&&(t=this.dataSource.getFieldIndex(t)),this._columns.columnsByField(t)},r.prototype.columnByTag=function(t){return this._columns.columnByTag(t)},r.prototype.columnsByTag=function(t){return this._columns.columnsByTag(t)},r.prototype.getHorzColumns=function(t,e){return this._activeCellLayout.getHorzColumns(t,e)},r.prototype.getGroupLevel=function(t){return-1},r.prototype.isGroupedColumn=function(t){return!1},r.prototype.blankGroupData=function(){return!1},r.prototype.layoutByColumn=function(t){return t instanceof ss||(t=this.columnByName(t)),t?this._activeCellLayout.layoutByColumn(t):null},r.prototype.layoutByName=function(t){return this._activeCellLayout.layoutByName(t)},r.prototype.setFocus=function(t,e){var i=this;void 0===e&&(e=!1);var o=function(t){i.$_showFocusCell=!0;var o=i.focusedIndex.clone();if(!e&&"keydown_tab"!==i._eventFrom||!o||i.isValid(o)||(o.set(Math.max(0===i.topIndex?0:i.topItem,0),i.getFirstColumn(),i),i.setFocusedIndex(o,!0,!0)),i._accessibility&&!i.isEditing())if(i.isValid(o))if(i.layoutManager.cellIsVisible(o)&&!i._resetTdFocus){var r=i.getBodyCellAt(o,!0);if(r&&t!==r.cell)i.getBodyViewAt(o).refreshTdFocused(o,!1)}else i._resetTdFocus=!0;else 0===i.itemCount&&i._emptyView.visible?(i.container._containerDom.setAttribute("tabindex","-1"),i._emptyView.setFocus()):i.container.setFocus();else Rt.isMobile()?i.container.setFocus():i._editController.setFocus(!0,t);Fh.getActiveGrid()!==i&&Fh.setActiveGrid(i.container.$_hash)};this.activeCellLayout.visibleCount>0?o.call(this,t):(this._setFocusTimer&&clearTimeout(this._setFocusTimer),this._setFocusTimer=setTimeout(function(){this._setFocusTimer=null,o.call(this,t)}.bind(this),10))},r.prototype.getFirstLayout=function(){return this._activeCellLayout.first},r.prototype.getFirstColumn=function(){return this._activeCellLayout.firstColumn},r.prototype.collectColumns=function(t,e,i){return this._activeCellLayout.collectColumns(t,e,i)},r.prototype.collectColumnNames=function(t,e){return this._activeCellLayout.collectColumnNames(t,e)},r.prototype.collectGroupNames=function(){return this._activeCellLayout.collectColumnNames(!1,!1,!0)},r.prototype.getChildColumnNames=function(t){return this._activeCellLayout.collectColumnNames(!1,!1,!1,t)},r.prototype.collectDataColumns=function(t,e){return this._activeCellLayout.collectDataColumns(t,e)},r.prototype.isValid=function(t,e){void 0===e&&(e=!1);var i=t&&t.grid===this&&t.itemIndex>=0&&t.itemIndex<this.itemCount&&t.layout&&t.layout.grid===this;return e&&(i=(i=i&&this.activeCellLayout.contains(t.layout))&&this._columns.columns.indexOf(t.layout.boundColumn)>=0),i},r.prototype.getSelection=function(t){return void 0===t&&(t=0),t>=0&&t<this._selections.count?this._selections.getItem(t):null},r.prototype.getSelections=function(){return this._selections.getItems()},r.prototype.clearAddSelection=function(t,e,i){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0);var o=this.focusedIndex;t&&this._selections.clear(i),e&&this.isValid(o,!0)&&this.itemCount>0&&this.visibleLayoutCount>0&&this._selections.add(o,o,this._displayOptions.selectionStyle,i)},r.prototype.deleteSelection=function(t){void 0===t&&(t=!1),this.$_deleteSelection(null,t)},r.prototype.$_deleteSelection=function(e,i){function o(t,e){try{if(e&&e.length>0){for(var i=[],o=0,r=e.length;o<r;o++){var n=t.getItem(e[o]);n&&n.dataRow>=0&&i.push(n.dataRow)}if(i.length>0&&!t._fireRowsDeleting(i))return!1}}catch(t){return alert(t),!1}return!0}function r(t,e){var r=t.recursiveDeleting();return!!e&&((i||!t.editOptions.confirmWhenDelete||confirm(t.editOptions.deleteRowsMessage)&&o(t,[e.index]))&&(t.cancel(),Vo(e.itemState)||t.itemSource.remove(e,r)),!0)}function n(t,e){for(var i=null,o=e.length;o--;){var r=t.getItem(e[o]),n=r.itemState;if(Ao(n)){i=r,Vo(n)&&e.splice(o,1);break}}var s=null;e.length>0&&(s=t.itemSource.getRemovableRows(e)),i&&t.cancel(),s&&t.itemSource.removeRows(s,t.recursiveDeleting())}void 0===i&&(i=!1);var s=this.editOptions,a=this.selections,l=this.itemSource;if((i||s.deletable)&&l instanceof Jo)if(!this.isItemEditing(null)||s.deletableWhenEdit){if(this.commitEditor(!0),r(this,e))return!0;if(!function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var i,o=-1;return(o=0==e.count?t.focusedIndex.itemIndex:e.getItem(0).getBounds().r1)>=0&&t.canDelete(i=t.getItem(o))&&r(t,i),!0}return!1}(this,a)){for(var h=a.count,u=[],c=0;c<h;c++){var d=a.getItem(c);if(Ca(d)||Rt.included(d.style,t.SelectionStyle.BLOCK,t.SelectionStyle.GROUP))for(var p=d.getBounds(),f=Math.min(p.r1,p.r2),_=Math.max(p.r1,p.r2),g=f;g<=_;g++){var y=this.getItem(g);(y.dataRow>=0||y.editable)&&u.push(g)}}u.sort((function(t,e){return t-e}));var m=-1;for(c=u.length;c--;)u[c]==m?u.splice(c,1):m=u[c];u.length>0&&this.canDelete(this.getItem(u[0]))&&(i||!s.confirmWhenDelete?o(this,u)&&(n(this,u),this.clearAddSelection(!0)):confirm(s.deleteRowsMessage)&&o(this,u)&&(n(this,u),this.clearAddSelection(!0)))}}else alert(s.commitEditingMessage)},r.prototype.revertSelection=function(e){void 0===e&&(e=!1);var i=this.editOptions,o=this.selections,r=this.itemSource;if((e||i.revertable)&&r instanceof Jo&&(this.commitEditor(!0),!function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var i=-1;if((i=0==e.count?t.focusedIndex.itemIndex:e.getItem(0).getBounds().r1)>=0)return t.itemSource.revert(i),!0}return!1}(this,o))){for(var n=o.count,s=[],a=0;a<n;a++){var l=o.getItem(a);if(Ca(l)||Rt.included(l.style,t.SelectionStyle.BLOCK,t.SelectionStyle.GROUP))for(var h=l.getBounds(),u=Math.min(h.r1,h.r2),c=Math.max(h.r1,h.r2),d=u;d<=c;d++){var p=this.getItem(d);(p.dataRow>=0||p.editable)&&s.push(d)}}s.sort((function(t,e){return t-e}));var f=-1;for(a=s.length;a--;)s[a]==f?s.splice(a,1):f=s[a];s.length>0&&r.revertAll(s)}},r.prototype.eraseSelection=function(e,i){var o=this.editOptions,r=this.copyOptions;var n=this.selections,s=this.itemSource;if(o.readOnly||!e&&!o.erasable||!o.updatable)return!1;if(!(s instanceof Jo))return!1;if(this.isEditing())return!1;if(function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var o=t.focusedIndex;return(t.getWritableAt(o,!1)||i&&r.cutReadOnlyCell)&&t.setCellValue(o,void 0),!0}return!1}(this,n))return!0;var a=n.count;if(a<1)return!1;if(this.isItemEditing()){var l=n.getItem(0)._getRows(),h=this.getEditItem();return l.fields.map((function(t){h.setData(t,void 0)})),!0}for(var u=[],c=0;c<a;c++){var d=n.getItem(c);(Ca(d)||Rt.included(d.style,t.SelectionStyle.BLOCK,t.SelectionStyle.GROUP))&&(u=u.concat(d.getItems()))}if(u.length>0){for(c=0;c<a;c++)n.getItem(c).setValues(void 0,i);return!0}},r.prototype.getSelectedItems=function(t){void 0===t&&(t=!1);var e=this._selections.getItem(0);return e&&e.getItems(t)},r.prototype.getSelectedItemIndices=function(t){void 0===t&&(t=!1);for(var e=this._selections,i=[],o=0;o<e.count;o++){e.getItem(o).getItemIndices(t).forEach((function(t){i.indexOf(t)<0&&i.push(t)}))}return i},r.prototype.getSelectedRows=function(){for(var t=this._selections,e=[],i=0;i<t.count;i++){t.getItem(i).getRows().forEach((function(t){e.indexOf(t)<0&&e.push(t)}))}return e},r.prototype.getSelectedLayouts=function(){for(var t=this.activeCellLayout.collectLayouts(!0),e=this._selections,i=[],o=0;o<t.length;o++)e.containsLayout(t[o])&&i.indexOf(t[o])<0&&i.push(t[o]);return i},r.prototype.setFocusedIndex=function(t,e,i,o){if(void 0===e&&(e=!0),void 0===i&&(i=!1),void 0===o&&(o=!0),!this._focusing&&!this.disposing){this._focusing=!0;try{return this.$_doSetFocusedIndex(t,e,i,!0,o)}finally{this._focusing=!1}}},r.prototype.resetFocusedIndex=function(){this.setFocusedIndex(this._focusedIndex)},r.prototype.clearFocusedIndex=function(t){if(void 0===t&&(t=!1),!this._focusing&&!this.disposing){this._focusing=!0;try{var e=void 0;t&&this.focusedRow>=this.itemCount&&((e=this.focusedIndex.clone()).itemIndex=Math.max(-1,this.itemCount-1));var i=t;this.$_doSetFocusedIndex(e,!0,!1,!1,i)}finally{this._focusing=!1}}},r.prototype.getTableCell=function(t){if(!t)return null;for(var e=t,i=It(e);e&&!(e instanceof i.HTMLTableCellElement);)e=e.parentElement;if(e instanceof i.HTMLTableCellElement&&e.parentElement){var o=e.parentElement[g];if(o)return e;for(e=e.parentElement;e;){if(e instanceof i.HTMLTableCellElement&&(o=e.parentElement[g]))return e;e=e.parentElement}}return null},r.prototype.getTableView=function(t){return this._tableViews[t.parentElement[g]]},r.prototype.getBodyViewAt=function(t){return this._layoutManager.getBodyView(t)},r.prototype.getBodyView=function(t){return this.getTableView(t)},r.prototype.getRowView=function(t,e){return t.getRowView(e)},r.prototype.getHeaderView=function(t){return this.getTableView(t)},r.prototype.getFooterView=function(t){return this.getTableView(t)},r.prototype.getSummaryView=function(t){return this.getTableView(t)},r.prototype.getFilterView=function(t){return this.getTableView(t)},r.prototype.getCellType=function(e){if(e){var i=e.parentElement;if(-99===i[y])return t.GridCellType.FIXED_BAR;var o=this._tableViews[i[g]];if(!(o instanceof Ul))return o instanceof Cu?o.getCellType(e):o instanceof Kl?t.GridCellType.HEADER:o instanceof eh?t.GridCellType.FOOTER:o instanceof sc?t.GridCellType.SUMMARY:o instanceof Vc?t.GridCellType.INLINE_FILTER:o instanceof Ah?t.GridCellType.HEAD:o instanceof Hh?t.GridCellType.FOOT:o instanceof uc?t.GridCellType.SUM:o instanceof Gc?t.GridCellType.FILTER:this._getCellTypeOf(o);var r=o.bodyCellByCell(e);if(r)return!(r.item instanceof Yo)||r.dataColumn&&r.dataColumn.mergeGrouped?t.GridCellType.DATA:t.GridCellType.GROUP_FOOTER}},r.prototype._getCellTypeOf=function(t){},r.prototype.getBodyCellAt=function(t,e){var i=this._layoutManager,o=this._bodyView.visible&&this._bodyView.getCellAt(i,t)||this._fixedBodyView.visible&&this._fixedBodyView.getCellAt(i,t)||this._rightBodyView.visible&&this._rightBodyView.getCellAt(i,t);return o&&e&&o.merged&&o.head?o.head:o},r.prototype.getHeaderCellAt=function(t){return this._headerView.visible&&this._headerView.tableCellByLayout(t)||this._fixedHeaderView.visible&&this._fixedHeaderView.tableCellByLayout(t)||this._rightHeaderView.visible&&this._rightHeaderView.tableCellByLayout(t)},r.prototype.getSummaryCellsAt=function(t,e){for(var i=0;i<e.length;i++){var o=e[i],r=o.visible&&o.tableCellsByLayout(t);if(r)return r}},r.prototype.getFooterCellsAt=function(t){return this.getSummaryCellsAt(t,[this._footerView,this._fixedFooterView,this._rightFooterView])},r.prototype.getHeaderSummaryCellsAt=function(t){return this.getSummaryCellsAt(t,[this._headerSummaryView,this._fixedHeaderSummaryView,this._rightHeaderSummaryView])},r.prototype.getBodyCellbyCell=function(t){return this.getBodyCellAt(this.cellToIndex(t),!1)},r.prototype.cellToIndex=function(t){var e=Ds.temp(this,-1,null);if((t=this.getCellViewOf(t))&&t instanceof It(t).HTMLTableCellElement){var i=this.getBodyView(t);i&&i instanceof Ul&&(e.layout=i.layoutByCell(t),e.itemIndex=t.parentElement[y])}return e},r.prototype.cellToContainer=function(t,e){void 0===e&&(e=null);var i=this.getTableView(t);e=i.getCellPoint(t,e);var o=i.boundsByContainer(ot.Temp.set(e.x,e.y,0,0));return e.set(o.x,o.y),e},r.prototype.pointToIndex=function(t,e,i,o){var r;return o?this._layoutManager.mouseToIndex(this.getCellViewOf(t),e,i,r=Ds.temp(this,-1,null)):r=this._layoutManager.mouseToIndex2(e,i,!0),r},r.prototype.mouseToIndex=function(t,e,i){if(i){var o=this.boundsByScreen();t-=o.x,e-=o.y}return this._layoutManager.mouseToIndex2(t,e,!1)},r.prototype.getCellRectAt=function(t,e,i){var o=this.getBodyViewAt(e);if(o){var r=o.getCellAt(t,e);return r&&o.getCellRect(t,r,i)}},r.prototype.getEditCellBounds=function(t,e){var i=this.layoutManager,o=i.getBodyView(e),r=o.getCellAt(i,e);if(r){var n=this.canMergeEditing(r),s=o.getCellRectAt(i,e,n);return s=o.boundsByContainer(s),!e.colFixed&&s.width>i.nonFixedBounds.width&&(s.width=i.nonFixedBounds.width),s}return Rt.$_INVISIBLE_EDIT_BOUNDS.clone()},r.prototype.getEditBounds=function(t,e){var i=e.item;if(!i)return null;var o=this.layoutManager,r=o.fixedItemCount;if(r>0&&i.index>=r&&i.index-r<o.topIndex)return Rt.$_INVISIBLE_EDIT_BOUNDS.clone();var n=o.getBodyView(e),s=n.getCellAt(o,e);if(s){s=s.merged?s.head:s;var a=n.getCellRectAt(o,e,!1);return(a=n.boundsByContainer(a)).width-=(t.native?0:s.$_editWidth)+s.$_buttonWidth+s.$_errorWidth,a}return Rt.$_INVISIBLE_EDIT_BOUNDS.clone()},r.prototype.getCellViewOf=function(t){for(var e=It(t);t;){if(t instanceof e.HTMLTableCellElement)return t;t=t.parentElement}return null},r.prototype.getFocusedCellView=function(t){var e=t.item;if(!e)return null;var i=this.layoutManager,o=i.fixedItemCount;if(o>0&&e.index>=o&&e.index-o<i.topIndex)return null;var r=e.merged,n=t.colFixed,s=t.rightFixed;return e.isData||r?(s?this._rightBodyView:n?this._fixedBodyView:this._bodyView).getCellView(i,t):null},r.prototype.isFocusedCell=function(t){return Ds.areEquals(t,this._focusedIndex)},r.prototype.isFocusedRow=function(t){return this._focusedIndex.itemIndex==t},r.prototype.isFocusedColumn=function(t){return this._focusedIndex.column===t},r.prototype.fitSyncHeight=function(){return this._layoutManager.fitSyncHeight()},r.prototype.pasteFromClipboard=function(t,e){var i=this.focusedIndex.clone(),o=this.pasteOptions;if(i.normalize(this),this.isValid(i)&&o.enabled&&this._firePaste(i,e))try{o.singleMode?this._clipboardManager.pasteCellFromClipboard(i,t):(this._clipboardManager.pasteFromClipboard(i,t),i.item&&Ao(i.item.itemState)&&this.refreshView()),this._firePasted()}catch(t){throw t instanceof Dn&&(t=this._fireValidationFail(this._clipboardManager.appendingIndex.itemIndex,t.column,t))&&alert(this._editOptions.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),t}},r.prototype.copyToClipboard=function(e,i,o){void 0===o&&(o=!1);var r,n,s=!1,a=this.focusedIndex,l=this.selections,h=e&&Rt.included(e.type,"copy","cut");if(h&&e.preventDefault(),this.isValid(a,!0)||!(l.count<1)||o){if(o||this.copyOptions.enabled)if(o||(r=(s=this.copyOptions.singleMode||0==l.count||l.single)?new Sa(l,t.SelectionStyle.BLOCK,a,a):l.getItems(),o=this._fireCopy(r,e)),o){var u=void 0,c=void 0;if(!i&&Array.isArray(r)){var d=r.length>1,p=r.length>1,f=!0;if(r.length>1&&r.forEach((function(t){f=f&&(t instanceof Ea||t instanceof Oa),d=d&&t instanceof Ea,p=p&&t instanceof Oa})),!f)return alert(this.copyOptions.multiSelectionCopyFailText),null;u=d?this.getSelectedItemIndices(!1):null,c=p?this.getSelectedLayouts():null}i=i||(Array.isArray(r)?r[0].getBounds():r.getBounds()),n=s?this._clipboardManager.copyCellToClipboard(a):this._clipboardManager.copyToClipboard(i,u,c)}else n=null;else n=this._clipboardManager.copyEmtpyToClipboard();return null!=n&&h&&(e&&"cut"===e.type&&this.eraseSelection(!0,!0),e.clipboardData?e.clipboardData.setData("text/plain",n):window.clipboardData.setData("Text",n)),n}},r.prototype.toClipboard=function(t,e){void 0===e&&(e=!0);var i=function(t){var e;return"string"==typeof t?e=this.columnByName(t):t instanceof ss&&(e=t),e&&e.layout}.bind(this);if(!this.empty){var o;if(!(t&&t instanceof Ns)){var r=void 0,n=void 0;if(t?(r=i(t.startColumn),n=i(t.endColumn)):(r=this._activeCellLayout.first,n=this._activeCellLayout.last),!r||!n)return;var s=null==(t=t||{}).startItem?0:Math.max(0,t.startItem),a=null==t.endItem?this.itemCount-1:Math.min(t.endItem,this.itemCount-1);o=Ns.createRange(s,r,a,n)}var l=this.copyToClipboard(null,o,!0);if(l=null==l?"":l,!e)return l;if(Rt.isIE&&window.clipboardData)window.clipboardData.setData("text",l);else{var h=this.doc,u=h.createElement("textarea"),c=u.style;c.position="absolute",c.top="-10000px",h.body.appendChild(u),u.value=l,u.select(),h.execCommand("copy"),setTimeout((function(){h.body.removeChild(u)}),100)}}},r.prototype.fromClipboard=function(t){var e=this.pasteOptions;try{var i=void 0,o=(t.originalEvent||t).clipboardData;null!=(i=o?o.getData("text/plain"):window.clipboardData.getData("text"))&&(t.preventDefault(),this.pasteFromClipboard(i,t))}catch(t){if(t instanceof Dn){if(e.throwValidationError)throw t}else if(t instanceof Tn)alert(t.message);else if(t)throw t}},r.prototype.showToast=function(t,e){this._toastManager.show(t,e,null)},r.prototype.hideToast=function(t){this._toastManager.close(!1),t&&setTimeout(t,0)},r.prototype.showMessage=function(t,e,i){this._tooltipManager.showMessage(t,e,i)},r.prototype.isEditing=function(t){return this._editController.editing&&(!t||Ds.areEquals(t,this._editController.editIndex))},r.prototype.getEditItem=function(){return this.itemSource instanceof Jo&&this.itemSource.editingItem},r.prototype.isItemEditing=function(t){return(t=t||this.focusedIndex.item)&&this.itemSource instanceof Jo&&this.itemSource.isEditing(t)},r.prototype.isItemEdited=function(t){return(t=t||this.focusedIndex.item)&&this.itemSource instanceof Jo&&this.itemSource.isEdited(t)},r.prototype.getEditValue=function(t,e,i){return this._doGetEditValue(e,i)},r.prototype._doGetEditValue=function(t,e){return this._fireGetEditValue(t,e)},r.prototype.isCellEditing=function(){return!!this._editOptions.commitByCell&&this._items.isUpdating},r.prototype.editorCommit=function(t,e,i){return this._doCellCommit(t,e,i)},r.prototype.scrollOnEditing=function(){if(this.isEditing())switch(this.editOptions.scrollOnEditing){case t.ScrollOnEditing.CANCEL:this.cancelEditor(!0);break;case t.ScrollOnEditing.COMMIT:this.commitEditor(!0);case t.ScrollOnEditing.DEFAULT:}},r.prototype._doCellCommit=function(t,e,i){return this._fireEditCommit(t,e,i)},r.prototype.editorActivated=function(t){this._doEditorActivated(t.editIndex,!0,t)},r.prototype._doEditorActivated=function(t,e,i){var o=this.getBodyCellAt(t,!1),r=o&&this.getBodyView(o.cell);this.accessibility&&!e&&this.setFocus(),r&&r.$_buttonZIndexChanged(this,o,e,i)},r.prototype.setCellUpdateEventLock=function(t){this._cellUpdateEventLock=t},r.prototype.$_validateCellValue=function(t,e){try{var i=Vo(t.item.itemState);return this._validationManager.validateCell(t,i,!1),!0}catch(e){if(!(e instanceof Dn))throw e;this._validationManager.addInvalidateCell(t,e)}return!1},r.prototype.$_refreshInvalidList=function(t){this.itemCount<=0||t?this.validationManager.clearInvalidateList():this.validationManager.checkRowIds()},r.prototype.validateCellCommit=function(t,e){this.editOptions.validateOnEdited&&this.$_validateCellValue(t,e)},r.prototype.validateCells=function(t,e,i,o){return this._validationManager.validateCells(t,e,i,o)},r.prototype.getInvalidCells=function(t){return this._validationManager.getInvalidCells(t)},r.prototype.clearInvalidCells=function(t,e){if(t){if(null!=e){var i=this.columnByField(e),o=Ms.tempItem(this,t,i);return this._validationManager.clearInvalidCell(o)}return this._validationManager.clearInvalidCells(t.dataId)}this._validationManager.clearInvalidCells()},r.prototype.addInvalidCell=function(t,e,i,o){var r=this.columnByField(e),n=Ms.tempItem(this,t,r);return this._validationManager.addInvalidateCell(n,{level:i,message:o})},r.prototype.getEditableAt=function(t,e){var i=t.dataColumn;if(!i)return!1;if(e&&null!=e.editable)return e.editable;if(t.item.isDataRow){var o=t.item;if(null!=o.editable)return o.editable}var r=this.editOptions;if(r.columnEditableFirst){if(!(null!=i.editable?i.editable:r.editable))return!1}else{if(!r.editable)return!1;if(!1===i.editable)return!1}var n=this.fixedOptions;return!(t.colFixed&&!n.editable)&&!(t.rowFixed&&!n.rowEditable)},r.prototype.getReadOnlyAt=function(t,e){var i=t.dataColumn;if(!i)return!0;var o=this._items.getItem(t.itemIndex);return!o||(e&&null!=e.readOnly?e.readOnly:(o=o.merged&&o instanceof Wo?o.firstDataItem:o,!this.editOptions.updatable&&!Bo(o.itemState,o.rowState)||(!this._items.canUpdate(o,i.dataIndex)||(!!this._editOptions.readOnly||!!i.readOnly))))},r.prototype.getWritableAt=function(t,e){if(!this.isValid(t))return!1;var i=this.getBodyViewAt(t);if(i){var o=i.getCellAt(this._layoutManager,t);if(o&&!e){var r=o.merged&&o.head||o;return t.item.isDataRow&&(null==o.editable||o.editable||r.renderer2&&r.renderer2.canEdit())&&!o.readonly}var n=t.dataColumn;if(!n)return!1;var s=this.body.getCell(t),a=s&&n.getCellStyle(s),l=n.readOnly,h=n.isWritable(),u=!1;if(a&&"string"!=typeof a&&(l=null!==a.readOnly?a.readOnly:n.readOnly,a.hasOwnProperty("editable")&&(h=null!==a.editable?a.editable:h)),o&&e&&(u=(r=o.merged&&o.head||o).renderer2&&r.renderer2.canEdit()),!e){var c=this.fixedOptions,d=this.editOptions,p=a&&a.renderer||n.renderer,f=p&&("string"==typeof p?p:p.type),_=f&&this.delegate.createRenderer(f,p,null);_&&(_._index=t.clone(),u=_.canEdit(),_=_.dispose());var g=t.item;h=(h=h&&(!t.colFixed||c.editable))&&(!t.rowFixed||c.rowEditable),h=!!g.isDataRow&&(h&&(d.updatable||Bo(g.itemState,g.rowState)))}return h&&!l||u}},r.prototype.getWritable=function(t,e){var i=e.layout,o=Ds.temp(this,t,i,!0),r=this.getWritableAt(o,!1);return void 0===r?e.isWritable():r},r.prototype.canEditAt=function(t){var e=this.getBodyViewAt(t);if(e){var i=e.getCellAt(this._layoutManager,t);return i&&void 0!==i.editable?i.editable:this.getEditableAt(t,null)}},r.prototype.canWriteAt=function(t){var e=this.getBodyViewAt(t);if(e){var i=e.getCellAt(this._layoutManager,t);return i&&void 0!==i.readonly?!i.readonly:!this.getReadOnlyAt(t,null)}},r.prototype.canUpdate=function(e,i){return this.editOptions.canUpdate(e.rowState===t.RowState.CREATED)&&this.visibleLayoutCount>0&&this.itemSource&&this.itemSource.canUpdate(e,i)},r.prototype.canAppend=function(t){var e=this.itemSource,i=!this.isEditing()&&(t||this.editOptions.canAppend())&&this.visibleLayoutCount>0&&e&&e.canAppend();if(i)try{if(!this._fireRowInserting(e.itemCount,-1))return!1}catch(t){return alert(t.message||t),!1}return i},r.prototype.canInsert=function(t,e,i,o){var r=this.itemSource,n=!this.isEditing()&&this._doCanInsert(t,e,i)&&(this.editOptions.canInsert()||o)&&this.visibleLayoutCount>0&&r&&r.canInsert(t);if(n)try{if(!this._fireRowInserting(t.index+(e?1:0),-1))return!1}catch(t){return alert(t.message||t),!1}return n},r.prototype._doCanInsert=function(t,e,i){return!0},r.prototype.canDelete=function(t){var e=this.itemSource;return this.editOptions.canDelete()&&this.visibleLayoutCount>0&&e&&(this.isItemEditing(t)||e.canDelete(t))},r.prototype.canCommit=function(t){return this.isItemEditing(t)&&(this.isItemEdited()||this.editOptions.commitWhenNoEdit)},r.prototype.canCancel=function(t){return this.isItemEditing(t)},r.prototype.canMergeEditing=function(t){return!this.isTree()&&t&&t.merged&&this.editOptions.commitByCell&&t.dataColumn&&t.dataColumn.mergeEdit},r.prototype.edit=function(t){return t||(t=this.focusedIndex),!!(this.isValid(t)&&this.itemSource instanceof Jo)&&(!(t.dataColumn&&!this.canUpdate(t.item,t.dataField))&&(!Ao(t.item.itemState)&&this.validationManager.cloneError(t.dataId,-1),this.itemSource.edit(t.item)))},r.prototype.insertAt=function(t,e,i){return this.insert(this.getItem(t),e,!1,!0,i)},r.prototype.insert=function(t,e,i,o,r){if(t||(t=this.focusedIndex?this.focusedIndex.item:null),!t)return-1;var n=this.itemSource;if(n instanceof Jo&&this.canInsert(t,e,i,o)){var s=this.$_getInsertDefaults(r);return this._cancelDummy(),n.insert(t,s,e,i)}return-1},r.prototype.appendAt=function(t){return this.append(!0,t)},r.prototype.append=function(t,e){var i=this.itemSource;if(i instanceof Jo&&i.dataSource&&this.canAppend(t)){var o=this.$_getInsertDefaults(e);return this._cancelDummy(),i.append(o)}return-1},r.prototype._appendDummy=function(){var t=this._editOptions;t.displayEmptyEditRow&&t.appendable&&this._items.appendDummy()},r.prototype._cancelDummy=function(){this._items.cancelDummy()},r.prototype.setValueAt=function(t,e,i){var o=this.getItem(t);if(o&&e>=0)if(o instanceof Zo||o instanceof Pn)o.setValue(e,i);else{var r=o.dataRow;r>=0&&this.dataSource.setValue(r,e,i)}},r.prototype.setCellValue=function(t,e){this.isValid(t)&&this.setValueAt(t.itemIndex,t.dataField,e)},r.prototype.recallHeight=function(){this._container.recallHeight()},r.prototype.$_canShowEditor=function(t,e,i){return!!this.isValid(t)&&this._fireShowEditor(this._editorIndex.assign(t),e,i)},r.prototype.$_canShowEditCommand=function(t){if(this.isValid(t))return this._fireShowEditCommand(t)},r.prototype.hideEditor=function(t){void 0===t&&(t=!1),this._editController.closeList(!1),this._editController.hideEditor(),t&&this.activeTool.resetFocused()},r.prototype.requestPrepareEditor=function(){var t=this._editController;t&&t.requestPrepareEditor()},r.prototype.fillEditSearchItems=function(t,e,i,o,r){this._editController.fillSearchItems(t,e,i,o,r)},r.prototype.showEditor=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),t=t||this.focusedIndex,this._editController.showEditor(t,i))return this.activeTool.resetFocused(),e&&this._editController.caretToLast(),!0},r.prototype.showEditList=function(t){if(this._editController.showList(t))return!0},r.prototype.editorButtonClicked=function(t,e){this._editController.buttonClicked(t,e),this._fireEditButtonClicked(t)},Object.defineProperty(r.prototype,"canUndo",{get:function(){var t=this.dataSource;return t&&t.canUndo&&!this.isItemEditing()},enumerable:!1,configurable:!0}),r.prototype.undo=function(){return!!this.canUndo&&(this.dataSource.undo(),!0)},Object.defineProperty(r.prototype,"canRedo",{get:function(){var t=this.dataSource;return t&&t.canRedo&&!this.isItemEditing()},enumerable:!1,configurable:!0}),r.prototype.redo=function(){return!!this.canRedo&&(this.dataSource.redo(),!0)},r.prototype.execute=function(t){},r.prototype.clearCommandStack=function(t){this.dataSource.clearCommandStack()},r.prototype.setLookups=function(t){t&&(this._lookupProvider||(this._lookupProvider=new Zu,this._lookupProvider.addListener(this)),this._lookupProvider.load(t))},r.prototype.addLookupSource=function(t){(this._lookupProvider||(this._lookupProvider=new Zu)).add(t)},r.prototype.removeLookupSource=function(t){this._lookupProvider&&this._lookupProvider.remove(t)},r.prototype.existsLookupData=function(t,e){if(t&&e){var i=this._lookupProvider&&this._lookupProvider.getSource(t);if(!i)throw new Error("Invalid lookup source id: "+t);return i.exists(Rt.makeArray(e))}},r.prototype.getLookupData=function(t,e){var i;if(!t||!(i=this._lookupProvider&&this._lookupProvider.getSource(t)))throw new Error("Invalid lookup source id: "+t);return i.getLookupData(Rt.makeArray(e))},r.prototype.fillLookupData=function(t,e){if(t&&e){var i=this._lookupProvider&&this._lookupProvider.getSource(t);if(!i)throw new Error("Invalid lookup source id: "+t);e.rows?i.fillRows(e.rows):i.fill(e.keys,e.values,e.listResult)}},r.prototype.clearLookupData=function(t){if(t){var e=this._lookupProvider&&this._lookupProvider.getSource(t);if(!e)throw new Error("Invalid lookup source id: "+t);e.clear()}},r.prototype.addLookupData=function(t,e,i){if(void 0===i&&(i=null),t&&e){e=Rt.makeArray(e);var o=this._lookupProvider&&this._lookupProvider.getSource(t);if(!o)throw new Error("Invalid lookup source id: "+t);i?o.add(e,i):o.addRow(e)}},r.prototype.setOptions=function(t){},r.prototype.doContextMenu=function(e){var i,o,r,n,s,a,l,h=e.mouseX,u=e.mouseY,c=this.activeTool,d=c._findTableCell(),p=c.findElementAt(h,u,!1);if(d){var f=this.getTableView(d),_=this.getCellType(d),g=void 0,m=void 0;switch(_){case t.GridCellType.HEAD:i=Du.getSub(_,this.headView.getCellType(d)),a=(o=this.headView.getHeadModel(d))&&o.popupMenuName;break;case t.GridCellType.FOOT:i=Du.getSub(_,this.footView.getCellType(d)),a=(o=this.footView.getFootModel(d))&&o.popupMenuName;break;case t.GridCellType.INDICATOR:g=this.rowBarContainer.rowOf(d),m=this.getRowOfItem(g),i=Du.getItem(_,g,m),a=this.rowIndicator.popupMenuName;break;case t.GridCellType.STATE:g=this.rowBarContainer.rowOf(d),m=this.getRowOfItem(g),i=Du.getItem(_,g,m),a=this.stateBar.popupMenuName;break;case t.GridCellType.CHECK:g=this.rowBarContainer.rowOf(d),m=this.getRowOfItem(g),i=Du.getItem(_,g,m),a=this.checkBar.popupMenuName;break;case t.GridCellType.HEADER:l=f.layoutByCell(d),i=Du.getLayout(_,l),a=l.firstColumn.header.popupMenuName;break;case t.GridCellType.DATA:if((n=f.bodyCellByCell(d)).grouped)i=Du.getItem(t.GridCellType.GROUP_HEADER,n.item.index,null);else{var b=Ds.temp(this,p instanceof Al?p.itemIndex:n.item.index,n.layout);i=Du.getCell(_,n,b),a=n.dataColumn.popupMenuName}break;case t.GridCellType.GROUP_FOOTER:n=f.bodyCellByCell(d),s=p&&p._item&&p._item.$_footerIndex,i=Du.getGroupFooter(_,n.item.index,n.layout,s);var w=n.dataColumn.groupFooters.get(s);a=w&&w.popupMenuName;break;case t.GridCellType.FOOTER:case t.GridCellType.SUMMARY:var C=f.tableCellByCell(d);s=C.summaryIndex;var x=_===t.GridCellType.FOOTER?C.layout.firstColumn.footers.get(s):C.layout.firstColumn.headerSummaries.get(s);i=Du.getSummary(_,C.summaryIndex,C.layout),a=x&&x.popupMenuName;break;case t.GridCellType.GROUP_HEAD:case t.GridCellType.GROUP_FOOT:var I=d[v];i=Du.getGroupElt(_,I);break;case t.GridCellType.GROUP_BAR:var S=d[y];m=this.getRowOfItem(S),i=Du.getItem(_,S,m)}}else p&&p===c._clickElement&&(i=c._getClickData(p,e));if(!1!==(r=this._fireContextMenuPopup(h,u,i,a||this._contextMenu,!0))){var E=this._popupMenuManager;if("string"==typeof r?a=r:null!=r&&"object"==typeof r||(a=a||this._contextMenu),a){e.preventDefault();var O=E.getMenu(a);O&&E.showContext(O,e,h,u,i)}}return null},r.prototype.setContextMenu=function(t){return t?this.addPopupMenu(this._contextMenu="gridContextMenu",t,!0,this):this._contextMenu=null},r.prototype.addPopupMenu=function(t,e,i,o){if(void 0===i&&(i=!0),e=Rt.makeArray(e),t&&e)return this.popupMenuManager.addMenu(t,e,i,o)},r.prototype.removePopupMenu=function(t){this.popupMenuManager.removeMenu(t)},r.prototype.getPopupMenu=function(t){return this.popupMenuManager.getMenu(t)},r.prototype.setCursor=function(t,e){if(t){var i=this.getTableCell(t),o=i?this.getTableView(i):this._tableViews[t[g]];if(o instanceof Sl)return void o.setCursor(e)}this._container.setCursor(e)},r.prototype.canMoveLayout=function(t){var e=t.root.vindex,i=this.layoutManager;return!(i.mergedRowGrouped&&e<i.rowGroupLevels)&&(this.fixedOptions.movable||e>=i.fixedLayoutCount&&e<i.rightFirstLayout)},r.prototype.canMoveToLayout=function(t){return this.canMoveLayout(t)},r.prototype.getEditCellValue=function(){return this._editController.editValue},r.prototype.setEditCellValue=function(t,e,i){(this.isEditing()||e)&&this._editController.setEditValue(t,i)},r.prototype.searchItem=function(t){t instanceof ai||(t=new ai(t));var e=Rt.makeArray(t.fields),i=Rt.makeArray(t.values),o=this.itemSource,r=t.startIndex,n=t.reverse,s=-1;if(e&&e.length>0&&i&&i.length>0&&o){var a=void 0,l=void 0,h=void 0,u=void 0,c=e.length,d=[];for(a=0;a<c;a++)l=parseFloat(e[a]),!isNaN(l)&&l>=0?d.push(l):(h=this.dataSource.getFieldIndex(e[a]))>=0&&d.push(h);if(d.length>0){var p=o.itemCount;r=n?Math.min(p-1,r):Math.max(0,r),(s=(n?r>=0:r<p)?o.findItem(d,i,t,r,n?0:p-1):-1)<0&&t.wrap&&(n?r<p-1:r>0)&&(s=o.findItem(d,i,t,n?p-1:0,n?r+1:r-1))}s>=0&&t.select&&(u=this.getIndex(s,Rt.pick(this.focusedIndex.column,this.getFirstColumn())),this.setFocusedIndex(u,!0,!0))}return s},r.prototype.searchCell=function(t){var e,i,o,r=this.itemSource,n=r&&r.dataSource,s=r.itemCount,a=t.fields=Rt.makeArray(t.fields),l=t.columns=Rt.makeArray(t.columns),h=[],u=null;if(n)if(!a&&l)for(e=0,i=l.length;e<i;e++){var c=this.columnByName(l[e]);if(c instanceof ls){if(c.dataIndex<0)throw new Error("invalid search Column "+l[e]);h.push(c.dataIndex)}}else for(e=0,i=(a=a||n.getOrgFieldNames()).length;e<i;e++)o=parseFloat(a[e]),!isNaN(o)&&o>=0?h.push(o):h.push(n.getFieldIndex(a[e]));t instanceof li||(t.reverse&&(t.hasOwnProperty("startIndex")||(t.startIndex=s-1),t.hasOwnProperty("startFieldIndex")||(t.startFieldIndex=h.length-1)),t=new li(t));var d=t.wrap,p=t.select,f=t.value,_=t.reverse;if(n&&h&&h.length>0&&null!=f){if(h.length>0){var g=_?Math.min(s-1,t.startIndex):Math.max(0,t.startIndex),y=Math.max(_?-1:0,t.startFieldIndex),m=_?g>=0:g<s,b=_?g<s-1||y<h.length:g>0||y>0,v=_?0:s-1;!(u=m?r.findCell(h,f,t,g,v,y):null)&&d&&b&&(u=r.findCell(h,f,t,_?s-1:0,g,_?y:0)),u&&(u.fieldName=n.getOrgFieldName(u.fieldIndex))}if(u&&p){var w=void 0;(w=l?this.getIndex(u.itemIndex,Rt.pick(this.columnByName(l[u.searchFieldIndex]),this.focusedIndex.column)):this.getIndex(u.itemIndex,Rt.pick(this.columnByField(u.fieldIndex),this.focusedIndex.column)))&&this.setFocusedIndex(w,!0,!0)}}return u},r.prototype.isCheckable=function(t){var e=this.getItem(t);return e&&e.checkable},r.prototype.isCheckableOfRow=function(t){var e=this.getItemOfRow(t,!0);return e&&e.checkable},r.prototype.setCheckable=function(t,e){var i=this.getItem(t);i&&i.setCheckable(e)},r.prototype.setCheckableOfRow=function(t,e){var i=this.getItemOfRow(t,!0);i&&i.setCheckable(e)},r.prototype.isIndeterminateItem=function(t){var e=this.getItem(t);return e&&e.indeterminate},r.prototype.isCheckedItem=function(t){var e=this.getItem(t);return e&&e.checked},r.prototype.isIndeterminateRow=function(t){var e=this._items.getItemOfRow(t,!0);return e&&e.indeterminate},r.prototype.isCheckedRow=function(t){var e=this._items.getItemOfRow(t,!0);return e&&e.checked},r.prototype.checkAll=function(t,e,i,o){var r=this._checkBar.showGroup&&!this._checkBar.merged;this._items.checkAll(t,e,i,o,r)},r.prototype.toggleCheck=function(t){var e=this.getItem(t);e&&e.checkable&&this.checkItem(e.index,!e.checked,this.checkBar.exclusive,!0)},r.prototype.toggleChecks=function(t,e){var i=[];if(e&&e.isDataRow&&e.checkable){if(this.checkBar.merged){var o=t[0],r=t[t.length-1],n=o.index,s=r.index,a=this.checkBar.merges,l=a.getRoom(Ds.temp(this,n,null));n=Math.min(n,l?l.head:n),l=a.getRoom(Ds.temp(this,s,null)),s=Math.max(s,l?l.tail:s),t=[];for(var h=n;h<=s;h++){var u=this.getItem(h);u.checkable&&u.isDataRow&&t.push(u)}}for(h=0;h<t.length;h++)t[h].checkable&&t[h].dataRow>=0&&i.push(t[h]);var c=!e.checked;this.checkBar.exclusive&&this.itemSource._clearChecked(),i.length>0&&this._items.checkItems(i,c,!0)}},r.prototype.indeterminateItem=function(t,e){var i=this.getItem(t);i&&this._items.setInditerminateItem(i,e)},r.prototype.checkItem=function(t,e,i,o){var r=this.getItem(t);r&&this._items.checkItem(r,e,i,o)},r.prototype.$_getItemIndexOfRow=function(t){var e,i=this.getItemIndexOfRow(t);return i>-1&&(e=this.getItem(i))&&(e=e instanceof Zo?e:null),e||this.getItemOfRow(t,!0)},r.prototype.indeterminateRow=function(t,e){var i=this.$_getItemIndexOfRow(t);i&&this._items.setInditerminateItem(i,e)},r.prototype.checkRow=function(t,e,i,o){var r=this.$_getItemIndexOfRow(t);r&&this._items.checkItem(r,e,i,o)},r.prototype.checkModel=function(t,e,i,o){t&&this._items.checkItem(t,e,i,o)},r.prototype.indeterminateModel=function(t,e){t&&this._items.setInditerminateItem(t,e)},r.prototype.checkItems=function(t,e,i){var o=this._items.getItemsByIndices(t);this._items.checkItems(o,e,i)},r.prototype.checkRows=function(t,e,i){var o=this._items.getItemsByRows(t,!0);this._items.checkItems(o,e,i)},r.prototype.setAllCheck=function(t,e){var i=this.checkBar.exclusive;if(this._headView.allChecked=t,e&&(!i||!t)){var o=this.checkBar;this.checkAll(t,o.visibleOnly,o.checkableOnly,!1)}},Object.defineProperty(r.prototype,"allChecked",{get:function(){return this._headView.allChecked},enumerable:!1,configurable:!0}),r.prototype.resetCheckables=function(){},r.prototype.applyCheckables=function(){},r.prototype.registerCustomRenderer=function(t,e){this._delegate.addCustomRenderer(t,e)},r.prototype.unregisterCustomRenderer=function(t){this._delegate.removeCustomRenderer(t)},r.prototype.existsCustomRenderer=function(t){return this._delegate.existsCustomRenderer(t)},r.prototype.unregisterAllCustomRenderer=function(){this._delegate.clearCustomRenderers()},r.prototype.getValueAt=function(t,e){var i=this.getItem(e),o=t.firstColumn;if(o instanceof ls)return i&&i.getData(o.dataIndex)},r.prototype.getCellValue=function(t){if(this.isValid(t)){var e=this.getItem(t.itemIndex),i=t.dataColumn;if(e&&i)return e.getData(i.dataIndex)}},r.prototype.getDistinctItemValues=function(e,i,o){void 0===i&&(i=-1),void 0===o&&(o=t.SortDirection.ASCENDING);var r=this.columnByField(e);if(!r)return null;if(0!=i){for(var n=r.getField().dataType,s=[],a=0,l=this._items._rs.getAllItems();a<l.length;a++){var h=l[a];if(h instanceof Go||h instanceof In){var u=h.getData(e);switch(n){case t.ValueType.NUMBER:case t.ValueType.UINT:case t.ValueType.UNUM:case t.ValueType.INT:null!=u&&isNaN(u)||s.indexOf(u)<0&&s.push(u);break;case t.ValueType.DATE:case t.ValueType.DATETIME:s.push(u?u.getTime():void 0);break;default:s.push(u)}}}return s=ti.getUniqueValues(s,n),o!==t.SortDirection.NONE&&(Rt.included(n,t.ValueType.DATETIME,t.ValueType.DATE,t.ValueType.NUMBER)?s.sort((function(t,e){return t-e})):s.sort(),o===t.SortDirection.DESCENDING&&s.reverse()),i<0?s:s.slice(0,i)}return null},r.prototype.getDisplayText=function(t){var e=t.valueColumn;if(e instanceof ls){var i=e.dataIndex,o=t.item;if(i>=0){if(o instanceof Go||o instanceof In){var r=o.getData(i),n=new ns,s=this._body.getCellFormatters(e,null,t,n.clear());return br._getDisplayText(this,o,e,r,s)}if(o instanceof Yo){var a=e.groupFooters.get(o.$_footerIndex);r=Ic.getValue(o,e),s=this._rowGroup.getFooterCellFormatters(a,null);return Ic.$_displayText(o,e,r,s)}}}else{if(e instanceof us){n=new ns;if((o=t.item)instanceof Yo){a=e.groupFooters.get(o.$_footerIndex),r=Ic.getValue(o,e);var l=this._rowGroup.getFooterCellFormatters(a,null);return Ic.$_displayText(o,e,r,l)}s=this._body.getCellFormatters(e,null,t,n.clear());return wr.getDisplayText(this,o,e,e.value,s)}if(e instanceof hs){var h=Cr.getValue(t);if(e.actualTarget&&(h=h.reverse()),h)return h.join(e.valueSeparator)}}return""},r.prototype._fitLayoutWidth=function(e,i,o){var r=this,n=function(t){var e=It(t).getComputedStyle(t),i=0,o={};if(e){u=e.paddingLeft;var r=parseInt(u.substr(0,u.indexOf("px")));i+=r>0?r:0,u=e.paddingRight,i+=(r=parseInt(u.substr(0,u.indexOf("px"))))>0?r:0,o={fontSize:e.fontSize,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontStyle:e.fontStyle}}return{w:i,font:o}};if(!e.visible)return 0;var s=this.itemSource,a=this.getIndex(this.topIndex,e.firstColumn),l=e.firstColumn.header,h="",u="",c=0,d=0,p=0,f=0,_=this.getHeaderCellAt(e);if(i){var g=_&&_.cell.firstElementChild;if(g){var y=n(g),m=y.w,b=y.font,v=_.marginLeft+_.marginRight+2+_.checkWidth;d=m+this.container.measureText("rg-header-cell",l.displayText,b)+v}else f=Rt.getTextLength(h),d=c+this.container.measureText("rg-header-cell",l.displayText,null)+2}if(o){var w=this.getFooterCellsAt(e);w&&w.forEach((function(t,i){var o=t&&t.cell.firstElementChild;if(o){var s=n(o),a=s.w,l=s.font,h=r.footers.getVisible(i).getCell(e).getDisplayText(t);p=Math.max(p,a+r.container.measureText("rg-footer-cell",h||"",l)+2)}}));var C=this.getHeaderSummaryCellsAt(e);C&&C.forEach((function(t,i){var o=t&&t.cell.firstElementChild;if(o){var s=n(o),a=s.w,l=s.font,h=r.headerSummaries.getVisible(i).getCell(e).getDisplayText(t);p=Math.max(p,a+r.container.measureText("rg-header-summary-cell",h||"",l)+2)}}))}var x,I=this.getBodyCellAt(a,!1),S=I&&I.renderer2&&I.renderer2._dom;if(S){var E=n(S),O=E.w;x=E.font,c=O}for(var R=0,P=s.itemCount;R<P;R++)a.itemIndex=R,u=this.getDisplayText(a),Rt.getTextLength(u)>f&&(f=Rt.getTextLength(u),h=u);if(f>0){c+=this.container.measureText("rg-data-cell",h,x)+2;var k=e.getDataColumn(),T=k.editor,D=this.delegate.getCellEditor(Ma.getEditorType(T));D.hasButton(this.displayOptions.showNativeEditButton,T)&&(c+=this.body.editButtonWidth*D.buttonCount),k.button!==t.CellButton.NONE&&(c+=this.body.cellButtonWidth)}return Math.max(c,d,p)},r.prototype.fitLayoutWidth=function(e,i,o,r,n){var s=0;function a(t,e){var i=this.getHeaderCellAt(t);if(r&&i){var o=i.textSpan,n=o.style.whiteSpace;o.style.whiteSpace="nowrap";var s=Rt.getSize(o).width;return o.style.whiteSpace=n,s+=i.expander?Rt.getSize(i.expander).width:0,Math.max(s+6,e)}return e}return r=null==r||r,n=null==n||n,e instanceof _s?s=this._fitLayoutWidth(e,r,n):e instanceof vs&&(s=function e(i){for(var o=i.direction===t.ColumnLayoutDirection.HORIZONTAL,n=0,s=0,l=i.visibles;s<l.length;s++){var h=l[s],u=0;h instanceof _s?(u=this._fitLayoutWidth(h,r),1===h._defColSpan&&(h.cellWidth=u)):h instanceof vs&&(u=e.call(this,h),u=a.call(this,h,u)),n=o?n+u:Math.max(n,u)}return n}.call(this,e),s=a.call(this,e,s)),o&&o>this.displayOptions.minCellWidth&&(s=Math.max(s,o)),i&&i>this.displayOptions.minCellWidth&&(s=Math.min(s,i)),e.cellWidth=s},r.prototype.fitHeaderHeight=function(t,e){this.header.setCalcHeights([],!0),this.layoutManager.setFitHeader(t,Math.max(0,e)),this.refreshView()},r.prototype.canMoveRow=function(t,e){return void 0===e&&(e=!0),!this.isEditing()&&!this.isItemEditing()&&(e||this._editOptions.movable)&&(!t||this.itemSource.getMovable(e))},r.prototype.moveRows=function(t,e){if(this.canMoveRows(t,!0,e))return this._doMoveRows(t,e)},r.prototype.moveSelection=function(t,e){var i=this.getSelectedItems(!1);if(i&&i.length>0){var o=i[0],r=o.index,n=this.itemSource;if(t>0&&r+t<=n.itemCount||t<0&&r>0){var s=this._getMoveTarget(e,i,r,t);if(this.moveRows(i,s)){t=this.isTree()?o.index-r:t;var a=this.getSelection();a.moveRow(t),this._selections.clear(!0),this._selections.$_addItem(a,!0);var l=this._focusedIndex.clone();l.itemIndex=this.isTree()?o.index:r+t,this.setFocusedIndex(l,!1,!0,!1)}}}},r.prototype.isSelectedItem=function(t){return this.selections.containsItem(t,null)},r.prototype.isSelectedLayout=function(t){return this.selections.containsLayout(t)},r.prototype.getFilteredColumns=function(){for(var t=this.columnCount,e=[],i=0;i<t;i++){var o=this.getColumn(i);o.isFiltered()&&e.push(o)}return e},r.prototype.showProgress=function(){this._progressManager.show(this._container._containerDom,null,this.displayOptions.baseZindex)},r.prototype.setProgress=function(t,e,i,o){this._progressManager.setProperties(t,e,i,o)},r.prototype.closeProgress=function(){this._progressManager.close()},r.prototype.showLoading=function(t){this._progressManager.loaderShowing()||(t?(this._progressManager._gridDisabled=this.container.disabled,this.container.disabled=!0):this._progressManager._gridDisabled=void 0,this._progressManager.showLoader(this._container._containerDom,this._displayOptions.baseZindex))},r.prototype.hideLoading=function(){this._progressManager.closeLoader(),void 0!==this._progressManager._gridDisabled&&(this.container.disabled=this._progressManager._gridDisabled)},r.prototype.beginExportProgress=function(t){this._progressManager.show(this._container._containerDom,t,this._displayOptions.baseZindex)},r.prototype.endExportProgress=function(){this._progressManager.close()},r.prototype.setExportProgress=function(t,e,i){this._progressManager.setProperties(0,t,e,i)},r.prototype.setEmptyMessage=function(t){this._emptyView.setMessage(t)},r.prototype.setWatchTimer=function(t){this._container.setWatchTimer(t)},r.prototype.layoutExpandAll=function(t,e){this._activeCellLayout.expandAll(t,e)},r.prototype.isRecycleMode=function(){return this.displayOptions.refreshMode===t.RefreshMode.RECYCLE},r.prototype.invalidateGridObject=function(){var t=!1,e=this._gridObjects;return e.forEach((function(e){e instanceof yl||(t=t||e.dirty)})),t&&e.forEach((function(t){t instanceof yl||(t._dirty=!0)})),t},r.prototype.getEditContainer=function(t){return this._accessibility?this.getBodyCellAt(t).cell:this._container._container},r.prototype._getCssSelector=function(){return""},Object.defineProperty(r.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),r.prototype._createDelegate=function(){return new Ku(this)},r.prototype._createLayoutManager=function(){return new Jl(this)},r.prototype._createEditController=function(){return Rt.isMobile()?new Yc(this):new yu(this)},r.prototype._createSelectionLayer=function(){return Rt.isMobile()?new ku(this,"mobileSelectionLayer"):new ka(this,"selectionLayer")},r.prototype._initDom=function(t){i.prototype._initDom.call(this,t),t.style.setProperty("overflow","hidden","important")},r.prototype.setRect=function(t){var e=t.width!=this.width||t.height!=this.height;i.prototype.setRect.call(this,t),e&&(this._dirty=!0)},r.prototype._doDraw=function(t){},r.prototype.$_containerResized=function(){Rt.isMobile()&&this.isEditing()&&!this.isItemEditing()&&setTimeout(function(){var t=this.topItem,e=this.layoutManager.fullItemCount,i=this.focusedIndex.itemIndex;t+e<i&&(this.topIndex=i-Math.round(e/2))}.bind(this),10),this._columnsDirty=!0},r.prototype._doCreateOtherElements=function(){},r.prototype._doContentPanesCreated=function(){},r.prototype._createSidePane=function(){return null},r.prototype.isSidePaneVisible=function(){return!1},r.prototype._createBodyView=function(t){return new Ul(this.doc,t)},r.prototype._createFixedBodyView=function(t){return new Yl(this.doc,t)},r.prototype._createRightBodyView=function(t){return new zl(this.doc,t)},r.prototype._initStyles=function(){},r.prototype._columnsReset=function(){this._resetColumnIndices(),this._activeCellLayout._columnsChanged(this._columns);var t=this.focusedIndex;this.isValid(t)&&!this.isValid(t,!0)&&t.normalize(this),this._columnsDirty=!0,this._needRefresh=!0},r.prototype._resetColumnIndices=function(t){void 0===t&&(t=null),t?t._resetIndices(this):this._columns.resetIndices(),!t&&!this._cellLayoutDirty&&this.clearAddSelection(!0)},r.prototype._resetColumnSortStates=function(){this._columns.resetSortStates()},r.prototype._cleanGridObjects=function(){for(var t=0,e=this._gridObjects.length;t<e;t++)this._gridObjects[t].clean()},r.prototype._visualObjectChanged=function(t){this.invalidateLayout()},r.prototype._addGridObject=function(t){this._gridObjects.push(t)},r.prototype.addElement=function(t){this._rootElement.addChild(t)},r.prototype.$_prepareRender=function(t){this._doPrepareRender(t)},r.prototype._doPrepareRender=function(t){if(this._horzScrolled)try{var e=this._layoutManager;e.setLeftPos(t,this._leftPos),this._leftPos=e.leftPos,this.$_updateScrollBars(e),this._layoutSelectionViews(),this._editController.resetEditor(!1),this.container.defaultTool.layoutChanged()}finally{this._horzScrolled=!1}},r.prototype.$_layout=function(t){this._doLayout(t)},r.prototype.$_detectWidth=function(){return!this.displayOptions.watchDisplayChange&&this.layoutManager.syncHeight()},r.prototype.$_beforeRender=function(){this._itemCheckChanged&&this._syncHeadCheck([]),this._beforeCount=this.layoutManager.itemCount,this.$_detectWidth()&&(this._beforeWidth=this.container.getContainerWidth())},r.prototype.$_afterRender=function(){var t=this.$_detectWidth()&&this._beforeWidth!=this.container.getContainerWidth();if(this._layoutManager.needRelayout()||t)this.invalidateLayout(!0);else{if(this._topIndexChanged&&(this._topIndexChanged=!1,this._needRefresh=!0,this._resetTdFocus=this.accessibility,this._fireTopIndexChanged(this.topIndex)),this.leftPos!==this._prevLeftPos&&(this._fireLeftPosChanged(this.leftPos),this._prevLeftPos=this.leftPos),this._beforeCount<this.layoutManager.itemCount&&(this._needRefresh=!0),this._resetTdFocus&&this._container._focused){var e=this.focusedIndex,i=this.doc;Rt.isAncestorOf(this.container._containerDom,i.activeElement,null)&&this.accessibility&&this.isValid(e)&&this.layoutManager.cellIsVisible(e)&&(this._setFocusTimer&&clearTimeout(this._setFocusTimer),this._setFocusTimer=setTimeout(function(){this._setFocusTimer=null,this.getBodyViewAt(e).refreshTdFocused(e,!0)}.bind(this),20)),delete this._resetTdFocus}[this.fixedBodyView,this.bodyView,this.rightBodyView].forEach((function(t){if(t.visible)for(var e=t._tbody.rows,i=0,o=e.length;i<o;i++)e[i].recycle=!1})),this._horzScrolled&&this._needRefresh&&(this._needRefresh=!1),this._horzScrolled=!1,this._dataChanged=!1,this._needPosition=!1,this._itemCheckChanged=!1,this._keepLeftPos=!1,this._watermarkLayer&&this._watermarkLayer.refresh(),this._fireInitialized(),this._fireDataLoadComplated()}},r.prototype._fireInitialized=function(){this._loading&&(this._loading=!1,this.fireEvent("onGridBaseInitialized"))},r.prototype._fireDataLoadComplated=function(){this._dataLoad&&(this._dataLoad=!1,this.fireEvent("onGridBaseDataLoadComplated"))},r.prototype._doLayout=function(e){var i=this._layoutManager;this._resetting=!1;try{this.$_doLayout(i,e)}finally{this._eventFrom=null}if(this.$_checkFocusedLayout(),this._emptyView.visible=this.empty&&this._displayOptions.showEmptyMessage){var o=i.bodyBounds.clone();o.topBy(i.topContentBounds.bottom),this._emptyView.setBounds(0,o.y,this.width,o.height)}if(this._debugging&&this._debugView.layout(),this._cleanGridObjects(),this._columnsDirty&&(this._columnsDirty=!1,this._activeCellLayout.cleanColumns()),this.$_resetHovering(this.container._currentX,this.container._currentY,!0),this.$_resetFocusRender(this.container._currentX,this.container._currentY),this.$_resetRowHover(),i.itemCount>0){var r=i.topIndex,n=r+i.fullItemCount;this._topIndexChanged=r!==this._prevTop,this._prevTop=r,n==this._prevLast||n!=this.itemCount||Rt.included(this.displayOptions.syncGridHeight,[t.SyncGridHeight.ALWAYS,t.SyncGridHeight.OVER])||setTimeout(function(){this._fireScrollToBottom()}.bind(this),1),this._prevLast=n}this.$_checkCurrentRow(),this._editController.prepareEditor(this.focusedIndex),this._cellLayoutDirty=!1,this.container.defaultTool.layoutChanged(),!this._editController.resetEditor(!1)&&this.isValid(this._focusedIndex)&&this._editController.resetEditable(this._focusedIndex)},r.prototype.$_doLayout=function(e,i){var o=this._displayOptions,r=this._fixedOptions,n=i.clone(),s=o.vscrollBar?this._scrollBarWidth:0,a=o.hscrollBar?this._scrollBarHeight:0;this.setFocusedClass(this._focusedIndex,!1),this.setFocusedRowClass(this._focusedIndex,!1),this._activeCellLayout.$_refresh(this._columns,o.minCellWidth),this._columnsDirty&&this._activeCellLayout.$_prepareLayout(this,r.colCount,r.rightCount),this._needMerge&&(this.$_populateMerges(),this._needMerge=!1),this._body._prepareUpdate();var l=e.topIndex,h=e.leftPos;if(e.measure(n,this._leftPos,this._topIndex,s,a),l!==e.topIndex){var u=e.topIndex-l,c=[this.fixedBodyView,this.bodyView,this.rightBodyView];this.isRecycleMode()&&!this._dataLoad&&u&&Math.abs(u)<e.fullItemCount/2?c.forEach((function(t){t&&t.visible&&t.reArrangeRows(e,u)})):c.forEach((function(t){t&&t.cleanRecycle()}))}this._horzScrolled=this._horzScrolled||h!==e.leftPos;var d=e.fullItemCount,p=e.vscrollBar;if(e.layout(n),e.isAutoRowHeights()&&e.fullItemCount!=d&&p!=e.vscrollBar&&(e.measure(n,e.leftPos,e.topIndex,s,a),e.layout(n,!0)),this._leftPos=e.leftPos,this._topIndex=e.topIndex,this.displayOptions.refreshMode!==t.RefreshMode.RECYCLE){var f=this.container._containerDom;n=new ot(0,0,f.clientWidth,f.clientHeight)}this.$_updateScrollBars(e,n),this._layoutSelectionViews(),this._layouted=!0},r.prototype._columnCheckedChanged=function(t){this._fireColumnCheckedChanged(t)},r.prototype.$_updateScrollBars=function(t,e){var i=this._hscrollBar,o=t._hscrolled,r=o?t.bodyBounds.width:0,n=o?Math.min(t.scrollWidth):0,s=o?t.leftPos:0;i.setProperties(0,r,n,o),i.setPosition(s),i.visible=t.hscrollBar;var a=this.itemCount;i=this._vscrollBar,r=(o=t._vscrolled)?a-t.fixedItemCount:0,n=o?Math.min(t.fullItemCount,a-t.topIndex):0,s=o?t.topIndex:0,i.setProperties(0,r,n,o),i.setPosition(s),i.visible=t.vscrollBar,e&&this.$_layoutScrollBars(t,e)},r.prototype.$_layoutScrollBars=function(t,e){var i=t.scrollBarWidth,o=t.scrollBarHeight,r=this._hscrollBar,n=this._vscrollBar;t.hscrollBar&&(r.setBounds(e.x,e.bottom-o,e.width-i,o),r.layoutContent()),t.vscrollBar&&(n.setBounds(e.right-i,e.y,i,e.height-o),n.layoutContent()),(this._scrollEdge.visible=t.vscrollBar&&t.hscrollBar)&&this._scrollEdge.setBounds(e.right-i,e.bottom-o,i,o)},r.prototype._columnMergeRuleChanged=function(t){this._populateMerges(),this.refreshView()},r.prototype._canMerge=function(){return!1},r.prototype._populateMerges=function(t){void 0===t&&(t=!0),this._needMerge=!0,t&&this.refreshView()},r.prototype.$_populateMerges=function(){if(this._canMerge()){for(var t=this.getHorzColumns(),e=0,i=t.length;e<i;e++){var o,r=t[e],n=r&&r.layout;if(n&&n.canMerge())if((o=n.merges)||(o=new Kn(n)),o.clear(),r instanceof ls&&r.mergeGrouped)this.getGroupLevel(r.dataIndex)>0&&o.initialize(Bn.INIT_COUNT);else o.initialize(Bn.INIT_COUNT)}if(this._checkBar.canMerge())(o=this._checkBar.merges||new pa(this._checkBar)).clear(),o.initialize(Bn.INIT_COUNT)}},r.prototype._addSelectionView=function(t){this._selectionLayer.addView(t)},r.prototype._removeSelectionView=function(t){this._selectionLayer.removeView(t)},r.prototype._layoutSelectionViews=function(){this._layouted&&!this._resetting&&this._selectionLayer.layout()},r.prototype.$_checkCurrentRow=function(){var t=this;if(this.dataSource&&this._focusedIndex){var e=this._focusedIndex.dataId,i=this._focusedIndex.dataRow,o=this.dataSource.getDataRow(this._currentRowId);if(e!=this._currentRowId||this._currentRow!==o){clearTimeout(this._rowChangeTimer);var r=this.container.defaultTool,n=this._currentRow,s=this._displayOptions.rowChangeDelay,a=s<=0;return this._currentRowId=e,this._currentRow=i,a?(this._fireCurrentRowChanged(n,i),r.currentRowChanged(n,i)):s>0&&(this._rowChangeTimer=setTimeout((function(){t._fireCurrentRowChanged(n,i),r.currentRowChanged(n,i)}),s)),!0}}return!1},r.prototype.$_doSetFocusedIndex=function(e,i,o,r,n){if(void 0===r&&(r=!0),void 0===n&&(n=!0),!e){if(r)return!1;e=this.getIndex(-1,null)}var s,a,l,h=this.layoutManager;if(!this.isValid(e)&&r&&(e=e.clone()).normalize(this),!this.isValid(e)){var u=this.dataSource;if(!u||0==u.rowCount||0==this.itemCount)return this._focusedIndex.itemIndex=-1,this._focusedIndex.layout=null,this.clearAddSelection(!0),!1}var c=1===this.selections.count?this.getSelection(0):null;if(Ds.areEquals(e,this._focusedIndex))return!(c&&c.single&&this.selections.containsCell(e))&&this.clearAddSelection(i,n),o&&(h.focusIsVisible(this._focusedIndex)||this.editController.requestPrepareEditor()),!0;var d=this._editOptions,p=this._focusedIndex.clone(),f=this.itemSource,_=this.container.defaultTool;if(this.editOptions.currentChangingFirst?!this._fireCurrentChanging(p,e)||!this._editController.focusedIndexChanging():!this._editController.focusedIndexChanging()||!this._fireCurrentChanging(p,e)){var g=this.activeTool.dragTracker;return g instanceof fh&&(g.dragging?g.cancel():this.activeTool.dragTracker=null),!1}var y=p.item;if(!this.isItemEditing(y)||this.isItemEdited(y)||e.itemIndex==p.itemIndex||y.itemState!==t.ItemState.UPDATING||d.commitWhenNoEdit){if(f&&e.itemIndex!=p.itemIndex)try{if(y)switch(y.itemState){case t.ItemState.INSERTING:if(!this.commit(d.forceInsert,!0))return this.cancel(!0),!1;break;case t.ItemState.APPENDING:if(!this.commit(d.forceAppend,!0))return this.cancel(!0),!1;break;case t.ItemState.UPDATING:if(!this.commit(d.commitWhenNoEdit,!0))return this.cancel(!0),!1}}catch(t){if(t instanceof Dn)return(t=this._fireValidationFail(y.index,t.column,t))&&alert(d.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),this.invalidateLayout(),!1;if(t instanceof Tn)return!1;throw t}}else this.cancel(!0);_.focusedIndexChanging(e),this._focusedIndex.assign(e),this.$_checkFocusedLayout(),l=this.getBodyCellAt(p,!1),a=this.getBodyCellAt(e,!1),this.isValid(p)&&(s=h.getBodyView(p)).$_focusChanged(this,l,!1),this.isValid(e)&&(s=h.getBodyView(e)).$_focusChanged(this,a,!0),f instanceof Jo&&f.setDiffs(this._editOptions.checkDiff,this._editOptions.checkCellDiff,this._editOptions.strictDiff),this._editController.focusedIndexChanged(p,e,!1),_.focusedIndexChanged(p,e);var m=this._focusedIndex,b=this.isValid(m);if(!c||!wa(c.style)||!this.selections.containsCell(m)){var v=o;this.clearAddSelection(i,n,v)}this._layouted&&this._refreshSideViews();var w=!Ds.areEquals(m,h._prevFocused);if(o||w)if(this.$_makeFocusedIndexVisible()){if(this._resetTdFocus=!1,this.accessibility)if(!this.isEditing()&&this.isValid(m)&&this.isValid(p))s=this.getBodyViewAt(p),"mousedown"!==this._eventFrom&&p.itemIndex!==m.itemIndex&&s&&s.tdClone(p),this._resetTdFocus=!0;else{var C=this._items.editingItem;this.isItemEditing()&&C.itemState===t.ItemState.APPENDING&&(this._resetTdFocus=!0)}}else{var x,I;if(this._editController.resetEditor(!1),this.isValid(m)&&this.getItem(m.itemIndex).canEdit()&&this._editController.prepareEditor(m),this.isValid(p))if(x=this.getBodyViewAt(p))(I=x.getRowView(p.item))instanceof Al&&I.resetButtons(this,l,a);if(!this.container.isLayoutNeeded()&&b)if(x=this.getBodyViewAt(m))(I=x.getRowView(m.item))instanceof Al&&I.resetButtons(this,l,a);this.accessibility&&!this.isEditing()&&this.isValid(m)&&this.layoutManager.cellIsVisible(m)&&((s=this.getBodyViewAt(m))&&s.refreshTdFocused(m,!0),this._editController.attachEditor(this.getEditContainer(m),!1))}return this._fireCurrentChanged(this._currentIndex.assign(m)),this.$_checkCurrentRow(),!0},r.prototype._refreshSideViews=function(){this.container.isLayoutNeeded()||(this._rowBarContainer.visible&&this._rowBarContainer.refresh(this),this._headerView.visible&&this._headerView.refresh(this),this._fixedHeaderView.visible&&this._fixedHeaderView.refresh(this),this._rightHeaderView.visible&&this._rightHeaderView.refresh(this))},r.prototype.$_makeFocusedIndexVisible=function(){return this.makeCellVisible(this._focusedIndex)},r.prototype.makeCellVisible=function(t){if(this.isValid(t)||t&&t.column){if(this.layoutManager.makeCellVisible(t),!this.layoutManager.focusIsVisible())return"mousedown"!==this._eventFrom&&this.invalidateLayout(),!0;this.layoutManager.clearFocusRequest()}return!1},r.prototype.makeColumnVisible=function(t){if(t){var e=this.getIndex(this._focusedIndex?this._focusedIndex.itemIndex:-1,t);this.makeCellVisible(e)}},r.prototype.makeItemVisible=function(t){if(t>=0){var e=this.getIndex(t,this._focusedIndex&&this._focusedIndex.layout);this.makeCellVisible(e)}},r.prototype.cancelEditor=function(t){this.isEditing()&&(t=!(arguments.length>0)||t,this._editController.cancelEditor(t))},r.prototype.itemEditCancel=function(){return this._fireItemEditCancel(this.itemSource.editingItem)},r.prototype.$_cancelItem=function(t,e){void 0===e&&(e=!1);var i=Rt.cast(this.itemSource,Jo);return!!(i&&t&&i.isEditing(t))&&(this._validationManager.clearInvalidCells(-1),i.cancel(),e&&this.resetFocusedIndex(),!0)},r.prototype.cancel=function(t){void 0===t&&(t=!1);var e=this.editController;this.isEditing()&&(e.cancelEditor(!0),e.invalidateEditor());var i=this.focusedIndex;return!(!this.isValid(i)||!this.$_cancelItem(i.item))&&(i=i.clone(),this._rowBarContainer.stateError=void 0,e._prepareEditor(e._editIndex),i.normalize(this),i.item instanceof Xo&&i.up(),this.setFocusedIndex(i),t&&this.$_makeFocusedIndexVisible(),!0)},r.prototype.commitEditor=function(t,e){if(void 0===t&&(t=!0),void 0===e&&(e=!1),this.isEditing())return this.editController.commitEditor(t,!1,!0,e)},r.prototype.$_commitItem=function(e,i,o){var r=Rt.cast(this.itemSource,Jo),n=this.validationManager,s=this.editOptions;if(r&&e&&r.isEditing(e)&&(i||r.isEdited(e))){var a=Vo(e.itemState);try{s.validateOnEdited&&n.validateRow(e,a,!1,!1),this._rowBarContainer.stateError=void 0}catch(e){throw e instanceof Dn&&(e.level=e.level||t.ValidationLevel.ERROR,!e.column&&(this._rowBarContainer.stateError=e)),e}if(!r.commit()){if(o)throw new Tn("Commit failed.");return!1}return e.dataId>-1&&n.cloneError(-1,e.dataId),n.clearInvalidCells(-1),this.editOptions.removeValidateOnCommit&&e.dataId>-1&&n.clearInvalidCells(e.dataId),!0}},r.prototype.commit=function(t,e,i){void 0===i&&(i=!0);var o=this.focusedIndex,r=!0;return!!this.isValid(o)&&(this.isEditing()&&(r=this.editController.commitEditor(!0,!1,i,!1),this.editController.invalidateEditor()),r&&this.$_commitItem(o.item,t,e))},r.prototype.editorCancel=function(t,e){this._doCellCancel(e)},r.prototype._doCellCancel=function(t){return this._fireEditCanceled(t)},r.prototype.editorCanceled=function(){this.activeTool.resetFocused()},r.prototype._editorStarted=function(t,e){if(this.closePopups(!1),this.edit(e))return!0},r.prototype._editorChange=function(t,e,i){this._fireEditChange(e,i)},r.prototype._editorSearch=function(t,e,i){this._fireEditSearch(e,i)},r.prototype._searchCellButtonClick=function(t,e,i){return this._fireSearchCellButtonClick(e,i)},r.prototype.$_getFieldDefaults=function(t){for(var e=t.fieldCount,i=[],o=0;o<e;o++)i.push(void 0);for(o=0;o<e;o++){var r=t.getField(o).defaultValue;null!=r&&(i[o]=r)}return i},r.prototype.$_getColumnDefaults=function(t){for(var e=0,i=this.columnCount;e<i;e++){var o=this.getColumn(e);o instanceof ls&&null!=o.defaultValue&&(t[o.dataIndex]=o.defaultValue)}},r.prototype.$_setData=function(t,e,i){var o=e.fieldCount;if(Array.isArray(i))for(var r=0;r<o;r++)r<i.length&&Object.hasOwnProperty.call(i,r)&&(t[r]=i[r]);else if(i)for(r=0;r<o;r++){var n=e.getField(r).orgFieldName;Object.hasOwnProperty.call(i,n)&&(t[r]=i[n])}},r.prototype.$_getInsertDefaults=function(t){var e=this.$_getFieldDefaults(this.itemSource.dataSource);return this.$_getColumnDefaults(e),this.$_setData(e,this.itemSource.dataSource,t),e},r.prototype.sortColumn=function(e,i){e&&(this.sortingOptions.style==t.SortStyle.EXCLUSIVE?i&&i.shiftKey?this.sortColumnWithStyle(t.SortStyle.INCLUSIVE,e):this.sortColumnWithStyle(t.SortStyle.EXCLUSIVE,e):this.sortColumnWithStyle(this.sortingOptions.style,e))},r.prototype.sortColumnWithStyle=function(e,i){if(!i)throw new Error("column is null");if(!(this.isItemEditing(null)||i.dataIndex<0)){var o=this._sortingOptions.textCase;e==t.SortStyle.EXCLUSIVE?i.sortOrder<0?this.orderBy([i],[t.SortDirection.ASCENDING],[o]):i.sortDirection==t.SortDirection.ASCENDING?this.orderBy([i],[t.SortDirection.DESCENDING],[o]):this.isGroupedColumn(i)&&this.itemSource._groupSorting?this.orderBy([i],[t.SortDirection.ASCENDING],[o]):this.unsortColumnWithStyle(e,i):e!=t.SortStyle.INCLUSIVE&&e!=t.SortStyle.REVERSE||(i.sortOrder<0?this.$$_addSort(i,t.SortDirection.ASCENDING,o,e==t.SortStyle.REVERSE):i.sortDirection==t.SortDirection.ASCENDING?this.$$_addSort(i,t.SortDirection.DESCENDING,o,e==t.SortStyle.REVERSE):this.isGroupedColumn(i)&&this.itemSource._groupSorting?this.$$_addSort(i,t.SortDirection.ASCENDING,o,e==t.SortStyle.REVERSE):this.unsortColumnWithStyle(e,i))}},r.prototype.orderBy=function(t,e,i){if(!this.isItemEditing(null))if(!t||t.length<1)this._sortItems([],[],[]);else{for(var o=[],r=t.length,n=0;n<r;n++){var s=t[n];o.push(s.dataIndex)}this._sortItems(o,e,i)}},r.prototype.unsortColumnWithStyle=function(e,i){if(!this.isItemEditing()&&i){var o=this.getSortFields(),r=this.getSortDirections(),n=this.getSortCases(),s=o.indexOf(i.dataIndex);s<0||(e==t.SortStyle.EXCLUSIVE?this.orderBy([],[],[]):e!=t.SortStyle.INCLUSIVE&&e!=t.SortStyle.REVERSE||(o.splice(s,1),r.splice(s,1),n.splice(s,1),this._sortItems(o,r,n)))}},r.prototype.$$_addSort=function(t,e,i,o){var r=this.getSortFields(),n=this.getSortDirections(),s=this.getSortCases(),a=t.dataIndex,l=r.indexOf(a);l>=0?(n[l]=e,s[l]=i):o?(r.splice(0,0,a),n.splice(0,0,e),s.splice(0,0,i)):(r.push(a),n.push(e),s.push(i)),this._sortItems(r,n,s)},r.prototype._sortItems=function(t,e,i){var o=this,r=t.concat(),n=e?e.concat():[],s=i?i.concat():[];this._fireSorting(r,n)&&this._toastManager.show(this.sortingOptions.toast,!0,(function(){var e=o.sortingOptions.keepFocusedRow&&o.focusedIndex?o.focusedIndex.dataRow:-1;if(o._doSortItems(t,n,s),e>=0){var i=Ds.temp(o,o.getItemIndexOfRow(e),o.focusedIndex.column);o._keepLeftPos=!0,o.setFocusedIndex(i,!0,!0)}}))},r.prototype._doPrepareComparer=function(t){for(var e={},i=0;i<t.length;i++){var o=this.columnByField(t[i]);o.sortByLabel&&(e[t[i]]=r(o))}return e;function r(t){var e=t.grid;return function(i,o,r){var n=e.getItemOfRow(o,!0),s=e.getItemOfRow(r,!0),a=br.getText(n,t),l=br.getText(s,t);return a==l?0:null==a?null==l?0:-1:null==l||a>l?1:a<l?-1:0}}},r.prototype._doSortItems=function(t,e,i){},r.prototype.getSortFields=function(){return null},r.prototype.getSortDirections=function(){return null},r.prototype.getSortCases=function(){return null},r.prototype.canFiltering=function(){return this._fireFiltering()},Object.defineProperty(r.prototype,"filterSelecting",{get:function(){return this._filterSelector.opened},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"filterSelector",{get:function(){return this._filterSelector},enumerable:!1,configurable:!0}),r.prototype.applyFilters=function(t,e,i){var o=this;if(this.isItemEditing(null))return!1;if(this._fireFiltering()){var r=this.filteringOptions.toast,n=r.visible;return this.dataCount<=0&&(r.visible=!1),this._toastManager.show(r,!0,(function(){o._keepLeftPos=!0,o.$_doApplyFilters(t,e,i),r.visible=n})),!0}return!1},r.prototype.resetFilters=function(t){this.itemSource.beginFiltering();try{this.getDataColumns(!1).forEach((function(t){t.isFiltered()&&(t.activateAllFilters(!1,!1),t.setInlineFilter(null,!1))})),this.itemSource.clearAllFilters()}finally{this.itemSource.endFiltering(null,null,t)}},r.prototype.getFilteredRows=function(t){var e=this.getAllItems().map((function(t){return t.dataRow}));return t?e.sort((function(t,e){return t-e})):e},r.prototype.$_findFilterView=function(t){if(!t)return{};for(var e,i=[this._fixedFilterView,this._filterPanelView,this._rightFilterView],o=0;o<i.length;o++)if(i[o].visible&&(e=i[o].tableCellByLayout(t)))return{view:i[o],cell:e};return{}},r.prototype.filterOperatorCallback=function(t,e,i){var o=this.layoutByName(i.column),r=this.$_findFilterView(o),n=r.view,s=r.cell;s&&n.operatorChange(s,e,o,i)},r.prototype.clearInlineFilter=function(t){var e=t&&t.layout;if(e){var i=this.$_findFilterView(e),o=i.view,r=i.cell;o.clearInput(r,t)}else[this._fixedFilterView,this._filterPanelView,this._rightFilterView].forEach((function(t){return t.clearInput()})),this.$_doApplyFilters(null,null)},r.prototype.inlineFilterFocus=function(t){var e=this.$_findFilterView(t),i=e.view,o=e.cell;i.setFocus(o)},r.prototype.$_doApplyFilters=function(t,e,i){var o=this.focusedIndex?this.focusedIndex.dataRow:-1,r=this._items.itemCount;this._items.beginFiltering();try{this._filterRunning=!0,this._items.clearAllFilters(),this.$_addFilters()}finally{if(this._items.endFiltering(t,e,i),o>=0){var n=Ds.temp(this,this.getItemIndexOfRow(o),this.focusedIndex.column,!0);this.isValid(n)?this.setFocusedIndex(n,!0,!0):this._filteringOptions.clearFocusWhenFiltered&&this.clearFocusedIndex()}else r!==this._items.itemCount&&(this.topIndex=0);this._filterRunning=!1}},r.prototype.$_addFilters=function(){for(var t=this.columnCount,e=0;e<t;e++){var i=this.getColumn(e),o=i.autoFilter?i.autoFilters:i.filters;if(o&&o.activeCount>0)for(var r=0,n=o.count;r<n;r++){var s;(s=o.getItem(r)).active&&this._items.addFilter(i.dataIndex,s)}if((o=i._inlineFilters)&&o.activeCount>0)(s=o.getItem(0)).active&&this._items.addFilter(i.dataIndex,s)}},r.prototype.columnFilterChanged=function(t,e,i){this._doColumnFiltersChanged(t,e,i)},r.prototype.canGrouping=function(){return!1},r.prototype.$_layoutRowHover=function(e,i,o){var r=this._layoutManager,n=r.footerBounds.y+r.contentBounds.y,s=this.getBodyView(e.cell);if(s){var a=r.getTableRowIndex(i);if(!(a<0)){a=s.getViewIndex(a);var l=r.getTableItemBounds(a);switch(l.y+=r.contentBounds.y+r.bodyBounds.y,l.bottom>n&&(l.bottom=n),o){case t.RowMaskType.DATA:l.x=this._fixedContentPane.x,l.right=this._rightContentPane.width?this._rightContentPane.right:this._contentPane.right;break;case t.RowMaskType.FILL:l.x=0,l.width=this.width;break;case t.RowMaskType.CELL:var h=s.pointByContainer(0,0),u=s.getCellRect(r,e,!0);l.x=u.x+h.x,l.width=u.width;break;case t.RowMaskType.ROW:l.x=0,l.right=this._rightContentPane.width?this._rightContentPane.right:this._contentPane.right}this._rowHoverView.setRect(l)}}},r.prototype.$_resetHovering=function(e,i,o){void 0===o&&(o=!1);var r=this.activeTool,n=this.container.getTableCell(r.mouseEventTarget),s=this.getCellType(n),a=this.container._updateRequested;if(r instanceof Yu&&!a){if(!this.isEditing()){if(o&&this.isRecycleMode()){var l=Ds.temp(this);this.layoutManager.mouseToIndex(n,e,i,l);var h=this.getBodyCellAt(l);h&&(n=h.cell)}var u=!1,c=!1,d=!1;if(s===t.GridCellType.DATA){var p=this.getBodyCellbyCell(n);this.$_setHoveredCell(p,i,o),r.$_setHoveredCell(p,e,i),u=!0}else if(s===t.GridCellType.HEADER){p=this.getHeaderView(n).tableCellByCell(n);r.$_setHoveredHeaderCell(p,e,i),c=!0}else if(s===t.GridCellType.STATE&&this._rowBarContainer.stateError&&this._stateBar.errorVisible&&this.editOptions.hintOnError){var f=this._rowBarContainer.rowOf(n);this.isItemEditing(this.getItem(f))&&(d=!0,r.$_showStateError(n,this._rowBarContainer.stateError.message))}return!(u||c||d)&&r._hideTooltip(),u||this.$_setHoveredCell(null,i,!1),!0}if(this.displayOptions.showTooltipWhileEditing){if(s===t.GridCellType.DATA){p=this.getBodyCellbyCell(n);return r.$_setHoveredCell(p,e,i),!0}if(s===t.GridCellType.HEADER){p=this.getHeaderView(n).tableCellByCell(n);return r.$_setHoveredHeaderCell(p,e,i),!0}}}},r.prototype.$_getCellAt=function(t,e){var i=this.getBodyView(t),o=this.layoutManager,r=this.getDataCellIndex(t,this._currentIndex),n=i.getCellAt(o,r);if(n&&n.merged){var s=o.getTableRowIndex(e);if(s<0)return n;var a=i.getRowIndex(s);return r.itemIndex=Math.min(Math.max(n.item.index,a),n.item.index+n.rowSpan-1),i.getCellAt(o,r)}return n},r.prototype.$_setHoveredCell=function(t,e,i){void 0===i&&(i=!1);var o=t?this.$_getCellAt(t.cell,e):t;if(i||o!==this._hoveredCell){if(this._hoveredCell&&this._hoveredCell.cell)this.getBodyView(this._hoveredCell.cell).$_mouseEnteredChanged(this,this._hoveredCell,!1);if(o)this.getBodyView(o.cell).$_mouseEnteredChanged(this,o,!0);this._doHoveredCellChanged(this._hoveredCell=o)}(i||e!=this._hoveredY)&&(this._hoveredY=e,this.$_resetRowHover())},r.prototype.$_resetRowHover=function(){var e=this._displayOptions.rowHoverType;this._hoveredCell&&e&&e!=t.RowMaskType.NONE?(this._rowHoverView.visible=!0,this.$_layoutRowHover(this._hoveredCell,this._hoveredY,e)):this._rowHoverView.visible=!1},r.prototype.$_resetFocusRender=function(t,e){var i=this.getBodyCellAt(this.focusedIndex,!0),o=i&&i.merged&&(i.renderer2||i.head.renderer2),r=this.canMergeEditing(i);if(o&&o.refreshFocusChanged){var n=this.layoutManager,s=this.getBodyViewAt(this.focusedIndex),a=s.getCellRectAt(n,this.focusedIndex,!1),l=s.getCellRectAt(n,this.focusedIndex,!0),h=a.top-l.top+a.height/2-l.height/2;o.moveClickElement(h,r)}},r.prototype._doHoveredCellChanged=function(t){},r.prototype._doCellButtonClicked=function(t){this._fireCellButtonClicked(t)},r.prototype._syncHeadCheck=function(t,e){var i=this.checkBar;if(i.syncHeadCheck){var o=i.showGroup&&!i.merged;if(!1===e)this._headView.allChecked=e;else if(null==t)this._headView.allChecked=e;else{for(var r=0,n=0,s=void 0,a=i.visibleOnly,l=a?this._items.itemCount:(s=this.getAllItems()).length,h=0;h<l;h++){var u=a?this._items.getItem(h):s[h];if((u.isDataRow||o)&&u.checkable&&(r++,u.checked&&n++,n>0&&r!==n))break}this._headView.allChecked=r>0&&n===r,this._headView.indeterminate=i.headThreeStates&&n>0&&n<r}}},r.prototype.getRowHeight=function(t){var e=this.getItem(t);return e?e.height:NaN},r.prototype.setRowHeight=function(t,e,i){void 0===i&&(i=!0);var o=this.getItem(t);o&&(this._items.setRowHeight(o,e,!0),i&&this.refreshView())},r.prototype.clearRowHeights=function(t){void 0===t&&(t=!1),this._items&&this._items.clearRowHeights(t)&&this.refreshView()},r.prototype.setFocusedClass=function(t,e){if(this.displayOptions.useFocusClass){var i=this.getBodyCellAt(t,!0);i&&i.cell&&(e?Rt.addClassName(i.cell,"rg-focused-cell"):Rt.removeClassName(i.cell,"rg-focused-cell"))}},r.prototype.setFocusedRowClass=function(t,e){function i(t,i){var o=t.getRowView(i);if(o)for(var r=0,n=o._getTableRows(this.layoutManager);r<n.length;r++){var s=n[r];e?Rt.addClassName(s,"rg-focused-row"):Rt.removeClassName(s,"rg-focused-row")}}if(this.displayOptions.useFocusClass){var o=t.item;i.call(this,this.bodyView,o),i.call(this,this.fixedBodyView,o),i.call(this,this.rightBodyView,o)}},r.prototype.getSummaryCount=function(t){switch(t){case"summary":return this.headerSummaries.count;case"footer":return this.footers.count;default:return 0}},r.prototype.topIndexChanging=function(t,e,i,o){return this._fireTopIndexChanging(t,e,i,o)},r.prototype.$_rendererChanged=function(t){var e=this._layoutManager.getBodyView(t);e&&e.$_rendererChanged(t)},r.prototype.$_clearDropData=function(t){var e=this.getRowsOfItems(t,!1);e.length>0&&this.dataSource.removeRows(e)},r.prototype.$_dropData=function(e,i,o){var r=this.dataDropOptions,n=r.callback,s=o.index;if(n)n(e.handler,i,this.handler,o.index,o.column);else if(s>=0){var a=e.getRowsOfItems(i),l=void 0,h=r.fieldMapCallback;if(h&&(l=h(e.handler,i,this.handler,s,o.column)),l=l||r.fieldMap,s<this.itemCount){var u=this.getRowOfItem(s);u>=0&&this.dataSource.insertRowsFrom(e.dataSource,l,a,u)}else this.dataSource.appendRowsFrom(e.dataSource,l,a)}r.dropMode==t.DataDropMode.MOVE&&e.$_clearDropData(i)},r.prototype.$_checkFocusedLayout=function(){if(this._focusedIndex){var t=this.getBodyCellAt(this._focusedIndex);t&&t.spanned&&(this._focusedIndex.layout=t.spanHead.layout)}},r.prototype.$_isBottomCell=function(t){var e=this.getBodyCellAt(t);if(e)return this.getBodyView(e.cell).isBottomCell(e)},r.prototype.$_getLowerOfCell=function(t){var e=this.getBodyCellAt(t);if(e)return(e=this.getBodyView(e.cell).getLowerOf(e))&&e.layout.source},r.prototype.$_isTopCell=function(t){var e=this.getBodyCellAt(t);if(e)return this.getBodyView(e.cell).isTopCell(e)},r.prototype.$_getUpperOfCell=function(t){var e=this.getBodyCellAt(t);if(e)return(e=this.getBodyView(e.cell).getUpperOf(e))&&e.layout.source},r.prototype.setCheckFieldIndex=function(t){this._items.setCheckFieldIndex(t)},r.prototype._fireCurrentChanging=function(t,e){return this.fireConfirmEvent("onGridBaseCurrentChanging",t,e)},r.prototype._fireCurrentChanged=function(t){this.fireEvent("onGridBaseCurrentChanged",t)},r.prototype._fireCurrentRowChanged=function(t,e){this.fireEvent("onGridBaseCurrentRowChanged",t,e)},r.prototype._fireValidateCell=function(t,e,i){this.fireEvent("onGridBaseValidateCell",t,e,i)},r.prototype._fireValidateRow=function(t,e,i){this.fireEvent("onGridBaseValidateRow",t,e,i)},r.prototype._fireValidationFail=function(t,e,i){return this.fireObjectEvent("onGridBaseValidationFail",t,e,i)},r.prototype._fireCellClicked=function(t){this.fireEvent("onGridBaseCellClicked",t)},r.prototype._fireCellDblClicked=function(t){this.fireEvent("onGridBaseCellDblClicked",t)},r.prototype._fireCellItemClicked=function(t,e){return this.fireConfirmEvent("onGridBaseCellItemClicked",t,e)},r.prototype._fireColumnCheckedChanged=function(t){this.fireEvent("onGridBaseColumnCheckedChanged",t,t.checked)},r.prototype._fireMenuItemClicked=function(t,e){this.fireEvent("onGridBaseMenuItemClicked",t,e)},r.prototype._fireContextMenuPopup=function(t,e,i,o,r){return this.fireObjectEvent("onGridBaseContextMenuPopup",t,e,i,o,r)},r.prototype._fireContextMenuItemClicked=function(t,e){this.fireEvent("onGridBaseContextMenuItemClicked",t,e)},r.prototype._fireCellButtonClicked=function(t){this.fireEvent("onGridBaseCellButtonClicked",t)},r.prototype._fireEditButtonClicked=function(t){this.fireEvent("onGridBaseEditButtonClicked",t)},r.prototype._fireScrollToBottom=function(){this.fireEvent("onGridBaseScrollToBottom")},r.prototype._fireTopIndexChanging=function(t,e,i,o){return this.fireObjectEvent("onGridBaseTopIndexChanging",t,e,i,o)},r.prototype._fireTopIndexChanged=function(t){this.fireEvent("onGridBaseTopIndexChanged",t)},r.prototype._fireLeftPosChanged=function(t){this.fireEvent("onGridBaseLeftPosChanged",t)},r.prototype._fireDataCellClicked=function(t){this.fireEvent("onGridBaseDataCellClicked",t)},r.prototype._fireDataCellDblClicked=function(t){this.fireEvent("onGridBaseDataCellDblClicked",t)},r.prototype._fireRowsDeleting=function(t){return this.fireConfirmEvent("onGridBaseRowsDeleting",t)},r.prototype._fireRowInserting=function(t,e){return this.fireConfirmEvent("onGridBaseRowInserting",t,e)},r.prototype._fireItemCommit=function(t,e){this.fireEvent("onGridBaseItemCommit")},r.prototype._fireSelectionChanged=function(t){return this.fireEvent("onGridBaseSelectionChanged",t)},r.prototype._fireSelectionAdded=function(t){return this.fireEvent("onGridBaseSelectionAdded",t)},r.prototype._fireSelectionRemoved=function(){return this.fireEvent("onGridBaseSelectionRemoved")},r.prototype._fireSelectionCleared=function(){return this.fireEvent("onGridBaseSelectionCleared")},r.prototype._fireSelectionResized=function(t){return this.fireEvent("onGridBaseSelectionResized")},r.prototype._fireSelectionEnded=function(t){return this.fireEvent("onGridBaseSelectionEnded",t)},r.prototype._fireUpdateStarted=function(t,e){this.fireEvent("onGridBaseUpdateStarted",t)},r.prototype._fireInsertStarted=function(t,e){this.fireEvent("onGridBaseInsertStarted",t,e)},r.prototype._fireShowEditor=function(t,e,i){return this.fireConfirmEvent("onGridBaseShowEditor",t,e,i)},r.prototype._fireShowEditCommand=function(t){return this.fireConfirmEvent("onGridBaseShowEditCommand",t)},r.prototype._fireHideEditor=function(t){return this._doEditorActivated(t,!1,null),this.fireEvent("onGridBaseHideEditor",t)},r.prototype._fireEditChange=function(t,e){this.fireEvent("onGridBaseEditChange",t,e)},r.prototype._fireGetEditValue=function(t,e){return this.fireObjectEvent("onGridBaseGetEditValue",t,e)},r.prototype._fireEditCommit=function(t,e,i){return this.fireConfirmEvent("onGridBaseEditCommit",t,e,i)},r.prototype._fireEditCanceled=function(t){this.fireEvent("onGridBaseEditCanceled",t)},r.prototype._fireItemEditCancel=function(t){return this.fireConfirmEvent("onGridBaseItemEditCancel",t)},r.prototype._fireItemEditCanceled=function(t){this.fireEvent("onGridBaseItemEditCanceled",t)},r.prototype._fireEditSearch=function(t,e){this.fireEvent("onGridBaseEditSearch",t,e)},r.prototype._fireSearchCellButtonClick=function(t,e){return this.fireObjectEvent("onGridBaseSearchCellButtonClick",t,e)},r.prototype._fireCellEdited=function(t,e){this.fireEvent("onGridBaseCellEdited",t,e)},r.prototype._fireEditRowChanged=function(t,e,i,o){this.fireEvent("onGridBaseEditRowChanged",t,e,i,o)},r.prototype._fireEditItemPasted=function(t,e,i,o){this.fireEvent("onGridBaseEditRowPasted",t,e,i,o)},r.prototype._fireItemsPasted=function(t){this.fireEvent("onGridBaseRowsPasted",t)},r.prototype._fireCellPasting=function(t,e,i){return this.fireObjectEvent("onGridBaseCellPasting",t,e,i)},r.prototype._fireItemChecked=function(t){this.fireEvent("onGridBaseItemChecked",t,t.checked)},r.prototype._fireItemsChecked=function(t,e){this.fireEvent("onGridBaseItemsChecked",t,e)},r.prototype._fireItemAllChecked=function(t){this.fireEvent("onGridBaseItemAllChecked",t)},r.prototype._fireErrorClicked=function(t,e){this.fireEvent("onGridBaseErrorClicked",e)},r.prototype._fireSorting=function(t,e){return this.fireConfirmEvent("onGridBaseSorting",t,e)},r.prototype._fireFiltering=function(t){return this.fireConfirmEvent("onGridBaseFiltering",t)},r.prototype._fireKeyDown=function(t){return this.fireConfirmEvent("onGridBaseKeyDown",t)},r.prototype._fireWheel=function(t){return this.fireConfirmEvent("onGridBaseWheel",t)},r.prototype._fireKeyPress=function(t){this.fireEvent("onGridBaseKeyPress",t)},r.prototype._fireKeyUp=function(t){this.fireEvent("onGridBaseKeyUp",t)},r.prototype._fireShowTooltip=function(t,e,i){return this.fireObjectEvent("onGridBaseShowTooltip",t,e,i)},r.prototype._fireShowHeaderTooltip=function(t,e,i,o){return this.fireObjectEvent("onGridBaseShowHeaderTooltip",t,e,i,o)},r.prototype._fireColumnPropertyChanged=function(t,e,i,o){this.fireEvent("onGridBaseColumnPropertyChanged",t,e,i,o)},r.prototype._fireLayoutPropertyChanged=function(t,e,i,o){this.fireEvent("onGridBaseLayoutPropertyChanged",t,e,i,o)},r.prototype._fireGridActivated=function(){return this.fireEvent("onGridBaseGridActivated",this)},r.prototype._fireGridFocusChanged=function(t,e,i){this.fireEvent("onGridBaseGridFocusChanged",t,e,i)},r.prototype._fireCopy=function(t,e){return this.fireConfirmEvent("onGridBaseCopy",t,e)},r.prototype._firePaste=function(t,e){return this.fireConfirmEvent("onGridBasePaste",t,e)},r.prototype._firePasted=function(){this.fireEvent("onGridBasePasted")},r.prototype._fireCommandStackChanged=function(t,e){this.fireEvent("onGridBaseCommandStackChanged",t,e)},r.prototype.onPopupMenuManagerMenuItemClicked=function(t,e,i){this._fireMenuItemClicked(e,i)},r.prototype.onPopupMenuManagerPopup=function(t,e,i,o,r,n){return this._fireContextMenuPopup(e,i,o,r,n)},r.prototype.onItemProviderOuterSort=function(e,i,o,r){var n=this;if(i instanceof Function){return function(e,o){var r=e.map((function(e,i,r){return{fieldName:n.dataSource.getFieldName(e),orgFieldName:n.dataSource.getOrgFieldName(e),direction:o[i]||t.SortDirection.ASCENDING}}));return i.call(n,n.handler,r)}(o,r)}},r.prototype.onScrollBarScrolled=function(t,e,i,o){var r,n,s,a=this.displayOptions,l=this.fixedOptions,h=a.scrollMessageCallback,u=e===sh.SCROLL_END;if(!u&&this.scrollOnEditing(),t.vertical){var c=-1;switch(e){case sh.LINE:return void this.scrollRow(i);case sh.PAGE:c=Math.max(0,this.topIndex+i*t._page);break;case sh.THUMB_TRACK:var d=a.scrollDuration;a.liveScroll||this._scrolledTime>0&&Rt.getTimer()-this._scrolledTime>d?(c=o,this._scrolledTime=0):(this._scrollTipView||(this._scrollTipView=new Dh(this.container)),this._vscrollBar.tipView=this._scrollTipView,this._vscrollBar.setPosition(o,!0),n=this._vscrollBar.pos+l.rowCount,r=h?h(this.handler,t.vertical,n):String(n+1),this._vscrollBar.setText(r),d>0&&0==this._scrolledTime&&(this._scrolledTime=Rt.getTimer()));break;case sh.THUMB_END:this._scrollTipView&&this._scrollTipView.hide(),this._vscrollBar.tipView=null,c=o,u=!0;break;default:c=o}c>=0&&(this.topIndex=c)}else{var p=-1;switch(e){case sh.LINE:p=Math.max(0,this.leftPos+8*i);break;case sh.PAGE:p=i>0?this._layoutManager.scrollToNextCell():this._layoutManager.scrollToPrevCell();break;case sh.THUMB_TRACK:d=a.hscrollDuration;a.liveScroll||this._scrolledTime>0&&Rt.getTimer()-this._scrolledTime>d?(p=o,this._scrolledTime=0):(this._scrollTipView||(this._scrollTipView=new Dh(this.container)),this._hscrollBar.tipView=this._scrollTipView,(s=this._layoutManager.getPositionToVIndex(o))>-1&&(r=h?h(this.handler,t.vertical,s):this.getVisibleLayout(s).getDataColumn().header.displayText,this._hscrollBar.setText(r)),this._hscrollBar.setPosition(o,!0),d>0&&0==this._scrolledTime&&(this._scrolledTime=Rt.getTimer()));break;case sh.THUMB_END:this._scrollTipView&&this._scrollTipView.hide(),this._hscrollBar.tipView=null,p=o,u=!0;break;default:p=o}p>=0&&(this.leftPos=p)}u&&!Rt.isMobile()&&this.setFocus()},r.prototype.$_checkFocusedRow=function(t){void 0===t&&(t=!1),this.focusedRow>=this.itemCount&&this.clearFocusedIndex(t)},r.prototype.onItemProviderReset=function(t,e){this.hideEditor(),this._dataChanged=!0,this._needRefresh=!0,this.clearRowHeights(),this._columnsReset(),this._populateMerges(),this.$_checkFocusedRow(),this._itemCheckChanged=!0,this.resetGrid(e),this.$_refreshInvalidList(!0)},r.prototype.onItemProviderRefresh=function(t,e){this.hideEditor(),this._dataChanged=!0,this._needRefresh=!0,this._resetColumnSortStates(),!1!==e&&this.clearRowHeights(),this._populateMerges(),this._filterRunning&&this.filteringOptions.clearFocusWhenFiltered||this.$_checkFocusedRow(!0),this._itemCheckChanged=!0,this.refreshView(),this.$_refreshInvalidList(!1)},r.prototype.onItemProviderRefreshClient=function(t){this.hideEditor(),this._dataChanged=!0,this._needRefresh=!0,this._populateMerges(),this.$_checkFocusedRow(),this.refreshView()},r.prototype.onItemProviderItemInserted=function(t,e){if(t.dataSource.undoing||t.dataSource.redoing){var i=this._focusedIndex.clone();i.itemIndex=e.index,this.setFocusedIndex(i,!0,!0)}},r.prototype.onItemProviderItemDeleted=function(t,e){if(t.dataSource.undoing||t.dataSource.redoing){var i=this._focusedIndex.clone();i.itemIndex=e.index,this.setFocusedIndex(i,!0,!0)}},r.prototype.onItemProviderItemUpdated=function(t,e){if(t.dataSource.undoing||t.dataSource.redoing){var i=this._focusedIndex.clone();i.itemIndex=e.index,this.setFocusedIndex(i,!0,!0)}},r.prototype.onItemProviderCheckableChanged=function(t,e){this._itemCheckChanged=!0,this.refreshView()},r.prototype.onItemProviderItemChecked=function(t,e){this.refreshView(),this._fireItemChecked(e)},r.prototype.onItemProviderItemsChecked=function(t,e,i){this.refreshView(),this._fireItemsChecked(e,i)},r.prototype.onItemProviderItemAllChecked=function(t,e){this.refreshView(),this._fireItemAllChecked(e)},r.prototype.onItemProviderItemCheckChanged=function(t,e,i){this._itemCheckChanged=!0,!this.isTree()&&this.checkBar.canMerge()&&this._populateMerges()},r.prototype.onItemProviderRowStateChanged=function(t,e){this.refreshView()},r.prototype.onItemProviderRowStatesChanged=function(t,e){this.refreshView()},r.prototype.onItemProviderRowStatesCleared=function(t){this.refreshView()},r.prototype.onItemProviderSort=function(t,e,i){this.refreshView()},r.prototype.onItemProviderSorted=function(t){this.header.dirty=!0,this._needRefresh=!0,this.refreshView(),this.fireEvent("onGridBaseSortingChanged")},r.prototype.onItemProviderFiltered=function(t,e,i,o){this._populateMerges(),this._filterRunning&&this.filteringOptions.clearFocusWhenFiltered||this.$_checkFocusedRow(),this._itemCheckChanged=!this._loading,this.header.dirty=!0,this._needRefresh=!0,this.refreshView(),this.fireEvent("onGridBaseFilteringChanged",e,i,o)},r.prototype.onItemProviderCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},r.prototype.onItemProviderDataLoadComplated=function(t){this._prevLast=0,this._dataLoad=!0},r.prototype.$_focusEditItem=function(t){var e=this.getIndex(t.index,this.focusedIndex?this.focusedIndex.column:null);!e.column&&this.visibleLayoutCount>0&&(e._layout=this.getVisibleLayout(0)),this.setFocusedIndex(e,!0),this.makeCellVisible(this.focusedIndex)},r.prototype.$_beforeEditing=function(t,e){},r.prototype.onItemEditUpdateStarted=function(t,e){this.$_beforeEditing(t,e),this.refreshView(),this._fireUpdateStarted(e,!1)},r.prototype.onItemEditAppendStarted=function(t,e){this.$_beforeEditing(t,e),this.hideEditor(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(e),this.requestPrepareEditor(),this._fireInsertStarted(e,!0)},r.prototype.onItemEditInsertStarted=function(t,e){this.$_beforeEditing(t,e),this.hideEditor(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(e),this.requestPrepareEditor(),this._fireInsertStarted(e,!1)},r.prototype.onItemEditCellEdited=function(t,e,i){this.refreshView(),!this._cellUpdateEventLock&&this._fireCellEdited(e,i)},r.prototype.onItemEditCellUpdated=function(t,e,i,o,r){this.refreshView(),!this._cellUpdateEventLock&&this._fireEditRowChanged(e,i,o,r)},r.prototype.onItemEditCommitting=function(t,e){},r.prototype.onItemEditCommitted=function(t,e){this._appendDummy(),this.hideEditor(),this.refreshView()},r.prototype.onItemEditCanceled=function(t){this._appendDummy(),this.hideEditor(),this._populateMerges(),this.refreshView(),this._fireItemEditCanceled(t._editingItem)},r.prototype.onItemEditCommitRequest=function(t){this.commit(!1)},r.prototype.onItemEditCancelReuqest=function(t){this.cancel()},r.prototype.onLookupSourceProviderChanged=function(t){this._resetColumnIndices(),this.refreshView()},r.prototype.onSelectionChanged=function(t,e,i){this._refreshSideViews(),i&&this._fireSelectionChanged(e)},r.prototype.onSelectionAdded=function(t,e,i){this._addSelectionView(e),this._layoutSelectionViews(),i&&this._fireSelectionAdded(e)},r.prototype.onSelectionRemoved=function(t,e){this._removeSelectionView(e),this._fireSelectionRemoved()},r.prototype.onSelectionCleared=function(t,e){this._selectionLayer.clearViews(),this._refreshSideViews(),e&&this._fireSelectionCleared()},r.prototype.onSelectionResized=function(t,e){this._layoutSelectionViews(),this._fireSelectionResized(e)},r.prototype.onSelectionEnded=function(t,e){this._fireSelectionEnded(e)},r.prototype.onLayoutExpanding=function(t,e){return this.fireConfirmEvent("onGridBaseLayoutExpanding",e)},r.prototype.onLayoutExpanded=function(t,e){this.fireEvent("onGridBaseLayoutExpanded",e)},r.prototype.onLayoutCollapsing=function(t,e){return this.fireConfirmEvent("onGridBaseLayoutCollapsing",e)},r.prototype.onLayoutCollapsed=function(t,e){this.fireEvent("onGridBaseLayoutCollapsed",e)},r.prototype.onMenuItemClick=function(t,e){this._fireContextMenuItemClicked(t,e)},r}(ya),qc=function(t){function e(){var e=t.call(this)||this;return e.prepareProgress=10,e.indicatorNo=1,e}return o(e,t),e.prototype.dispose=function(){return null},e.prototype.export=function(t,e){this.grid=t},e}(xo),Kc=function(e){function i(){return e.call(this)||this}return o(i,e),i.prototype.dispose=function(){return e.prototype.dispose.call(this),null},i.prototype.export=function(t,i){e.prototype.export.call(this,t,i);var o=this._exportOptions=i;this._cols=[];var r=t.collectColumns(!0,!0,!0);this._cols=r.filter((function(t){return t instanceof as}));var n=this.indicator=o.indicatorVisible(t)?t.rowIndicator:null;this.header=o.headerVisible(t),this.headerSummary=o.headerSummaryVisible(t),this.footer=o.footerVisible(t),this.indicatorHead=n&&Rt.toStr(n.headText),this.indicatorFoot=n&&Rt.toStr(n.footText),this.indicatorSummary=n&&Rt.toStr(n.sumText),this.done=function(){this.save()},this.buildBook()},i.prototype.prepare=function(){},i.prototype.finallize=function(){},i.prototype.buildBook=function(){this.buildSheet(this.grid)},i.prototype.buildSheet=function(t){this._rows=[],this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1,this._exportOptions.headerSummary),this.buildItems(t),this.footer&&this.buildSummaryItem(t,!0,this._exportOptions.footer),this.done()},i.prototype.addQuatation=function(e,i){return Rt.addQuatation(e,i===t.ValueType.TEXT,this._exportOptions.replaceLfText,this._exportOptions.replaceCrText)},i.prototype.buildHeader=function(t){var e=[],i=this._cols;this.indicator&&e.push(this.indicatorHead);for(var o=i.length,r=0;r<o;r++){var n=i[r];e.push(this.addQuatation(n.header.displayText))}this._rows.push(e.join(","))},i.prototype.buildSummaryItem=function(t,e,i){var o,r=this._exportOptions,n=e?t.footers:t.headerSummaries;if(n.visible)for(var s=n.visibleCount,a=0;a<s;a++){var l=[];this.indicator&&l.push(0==a?this.indicatorFoot:"");for(var h=n.getVisible(a),u=0,c=this._cols.length;u<c;u++){var d=this._cols[u],p=h.getCell(d.layout),f=p.getSummary(),_=p.value;o="number"==typeof _?isNaN(_)?p.text:String(_):_ instanceof Date?r.datetimeCallback?(_=r.datetimeCallback(-1,d.name,_,t.handler))instanceof Date?Ge.Default.getText(_):_:Ge.Default.getText(_):null==_?p.text||f.text:String(_),l.push(this.addQuatation(o))}this._rows.push(l.join(","))}},i.prototype.buildItems=function(t){for(var e=this.allItems?this.allItems.length:t.itemSource.itemCount,i=this.allItems,o=0;o<e;o++){var r=i?i[o]:t.getItem(o);this.buildRow(t,r)}},i.prototype.buildRow=function(t,e){var i,o=this._exportOptions,r=[];if(this.indicator){var n=o.showIndicatorRow(t)?e.dataRow:this.indicatorNo++;r.push(n.toString())}for(var s=0,a=this._cols.length;s<a;s++){var l=this._cols[s],h=void 0;if(i=void 0,l instanceof ls)if(h=l.getField()){var u=Ms.tempItem(t,e,l);i=t.getDisplayText(u)}else i="";r.push(this.addQuatation(i,h&&h.dataType))}this._rows.push(r.join(","))},i.prototype.buildGroupHeader=function(t,e){},i.prototype.buildGroupFooter=function(t,e){},i.prototype.buildMergedGroupHeader=function(t,e){},i.prototype.buildMergedGroupFooter=function(t,e){},i.prototype.buildTreeSheet=function(t){this._rows=[],this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1,this._exportOptions.headerSummary),this.buildTreeItems(t),this.footer&&this.buildSummaryItem(t,!0,this._exportOptions.footer),this.done()},i.prototype.buildTreeItems=function(t){for(var e=this.allItems?this.allItems.length:t.itemCount,i=this.allItems,o=0;o<e;o++){var r=i?i[o]:t.getItem(o);if(!(r instanceof In))throw"Unkonw tree item type";this.buildTreeRow(t,r)}},i.prototype.buildTreeRow=function(t,e){this.buildRow(t,e)},i.prototype.save=function(){var e=this._exportOptions,i=e.fileName,o="\ufeff"+this._rows.join("\n"),r=this.grid.doc;e.done&&"function"==typeof e.done&&(e.target===t.ExportTarget.STREAM?e.done(o):e.done()),e.target==t.ExportTarget.LOCAL?this.saveLocal(i,o,r):e.target==t.ExportTarget.REMOTE&&this.saveServer(i,Pt.encode(o),e.url,r,e.params)},i}(qc),Xc=function(t){function e(e){var i=t.call(this)||this;return i._styles=null,i.message="",i.visible=!0,i.spaceTop=0,i.spaceBottom=0,i.height=-1,i.styleName="",e&&i.extend(e),i._styles=e&&e.styles?e.styles:null,i}return o(e,t),e.prototype._doDispose=function(){this._styles=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"cssStyle",{get:function(){return this._styles},enumerable:!1,configurable:!0}),e}(Lt),Zc="default",Jc="hidden",Qc="visible",td="default",ed="item",id="reverse";t.ExportLayoutExpand=void 0,(kc=t.ExportLayoutExpand||(t.ExportLayoutExpand={})).IGNORE="ignore",kc.CURRENT="current",kc.EXPAND="expand",kc.COLLAPSE="collapse";var od=function(e){function i(t){var i=e.call(this,t)||this;return i.nullDateText="",i.linear=!1,i.allColumns=!1,i.allItems=!0,i.onlyCheckedItems=!1,i.pagingAllItems=!1,i.indicator=Zc,i.checkBar=Jc,i.header=Zc,i.footer=Zc,i.headerSummary=Zc,i.indicatorValue=td,i.checkMark="v",i.unCheckMark="",i.indenting=!0,i.separateRows=!1,i.fillMergeFooterValue=!1,i.lookupDisplay=!1,i.showLevelOutline=!1,i.outlineSummaryBelow=!0,i.outlineSummaryRight=!0,i.applyFitStyle=!0,i.applyDynamicStyles=!1,i.applyDefaultColumnFormat=!1,i.applyFixed=!1,i.sheetName=null,i.exportSeriesColumn=!1,i.showColumns=[],i.hideColumns=[],i.hiddenColumns=[],i.exportLink=!1,i.exportTemplate=!1,i.sheetAttrs=null,i.stylePrefix="",i.trailPointZeroFormat=void 0,i.layoutExpand=null,i.exportShape=void 0,i.exportImage=void 0,i.bulkImageDownload=!0,i.exportLayout=void 0,i.userCells=void 0,i.userCellsCallback=void 0,i.sheetProtect=!1,i.protectPassword=void 0,i.exportMemo=void 0,i.extend(t),i}return o(i,e),i.prototype._doDispose=function(){this._documentTitle&&(this._documentTitle=this._documentTitle.dispose()),this._documentSubtitle&&(this._documentSubtitle=this._documentSubtitle.dispose()),this._documentTail&&(this._documentTail=this._documentTail.dispose()),e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"documentTitle",{get:function(){return this._documentTitle},set:function(t){this._documentTitle=new Xc(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"documentSubtitle",{get:function(){return this._documentSubtitle},set:function(t){this._documentSubtitle=new Xc(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"documentTail",{get:function(){return this._documentTail},set:function(t){this._documentTail=new Xc(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"protectProperties",{get:function(){return this.sheetProtect&&(this._protectProperties=this._protectProperties||{},Rt.extendObj({objects:"1",scenarios:"1"},this._protectProperties)),this._protectProperties},set:function(t){this._protectProperties=t?Rt.deepCopy(t):void 0},enumerable:!1,configurable:!0}),i.prototype.indicatorVisible=function(t){if(t)switch(this.indicator){case Qc:return!0;case Jc:return!1;default:return t.rowIndicator.visible}return!1},i.prototype.checkBarVisible=function(t){if(t)switch(this.checkBar){case Qc:return!0;case Jc:return!1;default:return t.checkBar.visible}return!1},i.prototype.headerVisible=function(t){if(t)switch(this.header){case Qc:return!0;case Jc:return!1;default:return t.header.visible}return!1},i.prototype.headerSummaryVisible=function(t){if(t)switch(this.headerSummary){case Qc:return!0;case Jc:return!1;default:return t.headerSummaries.visible&&t.headerSummaries.visibleCount>0}return!1},i.prototype.footerVisible=function(t){if(t)switch(this.footer){case Qc:return!0;case Jc:return!1;default:return t.footers.visible&&t.footers.visibleCount>0}return!1},i.prototype.showIndicatorRow=function(e){if(e)switch(this.indicatorValue){case id:case ed:return!1;case"row":return!0;default:return e.rowIndicator.displayValue==t.IndicatorValue.ROW}return!1},i.prototype.showIndicatorReverse=function(e){if(e)switch(this.indicatorValue){case"row":case ed:return!1;case id:return!0;default:return e.rowIndicator.displayValue==t.IndicatorValue.REVERSE}},Object.defineProperty(i.prototype,"yOffset",{get:function(){return null==this._yOffset?0:this._yOffset},set:function(t){this._yOffset=Math.floor(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"xOffset",{get:function(){return null==this._xOffset?0:this._xOffset},set:function(t){this._xOffset=Math.floor(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"xOffsetWidth",{get:function(){return null==this._xOffsetWidth?100:this._xOffsetWidth},set:function(t){this._xOffsetWidth=Math.floor(t)},enumerable:!1,configurable:!0}),i}(Co),rd=function(t){function e(e,i){var o=t.call(this,i)||this;return o._grids=[],o._parseGrids(e,i),o}return o(e,t),Object.defineProperty(e.prototype,"exportGrids",{get:function(){return this._grids},enumerable:!1,configurable:!0}),e.prototype._doDispose=function(){this._grids=null,t.prototype._doDispose.call(this)},e.prototype._parseGrids=function(t,e){var i=e.exportGrids;if(i&&Array.isArray(i))for(var o=0,r=i.length;o<r;o++){var n,s=i[o].grid;s=s.$_handler?s:s._view,(n=new od(e)).assignFrom(i[o]),n.extend(i[o]),n.grid=s;var a={grid:s,sheetName:i[o].sheetName,options:n};this._grids.push(a)}else(n=new od(e)).extend(e),n.grid=t,this._grids.push({grid:t,sheetName:e.sheetName?String(e.sheetName):"sheet1",options:n})},e}(od),nd=Rt.hex,sd=function(){function t(e,i){void 0===e&&(e=null),void 0===i&&(i=!1),this._r=0,this._g=0,this._b=0,this._a=0,"string"==typeof e?t._parse(e,this,i,!1):e instanceof t?(this._r=e._r,this._g=e._g,this._b=e._b,this._a=e._a):isNaN(e)?(this._r=this._g=this._b=0,this._a=i?NaN:1):(this._a=(e>>>24)/255,this._r=(16711680&e)>>16,this._g=(65280&e)>>8,this._b=255&e)}return t._parse=function(t,e,i,o){if(t){var r=t.length;if("#"==(t=t.trim().toLowerCase()).charAt(0))if(t=t.substr(1),--r>=6&&r<=8)e._b=Rt.toInt(t.substr(r-2,2),16),e._g=Rt.toInt(t.substr(r-4,2),16),e._r=Rt.toInt(t.substr(r-6,2),16),e._a=6==r?i?NaN:1:Rt.toInt(t.substr(0,r-6),16)/255;else{if(3!=r){if(o)throw"Invalid color value text: "+t;return!1}e._r=Rt.toInt(t.charAt(0)+t.charAt(0),16),e._g=Rt.toInt(t.charAt(1)+t.charAt(1),16),e._b=Rt.toInt(t.charAt(2)+t.charAt(2),16),e._a=i?NaN:1}else if(0==t.indexOf("rgba(")&&")"==t.charAt(r-1)){var n=(t=t.substring(5,r-1)).split(",");e._r=Rt.toInt(n[0]),e._g=Rt.toInt(n[1]),e._b=Rt.toInt(n[2]),e._a=Rt.toFloat(n[3])}else{if(0!=t.indexOf("rgb(")||")"!=t.charAt(r-1)){if(ad.hasOwnProperty(t)){n=ad[t];return e._r=n._r,e._g=n._g,e._b=n._b,e._a=n._a,n}if(o)throw new Error("Invalid color text: "+t);return!1}var n=(t=t.substring(4,r-1)).split(",");e._r=Rt.toInt(n[0]),e._g=Rt.toInt(n[1]),e._b=Rt.toInt(n[2]),e._a=i?NaN:1}return!0}return!1},t.prototype.toHex=function(){return""+nd(Math.floor(255*this._a))+nd(this._r)+nd(this._g)+nd(this._b)},t.prototype.toColorHex=function(){return""+nd(this._r)+nd(this._g)+nd(this._b)},t.prototype.toString=function(){return"#"+nd(Math.floor(255*this._a))+nd(this._r)+nd(this._g)+nd(this._b)},t}(),ad={transparent:new sd("#00000000"),ltGray:new sd("#d3d3d3"),ltgray:new sd("#d3d3d3"),aliceblue:new sd("#f0f8ff"),antiquewhite:new sd("#faebd7"),aqua:new sd("#00ffff"),aquamarine:new sd("#7fffd4"),azure:new sd("#f0ffff"),beige:new sd("#f5f5dc"),bisque:new sd("#ffe4c4"),black:new sd("#000000"),blanchedalmond:new sd("#ffebcd"),blue:new sd("#0000ff"),blueviolet:new sd("#8a2be2"),brown:new sd("#a52a2a"),burlywood:new sd("#deb887"),cadetblue:new sd("#5f9ea0"),chartreuse:new sd("#7fff00"),chocolate:new sd("#d2691e"),coral:new sd("#ff7f50"),cornflowerblue:new sd("#6495ed"),cornsilk:new sd("#fff8dc"),crimson:new sd("#dc143c"),cyan:new sd("#00ffff"),darkblue:new sd("#00008b"),darkcyan:new sd("#008b8b"),darkgoldenrod:new sd("#b8860b"),darkgray:new sd("#a9a9a9"),darkgreen:new sd("#006400"),darkgrey:new sd("#a9a9a9"),darkkhaki:new sd("#bdb76b"),darkmagenta:new sd("#8b008b"),darkolivegreen:new sd("#556b2f"),darkorange:new sd("#ff8c00"),darkorchid:new sd("#9932cc"),darkred:new sd("#8b0000"),darksalmon:new sd("#e9967a"),darkseagreen:new sd("#8fbc8f"),darkslateblue:new sd("#483d8b"),darkslategray:new sd("#2f4f4f"),darkslategrey:new sd("#2f4f4f"),darkturquoise:new sd("#00ced1"),darkviolet:new sd("#9400d3"),deeppink:new sd("#ff1493"),deepskyblue:new sd("#00bfff"),dimgray:new sd("#696969"),dimGray:new sd("#696969"),dimgrey:new sd("#696969"),dodgerblue:new sd("#1e90ff"),firebrick:new sd("#b22222"),floralwhite:new sd("#fffaf0"),forestgreen:new sd("#228b22"),fuchsia:new sd("#ff00ff"),gainsboro:new sd("#dcdcdc"),ghostwhite:new sd("#f8f8ff"),goldenrod:new sd("#daa520"),gold:new sd("#ffd700"),gray:new sd("#808080"),green:new sd("#008000"),greenyellow:new sd("#adff2f"),grey:new sd("#808080"),honeydew:new sd("#f0fff0"),hotpink:new sd("#ff69b4"),indianred:new sd("#cd5c5c"),indigo:new sd("#4b0082"),ivory:new sd("#fffff0"),khaki:new sd("#f0e68c"),lavenderblush:new sd("#fff0f5"),lavender:new sd("#e6e6fa"),lawngreen:new sd("#7cfc00"),lemonchiffon:new sd("#fffacd"),lightblue:new sd("#add8e6"),lightcoral:new sd("#f08080"),lightcyan:new sd("#e0ffff"),lightgoldenrodyellow:new sd("#fafad2"),lightgray:new sd("#d3d3d3"),lightgreen:new sd("#90ee90"),lightgrey:new sd("#d3d3d3"),lightpink:new sd("#ffb6c1"),lightsalmon:new sd("#ffa07a"),lightseagreen:new sd("#20b2aa"),lightskyblue:new sd("#87cefa"),lightslategray:new sd("#778899"),lightslategrey:new sd("#778899"),lightsteelblue:new sd("#b0c4de"),lightyellow:new sd("#ffffe0"),lime:new sd("#00ff00"),limegreen:new sd("#32cd32"),linen:new sd("#faf0e6"),magenta:new sd("#ff00ff"),maroon:new sd("#800000"),mediumaquamarine:new sd("#66cdaa"),mediumblue:new sd("#0000cd"),mediumorchid:new sd("#ba55d3"),mediumpurple:new sd("#9370db"),mediumseagreen:new sd("#3cb371"),mediumslateblue:new sd("#7b68ee"),mediumspringgreen:new sd("#00fa9a"),mediumturquoise:new sd("#48d1cc"),mediumvioletred:new sd("#c71585"),midnightblue:new sd("#191970"),mintcream:new sd("#f5fffa"),mistyrose:new sd("#ffe4e1"),moccasin:new sd("#ffe4b5"),navajowhite:new sd("#ffdead"),navy:new sd("#000080"),oldlace:new sd("#fdf5e6"),olive:new sd("#808000"),olivedrab:new sd("#6b8e23"),orange:new sd("#ffa500"),orangered:new sd("#ff4500"),orchid:new sd("#da70d6"),palegoldenrod:new sd("#eee8aa"),palegreen:new sd("#98fb98"),paleturquoise:new sd("#afeeee"),palevioletred:new sd("#db7093"),papayawhip:new sd("#ffefd5"),peachpuff:new sd("#ffdab9"),peru:new sd("#cd853f"),pink:new sd("#ffc0cb"),plum:new sd("#dda0dd"),powderblue:new sd("#b0e0e6"),purple:new sd("#800080"),rebeccapurple:new sd("#663399"),red:new sd("#ff0000"),rosybrown:new sd("#bc8f8f"),royalblue:new sd("#4169e1"),saddlebrown:new sd("#8b4513"),salmon:new sd("#fa8072"),sandybrown:new sd("#f4a460"),seagreen:new sd("#2e8b57"),seashell:new sd("#fff5ee"),sienna:new sd("#a0522d"),silver:new sd("#c0c0c0"),skyblue:new sd("#87ceeb"),slateblue:new sd("#6a5acd"),slategray:new sd("#708090"),slategrey:new sd("#708090"),snow:new sd("#fffafa"),springgreen:new sd("#00ff7f"),steelblue:new sd("#4682b4"),tan:new sd("#d2b48c"),teal:new sd("#008080"),thistle:new sd("#d8bfd8"),tomato:new sd("#ff6347"),turquoise:new sd("#40e0d0"),violet:new sd("#ee82ee"),wheat:new sd("#f5deb3"),white:new sd("#ffffff"),whitesmoke:new sd("#f5f5f5"),yellow:new sd("#ffff00"),yellowgreen:new sd("#9acd32")},ld=function(){function t(){}return t.parseDocumentStyles=function(t){for(var e,i,o,r={},n=t.styleSheets,s=0,a=n.length;s<a;s++){e=n[s];try{e.rules?i=e.rules:e.cssRules&&(i=e.cssRules)}catch(t){continue}if(i)for(var l=i.length;l--;){var h=(o=i[l]).selectorText;if(h)if(h.indexOf(",")>-1)for(var u=h.split(","),c=u.length;c--;){var d=u[c].trim();d&&(r[d]=o.style)}else r[o.selectorText]=o.style}}return r},t.extendCssStyle=function(t,e){for(var i=0,o=t.length;i<o;i++){var r=t[i];"inherit"==t[r]||Rt.included(r,"background-color")&&Rt.included(t[r],"none","initial","unset","transparent")||(e[r]||(e[e.length]=r,e.length++),e[r]=t[r])}},t.$_getSelectorStyle=function(t,e){return t[e]},t.getSelectorStyle=function(e,i){if(t.prefix){var o=[],r={length:0};o.push(t.$_getSelectorStyle(e,i)),o.push(t.$_getSelectorStyle(e,t.prefix+i));for(var n=0,s=o.length;n<s;n++)o[n]&&t.extendCssStyle(o[n],r);return r}return t.$_getSelectorStyle(e,i)},t.getSelectorStyles=function(e,i){var o="string"==typeof i?i.trim().split(" "):Array.isArray(i)?i:null;return o?o.map((function(i){return t.getSelectorStyle(e,"."+i)})):[]},t}(),hd=function(){function e(t,e){this._grid=t,this._exportOptions=e,this._exportLayout=e.exportLayout,this._dataColumns=[],this._sparkColumns={},this.parse(e)}return e.prototype.dispose=function(){this._headerCells=null,this._dataCells=null,this._dataColumns=null,this._sparkColumns=null,this._exportLayout=null,this._layout=this._layout&&this._layout.dispose()},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colCount",{get:function(){var t=this._layout&&this._layout._dataCells;return t&&t.length?t[0].length:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerRowCount",{get:function(){return(this._layout&&this._layout._headerCells).length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataRowCount",{get:function(){return(this._layout&&this._layout._dataCells).length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sparkColumns",{get:function(){return this._sparkColumns},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"documentCssStyles",{get:function(){return this._documentCssStyles},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupModel",{get:function(){return this._groupModel},enumerable:!1,configurable:!0}),e.prototype.getHeader=function(t,e){return this._headerCells[t][e]},e.prototype.getItem=function(t,e){return this._dataCells[t][e]},e.prototype.getFooterItem=function(t,e){return this._footerCells[t][e]},e.prototype.getSummaryItem=function(t,e){return this._summaryCells[t][e]},e.prototype.clearDataSpanned=function(){for(var t=this._dataCells,e=0;e<t.length;e++)for(var i=0;i<t[e].length;i++)t[e][i].spanned=!1},e.prototype.getItemLevel=function(t){for(var e=this.grid,i=t.parent,o=t.level-1;i&&i.level>0;){var r=e.columnByField(i.groupField),n=r.layout;r.visible&&n.visible||o--,i=i.parent}return Math.max(o,0)},e.prototype.prepareLayout=function(){var t,e=this.grid,i=this._exportOptions,o=e.activeCellLayout;if(i.linear){for(var r=o.getDataColumns(!1),n=[],s=0;s<=r.length-1;s++){var a=r[s],l=a.visible&&a.layout.visible||i.allColumns;(l=l&&i.hideColumns.indexOf(a.name)<0||i.showColumns.indexOf(a.name)>=0)&&n.push({column:a.name,width:a.layout.domWidth||a.layout.width})}t=new Rs(e).load(n)}else t=i.exportLayout?new Rs(e).load(i.exportLayout):new Rs(e).load(e.activeCellLayout.getLayout(!0,i.applyFitStyle,i.allColumns,i.showColumns,i.hideColumns,i.layoutExpand));return t},e.prototype.parse=function(t){var e=this._grid,i=this._layout=this.prepareLayout(),o=this._exportOptions.stylePrefix;ld.prefix=o?o.trim()+" ":void 0,i.$_refresh2(e._columns,e.displayOptions.minCellWidth),i.$_prepareLayout(e,e.fixedOptions.colCount,e.fixedOptions.rightCount),i.$_prepareMerges(e);var r=e.footers,n=e.headerSummaries;this._setCellInfo(i._headerCells,this._headerCells=[]),this._setCellInfo(i._dataCells,this._dataCells=[]),this._setFooterInfo(i._dataCells,t.footer===Qc?r.count:r.visibleCount,this._footerCells=[]),this._setFooterInfo(i._dataCells,t.headerSummary===Qc?n.count:n.visibleCount,this._summaryCells=[]),this._documentCssStyles=ld.parseDocumentStyles(e.doc),this._setDataColumns(i._dataCells),this._setSparkInfo(this._dataCells)},e.prototype._setCellInfo=function(t,e){for(var i=0;i<t.length;i++){for(var o=[],r=0;r<t[i].length;r++)o.push({layout:t[i][r],spanned:!1});e.push(o)}},e.prototype._setFooterInfo=function(t,e,i){for(var o=0;o<e;o++)for(var r=0;r<t.length;r++){for(var n=[],s=0;s<t[r].length;s++)n.push({footerIndex:o,layout:t[r][s],spanned:!1});i.push(n)}},e.prototype.setGroupFooterItms=function(e,i,o){this._groupModel=e;var r=this._groupFooterCells=[],n=this._dataCells,s=!1;if(!(e.footerCount>0)){var a=e.provider._expandedAdornments,l=e.provider._collapsedAdornments;s=o?i&&!e.expanded&&Rt.included(l,t.RowGroupAdornments.SUMMARY,t.RowGroupAdornments.FOOTER):(s=e.expanded&&a===t.RowGroupAdornments.SUMMARY)||!i&&!e.expanded&&Rt.included(l,t.RowGroupAdornments.SUMMARY,t.RowGroupAdornments.FOOTER)}for(var h=s?e.allFooterCount:e.footerCount,u=0;u<h;u++)for(var c=s?e._allFooters[u]:e.getFooter(u),d=0;d<n.length;d++){for(var p=[],f=0;f<n[d].length;f++)p.push({footerIndex:c.footerIndex,layout:n[d][f].layout,spanned:!1});r.push(p)}},e.prototype.getGroupFooterCells=function(){return this._groupFooterCells},e.prototype._setDataColumns=function(t){var e,i;this._dataColumns=[];for(var o=0,r=t.length;o<r;o++){e=[];for(var n=0,s=t[o].length;n<s;n++)(i=t[o][n]).isProxy&&(i=i.source),e.push(i.firstColumn);this._dataColumns.push(e)}},e.prototype._setSparkInfo=function(t){function e(t,e){var i={start:void 0,end:void 0,row:void 0},o=s[0],r=s[s.length-1],n=a.columnByField(o),l=a.columnByField(r);if(!n||!l)return null;for(var h=0,u=e.length;h<u;h++)for(var c=0,d=e[h].length;c<d;c++)n==e[h][c]&&(i.start=c,i.row=h-t),l==e[h][c]&&(i.end=c);return i}var i,o,r,n,s,a,l=this.documentCssStyles;this._sparkColumns=[];for(var h=0,u=t.length;h<u;h++)for(var c=0,d=t[h].length;c<d;c++)if((r=(o=(i=t[h][c]).layout)instanceof _s?o.firstColumn:null)instanceof hs&&(n=r.renderer)&&Tl.interfaced(n)){s=r.fields,a=r.grid;var p=s.length>0&&e(h,this._dataColumns);if(p){var f=n.firstStyle,_=n.lastStyle,g=n.highStyle,y=n.lowStyle,m=void 0,b=void 0,v=void 0;if(Dl.interfaced(n)){m="line",!_&&(_=Dl.LAST_STYLE),!g&&(g=Dl.HIGH_STYLE),!y&&(y=Dl.LOW_STYLE);var w=n.pointStyle?ld.getSelectorStyle(l,"."+n.pointStyle):void 0;b=w?new sd(w.fill).toHex():void 0,v=(x=ld.getSelectorStyle(l,"."+Dl.CHART_STYLE))?new sd(x.stroke).toHex():void 0}else{var C=void 0;Ml.interfaced(n)?(m="column",C=Ml.CHART_STYLE,!_&&(_=Ml.LAST_STYLE),!g&&(g=Ml.HIGH_STYLE),!y&&(y=Ml.LOW_STYLE)):(m="stacked",C=Fl.CHART_STYLE);var x=ld.getSelectorStyle(l,"."+C);v=new sd(x.fill).toHex()}var I=g?ld.getSelectorStyle(l,"."+g):void 0,S=y?ld.getSelectorStyle(l,"."+y):void 0,E=f?ld.getSelectorStyle(l,"."+f):void 0,O=_?ld.getSelectorStyle(l,"."+_):void 0,R={type:m,colors:{colorHigh:I&&I.fill?new sd(I.fill).toHex():void 0,colorLow:S&&S.fill?new sd(S.fill).toHex():void 0,colorFirst:E&&E.fill?new sd(E.fill).toHex():void 0,colorLast:O&&O.fill?new sd(O.fill).toHex():void 0,colorMarkers:b,colorSeries:v},sparkLines:{},range:p};i.sparkLineGroup=R,this._sparkColumns[r.$_hash]=i}}},e}(),ud=function(){function t(){}return t.convertNumberFormat=function(t){return t.indexOf(";")>0&&(t=t.split(";")[0]),t.indexOf(".#")>0?t.replace(".#",".0"):t},t.convertDateFormat=function(t){for(var e="",i=t.length,o=0;o<i;o++){var r=t.charAt(o);switch(r){case"y":case"d":case"m":case"s":case":":e+=r;break;case"M":e+="m";break;case"a":e+="AM/PM";break;case"H":e+="h",(o>=i-1||"H"!=t.charAt(o+1))&&(e+="h");break;case"h":0!=o&&"h"==t.charAt(o-1)||(e+="h");break;case"S":case"T":case"t":case"Z":case"z":case"+":break;case".":case"/":case"-":case" ":(o>=i-1||"S"!=t.charAt(o+1))&&(e=e+"\\"+r);break;default:e=e+'"'+r+'"'}}return e},t}(),cd=function(){function t(){this._contentTypes={},this._bulkDownload=!0}return Object.defineProperty(t.prototype,"bulkDownload",{get:function(){return this._bulkDownload},set:function(t){this._bulkDownload=t},enumerable:!1,configurable:!0}),t.prototype.executeDownLoad=function(t,e,i){return n(this,void 0,void 0,(function(){var o,r,n,a,l;return s(this,(function(s){switch(s.label){case 0:if(o=[],r=Object.keys(e),!this.bulkDownload)return[3,1];for(n=0;n<r.length;n++)a=r[n],l=e[a],o.push(this.download(l).then((function(t){return new Promise((function(e,i){var o=new Uint8Array(t.buffer);try{var r=Array.prototype.map.call(o,(function(t){return String.fromCharCode(t)})).join(""),n="data:".concat(t.type,";base64,").concat(Pt.btoa(r)),s=document.createElement("img");s.style.position="fixed",s.style.top="-10000px",s.style.left="-10000px",s.src=n,s.onload=function(){t.width=s.width,t.height=s.height,s.src="",e(t)},s.onerror=function(){i()}}finally{}}))})).catch((function(){})));return Promise.all(o).catch((function(){})).finally((function(){i&&i.call(t,e)})),[3,6];case 1:n=0,s.label=2;case 2:return n<r.length?(a=r[n],l=e[a],[4,this.download(l).then((function(t){return new Promise((function(e,i){var o=new Uint8Array(t.buffer);try{var r=Array.prototype.map.call(o,(function(t){return String.fromCharCode(t)})).join(""),n="data:".concat(t.type,";base64,").concat(Pt.btoa(r)),s=document.createElement("img");s.style.position="fixed",s.style.top="-10000px",s.style.left="-10000px",s.src=n,s.onload=function(){t.width=s.width,t.height=s.height,s.src="",e(t)},s.onerror=function(){i()}}finally{}}))})).catch((function(){}))]):[3,5];case 3:s.sent(),s.label=4;case 4:return n++,[3,2];case 5:i&&i.call(t,e),s.label=6;case 6:return[2]}}))}))},t.prototype.getContentTypes=function(){return this._contentTypes},t.prototype.getExtension=function(t,e){var i=function(t){return Array.prototype.map.call(t,(function(t){return Rt.hex(t)})).join("")};if(t){var o="",r=t.toLowerCase().split(/\s*(?:;|$)\s*/),n=Rt.find(r,(function(t){return 0===t.indexOf("image")}));n&&(o=n.indexOf("svg")>=0?"svg":n.substring(6));var s=Rt.find(r,(function(t){return t.indexOf("octet-stream")>=0}));if(!o&&s&&e.byteLength>20){var a=new Uint8Array(e),l=i(a.slice(0,10)),h=i(a.slice(-18));0===l.indexOf("474946")?(o="gif",t="image/gif"):0===l.indexOf("89504e47")?(o="png",t="image/png"):0===l.indexOf("ffd8")&&"ffd9"===h.substr(-4)?(o="jpeg",t="image/jpeg"):0===l.indexOf("424d")&&(o="bmp",t="image/bmp")}return o&&!this._contentTypes.hasOwnProperty(o)&&(this._contentTypes[o]=t),{ext:o,type:t}}},t.prototype.download=function(t){var e=this;return new Promise((function(i,o){var r=new XMLHttpRequest;r.open("GET",t.url),r.onload=function(){if(200===r.status){var o=e.getExtension(r.getResponseHeader("content-type"),r.response),n=o.ext,s=o.type;n?(t.fileName="".concat(t.id,".").concat(n),t.type=s,t.buffer=r.response,i(t)):i(null)}else i(null)},r.onerror=function(){o()},r.responseType="arraybuffer",r.send()}))},t}();var dd=/\<|\>|\&|\"|\'/;function pd(t){return dd.test(t)?t.replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;"):t}var fd=function(){function t(){}return t.createDocument=function(t,e){var i={name:t,attrs:{}};for(var o in e)i.attrs[o]=e[o];return i},t.removeItem=function(e){if(e.texts=null,e.attrs=null,e.childs)for(var i=e.childs.length;i--;)t.removeItem(e.childs[i]),delete e.childs[i];e.childs=null},t.addChild=function(e,i,o,r){var n={name:i,attrs:o};return r&&t.addText(n,pd(r)),t.addChildElement(e,n),n},t.addChildElement=function(t,e){t.childs||(t.childs=[]),t.childs.push(e)},t.addProperty=function(t,e,i){t.attrs||(t.attrs={}),t.attrs[e]=pd(i)},t.addText=function(t,e){t.texts||(t.texts=[]),t.texts.push(e)},t.toString=function(e){var i="<"+e.name;for(var o in e.attrs)i+=" "+o+'="'+e.attrs[o]+'"';if(e.childs||e.texts){if(i+=">",e.texts)for(var r=0,n=e.texts.length;r<n;r++)i+=e.texts[r];if(e.childs)for(r=0,n=e.childs.length;r<n;r++)i+=t.toString(e.childs[r]);i+="</"+e.name+">"}else i+="/>";return i},t.xmlEscape=function(t){return pd(t)},t}(),_d=function(){function t(){}return t.toColCaption=function(t){for(var e="";t>=0;)e=String.fromCharCode(t%26+65)+e,t=Math.floor(t/26)-1;return e},t.toRange=function(e,i,o,r,n){void 0===o&&(o=!1),void 0===r&&(r=1),void 0===n&&(n=1);var s=i+1;return o?t.toColCaption(e)+s+":"+t.toColCaption(e+r-1)+(s+n-1):t.toColCaption(e)+s},t.daysOfYear=function(e){for(var i=0,o=0;o<e.getMonth();o++)i+=t.$$_MONTH_DAYS[o];if(e.getMonth()>=2){var r=e.getFullYear();(r%400==0||r%4==0&&r%100!=0)&&i++}return i+=e.getDate()},t.daysOfPriorYears=function(t){return t<=1900?0:365*(--t-1899)+(Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400)-460)},t.toExcelDate=function(e){var i=(1e3*(60*(60*e.getHours()+e.getMinutes())+e.getSeconds())+e.getMilliseconds())/t.$$_DAY_MILLISECONDS,o=t.daysOfPriorYears(e.getFullYear())+this.daysOfYear(e)+i;return o>=60&&o++,o},t.XML_HEAD_STRING='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>',t.$$_DAY_MILLISECONDS=864e5,t.$$_MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30],t}(),gd=function(){function t(){this._nextId=0,this._count=0,this._stringMap={},this._strings=[]}return t.prototype.dispose=function(){for(var t in this._strings=null,this._stringMap)delete this._stringMap[t];this._stringMap=null},Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),t.prototype.uniqueCount=function(){return this._nextId},t.prototype.add=function(t){this._count++;var e=this._stringMap[t];return void 0===e&&(e=this._nextId++,this._stringMap[t]=e,this._strings[e]=t),e},t.prototype.getIndex=function(t){return this._stringMap[t]},t.prototype.createPart=function(){var t=fd.createDocument("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"});fd.addProperty(t,"count",this._count.toString()),fd.addProperty(t,"uniqueCount",this._nextId.toString());for(var e=/^\s|\s$|\r|\n|\r\n/,i=0,o=this._strings.length;i<o;i++){var r=fd.addChild(t,"si"),n=this._strings[i].replace(/([\u0000-\u0008\u000b\u000c\u000e-\u001F])/g,(function(t){return"_x".concat(("0000"+t.charCodeAt(0).toString(16)).substr(-4),"_")})),s=fd.addChild(r,"t",null,n);e.test(this._strings[i])&&fd.addProperty(s,"xml:space","preserve")}var a=fd.toString(t);return _d.XML_HEAD_STRING+a},t}(),yd=function(){function t(t,e){this._id=t,this._url=e}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),t}(),md=function(){function t(){this._images=[],this._imageMap={}}return t.prototype.add=function(t){if(this._images.indexOf(t)<0){var e=this._images.push(t);this._imageMap[t]=new yd(e,t)}return t},t.prototype.getImageMap=function(){return this._imageMap},t.prototype.getImage=function(t){return this._imageMap&&this._imageMap[t]},t.prototype.getImageId=function(t){return this._imageMap&&this._imageMap[t]&&this._imageMap[t].id},t}(),bd=function(){function t(t,e,i,o){this.col=t,this.toCol=t,this.row=e,this.toRow=e,this.cWidth=7*i,this.cHeight=o>0?o/.75:-1}return t.prototype.getDrawingInfos=function(){return{col:this.col.toString(),fromColOff:Math.round(this.fromX*t.emu).toString(),row:this.row.toString(),fromRowOff:Math.round(this.fromY*t.emu).toString(),toCol:this.toCol.toString(),toColOff:Math.round(this.colOff*t.emu).toString(),toRow:this.toRow.toString(),toRowOff:Math.round(this.rowOff*t.emu).toString()}},t.prototype.drawPosition=function(t){var e=fd,i=this.getDrawingInfos(),o=e.addChild(t,"xdr:from");e.addChild(o,"xdr:col",null,i.col),e.addChild(o,"xdr:colOff",null,i.fromColOff),e.addChild(o,"xdr:row",null,i.row),e.addChild(o,"xdr:rowOff",null,i.fromRowOff),o=e.addChild(t,"xdr:to"),e.addChild(o,"xdr:col",null,i.toCol),e.addChild(o,"xdr:colOff",null,i.toColOff),e.addChild(o,"xdr:row",null,i.toRow),e.addChild(o,"xdr:rowOff",null,i.toRowOff)},t.emu=9525,t}(),vd=function(t){function e(e,i,o,r,n,s){void 0===s&&(s=!0);var a=t.call(this,e,i,o,r)||this;return a.offset=4,a.xLocation="left",a.yLocation="center",a.transparent=!1,a.text="",a.style=n,a.border=s,a}return o(e,t),Object.defineProperty(e.prototype,"gradientFill",{get:function(){var t=this.style["background-image"],e="linear-gradient(",i=t?t.indexOf(e):-1;if(i>-1){var o=this.splitEscape(t.slice(i+e.length,t.length-1));return o.length>2?new sd(o[1]).toColorHex():new sd(o[0]).toColorHex()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return new sd(this.style.fill||this.style["background-color"],!1).toColorHex()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this.style.stroke?new sd(this.style.stroke,!1).toColorHex():this.fill},enumerable:!1,configurable:!0}),e.prototype.splitEscape=function(t,e){if(void 0===e&&(e=","),t){for(var i=[],o=!1,r="",n=0;n<t.length;n++){var s=t[n];s!=e||o?(" "!=s||o)&&(r+=s):(i.push(r),r=""),"("==s&&(o=!0),")"==s&&(o=!1)}return r&&i.push(r),i}return null},e.prototype.getRectangleSize=function(t,e){if("number"==typeof t)return t;if(t&&-1!==t.indexOf("px"))t=t.replace("px","");else if(t&&t.indexOf("%")){var i=parseFloat(t.replace("%",""));t=e*i/100}return Number(t)},e.prototype.drawFill=function(t){var e=fd;if(this.gradientFill){var i=e.addChild(t,"a:solidFill");e.addChild(i,"a:srgbClr",{val:this.gradientFill})}else{i=e.addChild(t,"a:solidFill");e.addChild(i,"a:srgbClr",{val:this.fill})}},e.prototype.calcPosition=function(){var t=this.getRectangleSize(this.percentageOffset,this.cWidth-2*this.offset-3)||this.offset;switch(this.width=this.width?this.width:this.getRectangleSize(this.percentageWidth,this.cWidth-2*this.offset-3),this.height=this.height?this.height:this.getRectangleSize(this.percentageHeight,this.cHeight-2*this.offset-3),this.fromX=this.offset,this.fromY=(this.cHeight-this.height)/2,this.rowOff=this.fromY+this.height,this.xLocation){case"left":this.colOff=this.width+this.offset;break;case"percent":this.fromX=Math.max(t,this.offset)+this.offset,this.colOff=this.fromX+this.width;break;case"right":this.fromX=Math.max(1,this.cWidth-this.width-2*this.offset),this.colOff=this.cWidth-2*this.offset}switch(this.yLocation){case"top":this.fromY=this.offset,this.rowOff=this.fromY+this.height;break;case"center":break;case"bottom":this.rowOff=this.cHeight-this.offset,this.fromY=this.rowOff-this.height}for(var e=this.cHeight/2-this.height/2,i=this.cWidths||[],o=1;o<i.length;o++){var r=i[o]-i[o-1];switch(this.xLocation){case"left":this.fromX>=i[o]&&(this.col++,this.fromX-=r),this.fromX+this.width>i[o]&&(this.toCol++,this.colOff-=r);break;case"percent":t>=i[o]&&(this.col++,this.fromX-=r),t+this.width>i[o]&&(this.toCol++,this.colOff-=r);break;case"right":this.fromX>=i[o]&&(this.col++,this.fromX-=r),this.cWidth<=i[o]&&(o>1&&this.toCol++,this.colOff=r-2*this.offset)}}var n=this.cHeights||[];switch(this.yLocation){case"top":case"center":for(o=1;o<n.length;o++)e>=n[o]&&(this.row++,this.fromY-=n[o]-n[o-1]),e+this.height>n[o]&&(this.toRow++,this.rowOff-=n[o]-n[o-1]);break;case"bottom":for(o=n.length-1;o>0;o--)this.toRow++,this.rowOff-=n[o]-n[o-1],this.height<n[o]&&(this.row++,this.fromY-=n[o]-n[o-1])}},e.prototype.draw=function(t,e){var i=fd,o=i.addChild(t,"xdr:twoCellAnchor",{editAs:"oneCell"});this.calcPosition(),this.drawPosition(o);var r=i.addChild(o,"xdr:sp",{macro:"",textlink:""}),n=i.addChild(r,"xdr:nvSpPr");i.addChild(n,"xdr:cNvPr",{id:e+2,name:"rectangle "+e}),i.addChild(n,"xdr:cNvSpPr");var s=i.addChild(r,"xdr:spPr"),a=i.addChild(s,"a:xfrm");if(i.addChild(a,"a:off",{x:"1",y:"1"}),i.addChild(a,"a:ext",{cx:"1181100",cy:"124995"}),i.addChild(s,"a:prstGeom",{prst:"rect"}),this.transparent?i.addChild(s,"a:noFill"):this.drawFill(s),!this.border){var l=i.addChild(s,"a:ln");i.addChild(l,"a:noFill")}var h=i.addChild(r,"xdr:style"),u=i.addChild(h,"a:lnRef",{idx:"2"});i.addChild(u,"a:srgbClr",{val:this.stroke});var c=i.addChild(h,"a:fillRef",{idx:"1"});i.addChild(c,"a:srgbClr",{val:"000000"});var d=i.addChild(h,"a:effectRef",{idx:"0"});i.addChild(d,"a:schemeClr",{val:"accent1"});var p=i.addChild(h,"a:fontRef",{idx:"minor"});i.addChild(p,"a:schemeClr",{val:"lt1"});var f=i.addChild(r,"xdr:txBody");i.addChild(f,"a:bodyPr",{vertOverflow:"clip",horzOverflow:"clip",rtlCol:"0",anchor:"ctr"}),i.addChild(f,"a:lstStyle");var _=i.addChild(f,"a:p");if(i.addChild(_,"a:pPr",{algn:"ctr"}),this.text){var g=i.addChild(_,"a:r"),y=i.addChild(g,"a:rPr",{lang:"ko-KR",altLang:"en-US",sz:"1000"}),m=i.addChild(y,"a:solidFill");i.addChild(m,"a:schemeClr",{val:"tx1"}),i.addChild(g,"a:t").texts=[this.text]}else i.addChild(_,"a:endParaRPr",{lang:"ko-KR",altLang:"en-US",sz:"1100"});i.addChild(o,"xdr:clientData")},e}(bd),wd=function(e){function i(i,o,r,n,s,a){var l=e.call(this,i,o,r,n)||this;switch(l.imageUrl=a,s){case t.IconLocation.CENTER:l.location=t.IconLocation.CENTER;break;case t.IconLocation.RIGHT:case t.IconLocation.RIGHT_EDGE:l.location=t.IconLocation.RIGHT;break;default:l.location=t.IconLocation.LEFT}return l}return o(i,e),i.prototype.calcPosition=function(){var e,i=this.rHeight,o=this.rWidth,r=this.imageWidth,n=this.imageHeight;null!=i&&i>0&&null!=o&&o>0?(r=o,n=i):null!=i&&i>0?(e=i/n,n=i,r*=e):null!=o&&o>0&&(e=o/r,r=o,n*=e),this.cWidth=this.cWidth<0?r:this.cWidth,this.cHeight=this.cHeight<0?n:this.cHeight,e=1,(this.cWidth<r||this.cHeight<n)&&(n*=e=Math.min((this.cWidth-2)/r,(this.cHeight-2)/n),r*=e);var s=1;this.location===t.IconLocation.CENTER?s=Math.max(1,this.cWidth/2-r/2):this.location===t.IconLocation.RIGHT&&(s=this.cWidth-r-1);for(var a=this.cHeight/2-n/2,l=this.row,h=this.col,u=l,c=this.col,d=a,p=s,f=a+n,_=s+r,g=this.cHeights||[],y=1;y<g.length;y++)a>=g[y]&&(l++,d-=g[y]-g[y-1]),a+n>g[y]&&(u++,f-=g[y]-g[y-1]);var m=this.cWidths||[];for(y=1;y<m.length;y++)s>=m[y]&&(h++,p-=m[y]-m[y-1]),s+r>m[y]&&(c++,_-=m[y]-m[y-1]);this.row=l,this.toRow=u,this.col=h,this.toCol=c,this.fromX=Math.max(1,p),this.fromY=Math.max(1,d),this.colOff=Math.min(_,this.cWidth-1),this.rowOff=Math.min(f,this.cHeight-1)},i.prototype.draw=function(t,e){var i=fd;if(this.eImage&&this.eImage.fileName){this.imageWidth=this.eImage.width,this.imageHeight=this.eImage.height,this.calcPosition();var o=i.addChild(t,"xdr:twoCellAnchor",{editAs:"oneCell"});this.drawPosition(o);var r=i.addChild(o,"xdr:pic"),n=i.addChild(r,"xdr:nvPicPr");i.addChild(n,"xdr:cNvPr",{id:e+2,name:"picture "+e});var s=i.addChild(n,"xdr:cNvPicPr");i.addChild(s,"a:picLocks",{noChangeAspect:"1"});var a=i.addChild(r,"xdr:blipFill"),l=i.addChild(a,"a:blip",{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":"rId"+this.imageIndex}),h=i.addChild(l,"a:extLst"),u=i.addChild(h,"a:ext",{uri:"{28A0092B-C50C-407E-A947-70E740481C1C}"});i.addChild(u,"a14:useLocalDpi",{"xmlns:a14":"http://schemas.microsoft.com/office/drawing/2010/main",val:"0"}),i.addChild(i.addChild(a,"a:stretch"),"a:fillRect");var c=i.addChild(r,"xdr:spPr"),d=i.addChild(c,"a:xfrm");i.addChild(d,"a:off",{x:"1",y:"1"}),i.addChild(d,"a:ext",{cx:"1181100",cy:"1189663"}),i.addChild(i.addChild(c,"a:prstGeom",{prst:"rect"}),"a:avLst"),i.addChild(o,"xdr:clientData")}},i}(bd),Cd=function(){function e(t,e,i){this._infos=[],this._book=t,this._sheet=e,this._index=i}return e.prototype.dispose=function(){return null},Object.defineProperty(e.prototype,"fileName",{get:function(){return"drawing"+this._index+".xml"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"relationId",{get:function(){return"rId"+this._rId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rId",{set:function(t){this._rId=t},enumerable:!1,configurable:!0}),e.prototype.createPart=function(){for(var t=fd.createDocument("xdr:wsDr",{"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"}),e=this._infos,i=0;i<e.length;i++){var o=e[i],r=this._sheet.getMergeInfo(o.row,o.col);if(r){for(var n=[0],s=-1,a=0,l=[0],h=r.row;h<r.row+r.rows;h++){var u=this._sheet.getRow(h);if(!(u._height>0)){s=-1,n=[];break}n.push(s+=u._height/.75)}for(var c=r.col;c<r.col+r.cols;c++)l.push(a+=7*this._sheet.getColumnWidth(c));o.cHeight=s,o.cWidth=a,o.cWidths=l.slice(),o.cHeights=n.slice()}o instanceof wd&&(o.eImage=this._book.getExcelImage(o.imageUrl),o.imageIndex=this._book.getImageIndex(o.imageUrl)),o.draw(t,i)}var d=fd.toString(t);return _d.XML_HEAD_STRING+d},e.prototype.addImage=function(t,e,i,o,r,n,s,a){var l=new wd(t,e,i,o,r,n);return l._rWidth=s,l._rHeight=a,this._infos.push(l),l},e.prototype.addActualTarget=function(t,e,i,o,r,n,s,a){var l=r[0],h=r[1],u=r[2];u=u||100;var c=new vd(t,e,i,o,a.background),d=new vd(t,e,i,o,a.actual),p=new vd(t,e,i,o,a.target,!1);c.xLocation="left",c.percentageWidth="100%",c.percentageHeight="80%",d.xLocation="left",d.percentageWidth=Math.min(100,Math.max(1,h/u*100))+"%",d.percentageHeight=n||"40%",p.xLocation="percent",p.percentageOffset=Math.min(100,Math.max(0,l/u*100))+"%",p.width=s||3,p.percentageHeight="80%",null!=h&&h>0?this._infos.push(c,d,p):this._infos.push(c,p)},e.prototype.addBar=function(e,i,o,r,n,s,a,l,h,u){var c=new vd(e,i,o,r,a.barStyle,!1),d=new vd(e,i,o,r,{},!1),p=u-h||1,f=Math.min(100,(n-h)/p*100);if(isNaN(l)){switch(s){case t.BarOrigin.LEFT:case t.BarOrigin.TOP:c.xLocation="left";break;case t.BarOrigin.RIGHT:case t.BarOrigin.BOTTOM:c.xLocation="right"}c.percentageWidth=Math.max(1,f)+"%",d.xLocation="left",d.percentageWidth="100%"}else c.xLocation="percent",n<l?(d.xLocation="percent",c.percentageOffset=Math.max(1,f)+"%",d.percentageOffset=Math.max(1,(l-h)/p*100)+"%",c.style=a.negativeStyle):(d.xLocation="left",c.percentageOffset=Math.max(1,(l-h)/p*100)+"%"),d.percentageWidth="50%",c.percentageWidth=Math.max(1,Math.abs((n-l)/p*100))+"%";c.percentageHeight="80%",d.percentageHeight="80%",d.transparent=!0,d.text=n.toString(),null!=n&&(n>0||n<l)&&l!==n?this._infos.push(c,d):this._infos.push(d)},e.prototype.addSignal=function(t,e,i,o,r,n,s,a,l,h,u){var c=a?Math.abs(r):r;isNaN(l)||isNaN(h)||(c=s*(c-l)/(h-l));for(var d=n[0],p=n[1],f=1,_=d*(100/Math.max(d,p)),g=(p-d)/(s-1),y=0;y<s;y++){var m=new vd(t,e,i,o,y<c?u.barStyle:u.inactiveStyle,!1),b=(100-2*(s+1))/s;m.offset=1,m.xLocation="percent",m.yLocation="bottom",m.percentageHeight=_+"%",m.percentageWidth=b+"%",m.percentageOffset=f+"%",f+=b+2,_+=g,this._infos.push(m)}},e.prototype.createSheetRel=function(){var t=fd.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}),e=fd.addChild(t,"Relationship",{Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing"});fd.addProperty(e,"Id",this.relationId),fd.addProperty(e,"Target","../drawings/"+this.fileName);var i=fd.toString(t);return _d.XML_HEAD_STRING+i},e.prototype.createRel=function(){var t=[];this._infos.forEach((function(e){t.indexOf(e.imageUrl)<0&&t.push(e.imageUrl)}));for(var e=fd.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}),i=0;i<t.length;i++){var o=t[i],r=this._book.getExcelImage(o);if(r&&r.fileName){var n=fd.addChild(e,"Relationship",{Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image"});fd.addProperty(n,"Id","rId"+this._book.getImageIndex(o).toString()),fd.addProperty(n,"Target","../media/"+r.fileName)}}var s=fd.toString(e);return _d.XML_HEAD_STRING+s},e}(),xd=function(){function t(t,e){this._memoText=[],this._vmlText=[],this._authors=[],this._sId=0,this._sheet=t,this._index=e,this._ctx=document.createElement("canvas").getContext("2d")}return t.prototype.dispose=function(){return null},Object.defineProperty(t.prototype,"fileName",{get:function(){return"comments"+this._index+".xml"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"relationId",{get:function(){return"rId"+this.rId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vmlId",{get:function(){return"rId"+this.vId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sId",{get:function(){return this._sId++},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shapeId",{get:function(){return"_x0000_s"+String(this.sId).padStart(4,"0")},enumerable:!1,configurable:!0}),t.prototype.addAuthor=function(t){t=fd.xmlEscape(t);var e=this._authors.indexOf(t);return e>=0?e:this._authors.push(t)-1},t.prototype.addMemo=function(t,e,i){for(var o=this.addAuthor(i.author),r=this.getMemoWidth(i),n=t+1,s=n,a=r,l=0;a>0;){var h=7*this._sheet.getColumnWidth(s);if(a+15<=h){l=a+15;break}a-=h,s++}var u=7*this._sheet.getColumnWidth(s),c=Math.round(l/u*1024),d='<v:shape id="'.concat(this.shapeId,'" type="#_x0000_t202" style=\'position:absolute;margin-left:165pt;margin-top:8pt;width:').concat(r,'px;height:81pt;z-index:1;visibility:hidden\' fillcolor="#ffffe1 [80]" strokecolor="#217346" o:insetmode="auto"><v:fill color2="#ffffe1 [80]"/><v:fill color2="#ffffe1 [80]"/><v:shadow color="none [81]" obscured="t"/><v:path o:connecttype="none"/><v:textbox style=\'mso-direction-alt:auto\'><div style=\'text-align:left\'></div></v:textbox><x:ClientData ObjectType="Note"><x:MoveWithCells/><x:SizeWithCells/><x:Anchor>').concat(n,", 15, ").concat(e>0?e-1:0,", 8, ").concat(s,", ").concat(c,", ").concat(e+2,", 17</x:Anchor><x:AutoFill>False</x:AutoFill><x:Row>").concat(e,"</x:Row><x:Column>").concat(t,"</x:Column></x:ClientData></v:shape>");this._vmlText.push(d);var p='<comment ref="'.concat(_d.toRange(t,e),'" authorId="').concat(o>-1?o:0,'" shapeId="0"><text>').concat(i.authorVisible?'<r><rPr><b /><sz val="10" /><color rgb="FF000000" /><rFont val="Malgun Gothic" /><family val="2" /><charset val="129" /></rPr><t>'.concat(this._authors[o],'</t></r><r><rPr><b /><sz val="10" /><color rgb="FF000000" /><rFont val="Malgun Gothic" /><family val="2" /><charset val="129" /></rPr><t>:</t></r><r><rPr><sz val="10" /><color rgb="FF000000" /><rFont val="Malgun Gothic" /><family val="2" /><charset val="129" /></rPr><t xml:space="preserve">\n</t></r>'):"",'<r><rPr><sz val="').concat(i.fontSize||10,'" /><color rgb="FF000000" /><rFont val="Malgun Gothic" /><family val="2" /><charset val="129" /></rPr><t>').concat(fd.xmlEscape(i.message),"</t></r></text></comment>");this._memoText.push(p)},t.prototype.getMemoWidth=function(t){var e=this,i=t.message,o=Math.ceil((t.fontSize||10)*(96/72))+"px";this._ctx.font=o+" Malgun Gothic";var r=i.split("\n"),n=0;if(r.forEach((function(t){n=Math.max(n,e._ctx.measureText(t).width)})),t.authorVisible&&t.author){this._ctx.font="bold ".concat(o," Malgun Gothic");var s=this._ctx.measureText(t.author).width;n=Math.max(n,s)}return Math.max(t.minWidth,Math.min(Math.ceil(n+6),t.maxWidth))},t.prototype.createSheetRel=function(){var t=fd.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}),e=fd.addChild(t,"Relationship",{Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments"});fd.addProperty(e,"Id","rId"+this.rId),fd.addProperty(e,"Target","../"+this.fileName),e=fd.addChild(t,"Relationship",{Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing"}),fd.addProperty(e,"Id",this.vmlId),fd.addProperty(e,"Target","../drawings/vmlDrawing1.vml");var i=fd.toString(t);return _d.XML_HEAD_STRING+i},t.prototype.createPart=function(){return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><comments xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="xr" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision"><authors>'.concat(this._authors.map((function(t){return"<author>".concat(t,"</author>")})).join(""),"</authors><commentList>").concat(this._memoText.join(""),"</commentList></comments>")},t.prototype.createVmlPart=function(){return'<xml xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel"><o:shapelayout v:ext="edit"><o:idmap v:ext="edit" data="1"/></o:shapelayout><v:shapetype id="_x0000_t202" coordsize="21600,21600" o:spt="202" path="m,l,21600r21600,l21600,xe"><v:stroke joinstyle="miter"/><v:path gradientshapeok="t" o:connecttype="rect"/></v:shapetype>'.concat(this._vmlText.join(""),"</xml>")},t}(),Id=function(){function t(t){this._id=t}return t.EqualsById=function(t,e){return!t&&!e||!(!t&&e||t&&!e)&&t._id==e.id},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){},t}(),Sd=function(){function t(){this._items=[],this._indexer=0}return t.prototype.dispose=function(){for(var t=this._items.length;t--;)this._items[t].dispose();this._items=null},t.prototype.getIndexer=function(){return this._indexer++},t.prototype.create=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var o=this._items.length;o--;)if((t=this._items[o]).equals.apply(t,e))return t;return t=this.createInstance.apply(this,e),this._items.push(t),t},t.prototype.createUnique=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.createInstance.apply(this,t);return this._items.push(i),i},t}(),Ed=function(t){function e(e,i,o,r,n,s,a,l,h){var u=t.call(this,e)||this;return u._bold=void 0,u._italic=void 0,u._underline=void 0,u._name=i,u._size=o,u._color=r,u._bold=n,u._italic=s,u._underline=a,u._strike=l,u._double=h,u}return o(e,t),e.prototype.assignFrom=function(t){this._name=this._name||t._name,this._size=this._size||t._size,this._color=this._color||t._color,this._bold=null==this._bold?t._bold:this._bold,this._italic=null==this._italic?t._italic:this._italic,this._underline=null==this._underline?t._underline:this._underline,this._strike=null==this._strike?t._strike:this._strike,this._double=null==this._double?t._double:this._double},e.prototype.equals=function(t,e,i,o,r,n,s,a){return void 0===t&&(t="Tahoma"),void 0===e&&(e=10),void 0===i&&(i="ff000000"),void 0===o&&(o=!1),void 0===r&&(r=!1),void 0===n&&(n=!1),void 0===s&&(s=!1),void 0===a&&(a=!1),this._name==t&&this._size==e&&this._color==i&&this._bold==o&&this._italic==r&&this._underline==n&&this._strike==s&&this._double==a},e.prototype.toXml=function(t,e){Ni.addChildWithAttr(t,e,"sz","val",this._size||10),Ni.addChildWithAttr(t,e,"name","val",this._name||"Calibri"),Ni.addChildWithAttr(t,e,"color","rgb",this._color||"ff000000"),Ni.addChildWithAttr(t,e,"b","val",this._bold?"true":"false"),Ni.addChildWithAttr(t,e,"i","val",this._italic?"true":"false"),this._underline&&Ni.addChildWithAttr(t,e,"u","val",this._double?"double":""),this._strike&&Ni.addChild(t,e,"strike")},e}(Id),Od=function(t){function e(e){var i=t.call(this)||this,o=It(e).getComputedStyle(e);return i._defFontSize=i.$_convertUnit(o.fontSize||"16px"),i}return o(e,t),e.prototype.createInstance=function(t,e,i,o,r,n,s,a){return new Ed(this.getIndexer(),t,e,i,o,r,n,s,a)},e.prototype.createFromCss=function(t){var e=t["font-family"];e?(e.indexOf(",")>-1&&(e=e.split(",")[0]),e=e.replace(/\"/g,"")):e=void 0;var i=this.$_convertUnit(t["font-size"]);i=isNaN(i)?void 0:72*i/96;var o=t.color;o&&(o="#"==o.charAt(0)?t.color:new sd(o).toColorHex());var r="bold"==t["font-weight"],n="italic"==t["font-style"],s=t["text-decoration-line"],a=!!s&&s.indexOf("underline")>=0,l=!!s&&s.indexOf("line-through")>=0,h="double"===t["text-decoration-style"];return this.create(e,i,o,r,n,a,l,h)},e.prototype.toXml=function(t,e){for(var i=this._items.length,o=0;o<i;o++){var r=Ni.addChild(t,e,"font");this._items[o].toXml(t,r)}Ni.setAttr(e,"count",i)},e.prototype.$_convertUnit=function(t){return null==t?void 0:"string"==typeof t?t.indexOf("px")>0?parseFloat(t):t.indexOf("pt")>0?Math.round(1.3333*parseFloat(t)):t.indexOf("em")>0?parseFloat(t)*this._defFontSize:12:parseInt(t)},e}(Sd),Rd=function(t){function e(e,i,o,r,n,s,a){void 0===i&&(i="solid"),void 0===r&&(r=0),void 0===n&&(n=!1),void 0===a&&(a=90);var l=t.call(this,e)||this;return l._pattern=i,l._color=o,l._linear=n,l._color2=s,l._degree=a,l._tint=r,l}return o(e,t),e.prototype.assignFrom=function(t){this._pattern=t._pattern||this._pattern,this._color=t._color||this._color,this._tint=t._tint||this._tint,this._linear=null==t._linear?this._linear:t._linear,this._color2=t._color2||this._color2,this._degree=t._degree||this._degree},e.prototype.equalsObj=function(t){return this._pattern==t._pattern&&this._color==t._color&&this._color2==t._color2&&this._linear==t._linear&&this._degree==t._degree&&this._tint==t._tint},e.prototype.equals=function(t,e,i,o,r,n){return void 0===t&&(t="solid"),void 0===i&&(i=0),void 0===o&&(o=!1),void 0===n&&(n=90),this._pattern==t&&this._color==e&&this._color2==r&&this._linear==o&&this._degree==n&&this._tint==i},e.prototype.toXml=function(t,e){var i,o=this._tint||0;if(this._linear){var r=Ni.addChildWithAttr(t,e,"gradientFill","degree",this._degree||90),n=Ni.addChildWithAttr(t,r,"stop","position","0");i=Ni.addChild(t,n,"color"),Ni.setAttr(i,"rgb",this._color),Ni.setAttr(i,"tint",this._tint||0),n=Ni.addChildWithAttr(t,r,"stop","position","1"),i=Ni.addChild(t,n,"color"),Ni.setAttr(i,"rgb",this._color2),Ni.setAttr(i,"tint",o)}else{var s=Ni.addChildWithAttr(t,e,"patternFill","patternType",this._pattern.toString());"none"!=this._pattern&&null!=this._color&&(i=Ni.addChild(t,s,"fgColor"),Ni.setAttr(i,"rgb",this._color),Ni.setAttr(i,"tint",o))}},e}(Id),Pd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.createInstance=function(t,e,i,o,r,n){return new Rd(this.getIndexer(),t,e,i,o,r,n)},e.prototype.createFromCss=function(t){var e=t["background-image"],i="linear-gradient(",o=e?e.indexOf(i):-1;if(o>-1){var r=this._splitEscape(e.slice(o+i.length,e.length-1)),n=void 0,s=void 0,a=void 0;r.length>2?(n=new sd(r[1]),s=new sd(r[2]),a=parseInt(r[0])):(n=new sd(r[0]),s=new sd(r[1]),a=180),a=(a+270)%360;var l=1-n._a;return this.create("none",n.toHex(),l,!0,s.toHex(),a)}if(t["background-color"]){var h=new sd(t["background-color"]);l=1-h._a;return h?this.create("solid",h.toHex(),l):this._items[0]}},e.prototype.toXml=function(t,e){for(var i=this._items.length,o=0;o<i;o++){var r=Ni.addChild(t,e,"fill");this._items[o].toXml(t,r)}Ni.setAttr(e,"count",i)},e.prototype._splitEscape=function(t,e){if(void 0===e&&(e=","),t){for(var i=[],o=!1,r="",n=0;n<t.length;n++){var s=t[n];s!=e||o?(" "!=s||o)&&(r+=s):(i.push(r),r=""),"("==s&&(o=!0),")"==s&&(o=!1)}return r&&i.push(r),i}return null},e}(Sd),kd=function(t){function e(e,i,o,r){void 0===o&&(o=1),void 0===r&&(r="none");var n=t.call(this,e)||this;return n._color=i,n._width=o,n._type=r,n}return o(e,t),e.equalsObj=function(t,e){return!t&&!e||!(!t&&e||t&&!e)&&(t._color==e._color&&t._type==e._type&&t._width==e._width)},e.prototype.equals=function(t,e,i){return void 0===e&&(e=1),void 0===i&&(i="none"),this._color==t&&this._width==e&&this._type==i},e.prototype.toXml=function(t,e){var i=this._width<=1?"thin":this._width<=2?"medium":"thick";Ni.setAttr(e,"style",i),Ni.addChildWithAttr(t,e,"color","rgb",this._color)},e}(Id),Td=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.createInstance=function(t,e,i){return new kd(this.getIndexer(),t,e,i)},e.prototype.createFromCss=function(t,e){var i=t[e+"-style"];if(i&&"none"!=i){var o=new sd(t[e+"-color"]),r=i,n=parseInt(t[e+"-width"]);if(!o&&isNaN(n))return this._items[0];if(isNaN(n))n=0;else if(0===n)return;return this.create(o.toColorHex(),n,r)}},e}(Sd),Dd=function(t){function e(e,i,o,r,n){var s=t.call(this,e)||this;return s._left=i,s._top=o,s._right=r,s._bottom=n,s}return o(e,t),e.equalsObj=function(t,e){return kd.equalsObj(t._left,e._left)&&kd.equalsObj(t._top,e._top)&&kd.equalsObj(t._right,e._right)&&kd.equalsObj(t._bottom,e._bottom)},Object.defineProperty(e.prototype,"left",{get:function(){return this._left},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this._right},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._top},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._bottom},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._left=null,this._top=null,this._right=null,this._bottom=null,t.prototype.dispose.call(this)},e.prototype.equals=function(t,e,i,o){return kd.EqualsById(this._left,t)&&kd.EqualsById(this._top,e)&&kd.EqualsById(this._right,i)&&kd.EqualsById(this._bottom,o)},e.prototype.toXml=function(t,e){this.borderToXml(t,e,"left"),this.borderToXml(t,e,"right"),this.borderToXml(t,e,"top"),this.borderToXml(t,e,"bottom")},e.prototype.borderToXml=function(t,e,i){var o=Ni.addChild(t,e,i),r=this[i];r&&r.toXml(t,o)},e}(Id),Md=function(t){function e(e){var i=t.call(this)||this;return i._lines=e,i}return o(e,t),e.prototype.dispose=function(){this._lines=null,t.prototype.dispose.call(this)},e.prototype.createInstance=function(t,e,i,o){return new Dd(this.getIndexer(),t,e,i,o)},e.prototype.createFromCss=function(t){var e=this._lines,i=e.createFromCss(t,"border-left"),o=e.createFromCss(t,"border-right"),r=e.createFromCss(t,"border-top"),n=e.createFromCss(t,"border-bottom");return i||o||r||n?this.create(i,r,o,n):void 0},e.prototype.extend=function(t,e){t=t||{};for(var i=new Dd(null,e.left||t.left,e.top||t.top,e.right||t.right,e.bottom||t.bottom),o=this._items.length;o--;){var r=this._items[o];if(Dd.equalsObj(this._items[o],i))return r}return i._id=this.getIndexer(),this._items.push(i),i},e.prototype.toXml=function(t,e){for(var i=this._items.length,o=0;o<i;o++){var r=Ni.addChild(t,e,"border");this._items[o].toXml(t,r)}Ni.setAttr(e,"count",i)},e}(Sd),Fd=function(t){function e(e,i,o,r,n,s,a,l,h){void 0===n&&(n=!1),void 0===s&&(s=0);var u=t.call(this,i)||this;return u._collection=e,u._horzAlign=o,u._vertAlign=r,u._wrapText=n,u._formatId=s,u._font=a,u._fill=l,u._border=h,u}return o(e,t),Object.defineProperty(e.prototype,"horzAlign",{get:function(){return this._horzAlign},set:function(t){this._horzAlign=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertAlign",{get:function(){return this._vertAlign},set:function(t){this._vertAlign=t},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._font=null,this._fill=null,this._border=null,this._collection=null,t.prototype.dispose.call(this)},e.prototype.equals=function(t,e,i,o,r,n,s,a){return this._horzAlign==t&&this._vertAlign==e&&this._wrapText==i&&this._formatId==o&&Ed.EqualsById(this._font,r)&&Rd.EqualsById(this._fill,n)&&Dd.EqualsById(this._border,s)&&Rt.equalObjects(this._cellProptectProps,a)},e.prototype.toXml=function(t,e){var i=this;Ni.setAttr(e,"borderId",(this._border?this._border.id:0)+""),Ni.setAttr(e,"fillId",(this._fill?this._fill.id:0)+""),Ni.setAttr(e,"fontId",(this._font?this._font.id:0)+""),Ni.setAttr(e,"numFmtId",this._formatId+""),Ni.setAttr(e,"xfId","0");var o=Ni.addChild(t,e,"alignment");if(Ni.setAttr(o,"horizontal",this._horzAlign||"left"),Ni.setAttr(o,"vertical",this._vertAlign||"center"),this._wrapText&&Ni.setAttr(o,"wrapText","1"),this._cellProptectProps){var r=Ni.addChild(t,e,"protection");Object.keys(this._cellProptectProps).forEach((function(t){Ni.setAttr(r,t,i._cellProptectProps[t])}))}},e.prototype.cloneAsNew=function(t,i,o,r,n,s,a,l,h){return new e(this._collection,t,i||this._horzAlign,o||this._vertAlign,null!=r?r:this._wrapText,null!=n?n:this._formatId,s||this._font,a||this._fill,l||this._border)},e}(Id),Ld=function(t){function e(e,i,o){var r=t.call(this)||this;return r._fonts=e,r._fills=i,r._borders=o,r}return o(e,t),e.prototype.dispose=function(){this._fonts=null,this._fills=null,this._borders=null,t.prototype.dispose.call(this)},e.prototype.addStyle=function(t){for(var e=this._items.length;e--;){var i=this._items[e];if(i.equals(t.horzAlign,t.vertAlign,t._wrapText,t._formatId,t._font,t._fill,t._border,t._cellProptectProps))return i}return t._id=this.getIndexer(),t._collection=this,t},e.prototype.changeFormatId=function(t,e){for(var i,o=this._items.length;o--;)if((i=this._items[o]).equals(t.horzAlign,t.vertAlign,t._wrapText,e,t._font,t._fill,t._border,t._cellProptectProps))return i;return(i=t.cloneAsNew(this.getIndexer(),null,null,null,e,null,null,null))._cellProptectProps=Rt.deepCopy(t._cellProptectProps),this._items.push(i),i},e.prototype.changeBorder=function(t,e){for(var i,o=this._borders.extend(t._border,e),r=this._items.length;r--;)if((i=this._items[r]).equals(t.horzAlign,t.vertAlign,t._wrapText,t._formatId,t._font,t._fill,o,t._cellProptectProps))return i;var n=t.cloneAsNew(this.getIndexer(),null,null,null,null,null,null,o);return n._cellProptectProps=Rt.deepCopy(t._cellProptectProps),this._items.push(n),n},e.prototype.createInstance=function(t,e,i,o,r,n,s){return void 0===i&&(i=!1),void 0===o&&(o=0),void 0===r&&(r=null),void 0===n&&(n=null),void 0===s&&(s=null),new Fd(this,this.getIndexer(),t,e,i,o,r,n,s)},e.prototype.createFromCss=function(t,e,i,o,r,n,s){void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),void 0===r&&(r=!1),void 0===n&&(n=0),void 0===s&&(s=null);var a,l,h=e?this._borders.createFromCss(t):null,u=i?this._fonts.createFromCss(t):null,c=o?this._fills.createFromCss(t):null,d=t["text-align"];d&&("center"==d?a="center":"right"==d?a="right":"left"==d&&(a="left"));var p=t["vertical-align"];return p&&("top"==p?l="top":"bottom"==p&&(l="bottom")),this.create(a,l,r,n,u,c,h,s)},e.prototype.toXml=function(t,e){for(var i=this._items.length,o=0;o<i;o++){var r=Ni.addChild(t,e,"xf");this._items[o].toXml(t,r)}Ni.setAttr(e,"count",i)},e}(Sd),Nd=function(){function t(t){this._numberFmts=[],this._fonts=new Od(t),this._fills=new Pd,this._lines=new Td,this._borders=new Md(this._lines),this._styles=new Ld(this._fonts,this._fills,this._borders),this._fills.create("none"),this._fills.create("gray125"),this._borders.create(),this._fonts.create(),this._styles.create()}return t.prototype.dispose=function(){this._styles.dispose(),this._borders.dispose(),this._lines.dispose(),this._fills.dispose(),this._fonts.dispose()},t.prototype.addNumberFormat=function(e){var i=this._numberFmts.indexOf(e);return i<0&&(this._numberFmts.push(e),i=this._numberFmts.length-1),t.EXCEL_NUMFMT_START+i},t.prototype.addStyle=function(t,e,i,o,r,n){return t?this._styles.createFromCss(t,e,i,o,r,n):null},t.prototype.extendStyle=function(t,e,i,o,r){o=null==o?t._formatId:o;var n=this._styles.createFromCss(e,!0,!0,!0,i,o,r);return n._border=n._border||t._border,n._fill=n._fill||t._fill,n._font&&t._font?n._font.assignFrom(t._font):n._font=n._font||t._font,n._horzAlign=n._horzAlign||t._horzAlign,n._vertAlign=n._vertAlign||t._vertAlign,n._wrapText=null!=n._wrapText?n._wrapText:t._wrapText,n._formatId=null!=o&&null!=n._formatId?n._formatId:t._formatId,n._cellProptectProps=Rt.deepCopy(r)||Rt.deepCopy(t._cellProptectProps),this._styles.addStyle(n)},t.prototype.changeFormatId=function(t,e){return this._styles.changeFormatId(t,e)},t.prototype.changeBorder=function(t,e){return this._styles.changeBorder(t,e)},t.prototype.createPart=function(){var t='<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"></styleSheet>',e=Ni.parse(t),i=e.documentElement;if(this._numberFmts.length>0){var o=Ni.addChild(e,i,"numFmts");this._createNumberFormats(e,o)}var r=Ni.addChild(e,i,"fonts");this._createFonts(e,r);var n=Ni.addChild(e,i,"fills");this._createFills(e,n);var s=Ni.addChild(e,i,"borders");this._createBorders(e,s);var a=Ni.addChild(e,i,"cellStyleXfs");this._createDefXfs(e,a);var l=Ni.addChild(e,i,"cellXfs");return this._createStyles(e,l),t=Ni.toString(e),_d.XML_HEAD_STRING+t},t.prototype._createNumberFormats=function(e,i){for(var o=0,r=this._numberFmts.length;o<r;o++){var n=Ni.addChild(e,i,"numFmt");Ni.setAttr(n,"formatCode",this._numberFmts[o]),Ni.setAttr(n,"numFmtId",t.EXCEL_NUMFMT_START+o)}},t.prototype._createFonts=function(t,e){this._fonts.toXml(t,e)},t.prototype._createFills=function(t,e){this._fills.toXml(t,e)},t.prototype._createBorders=function(t,e){this._borders.toXml(t,e)},t.prototype._createDefXfs=function(t,e){var i=Ni.addChildWithAttr(t,e,"xf","count",1);Ni.setAttr(i,"borderId",0),Ni.setAttr(i,"fillId",0),Ni.setAttr(i,"fontId",0),Ni.setAttr(i,"numFmtId",0)},t.prototype._createStyles=function(t,e){this._styles.toXml(t,e)},t.EXCEL_NUMFMT_START=200,t}(),$d=function(t){function e(e,i,o,r,n,s){var a=t.call(this,e)||this;return a._hash=i,a._width=o,a._style=r,a._hidden=n,a._position=s,a}return o(e,t),e.prototype.dispose=function(){this._style=null,t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"position",{get:function(){return this._position||this.id+1},enumerable:!1,configurable:!0}),e.prototype.equals=function(t){return this.id==t},e.prototype.toTextXml=function(t){var e=this._position||this.id+1,i={min:e,max:e,width:this._width,customWidth:"1"};this._style&&(i.style=this._style.id),this._hidden&&(i.hidden="1"),fd.addChild(t,"col",i)},e}(Id),Ad=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.createInstance=function(t,e,i,o,r){return new $d(this.getIndexer(),t,e,i,o,r)},Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),e.prototype.toTextXml=function(t){for(var e=fd.addChild(t,"cols"),i=0,o=this.count;i<o;i++)this._items[i].toTextXml(e)},e.prototype.getWidth=function(t){return this._items[t]?this._items[t]._width:9},e.prototype.getColumn=function(t){for(var e=this._items,i=0;i<e.length;i++)if(e[i].position===t)return e[i]},e}(Sd),Vd=function(){function t(t,e,i,o,r,n){void 0===r&&(r=""),this._range=_d.toRange(e,t),this._style=i,this._type=r,this._fomula=n,this._value=o}return t.prototype.dispose=function(){this._style=null},Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(t){this._style=t},enumerable:!1,configurable:!0}),t.prototype.toXmlText=function(){var e=[];return e.push("<"+t.ELEMENT_NAME),e.push(' r="'.concat(this._range,'"')),""!=this._type&&e.push(' t="'.concat(this._type,'"')),this._style&&e.push(' s="'.concat(this._style.id,'"')),e.push(">"),this._fomula&&e.push("<f>".concat(this._fomula,"</f>")),null!=this._value&&e.push("<v>".concat(this._value,"</v>")),e.push("</"+t.ELEMENT_NAME+">"),e.join("")},t.ELEMENT_NAME="c",t}(),Bd=function(){function e(t,e,i){this._row=0,this._sheet=t,this._book=t.workbook,this._index=e,this._height=i,this._cells=[]}return Object.defineProperty(e.prototype,"outLineLevel",{get:function(){return this._outlineLevel},set:function(t){this._outlineLevel=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){for(var t=this._cells.length;t--;)this._cells[t].dispose(),this._cells[t]=null;this._cells=null},e.prototype.toXmlText=function(){var t=[];t.push("<"+e.ELEMENT_NAME),t.push(' r="'.concat(this._index+1,'"')),this._height&&this._height>-1&&(t.push(' ht="'.concat(this._height,'"')),t.push(' customHeight="1"')),null!=this._outlineLevel&&t.push(' outlineLevel="'.concat(this._outlineLevel,'"')),t.push(">");for(var i=0,o=this._cells.length;i<o;i++){var r=this._cells[i];r&&t.push(r.toXmlText())}return t.push("</"+e.ELEMENT_NAME+">"),t.join("")},e.prototype.borrowCell=function(t,e,i,o,r,n){void 0===o&&(o="");var s=this._cells[t];n&&(e=s.style),s&&s.dispose(),s=new Vd(this._index,t,e,i,o,r),this._cells[t]=s},e.prototype.addBlank=function(t,e,i){this.borrowCell(t,e,void 0,"",void 0,i)},e.prototype.addCell=function(t,e,i,o,r){this.borrowCell(t,o,i,e,r)},e.prototype.addText=function(t,e,i){var o=null!=e?String(e):"",r=this._book.addSharedString(o);this.addCell(t,"s",r,i)},e.prototype.addNumber=function(t,e,i,o){var r=isNaN(e)||null==e?"":String(e);this.addCell(t,"n",r,i,o)},e.prototype.addBool=function(t,e,i){this.addCell(t,"b",null==e?"":e?1:0,i)},e.prototype.addDate=function(t,e,i){if(e){var o=_d.toExcelDate(e);this.addNumber(t,o,i)}else this.addCell(t,"s","",i)},e.prototype.addLink=function(t,e,i,o){if(i&&""!=i){var r=document.createElement("div");r.innerText=r.textContent=i,i=r.innerHTML.replace(/(<br>|<br\/>)/gi,"&#13;&#10;"),r.innerText=r.textContent=e,i='HYPERLINK("'+i+((e=r.innerHTML.replace(/(<br>|<br\/>)/gi,"\r\n"))?'","'+e+'")':'")'),this.addCell(t,"str",e,o,i)}else this.addText(t,e,o)},e.prototype.addImage=function(e,i,o,r,n,s,a,l){if(n)return i&&r!==t.IconLocation.CENTER?this.addText(e,i,s):this.addBlank(e,s),this._sheet.addImage(e,this._index,o,this._height,r,n,a,l);i?this.addText(e,i,s):this.addBlank(e,s)},e.prototype.addActualTarget=function(t,e,i,o,r,n,s){this.addBlank(t,s),this._sheet.addActualTarget(t,this._index,i,this._height,e,r,n,o)},e.prototype.addBar=function(t,e,i,o,r,n,s,a,l){this.addBlank(t,l),this._sheet.addBar(t,this._index,i,this._height,e,o,r,n,s,a)},e.prototype.addSignal=function(t,e,i,o,r,n,s,a,l,h){this.addBlank(t,h),this._sheet.addSignal(t,this._index,i,this._height,e,o,r,n,s,a,l)},e.prototype.addSparkLine=function(t,e,i,o){var r=i.layout.firstColumn,n=this._sheet,s=this._index,a=n.borrowSparkGroup(r.index,i.sparkLineGroup),l=a.range.start,h=a.range.end-l+1,u=a.range.row;u=null==u?0:u;var c=a.sparkLines,d="'".concat(n.name,"'!").concat(_d.toRange(e+l,s+u,!0,h));c[_d.toRange(t,this._index)]=d,this.addBlank(t,o)},e.ELEMENT_NAME="row",e.LINE_REGEX=/\r|\n|\r\n/,e.BR_REGEX=/<br>|<br\/>/,e}(),jd=function(){function t(t,e,i,o){this._mergeCount=0,this._outlineLevel=0,this._dataRows=[],this._sparkGroups={},this._firstRow=-1,this._firstCol=-1,this._lastRow=-1,this._fixedCol=0,this._fixedRow=0,this._relation_indexer=1,this._mergeInfos={},this._book=t,this._index=e,this._name=i,this._attrs=o.sheetAttrs,this._protectPassword=o.protectPassword,this._protectProperties=o.protectProperties,this._sheetProtect=o.sheetProtect,this._outlineSummaryBelow=o.outlineSummaryBelow,this._outlineSummaryRight=o.outlineSummaryRight,this._columns=new Ad,this._prepare()}return t.prototype.dispose=function(){this._txmerge=null,fd.removeItem(this._txdoc),this._txdoc=null,this._columns=null,this.clearRows(),this._dataRows=null,this._borderEdges=null},Object.defineProperty(t.prototype,"id",{get:function(){return t.RELATION_ID+this._index},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"colCount",{get:function(){return this._columns.count},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowCount",{get:function(){return this._dataRows.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"workbook",{get:function(){return this._book},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"drawing",{get:function(){return this._drawing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"memo",{get:function(){return this._memo},enumerable:!1,configurable:!0}),t.prototype.setFirstRow=function(t){this._firstRow<0&&(this._firstRow=t)},t.prototype.setLastRow=function(t){this._lastRow=Math.max(this._lastRow,t)},t.prototype.setFirstCol=function(t){this._firstCol<0&&(this._firstCol=t)},t.prototype.clearRows=function(){for(var t=this._dataRows.length;t--;)this._dataRows[t].dispose(),this._dataRows[t]=null;this._dataRows=[]},t.prototype.addColumn=function(t,e,i,o,r){return this._columns.createUnique(t,e,i,o,r)},t.prototype.getColumn=function(t){return this._columns.getColumn(t)},t.prototype.getColumnWidth=function(t){return this._columns.getWidth(t)},t.prototype.getMergeInfo=function(t,e){return this._mergeInfos["".concat(t,":").concat(e)]},t.prototype.addRow=function(t,e){return this._dataRows[t]=new Bd(this,t,e)},t.prototype.getRow=function(t){return this._dataRows[t]},t.prototype.borrowRow=function(t,e){return this._dataRows[t]||this.addRow(t,e)},t.prototype.borrowSparkGroup=function(t,e){return this._sparkGroups[t]||(this._sparkGroups[t]=e),this._sparkGroups[t]},t.prototype.setRowLevel=function(t,e){if(e>=0){var i=this._dataRows[t];i&&(i.outLineLevel=e,this._outlineLevel=Math.max(e,this._outlineLevel))}},t.prototype.addMerge=function(t,e,i,o){if(i>1||o>1){var r=_d.toRange(e,t,!0,o,i);this._mergeInfos["".concat(t,":").concat(e)]={row:t,rows:i,col:e,cols:o,range:r}}},t.prototype.createPart=function(){var t=this._txdoc,e="A1:"+_d.toRange(this._columns.count-1,this._dataRows.length-1);if(this._outlineLevel>0){var i=fd.addChild(t,"sheetPr");fd.addChild(i,"outlinePr",{summaryBelow:this._outlineSummaryBelow,summaryRight:this._outlineSummaryRight}),fd.addChild(t,"sheetFormatPtr",{outlineLevelRow:this._outlineLevel})}fd.addChild(t,"dimension",{ref:e});var o=fd.addChild(t,"sheetViews"),r={workbookViewId:0,showOutlineSymbols:"true"};this._attrs&&Rt.extendObj(this._attrs,r),0==this._book.count&&(r.tabSelected=1);var n=fd.addChild(o,"sheetView",r);(this._fixedCol>0||this._fixedRow>0)&&fd.addChild(n,"pane",{xSplit:this._fixedCol,ySplit:this._fixedRow,topLeftCell:_d.toRange(this._fixedCol,this._fixedRow),activePane:"bottomRight",state:"frozen"}),this._columns&&this._columns.toTextXml(t);for(var s=fd.addChild(t,"sheetData"),a=this._dataRows,l=this._borderEdges,h=0,u=a.length;h<u;h++){if(h==this._firstRow){for(var c=0,d=Math.max(0,this._firstCol);d<a[h]._cells.length;d++){(p=a[h]._cells[d])&&l&&(p.style=this._book.changeBorderId(p.style,l[c++?"top":"leftTop"]))}for(d=a[h]._cells.length;d--;){if((p=a[h]._cells[d])&&l){p.style=this._book.changeBorderId(p.style,l.rightTop);break}}}else if(h===this._lastRow){for(c=0,d=Math.max(0,this._firstCol);d<a[h]._cells.length;d++){(p=a[h]._cells[d])&&l&&(p.style=this._book.changeBorderId(p.style,l[c++?"bottom":"leftBottom"]))}for(d=a[h]._cells.length;d--;){if((p=a[h]._cells[d])&&l){p.style=this._book.changeBorderId(p.style,l.rightBottom);break}}}else if(h>this._firstRow&&h<this._lastRow){for(d=Math.max(0,this._firstCol);d<a[h]._cells.length;d++){if((p=a[h]._cells[d])&&l){p.style=this._book.changeBorderId(p.style,l.left);break}}for(d=a[h]._cells.length;d--;){var p;if((p=a[h]._cells[d])&&l){p.style=this._book.changeBorderId(p.style,l.right);break}}}a[h]&&fd.addText(s,a[h].toXmlText())}if(this._sheetProtect){var f=fd.addChild(t,"sheetProtection");if(fd.addProperty(f,"sheet","1"),this._protectPassword){var _=function(t){var e,i,o=0,r=function(t){for(var e=[],i=t.split(""),o=0;o<i.length;++o)e[o]=i[o].charCodeAt(0);return e}(t),n=r.length+1;i=n,(e="undefined"!=typeof Buffer?Buffer.alloc?Buffer.alloc(i):new Buffer(i):"undefined"!=typeof Uint8Array?new Uint8Array(i):new Array(i))[0]=r.length;for(var s=1;s<n;++s)e[s]=r[s-1];for(s=n-1;s>=0;--s)o=((0==(16384&o)?0:1)|o<<1&32767)^e[s];return(52811^o).toString(16).toUpperCase()}(this._protectPassword);fd.addProperty(f,"password",_)}if(this._protectProperties){var g=this._protectProperties;Object.keys(g).forEach((function(t){fd.addProperty(f,t,g[t])}))}}if(this._mergeCount=Object.keys(this._mergeInfos).length,this._mergeCount>0){for(var y in fd.addProperty(this._txmerge,"count",this._mergeCount+""),this._mergeInfos)fd.addChild(this._txmerge,"mergeCell",{ref:this._mergeInfos[y].range});fd.addChildElement(this._txdoc,this._txmerge)}if(this._drawing&&fd.addChild(t,"drawing",{"r:id":this._drawing.relationId}),Object.keys(this._sparkGroups).length>0){var m=fd.addChild(t,"extLst"),b=fd.addChild(m,"ext",{uri:"{05C60535-1F16-4fd2-B633-F4F36F0B64E0}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),v=fd.addChild(b,"x14:sparklineGroups",{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"});for(var h in this._sparkGroups){var w=this._sparkGroups[h],C=w.colors,x=w.sparkLines,I=fd.addChild(v,"x14:sparklineGroup",{type:w.type||"line"});C.colorSeries&&fd.addChild(I,"x14:colorSeries",{rgb:C.colorSeries}),C.colorMarkers&&(fd.addProperty(I,"markers","1"),fd.addChild(I,"x14:colorMarkers",{rgb:C.colorMarkers})),C.colorFirst&&(fd.addProperty(I,"first","1"),fd.addChild(I,"x14:colorFirst",{rgb:C.colorFirst})),C.colorLast&&(fd.addProperty(I,"last","1"),fd.addChild(I,"x14:colorLast",{rgb:C.colorLast})),C.colorHigh&&(fd.addProperty(I,"high","1"),fd.addChild(I,"x14:colorHigh",{rgb:C.colorHigh})),C.colorLow&&(fd.addProperty(I,"low","1"),fd.addChild(I,"x14:colorLow",{rgb:C.colorLow}));var S=fd.addChild(I,"x14:sparklines");for(var E in x){var O=fd.addChild(S,"x14:sparkline");fd.addChild(O,"xm:f",void 0,x[E]),fd.addChild(O,"xm:sqref",void 0,E)}}}return this._memo&&fd.addChild(t,"legacyDrawing",{"r:id":this._memo.vmlId}),_d.XML_HEAD_STRING+fd.toString(t)},t.prototype.createBorderEdges=function(t){function e(e){var i={};return e.forEach((function(e){i["border-".concat(e,"-style")]=t["border-".concat(e,"-style")],i["border-".concat(e,"-color")]=t["border-".concat(e,"-color")],i["border-".concat(e,"-width")]=t["border-".concat(e,"-width")]})),this._book._styles._borders.createFromCss(i)||{}}t&&(this._borderEdges={leftTop:e.call(this,["left","top"]),top:e.call(this,["top"]),rightTop:e.call(this,["right","top"]),left:e.call(this,["left"]),right:e.call(this,["right"]),leftBottom:e.call(this,["left","bottom"]),bottom:e.call(this,["bottom"]),rightBottom:e.call(this,["right","bottom"])})},t.prototype.setFixedInfo=function(t,e){this._fixedRow=null==t?this._fixedRow:Math.max(this._fixedRow,t),this._fixedCol=null==e?this._fixedCol:Math.max(this._fixedCol,e)},t.prototype.addImage=function(t,e,i,o,r,n,s,a){this._createDrawing();var l=this._book.addImage(n);return this._drawing.addImage(t,e,i,o,r,l,s,a)},t.prototype.addActualTarget=function(t,e,i,o,r,n,s,a){this._createDrawing(),this._drawing.addActualTarget(t,e,i,o,r,n,s,a)},t.prototype.addBar=function(t,e,i,o,r,n,s,a,l,h){this._createDrawing(),this._drawing.addBar(t,e,i,o,r,n,s,a,l,h)},t.prototype.addSignal=function(t,e,i,o,r,n,s,a,l,h,u){this._createDrawing(),this._drawing.addSignal(t,e,i,o,r,n,s,a,l,h,u)},t.prototype.addMemo=function(t,e,i){this._createMemo(),this._memo.addMemo(t,e,i)},t.prototype._prepare=function(){this._txdoc=fd.createDocument("worksheet",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}),this._txmerge=fd.createDocument("mergeCells")},t.prototype._createDrawing=function(){void 0===this._drawing&&(this._drawing=this._book.createDrawing(this),this._drawing.rId=this._relation_indexer++)},t.prototype._createMemo=function(){void 0===this._memo&&(this._memo=this._book.createMemo(this),this._memo.rId=this._relation_indexer++,this._memo.vId=this._relation_indexer++)},t.RELATION_ID="rId",t}(),Hd=function(){function t(t){this._sheet_indexer=3,this._drawing_indexer=1,this._comments_indexer=1,this._parts={},this._parts={},this._strings=new gd,this._images=new md,this._styles=new Nd(t),this._downloader=new cd,this._sheets=[],this._drawings=[],this._memos=[],this._preapreTemplateParts()}return t.prototype.dispose=function(){this._parts={},this._strings.dispose(),this._strings=null,this._styles.dispose(),this._styles=null,this._drawings.forEach((function(t){t.dispose()})),this._drawings=null,this._memos.forEach((function(t){t.dispose()})),this._memos=null,this._sheets.forEach((function(t){t.dispose()})),this._sheets=null},Object.defineProperty(t.prototype,"currentSheet",{get:function(){return this._currentSheet},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._sheets?this._sheets.length:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"styles",{get:function(){return this._styles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"downloader",{get:function(){return this._downloader},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasImage",{get:function(){return this._images._images.length>0},enumerable:!1,configurable:!0}),t.prototype.createSheet=function(t,e){var i=new jd(this,this._sheet_indexer++,t||"Sheet"+(this._sheets.length+1),e);return this._sheets.push(i),this._currentSheet=i,i},t.prototype.createDrawing=function(t){var e=new Cd(this,t,this._drawing_indexer++);return this._drawings.push(e),e},t.prototype.createMemo=function(t){var e=new xd(t,this._comments_indexer++);return this._memos.push(e),e},t.prototype.addSharedString=function(t){return this._strings.add(t)},t.prototype.addImage=function(t){return this._images.add(t)},t.prototype.getImageMap=function(){return this._images.getImageMap()},t.prototype.getExcelImage=function(t){return this._images.getImage(t)},t.prototype.getImageIndex=function(t){return this._images.getImageId(t)},t.prototype.addNumberFormat=function(t){return this._styles.addNumberFormat(t)},t.prototype.addStyle=function(t,e,i,o,r,n){if(null==r){var s=t.whiteSpace||t["white-space"]||t["text-wrap-mode"];r=null!=s&&"none"!==s&&"nowrap"!==s}return this._styles.addStyle(t,e,i,o,r,n)},t.prototype.changeFormatId=function(t,e){return this._styles.changeFormatId(t,e)},t.prototype.changeBorderId=function(t,e){return this._styles.changeBorder(t,e)},t.prototype.extendStyle=function(t,e,i,o,r){return this._styles.extendStyle(t,e,i,o,r)},t.prototype.createParts=function(){var t=this._parts,e=fd.createDocument("Types",{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"});if(fd.addChild(e,"Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),this._memos.length>0&&fd.addChild(e,"Default",{Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"}),fd.addChild(e,"Default",{Extension:"xml",ContentType:"application/xml"}),fd.addChild(e,"Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),fd.addChild(e,"Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),fd.addChild(e,"Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),fd.addChild(e,"Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),fd.addChild(e,"Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),this._drawings.length>0){for(var i="application/vnd.openxmlformats-officedocument.drawing+xml",o=0;o<this._drawings.length;o++){var r="/xl/drawings/"+(f=this._drawings[o]).fileName;fd.addChild(e,"Override",{PartName:r,ContentType:i})}var n=this.downloader.getContentTypes();Object.keys(n).forEach((function(t){fd.addChild(e,"Default",{Extension:t,ContentType:n[t]})}))}if(this._memos.length>0)for(i="application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",o=0;o<this._memos.length;o++){r="/xl/"+(_=this._memos[o]).fileName;fd.addChild(e,"Override",{PartName:r,ContentType:i})}var s=fd.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"});fd.addChild(s,"Relationship",{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}),fd.addChild(s,"Relationship",{Id:"rId2",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"});var a=fd.createDocument("workbook",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"});fd.addChild(a,"workbookPr",{date1904:"false"});var l=fd.addChild(a,"bookViews");fd.addChild(l,"workbookView",{activeTab:"0"});for(var h=fd.addChild(a,"sheets"),u=(o=0,this._sheets.length);o<u;o++){var c=this._sheets[o],d="worksheets/sheet"+(o+1).toString()+".xml",p="xl/"+d;if(t[p]=c.createPart(),e&&fd.addChild(e,"Override",{PartName:"/"+p,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"}),h&&fd.addChild(h,"sheet",{name:c.name||"Sheet"+(o+1).toString(),sheetId:(o+1).toString(),"r:id":c.id}),s&&fd.addChild(s,"Relationship",{Id:c.id,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:d}),c.drawing){var f=c.drawing;t[p="xl/worksheets/_rels/sheet"+(o+1).toString()+".xml.rels"]=f.createSheetRel(),t[p="xl/drawings/_rels/"+f.fileName+".rels"]=f.createRel(),t[p="xl/drawings/"+f.fileName]=f.createPart()}if(c.memo){var _=c.memo;t[p="xl/worksheets/_rels/sheet"+(o+1).toString()+".xml.rels"]=_.createSheetRel(),t[p="xl/"+_.fileName]=_.createPart(),t[p="xl/drawings/vmlDrawing1.vml"]=_.createVmlPart()}}var g=_d.XML_HEAD_STRING;return t["[Content_Types].xml"]=g+fd.toString(e),t["xl/workbook.xml"]=g+fd.toString(a),t["xl/_rels/workbook.xml.rels"]=g+fd.toString(s),t["xl/sharedStrings.xml"]=this._strings.createPart(),t["xl/styles.xml"]=this._styles.createPart(),t},t.prototype.createCoreProperties=function(t){var e=t.created?t.created.toISOString():(new Date).toISOString(),i=_d.XML_HEAD_STRING;for(var o in this._parts["docProps/core.xml"]=i+'<coreProperties xmlns="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dcterms:created xsi:type="dcterms:W3CDTF">'+e+"</dcterms:created>",t)if("created"!==o){var r=("keywords"==o||"category"==o?"cp:":"dc:")+o;this._parts["docProps/core.xml"]+="<"+r+">"+fd.xmlEscape(t[o])+"</"+r+">"}this._parts["docProps/core.xml"]+="</coreProperties>"},t.prototype._preapreTemplateParts=function(){var t=this._parts,e=_d.XML_HEAD_STRING;t["_rels/.rels"]=e+'<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/></Relationships>',t["docProps/app.xml"]=e+'<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties"><Application>RealGrid</Application><AppVersion>2.0</AppVersion></Properties>'},t}(),Gd=function(e){function i(i,o){void 0===o&&(o=null);var r=e.call(this,null,i)||this;return r._groupSorting=!0,r._groupSortDirection=t.SortDirection.ASCENDING,r._groupSortCase=t.SortCase.SENSITIVE,r.source=r._rs=new bn(!1),r._groupedProvider=new Ur(r._rs,!1),r._groupedProvider.footerCounter=o,r._summarizer=new Rn(r._rs),r}return o(i,e),i.prototype._doDispose=function(){this.clearListener(),this._rs&&this._rs.dispose(),this._rs=null,this._groupedProvider&&this._groupedProvider.dispose(),this._groupedProvider=null,this._summarizer&&this._summarizer.dispose(),this._summarizer=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"maxRowCount",{get:function(){return this._rs.maxItemCount},set:function(t){this._rs.maxItemCount=Math.max(0,t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hideDeleted",{get:function(){return this._rs.hideDeleted},set:function(t){this._rs.hideDeleted=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"inclusiveFiltering",{get:function(){return this._rs.isFilterOr},set:function(t){this._rs.isFilterOr=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return this._rs.summaryMode},set:function(t){this._rs.summaryMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupSummaryMode",{get:function(){return this._groupedProvider.summaryMode},set:function(t){this._groupedProvider.summaryMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sortMode",{get:function(){return this._rs.sortMode},set:function(t){this._rs.sortMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"filterMode",{get:function(){return this._rs.filterMode},set:function(t){this._rs.filterMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"grouped",{get:function(){return this._groupedProvider.grouped},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergedGrouped",{get:function(){return this._groupedProvider.grouped&&this._groupedProvider.mergeMode},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupLevels",{get:function(){return this._groupedProvider.groupCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupByFieldCount",{get:function(){return this._groupedProvider.groupCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupByFields",{get:function(){return this._groupedProvider.groupedFields},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandWhenGrouping",{set:function(t){this._groupedProvider.expandWhenGrouping=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summarizer",{get:function(){return this._summarizer},enumerable:!1,configurable:!0}),i.prototype.canGrouping=function(t){return this.source.canGrouping(t)},i.prototype.getFieldDomain=function(t){return this._rs.getFieldDomain(t)},i.prototype.isFiltered=function(t){return null!=t?this._rs.hasFilter(t):this._rs.hasFilters()},i.prototype.addFilter=function(t,e){this._rs.addFilter(t,e)},i.prototype.clearAllFilters=function(){this._rs.clearAllFilters()},i.prototype.beginFiltering=function(){this._rs.beginFilter()},i.prototype.endFiltering=function(t,e,i){this._rs.endFilter(!0,t,e,i)},i.prototype.setHideDeletedRows=function(t){this._rs.hideDeleted=t},i.prototype.orderBy=function(e,i,o){if(this._groupedProvider.grouped&&this._groupSorting){for(var r=i?i.length:0,n=o?o.length:0,s=this._groupedProvider.groupedFields,a=this._rs.getSortDirections(),l=this._rs.getSortCases(),h=[],u=0,c=s.length;u<c;u++)h.push(s[u]);for(u=0,c=e.length;u<c;u++){var d=e[u],p=h.indexOf(d),f=void 0,_=void 0;f=r>u?i[u]:r>0?i[r-1]:t.SortDirection.ASCENDING,_=n>u?o[u]:n>0?o[n-1]:t.SortCase.SENSITIVE,p<0?(h.push(d),a[h.length-1]=f,l[h.length-1]=_):(a[p]=f,l[p]=_)}s=h,this._rs.orderBy(s,a,l)}else this._rs.orderBy(e,i,o)},i.prototype.getSortFields=function(){return this._rs.getSortFields()},i.prototype.getSortDirections=function(){return this._rs.getSortDirections()},i.prototype.getSortCases=function(){return this._rs.getSortCases()},i.prototype.setLabelComparer=function(t){this._rs.labelComparer=t},i.prototype.groupBy=function(e,i,o,r){void 0===i&&(i=!0),void 0===o&&(o=t.SortDirection.ASCENDING),void 0===r&&(r=t.SortCase.SENSITIVE),(e&&!(e.length<1)||this._groupedProvider.grouped)&&this.canGrouping(e)&&(this._groupSorting=i,this._groupSortDirection=o,i&&this._rs.orderBy(e,[o],[r],!1),this.$_groupBy(e))},i.prototype.groupByMode=function(t,e){if(t&&t.length>0){if(this._groupSorting&&this._rs.orderBy(t,[this._groupSortDirection],[this._groupSortCase],!1),!this.canGrouping(t))return;this._groupedProvider.groupByMode(t,e)}else null!=e&&(this._groupedProvider._mergeMode=e)},i.prototype.$_groupBy=function(t,e){t&&t.length>0?(this.source=this._groupedProvider,this._groupedProvider.groupByMode(t,e)):(this._groupedProvider.groupByMode(t,e),this.source=this._rs)},i.prototype.addGroupBy=function(t,e,i){var o;if(this._groupedProvider.groupCount<1?o=[e]:(o=this._groupedProvider.groupedFields).splice(t,0,e),this._groupSorting=0===t?i:this._groupSorting,this.canGrouping(o)){if(this._groupSorting){var r=[this._groupSortDirection];this._rs.orderBy(o,r,null,!1)}this.$_groupBy(o)}},i.prototype.removeGroupBy=function(t,e){if(this._groupedProvider.grouped){for(var i=this._groupedProvider.groupedFields,o=-1,r=0,n=i.length-1;n>=0;n--)if(r++,i[n]==t){o=n;break}if(o>=0){if(i.splice(o,e?r:1),!this.canGrouping(i))return;this._groupSorting&&this._rs.orderBy(i,[this._groupSortDirection],null,!1),this.$_groupBy(i)}else{if(!this.canGrouping(null))return;this._groupSorting&&this._rs.orderBy(null,null,null,!1)}}},i.prototype.isGroupedField=function(t){return this._groupedProvider.isGroupedField(t)},i.prototype.getGroupLevel=function(t){return this._groupedProvider.getGroupLevel(t)},i.prototype.expand=function(t,e,i,o){this._groupedProvider.expand(t,e,i,o)},i.prototype.collapse=function(t,e,i,o){this._groupedProvider.collapse(t,e,i,o)},i.prototype.collapseAll=function(t){this._groupedProvider.collapseAll(t)},i.prototype.expandAll=function(t,e){this._groupedProvider.expandAll(t,e)},i.prototype.setPaging=function(t,e,i,o){this._rs.setPaging(t,e,i,o)},Object.defineProperty(i.prototype,"page",{get:function(){return this._rs.page},enumerable:!1,configurable:!0}),i.prototype.setPage=function(t,e){this._rs.setPage(t,e)},Object.defineProperty(i.prototype,"pageCount",{get:function(){return this._rs.pageCount},set:function(t){this._rs.pageCount=t},enumerable:!1,configurable:!0}),i.prototype.getPageOfDataRow=function(t){return this._rs.getPageOfDataRow(t)},i.prototype.getDisplayItemIndex=function(t){return this._rs.isPaging?t.index+this._rs.pageStartIndex:t.index},i.prototype.getCheckedRows=function(t){return this._rs.getCheckedRows(t)},Object.defineProperty(i.prototype,"checkableExpression",{set:function(t){this._rs.checkableExpression=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checkableCallback",{set:function(t){this._rs.checkableCallback=t},enumerable:!1,configurable:!0}),i.prototype.resetCheckables=function(){this._rs.resetCheckables()},i.prototype.applyCheckables=function(){this._rs.applyCheckables()},i.prototype.getFirstRow=function(){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getFirstRow():this._rs.getItem(0)},i.prototype.getLastRow=function(){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getLastRow():this._rs.getItem(this._rs.itemCount-1)},i.prototype.getPrevRow=function(t){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getPrevRow(t):t&&t.index>0?this._rs.getItem(t.index-1):this._rs.getItem(0)},i.prototype.getNextRow=function(t){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getNextRow(t):t&&t.index<this._rs.itemCount-1?this._rs.getItem(t.index+1):this._rs.getItem(0)},i.prototype.getGroupItem=function(t){if(this._groupedProvider.grouped)return this._groupedProvider.getGroupItem(t)},i.prototype.getJsonRows=function(){return this._rs.getJsonRows()},Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._rs.rowCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemLength",{get:function(){return this._rs.itemLength},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"visibleRowCount",{get:function(){return this.grouped?this._groupedProvider.visibleRowCount:this._rs.rowCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sorted",{get:function(){return this._rs.sorted},enumerable:!1,configurable:!0}),i.prototype.getMovable=function(t){return!this.grouped&&this._rs.getMovable(t)},i.prototype.getAllItems=function(){return this.source.getAllItems()},i.prototype.getPagingAllItems=function(){var t=this._rs;return t.isSorted?t._sortedItems.slice():t._items.slice()},i.prototype.findItem=function(t,e,i,o,r){return this._groupedProvider.findItem(t,e,i,o,r)},i.prototype.findCell=function(t,e,i,o,r,n){return this._groupedProvider.findCell(t,e,i,o,r,n)},i.prototype.checkItems=function(t,e,i){this.source.checkItems(t,e,i)},i.prototype.checkItem=function(t,e,i,o){this.source.checkItem(t,e,i,o)},i.prototype.checkAll=function(t,e,i,o,r){var n=this.editingItem;n&&(!i||n.checkable)&&n._setChecked(t),this.source.checkAll(t,e,i,o,r)},i.prototype.setCheckFieldIndex=function(t){this._rs.setCheckFieldIndex(t)},i.prototype.setItemChecked=function(t,e){return this._rs.setItemChecked(t,e)},i.prototype.getItemChecked=function(t,e){return this._rs.getItemChecked(t,e)},i.prototype.setGroupCheckable=function(t,e){this.grouped&&this._groupedProvider.setGroupCheckable(t,e)},i.prototype.getItemOfRow=function(t,e){return this._rs.getItemOfRow(t,e)},i.prototype.addCellStyle=function(t,e,i){return this._rs.addCellStyle(t,e,i)},i.prototype.removeCellStyle=function(t,e){return this._rs.removeCellStyle(t,e)},i.prototype.getUserCellStyle=function(t,e){return this._rs.getUserCellStyle(t,e)},i.prototype._doBeginUpdate=function(t){var i=e.prototype._doBeginUpdate.call(this,t);return this._groupedProvider.$_setEditItem(i),i},i.prototype._doBeginAppendDummy=function(){var t=e.prototype._doBeginAppendDummy.call(this);return this._groupedProvider.$_setDummyEditItem(t),t},i.prototype._doBeginAppend=function(t){var i=e.prototype._doBeginAppend.call(this,t);return this._groupedProvider.$_setEditItem(i),i},i.prototype._doBeginInsert=function(t,i,o,r){var n=e.prototype._doBeginInsert.call(this,t,i,o,r);return this._groupedProvider.$_setEditItem(n),n},i.prototype._doCancelDummyEdit=function(){e.prototype._doCancelDummyEdit.call(this),this._groupedProvider.$_setDummyEditItem(null)},i.prototype._doCancelEdit=function(t,i){e.prototype._doCancelEdit.call(this,t,i),this._groupedProvider.$_setEditItem(null)},i.prototype._doCommitEdit=function(t,i){return!!e.prototype._doCommitEdit.call(this,t,i)&&(this._groupedProvider.$_setEditItem(null),!0)},i.prototype.moveItem=function(t,e){this.source.moveItem(t,e)},i.prototype.setSortingOptions=function(t){this._rs.setSortingOptions(t)},i.prototype.onGroupedItemProviderGrouping=function(t,e){return this.fireConfirmEvent(Ur.GROUPING,e)},i.prototype.onGroupedItemProviderGrouped=function(t){this.fireEvent(Ur.GROUPED)},i.prototype.onGroupedItemProviderExpand=function(t,e){return this.fireConfirmEvent(Ur.EXPAND,e)},i.prototype.onGroupedItemProviderExpanded=function(t,e){this.fireEvent(Ur.EXPANDED,e)},i.prototype.onGroupedItemProviderCollapse=function(t,e){return this.fireConfirmEvent(Ur.COLLAPSE,e)},i.prototype.onGroupedItemProviderCollapsed=function(t,e,i){this.fireEvent(Ur.COLLAPSED,e,i)},i}(Qo),Wd=function(t){function e(e,i,o){return void 0===o&&(o=null),t.call(this,e,i,o)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e}(function(t){function e(e,i,o){void 0===o&&(o=null);var r=t.call(this,e,o)||this;return r._clickable=!1,r}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"clickable",{get:function(){return this._clickable},set:function(t){t!=this._clickable&&(this._clickable=t,this._changed())},enumerable:!1,configurable:!0}),e.prototype._getCssSelector=function(){return""},e.prototype._doDraw=function(t){},e.prototype._hoverChanged=function(){this.invalidate()},e.prototype._changed=function(){this.invalidate()},e}(_a)),Ud=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype._doUpdateContent=function(t,e,i){i[Rt.TextProp]=""},e.prototype._doRender=function(t){},e}(Lh),Yd=function(t){function e(e,i){var o=t.call(this,e,null,i)||this;return o._cells=[],o._levels=0,o}return o(e,t),e.prototype._doDispose=function(){this._cells.forEach((function(t){t.dispose()})),this._cells=null,t.prototype._doDispose.call(this)},e.prototype.prepare=function(t){for(this._levels=t;this._cells.length<t;){var e=this.$_createCell();this._cells.push(e)}},e.prototype._doPrepareTableExtents=function(e){if(t.prototype._doPrepareTableExtents.call(this,e),this._levels>0)for(var i=this.width/this._levels,o=0;o<this._levels;o++)this._cells[o].width=i},e.prototype._doPrepareTableRow=function(e,i,o,r){t.prototype._doPrepareTableRow.call(this,e,i,o,r),r.className=this.$_getRowClassName(i)},e.prototype._prepareCellContent=function(t,e){var i=St(t);return t[v]=e+1,i.createElement("div")},e.prototype._doLayoutContent=function(t){for(var e=this._levels;this.childCount<e;)this.addChild(this._cells[this.childCount]);for(;this.childCount>e;)this.removeLast()},e.prototype._doRender=function(t){},e.prototype._getCellCount=function(t){return this._levels},e.prototype._getCellWidth=function(t,e){return this._cells[e].width},e}(Rl),zd=function(t){function e(e){return t.call(this,e,"rowGroupHeadView")||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-rowgroup-head"},e.prototype._getTableRowHeight=function(t,e){var i=this.grid,o=[];return i.header.visible&&o.push(t.headBounds.height),i.filterPanel.visible&&o.push(t.filterPanelBounds.height),i.headerSummaries.visible&&o.push(t.sumBounds.height),o[e]||0},e.prototype.$_createCell=function(){return new Ud(this.doc,"rowGroupHeadCellView")},e.prototype._getTableRowCount=function(t){var e=this.grid,i=0;return e.header.visible&&i++,e.filterPanel.visible&&i++,e.headerSummaries.isVisible()&&i++,i},e.prototype.$_getRowClassName=function(t){var e=this.grid,i=[];return e.header.visible&&i.push(""),e.filterPanel.visible&&i.push("rg-rowgroup-filter-panel"),e.headerSummaries.isVisible()&&i.push("rg-rowgroup-summary"),i[t]||""},e}(Yd),qd=function(t){function e(e){return t.call(this,e,"rowGroupFootView")||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-rowgroup-foot"},e.prototype._getTableRowHeight=function(t,e){return t.footBounds.height},e.prototype.$_createCell=function(){return new Ud(this.doc,"rowGroupFootCellView")},e.prototype._getTableRowCount=function(t){return 1},e.prototype.$_getRowClassName=function(t){return"rg-rowgroup-foot-row"},e}(Yd),Kd="rg-rowgroup-expander",Xd=Kd+" rg-rowgroup-expander-expanded",Zd=Kd+" rg-rowgroup-expander-collapsed",Jd=function(t){function e(e,i){var o=t.call(this,e,i,"rowGroupExpandHandle")||this;return o._expanded=!1,o.clickable=!0,o}return o(e,t),e.isExpander=function(t){var e=t.className;return e&&e.indexOf(Kd)>=0},Object.defineProperty(e.prototype,"expanded",{get:function(){return this._expanded},set:function(t){t!=this._expanded&&(this._expanded=t,this._changed())},enumerable:!1,configurable:!0}),e.prototype._createDom=function(t){return t.createElement("span")},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),e.style.position="",e.style.display="inline-block"},e.prototype._getCssSelector=function(){return this._expanded?Xd:Zd},e.prototype._getCssDisplay=function(){return""},e.prototype._beforeDraw=function(t){this._setClassName(t)},e}(Wd),Qd=function(e){function i(t){var i=e.call(this,t,"rowGroupBarCell")||this;return i._level=0,i._expander=new Jd(t,i),i.addChild(i._expander),i}return o(i,e),Object.defineProperty(i.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t},enumerable:!1,configurable:!0}),i.prototype.updateCell=function(i,o,r){e.prototype.updateCell.call(this,i,o,r);var n,s=o.item,a=s.getAncestor(this.bar.l);if(a){var l=i.rowGroup;n=(a.expanded?l.expandedAdornments:l.collapsedAdornments)===t.RowGroupAdornments.SUMMARY}if(a&&(s instanceof Uo&&s===a||a.getFirstVisibleItem(n)===s)&&a.level===this.bar.l){var h=this._expander._dom;r.appendChild(h),this._expander.setBounds(1,1,this.width-2,this.width-2),this._expander.expanded=a.expanded;var u=i.rowGroup.$_isExpanderVisible(a);this._expander.visible=!a.expanded||null==u||u,h[y]=s.index}else this._expander.visible=!1;r.style.paddingTop="2px"},i.prototype.validate=function(){e.prototype.validate.call(this);var t=this._expander._dom;Rt.detach(t)},i}(Lh),tp=function(e){function i(t,i){var o=e.call(this,t,i,"rowGroupBarContainer")||this;return o._cells=[],o._levels=0,o._bars=[],o}return o(i,e),i.prototype._doDispose=function(){this._cells=null,e.prototype._doDispose.call(this)},i.prototype.prepare=function(t,e){this._levels=e},i.prototype.getLevelIndent=function(t){return t*this.width/Math.max(1,this._levels)},i.prototype.getViewOf=function(t){for(var e=this.getChildren(),i=0,o=e.length;i<o;i++){var r=e[i];if(r._expander._dom===t)return r}},Object.defineProperty(i.prototype,"currentLevels",{get:function(){return this._levels},enumerable:!1,configurable:!0}),i.prototype._getCssSelector=function(){return"rg-rowgroup-bar"},i.prototype._prepareCellContent=function(t,e){return St(t).createElement("div")},i.prototype._doLayoutContent=function(t){for(var e,i=t.grid,o=i.rowGroup,r=this.width/Math.max(1,this._levels),n=this._bars,s=n.length,a=t.topIndex,l=t.fixedItemCount,h=l>0;this.childCount<s;)e=this._cells.length>0?this._cells.pop():this._createCell(),this.addChild(e);for(;this.childCount>s;)(e=this.removeLast()).validate(),this._cells.push(e);for(var u=0;u<s;u++){var c=n[u];e=this.getChild(u);var d=c.tr1,p=h?d<l?d:d-1+a:d+a,f=Ds.temp(i,p),_=o.getBarCell(f),g=t.getTableItemBounds(c.r);e.bar=c,e.level=c.l,e.updateCell(i,_,this.getCellContent(d,c.c)),g.x=r*c.c,g.width=r,e.setRect(g)}},i.prototype._doRender=function(t){},i.prototype._doPrepareTableRows=function(t,i){e.prototype._doPrepareTableRows.call(this,t,i),this.$_layoutBarCells(t,i)},i.prototype._getTableRowHeight=function(t,e){var i=t.fixedItemCount>0&&e>t.fixedItemCount?1:0;return t.getTableItemHeight(e-i)},i.prototype._getCellCount=function(t){return this._levels},i.prototype._getCellWidth=function(t,e){return this.width/Math.max(1,this._levels)},i.prototype._createCell=function(){return new Qd(this.doc)},i.prototype.$_calcLevels=function(t,e,i,o){for(var r,n=[],s=1,a=0,l=0;l<o-i;l++){var h=t[l+i].getAncestor(e);n.push(-1),h&&r===h||(n[a]=s,r=h,a=n.length-1,s=0),s++}return n[a]=s,n},i.prototype.$_layoutBarCells=function(e,i){var o=e.grid,r=this.model,n=e.$_getItems(),s=n.length,a=e.fixedItemCount,l=i.children,h=this._bars=[];if(!(s<1)){for(var u=0,c=this._getCellCount(e);u<c;u++){var d=o.rowGroupLevels,p=r.indentVisibleLevel,f=0;f=p<0?d+p+u+1:u+1;var _=0,g=0;if(a>0){for(var m=void 0,b=void 0;_<a;_++,g++)(b=(m=l[g]).children[u]).style.display="",b.removeAttribute("rowspan"),Rt.setClassName(b,""),0===u&&Rt.setClassName(m,""),b[y]=_;m=l[g++],0===u&&Rt.setClassName(m,bl.ROW_BAR_STYLE),(b=m.children[u]).style.display="",b.removeAttribute("rowspan"),Rt.setClassName(b,bl.ROW_BAR_CELL_STYLE)}if(_<s)for(var v=this.$_calcLevels(n,f,_,s),w=0;_<s;_++,w++,g++){var C=v[w],x=(b=(m=l[g]).children[u],n[_]),I=x.getAncestor(f);if(0===u&&Rt.setClassName(m,""),b.removeAttribute("rowspan"),C>0){var S=this.grid.rowGroup,E=I&&(I.expanded?S.expandedAdornments:S.collapsedAdornments)===t.RowGroupAdornments.SUMMARY,O=1===C&&I&&(x instanceof Uo||I.getFirstVisibleItem(E)===x);(C>1||O)&&(h.push({r:_,tr1:g,tr2:g+C-1,c:u,l:f}),b.rowSpan=C),b.style.display="",Rt.setClassName(b,"rg-rowgroup-bar-cell rg-rowgroup-bar-level-"+String(f)),b[y]=x.index}else b.style.display="none",Rt.setClassName(b,"")}}h.sort((function(t,e){return t.r-e.r}))}},i}(Pl),ep=function(t){function e(e,i){var o=t.call(this,e,"rowGroupBarPane")||this;return o._barContainer=new tp(e,i),o.addChild(o._barContainer),o._footView=new qd(e),o.addChild(o._footView),o._headView=new zd(e),o.addChild(o._headView),o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"levelCount",{get:function(){return this.grid.layoutManager.rowGroupLevels},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentLevel",{get:function(){return this._barContainer.currentLevels},enumerable:!1,configurable:!0}),e.prototype.getLevelIndent=function(t){return this._barContainer.getLevelIndent(t)},e.prototype._doMeasure=function(t,e,i){var o=this._barContainer.model.getIndentCount(this.levelCount);return this._headView.prepare(o),this._footView.prepare(o),this._barContainer.prepare(t,o),new wl(o*t.rowGroup.levelIndent,i)},e.prototype._doLayoutContent=function(t){var e=this.grid,i=t.headBounds;if(this._headView.visible=e.header.visible||e.headerSummaries.isVisible()||e.filterPanel.visible){var o=0;e.header.visible&&(o+=i.height),e.headerSummaries.isVisible()&&(o+=t.summaryBounds.height),e.filterPanel.visible&&(o+=t.filterPanelBounds.height),this._headView.setBounds(0,i.y,this.width,o),this._headView.layoutContent(t)}i=t.footBounds,(this._footView.visible=e.footers.isVisible())&&(this._footView.setBounds(0,i.y,this.width,i.height),this._footView.layoutContent(t)),i=t.rowBarBounds,this._barContainer.setBounds(0,i.y,this.width,i.height),this._barContainer.layoutContent(t)},e.prototype._getCssSelector=function(){return"rg-rowgroup-bar-container"},e.prototype._visibleChanged=function(){var e=this;t.prototype._visibleChanged.call(this),this.getChildren().forEach((function(t){t.visible=e.visible}))},e}(qh);!function(t){function e(e){return t.call(this,e,"rowGroupPane")||this}o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)}}(qh);var ip=function(t){function e(e){var i=t.call(this,e,"rowGroupHeaderCellView")||this;return i._indent=0,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"indent",{get:function(){return this._indent},set:function(t){this._indent=Math.max(0,t)},enumerable:!1,configurable:!0}),e.prototype._createDom=function(t){return t.createElement("div")},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=e.style;i.top="50%",i.msTransform=i.transform="translate(0px, -50%)",i.setProperty("overflow","hidden","important"),i.setProperty("pointer-events","none","important")},e.prototype._beforeDraw=function(t){},e.prototype._doUpdateContent=function(t,e,i){i[Rt.TextProp]=e.text,i.style.left=this._indent>0?this._indent+"px":""},e}(Lh),op=function(t){function e(e){var i=t.call(this,e,"rowGroupHeaderView")||this;return i._cellView=new ip(e),i.addChild(i._cellView),i}return o(e,t),e.prototype._doDispose=function(){this._item=null,this._cellView=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},set:function(t){this._item=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemIndex",{get:function(){return this._item.index},enumerable:!1,configurable:!0}),e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),e.style.setProperty("overflow","hidden","important")},e.prototype._getCssSelector=function(){return"rg-rowgroup-header rg-rowgroup-header-level-"+String(this._item.level)},e.prototype._doLayoutContent=function(t){var e=t.grid,i=e.rowGroup;this._cellView.indent=i.indentVisible?0:e.groupBarPane.getLevelIndent(this._item.level-1),this._cellView.updateCell(e,i.getHeaderCell(this._item),this._cellView._dom)},e}(Cl),rp=function(t){function e(e){return t.call(this,e,"rowGroupRightHeaderView")||this}return o(e,t),e.prototype._doDispose=function(){this._item=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},set:function(t){this._item=t},enumerable:!1,configurable:!0}),e.prototype._getCssSelector=function(){return"rg-rowgroup-header rg-rowgroup-header-level-"+String(this._item.level)},e}(Cl),np=function(t){function e(e){return t.call(this,e,"rowGroupFooterView")||this}return o(e,t),e.prototype._doLayoutContent=function(t){var e=t.grid,i=e.rowGroup,o=t.cellLayouts._dataCells.length,r=this._getFirstCell(t),n=this._getStartCell(t)-r,s=n,a=this._getEndCell(t)-r,l=this._item instanceof jr;l&&(s=Math.max(n,this._item.parent.level-r)),this.$_refreshSpans(this._item.index,this._item.$_footerIndex,o,s,a),s=0;for(var h=0;h<o;h++){var u=this._getTableRow(t,this._domIndex+h),c=this._getBodyCells(this._domIndex+h),d=i.getFooterStyleName(this._item);u.className=d;for(var p=s;p<=a;p++){var f=c[p],_=f.layout;if(!(l&&f.merged&&f.head&&f===f.head))if(e.isRecycleMode()&&u.recycle);else if(f.clearExpander(),f.clearButtons(),f.renderer2&&f.renderer2.clearContent(),f.visible)if(_.isNull)_.isProxy||f.setClassName(Rc.FOOTER_CELL_STYLE);else{var g=Ds.temp(e,this._item.index,_),y=i.getFooterCell(g);this._updateCell(e,i,y,f)}}}},e.prototype._getBodyCells=function(t){return this.parent.$_getBodyCells(t)},e.prototype._getTableRow=function(t,e){return this.parent.$_getTableRow(t,e)},e.prototype._getTableCell=function(t){return this.parent.$_getTableCell(this._domIndex,t)},e.prototype._getFirstCell=function(t){return t._firstCell},e.prototype._getLastCell=function(t){return t._lastCell},e.prototype._getStartCell=function(t){return t.getStartCell(!1)},e.prototype._getEndCell=function(t){return t.getEndCell(!1)},e.prototype._getBodyView=function(){return this.parent._bodyView},e.prototype._updateCell=function(t,e,i,o){var r=i.valueColumn.groupFooters.get(i.footerIndex),n=e.getFooterCellStyle(i,o.style.clear()),s=i.getSummary(),a=o.cell.firstElementChild;if(o.setClassName(n.styleName),Rt.setClassName(a,Rc.FOOTER_CELL_RENDERER),o.refreshFormatters(n),e.getFooterCellFormatters(r,o),s){var l=i.getTemplate(o),h=i.getSummary().templateEvents;void 0===l?a[Rt.TextProp]=i.getDisplayText(o):(a.innerHTML=l,h&&dn(a,h))}else a[Rt.TextProp]=""},e.prototype.$_refreshSpans=function(t,e,i,o,r){for(var n=this.grid.layoutManager._tableRowPoints,s=0;s<i;s++)for(var a=this._getBodyCells(this._domIndex+s),l=o;l<=r;l++){var h=a[l],u=h.layout,c=u.parent,d=c&&c.vertical;if(h.spanned);else if(u.isProxy)h.clear(!1);else{var p=0,f=0,_=u.getGroupFooterUserSpan(this._item.parent,e),g=_?0:u.getGroupFooterSpan(t,e)-1;if(_){var y=this._item,m=(y.parent.footerCount-y.vindex)*i,b=_.footerCount||0,v=b>0?b*i:_.rowspan||1,w=_.colspan||1;v=Math.min(v,m),h.set(w,v,!0);for(var C=0;C<v;C++)for(var x=this._getBodyCells(this._domIndex+C+s),I=0;I<w;I++){var S=x&&x[I+l];S&&S!==h&&S.span(h)}}else if(g>0){var E=0,O=u.vindex+1;if(d)for(;E++<g&&E<i;){f+=(R=c.getVisible(O++))._dspan,this._getBodyCells(this._domIndex+s+1)[l].span(h)}else for(;E++<g&&l-o+E<a.length&&O<c.visibleCount;){var R;if(!(R=c.getVisible(O++)))break;p+=R._cspan,a[l+E].span(h)}}u.isNull&&h.clear(!0),!_&&h.set(u._cspan+p,u._dspan+f,!0),h.rowSpan>1&&(h.height=n[h.rowIndex+h.rowSpan]-n[h.rowIndex],h.cell.firstElementChild.style.maxHeight=h.height-2+"px")}}},e}(Ll),sp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getBodyCells=function(t){return this.parent.$_getFixedBodyCells(t)},e.prototype._getTableRow=function(t,e){return this.parent.$_getFixedTableRow(e)},e.prototype._getTableCell=function(t){return this.parent.$_getFixedTableCell(this._domIndex,t)},e.prototype._getBodyView=function(){return this.parent._fixedView},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e}(np),ap=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getBodyCells=function(t){return this.parent.$_getRightBodyCells(t)},e.prototype._getTableRow=function(t,e){return this.parent.$_getRightTableRow(e)},e.prototype._getTableCell=function(t){return this.parent.$_getRightTableCell(this._domIndex,t)},e.prototype._getBodyView=function(){return this.parent._rightView},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e}(np),lp=function(t){function e(e,i){var o=t.call(this,e,i||"rowGroupLayer")||this;return o._headerPool=[],o._headerViews=[],o._rightHeaderPool=[],o._rightHeaderViews=[],o._footerPool=[],o._footerViews=[],o._fixedFooterPool=[],o._fixedFooterViews=[],o._rightFooterPool=[],o._rightFooterViews=[],o._indents=[],o}return o(e,t),e.prototype._doDispose=function(){this._bodyView=this._fixedView=this._rightView=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this.getAncestor(pp)},enumerable:!1,configurable:!0}),e.prototype.layout=function(t){this._doPrepareContent(t),this._doLayoutContent(t)},e.prototype.getHeaderView=function(t){for(var e=0,i=this._headerViews;e<i.length;e++){var o=i[e];if(o.item===t)return o}},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=e.style;i.setProperty("overflow","hidden","important"),i.setProperty("pointer-events","none","important")},e.prototype._getCssSelector=function(){return"rg-rowgroup-layer"},e.prototype._doDraw=function(t){},e.prototype._doPrepareContent=function(t){this.$_prepareHeaders(t)},e.prototype.$_prepareIndents=function(t){for(var e=this._indents=[],i=t.rowGroupLevels+1,o=0;o<i;o++)e[o]=t.getLevelIndent(o);return e},e.prototype._doLayoutContent=function(t){var e,i=this.$_prepareIndents(t),o=t.$_getItems(),r=o.length,n=t.fixedItemCount,s=n>0,a=this._rightView,l=t.contentBounds.right-t.sideContentBounds.x,h=0,u=0,c=t.trs,d=n,p=s?d*c+1:d*c;for(a&&(e=t.rightContentBounds.clone(),l=Math.min(l,this.width-e.width),e.x-=this.x,e.leftBy(t.rightBarWidth));d<r;d++){var f=o[d];if(f instanceof Uo){var _=this._headerViews[h],g=t.getTableItemBounds(d),y=i[f.level];if(_.item=f,_.setBounds(y,g.y,l-y,g.height),_.layoutContent(t),a){var m=this._rightHeaderViews[h];m.item=f,m.setBounds(e.x,g.y,e.width,g.height),m.layoutContent(t)}h++,p++}else if(f instanceof Yo){if(this._fixedView)(_=this._fixedFooterViews[u]).updateItem(f,p,c,!0),_.layoutContent(t);if(this._rightView)(_=this._rightFooterViews[u]).updateItem(f,p,c,!0),_.layoutContent(t);if(this._bodyView){_=this._footerViews[u++];Rt.isDebugging(),_.updateItem(f,p,c,!0),_.layoutContent(t)}p+=c}else p+=c}},e.prototype.$_prepareHeaders=function(t){for(var e=t.$_getItems(),i=0,o=t.fixedItemCount,r=e.length;o<r;o++)e[o]instanceof Uo&&i++;for(var n=this._headerPool,s=this._headerViews;s.length<i;){(a=n.pop())||(a=new op(this.doc)),this.addChild(a),s.push(a)}for(;s.length>i;){var a=s.pop();this.removeChild(a),n.push(a)}var l=this._rightHeaderPool,h=this._rightHeaderViews;if(this._rightView){for(;h.length<i;){(a=l.pop())||(a=new rp(this.doc)),this.addChild(a),h.push(a)}for(;h.length>i;){a=h.pop();this.removeChild(a),l.push(a)}}else for(;h.length>0;){a=h.pop();this.removeChild(a),l.push(a)}},e.prototype.$_prepareGroupItems=function(t,e,i,o){this._bodyView=e,this._fixedView=i,this._rightView=o},e.prototype.$_prepareGroupFooters=function(t,e){for(var i=0,o=e.fixedItemCount,r=t.length;o<r;o++)t[o]instanceof Yo&&i++;for(;this._footerViews.length<i;){(n=this._footerPool.pop())||(n=new np(this.doc)),this.addChild(n),this._footerViews.push(n)}for(;this._footerViews.length>i;){var n=this._footerViews.pop();this.removeChild(n),this._footerPool.push(n)}if(this._fixedView){for(;this._fixedFooterViews.length<i;){(n=this._fixedFooterPool.pop())||(n=new sp(this.doc)),this.addChild(n),this._fixedFooterViews.push(n)}for(;this._fixedFooterViews.length>i;){n=this._fixedFooterViews.pop();this.removeChild(n),this._fixedFooterPool.push(n)}}else for(;this._fixedFooterViews.length>0;){n=this._fixedFooterViews.pop();this.removeChild(n),this._fixedFooterPool.push(n)}if(this._rightView){for(;this._rightFooterViews.length<i;){(n=this._rightFooterPool.pop())||(n=new ap(this.doc)),this.addChild(n),this._rightFooterViews.push(n)}for(;this._rightFooterViews.length>i;){n=this._rightFooterViews.pop();this.removeChild(n),this._rightFooterPool.push(n)}}else for(;this._rightFooterViews.length>0;){n=this._rightFooterViews.pop();this.removeChild(n),this._rightFooterPool.push(n)}},e.prototype.$_getTableRow=function(t,e){return this._bodyView._tbody.children[e]},e.prototype.$_getTableCell=function(t,e){return this._bodyView._tbody.children[t].children[e]},e.prototype.$_getFixedTableRow=function(t){return this._fixedView._tbody.children[t]},e.prototype.$_getFixedTableCell=function(t,e){return this._fixedView._tbody.children[t].children[e]},e.prototype.$_getRightTableRow=function(t){return this._rightView._tbody.children[t]},e.prototype.$_getRightTableCell=function(t,e){return this._rightView._tbody.children[t].children[e]},e.prototype.$_getBodyCells=function(t){return this._bodyView._cells[t]},e.prototype.$_getFixedBodyCells=function(t){return this._fixedView._cells[t]},e.prototype.$_getRightBodyCells=function(t){return this._rightView._cells[t]},e}(ga),hp=function(t){function e(e){var i=t.call(this,e)||this;return i._enabled=!0,i._expandWhenGrouping=!0,i._summarizing=!0,i._fixMergedColumns=!0,i._headerClickable=!1,i._toast=new Wh({visible:!1,message:i._messageCallback}),i.assignFrom(Xe.grouping),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"prompt",{get:function(){return this._prompt||Ue.messages.groupingPrompt},set:function(t){t!=this._prompt&&(this._prompt=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){this._expandWhenGrouping=t,this._changed()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"summarizing",{get:function(){return this._summarizing},set:function(t){t!=this._summarizing&&(this._summarizing=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fixMergedColumns",{get:function(){return this._fixMergedColumns},set:function(t){this._fixMergedColumns=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerClickable",{get:function(){return this._headerClickable},set:function(t){this._headerClickable=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"toast",{get:function(){return this._toast},set:function(t){t&&!t.message&&((t=r(r({},t),{message:this._messageCallback})).message=this._messageCallback),this._toast.assignFrom(t)},enumerable:!1,configurable:!0}),e.prototype._changed=function(){this.grid._groupingOptionsChanged(this),this._layoutOwner()},e.prototype._messageCallback=function(){var t;return(null===(t=Xe.grouping.toast)||void 0===t?void 0:t.message)||Ue.messages.groupingToastMessage},e}(ml),up=function(t){function e(e){var i=t.call(this,e)||this;return i._field=-1,i._text="",i._textWidth=0,i._textHeight=0,i._closeHeight=0,i._padHorz=5,i._padVert=4,i._itemGap=8,i}return o(e,t),e.prototype._doDispose=function(){Rt.detach(this._textView),Rt.detach(this._closeView),this._textView=this._closeView=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"field",{get:function(){return this._field},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},enumerable:!1,configurable:!0}),e.prototype.setColumn=function(t){this._field=t.dataIndex,this._textView[Rt.TextProp]=this._text=t.displayText},e.prototype.isCloseButton=function(t){return t===this._closeView},e.prototype._getCssSelector=function(){return"rg-header rg-header-cell rg-group-panel-item"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=St(e);this._textView=i.createElement("span"),this._textView.className=this._getTextCss(),this._textView.style.display="inline-block",e.appendChild(this._textView),this._closeView=i.createElement("span"),this._closeView.className=this._getButtonCss(),e.appendChild(this._closeView)},e.prototype._doMeasure=function(t,e,i){var o=(this._textWidth=this._textView.offsetWidth)+this._itemGap+this._closeView.offsetWidth+2*this._padHorz,r=this._textHeight=this._textView.offsetHeight;return r=Math.max(r,this._closeHeight=this._closeView.offsetHeight),r+=2*this._padVert,new wl(o,r)},e.prototype._doLayoutContent=function(t){},e.prototype._doDraw=function(t){var e=this._dom.clientHeight;this._textView.style.left=this._padHorz+"px",this._textView.style.top=Math.floor((e-this._textHeight)/2)+"px",this._closeView.style.left=this._padHorz+this._textWidth+this._itemGap+"px",this._closeView.style.top=Math.floor((e-this._closeHeight)/2)+"px"},e.prototype._getTextCss=function(){return"rg-group-panel-item-text"},e.prototype._getButtonCss=function(){return"rg-group-panel-item-close"},e}(Cl),cp=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.setText=function(t){this._textView[Rt.TextProp]=this._text=t},e.prototype._getCssSelector=function(){return"rg-header rg-header-cell rg-group-panel-reset"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e)},e.prototype._doMeasure=function(e,i,o){if(this._text)return t.prototype._doMeasure.call(this,e,i,o);var r=t.prototype._doMeasure.call(this,e,i,o);return r.width=this._closeView.offsetWidth+2*this._padHorz,r},e.prototype._doDraw=function(e){if(this.text)t.prototype._doDraw.call(this,e);else{var i=this._dom,o=i.clientHeight,r=i.clientWidth,n=this._closeView.clientWidth;this._closeView.style.left=(r-n)/2+"px",this._closeView.style.top=Math.floor((o-this._closeHeight)/2)+"px"}},e.prototype._getTextCss=function(){return"rg-group-panel-reset-text"},e.prototype._getButtonCss=function(){return"rg-group-panel-reset-close"},e}(up),dp=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._minHeight=0,o._itemViews=[],o._count=0,o._padHorz=16,o._padVert=10,o._itemGap=20,o.visible=!1,o.assignFrom(Xe.groupPanel),o}return o(e,t),e.prototype._doDispose=function(){this._itemViews&&this._itemViews.forEach((function(t,e){t.dispose()})),this._itemViews=null,Rt.detach(this._messageView),this._messageView=null,this._resetView=this._resetView.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"showResetButton",{get:function(){return null!=this._showResetButton?this._showResetButton:Xe.groupPanel.showResetButton},set:function(t){this._showResetButton!=t&&(this._showResetButton=t,this._doSizeChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resetText",{get:function(){return null!=this._resetText?this._resetText:Xe.groupPanel.resetText||Ue.messages.groupResetText},set:function(t){this._resetText!=t&&(this._resetText=t,this._doSizeChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minHeight",{get:function(){return this._minHeight},set:function(t){this._minHeight!==t&&(this._minHeight=t,this._doSizeChanged())},enumerable:!1,configurable:!0}),e.prototype._getCssSelector=function(){return"rg-group-panel"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=St(e);e.style.overflow="hidden";var o=this._messageView=i.createElement("span");this._resetView=new cp(i),o.className="rg-group-panel-message",e.appendChild(o)},e.prototype._doMeasure=function(t,e,i){var o=t.groupingOptions;this._count=t.rowGroupLevels;var r=this.minHeight,n=0,s=this._messageView.style;if(this._count>0?s.display="none":(s.display="",this._messageView[Rt.TextProp]=o.prompt,n=this._messageView.offsetHeight,r=Math.max(r,n+2*this._padVert),s.left=this._padHorz+"px",s.top=(r-n)/2+"px"),this.$_prepareItemViews(t,this._count),this._count>0){for(var a=0;a<this._count;a++){var l=(h=this._itemViews[a]).measure(t,e,i);h.width=l.width,n=Math.max(n,l.height)}r=Math.max(r,n+2*this._padVert);for(a=0;a<this._count;a++){(h=this._itemViews[a]).height=n,h.y=(r-n)/2}if(this.showResetButton){var h;l=(h=this._resetView).measure(t,e,i);h.width=l.width,h.height=n,h.y=(r-n)/2}}return new wl(e,r)},e.prototype._doPrepareContent=function(t){},e.prototype._doLayoutContent=function(t){if(this._count>0){var e=this._padHorz;this._padVert;for(var i=0;i<this._count;i++){var o;(o=this._itemViews[i]).x=e,e+=this._itemGap+o.width}if(this.showResetButton)(o=this._resetView).x=e}},e.prototype._doDraw=function(t){},e.prototype._visibleChanged=function(){var t=this.grid;t&&(t.invalidateLayout(),t.invalidatePosition())},e.prototype._doSizeChanged=function(){var t=this.grid;this.invalidate(!0),t&&(t.invalidateLayout(),t.invalidatePosition())},e.prototype.$_prepareItemViews=function(t,e){for(var i=this._itemViews,o=this._resetView,r=t.rowGroupFields,n=i.length;n<e;n++)i.push(new up(t.doc));for(n=0;n<e;n++){var s=i[n];s.setColumn(t.$_getVisibleRootByField(r[n],!0)),s.visible=!0,this.addChild(s)}for(n=e;n<i.length;n++)this.removeChild(i[n]);this.showResetButton&&this._count>0?(o.setText(this.resetText),this.addChild(o)):this.removeChild(o)},e}(Sl),pp=function(e){function i(t,i,o){var r=e.call(this,t,i,o)||this;r._rowGroupSummaryRuntime=new Vs,r._rs=r._createItemSource(),r.itemSource=r._rs,r._groupingOptions=new hp(r),r._groupingOptionsChanged(r._groupingOptions),r._groupPanelView=new dp(r.doc,r.rowGroup),r.topContentPane.addChild(r._groupPanelView);for(var n=[r._groupBarPane._headView,r._groupBarPane._footView,r._groupBarPane._barContainer],s=n.length-1;s>=0;s--){var a=n[s];r._tableViews[a.$_hash]=a}return r.editOptions.displayEmptyEditRow&&r.editOptions.appendable&&r._rs.appendDummy(),r}return o(i,e),i.prototype._doDispose=function(){this._rs.dispose(),this._rs=null,this._groupPanelView=this.groupPanelView.dispose(),this._rowGroup=this._rowGroup&&this._rowGroup.dispose(),this._groupingOptions=this._groupingOptions.dispose(),e.prototype._doDispose.call(this)},i.prototype._doCreateOtherElements=function(){this._groupView=new lp(this.doc),this.addElement(this._groupView)},Object.defineProperty(i.prototype,"maxRowCount",{get:function(){return this._rs.maxRowCount},set:function(t){this._rs.maxRowCount=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGroup",{get:function(){return this._rowGroup},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupPanelView",{get:function(){return this._groupPanelView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupBarPane",{get:function(){return this._groupBarPane},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupView",{get:function(){return this._groupView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groupingOptions",{get:function(){return this._groupingOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"paged",{get:function(){return this._rs.page>=0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"page",{get:function(){return this._rs.page},set:function(t){this.setPage(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pageCount",{get:function(){return this._rs.pageCount},set:function(t){var e=this._rs.pageCount;this._rs.pageCount=t,this._rs.pageCount!=e&&this.$_firePageCountChanged(this._rs.pageCount)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupLevels",{get:function(){return this._rs.groupLevels},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupFields",{get:function(){return this._rs.groupByFields},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGrouped",{get:function(){return this._rs.grouped},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mergedRowGrouped",{get:function(){return this._rs.mergedGrouped},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupSummaryRuntime",{get:function(){return this._rowGroupSummaryRuntime},enumerable:!1,configurable:!0}),i.prototype.isTree=function(){return!1},i.prototype.recursiveDeleting=function(){return!1},i.prototype._beforeChangeLayout=function(){this.ungroupBy()},i.prototype.isGrouped=function(t){return t&&t.groupLevel>0},i.prototype.isGroupedField=function(t){return this._rs.isGroupedField(t)},i.prototype.isSortByLabelColumn=function(t){return this.columnByField(t).sortByLabel},i.prototype.getGroupLevel=function(t){return this._rs.getGroupLevel(t)},i.prototype.groupByFieldNames=function(e,i,o){void 0===o&&(o=t.SortDirection.ASCENDING);var r=this.dataSource;if(r&&e&&e.length>0){for(var n=[],s=0;s<e.length;s++){var a=e[s],l=r.getFieldIndex(a),h=this.columnByField(a),u=h&&this.layoutByColumn(h);!u||this.rowGroup.mergeMode&&u.parent!=this.activeCellLayout._root||l>=0&&n.push(l)}n.length>0&&(i=void 0===i?this.rowGroup.sorting:i,this.groupBy(n,i,o))}else this.ungroupBy()},i.prototype.groupBy=function(t,e,i){this._beforevIndex=null,this.isItemEditing(null)||this.toastManager.show(this.groupingOptions.toast,!0,function(){this.$_doGroupBy(t,e,i)}.bind(this))},i.prototype.clearGroupBy=function(){this.isItemEditing(null)||(this._rs.setLabelComparer(null),this._rs.groupBy(null,!0,t.SortDirection.ASCENDING),this.$_clearColumnMergeGrouped())},i.prototype.ungroupBy=function(){this.clearGroupBy()},i.prototype.addGroupBy=function(t,e){var i=this;e&&(this.isItemEditing(null)||this.isGrouped(e)||e.layout&&e.layout.visible&&(!e.layout.isRoot&&this.rowGroup.mergeMode||e.dataIndex>=0&&this.toastManager.show(this.groupingOptions.toast,!0,(function(){i.$_doAddGroupBy(t,e)}))))},i.prototype.removeGroupByField=function(t){if(!(t<0)&&!this.isItemEditing(null)&&this.isGroupedField(t)){this._rs.removeGroupBy(t,!1)}},i.prototype.expand=function(t,e,i,o){this.isItemEditing(null)||this._rs.expand(t,e,i,o)},i.prototype.expandAll=function(t,e){this.isItemEditing(null)||this._rs.expandAll(t,e)},i.prototype.collapse=function(t,e,i,o){this.isItemEditing(null)||this._rs.collapse(t,e,i,o)},i.prototype.collapseAll=function(t){this.isItemEditing(null)||this._rs.collapseAll(t)},i.prototype.isGroupedColumn=function(t){return t&&t.dataIndex>=0&&this._rs.isGroupedField(t.dataIndex)},i.prototype.blankGroupData=function(){return!this.rowGroup.mergeMode&&this.rowGroup.blankGroupData},i.prototype.getSortFields=function(){return this.itemSource.getSortFields()},i.prototype.getSortDirections=function(){return this.itemSource.getSortDirections()},i.prototype.getSortCases=function(){return this.itemSource.getSortCases()},i.prototype.setPaging=function(t,e,i){void 0===e&&(e=10),void 0===i&&(i=-1),this._rs.setPaging(t,e,i,null)},i.prototype.setPage=function(t,e){if(void 0===e&&(e=-1),(t=Math.max(0,Math.min(t,this._rs.pageCount-1)))!=this._rs.page){var i=!1;this.$_firePageChanging(t)&&(this._rs.setPage(t,e),i=!0),i&&this.$_firePageChanged(this._rs.page)}},i.prototype.getPageOfDataRow=function(t){return this._rs.getPageOfDataRow(t)},Object.defineProperty(i.prototype,"isLayer",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summarizer",{get:function(){return this._rs.summarizer},enumerable:!1,configurable:!0}),i.prototype._createSidePane=function(){return this._addGridObject(this._rowGroup=new Rc(this)),this._groupBarPane=new ep(this.doc,this.rowGroup)},i.prototype.isSidePaneVisible=function(){return this.rowGrouped&&!this.mergedRowGrouped&&this._rowGroup.indentVisible},i.prototype._createLayoutManager=function(){return new fp(this)},i.prototype.canGrouping=function(){return this._groupPanelView.visible},i.prototype._canMerge=function(){return this.dataCount>0},Object.defineProperty(i.prototype,"undoable",{get:function(){return this._rs.undoable},set:function(t){this._rs.undoable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return this._rs.canUndo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return this._rs.canRedo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return this._rs.undoing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return this._rs.redoing},enumerable:!1,configurable:!0}),i.prototype.undo=function(){return!!this._rs.canUndo&&(this._rs.cancelWhenLastUndo=this.editOptions.cancelWhenLastUndo,this.editController.cancelEditor(!0),this._rs.undo(),!0)},i.prototype.redo=function(){return!!this._rs.canRedo&&(this._rs.redo(),!0)},i.prototype.execute=function(t){this._rs.execute(t)},i.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._rs.clearCommandStack(t)},i.prototype.getRowView=function(t,i){return i instanceof Uo?this._groupView.getHeaderView(i):e.prototype.getRowView.call(this,t,i)},i.prototype._doSortItems=function(t,e,i){var o=this.itemSource;o.setLabelComparer(this._doPrepareComparer(t)),o.orderBy(t,e,i)},i.prototype._doColumnFiltersChanged=function(t,e,i){this.applyFilters(t,e,i),this.invalidateLayout()},i.prototype.setOptions=function(t){if(t){var i=this._rs;void 0!==t.hideDeleted&&(i.hideDeleted=t.hideDeleted),void 0!==t.hideDeletedRows&&(i.hideDeleted=t.hideDeletedRows),void 0!==t.inclusiveFiltering&&(i.inclusiveFiltering=t.inclusiveFiltering),void 0!==t.filterOr&&(i.inclusiveFiltering=t.filterOr),void 0!==t.summaryMode&&(i.summaryMode=t.summaryMode),void 0!==t.groupSummaryMode&&(i.groupSummaryMode=t.groupSummaryMode),void 0!==t.sortMode&&(i.sortMode=t.sortMode),void 0!==t.filterMode&&(i.filterMode=t.filterMode),t.rowGroup&&this.rowGroup.assignFrom(t.rowGroup),e.prototype.setOptions.call(this,t)}},i.prototype.$_beforeRender=function(){this._groupBarPane.levelCount!==this._groupBarPane.currentLevel&&(this._needPosition=!0),e.prototype.$_beforeRender.call(this)},i.prototype._visualObjectChanged=function(t){e.prototype._visualObjectChanged.call(this,t),t instanceof na&&(this._rs.checkableExpression=t.checkableExpression)},i.prototype.resetCheckables=function(){this._rs.resetCheckables()},i.prototype.applyCheckables=function(){this._rs.applyCheckables()},i.prototype.getCheckedRows=function(t,e,i){var o,r;if(e){o=[];for(var n=0,s=this.itemCount;n<s;n++)(r=this.getItem(n)).checked&&r.dataRow>=0&&o.push(r.dataRow)}else o=this._rs.getCheckedRows(i);return t&&o.sort((function(t,e){return t-e})),o},i.prototype.getCheckedItemIndices=function(t){for(var e=[],i=0,o=this.itemCount;i<o;i++){var r=this.getItem(i);r.checked&&(t||r.dataRow>=0)&&e.push(r.index)}return e},i.prototype.getCheckedItems=function(t){for(var e=[],i=0,o=this.itemCount;i<o;i++){var r=this.getItem(i);r.checked&&(t||r.dataRow>=0)&&e.push(r)}return e},i.prototype.getMergedItems=function(t,e,i,o){var r=function(){return l.index<u?h.mergeRows?a.$_checkFixedMerge(this.itemSource,n,t,u):null:a.$_checkMerge(this.itemSource,n,t,!0,u)}.bind(this),n=e instanceof ls?e:this.columnByName(e),s=n.layout,a=s.merges,l=this.getItem(t);if(!l)return null;if(!a)return o?i&&!l.isDataRow?null:[l.index]:null;var h=this.fixedOptions,u=h.rowCount,c=r();if(!c){var d=this.getGroupLevel(n.dataIndex);(d>0&&n.mergeGrouped&&!this.isTree()?jn.getDefault(d,this.rowGroup.mergeMode):s.$_mergeRuleObj()).parseBounds(this.itemSource,n.dataIndex,0,this.itemCount-1,a._flags),c=r()}if(!c&&o)return[t];if(c){for(var p=[],f=c.top;f<=c.bottom;f++)(this.getItem(f).isDataRow||!i)&&p.push(f);return p.length>0?p:null}return null},i.prototype.findGroupItem=function(t,e){var i=this.getGroupLevel(e);if(i>0)for(var o=t instanceof Wo?t:t.parent;o;){if(o.level==i)return o;o=o.parent}return null},i.prototype.getItemOfModel=function(t){return t instanceof Ho?t:t.itemIndex>=0?this.getItem(t.itemIndex):t.id>=0?this._rs.getGroupItem(t.id):null},i.prototype.getJsonRows=function(){return this._rs.getJsonRows()},i.prototype.getIndicatorIndex=function(t,e){var i=this._rs.getDisplayItemIndex(t),o=this.paged?this._rs.itemLength:this.itemCount;return e?o-i-1:i},i.prototype.indicatorReverse=function(e){return!(this.rowGrouped&&this.paged)&&e===t.IndicatorValue.REVERSE},i.prototype.getFirstRow=function(){return this._rs.getFirstRow()},i.prototype.getLastRow=function(){return this._rs.getLastRow()},i.prototype.getPrevRow=function(t){return this._rs.getPrevRow(t)},i.prototype.getNextRow=function(t){return this._rs.getNextRow(t)},i.prototype.canMoveRows=function(t,e,i){if(i&&this.canMoveRow(e,!1)&&t){for(var o=!1,r=0;r<t.length;r++){var n=t[r];n&&n.isDataRow&&(o=!0)}return o}},i.prototype._getMoveTarget=function(t,e,i,o){return this.getItem(i+o)},i.prototype._doMoveRows=function(t,e){var i=e&&e.dataRow;if(i>=0){for(var o=[],r=0,n=t;r<n.length;r++){var s=n[r],a=s&&s.dataRow;a>=0&&o.push(a)}if(o.length>0)return this.dataSource.moveRowList(o,i)}},i.prototype._getCellTypeOf=function(e){return e instanceof zd?t.GridCellType.GROUP_HEAD:e instanceof qd?t.GridCellType.GROUP_FOOT:e instanceof tp?t.GridCellType.GROUP_BAR:void 0},i.prototype.updatePastedRow=function(t,e,i){var o=t.dataRow;if(o>=0){var r=this.dataSource;r&&r.updateRow(o,e,i)}},i.prototype.appendPastedRow=function(t){var e=this.dataSource;if(e)return e.appendRow(t)},i.prototype.getSummaryCount=function(t){return"groupFooter"===t?this.rowGroup.footers.count:e.prototype.getSummaryCount.call(this,t)},i.prototype.isRecycleMode=function(){return e.prototype.isRecycleMode.call(this)&&(!this.rowGrouped||1===this.activeCellLayout.dataRows)},i.prototype.resetGrid=function(t){var i=this.itemSource;i&&(i.grouped||i.source===i._rs||(i.source=i._rs,this.setNeedRefresh(!0))),e.prototype.resetGrid.call(this,t)},i.prototype.setColumns=function(t){e.prototype.setColumns.call(this,t),this.mergedRowGrouped&&this._doRowGroupMergeModeChanged()},i.prototype._createItemSource=function(){var t=new Gd(!0,this._rowGroup);return t.setSortingOptions(this.sortingOptions),t},i.prototype.$_rowGroupChanged=function(t){this._doRowGroupMergeModeChanged()},i.prototype._groupingOptionsChanged=function(t){this._rs.expandWhenGrouping=t.expandWhenGrouping,this.groupPanelView&&this.groupPanelView.invalidate()},i.prototype.$_rowGroupAdornmentsChanged=function(t,e){this._rs._groupedProvider.resetAdornments(this.handler,t,e)},i.prototype.$_getVisibleRootByField=function(t,e){for(var i=this.visibleLayoutCount,o=0;o<i;o++){var r=this.getVisibleLayout(o),n=r instanceof _s&&Rt.cast(r.firstColumn,ls);if(n&&n.dataIndex==t)return n}return e?this.columnByField(t):null},i.prototype.$_clearColumnMergeGrouped=function(){this._activeCellLayout._clearMergeGrouped()},i.prototype._doRowGroupMergeModeChanged=function(){this.$_clearColumnMergeGrouped();var t=this._rs.groupByFields;if(this.rowGroup.mergeMode){if(t&&t.length>0)for(var e=t.length-1;e>=0;e--){var i=this.$_getVisibleRootByField(t[e],!1);i?i.$_setMergeGrouped(!0):t.splice(e,1)}this._rs.groupByMode(t,!0)}else this._rs.groupByMode(t,!1)},i.prototype.$_doGroupBy=function(e,i,o){var r,n=this.dataSource;if(this.$_clearColumnMergeGrouped(),n&&e&&(r=e.length)>0){for(var s=n.fieldCount,a=[],l=0;l<r;l++)e[l]>=0&&e[l]<s&&a.push(e[l]);if(a.length>0){if(this.rowGroup.mergeMode)for(l=a.length-1;l>=0;l--){var h=this.$_getVisibleRootByField(a[l],!1);h?h.$_setMergeGrouped(!0):a.splice(l,1)}a.length>0&&(this._rs.setLabelComparer(this._doPrepareComparer(a)),this._rs.groupBy(a,i,o))}}else this._rs.setLabelComparer(null),this._rs.groupBy(null,!0,t.SortDirection.ASCENDING)},i.prototype.$_doAddGroupBy=function(t,e){var i=e.dataIndex;e.$_setMergeGrouped(this.rowGroup.mergeMode);try{var o=this.rowGroupFields?this.rowGroupFields.slice():[];o.push(i),this._rs.setLabelComparer(this._doPrepareComparer(o)),this._rs.addGroupBy(t,i,this.rowGroup.sorting)}catch(t){throw e.$_setMergeGrouped(!1),t}},i.prototype.$_clearGroupedIndices=function(){for(var t=this.columnCount-1;t>=0;t--){var e=Rt.cast(this.getColumn(t),ls);e&&e.$_setGroupLevel(this._rs.getGroupLevel(-1))}},i.prototype.$_setGroupedIndices=function(){for(var t=this.columnCount-1;t>=0;t--){var e=Rt.cast(this.getColumn(t),ls);e&&e.$_setGroupLevel(this._rs.getGroupLevel(e.dataIndex))}},i.prototype.$_firePageChanging=function(t){return this.fireConfirmEvent(i.PAGE_CHANGING,t)},i.prototype.$_firePageChanged=function(t){this.fireEvent(i.PAGE_CHANGED,t)},i.prototype.$_firePageCountChanged=function(t){this.fireEvent(i.PAGE_COUNT_CHANGED,t)},i.prototype.$_fireGrouping=function(t){return this.fireConfirmEvent(i.GROUPING,t)},i.prototype.$_fireGrouped=function(){this.fireEvent(i.GROUPED)},i.prototype.$_fireExpanding=function(t){return this.fireConfirmEvent(i.EXPANDING,t)},i.prototype.$_fireExpanded=function(t){this.fireEvent(i.EXPANDED,t)},i.prototype.$_fireCollapsing=function(t){return this.fireConfirmEvent(i.COLLAPSING,t)},i.prototype.$_fireCollapsed=function(t){this.fireEvent(i.COLLAPSED,t)},i.prototype.onGroupedItemProviderGrouping=function(t,e){return this.$_fireGrouping(e)},i.prototype.onGroupedItemProviderGrouped=function(t){this.selections.clear(!0),this.$_clearGroupedIndices(),this.groupPanelView.invalidate(),this.setNeedRefresh(!0);var e,i,o=this._rs.groupByFields;if(o&&o.length>0&&this.$_setGroupedIndices(),this.rowGroup.mergeMode){var r=[],n=this.visibleLayoutCount,s=this._beforevIndex;(e=!this._beforevIndex)&&(s=this._beforevIndex={});for(var a=[],l=0;l<n;l++){var h=this.getVisibleLayout(l),u=Rt.cast(h.firstColumn,ls);if(i=h.merges,u){e&&(s[u.$_hash]={vIndex:h.vindex});var c=s[u.$_hash];u.mergeGrouped&&u.groupLevel<=0?(i&&i.clear(),u.$_setMergeGrouped(!1)):u.mergeGrouped&&(i||(i=new Kn(h)),r.push(u),c&&(c.hasGrouped=!0)),a.push(u)}}if(this.rowGroup.resetOriginVindex)for(l=a.length;--l>=0;){(c=s[a[l].$_hash]).hasGrouped&&(a[l].layout.vindex=c.vIndex)}if((n=r.length)>0){r=r.sort((function(t,e){return t.groupLevel-e.groupLevel}));for(l=0;l<n;l++)(i=r[l].layout.merges).clear(),i.initialize(Bn.INIT_COUNT),r[l].layout.vindex=l}else this._beforevIndex=null;n=this.visibleLayoutCount;for(l=0;l<n;l++){(u=Rt.cast(this.getVisibleLayout(l).firstColumn,ls))&&!u.mergeGrouped&&(i=u.layout.merges)&&(i.clear(),i.initialize(Bn.INIT_COUNT))}}this.requestPrepareEditor(),this._itemCheckChanged=!0,this.$_fireGrouped(),this._cellLayoutChanged(),this.container.defaultTool.layoutChanged()},i.prototype.onGroupedItemProviderExpand=function(t,e){return this.$_fireExpanding(e)},i.prototype.onGroupedItemProviderExpanded=function(t,e){this.$_fireExpanded(e)},i.prototype.onGroupedItemProviderCollapse=function(t,e){return this.$_fireCollapsing(e)},i.prototype.onGroupedItemProviderCollapsed=function(e,i,o){if(o&&i instanceof Hr){var r=i.getFirstVisibleItem(this.rowGroup.collapsedAdornments===t.RowGroupAdornments.SUMMARY);if(this.topIndex>r.index){var n=this.layoutByColumn(this.columnByField(i.groupField)),s=Ms.tempItem(this,r,n);Ds.areEquals(this.focusedIndex,s)?this.topIndex=s.itemIndex:this.setFocusedIndex(s)}}this.$_fireCollapsed(i)},i.PAGE_CHANGING="onGridViewPageChanging",i.PAGE_CHANGED="onGridViewPageChanged",i.PAGE_COUNT_CHANGED="onGridViewPageCountChanged",i.GROUPING="onGridViewGrouping",i.GROUPED="onGridViewGrouped",i.EXPANDING="onGridViewExpanding",i.EXPANDED="onGridViewExpanded",i.COLLAPSING="onGridViewCollapsing",i.COLLAPSED="onGridViewCollapsed",i}(zc),fp=function(t){function e(e){return t.call(this,e)||this}return o(e,t),Object.defineProperty(e.prototype,"panelVisible",{get:function(){return this.grid.groupPanelView.visible},enumerable:!1,configurable:!0}),e.prototype.getLevelIndent=function(t){var e=this.grid;if(this.mergedRowGrouped){for(var i=this.fixedLayoutCount,o=0,r=0;r<t;r++)o+=r<i?this.getFixedLayoutWidth(r):this.getLayoutWidth(r-i);return i?t>i?o=Math.max(this.fixedWidth,o+this.fixedBarWidth-this.leftPos):t===i&&(o+=this.fixedBarWidth):o-=this.leftPos,o}return e.rowGroup.indentVisible?e.groupBarPane.getLevelIndent(t):0},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topPanelVisible",{get:function(){return this.panelVisible},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowGrouped",{get:function(){return!this.grid.rowGroup.mergeMode&&this.grid.rowGrouped},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mergedRowGrouped",{get:function(){return this.grid.rowGroup.mergeMode&&this.grid.rowGrouped},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowGroupLevels",{get:function(){return this.grid.rowGroupLevels},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowGroupFields",{get:function(){return this.grid.rowGroupFields},enumerable:!1,configurable:!0}),e.prototype.$_groupView=function(t){return this.grid.groupView},e.prototype.setLeftPos=function(e,i){t.prototype.setLeftPos.call(this,e,i);var o=this.grid,r=o.mergedRowGrouped,n=this.$_groupView(r);n.visible&&this.$_layoutRowGroupView(o,n)},e.prototype._prepareItems=function(e){t.prototype._prepareItems.call(this,e);var i=this.grid;if(i.rowGrouped){var o=i.mergedRowGrouped,r=this.$_groupView(o),n=this.contentBounds.isEmpty?null:i.bodyView,s=this.fixedContentBounds.isEmpty?null:i.fixedBodyView,a=this.rightContentBounds.isEmpty?null:i.rightBodyView;r.$_prepareGroupItems(this,n,s,a),r.$_prepareGroupFooters(this._items,this)}},e.prototype._doMeasureTopPane=function(t,e){var i=t.groupPanelView;if(this.panelVisible)if(i._dirty){var o=i.measure(t,e.width,e.height);e.height=o.height}else e.height=i.bounds.height;else e.height=1,e.width=1},e.prototype._doLayoutTopPane=function(t,e){var i=t.groupPanelView;i.setBounds(0,0,e.width,e.height),this.panelVisible&&i.layoutContent(this)},e.prototype._doLayout=function(e,i){t.prototype._doLayout.call(this,e,i)},e.prototype._adjustLayout=function(e,i,o){void 0===o&&(o=!1),t.prototype._adjustLayout.call(this,e,i,o);var r=e.rowGrouped,n=e.mergedRowGrouped,s=e._sideContentPane;s&&this._layoutSidePane(e,s);var a=this.$_groupView(n);this.$_groupView(!n).visible=!1,(a.visible=r)&&this.$_layoutRowGroupView(e,a)},e.prototype.isMergedCell=function(t){var e=this.grid;if(e.rowGroup.mergeMode&&e.isGroupedColumn(t.dataColumn))return!0;var i=t.layout;if(i&&i.isColumn&&t.layout.merged){var o=i.merges;if(o)return null!=o.getRoom(t)}return!1},e.prototype.$_layoutRowGroupView=function(t,e){var i=this.contentBounds,o=this.sideContentBounds.clone();o.top=i.y+this.bodyBounds.y,o.right=this.rightContentBounds.right,o.bottom=Math.min(this.footBounds.y+i.y,i.bottom),e.setRect(o),e.layout(this)},e}(Jl),_p=function(e){function i(t){var i=e.call(this,t,"gridSelectionTool")||this;return i._panelCellReq=new gp,i._panelCellFeedback=new yp(t.doc),i._groupingReq=new bp,i}return o(i,e),i.prototype._doDispose=function(){this._panelCellReq=null,e.prototype._doDispose.call(this)},i.prototype._doPointerDown=function(t){var i=this.grid,o=this.mouseEventTarget;if(0===t.button&&(Al.isExpander(o)||Jd.isExpander(o))){var r=this._findTableCell(o),n=i.getTableView(r);if(Al.isExpander(o)&&n instanceof Ul){var s=i.getDataCellIndex(r,this._tempIndex),a=n.getCellAt(i.layoutManager,s),l=i.findGroupItem(a.item,a.layout.firstColumn.dataIndex);this.$_toggleExpanded(i,l,t)}else if(Jd.isExpander(o)&&n instanceof tp){var h=n.getViewOf(o);return void((l=(l=i.getItem(o[y])).getAncestor(h.level))instanceof Uo&&this.$_toggleExpanded(i,l,t))}}e.prototype._doPointerDown.call(this,t)},i.prototype._doClick=function(t){var i=t.mouseX,o=t.mouseY,r=this.grid,n=this.findElementAt(i,o,!1);n instanceof cp&&n._dom.contains(t.target)?r.ungroupBy():(n instanceof up&&n.isCloseButton(t.target)&&r.removeGroupByField(n.field),e.prototype._doClick.call(this,t))},i.prototype._doDblClick=function(t){var i=t.mouseX,o=t.mouseY,r=this.grid,n=this.findElementAt(i,o,!1);n instanceof op&&r.groupingOptions.headerClickable?this.$_toggleExpanded(r,n.item,t):e.prototype._doDblClick.call(this,t)},i.prototype._getEditRequest=function(t,i,o,r,n,s,a){var l=e.prototype._getEditRequest.call(this,t,i,o,r,n,s,a);if(l)return l;if(this.grid.container.contains(t)){var h=this.grid,u=this.findElementAt(o,r,!1),c=this._findTableCell(t),d=c&&h.getTableView(c);if(d instanceof Kl&&!n){var p=d.layoutByCell(c),f=p.firstColumn;if(h.groupPanelView.visible&&f&&f.groupable&&h.groupingOptions.enabled){var _=h.layoutManager.getHeaderCellRect(p);return this._groupingReq.init(p,_,o,r)}}return u instanceof up?this._panelCellReq.init(u,o,r):void 0}},i.prototype._getDragTracker=function(t,i,o){var r=this.grid;return t instanceof gp?new mp(r,t,this._panelCellFeedback):t instanceof bp?new vp(r,t,this._panelCellFeedback):e.prototype._getDragTracker.call(this,t,i,o)},i.prototype.getNextRequest=function(t,i,o,r){if(!(t instanceof uu&&t.layout instanceof _s))return t instanceof bp&&t.layout instanceof _s&&i instanceof Vu?this._colMoveReq.init(t.layout,o,r,null):e.prototype.getNextRequest.call(this,t,i,o,r);var n=this.grid,s=t.layout.firstColumn;return n.groupingOptions.enabled&&n.layoutManager.topPanelVisible&&s instanceof ls&&s.groupable&&r+3<n.groupPanelView.bottom?this._groupingReq.init(t.layout,i,o,r):void 0},i.prototype._getClickData=function(i,o){if(i instanceof op)return Du.getItem(t.GridCellType.GROUP_HEADER,i.itemIndex,null);if(i instanceof dp)return Du.getData(t.GridCellType.GROUP_PANEL);if(i instanceof up){if(i.isCloseButton(o.target)||i.field<0)return;var r=this.grid.dataSource.getOrgFieldName(i.field);return Du.getField(t.GridCellType.GROUP_COLUMN,i.field,r)}return e.prototype._getClickData.call(this,i,o)},i.prototype.$_toggleExpanded=function(t,e,i){e.expanded?t.collapse(e,!1,!1,i):t.expand(e,!1,!1,0)},i}(Yu),gp=function(t){function e(){var e=t.call(this)||this;return e._field=-1,e}return o(e,t),Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"field",{get:function(){return this._field},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,i){return this._source=t,this._x=e,this._y=i,this._field=t.field,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"pointer"},enumerable:!1,configurable:!0}),e}(bh),yp=function(t){function e(e){var i=t.call(this,e)||this;return i._no=!1,i}return o(e,t),e.prototype.setField=function(t,e){void 0===e&&(e=!1),this._textView[Rt.TextProp]=t,this._noMark.style.display=(this._no=e)?"inline-block":"none"},e.prototype._getCssSelector=function(){return"rg-header rg-header-cell rg-group-panel-item rg-group-panel-cell-feedback"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=this.doc;this._textView=i.createElement("span"),this._textView.className="rg-group-panel-item-text",this._textView.style.display="inline-block",e.appendChild(this._textView),this._noMark=i.createElement("span"),this._noMark.className="rg-group-panel-no-mark",this._noMark.style.display="none",e.appendChild(this._noMark)},e.prototype._doDraw=function(t){var e=this._textView.offsetWidth,i=this._textView.offsetHeight,o=this._textView.style;o.left=Math.max(0,(this.width-e)/2)+"px",o.top=Math.max(0,(this.height-i)/2)+"px",this._no&&(e=this._noMark.offsetWidth,i=this._noMark.offsetHeight,(o=this._noMark.style).left=Math.max(0,(this.width-e)/2)+"px",o.top=Math.max(0,(this.height-i)/2)+"px")},e}(_a),mp=function(t){function e(e,i,o){var r=t.call(this,e,"groupPanelCellTracker")||this;return r._request=i,r._feedback=o,r}return o(e,t),e.prototype._doDispose=function(){this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,e,i,o){var r=this.grid,n=this._request.source.boundsByContainer();return this._feedback.setRect(n),this._feedback.setField(this._request.source.text),this._feedback.visible=!0,r.addFeedbackElement(this._feedback),this._offsetX=e-n.x,this._offsetY=i-n.y,!0},e.prototype._doDrag=function(t,e,i,o){return e-=this._offsetX,i-=this._offsetY,this._feedback.move(e,i),!0},e.prototype._doCompleted=function(){var t=this.grid,e=t.layoutManager;this.currentY>e.contentBounds.y&&t.removeGroupByField(this._request.field)},e.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},e}(lh),bp=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){this._layout=null,this._source=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,i,o){return this._layout=t,this._source=e,this._x=i,this._y=o,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"pointer"},enumerable:!1,configurable:!0}),e}(bh),vp=function(t){function e(e,i,o){var r=t.call(this,e,"groupingCellTracker")||this;return r._request=i,r._feedback=o,r}return o(e,t),e.prototype._doDispose=function(){this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,e,i,o){var r=this.grid,n=this._request.source,s=n instanceof _a?n.boundsByContainer():n,a=r.isGroupedField(this._request.layout.firstColumn.dataIndex);return this._feedback.setRect(s),this._feedback.setField(this._request.layout.firstColumn.displayText,a),this._feedback.visible=!0,r.addFeedbackElement(this._feedback),this._offsetX=e-s.x,this._offsetY=s.height/3,!0},e.prototype._doDrag=function(t,e,i,o){return!(i>this.grid.layoutManager.topContentBounds.bottom)&&(e-=this._offsetX,i-=this._offsetY,this._feedback.move(e,i),!0)},e.prototype._doCompleted=function(){var t=this.grid,e=t.layoutManager;if(this.currentY<e.contentBounds.y){var i=t.$_getVisibleRootByField(this._request.layout.firstColumn.dataIndex,!0);t.rowGroup.mergeMode&&t.activeCellLayout.setMoveColumn(this._request.layout),t.addGroupBy(e.rowGroupLevels,i)}},e.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},e.prototype.getNextRequest=function(t,e){return this.grid.activeTool.getNextRequest(this._request,this._request.source,t,e)},e}(lh),wp=function(t){function e(e,i,o,r){void 0===o&&(o=!1),void 0===r&&(r=null);var n=t.call(this,e,o,r)||this,s=n._containerDom.parentElement;return s.style.height&&(n._orgCssHeight=s.style.height),n._gridView&&(n._gridView.$_handler=i),n}return o(e,t),e.prototype._doDispose=function(){this._gridView=null,this._watchTimer&&clearInterval(this._watchTimer),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"gridView",{get:function(){return this._gridView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"heightMeasurer",{get:function(){return this._heightMeasurer},enumerable:!1,configurable:!0}),e.prototype.setWatchTimer=function(t){this._watchTimer&&clearInterval(this._watchTimer),this._watchTimer=null,this._displayObserver=this._displayObserver||this.$_displayObserver.bind(this),t&&(this._watchTimer=setInterval(this._displayObserver,100))},e.prototype.recallHeight=function(){var t=this._containerDom.parentElement.style;this.gridView._loading||(this._orgCssHeight?t.height=this._orgCssHeight:t.removeProperty("height"))},e.prototype.getTableCell=function(t){return this._gridView.getTableCell(t)},e.prototype.getThreshold=function(){return Rt.isMobile()?this._gridView.mobileOptions.tapThreshold:3},e.prototype._doResized=function(e){t.prototype._doResized.call(this,e),this._gridView.$_containerResized()},e.prototype._isOutChildElement=function(t){var e=this.gridView,i="focusout"===t.type?t.relatedTarget:t.target;if(e.filterSelector.opened&&(i===e.filterSelector._element||Rt.isAncestorOf(e.filterSelector._element,i,t)))return!0;if(i instanceof SVGElement)for(var o=Rt.getComposedPath(t);o&&o.length&&!((i=o.shift())instanceof HTMLElement););var r=i&&i.className||"";if("string"==typeof r){if(e.popupMenuManager.isShow()&&r.indexOf("rg-popup")>=0)return!0;try{if(r.indexOf("rg-editor")>=0&&i.$_owner._grid.container!==this)return!1;if(r.indexOf("rg-root")>=0&&i!==this._containerDom)return!1;if(e.isEditing())for(var n=i;n;){if((n.className||"").indexOf("rg-")>=0)return!0;n=n.parentElement}}catch(t){Rt.log("check outer elements fail => ".concat(i))}return!1}},e.prototype._doPrepareContainer=function(t,e,i){t.className="rg-root rg-grid",Rt.isMobile()&&(t.style.touchAction="unset"),this._gridView=this._createGridView(e,i),this.addElement(this._gridView),this._heightMeasurer=new Cp(this.measurer),this._sizeInfo=new ot(0,0,t.clientWidth,t.clientHeight)},e.prototype._createDefaultTool=function(){return new _p(this)},e.prototype._doLayout=function(t){var e=this._gridView,i=t.clone();e.setRect(i),i.x=i.y=0,e.$_layout(i)},e.prototype._layoutChildren=function(t){var e=this;this._sizeInfo.width=t.width,this._sizeInfo.height=t.height,(isNaN(this._zoomRatio)||this._gridView&&this._gridView._loading)&&(this._zoomRatio=Rt.getZoom(this._containerDom),setTimeout((function(){!e.disposing&&(e._zoomRatio=Rt.getZoom(e._containerDom,!0))}),500))},e.prototype._doBeforeRender=function(){var t=this.gridView,e=t._dom;if(e&&e.scrollLeft>0){var i=e.scrollLeft;t.leftPos=i,e.scrollLeft=0}t.visible&&t.$_beforeRender()},e.prototype._doAfterRender=function(){if(!this.gridView.fitSyncHeight()){var t=this._containerDom.parentElement;this._orgCssHeight=t.style.height}this._gridView.visible&&this._gridView.$_afterRender()},e.prototype._doPrepareRender=function(t){var e=t.clone();this._gridView.visible&&(this._gridView.setRect(e),e.x=e.y=0,this._gridView.$_prepareRender(e))},e.prototype._focusChanged=function(t,e,i){this._gridView&&this._gridView._fireGridFocusChanged(t,e,i)},e.prototype._createGridView=function(t,e){return new pp(this,t,e)},e.prototype._resizeHandler=function(t){if(null==this._watchTimer){var e=this;this._resizeTimer=setTimeout((function(){e._displayObserver()}),100)}},e.prototype.$_displayObserver=function(){var t=this._containerDom,e=t.clientWidth,i=t.clientHeight,o=this._sizeInfo;e>0&&i>0&&(Math.abs(this._sizeInfo.width-e)>=1||Math.abs(this._sizeInfo.height-i)>=1)&&(this._gridView.fitSyncHeight()||(this._orgCssHeight=t.parentElement.style.height),o.width=e,o.height=i,this.invalidateLayout(),this._doResized(null))},e}(Fh),Cp=function(t){function e(e){var i=t.call(this)||this;return i._bodyStyle="rg-body",i._summaryStyle="rg-header-summary",i._footerStyle="rg-footer",i._dataRowStyle="rg-data-row",i._summaryRowStyle="",i._footerRowStyle="",i._groupFooterStyle="rg-rowgroup-footer",i._dataCellStyle="rg-data-cell",i._summaryCellStyle="rg-header-summary-cell",i._footerCellStyle="rg-footer-cell",i._groupFooterCellStyle="rg-rowgroup-footer-cell",i._rowHeight=0,i._headerHeight=0,i._summaryHeight=0,i._footerHeight=0,i._gfooterHeight=0,i._dirty=!0,i._container=e,i.$_prepareElements(e),i}return o(e,t),e.prototype._doDispose=function(){this._container=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"rowHeight",{get:function(){return this._rowHeight||(this._rowHeight=this.$_measure(this._bodyStyle,this._dataRowStyle,this._dataCellStyle))},enumerable:!1,configurable:!0}),e.prototype.headerHeight=function(t,e,i){return this._headerHeight||(this._headerHeight=this.$_measure(t,e,i)+1)},Object.defineProperty(e.prototype,"summaryHeight",{get:function(){return this._summaryHeight||(this._summaryHeight=this.$_measure(this._summaryStyle,this._summaryRowStyle,this._summaryCellStyle))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"footerHeight",{get:function(){return this._footerHeight||(this._footerHeight=this.$_measure(this._footerStyle,this._footerRowStyle,this._footerCellStyle))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupFooterHeight",{get:function(){return this._gfooterHeight||this.$_measure(this._bodyStyle,this._groupFooterStyle,this._groupFooterCellStyle)},enumerable:!1,configurable:!0}),e.prototype.measure=function(t){this._dirty&&(this._dirty=!1)},e.prototype.invalidate=function(){this._dirty=!0},e.prototype.$_prepareElements=function(t){var e=St(t),i=e.createElement("table");i.setAttribute("inert","");var o=i.createCaption();o.textContent="grid measurer table",o.style.width=o.style.height="0px",o.style.padding="none",o.style.boxSizing="border-box",o.style.overflow="hidden",i.createTHead().appendChild(document.createElement("tr")).appendChild(document.createElement("th")).scope="col",t.appendChild(i);var r=i.style;r.width="1000px",r.height="1px",r.left="-10000px",r.position="absolute",i.className="rg-table";var n=e.createElement("tbody");i.appendChild(n);var s=e.createElement("tr");n.appendChild(s);var a=e.createElement("td");a.className="rg-data-cell",s.appendChild(a);var l=e.createElement("div");a.appendChild(l),l[Rt.TextProp]="AYwyhi우리테크"},e.prototype.$_measure=function(t,e,i){var o=this._container,r=this._container.firstElementChild.tBodies[0].rows[0],n=r.cells[0];return o.className=t,r.className=e,n.className=i,r.offsetHeight},e}(Lt),xp=function(e){function i(i){var o=e.call(this,i)||this;return o._levelIndent=16,o._lineVisible=!0,o._showCheckBox=!1,o._iconImagesRoot="",o._defaultIcon=-1,o._collapseWhenLeftKey=!0,o._collapseWhenCtrlKey=!0,o._expandWhenRightKey=!0,o._expandWhenCtrlKey=!0,o._iconVisible=!0,o._expanderIconStyle=t.TreeExpanderIconStyle.TRIANGLE,o._expandedIcon=-1,o._collapsedIcon=-1,o._recursiveSoftDeleting=!1,o}return o(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"levelIndent",{get:function(){return this._levelIndent},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineVisible",{get:function(){return this._lineVisible},set:function(t){t!=this._lineVisible&&(this._lineVisible=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"showCheckBox",{get:function(){return this._showCheckBox},set:function(t){t!=this._showCheckBox&&(this._showCheckBox=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconImagesRoot",{get:function(){return this._iconImagesRoot},set:function(t){t!==this._iconImagesRoot&&(this._iconImagesRoot=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconImages",{get:function(){return this._iconImages},set:function(t){t!==this._iconImages&&(this._iconImages=t?t.slice():[],this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultIcon",{get:function(){return this._defaultIcon},set:function(t){t!=this._defaultIcon&&(this._defaultIcon=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandedIcon",{get:function(){return this._expandedIcon},set:function(t){t!=this._expandedIcon&&(this._expandedIcon=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapsedIcon",{get:function(){return this._collapsedIcon},set:function(t){t!=this._collapsedIcon&&(this._collapsedIcon=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconCallback",{get:function(){return this._iconCallback},set:function(t){t!=this._iconCallback&&(this._iconCallback=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapseWhenLeftKey",{get:function(){return this._collapseWhenLeftKey},set:function(t){this._collapseWhenLeftKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"collapseWhenCtrlKey",{get:function(){return this._collapseWhenCtrlKey},set:function(t){this._collapseWhenCtrlKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandWhenRightKey",{get:function(){return this._expandWhenRightKey},set:function(t){this._expandWhenRightKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandWhenCtrlKey",{get:function(){return this._expandWhenCtrlKey},set:function(t){this._expandWhenCtrlKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconVisible",{get:function(){return this._iconVisible},set:function(t){t!=this._iconVisible&&(this._iconVisible=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expanderIconStyle",{get:function(){return this._expanderIconStyle},set:function(t){t!=this._expanderIconStyle&&(this._expanderIconStyle=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"recursiveDeleting",{get:function(){return this._recursiveSoftDeleting},set:function(t){this._recursiveSoftDeleting=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"expandWhenSetData",{get:function(){return this._expandWhenSetData},set:function(t){t!==this._expandWhenSetData&&(this._expandWhenSetData=t,this._changed())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"templateOptions",{get:function(){return this._templateOptions},set:function(t){this._templateOptions=t,this._templateChanged=!0,this._changed()},enumerable:!1,configurable:!0}),i}(ml);!function(t){function e(e,i){var o=t.call(this,e,i,"treeExpandHandle")||this;return o._expanded=!1,o.clickable=!0,o}o(e,t),Object.defineProperty(e.prototype,"expanded",{get:function(){return this._expanded},set:function(t){t!=this._expanded&&(this._expanded=t,this._changed())},enumerable:!1,configurable:!0}),e.prototype._createDom=function(){return null}}(Wd);var Ip=function(e){function i(t){var i=e.call(this)||this;return i._exclusive=!1,i.assignFrom(t),i}return o(i,e),i.prototype._doDispose=function(){this._dom.style.removeProperty("padding-left"),this._expander=this._check=this._icon=this._span=this._label=this._checkImage=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"template",{get:function(){return this._parser&&this._parser.template},set:function(t){t!=this.template&&(this._parser||(this._parser=new fn),this._parser.template=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueCallback",{get:function(){return this._valueCallback},set:function(t){this._valueCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"callback",{get:function(){return this._callback},set:function(t){this._callback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"templateEvents",{get:function(){return this._templateEvents},set:function(t){this._templateEvents=Rt.makeArray(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"inputFocusable",{get:function(){return this._inputFocusable},set:function(t){this._inputFocusable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"renderCallback",{get:function(){return this._renderCallback},set:function(t){this._renderCallback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){var t=i.STYLE_NAME;return null==this.template&&null==this.callback||(t+=" rg-tree-template"),t},enumerable:!1,configurable:!0}),i.prototype.canClick=function(t){var e=It(this._dom),i=t.target;return!(i instanceof e.HTMLTableCellElement&&i.className.indexOf("rg-")>=0||this._div===i)},i.prototype._doClick=function(t,e,i){return{type:this.type,target:i||e.target,value:t.value}},i.prototype.$_setHtml=function(t,e){if(t!=this._html){var i=this._div;return this._html=t,i.innerHTML=t,this.renderCallback=e&&dn(i,e),!0}return!1},i.prototype._doInitContent=function(t){var e=St(t),i=this._expander=e.createElement("span");t.appendChild(i);var o=this._check=e.createElement("input");o.type="checkbox",o.className="rg-tree-checkbox",o.style.display="inline-block",(this._checkImage=e.createElement("label")).style.display="none";var r=this._icon=e.createElement("img");r.className="rg-tree-icon",r.alt="",t.appendChild(r);var n=this._span=e.createElement("span");t.appendChild(n);var s=this._div=e.createElement("div");s.style.display="none",t.appendChild(s);var a=this._label=e.createElement("label");a.style.display="none",t.appendChild(a)},i.prototype._doRenderCell=function(e,o,r,n,s){var a=e,l=a.treeOptions,h=l.showCheckBox,u=l.levelIndent,c=this._expander,d=this._dom,p=this._check,f=this._icon,_=this._span,g=this._label,y=o.item,m=r.cell,b=this._checkImage,v=e.checkBar,w=l.expanderIconStyle===t.TreeExpanderIconStyle.SQUARE?" square":"";if(c.className=y.isLeaf?"rg-tree-leaf":y.expanded?"rg-tree-expanded"+w:"rg-tree-collapsed"+w,e.accessibility&&(y.isLeaf?m.removeAttribute("aria-expanded"):m.setAttribute("aria-expanded",y.expanded?"true":"false")),this._exclusive!=v.exclusive&&(this._exclusive=v.exclusive,p.setAttribute("type",this._exclusive?"radio":"checkbox"),p.className=this._exclusive?"rg-tree-radio":"rg-tree-checkbox"),p.disabled=!(a.editOptions.checkable&&y.checkable),h){p.checked=y.checked,p.indeterminate=y.indeterminate;var C=p.id=i.FOR_ID+o.item.index+"-"+e.$_hash;if(g.setAttribute("for",C),g[Rt.TextProp]=this._makeText(e,o,r)+(p.checked?" checked":" unchecked"),v.useImages){p.style.display="none",b.style.display="inline-block",b.parentElement||(d.insertBefore(b,this._span),d.insertBefore(p,this._span)),b.setAttribute("for",C);var x="rg-tree-checkimage";x+=" ".concat(!v.exclusive&&y.indeterminate?"indeterminate":y.checked?"checked":"unchecked"),x+=" ".concat(v.exclusive?" radio":""),x+=" ".concat(p.disabled?" disabled":""),b.className=x.trim()}else p.style.display="inline-block",b.style.display="none",p.parentElement||d.insertBefore(p,this._span)}else p.parentElement&&(Rt.detach(p),Rt.detach(b));if(l.iconVisible){f.parentElement||d.insertBefore(f,this._span);var I=e.getTreeIcon(y);I?(f.src=I,f.removeAttribute("height"),f.style.removeProperty("visibility")):(f.removeAttribute("src"),f.height=1,f.style.visibility="hidden")}else f.parentElement&&d.removeChild(f);if(null!=this.template||null!=this.callback){var S=l.templateOptions;this._span.style.display="none",this._div.style.display="inline-block";var E,O=S.callback,R=Rt.makeArray(S.templateEvents);E=O?this.$_setHtml(O.call(this,e.handler,o,n,s),R):this.$_setHtml(this._parser.realize(e,o,r,S.valueCallback),R),this.renderCallback&&this.renderCallback.forEach((function(t){t.callback.call(null,e.handler,o,t.elt,E)}))}else this._span.style.removeProperty("display"),this._div.style.display="none",_[Rt.TextProp]=this._makeText(e,o,r);d.style.setProperty("padding-left",3+(y.level-1)*u+"px","important")},i.TYPE="tree",i.FOR_ID="$$-tree-check",i.STYLE="rg-tree-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i}(zr),Sp=function(t){function e(e){return t.call(this,e,"treeItemView")||this}return o(e,t),e.prototype.isCheckBox=function(t){var e=t.className;return"rg-tree-checkbox"==e||"rg-tree-radio"==e},e.prototype.isCheckImage=function(t){var e=t.className;return e&&e.indexOf("rg-tree-checkimage")>=0},e.prototype._doLayoutContent=function(e){t.prototype._doLayoutContent.call(this,e)},e.prototype._createRenderer=function(e,i,o,n,s){var a=e;if(this.isTreeCell(e,i)){var l=a&&a.treeOptions.templateOptions;return new Ip(r(r({},n),l))}return t.prototype._createRenderer.call(this,e,i,o,n,s)},e.prototype.$_getRenderer=function(e,i,o,r,n){var s=e;return this.isTreeCell(e,i)&&s.treeOptions._templateChanged&&(n.rendererChanged=!0),t.prototype.$_getRenderer.call(this,e,i,o,r,n)},e.prototype.$_getDefaultRenderer=function(t,e){return this.isTreeCell(t,e)?Ip.TYPE:qr.TYPE},e.prototype.isTreeCell=function(t,e){return 0===t.layoutManager.getHorzColumnIndex(e.valueColumn.layout)},e}(Al),Ep=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e}(Sp),Op=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e}(Sp),Rp=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype.isTreeCell=function(t){var e=this.bodyCellAt(t);return e&&e.renderer2 instanceof Ip},e.prototype.createRowElement=function(){return new Sp(this.doc)},e}(Ul),Pp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.isTreeCell=function(t){var e=this.bodyCellAt(t);return e&&e.renderer2 instanceof Ip},e.prototype.createRowElement=function(){return new Ep(this.doc)},e}(Yl),kp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.isTreeCell=function(t){var e=this.bodyCellAt(t);return e&&e.renderer2 instanceof Ip},e.prototype.createRowElement=function(){return new Op(this.doc)},e}(zl),Tp=function(t){function e(e){var i=t.call(this,e.doc)||this;return i._levelWidth=16,i._handleWidth=9,i._handleHeight=9,i._stroke="gray",i._linePool=[],i._lines=[],i._startIndex=-1,i._endIndex=-1,i._treeView=e,i}return o(e,t),e.prototype._doDispose=function(){this._linePool=null,this._lines=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"levelWidth",{get:function(){return this._levelWidth},set:function(t){t!=this._levelWidth&&(this._levelWidth=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"handleWidth",{get:function(){return this._handleWidth},set:function(t){t!=this._handleWidth&&(this._handleWidth=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"handleHeight",{get:function(){return this._handleHeight},set:function(t){t!=this._handleHeight&&(this._handleHeight=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(t){t!=this._stroke&&(this._stroke=t,this.invalidate())},enumerable:!1,configurable:!0}),e.prototype.setRange=function(t,e,i){e==this._startIndex&&i==this._endIndex||(this._startIndex=e,this._endIndex=i,this.invalidate())},e.prototype.layout=function(t){var e=this._treeView;if(this.$_hideAll(),!(!e||this._startIndex<0||this._endIndex<0||this._startIndex>this._endIndex)){var i,o=null;for(i=this._startIndex;i<=this._endIndex&&!(o=e.getItem(i));i++);if(o){var r=o.level;if(r>1||o.childIndex>0){for(var n=0;n<r;n++){var s=o.getAncestor(n);(a=s.last)&&a.index>=i&&(a=this.$_findLevelItem(n+1,i),this.$_drawVertLine(t,this.$_borrowLine(),null,a,s.level))}o.childIndex>0&&this.$_drawVertLine(t,this.$_borrowLine(),null,o,o.parent.level)}for(;i<=this._endIndex;i++){var a,l=(o=e.getItem(i)).parent;if((n=o.childIndex)<l.count-1)(a=l.getItem(n+1)).index>this._endIndex&&(a=null),this.$_drawVertLine(t,this.$_borrowLine(),o,a,l.level);if((l=o)&&l.expanded&&l.count>0)(a=l.getItem(0)).index>this._endIndex&&(a=null),this.$_drawChildLine(t,this.$_borrowLine(),o,a);this.$_drawHorzLine(t,this.$_borrowLine(),o)}}}},e.prototype._getCssSelector=function(){return"rg-tree-lines"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=e.style;i.setProperty("pointer-events","none","important"),i.setProperty("overflow","hidden")},e.prototype._doDraw=function(t){},e.prototype.$_borrowLine=function(){var t=this._linePool.pop();t||((t=this._treeView.doc.createElement("div")).className="rg-tree-line",t.style.position="absolute",this._dom.appendChild(t));return t.style.display="inline-block",this._lines.push(t),t},e.prototype.$_hideAll=function(){for(var t=this._lines.length-1;t>=0;t--)"none"!=this._lines[t].style.display&&(this._lines[t].style.display="none");this._linePool=this._linePool.concat(this._lines.splice(0,this._lines.length))},e.prototype.$_findLevelItem=function(t,e){for(var i=e;i<=this._endIndex;i++){var o=this._treeView.getItem(i);if(o&&o.level==t)return o}return null},e.prototype.$_setBounds=function(t,e,i,o,r){var n=t.style;n.left=3+e+"px",n.top=i+"px",n.width=1==o?"1px":o+"px",n.height=1==r?"1px":r+"px"},e.prototype.$_drawVertLine=function(t,e,i,o,r){var n=t.topIndex,s=r*this._levelWidth+this._levelWidth/2,a=0,l=this.height,h=this._handleHeight;if(i){var u=t.getItemBounds(i.index-n),c=i instanceof In&&i.hasChildren?h+2:0;a=u.y+u.height/2+c/2+1}if(o){u=t.getItemBounds(o.index-n),c=o instanceof In&&o.hasChildren?h:0;l=u.y+u.height/2-c/2}this.$_setBounds(e,s,a,1,l-a)},e.prototype.$_drawHorzLine=function(t,e,i){var o,r=t.topIndex,n=i.parent.level*this._levelWidth+this._levelWidth/2,s=i.level*this._levelWidth+1;i.hasChildren&&(n+=this._handleWidth/2+1);var a=t.getItemBounds(i.index-r);o=a.y+a.height/2,this.$_setBounds(e,n,o,s-n,1)},e.prototype.$_drawChildLine=function(t,e,i,o){var r,n=t.topIndex,s=i.level*this._levelWidth+this._levelWidth/2,a=this.height,l=t.getItemBounds(i.index-n);if(r=l.y+l.height/2+5,o){l=t.getItemBounds(o.index-n);var h=o.hasChildren?this._handleHeight:0;a=l.y+l.height/2-h/2}this.$_setBounds(e,s,r,1,a-r)},e}(ga),Dp=function(t){function e(e){return t.call(this,e,"treeViewSelectionTool")||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doKeyDown=function(e){var i,o=this.focused.clone(),r=this.grid.treeOptions,n=e.which,s=Rt.ctrlKey(e);if(o&&(i=o.item))switch(n){case 39:if(!s&&1==this.grid.visibleLayoutCount&&o.isRight&&r.expandWhenRightKey||s&&r.expandWhenCtrlKey){if(!i.expanded)return i.setExpanded(!0,!1,!1),!0;if(i.count>0)return o.down(),this.setFocused(o,!0,!0),!0}break;case 37:if(!s&&o.isLeft&&r.collapseWhenLeftKey||s&&r.collapseWhenCtrlKey){if(i.expanded)return i.setExpanded(!1,!1,!1),!0;if(!(i.parent instanceof Sn))return o.itemIndex=i.parent.index,this.setFocused(o,!0,!0),!0}}return t.prototype._doKeyDown.call(this,e)},e.prototype._doPointerDown=function(e){var i=e.mouseX,o=e.mouseY,r=e.altKey,n=this.grid,s=this.findElementAt(i,o,!1),a=this.mouseEventTarget;if(s instanceof Sp&&Al.isExpander(a)&&!r){var l=s._item;l instanceof In&&(l.expanded?n.collapse(l,!1):n.expand(l,!1,!1))}t.prototype._doPointerDown.call(this,e)},e.prototype._doClick=function(e,i,o){i=i||e.mouseX,o=o||e.mouseY;var r=e.shiftKey,n=this.grid,s=n.checkBar,a=this.findElementAt(i,o,!1),l=e.target;if(a instanceof Sp){if(a.isCheckImage(l))return;if(a.isCheckBox(l)){var h=n.getItem(a.itemIndex);n.editOptions.checkable&&h.checkable?(s.exclusive&&s.toggleRadio&&(l.checked=!h.checked),this._doCheck(l,h,r)):e.preventDefault()}}t.prototype._doClick.call(this,e,i,o)},e.prototype._canMoveRowAt=function(t,e,i){var o=t.boundsByContainer(t.getCellRectAt(this.grid.layoutManager,e,!1)),r=3+(e.item.level-1)*this.grid.treeOptions.levelIndent;if(i<o.x+(t.isTreeCell(e)?r:20)){var n=this.grid.getSelectedItems();if(n.length>1)for(var s=n[0].level,a=1;a<n.length;a++)if(n[a].level<s)return!1;return!0}},e}(Yu),Mp=function(t){function e(e,i,o,r){return t.call(this,e,i,o,r)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"treeView",{get:function(){return this.gridView},enumerable:!1,configurable:!0}),e.prototype._createGridView=function(t,e){return new Np(this,t,e)},e.prototype._createDefaultTool=function(){return new Dp(this)},e}(wp),Fp=function(t){function e(){return t.call(this,"treeItemExpanderCell")||this}return o(e,t),Object.defineProperty(e.prototype,"getText",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return null},enumerable:!1,configurable:!0}),e}(gr),Lp=function(t){function e(){return t.call(this,"treeItemFooterCell")||this}return o(e,t),Object.defineProperty(e.prototype,"getText",{get:function(){var t=String(this.value());if(!t){var e=this.index;e.dataColumn&&(t=e.column.footer.text)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return null},enumerable:!1,configurable:!0}),e}(gr),Np=function(e){function i(t,i,o){var r=e.call(this,t,i,o)||this;return r._expanderCell=new Fp,r._footerCell=new Lp,r._focusedRow=-1,r.itemSource=r._rs=r._createItemSource(),r}return o(i,e),i.prototype._doDispose=function(){this.itemSource=this._rs=this.itemSource&&this.itemSource.dispose(),e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"treeOptions",{get:function(){return this._treeOptions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"linesView",{get:function(){return this._linesView},enumerable:!1,configurable:!0}),i.prototype.isTree=function(){return!0},i.prototype.recursiveDeleting=function(){return this.treeOptions.recursiveDeleting},i.prototype._beforeChangeLayout=function(){},i.prototype.getLevels=function(t){return this._rs.getLevels(t)},i.prototype.getExpanderCell=function(t){return this._expanderCell.setIndex(Ds.temp(this,t)),this._expanderCell},i.prototype.getFooterCell=function(t){return this._footerCell.setIndex(t),this._footerCell},i.prototype.expand=function(t,e,i,o){this.isItemEditing(null)||this._rs.expand(t,e,i,o)},i.prototype.collapse=function(t,e){this.isItemEditing(null)||this._rs.collapse(t,e)},i.prototype.expandAll=function(t,e){this.isItemEditing(null)||this._rs.expandAll(t,e)},i.prototype.collapseAll=function(){this.isItemEditing(null)||this._rs.collapseAll()},i.prototype.getTreeIcon=function(t){var e=this.treeOptions,i=e.iconImages;if(i){var o=void 0;o=t.hasChildren&&t.expanded&&e.expandedIcon>-1?e.expandedIcon:t.hasChildren&&t.collapsed&&e.collapsedIcon>-1?e.collapsedIcon:t.iconIndex;var r=e.iconCallback;if(r){var n=r(this.handler,t.index,t.dataRow,o);if("string"==typeof n)return n;isNaN(n)||(o=n)}if((o<0||o>=i.length)&&(o=e.defaultIcon),o>=0&&o<i.length)return e.iconImagesRoot+i[o]}},i.prototype.getCheckedItems=function(){for(var t=[],e=0,i=this.itemCount;e<i;e++){var o=this.getItem(e);o.checked&&t.push(o)}return t},i.prototype.getCheckedItemIndices=function(){for(var t=[],e=0,i=this.itemCount;e<i;e++){var o=this.getItem(e);o.checked&&t.push(o.index)}return t},i.prototype.getCheckedRows=function(t){var e=null;if(t){e=[];for(var i=0,o=this.itemCount;i<o;i++){var r=this.getItem(i);r.checked&&e.push(r.row)}}else e=this._rs.getCheckedRows();return e},i.prototype.getCheckedRowIds=function(t){var e=null;if(t){e=[];for(var i=0,o=this.itemCount;i<o;i++){var r=this.getItem(i);r.checked&&e.push(r.dataRow)}}else e=this._rs.getCheckedRowIds();return e},i.prototype.checkChildren=function(t,e,i,o,r,n){if(void 0===r&&(r=!0),void 0===n&&(n=!1),t)for(var s=0,a=t.count;s<a;s++){var l=t.getItem(s);r?l.checkable&&l.setChecked(e,n):l.setChecked(e,n),!i||!l.expanded&&o||this.checkChildren(l,e,!0,o,r,n)}},i.prototype.resetCheckables=function(){this._rs.resetCheckables()},i.prototype.applyCheckables=function(){this._rs.applyCheckables()},i.prototype.getItemOfModel=function(t){return t.itemIndex>=0?this.getItem(t.itemIndex):t.dataRow>=0?this.getItemOfRow(t.dataRow,!1):0===t.level&&-1===t.parentId?this.itemSource.rootItem:null},i.prototype.getJsonRows=function(){return this._rs.getJsonRows()},Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._rs&&this._rs.dataSource},set:function(t){this._rs&&(this._rs.dataSource=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxItemCount",{get:function(){return this._rs?this._rs.maxItemCount:0},set:function(t){this._rs&&(this._rs.maxItemCount=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"summarizer",{get:function(){return this._rs.summarizer},enumerable:!1,configurable:!0}),i.prototype._initStyles=function(){e.prototype._initStyles.call(this),this._treeOptions=new xp(this)},i.prototype._createItemSource=function(){var t=new kn(!0);return t.setSortingOptions(this.sortingOptions),t},i.prototype._doContentPanesCreated=function(){this._linesView=new Tp(this),this.addElement(this._linesView)},i.prototype._createSidePane=function(){return e.prototype._createSidePane.call(this)},i.prototype._createLayoutManager=function(){return new $p(this)},i.prototype._createBodyView=function(t){return new Rp(this.doc,t)},i.prototype._createFixedBodyView=function(t){return new Pp(this.doc,t)},i.prototype._createRightBodyView=function(t){return new kp(this.doc,t)},i.prototype._visualObjectChanged=function(t){e.prototype._visualObjectChanged.call(this,t)},i.prototype.append=function(t,e){return this.insert(this._rs.rootItem,!1,!0,t,e)},i.prototype._doCanInsert=function(t,e,i){return t&&(t.count>0||!i||0==t.level||this.editOptions.appendable)},i.prototype._doMaxRowCountChanged=function(){this._rs.maxItemCount=this.maxItemCount},i.prototype.getSortFields=function(){return this._rs.getSortFields()},i.prototype.getSortDirections=function(){return this._rs.getSortDirections()},i.prototype.getSortCases=function(){return this._rs.getSortCases()},i.prototype._doSortItems=function(t,e,i){this._rs.setLabelComparer(this._doPrepareComparer(t)),this._rs.orderBy(t,e,i)},i.prototype._doColumnFiltersChanged=function(t,e,i){this._rs.includeParentItem=this.filteringOptions.includeParentItem,this.applyFilters(t,e,i)},i.prototype.setOptions=function(t){if(t){var i=this._rs;void 0!==t.hideDeleted&&(i.hideDeleted=t.hideDeleted),void 0!==t.hideDeletedRows&&(i.hideDeleted=t.hideDeletedRows),void 0!==t.summaryMode&&(i.summaryMode=t.summaryMode),void 0!==t.sortMode&&(i.sortMode=t.sortMode),e.prototype.setOptions.call(this,t)}},i.prototype._doPrepareRender=function(t){var i=this._horzScrolled;e.prototype._doPrepareRender.call(this,t),i&&this.layoutManager.$_layoutLines()},i.prototype.$_doLayout=function(t,i){this._treeOptions,e.prototype.$_doLayout.call(this,t,i)},i.prototype.assignImageList=function(t){},i.prototype.getEditBounds=function(t,i){return e.prototype.getEditBounds.call(this,t,i)},i.prototype.updatePastedRow=function(t,e,i){if(t instanceof In){var o=t.row;o&&o.update(e,i)}},i.prototype.appendPastedRow=function(t){var e=this.dataSource;if(e){var i=e.createRow(t,-1,!1);return e.rootRow.addChild(i,!1),i.rowId}},Object.defineProperty(i.prototype,"undoable",{get:function(){return this._rs.undoable},set:function(t){this._rs.undoable=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return this._rs.canUndo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return this._rs.canRedo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return this._rs.undoing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return this._rs.redoing},enumerable:!1,configurable:!0}),i.prototype.undo=function(){return!!this._rs.canUndo&&(this._rs.cancelWhenLastUndo=this.editOptions.cancelWhenLastUndo,this.editController.cancelEditor(!0),this._rs.undo(),!0)},i.prototype.redo=function(){return!!this._rs.canRedo&&(this._rs.redo(),!0)},i.prototype.execute=function(t){this._rs.execute(t)},i.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._rs.clearCommandStack(t)},i.prototype.getFirstRow=function(){return null},i.prototype.getLastRow=function(){return null},i.prototype.getPrevRow=function(t){return null},i.prototype.getNextRow=function(t){return null},i.prototype.canMoveRows=function(t,e,i){if(i&&this.canMoveRow(e,!1)&&t&&t.length>0){var o=t[0].parent;if(o!==i.parent)return!1;for(var r=1,n=t.length;r<n;r++)if(o!==t[r].parent)return!1;var s=!1;for(r=0;r<t.length;r++){var a=t[r];a&&a.isDataRow&&(s=!0)}return s}},i.prototype._getMoveTarget=function(t,e,i,o){if("keydown"===t){var r=this.getItem(i),n=r.parent;if(r.childIndex+e.length>=n.children.length&&o>0||0===r.childIndex&&o<0)return;var s=this.getItem(i+o);if(r.level===s.level)return s;var a=r.childIndex+o;if(!n||a<0||a>=n.children.length)return;return n.children[a]}return this.getItem(i+o)},i.prototype._doMoveRows=function(t,e){var i=e&&e.dataId;if(i>=0){for(var o=[],r=0,n=t;r<n.length;r++){var s=n[r],a=s&&s.dataId;a>=0&&o.push(a)}if(o.length>0){var l=this.dataSource,h=l.rowsByIds(o,!1);if(h.length>0)return l.moveRows(h,l.rowById(i))}}return!1},i.prototype._fitLayoutWidth=function(e){if(!e.visible)return 0;var i,o=this.itemSource,r=this.getIndex(this.topIndex,e.firstColumn),n="",s=0;i=n=e.firstColumn.header.displayText;var a,l=this.getBodyCellAt(r,!1),h=l&&l.renderer2&&l.renderer2._dom,u=l&&l.renderer2 instanceof Ip,c={0:Rt.getTextLength(i)},d={0:i};if(h){var p=It(h).getComputedStyle(h);if(p){n=p.paddingLeft;var f=parseInt(n.substr(0,n.indexOf("px")));s+=f>0?f:0,n=p.paddingRight,s+=(f=parseInt(n.substr(0,n.indexOf("px"))))>0?f:0,a={fontSize:p.fontSize,fontFamily:p.fontFamily,fontWeight:p.fontWeight,fontStyle:p.fontStyle}}}for(var _=0,g=o.itemCount;_<g;_++){r.itemIndex=_,c[w=u?r.item.level:0]=c[w]||0,n=this.getDisplayText(r),Rt.getTextLength(n)>c[w]&&(c[w]=Rt.getTextLength(n),d[w]=n)}for(var y=0,m=0,b=0,v=Object.keys(c);b<v.length;b++){var w=v[b];y=u?parseInt(w)*this.linesView.levelWidth+6+(this.treeOptions.iconVisible?24:0):6,y+=this.container.measureText("rg-data-cell",d[w],a),m=Math.max(m,y)}s+=m;var C=e.firstColumn,x=C.editor,I=this.delegate.getCellEditor(Ma.getEditorType(x));return I.hasButton(this.displayOptions.showNativeEditButton,x)&&(s+=this.body.editButtonWidth*I.buttonCount),C.button!==t.CellButton.NONE&&(s+=this.body.cellButtonWidth),s},i.prototype.optionsChanged=function(t){if(e.prototype.optionsChanged.call(this,t),t instanceof xp){var i=this._rs;i&&i.setTreeOptions(t)}},i.prototype.$_afterRender=function(){e.prototype.$_afterRender.call(this),this.treeOptions._templateChanged=!1},i.prototype.$_getVisibleAncestor=function(t){var e=this._rs.getItemOfRow(t);if(e){for(;e&&!e.visible;)e=e.parent;return e}return null},i.prototype.onItemProviderReset=function(t,i){this._currentRowId=-1,e.prototype.onItemProviderReset.call(this,t,i)},i.prototype.onTreeItemProviderItemChanged=function(t,e){this.invalidateLayout(),this.fireEvent(i.CHANGED,e)},i.prototype.onTreeItemProviderExpanding=function(t,e){return this._focusedRow=this.focusedIndex?this.focusedIndex.dataRow:-1,this.editController.editing&&!t.isEditing()&&this.editController.cancelEditor(!0),!this.editController.editing&&!t.isEditing()&&this.fireConfirmEvent(i.EXPANDING,e)},i.prototype.onTreeItemProviderExpanded=function(t,e){this.fireEvent(i.EXPANDED,e)},i.prototype.onTreeItemProviderCollapsing=function(t,e){return this._focusedRow=this.focusedIndex?this.focusedIndex.dataRow:-1,this.editController.editing&&!t.isEditing()&&this.editController.cancelEditor(!0),!this.editController.editing&&!t.isEditing()&&this.fireConfirmEvent(i.COLLAPSING,e)},i.prototype.onTreeItemProviderCollapsed=function(t,e){this.fireEvent(i.COLLAPSED,e)},i.EXPANDING="onTreeViewExpanding",i.EXPANDED="onTreeViewExpanded",i.COLLAPSING="onTreeViewCollapsing",i.COLLAPSED="onTreeViewCollapsed",i.CHANGED="onTreeViewChanged",i}(zc),$p=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.layout=function(e,i){void 0===i&&(i=!1),t.prototype.layout.call(this,e,i),this.$_layoutLines()},e.prototype.$_layoutLines=function(){var t=this.grid,e=t.linesView;if(e.visible=t.treeOptions.lineVisible){var i=this.fixedLayoutCount>0,o=(i?this.fixedBodyBounds:this.bodyBounds).clone();i?(o.y+=this.fixedContentBounds.y,o.x+=this.fixedContentBounds.x):(o.y+=this.contentBounds.y,o.x+=this.contentBounds.x),this.layoutCount>0?o.width=Math.max(0,this.getLayoutWidth(0)):o.width=0,e.setRect(o),e.levelWidth=16,e.setRange(t,this.topIndex,Math.min(t.itemCount,this.topIndex+this.itemCount)-1),e.layout(this)}},e}(Jl),Ap=function(t){function e(){var e=t.call(this)||this;return e._columns=null,e}return o(e,t),e.prototype._doDispose=function(){this._columns=null,t.prototype._doDispose.call(this)},e.prototype.setColumns=function(t){this._columns=[];for(var e=0;e<t.length;e++)t[e].layout instanceof _s&&this._columns.push(t[e].layout.firstColumn.name)},e.prototype.setItemIndex=function(t,e){this._itemIndex=t,this._startCol=e},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){if(t===e.ID_ROW)return String(this._itemIndex+1);throw new $t("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(t==e.ID_EXCELCOLUMN){if(i<0||i>=this._columns.length)throw new $t("Data field index out of bounds:"+i);return this._columns[i]}throw new $t("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,i,o){if(t!=e.ID_EXCELCOLUMN)throw new $t("Invalid identifier indexer: "+t);if(this._columns){var r=this._columns.indexOf(i);if(r<0||r>=this._columns.length)throw new $t("Column is not exists:"+i);return _d.toColCaption(r+this._startCol)}},e.ID_EXCELCOLUMN=0,e.ID_ROW=1,e.IDENTS={excelcolumn:e.ID_EXCELCOLUMN,row:e.ID_ROW},e}(Wt),Vp=function(e){function i(){var t=e.call(this)||this;return t._gridIndex=0,t._numberFormatId=0,t._textFormatId=49,t._dateFormatId=14,t._rowLevels=0,t._indentWidth=3,t._seriesCell=new Cr,t._excelFormulaRuntime=new Ap,t}return o(i,e),i.prototype.dispose=function(){return e.prototype.dispose.call(this),this._seriesCell=this._seriesCell.dispose(),this._linkRenderer=this._linkRenderer&&this._linkRenderer.dispose(),this._templateRenderer=this._templateRenderer&&this._templateRenderer.dispose(),this._imageRenderer=this._imageRenderer&&this._imageRenderer.dispose(),this._bulletRenderer=this._bulletRenderer&&this._bulletRenderer.dispose(),this._barRenderer=this._barRenderer&&this._barRenderer.dispose(),this._signalRenderer=this._signalRenderer&&this._signalRenderer.dispose(),this._excelFormulaRuntime=this._excelFormulaRuntime.dispose(),this._css=null,null},i.prototype._progressCallback=function(t,e,i,o){var r=this._progressGrid,n=this._multiOptions;r&&r.setExportProgress(i,o+n.prepareProgress,n.progressMessage)},i.prototype.getShowOutline=function(){return this._rowGrouped&&this._exportOptions.showLevelOutline},i.prototype.export=function(t,i){if(e.prototype.export.call(this,t,i),this._progressGrid=t,i){var o=this._multiOptions=i,r=this._multiOptions.exportGrids;if(r&&!(r.length<=0)){var n=St(t.container._containerDiv).documentElement;this._css=this.grid.doc.createElement("span").style;var s=new Hd(n);if(s.createCoreProperties(o.coreProperties||{creator:"Wooritech"}),this._mergeHeads={},o.showProgress)this.grid.container.cancelRequestAnimation(),this._allCount=this._prepareCount(o,r),this._progressMax=this._allCount+o.prepareProgress,this._progressPos=0,this._progressStep=Math.max(this._allCount/10|0,1),o.progressCallback?this.setProgress=o.progressCallback:(this._progressGrid&&this._progressGrid.beginExportProgress(o.progressMessage),this.setProgress=this._progressCallback),this._exportGridAsync(s,o,this._gridIndex=0,function e(){var r=++this._gridIndex;r<o.exportGrids.length?this._exportGridAsync(s,o,r,e.bind(this)):(!i.progressCallback&&this._progressGrid&&this._progressGrid.endExportProgress(),t.invalidate(),this.save())}.bind(this));else{for(var a=0,l=r.length;a<l;a++)this._exportGrid(s,r[a].options);this.save()}}}},i.prototype.buildBook=function(t){var e=this._exportOptions.grid;e.isTree()?this.buildTreeSheet(e,t):this.buildSheet(e,t)},i.prototype.buildSheet=function(t,e){var i=this,o=this._exportOptions,r=this._workbook,n=r.createSheet(this._sheetName,o),s=t.displayOptions;if(this._defaultHeight=s.rowHeight||s.minRowHeight,this._rowGrouped=t.rowGrouped,this._mergedGrouped=t.mergedRowGrouped,this._rowGrouped&&(this._rowLevels=t.rowGroupLevels),this._startItem=0,o.allItems&&this._rowGrouped){this.allItems=t.itemSource.getAllItems();var a=t.layoutManager.fixedItemCount;if(a>0)for(var l=0;l<a;l++)this.allItems.splice(l,0,t.getItem(l))}else if(o.pagingAllItems&&t.paged){var h=t.itemSource;h instanceof Gd&&(this.allItems=h.getPagingAllItems()),o.onlyCheckedItems&&!t.rowGrouped&&(this.allItems=this.allItems.filter((function(t){return t.checked})))}else o.onlyCheckedItems&&!t.rowGrouped&&(this.allItems=t.getCheckedItems(!1));var u=this.allItems,c=u?u.length:t.itemCount;if(!this._rowGrouped){this._startItem=o.start>0?o.start:0;var d=o.count>0?o.count:c;c=d>0?this._startItem+d>c?c-this._startItem:d:c-this._startItem}this._indexItem=this._startItem,this._lastItem=this._startItem+c,this._currentRow=o.yOffset,n.setFirstCol(this._startCol=o.xOffset),this._prepareCommonStyles(t),this._buildColumns(t),n.createBorderEdges(ld.getSelectorStyle(this._preparer.documentCssStyles,".rg-grid")),this._buildDocumentTitle(r),this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1,o.headerSummary),this.buildItems(t,(function(){i.footer&&i.buildSummaryItem(t,!0,o.footer),i._buildDocumentTail(r),i._buildUserCells(t,r),e&&e()}))},i.prototype.buildHeader=function(t){for(var e=this._workbook,o=e.currentSheet,r=this._preparer,n=r.colCount,s=r.headerRowCount,l=t.header._fitHeights||t.header.heights||[],h=l&&l.length>0?t.header.minRowHeight:Math.max(t.header.height,t.header.minRowHeight*s)/s,u=[],c=0;c<s;c++)u.push(Math.max(l[c]||h,h)*i.LINE_HEIGHT);var d=this._indents,p=this._currentRow;o.setFirstRow(this._currentRow);var f,_=this._startCol,g=this._headerCellStyle,y=[];for(c=0;c<s;c++)y.push(o.borrowRow(p+c,u[c]));if(this.indicator){if((f=y[0]).addText(_,this.indicatorHead,g),s>1){for(c=1;c<s;c++)y[c].addBlank(_,g);o.addMerge(p,_,s,1)}_++}if(this.checkBar){if((f=y[0]).addText(_,this.checkBarHead,g),s>1){for(c=1;c<s;c++)y[c].addBlank(_,g);o.addMerge(p,_,s,1)}_++}if(d>0){for(var m=0;m<d;m++){for(c=0;c<s;c++)y[c].addBlank(m+_,this._indentHeadStyle);o.addMerge(p,m+_,s,1)}_+=d}for(c=0;c<s;c++){var b=p+c;f=y[c];for(m=0;m<n;m++){var v=r.getHeader(c,m),w=v&&v.layout,C=m+_;if(w.isProxy||v.spanned)f.addBlank(C,g,!0);else{var x=w.displayText,I=this._preparer.documentCssStyles,S=w instanceof _s?w.firstColumn.header:w.header,E=S.exportStyleName||S.styleName;if(g=this._headerCellStyle,E){var O=this._inheritStyles(a([this._headerCssStyle],ld.getSelectorStyles(I,E),!0)),R=this._getTextWrap(O,!0);g=this._parseStyles(e,O,R)}f.addText(C,x,g);var P=0,k=w.getHeaderSpan()-1,T=w.parent,D=T&&T.vertical;if(k>0){var M=0,F=w.vindex+1;if(D)for(;M++<k&&M<s;){P+=T.getVisible(F++)._hspan,r.getHeader(c+M,m).spanned=!0}else for(;M++<k&&m+M<n&&F<T.visibleCount;){P+=T.getVisible(F++)._cspan,r.getHeader(c,m+M).spanned=!0}}var L=D?w.hspan+P:w.hspan,N=D?w.cspan:w.cspan+P;if(L>1||N>1){o.addMerge(b,C,L,N);for(var $=0;$<L;$++)for(var A=0;A<N;A++)if(0!==$||0!==A){var V=b+$-p;y[V]&&y[V].addBlank(C+A,g)}}}}}this._currentRow+=s,this._exportOptions.applyFixed&&o.setFixedInfo(this._currentRow,void 0),o.setLastRow(this._currentRow-1)},i.prototype.buildSummaryItem=function(t,e,o){function r(t,i,o,r,s,a){var l=n.getCell(o.layout),h=this._exportOptions,u=l.value;if(a&&null!=a.text)t.addText(i,a.text,s);else if(u instanceof Date)h.datetimeCallback?(u=h.datetimeCallback(-1,o.name,u))instanceof Date?t.addDate(i,u,s):t.addText(i,u,s):t.addDate(i,u,s);else if(isNaN(u)){var c=e?o.getFooter(n._childIndex):o.getHeaderSummary(n._childIndex),d=c&&n.getCellFormatters(c,null),p=d?l.getDisplayText(d):u;t.addText(i,p||"",s)}else t.addNumber(i,u,s)}var n,s=this._workbook.currentSheet,a=this._preparer,l=a.colCount,h=a.dataRowCount,u=this._indents,c=e?t.footers:t.headerSummaries,d=o===Qc?c.count:c.visibleCount,p=d*h,f=this._currentRow;s.setFirstRow(this._currentRow);for(var _,g=this._startCol,y=t.layoutManager.getDataRowHeights(h),m=y.reduce((function(t,e){return t+e}),0),b=[],v=0;v<d;v++){var w=(n=o===Qc?c.get(v):c.getVisible(v)).heights||[],C=w.reduce((function(t,e){return t+e}),0),x=n.height;x=-1===x?-1:x>0?x/h:Math.max(n.minHeight,t.heightMeasurer.summaryHeight,x);for(var I=0;I<h;I++)C>0&&w[I]>0?b.push(w[I]*i.LINE_HEIGHT):m>0&&y[I]>0?b.push(y[I]*n.height/m*i.LINE_HEIGHT):b.push(-1===x?-1:x*i.LINE_HEIGHT)}for(v=0;v<d*h;v++)s.borrowRow(f+v,b[v]);if(this.indicator){v=0;for(var S=0;v<d;v++)for(var E=0;E<h;E++)_=s.borrowRow(f+S,b[S]),e?0===S?_.addText(g,this.indicatorFoot,this._indicatorFootStyle):_.addBlank(g,this._indicatorFootStyle):0===S?_.addText(g,this.indicatorSummary,this._indicatorSumStyle):_.addBlank(g,this._indicatorSumStyle),S++;s.addMerge(f,g++,p,1)}if(this.checkBar){for(v=0,S=0;v<d;v++)for(E=0;E<h;E++)_=s.borrowRow(f+S,b[S]),e?0===S?_.addText(g,this.checkBarSummary,this._checkBarSumStyle):_.addBlank(g,this._checkBarSumStyle):0===S?_.addText(g,this.checkBarFoot,this._checkBarFootStyle):_.addBlank(g,this._checkBarFootStyle),S++;s.addMerge(f,g++,p,1)}if(u>0){for(var O=0;O<u;O++){for(v=0,S=0;v<d;v++)for(E=0;E<h;E++)(_=s.borrowRow(f+S,b[S])).addBlank(g+O,this._indentFootStyle),S++;s.addMerge(f,g+O,d*h,1)}g+=u}for(var R=f,P=(e?a.getFooterItem:a.getSummaryItem).bind(a),k=(I=0,0);I<d;I++){n=o===Qc?c.get(I):c.getVisible(I);for(v=0;v<h;v++,k++){_=s.borrowRow(R,b[k]);for(O=0;O<l;O++){var T=P(I*h+v,O),D=T.layout,M=D.firstColumn,F=O+g,L=D.firstColumn.$_hash,N=(e?this._columnFooterStyles:this._columnSummaryStyles)[L][I];if(D.isProxy||T.spanned)_.addBlank(F,N);else{var $=0,A=e?D.getFooterSpan(I)-1:D.getSummarySpan(I)-1,V=e?D.getFooterUserSpan(n._childIndex):D.getSummaryUserSpan(n._childIndex),B=D.parent,j=B&&B.vertical;if(V){var H=V.footerCount||0,G=H>0?H*h:V.rowspan||1,W=V.colspan||1;r.call(this,_,F,M,I,N);for(var U=0,Y=0,z=0;z<G;z++){var q=(e?a._footerCells:a._summaryCells)[I*h+v+z];q&&U++;for(var K=0;q&&K<W;K++){var X=q[O+K];X&&(Y=Math.max(Y,K+1),X.spanned=!0)}}(G>1||W>1)&&s.addMerge(R,F,U,Y)}else{if(A>0){var Z=0,J=D.vindex+1;if(j)for(;Z++<A&&Z<h;){$+=B.getVisible(J++)._dspan,P(I*h+v+Z,O).spanned=!0}else for(;Z++<A&&O+Z<l&&J<B.visibleCount;){$+=B.getVisible(J++)._cspan,P(I*h+v,O+Z).spanned=!0}}r.call(this,_,F,M,I,N,T),j?s.addMerge(R,F,D._dspan+$,D._cspan):s.addMerge(R,F,D._dspan,D._cspan+$)}}}R++}}this.getShowOutline()&&s.setRowLevel(R,1),this._currentRow+=p,s.setLastRow(this._currentRow-1)},i.prototype.buildItems=function(t,e){for(var i=this,o=this._exportOptions,r=o.showIndicatorRow(t),n=o.showIndicatorReverse(t),s=this.allItems,a=s?s.length:t.itemCount,l=this._progressStep?this._indexItem+Math.min(this._progressStep,this._lastItem-this._indexItem):this._lastItem,h=this._indexItem;h<l;h++){var u=s?s[h]:t.getItem(h);if(this._indicatorNo=r?u.isDataRow?u.dataRow+1:void 0:n?a-h:h+1,u instanceof Go)this.buildRow(t,u);else if(u instanceof Hr)this.buildMergedGroupHeader(t,u);else if(u instanceof jr||u instanceof Yo)this._preparer.groupModel!=u.parent&&this._preparer.setGroupFooterItms(u.parent,o.allItems,t.rowGroup.mergeMode),u instanceof jr?this.buildMergedGroupFooter(t,u):this.buildGroupFooter(t,u);else{if(!(u instanceof Uo))throw new Error("Unkown item type");this.buildGroupHeader(t,u)}this._progressPos+=1,this._preparer.clearDataSpanned()}this.setProgress&&this.setProgress(t.handler,"process",this._progressMax,this._progressPos),this._indexItem=l,this._indexItem>=this._lastItem?e&&e():setTimeout((function(){i.buildItems(t,e)}),0)},i.prototype.buildRow=function(e,o){var r,n,s=e.rowGroup,a=this._preparer,l=a.dataRowCount,h=a.colCount,u=e.layoutManager,c=this._columnMerged,d=this._mergeHeads,p=this._indents,f=this._workbook.currentSheet,_=this._currentRow;f.setFirstRow(this._currentRow);var g,y=this._startCol,m=e.displayOptions,b=m.rowHeightCallback;o.index>=0&&b&&(u.getRowHeightOfCallback(e,o.index),g=o.heights);var v=(g=g||u.getDataRowHeights(l)).reduce((function(t,e){return t+e}),0)||o.height;isNaN(v)&&(v=-1===m.rowHeight?-1:Math.max(m.rowHeight||0,m.minRowHeight*l)),v=-1===v?-1:v>0?v/l:v;for(var w=s.expandedAdornments===t.RowGroupAdornments.SUMMARY&&s.mergeMode,C=[],I=0;I<l;I++)C.push(f.borrowRow(_+I,-1===v?-1:(g[I]||v)*i.LINE_HEIGHT));this.indicator&&this._buildIndicatorCell(e,f,C,this._indicatorNo,_,y++,l),this.checkBar&&this._buildCheckBarCell(e,f,C,o.checked,_,y++,l);for(I=0;I<l;I++){var S=C[I];S._row=I;var E=_+I,O=y;for(r=0;r<p;r++)S.addBlank(O,this._indentBarStyle),O++;for(r=0;r<h;r++){var R=r+O,P=a.getItem(I,r),k=P.layout,T=k.firstColumn,D=T.$_hash,M=this._columnStyles[D],F=Ms.tempItem(e,o,k);if(k.isProxy||P.spanned)S.addBlank(R,P.style||M);else{var L=k._dspan,N=!1,$=!1;if(c){var A=u.getMergeRoom(F);if(A)if(A.isHead(F)&&0==I||this._startItem>0&&o.index==this._startItem&&!w)M=this._buildValueCell(e,f,S,o,k,R,O),d[D]={startRow:E,style:M},N=!0,$=!T.mergeGrouped&&o.isDataRow;else{var V=d[D];S.addBlank(R,V.style||M),(A.isTail(F)||this._lastItem>0&&o.index==this._lastItem-1)&&(L=E-V.startRow+l,f.addMerge(V.startRow,R,L,1+(V.cols||0)),delete d[D]),N=!0,$=!T.mergeGrouped&&o.isDataRow}else if(this.allItems&&!o.visible&&e.isGroupedColumn(T)&&this._mergedGrouped){S.addBlank(R,M),N=!0,n=o.parent;for(;T.groupLevel!=n.level&&n;)n=n.parent;var B=d[D]?d[D].startRow:void 0;switch(e.rowGroup.expandedAdornments){case t.RowGroupAdornments.NONE:o==n.firstItem&&o==n.lastDataItem?N=!1:o==n.firstItem?(M=this._buildValueCell(e,f,S,o,k,R,O),d[D]={startRow:E,style:M}):o==n.lastDataItem&&(L=E-B+l,f.addMerge(B,R,L,1));break;case t.RowGroupAdornments.BOTH:o==n.lastDataItem&&0==n.footerCount&&(L=E-B+l,f.addMerge(B,R,L,1));break;case t.RowGroupAdornments.HEADER:case t.RowGroupAdornments.SUMMARY:o==n.firstItem&&o==n.lastDataItem?d[D]?(L=E-B+l,f.addMerge(B,R,L,1),delete d[D]):N=!1:o==n.lastDataItem?(L=E-B+l,f.addMerge(B,R,L,1),delete d[D]):n.firstDataItem;break;case t.RowGroupAdornments.FOOTER:o==n.firstItem&&(M=this._buildValueCell(e,f,S,o,k,R,O),d[D]={startRow:E,style:M}),o==n.lastDataItem&&(n.footerCount>0||(L=E-d[D].startRow+l,f.addMerge(d[D].startRow,R,L,1),delete d[D]))}}}if(!N||$){var j=!$&&this._buildValueCell(e,f,S,o,k,R,O),H=k.parent,G=H&&H.vertical,W=!0,U=k.spanCallback,Y=U?U(e.handler,k,o.index):void 0;void 0===Y&&(Y=k.dataSpan),void 0===Y&&(W=!1,Y=k.cellSpan);var z=0;if(Y>0){var q=0,K=k.vindex+1;if(G)for(Y--;q++<Y&&q<l;){z+=(it=H.getVisible(K++))._dspan,a.getItem(I+q,r).spanned=!0,a.getItem(I+q,r).style=j}else{for(var X=k._dspan,Z=[],J=0;J<X;J++)Z.push(0);for(var Q=0;Q<X;Q++){Z[Q]+=k._defColSpan;for(var tt=1;tt<Y&&r+tt<h;tt++){var et=a.getItem(I+Q,r+tt).layout;et&&!et.isProxy&&(Z[Q]+=et._defColSpan)}}for(W=Math.max.apply(Math,Z)===Y;q++<Y-1&&r+q<h&&(W||K<H.visibleCount);){var it;if(!(it=W?a.getItem(I,r+q).layout:H.getVisible(K++)))break;!it.isProxy&&(z+=it._defColSpan)}for(k._defColSpan+z!==Y&&(z=0),q=1;q<k._defColSpan+z;q++){if(X>1&&W)for(tt=1;tt<l&&X>tt;tt++)a.getItem(I+tt,r+q).spanned=!0,a.getItem(I+tt,r+q).style=j;a.getItem(I,r+q).spanned=!0,a.getItem(I,r+q).style=j}}}if($){var ot=d[D];ot&&(ot.cols=z)}else G?f.addMerge(E,R,k._dspan+z,k._defColSpan):f.addMerge(E,R,k._dspan,k._defColSpan+z)}}}this.getShowOutline()&&x(this.grid.rowGroup.expandedAdornments)&&f.setRowLevel(E,o.level)}this._currentRow+=l,f.setLastRow(this._currentRow-1)},i.prototype.buildGroupHeader=function(t,e){var o=this._workbook,r=o.currentSheet,n=this._preparer,s=e.level-1,a=this._indentBarStyle,l=n.colCount,h=this._currentRow;r.setFirstRow(this._currentRow);var u=this._startCol,c=t.layoutManager.getDataRowHeights(n.dataRowCount).reduce((function(t,e){return t+e}),0);c=c||Math.max(t.displayOptions.rowHeight,t.displayOptions.minRowHeight,t.displayOptions.minTableRowHeight*n.dataRowCount);var d=this._exportOptions,p=r.borrowRow(h,c*i.LINE_HEIGHT);if(this.indicator&&this._buildIndicatorCell(t,r,p,this._indicatorNo,h,u++,1),this.checkBar&&this._buildCheckBarCell(t,r,p,e.checked,h,u++,1),d.indenting)for(var f=0;f<s;f++)p.addBlank(u,a),u++;var _=t.rowGroup.getHeaderText(e),g=this._groupHeaderStyle,y=this._preparer.documentCssStyles,m=this._dynamicStyles,b="groupheader-style=.rg-rowgroup-header-level-"+e.level;if(m[b])g=m[b];else{var v=ld.getSelectorStyle(y,".rg-rowgroup-header-level-"+e.level);v&&(g=this._extendStyles(o,g,v)),this._dynamicStyles[b]=g}p.addText(u,_,g),this._indents>0&&(l+=this._indents-(e.level-1));for(var w=1;w<l;w++)p.addBlank(w+u,g);r.addMerge(h,u,1,l),this.getShowOutline()&&r.setRowLevel(h,e.level),this._currentRow++,r.setLastRow(this._currentRow-1)},i.prototype.buildGroupFooter=function(e,o){function r(t,i,r,n,s){var a=Ic.getValue(o,r),l=this._exportOptions;if(s&&null!=s.text)t.addText(i,s.text,n);else if(a instanceof Date)l.datetimeCallback?(a=l.datetimeCallback(o.index,r.name,a))instanceof Date?t.addDate(i,a,n):t.addText(i,a,n):t.addDate(i,a,n);else if(isNaN(a))if(a)t.addText(i,a,n);else{var h=void 0;if(o){var u=Ms.tempItem(e,o,r);h=e.getDisplayText(u)||""}else h=r.groupFooter.text||"";t.addText(i,h,n)}else t.addNumber(i,a,n)}var n,s,a,l=this._workbook.currentSheet,h=this._exportOptions,u=this._preparer,c=u.dataRowCount,d=u.colCount,p=this._groupFooterCellStyle,f=this._indentBarStyle,_=this._indents,g=o.level,y=this._currentRow;l.setFirstRow(this._currentRow);for(var m=this._startCol,b=e.rowGroup.expandedAdornments==t.RowGroupAdornments.SUMMARY,v=Math.max(Math.max(this._defaultHeight,e.displayOptions.minRowHeight)/c,e.displayOptions.minTableRowHeight),w=e.layoutManager.getDataRowHeights(c),C=[],x=0;x<c;x++)C.push(l.borrowRow(y+x,(w[x]||v)*i.LINE_HEIGHT));this.indicator&&this._buildIndicatorCell(e,l,C,this._indicatorNo,y,m++,c),this.checkBar&&this._buildCheckBarCell(e,l,C,o.checked,y,m++,c);var I=u.getGroupFooterCells(),S=o.vindex*c;for(x=0;x<c;x++){var E=y+x,O=m,R=C[x];if(_>0)for(var P=0;P<_;P++)b?P<g-2?R.addBlank(O,f):R.addBlank(O,p):R.addBlank(O,f),0==x&&c>1&&l.addMerge(E,O,c,1),O++;for(P=0;P<d;P++){n=P+O;var k=I[S+x][P],T=k.layout;if(s=T.firstColumn,a=this._columnGroupFooterStyles[s.$_hash][o.footerIndex],h.applyDynamicStyles){var D=Ms.tempItem(e,o,T),M=e.rowGroup.getFooterCell(D),F=M.getSummary();a=this.$_summaryStyleSet(M,F,a,k,o)}if(T.isProxy||k.spanned)R.addBlank(n,a);else{var L=T.parent,N=L&&L.vertical,$=0,A=0,V=T.getGroupFooterUserSpan(o.parent,o.footerIndex),B=V?0:T.getGroupFooterSpan(o.index,o.footerIndex)-1;if(V){var j=V.footerCount||0;$=j>0?j*c:V.rowspan||1,A=V.colspan||1,$=Math.min((o.parent.footerCount-o.vindex)*c,$),l.addMerge(E,n,$,A);for(var H=0;H<$;H++)for(var G=0;G<A;G++)I[S+H+x][P+G].spanned=!0}else if(B>0){var W=0;D=T.vindex+1;if(N)for(;W++<B&&W<c;){$+=L.getVisible(D++)._dspan,I[S+W][P].spanned=!0}else for(;W++<B&&D<Math.min(d,L.visibleCount);){A+=L.getVisible(D++)._cspan,I[S+x][P+W].spanned=!0}}r.call(this,R,n,s,a,k),!V&&l.addMerge(E,n,T._dspan+$,T._cspan+A)}this.getShowOutline()&&l.setRowLevel(E,o.level)}}this._currentRow+=c,l.setLastRow(this._currentRow-1)},i.prototype.buildMergedGroupHeader=function(t,e){var o=this._workbook.currentSheet,r=this._preparer,n=e.level,s=Math.max(t.displayOptions.rowHeight,t.displayOptions.minRowHeight,t.displayOptions.minTableRowHeight*r.dataRowCount),a=this._exportOptions,l=r.colCount,h=this._currentRow;o.setFirstRow(this._currentRow);var u=this._startCol,c=o.borrowRow(h,-1===s?-1:s*i.LINE_HEIGHT);this.indicator&&this._buildIndicatorCell(t,o,c,this._indicatorNo,h,u++,1),this.checkBar&&this._buildCheckBarCell(t,o,c,e.checked,h,u++,1);for(var d=0;d<n-1;d++){var p=r.getItem(0,d),f=u+d;if(c.addBlank(f,this._columnStyles[p.layout.firstColumn.$_hash]),!a.allItems){var _=p.layout,g=_.firstColumn,y=Ms.tempItem(t,e,_).clone(),m=_.merges.getRoom(y);if(m.isHead(y)){var b=this._buildValueCell(t,o,c,e.firstItem,p.layout,f);this._mergeHeads[g.$_hash]={startRow:h,style:b}}else if(m.isTail(y)){var v=this._mergeHeads[g.$_hash];o.addMerge(v.startRow,f,h-v.startRow+1,1)}}}var w=n-1,C=r.getItem(0,w).layout,x=C.firstColumn,I=this._buildValueCell(t,o,c,e.firstItem,C,u+w);this._mergeHeads[x.$_hash]={startRow:h,style:I};var S=t.rowGroup.getHeaderText(e);for(d=u+n,I=this._groupHeaderStyle,n<r.colCount&&c.addText(d++,S,I);d<l+u;d++)c.addBlank(d,I);l-n>1&&o.addMerge(h,n+u,1,l-n),this._currentRow++,o.setLastRow(this._currentRow-1)},i.prototype.buildMergedGroupFooter=function(e,o){function r(t,i,r,n,s){var a=Ic.getValue(o,r),l=this._exportOptions;if(s&&null!=s.text)t.addText(i,s.text,n);else if(a instanceof Date)l.datetimeCallback?(a=l.datetimeCallback(o.index,r.name,a))instanceof Date?t.addDate(i,a,n):t.addText(i,a,n):t.addDate(i,a,n);else if(isNaN(a)){var h=Ms.tempItem(e,o,r).clone(),u=e.getDisplayText(h)||"";t.addText(i,u,n)}else t.addNumber(i,a,n)}var n,s,a,l,h=this._workbook.currentSheet,u=this._exportOptions,c=this._preparer,d=c.dataRowCount,p=c.colCount,f=c.getItemLevel(o),_=this._currentRow;h.setFirstRow(this._currentRow);for(var g=this._startCol,y=e.rowGroup.expandedAdornments==t.RowGroupAdornments.SUMMARY,m=Math.max(Math.max(this._defaultHeight,e.displayOptions.minRowHeight)/d,e.displayOptions.minTableRowHeight),b=e.layoutManager.getDataRowHeights(d),v=[],w=0;w<d;w++){var C=h.borrowRow(_+w,(b[w]||m)*i.LINE_HEIGHT);C._row=w,v.push(C)}for(this.indicator&&this._buildIndicatorCell(e,h,v,this._indicatorNo,_,g++,d),this.checkBar&&this._buildCheckBarCell(e,h,v,o.checked,_,g++,d),n=0;n<f;n++){a=(D=c.getItem(0,n).layout).firstColumn;var x=this._mergeHeads[a.$_hash];l=x?x.style:this._columnStyles[a.$_hash];for(var I=o.parent;I&&a.groupLevel!==I.level;)I=I.parent;if(this.allItems||o.parent.expanded){for(w=0;w<d;w++)if(v[w].addBlank(g+n,l),0===w)if(u.separateRows)(u.fillMergeFooterValue||o.parent.level===a.groupLevel)&&(l=this._buildValueCell(e,h,v[w],o.parent.firstItem,D,g+n)),h.addMerge(v[w].index,g+n,d,1);else if(y)I.getFirstVisibleItem(!0)===o&&(l=this._buildValueCell(e,h,v[w],o.parent.firstItem,D,g+n),this._mergeHeads[a.$_hash]={startRow:_,style:l});else if(I.getLastItem(!1)===o){var S=this._mergeHeads[a.$_hash];S&&h.addMerge(S.startRow,g+n,_+d-S.startRow,1)}}else for(w=0;w<d;w++)if(v[w].addBlank(g+n,l),0===w)if(u.separateRows)(u.fillMergeFooterValue||o.parent.level===a.groupLevel)&&(l=this._buildValueCell(e,h,v[w],o.parent.firstItem,D,g+n)),h.addMerge(v[w].index,g+n,d,1);else{var E=Ms.tempItem(e,o,D).clone(),O=D.merges.getRoom(E);if(O.isHead(E)){var R=this._buildValueCell(e,h,v[w],o.parent.firstItem,D,g+n);this._mergeHeads[a.$_hash]={startRow:_,style:R}}O.isTail(E)&&(x=this._mergeHeads[a.$_hash],h.addMerge(x.startRow,n+g,_-x.startRow+d,1))}}var P=c.getGroupFooterCells(),k=o.vindex*d;for(w=0;w<d;w++){var T=_+w;for(n=f;n<p;n++){s=n+g;var D,M=P[k+w][n];if(a=(D=M.layout).firstColumn,D.isProxy||M.spanned)l=this._columnStyles[a.$_hash],v[w].addBlank(s,l);else{var F=D.parent,L=F&&F.vertical,N=0,$=0,A=D.getGroupFooterUserSpan(o.parent,o.footerIndex),V=A?0:D.getGroupFooterSpan(o.index,o.footerIndex)-1;if(A){var B=A.footerCount||0;N=B>0?B*d:A.rowspan||1,$=A.colspan||1,N=Math.min((o.parent.footerCount-o.vindex)*d,N),h.addMerge(T,s,N,$);for(var j=0;j<N;j++)for(var H=0;H<$;H++)P[k+j+w][H+n].spanned=!0}else if(V>0){var G=0;E=D.vindex+1;if(L)for(;G++<V&&G<d;){N+=F.getVisible(E++)._dspan,P[k+G][n].spanned=!0}else for(;G++<V&&E<Math.min(p-1,F.visibleCount);){$+=F.getVisible(E++)._cspan,P[k+w][n+G].spanned=!0}}if(l=this._columnGroupFooterStyles[a.$_hash][o.footerIndex],u.applyDynamicStyles){E=Ms.tempItem(e,o,D);var W=e.rowGroup.getFooterCell(E),U=W.getSummary();l=this.$_summaryStyleSet(W,U,l,M,o)}r.call(this,v[w],s,a,l,M),!A&&h.addMerge(T,s,D._dspan+N,D._cspan+$)}this.getShowOutline()&&h.setRowLevel(T,f)}}this._currentRow+=d,h.setLastRow(this._currentRow-1)},i.prototype.buildTreeSheet=function(t,e){var i=this,o=this._exportOptions,r=this._workbook;o.allItems&&(this.allItems=t.getAllItems());var n=this.allItems,s=n?n.length:t.itemCount,a=r.createSheet(this._sheetName,o),l=t.displayOptions;if(this._defaultHeight=l.rowHeight||l.minRowHeight,this._rowLevels=t.getLevels(!1),this._startItem=this._indexItem=0,!this._rowGrouped){this._startItem=o.start>0?o.start:0;var h=o.count>0?o.count:s;s=h>0?this._startItem+h>s?s-this._startItem:h:s-this._startItem}this._lastItem=this._startItem+s,this._prepareCommonStyles(t),this._currentRow=o.yOffset,this._startCol=o.xOffset,this._buildColumns(t),a.createBorderEdges(ld.getSelectorStyle(this._preparer.documentCssStyles,".rg-grid")),this._buildDocumentTitle(r),this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1,o.headerSummary),this.buildTreeItems(t,(function(){i.footer&&i.buildSummaryItem(t,!0,o.footer),i._buildDocumentTail(r),i._buildUserCells(t,r),e&&e()}))},i.prototype.buildTreeItems=function(t,e){for(var i=this,o=this._exportOptions.showIndicatorRow(t),r=this.allItems,n=this._progressStep?this._indexItem+Math.min(this._progressStep,this._lastItem-this._indexItem):this._lastItem,s=this._indexItem;s<n;s++){var a=r?r[s]:t.getItem(s);if(this._indicatorNo=a instanceof Go&&o?a.dataRow:s+1,!(a instanceof In))throw new Error("Unkown tree item type");this.buildTreeRow(t,a),this._progressPos+=1,this._preparer.clearDataSpanned()}this.setProgress&&this.setProgress(t.handler,"process",this._progressMax,this._progressPos),this._indexItem=n,this._indexItem>=this._lastItem?e&&e():setTimeout((function(){i.buildTreeItems(t,e)}),0)},i.prototype.buildTreeRow=function(t,e){var o,r=this._workbook.currentSheet,n=this._preparer,s=n.dataRowCount,a=n.colCount,l=this._indents,h=e.level,u=this._currentRow;r.setFirstRow(this._currentRow);var c=this._startCol,d=t.displayOptions,p=t.layoutManager.getDataRowHeights(s),f=p.reduce((function(t,e){return t+e}),0)||e.height;isNaN(f)&&(f=(d.rowHeight||d.minRowHeight)*s),f=-1===f?-1:f>0?f/s:f;for(var _=[],g=0;g<s;g++)_.push(r.borrowRow(u+g,-1===f?-1:(p[g]||f)*i.LINE_HEIGHT));this.indicator&&this._buildIndicatorCell(t,r,_,this._indicatorNo,u,c++,s),this.checkBar&&this._buildCheckBarCell(t,r,_,e.checked,u,c++,s);var y=this._bodyCellStyle;for(g=0;g<s;g++){var m=_[g];m._row=g;var b=u+g,v=l>0?c+h-1:c,w=n.getItem(g,0),C=w.layout,x=C.firstColumn,I=this._columnStyles[x.$_hash],S=l>0?l-h+1:0;for(o=0;o<h-1;o++)m.addBlank(o+c,y);for(C.isProxy||w.spanned?m.addBlank(v,I):(this._buildValueCell(t,r,m,e,C,v,v),r.addMerge(b,v,C._dspan,C._defColSpan+S)),o=0;o<S;o++)m.addBlank(1+o+v,I);for(v=l>0?c+l:c,o=1;o<a;o++){var E=o+v;if(x=(C=(w=n.getItem(g,o)).layout).firstColumn,I=this._columnStyles[x.$_hash],C.isProxy||w.spanned)m.addBlank(E,I);else{var O=C.parent,R=O&&O.vertical,P=C.spanCallback,k=P?P(t.handler,C,e.index)-1:void 0;void 0===k&&(k=C.getDataSpan()-1);var T=0;if(k>0){var D=0,M=C.vindex+1;if(R)for(;D++<k&&D<s;){T+=O.getVisible(M++)._dspan,n.getItem(g+D,o).spanned=!0}else for(;D++<k&&o+D<a&&M<O.visibleCount;){T+=O.getVisible(M++)._cspan,n.getItem(g,o+D).spanned=!0}}this._buildValueCell(t,r,m,e,C,E,v),R?r.addMerge(b,E,C._dspan+T,C._cspan):r.addMerge(b,E,C._dspan,C._cspan+T)}}this._exportOptions.showLevelOutline&&r.setRowLevel(u,e.level)}this._currentRow+=s,r.setLastRow(this._currentRow-1)},i.prototype.prepare=function(){},i.prototype.finallize=function(){},i.prototype.save=function(){var e=this._multiOptions.zip||JSZip,i=function(i){var h=new e;if(i)for(var u=h.folder("xl/media"),c=Object.keys(i),d=0;d<c.length;d++){var p=i[c[d]];p.fileName&&p.buffer&&u.file(p.fileName,p.buffer)}var f=this._workbook.createParts();for(var _ in f){var g=f[_];g.indexOf('xmlns=""')>=0&&(g=g.replace(/ xmlns=""/g,"").replace(/xmlns=""/g,"")),h.file(_,g)}var y=r.compression||"DEFLATE",m=null==r.streamFiles||r.streamFiles,b={level:r.compressionLevel||6};if(a)h.generateAsync?h.generateAsync({type:"blob",compression:y,streamFiles:m,compressionOptions:b},(function(t){r.progressCallback&&r.progressCallback(null,"zip",100,t.percent)})).then((function(t){r.done&&"function"==typeof r.done&&r.done(),l.saveLocal(n,t,o)})):(r.done&&"function"==typeof r.done&&r.done(),l.saveLocal(n,h.generate({type:"blob",compression:y,streamFiles:m,compressionOptions:b}),o));else if(r.target===t.ExportTarget.STREAM)if(h.generateAsync)h.generateAsync({type:"base64",compression:y,streamFiles:m,compressionOptions:b},(function(t){r.progressCallback&&r.progressCallback(null,"zip",100,t.percent)})).then((function(t){r.done&&"function"==typeof r.done&&r.done(t)}));else{var v=h.generate({type:"base64",compression:y,streamFiles:m,compressionOptions:b});r.done&&"function"==typeof r.done&&r.done(v)}else h.generateAsync?h.generateAsync({type:"base64",compression:y,streamFiles:m,compressionOptions:b},(function(t){r.progressCallback&&r.progressCallback(null,"zip",100,t.percent)})).then((function(t){r.done&&"function"==typeof r.done&&r.done(),l.saveServer(n,t,r.url,o,s)})):(r.done&&"function"==typeof r.done&&r.done(),l.saveServer(n,h.generate({type:"base64",compression:y,streamFiles:m,compressionOptions:b}),r.url,o,s))}.bind(this),o=this.grid.doc,r=this._multiOptions,n=r.fileName,s=r.params,a="local"==r.target,l=this,h=this._workbook;if(e.support.blob||!a)if(h.hasImage){var u=h.getImageMap();h.downloader.bulkDownload=r.bulkImageDownload,h.downloader.executeDownLoad(this,u,i)}else i();else alert("not supported on this browser")},i.prototype._prepareCount=function(t,e){for(var i=0,o=0,r=e.length;o<r;o++){var n=void 0,s=e[o].grid;if(s instanceof pp)if(t.allItems&&this._rowGrouped){n=s.itemSource.getAllItems();var a=s.layoutManager.fixedItemCount;if(a>0)for(var l=0;l<a;l++)n.splice(l,0,s.getItem(l))}else t.pagingAllItems&&s.paged?n=s.itemSource.getPagingAllItems():t.onlyCheckedItems&&!s.rowGrouped&&(n=s.getCheckedItems(!1));else s instanceof Np&&t.allItems&&(n=s.getAllItems());i+=n?n.length:s.itemCount}return i},i.prototype._inheritStyles=function(t){for(var e={length:0},i=0,o=t.length;i<o;i++)t[i]&&ld.extendCssStyle(t[i],e);return e},i.prototype._prepareCommonStyles=function(t){var e,i=this,o=this._preparer.documentCssStyles,r=function(t){return ld.getSelectorStyle(o,t)},n=function(t){return ld.getSelectorStyles(o,t)},s=function(t){var e=[];return t.forEach((function(t){var i="string"==typeof t?r(t):t;i&&e.push(i)})),i._inheritStyles(e)},l=r("table"),h=s([l,r("tr"),r("td")]),u=s(["html",".rg-root"]),c=r(".rg-header"),d=r(".rg-footer"),p=r(".rg-header-summary"),f=r(".rg-body"),_=r(".rg-fixed-body"),g=s([".rg-root table",".rg-root .rg-table",".rg-root table tr",".rg-root .rg-table tr",".rg-root table tr td",".rg-root .rg-table tr td",".rg-root .rg-table td"]),y=s([g,".rg-header table",".rg-header .rg-table",".rg-header table tr",".rg-header .rg-table tr",".rg-header table tr td",".rg-header .rg-table tr td"]),m=s([g,".rg-footer table",".rg-footer .rg-table",".rg-footer table tr",".rg-footer .rg-table tr",".rg-footer table tr td",".rg-footer .rg-table tr td"]),b=s([g,".rg-header-summary table",".rg-header-summary .rg-table",".rg-header-summary table tr",".rg-header-summary .rg-table tr",".rg-header-summary table tr td",".rg-header-summary .rg-table tr td"]),v=s([g,".rg-body table",".rg-body .rg-table",".rg-body table tr",".rg-body .rg-table tr",".rg-body table tr td",".rg-body .rg-table tr td"]),w=s([g,".rg-fixed-body .rg-table",".rg-fixed-body .rg-table tr",".rg-fixed-body table tr",".rg-fixed-body .rg-table tr td",".rg-fixed-body table tr td",".rg-fixed-body .rg-data-row"]),C=s([g,".rg-rowgroup-bar .rg-table",".rg-rowgroup-bar .rg-table tr",".rg-rowgroup-bar table tr",".rg-rowgroup-bar .rg-table tr td",".rg-rowgroup-bar table tr td"]),x=s([g,".rg-rowgroup-head .rg-table",".rg-rowgroup-head .rg-table tr",".rg-rowgroup-head table tr",".rg-rowgroup-head .rg-table tr td",".rg-rowgroup-head table tr td"]),I=s([g,".rg-rowgroup-foot .rg-table",".rg-rowgroup-foot .rg-table tr",".rg-rowgroup-foot table tr",".rg-rowgroup-foot .rg-table tr td",".rg-rowgroup-foot table tr td"]),S=s([g,v]),E=r(".rg-header-cell"),O=r(".rg-footer-cell"),R=r(".rg-header-summary-cell"),P=r(".rg-data-cell"),k=r(".rg-rowgroup-header"),T=r(".rg-rowgroup-footer"),D=r(".rg-rowgroup-footer-cell"),M=s([u,".rg-rowgroup-head",h,x]),F=s([u,".rg-rowgroup-foot",h,I]),L=s([u,".rg-rowgroup-bar",h,".rg-rowgroup-bar-cell",C]),N=r(".rg-data-row"),$=r(".rg-fixed-row"),A=s([u,".rg-rowbarcontainer",h,g,".rg-rowbarcontainer .rg-table tr",".rg-rowbarcontainer table tr",".rg-rowbarcontainer .rg-table tr td",".rg-rowbarcontainer table tr td",".rg-rowbarcontainer .rg-table tr td.rg-rowindicator-cell"]),V=s([u,".rg-foot",h,g,".rg-foot .rg-table tr td",".rg-rowindicator-foot"]),B=s([u,".rg-sum",h,g,".rg-sum .rg-table tr td",".rg-rowindicator-sum"]);this._indicatorCellStyle=this._parseStyles(this._workbook,A),this._indicatorFootStyle=this._parseStyles(this._workbook,V),this._indicatorSumStyle=this._parseStyles(this._workbook,B);var j=s([u,".rg-rowbarcontainer",h,g,".rg-rowbarcontainer .rg-table tr",".rg-rowbarcontainer table tr",".rg-rowbarcontainer .rg-table tr td",".rg-rowbarcontainer table tr td.rg-checkbar-cell"]),H=s([u,".rg-foot",h,g,".rg-foot .rg-table tr td",".rg-checkbar-foot"]),G=s([u,".rg-sum",h,g,".rg-sum .rg-table tr td",".rg-checkbar-sum"]);this._checkBarCellStyle=this._parseStyles(this._workbook,j),this._checkBarFootStyle=this._parseStyles(this._workbook,H),this._checkBarSumStyle=this._parseStyles(this._workbook,G),e=this._headerCssStyle=s(a(a(a([u,c],n(t.header.styleName),!0),[h,E,y],!1),n(t.header.exportStyleName),!0)),this._headerCellStyle=this._parseStyles(this._workbook,e,!0);var W=this._exportOptions,U=W.footer===Qc,Y=W.headerSummary===Qc;this._footerCellStyles=[];for(var z=0;z<(U?t.footers.count:t.footers.visibleCount);z++)e=s(a(a([u,d],n((U?t.footers.get(z):t.footers.getVisible(z)).styleName),!0),[h,O,m],!1)),this._footerCellStyles.push(this._parseStyles(this._workbook,e,!0));this._summaryCellStyles=[];for(z=0;z<(Y?t.headerSummaries.count:t.headerSummaries.visibleCount);z++)e=s(a(a([u,p],n((Y?t.headerSummaries.get(z):t.headerSummaries.getVisible(z)).styleName),!0),[h,R,b],!1)),this._summaryCellStyles.push(this._parseStyles(this._workbook,e,!0));if(this._groupFooterCellStyles=[],t instanceof pp)for(z=0;z<t.rowGroup.footers.count;z++){var q=t.rowGroup.footers.get(z);e=s(a(a([u,T],n(q.exportStyleName||q.styleName),!0),[h,D,S],!1)),this._groupFooterCellStyles.push(this._parseStyles(this._workbook,e,!0))}e=this._cellCssStyle=s([u,f,l,v,N,P]),this._bodyCellStyle=this._parseStyles(this._workbook,e,!1),e=s([u,f,l,$,v,P]),this._bodyFixedCellStyle=this._parseStyles(this._workbook,e,!1),e=this._fixedCellCssStyle=s([u,_,l,N,w,P]),this._fixedCellStyle=this._parseStyles(this._workbook,e,!1),this._groupHeaderStyle=this._parseStyles(this._workbook,s([u,k])),this._groupFooterCellStyle=this._parseStyles(this._workbook,s([u,l,T,D,v])),this._indentHeadStyle=this._parseStyles(this._workbook,M),this._indentFootStyle=this._parseStyles(this._workbook,F),this._indentBarStyle=this._parseStyles(this._workbook,L),this._dynamicStyles={}},i.prototype._prepareMemo=function(t,e,i,o,r){"object"==typeof i?(i.author&&(e.author=i.author),void 0!==i.authorVisible&&(e.authorVisible=i.authorVisible),e.message=i.message,i.minWidth&&(e.minWidth=i.minWidth),i.maxWidth&&(e.maxWidth=i.maxWidth),e.fontSize=i.fontSize):"string"==typeof i&&(e.message=i),e.message&&e&&"object"==typeof e&&t.addMemo(o,r,e)},i.prototype._exportGridAsync=function(t,e,i,o){var r=this;if(void 0===o&&(o=null),i<e.exportGrids.length){var n=e.exportGrids[i];setTimeout((function(){r._exportGrid(t,n.options,(function(){o()}))}))}},i.prototype._exportGrid=function(t,e,i){var o=this,r=e.grid;this._preparer=new hd(r,e),this._exportOptions=e,this._indents=0;var n=this.indicator=e.indicatorVisible(r)?r.rowIndicator:null,s=this.checkBar=e.checkBarVisible(r)?r.checkBar:null;this.header=e.headerVisible(r),this.headerSummary=e.headerSummaryVisible(r),this.footer=e.footerVisible(r),this.indicatorHead=n&&Rt.toStr(n.headText),this.indicatorFoot=n&&Rt.toStr(n.footText),this.indicatorSummary=n&&Rt.toStr(n.sumText),this.checkBarHead=s&&Rt.toStr(s.headText),this.checkBarFoot=s&&Rt.toStr(s.footText),this.checkBarSummary=s&&Rt.toStr(s.sumText),this._sheetName=e.sheetName,this._workbook=t,this.allItems=null,this.buildBook((function(){o._preparer&&o._preparer.dispose(),i&&i()}))},i.prototype._changeFormatId=function(t,e,i){return t.changeFormatId(e,i)},i.prototype._parseStyles=function(t,e,i){return t.addStyle(e,!0,!0,!0,i)},i.prototype._extendStyles=function(t,e,i,o,r,n){return void 0===o&&(o=!0),t.extendStyle(e,i,o,r,n)},i.prototype.$_summaryStyleSet=function(t,e,i,o,r){var n=this._exportOptions,s=this._workbook,a=void 0;if(e){var l=e.exportStyleName||e.styleName,h=void 0;if(n.applyDynamicStyles)if(t instanceof Ys){var u=new Zn;l=(h=t.getCellStyle(t.getCell(e.column.layout),u.clear(),!1)).exportStyleName||h.styleName||l,o&&(o.text=h.text)}else if(t instanceof Ic){var c=this.grid,d=(u=new ns,c.rowGroup.getFooterStyleName(r||t.item));h=c.rowGroup.getFooterCellStyle(t,u.clear(),!1),o&&(o.text=h.text),l=(l=h.exportStyleName||h.styleName||l)?d+" "+l:d}var p=e.excelFormat,f=void 0;if(p||((p=h&&h.numberFormat||e.numberFormat)?p=ud.convertNumberFormat(p):(p=h&&h.datetimeFormat||e.datetimeFormat)&&(p=ud.convertDateFormat(p))),p&&((f=e.prefix)&&(p='"'+f+'"'+p),(f=e.suffix)&&(p=p+'"'+f+'"'),a=s.addNumberFormat(p)),l||void 0!==a){var _=this._preparer.documentCssStyles,g=ld.getSelectorStyles(_,l);if(e.$_owner.type){var y=e.$_owner.type+"=styleName="+l+"formatId="+a,m=this._dynamicStyles;return m[y]||(m[y]=this._extendStyles(s,i,this._inheritStyles(g),!0,a)),m[y]}return this._extendStyles(s,i,this._inheritStyles(g),!0,a)}}return i},i.prototype._buildColumns=function(e){for(var o,r,n,s=this._exportOptions,a=this._workbook,l=a.currentSheet,h=this._preparer,u=0;u<this._startCol;u++)l.addColumn(-1,s.xOffsetWidth/i.PIXELS_PER_CHAR,null);if(this.indicator&&(n=Math.round(e.rowIndicator.minWidth/i.PIXELS_PER_CHAR),l.addColumn(e.rowIndicator.$_hash,n,null)),this.checkBar&&(n=Math.round(e.checkBar.width/i.PIXELS_PER_CHAR),l.addColumn(e.checkBar.$_hash,n,null)),s.indenting&&(e instanceof pp&&this._rowGrouped&&!this._mergedGrouped?this._indents=e.rowGroup.getIndentCount(e.rowGroupLevels)-(e.rowGroup.expandedAdornments===t.RowGroupAdornments.SUMMARY?0:1):e instanceof Np&&(this._indents=this._rowLevels-1),this._indents>0))for(u=0;u<this._indents;u++)n=Math.max(this._indentWidth,1),l.addColumn(-1,n,null);var c=e.formatOptions;this._columnStyles={},this._columnFixedStyles={},this._columnFooterStyles={},this._columnSummaryStyles={},this._columnGroupFooterStyles={};var d=h.colCount,p=h.dataRowCount,f=!1;for(u=0;u<p;u++)for(var _=0;_<d;_++){var g=h.getItem(u,_).layout;if(o=g.firstColumn,0===u&&(n=Math.round(g._cellWidth/i.PIXELS_PER_CHAR),l.addColumn(o.$_hash,n,null,s.hiddenColumns.indexOf(o.name)>=0)),r=o.$_hash,!this._columnStyles[r]){var y=e.dataSource;if(o instanceof as){var m=this._textFormatId;if(o instanceof ls){var b=s.exportLink&&o.renderer&&o.renderer.type==sn.TYPE&&!o.excelFormat,v=y.getField(o.dataIndex),w=v?v.dataType:t.ValueType.TEXT;w===t.ValueType.NUMBER?m=this._numberFormatId:w===t.ValueType.DATETIME&&(m=this._dateFormatId);var C=o.excelFormat,x=void 0,I=!0;if(null!=C)m="number"==typeof C||parseInt(C)>0?parseInt(C):a.addNumberFormat(C);else if(b)m=0;else{if(w==t.ValueType.NUMBER){var S=null===o.numberFormat?void 0:o.numberFormat||s.numberFormat||c.numberFormat;if(S)if(S.match(/^[#0]([#0,.;aAfFcC ]+$|$)/))C=ud.convertNumberFormat(S);else{var E=Ye.numberFormats&&Ye.numberFormats[S];C=E&&E.excelFormat,I=!1}}else w==t.ValueType.DATETIME&&"string"==typeof(C=o.datetimeFormat||s.datetimeFormat||c.datetimeFormat)&&(C=ud.convertDateFormat(C));C&&(I&&((x=o.prefix)&&(C='"'+x+'"'+C),(x=o.suffix)&&(C=C+'"'+x+'"')),m=a.addNumberFormat(C))}}this._columnStyles[r]=this._changeFormatId(a,g.isFixed?this._fixedCellStyle:this._bodyCellStyle,m),this._columnFixedStyles[r]=this._changeFormatId(a,this._bodyFixedCellStyle,m),this._columnFooterStyles[r]=[],this._columnSummaryStyles[r]=[],this._columnGroupFooterStyles[r]=[];for(var O=s.footer===Qc,R=s.headerSummary===Qc,P=0;P<(O?e.footers.count:e.footers.visibleCount);P++){var k=O?e.footers.get(P):e.footers.getVisible(P),T=o.footers.get(k._childIndex),D=this._preparer.getFooterItem(u+P*p,_);this._columnFooterStyles[r][P]=this.$_summaryStyleSet(k,T,this._footerCellStyles[P],D)}for(P=0;P<(R?e.headerSummaries.count:e.headerSummaries.visibleCount);P++){var M=R?e.headerSummaries.get(P):e.headerSummaries.getVisible(P),F=o.headerSummaries.get(M._childIndex);D=this._preparer.getSummaryItem(u+P*p,_);this._columnSummaryStyles[r][P]=this.$_summaryStyleSet(M,F,this._summaryCellStyles[P],D)}if(e instanceof pp)for(P=0;P<e.rowGroup.footers.count;P++){var L=e.rowGroup.footers.get(P),N=o.groupFooters.get(L.index);this._columnGroupFooterStyles[r][P]=this.$_summaryStyleSet(null,N,this._groupFooterCellStyles[P],null)}}e instanceof pp&&(s.separateRows||s.onlyCheckedItems&&!e.rowGrouped||o instanceof ls&&o.layout.canMerge()&&(f=!0))}}this._columnMerged=f},i.prototype._buildTitleCommon=function(t,e,i){if(e&&e.visible){for(var o=this._currentRow,r=this._startCol,n=void 0,s=t.currentSheet,a=0;a<e.spaceTop;a++){n=s.addRow(o+a,void 0);for(var l=0;l<i;l++)n.addBlank(r+l,void 0)}o+=e.spaceTop;var h=e.message,u=void 0;if(e.styleName){var c=this._preparer.documentCssStyles;u=this._parseStyles(t,this._inheritStyles(ld.getSelectorStyles(c,e.styleName)),!0)}else u=this._parseStyles(t,e.cssStyle,!0);n=s.addRow(o,e.height);for(a=0;a<i;a++)0==a?(n.addText(r,h,u),s.addMerge(o,r,1,i)):n.addBlank(r+a,u);o++;for(a=0;a<e.spaceBottom;a++){n=s.addRow(o+a,void 0);for(l=0;l<i;l++)n.addBlank(r+l,void 0)}o+=e.spaceBottom,this._currentRow=o}},i.prototype._buildDocumentTitle=function(t){var e=this._exportOptions,i=t,o=this._preparer.colCount;this.indicator&&o++,this.checkBar&&o++,o+=Math.max(this._indents,0),this._buildTitleCommon(i,e.documentTitle,o),this._buildTitleCommon(i,e.documentSubtitle,o)},i.prototype._buildDocumentTail=function(t){var e=this._exportOptions,i=t,o=this._preparer.colCount;this.indicator&&o++,this.checkBar&&o++,o+=Math.max(this._indents,0),this._buildTitleCommon(i,e.documentTail,o)},i.prototype._buildIndicatorCell=function(t,e,i,o,r,n,s){var a=this._indicatorCellStyle;if((Array.isArray(i)?i[0]:i).addNumber(n,o,a),s>1){for(var l=1;l<s;l++)i[l].addBlank(n,a);e.addMerge(r,n,s,1)}},i.prototype._buildCheckBarCell=function(t,e,i,o,r,n,s){var a=this._checkBarCellStyle,l=Array.isArray(i)?i[0]:i,h=this._exportOptions.checkMark,u=this._exportOptions.unCheckMark;if(l.addText(n,o?h:u||"",a),s>1){for(var c=1;c<s;c++)i[c].addBlank(n,a);e.addMerge(r,n,s,1)}},i.prototype._buildValueCell=function(e,i,o,r,n,s,l){var h,u,c=this;void 0===l&&(l=0);var d,p,f=this._workbook,_=r.index>=0&&r.index<e.fixedOptions.rowCount,g=e.body,y=this._exportOptions,m=Ms.tempItem(e,r,n),b=n.firstColumn,v=g.getRowStyle(r,_,!0,y.applyDynamicStyles),w=v.exportStyleName||v.styleName,C=b.exportStyleName||b.styleName;y.applyDynamicStyles&&(p=g.getIndexCellStyle(m,!1));var x,I=p&&p.renderer||b.renderer,S=y.exportMemo,E=y.exportShape&&I&&(I.type===Xr.TYPE||I.type===qu.TYPE||I.type===hn.TYPE),O=(!n.isFixed&&_?this._columnFixedStyles[b.$_hash]:this._columnStyles[b.$_hash])||this._bodyCellStyle,R=!1;y.applyFixed&&(!e.isTree()&&_&&i.setFixedInfo(o.index+1,void 0),n.$_fixed&&i.setFixedInfo(void 0,s+1));var P=function(e,i,o,r){var s=!1;if(w||C||p||r){var a=void 0,l=void 0,h=[n.isFixed?c._fixedCellCssStyle:c._cellCssStyle];if(p&&"object"==typeof p){var u=p;a="string"==typeof(a=p.exportStyleName||p.styleName||C)?a:void 0;var d=void 0;if(l=p.excelFormat)s=!0;else if(i==t.ValueType.NUMBER?l=(d=u.numberFormat)?ud.convertNumberFormat(d):void 0:i==t.ValueType.DATETIME&&(l=(d=u.datetimeFormat)?ud.convertDateFormat(d):void 0),l){s=!0;var _=u.prefix;_&&(l='"'+_+'"'+l);var g=u.suffix;g&&(l=l+'"'+g+'"')}}else a="string"==typeof p?p:void 0;var m=c._preparer.documentCssStyles,I=c._dynamicStyles,S=b.$_hash+"="+w+"="+JSON.stringify(v.style)+"="+C+"="+a+"="+JSON.stringify(null==p?void 0:p.style)+"="+l+"="+JSON.stringify(r)+"="+!0;if(I[S])e=I[S];else{var E=[];if(w){var O=w.trim().split(" ");Array.prototype.push.apply(E,O),n.isFixed&&O.forEach((function(t){E.push("rg-fixed-body .".concat(t))}))}if(v.style){var R=document.createElement("span").style;R.cssText=Rt.objectToCssText(v.style),h.push(R)}C&&Array.prototype.push.apply(E,C.trim().split(" ")),a&&Array.prototype.push.apply(E,a.trim().split(" ")),h.push.apply(h,ld.getSelectorStyles(m,E)),y.applyDynamicStyles&&p.style&&(c._css.cssText=Rt.objectToCssText(p.style),h.push(c._css));var P=void 0;l&&(P=f.addNumberFormat(l)),x=c._inheritStyles(h),o&&(x["text-decoration-line"]=x["text-decoration-line"]||"underline",x.color="blue");var k=c._getTextWrap(x,!1),T=x.whiteSpaceCollapse||x["white-space-collapse"]||"";k=k||T.indexOf("preserve")>=0,e=c._extendStyles(f,e,x,k,P,r),c._dynamicStyles[S]=e}}return{es:e,hasFormat:s}};if(b.blankWhenExport)o.addBlank(s,O);else if(b instanceof ls){var k=b.dataIndex,T=p&&p.cellProtectProps||b.cellProtectProps,D=e.dataSource.getField(k),M=y.exportLink&&!b.excelFormat&&b.renderer&&b.renderer.type==sn.TYPE,F=y.exportTemplate&&b.renderer&&b.renderer.type===_n.TYPE,L=!1!==y.exportImage&&I&&(I.type===Zr.TYPE||I.type===Qr.TYPE),N=(L=L&&(y.exportImage?!1!==I.exportImage:!!I.exportImage))&&I.type===Qr.TYPE,$=L&&I.type===Zr.TYPE,A=void 0;if(D){var V=r.getData(k),B=p&&p.text;switch(A=null!=B?void 0:b.displayCallback,O=(h=P(O,D.dataType,M,T)).es,R=h.hasFormat,D.dataType){case"number":if(null!=B?V=B:(y.numberCallback||A)&&(V=y.numberCallback?y.numberCallback(r.index,b.name,V,e.handler,m.proxy()):A(e.handler,m.proxy(),V)),!R&&!b.excelFormat&&y.trailPointZeroFormat&&V===parseInt(V)){var j=ud.convertNumberFormat(y.trailPointZeroFormat);O=this._changeFormatId(f,O,f.addNumberFormat(j))}var H=b.excelFormulaExprStatement,G=void 0;if(H){var W=this._excelFormulaRuntime;W.setItemIndex(o.index,l),W.setColumns(this._preparer._dataCells[o._row]),G=H.evaluate(W)}if(null!=V&&E){if(I.type===Xr.TYPE){this._barRenderer?(this._barRenderer.initOptions(),this._barRenderer.assignFrom(I)):this._barRenderer=e.delegate.createRenderer(Xr.TYPE,I,null);var U=i.getColumnWidth(s),Y=this._barRenderer,z=this._preparer.documentCssStyles,q={barStyle:this._inheritStyles(ld.getSelectorStyles(z,Y.barStyle)),negativeStyle:this._inheritStyles(ld.getSelectorStyles(z,Y.negativeStyle))};o.addBar(s,V,U,Y.origin,q,Y.baseValue,Y.minimum,Y.maximum,O);break}if(I.type===hn.TYPE){this._signalRenderer?(this._signalRenderer.initOptions(),this._signalRenderer.assignFrom(I)):this._signalRenderer=e.delegate.createRenderer(hn.TYPE,I,null);U=i.getColumnWidth(s),Y=this._signalRenderer,z=this._preparer.documentCssStyles,q={barStyle:this._inheritStyles(ld.getSelectorStyles(z,Y.barStyle)),inactiveStyle:this._inheritStyles(ld.getSelectorStyles(z,Y.inactiveStyle))};var K=[isNaN(Y.startRate)?50:Y.startRate,isNaN(Y.endRate)?100:Y.endRate],X=Y.barCount||10;o.addSignal(s,V,U,K,X,Y.absoluteValue,Y.minimum,Y.maximum,q,O);break}}null!=V||G?"number"==typeof V?o.addNumber(s,V,O,G):o.addText(s,V,O):o.addBlank(s,O);break;case"datetime":case"date":null!=B?o.addText(s,B,O):V?y.datetimeCallback||A?(V=y.datetimeCallback?y.datetimeCallback(r.index,b.name,V,e.handler,m.proxy()):A(e.handler,m.proxy(),V))instanceof Date?o.addDate(s,V,O):o.addText(s,V,O):o.addDate(s,V,O):y.nullDateText?o.addText(s,y.nullDateText,O):o.addBlank(s,O);break;case"boolean":null!=B?o.addText(s,B,O):y.booleanCallback||A?"boolean"==typeof(V=y.booleanCallback?y.booleanCallback(r.index,b.name,V,e.handler,m.proxy()):A(e.handler,m.proxy(),V))?o.addBool(s,V,O):o.addText(s,V,O):y.booleanFormat?(V=We.getFormatter(y.booleanFormat).formatValue(V),o.addText(s,V,O)):o.addBool(s,V,O);break;default:if(d=V||"",null!=B)d=B;else if(y.lookupDisplay&&(b.labelField||b.lookupDisplay))d=br.getText(r,b);else if(F){this._templateRenderer?this._templateRenderer.clearAndAssignFrom(b.renderer):this._templateRenderer=e.delegate.createRenderer(_n.TYPE,b.renderer,null);var Z=this._templateRenderer._parser,J=b.renderer.callback,Q=e.body.getCell(m),tt=J?J.call(this,e.handler,Q,-1,-1):Z.realize(e,Q,null,this._templateRenderer.valueCallback);d=tt?tt.replace(/<br[\s/]*>/gi,"\n").replace(/(<([^>]+)>)/gi,""):""}else if(D.dataType===t.ValueType.OBJECT&&"object"==typeof V)if(y.objectCallback)d=y.objectCallback(r.index,b.name,V,e.handler,m.proxy());else{var et=b.objectKey||b.objectCallback,it=et?b.objectKey:D.objectKey,ot=et?b.objectCallback:D.objectCallback;d=ot&&"function"==typeof ot?ot(D.orgFieldName,r.dataRow,V):it&&V.hasOwnProperty(it)?V[it]:JSON.stringify(V)}else null!=V&&(d=b.textFormatter?b.textFormatter.getText(V):d);if("number"==typeof(d=y.textCallback?y.textCallback(r.index,b.name,d,e.handler,m.proxy()):A&&!b.textFormatter?A(e.handler,m.proxy(),V):d))o.addNumber(s,d,O);else if(d&&M){Q=e.body.getCell(m);if(this._linkRenderer?(this._linkRenderer.initOptions(),this._linkRenderer.assignFrom(b.renderer)):this._linkRenderer=e.delegate.createRenderer(sn.TYPE,b.renderer,null),Y=this._linkRenderer){var rt=Y.$_getUrl(e,Q);o.addLink(s,d,rt,O)}else o.addText(s,d,O)}else if($){Q=e.body.getCell(m);this._imageRenderer?(this._imageRenderer.initOptions(),this._imageRenderer.assignFrom(I)):this._imageRenderer=e.delegate.createRenderer(Zr.TYPE,I,null);var nt=(Y=this._imageRenderer).$_getImageUrl(e,Q);U=i.getColumnWidth(s);nt?o.addImage(s,d,U,t.IconLocation.CENTER,nt,O,Y.imageWidth,Y.imageHeight):o.addText(s,d,O)}else if(N){Q=e.body.getCell(m);this._iconRenderer?(this._iconRenderer.initOptions(),this._iconRenderer.assignFrom(I)):this._iconRenderer=e.delegate.createRenderer(Qr.TYPE,I,null);nt=(Y=this._iconRenderer).$_getIconUrl(e,Q),U=i.getColumnWidth(s);nt?o.addImage(s,d,U,Y.iconLocation,nt,O,Y.iconWidth,Y.iconHeight):o.addText(s,d,O)}else d?o.addText(s,d,O):o.addBlank(s,O)}}else o.addBlank(s,O)}else if(b instanceof us){O=P(O,t.ValueType.TEXT,!1,p&&p.cellProtectProps||b.cellProtectProps).es;var st=p&&null!=p.text?p.text:b.value;o.addText(s,st,O)}else if(b instanceof hs){var at=b.renderer,lt=at&&(at.type==qu.TYPE||at.type==zu.TYPE||at.type==kl.SERIES_TYPE);if(at&&at.type&&!lt){var ht=this._preparer;y.exportSeriesColumn&&Tl.interfaced(at)&&ht.sparkColumns[b.$_hash]?o.addSparkLine(s,l,ht.sparkColumns[b.$_hash],O):o.addBlank(s,O)}else{this._seriesCell.setIndex(m);var ut=this._seriesCell.value;if(ut&&ut.some((function(t){return!isNaN(t)}))){var ct=b.valueSeparator;b.actualTarget&&at.type==zu.TYPE?ct=at.separator:!at||at.type&&at.type!=kl.SERIES_TYPE||(ct=at.valueSeparator);var dt=this._seriesCell.getDisplayText(e,ct);if(E){this._bulletRenderer?(this._bulletRenderer.initOptions(),this._bulletRenderer.assignFrom(I)):this._bulletRenderer=e.delegate.createRenderer(qu.TYPE,I,null);U=i.getColumnWidth(s),Y=this._bulletRenderer,z=this._preparer.documentCssStyles;var pt={background:this._inheritStyles(ld.getSelectorStyles(z,Y.backgroundStyle)),actual:this._inheritStyles(ld.getSelectorStyles(z,Y.actualStyle)),target:this._inheritStyles(ld.getSelectorStyles(z,Y.targetStyle))};o.addActualTarget(s,a(a([],ut,!0),[at.maxValue],!1),U,pt,Y.actualHeight,Y.targetWidth,O)}else o.addText(s,dt,O)}else o.addBlank(s,O)}}if(S){var ft={author:S.author||"RealGrid",message:"",fontSize:10,authorVisible:void 0===S.authorVisible||S.authorVisible,minWidth:S.minWidth?S.minWidth:128,maxWidth:S.maxWidth?S.maxWidth:400},_t=(D=e.dataSource.getFieldIndex(null===(u=m.dataColumn)||void 0===u?void 0:u.fieldName),S.validation&&e.validationManager.cellList[r.dataRowId]),gt=_t&&_t[D];gt&&gt.column===b.name&&(ft.message=gt.message);var yt=(J=S.callback)&&J(e.handler,r.itemIndex,r.dataRow,b.name,ft);this._prepareMemo(i,ft,yt,s,o.index)}return O},i.prototype._buildUserCells=function(e,o){var r=this,n=this._exportOptions,s=o.currentSheet,a=n.userCellsCallback,l=n.userCells||a&&a(e.handler,s.rowCount,s.colCount,s.name);if(Rt.isArray(l)){var h=this._dynamicStyles,u=this._preparer.documentCssStyles,c=s.workbook.styles._styles._items[0],d=this._css;l.forEach((function(e){var a,l,p;if(e.format&&(p=o.addNumberFormat(e.format)),e.styleName){var f=e.styleName;if(a="userCells;styleName=".concat(f,";formatId=").concat(p),!(l=h[a])){var _=ld.getSelectorStyles(u,f),g=r._inheritStyles(_);l=h[a]=r._parseStyles(o,g,!!g.whiteSpace&&null),p&&(l._formatId=p)}}else if(e.styles){var y=Rt.objectToCssText(e.styles);a="userCells;styleName=".concat(y,";formatId=").concat(p),(l=h[a])||(d.cssText=y,l=h[a]=r._parseStyles(o,d,!!d.whiteSpace&&null),p&&(l._formatId=p))}else p&&(a="userCells;styleName=".concat(void 0,";formatId=").concat(p),(l=h[a])||(l=h[a]=r._extendStyles(o,c,{},!1,p)));l=l||c;for(var m=e.mergeRow||1,b=e.mergeCol||1,v=Rt.makeArray(e.heights,!0),w=Rt.makeArray(e.widths,!0),C=0;C<b;C++){var x=w[C]||e.width;if(x){var I=e.col+C+1;s.getColumn(I)||(x=Math.ceil(x/i.PIXELS_PER_CHAR),s.addColumn(-1,x,null,!1,I))}}for(var S=0;S<m;S++)for(var E=0;E<b;E++){var O=e.cellMemo,R=s.borrowRow(e.row+S,v[S]||e.height||-1);if(0===S&&0===E){var P=null==e.value?"":e.value,k=s.getColumnWidth(e.col);if(e.image&&!1!==n.exportImage){var T=void 0;T="string"==typeof e.image?{url:e.image}:e.image,R.addImage(e.col,P,k,T.location||t.IconLocation.CENTER,T.url,l,T.width,T.height)}else switch(typeof P){case"string":R.addText(e.col,P,l);break;case"number":R.addNumber(e.col,P,l,e.formula);break;case"boolean":R.addBool(e.col,null==P?null:P,l);break;default:P instanceof Date&&R.addDate(e.col,P,l)}}else R.addBlank(e.col+E,l);if(O){var D=void 0===n.exportMemo.authorVisible||n.exportMemo.authorVisible,M={author:n.exportMemo.author||"RealGrid",message:"",fontSize:10,authorVisible:D,minWidth:128,maxWidth:400};r._prepareMemo(s,M,O,e.col,R.index)}}m*b>1&&s.addMerge(e.row,e.col,m,b)}))}},i.prototype._getTextWrap=function(t,e){var i=t.whiteSpace||t["white-space"]||t.textWrap||t["text-wrap"]||t["text-wrap-mode"];return null==i?e:!("none"===i||"nowrap"===i)},i.CSS_HEAD="rg-header",i.CSS_FOOT="rg-footer",i.CSS_BODY="rg-body",i.CSS_FIXED="rg-fixed-body",i.CSS_TABLE="rg-table",i.CSS_ROWGROUP_BAR="rg-rowgroup-bar",i.CSS_ROWGROUP_HEAD="rg-rowgroup-head",i.CSS_ROWGROUP_FOOT="rg-rowgroup-foot",i.CSS_HEAD_CELL="rg-header-cell",i.CSS_INDICATOR="rg-rowindicator-cell",i.CSS_CHECK="rg-checkbar-cell",i.CSS_DATA_ROW="rg-data-row",i.PIXELS_PER_CHAR=7,i.LINE_HEIGHT=.75,i}(qc),Bp=function(){function t(){}return t.getColumn=function(t,e){if(e){if("string"==typeof e)return t.columnByName(e);if(e instanceof ss)return e;if(e.$_hash)return t.columnByHash(e.$_hash);if(e.name)return t.columnByName(e.name)}return null},t.getItemProxy=function(e,i){var o=e.parent,r={type:void 0,id:e.id,parentId:null==o?-1:o.id,itemIndex:e.index,index:e.index,dataRow:-1,checked:e.checked,checkable:e.checkable,indeterminate:e.indeterminate};return i&&(r.childIndex=e.childIndex,r.level=e.level),e instanceof Go?(r.type="row",r.dataRow=e.dataRow):e instanceof Wo?(r.count=e.children.length,r.expanded=e.expanded,e instanceof Uo||e instanceof Hr?(r.type="group",r.footerId=e.footer?e.footer.id:-1,e instanceof zo||i&&(r.firstItem=t.getItemProxy(e.firstItem),r.firstDataItem=t.getItemProxy(e.firstDataItem),r.dataRows=e.getRows())):e instanceof In&&(r.type="tree",r.dataRow=e.dataRow?e.dataRow:-1)):e instanceof Yo&&(r.type="footer"),r},t.getItemIndices=function(t){for(var e=[],i=0,o=t.length;i<o;i++)e.push(t[i].index);return e},t.getValues=function(t,e){var i={},o=e.dataSource;if(t.isItemEditing(e))return(i=e.getRowObject()).__rowId=e.dataRow,i;if(e.dataRow>=0){if(e instanceof In){var r=e.row,n=r.values;i.__rowId=r.rowId;for(var s=0,a=o.fieldCount;s<a;s++){i[o.getOrgFieldName(s)]=n[s]}}else(i=o.getRowObject(e.dataRow)).__rowId=e.dataRow;return i}return null},t.getDisplayValues=function(t,e,i){var o=t.getDataColumns();if(e){for(var r=i?{}:e.getRowObject(),n=new ns,s=0,a=o.length;s<a;s++){var l=o[s],h=t.body.getCellAt(e,l);"hiddenDataCell"===h.name?h.setItem(e):h.setIndex2(t,e.index,l),n.clear(),n.assign(l),t.body.getCellStyle(h,n);var u=n.toFormatter(null);r[i?l.name:l.fieldName]=br._getDisplayText(t,e,l,e.getData(l.dataIndex),u)}return r}},t.setValues=function(t,e,i,o){var r,n,s,a=e.dataSource,l=a.fieldCount;if(t.isItemEditing(e)){if(e)e.values=i;else for(var h=0;h<l;h++){var u=a.getOrgFieldName(h);i.hasOwnProperty(u)&&e.setData(h,i[u])}}else if((s=e.dataRow)>=0)if(a instanceof bo){var c=a.rowById(s);if(c){if(r=c.values||[],Array.isArray(i)){h=0;for(var d=i.length;h<d&&!(n=!a.getField(h).equalValues(r[h],i[h]));h++);}else for(h=0;h<l;h++){u=a.getOrgFieldName(h);if(i.hasOwnProperty(u)&&(n=!a.getField(h).equalValues(r[h],i[u])))break}if(!n)return;c.update(i,o)}}else if(a instanceof Fi){if(r=a.getRow(s),Array.isArray(i))for(h=0,d=i.length;h<d&&!(n=!a.getField(h).equalValues(r[h],i[h]));h++);else for(h=0;h<l;h++){u=a.getOrgFieldName(h);if(i.hasOwnProperty(u)&&(n=!a.getField(h).equalValues(r[h],i[u])))break}if(!n)return;a.updateRow(s,i,o)}},t}(),jp=function(){function e(t,e,i){this.onCurrentChanging=null,this.onCurrentChanged=null,this.onCurrentRowChanged=null,this.onValidateColumn=null,this.onValidateRow=null,this.onValidationFail=null,this.onColumnCheckedChanged=null,this.onMenuItemClicked=null,this.onContextMenuPopup=null,this.onContextMenuItemClicked=null,this.onCellButtonClicked=null,this.onScrollToBottom=null,this.onTopIndexChanged=null,this.onTopIndexChanging=null,this.onLeftPosChanged=null,this.onRowsDeleting=null,this.onRowInserting=null,this.onSelectionCleared=null,this.onSelectionChanged=null,this.onSelectionAdded=null,this.onSelectionEnded=null,this.onShowEditor=null,this.onShowEditCommand=null,this.onHideEditor=null,this.onEditChange=null,this.onGetEditValue=null,this.onEditCommit=null,this.onEditCanceled=null,this.onItemEditCanceled=null,this.onItemEditCancel=null,this.onEditSearch=null,this.onSearchCellButtonClick=null,this.onCellEdited=null,this.onEditRowChanged=null,this.onEditRowPasted=null,this.onRowsPasted=null,this.onCellPasting=null,this.onItemChecked=null,this.onItemAllChecked=null,this.onErrorClicked=null,this.onSorting=null,this.onSortingChanged=null,this.onFiltering=null,this.onFilteringChanged=null,this.onWheel=null,this.onKeyDown=null,this.onKeyPress=null,this.onKeyUp=null,this.onShowTooltip=null,this.onShowHeaderTooltip=null,this.onColumnPropertyChanged=null,this.onLayoutPropertyChanged=null,this.onGridActivated=null,this.onGridFocusChanged=null,this.onCopy=null,this.onCut=null,this.onPaste=null,this.onPasted=null,this.onItemsChecked=null,this.onCellClicked=null,this.onCellDblClicked=null,this.onCellItemClicked=null,this.onCommandStackChanged=null,this.onDataLoadComplated=null,this.onInitialized=null,this.onLayoutExpanding=null,this.onLayoutExpanded=null,this.onLayoutCollapsing=null,this.onLayoutCollapsed=null;try{this._view=this._createView(t,e,i),this._listener=this._createListener(this._view)}catch(t){throw t}}return e.prototype.dispose=function(){return this._view.dispose(),this._view=null,this._container=this._container&&this._container.dispose(),this._listener=this._listener&&this._listener.dispose()},Object.defineProperty(e.prototype,"summaryMode",{get:function(){return this._view.itemSource.summaryMode},set:function(t){this._view.itemSource.summaryMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hideDeletedRows",{get:function(){return this._view.itemSource.hideDeleted},set:function(t){this._view.itemSource.hideDeleted=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sortMode",{get:function(){return this._view.itemSource.sortMode},set:function(t){this._view.itemSource.sortMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"undoable",{get:function(){return this._view.undoable},set:function(t){this._view.undoable=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"undoing",{get:function(){return this._view.undoing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"redoing",{get:function(){return this._view.redoing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._view.container.disabled},set:function(t){this._view.container.disabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollBarWidth",{get:function(){return this._view.scrollBarWidth},set:function(t){this._view.scrollBarWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollBarHeight",{get:function(){return this._view.scrollBarHeight},set:function(t){this._view.scrollBarHeight=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fixedOptions",{get:function(){return this._view.fixedOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayOptions",{get:function(){return this._view.displayOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"formatOptions",{get:function(){return this._view.formatOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editOptions",{get:function(){return this._view.editOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editorOptions",{get:function(){return this._view.editorOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"copyOptions",{get:function(){return this._view.copyOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pasteOptions",{get:function(){return this._view.pasteOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sortingOptions",{get:function(){return this._view.sortingOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filteringOptions",{get:function(){return this._view.filteringOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mobileOptions",{get:function(){return this._view.mobileOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataDropOptions",{get:function(){return this._view.dataDropOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowIndicator",{get:function(){return this._view.rowIndicator},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stateBar",{get:function(){return this._view.stateBar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checkBar",{get:function(){return this._view.checkBar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this._view.header},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"footer",{get:function(){return this._view.footer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"footers",{get:function(){return this._view.footers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerSummary",{get:function(){return this._view.headerSummary},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerSummaries",{get:function(){return this._view.headerSummaries},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filterPanel",{get:function(){return this._view.filterPanel},enumerable:!1,configurable:!0}),e.prototype.ping=function(t){this._view instanceof zc&&alert(t)},e.prototype.refresh=function(t){this._view.refreshView(t,!t)},e.prototype.beginUpdate=function(){this._view.beginUpdate()},e.prototype.endUpdate=function(t){this._view.endUpdate(t)},e.prototype.isVisible=function(){return this._view.visible},e.prototype.setVisible=function(t){this._view.visible=t},e.prototype.getItemCount=function(){return this._view.itemCount},e.prototype.getDataRow=function(t){var e=this._view.getItem(t);return e?e.dataRow:-1},e.prototype.getRowsOfItems=function(t){var e=[];if(t)for(var i=0,o=t.length;i<o;i++){var r=this._view.getItem(t[i]);r&&e.push(r.dataRow)}return e},e.prototype.getItemIndex=function(t){return this._view.getItemIndexOfRow(t)},e.prototype.getItemsOfRows=function(t){return this._view.getItemIndicesOfRows(t)},e.prototype.restoreColumns=function(){this._view.restoreColumns()},e.prototype.getDataSource=function(){return this._dataDelegator},e.prototype.setDataSource=function(t){this._dataDelegator=t,this._dataProvider=t?t.getProvider():null,this._view.dataSource=this._dataProvider},e.prototype.getOptions=function(){return{summaryMode:this._view.itemSource.summaryMode.toString(),hideDeletedRows:this._view.itemSource.hideDeleted,sortMode:this._view.itemSource.sortMode.toString(),fixed:this.fixedOptions,display:this.displayOptions,format:this.formatOptions,edit:this.editOptions,editor:this.editorOptions,copy:this.copyOptions,paste:this.pasteOptions,sorting:this.sortingOptions,filtering:this.filteringOptions,dataDrop:this.dataDropOptions,rowIndicator:this.rowIndicator,checkBar:this.checkBar,stateBar:this.stateBar,header:this.header,footer:this.footer,footers:this.footers,headerSummary:this.headerSummary,headerSummaries:this.headerSummaries}},e.prototype.setOptions=function(t){t&&(this._view.setOptions(t),t.fixed&&this.setFixedOptions(t.fixed),t.display&&this.setDisplayOptions(t.display),t.format&&this.setFormatOptions(t.format),t.edit&&this.setEditOptions(t.edit),t.editor&&this.setEditorOptions(t.editor),t.copy&&this.setCopyOptions(t.copy),t.paste&&this.setPasteOptions(t.paste),t.sorting&&this.setSortingOptions(t.sorting),t.filtering&&this.setFilteringOptions(t.filtering),t.dataDrop&&this.setDataDropOptions(t.dataDrop),t.rowIndicator&&this.setRowIndicator(t.rowIndicator),t.checkBar&&this.setCheckBar(t.checkBar),t.stateBar&&this.setStateBar(t.stateBar),t.header&&this.setHeader(t.header),t.footer&&this.setFooter(t.footer),t.footers&&this.setFooters(t.footers),t.headerSummary&&this.setHeaderSummary(t.headerSummary),t.headerSummaries&&this.setHeaderSummaries(t.headerSummaries),t.filterPanel&&this.setFilterPanel(t.filterPanel))},e.prototype.getFixedOptions=function(){return this._view.fixedOptions.toProxy()},e.prototype.setFixedOptions=function(t){this._view.fixedOptions.assignFrom(t)},e.prototype.getDisplayOptions=function(){return this._view.displayOptions.toProxy()},e.prototype.setDisplayOptions=function(t){this._view.displayOptions.assignFrom(t)},e.prototype.getFormatOptions=function(){return this._view.formatOptions.toProxy()},e.prototype.setFormatOptions=function(t){this._view.formatOptions.assignFrom(t)},e.prototype.getEditOptions=function(){return this._view.editOptions.toProxy()},e.prototype.setEditOptions=function(t){this._view.editOptions.assignFrom(t)},e.prototype.getEditorOptions=function(){return this._view.editorOptions.toProxy()},e.prototype.setEditorOptions=function(t){this._view.editorOptions.assignFrom(t)},e.prototype.getCopyOptions=function(){return this._view.copyOptions.toProxy()},e.prototype.setCopyOptions=function(t){this._view.copyOptions.assignFrom(t)},e.prototype.getPasteOptions=function(){return this._view.pasteOptions.toProxy()},e.prototype.setPasteOptions=function(t){this._view.pasteOptions.assignFrom(t)},e.prototype.getSortingOptions=function(){return this._view.sortingOptions.toProxy()},e.prototype.setSortingOptions=function(t){this._view.sortingOptions.assignFrom(t)},e.prototype.getFilteringOptions=function(){return this._view.filteringOptions.toProxy()},e.prototype.setFilteringOptions=function(t){this._view.filteringOptions.assignFrom(t)},e.prototype.getMobileOptions=function(){return this._view.mobileOptions.toProxy()},e.prototype.setMobileOptions=function(t){this._view.mobileOptions.assignFrom(t)},e.prototype.getDataDropOptions=function(){return this._view.dataDropOptions.toProxy()},e.prototype.setDataDropOptions=function(t){this._view.dataDropOptions.assignFrom(t)},e.prototype.getRowIndicator=function(){return this._view.rowIndicator.toProxy()},e.prototype.setRowIndicator=function(t){this._view.rowIndicator.assignFrom(t)},e.prototype.getStateBar=function(){return this._view.stateBar.toProxy()},e.prototype.setStateBar=function(t){this._view.stateBar.assignFrom(t)},e.prototype.getCheckBar=function(){return this._view.checkBar.toProxy()},e.prototype.setCheckBar=function(t){this._view.checkBar.assignFrom(t)},e.prototype.getHeader=function(){return this._view.header.toProxy()},e.prototype.setHeader=function(t){this._view.header.assignFrom(t)},e.prototype.getFooter=function(){return this._view.footer.toProxy()},e.prototype.setFooter=function(t){this._view.footer.assignFrom(t)},e.prototype.getFooters=function(){return this._view.footers.toProxy()},e.prototype.setFooters=function(t){this._view.footers.assignFrom(t)},e.prototype.getHeaderSummary=function(){return this._view.headerSummary.toProxy()},e.prototype.setHeaderSummary=function(t){this._view.headerSummary.assignFrom(t)},e.prototype.getHeaderSummaries=function(){return this._view.headerSummaries.toProxy()},e.prototype.setHeaderSummaries=function(t){this._view.headerSummaries.assignFrom(t)},e.prototype.setFilterPanel=function(t){this._view.filterPanel.assignFrom(t)},e.prototype.setCellStyleCallback=function(t){this._view.body.cellStyleCallback=t},e.prototype.setRowStyleCallback=function(t){this._view.body.rowStyleCallback=t},e.prototype.addUserCellStyle=function(t,e,i){this._view.body.addUserCellStyle(t,e,i)},e.prototype.removeUserCellStyle=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this._view.body.removeUserCellStyle(t,e)},e.prototype.getUserCellStyle=function(t,e){return this._view.body.getUserCellStyle(t,e)},e.prototype.setAriaLabelCallback=function(t){this._view.body.ariaLabelCallback=t},e.prototype.orderBy=function(e,i,o){if(e){var r=[],n=[],s=[];e=Rt.makeArray(e,!1),i=Rt.makeArray(i,!0),o=Rt.makeArray(o,!0);for(var a=0,l=e.length;a<l;a++)r.push(this._view.columnByField(e[a])),n.push(i[a]||t.SortDirection.ASCENDING),s.push(o[a]||t.SortCase.SENSITIVE);this._view.orderBy(r,n,s)}else this._view.orderBy([],[],[])},e.prototype.getSortedFields=function(){var t,e=this._view,i=e.getSortFields(),o=e.getSortDirections();if(i&&(t=i.length)>0){for(var r=this._dataProvider,n=[],s=0;s<t;s++)n.push({fieldName:r.getFieldName(i[s]),orgFieldName:r.getOrgFieldName(i[s]),direction:o[s]});return n}return null},e.prototype.setFocus=function(){this._view.setFocus(null,!0)},e.prototype.getColumn=function(t){return this._view.getColumn(t)},e.prototype.getColumns=function(){for(var t=this._view.columnCount,e=[],i=0;i<t;i++)e.push(this._view.getColumn(i));return e},e.prototype.setColumns=function(t){this._view.setColumns(t)},e.prototype.addColumn=function(t,e){return this._view.addColumn(t,e)},e.prototype.removeColumn=function(t){return this._view.removeColumn(t)},e.prototype.addLayout=function(t,e){return this._view.addLayout(t,e)},e.prototype.removeLayout=function(t){this._view.removeLayout(t)},e.prototype.layoutByColumn=function(t){return this._view.layoutByColumn(t)},e.prototype.layoutByName=function(t){return this._view.layoutByName(t)},e.prototype.getColumnNames=function(t,e){return this._view.collectColumnNames(t,e)},e.prototype.columnByName=function(t){return this._view.columnByName(t)},e.prototype.columnByField=function(t){return this._view.columnByField(t)},e.prototype.columnByTag=function(t){return this._view.columnByTag(t)},e.prototype.columnsByTag=function(t){return this._view.columnsByTag(t)},e.prototype.getColumnProperty=function(t,e){var i=Bp.getColumn(this._view,t);if(i&&e)return i[e]instanceof Lt?i[e].toProxy():i[e]},e.prototype.setColumnProperty=function(t,e,i){var o=Bp.getColumn(this._view,t);o&&e&&(o[e]instanceof Lt?o[e].assignFrom(i):o[e]=i)},e.prototype.setColumn=function(t){var e=Bp.getColumn(this._view,t);e&&e.assignFrom(t)},e.prototype.getDisplayColumns=function(){return this._view.collectColumns(!0,!0,!0)},e.prototype.setColumnLayout=function(t){("string"!=typeof t||(t=this._view.findColumnLayout(t)))&&this._view.setCellLayout(t)},e.prototype.getLayoutByColumn=function(t){var e=this._view.layoutByColumn(t);return e?e.toProxy():null},e.prototype.saveColumnLayout=function(){return this._view.activeCellLayout.getLayout.apply(this._view.activeCellLayout,arguments)},e.prototype.linearizeColumns=function(t){this._view.linearizeColumns(t)},e.prototype.registerColumnLayouts=function(t){this._view.registerColumnLayouts(t)},e.prototype.fitLayoutWidth=function(t,e,i,o,r){var n;return t?t instanceof ps?n=t:"string"==typeof t?n=this._view.layoutByName(t):t.name&&(n=this._view.layoutByColumn(t.name)):null==t&&(n=this._view.activeCellLayout._root),n&&this._view.fitLayoutWidth(n,e,i,o,r)},e.prototype.fitHeaderHeight=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=2),this._view.fitHeaderHeight(t,e)},e.prototype.setRowHeight=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!0),this._view.setRowHeight(t,e,i)},e.prototype.getRowHeight=function(t){var e=this._view.getRowHeight(t);if(isNaN(e)){var i=this._view.getItem(t);e=this._view.layoutManager.getItemHeight(i)}return e},e.prototype.clearRowHeights=function(t){this._view.clearRowHeights(t)},e.prototype.getCurrent=function(){var t=this._view.focusedIndex;return t?t.proxy():null},e.prototype.setCurrent=function(t,e){void 0===e&&(e=!0);var i=this._view.focusedIndex.clone();i.assignFrom(t),this._view.setFocusedIndex(i,e,!0)},e.prototype.resetCurrent=function(){this._view.setFocusedIndex(this._view.focusedIndex.clone().reset())},e.prototype.clearCurrent=function(){this._view.clearFocusedIndex()},e.prototype.mouseToIndex=function(t,e,i){var o=this._view.mouseToIndex(t,e,i);return o?o.proxy():null},e.prototype.getCellBounds=function(t,e,i){void 0===i&&(i=!0);var o=Bp.getColumn(this._view,e),r=new Ds(this._view,t,o);if(o&&r){var n=this._view.layoutManager,s=n.getBodyView(r),a=s.getCellRectAt(n,r,!0);if(a=a&&(i?s.boundsByScreen(a):s.boundsByContainer(a)))return{x:a.x,y:a.y,width:a.width,height:a.height}}return null},e.prototype.getIndexOfElement=function(t){var e=this._view.getCellViewOf(t),i=this._view.getDataCellIndex(e);return i?i.proxy():null},e.prototype.getWritable=function(t,e){var i=Bp.getColumn(this._view,e);if(i instanceof ls)return this._view.getWritable(t,i)},e.prototype.setColumnFilters=function(t,e){var i=Bp.getColumn(this._view,t);i instanceof ls&&i.setFilters(e)},e.prototype.clearColumnFilters=function(t){var e=Bp.getColumn(this._view,t);e instanceof ls&&e.clearFilters()},e.prototype.addColumnFilters=function(t,e,i){var o=Bp.getColumn(this._view,t);o instanceof ls&&o.addFilters(e,i)},e.prototype.removeColumnFilters=function(t,e){var i=Bp.getColumn(this._view,t);i instanceof ls&&i.removeFilters(e)},e.prototype.activateColumnFilters=function(t,e,i){var o=Bp.getColumn(this._view,t);o instanceof ls&&o.activateFilters(e,i)},e.prototype.activateAllColumnFilters=function(t,e){var i=Bp.getColumn(this._view,t);i instanceof ls&&i.activateAllFilters(e)},e.prototype.resetFilters=function(){this._view.resetFilters(!1)},e.prototype.hideColumnFilters=function(t,e,i){void 0===i&&(i=!0);var o=Bp.getColumn(this._view,t);o instanceof ls&&(o.hideColumnFilters(e,i),this._view.closePopups())},e.prototype.hideAllColumnFilters=function(t,e){void 0===e&&(e=!0);var i=Bp.getColumn(this._view,t);i instanceof ls&&(i.hideAllColumnFilters(e),this._view.closePopups())},e.prototype.toggleColumnFilters=function(t,e){var i=Bp.getColumn(this._view,t);i instanceof ls&&i.toggleFilters(e)},e.prototype.toggleAllColumnFilters=function(t){var e=Bp.getColumn(this._view,t);e instanceof ls&&e.toggleAllFilters()},e.prototype.getColumnFilter=function(t,e){var i=Bp.getColumn(this._view,t);return i instanceof ls&&i.getFilter(e)?i.getFilter(e).toProxy():null},e.prototype.getColumnFilters=function(t){var e=Bp.getColumn(this._view,t);if(e instanceof ls){for(var i=e.autoFilter?e.autoFilters.items:e.filters.items,o=[],r=0,n=i.length;r<n;r++)o.push(i[r].toProxy());return o}return null},e.prototype.getActiveColumnFilters=function(t,e){void 0===e&&(e=!0);var i=Bp.getColumn(this._view,t);if(i instanceof ls){for(var o=i.getActiveFilters(e),r=[],n=0,s=o.length;n<s;n++)r.push(o[n].toProxy());return r}return null},e.prototype.isFiltered=function(t){if(t){var e=Bp.getColumn(this._view,t);return e instanceof ls&&e.isFiltered()}var i=this._view.getFilteredColumns();return i&&i.length>0},e.prototype.autoFiltersRefresh=function(t,e){t=t?Rt.makeArray(t):this._view.getChildColumnNames(null);for(var i=0;i<t.length;i++){var o=Bp.getColumn(this._view,t[i]);o instanceof ls&&o.autoFilterRefresh(e)}},e.prototype.showFilterSelector=function(t,e){var i=Bp.getColumn(this._view,t);return!!i&&(null!=e&&(e=String(e)),this.closeList(),!!this._view.showFilterSelector(i,e))},e.prototype.inlineFilterFocus=function(t){var e=this._view.layoutByColumn(t);e&&this._view.inlineFilterFocus(e)},e.prototype.getValues=function(t){var e=this._view.getItem(t);return e?Bp.getValues(this._view,e):null},e.prototype.getDisplayValues=function(t,e){var i=this._view.getItem(t);if(i)return Bp.getDisplayValues(this._view,i,e)},e.prototype.getDisplayValuesOfRow=function(t,e){var i=this._view.getItemOfRow(t,!0);if(i)return Bp.getDisplayValues(this._view,i,e)},e.prototype.getJsonRows=function(){return this._view.getJsonRows()},e.prototype.setValues=function(t,e,i){var o=this._view.getItem(t);o&&Bp.setValues(this._view,o,e,i)},e.prototype.getValue=function(t,e,i){var o;void 0===i&&(i=!1);var r=this._view,n=r._clipboardManager;if(n.isPasting&&(o=n.appendingIndex.item).index!==t&&(o=null),o=o||r.getItem(t)){var s=this._dataProvider.getFieldIndex(e),a=r.columnByField(s);return i&&Ds.equalsTo(r.editController.editIndex,t,a.layout)?r.getEditCellValue():o.getData(s)}return null},e.prototype.setValue=function(t,e,i){e=this._dataProvider.getFieldIndex(e),this._view.setValueAt(t,e,i)},e.prototype.getEditValue=function(){return this._view.getEditCellValue()},e.prototype.setEditValue=function(t,e,i){void 0===i&&(i=!0),this._view.setEditCellValue(t,e,i)},e.prototype.registerCustomRenderer=function(t,e){this._view.registerCustomRenderer(t,e)},e.prototype.unregisterCustomRenderer=function(t){this._view.unregisterCustomRenderer(t)},e.prototype.existsCustomRenderer=function(t){return this._view.existsCustomRenderer(t)},e.prototype.unregisterAllCustomRenderer=function(){this._view.unregisterAllCustomRenderer()},e.prototype.addPopupMenu=function(t,e){this._view.addPopupMenu(t,e)},e.prototype.getPopupMenu=function(t){return this._view.getPopupMenu(t)},e.prototype.removePopupMenu=function(t){this._view.removePopupMenu(t)},e.prototype.setContextMenu=function(t){return this._view.setContextMenu(t)},e.prototype.getSelection=function(t){void 0===t&&(t=0);var e=this._view.getSelection(t);return e?e.toProxy():null},e.prototype.getSelections=function(){var t=this._view.getSelections(),e=[];return t.forEach((function(t){e.push(t.toProxy())})),e},e.prototype.setSelection=function(t,e){t.style&&"string"==typeof t.style&&(this._view.clearAddSelection(!0,!1,e),this.addSelection(t,e))},e.prototype.addSelection=function(e,i){if(void 0===i&&(i=!0),e.style&&"string"==typeof e.style){var o,r,n=Rt.valueIn(e.style,t.SelectionStyle)?e.style:t.SelectionStyle.BLOCK,s=0,a=0;if(e.hasOwnProperty("startItem"))a=s=e.startItem;else if(e.hasOwnProperty("startRow"))a=s=this._view.getItemIndexOfRow(e.startRow);else if("singleColumn"!=n&&"columns"!=n)return;if(e.hasOwnProperty("endItem"))a=e.endItem;else if(e.hasOwnProperty("endRow"))a=this._view.getItemIndexOfRow(e.endRow);else if("singleColumn"!=n&&"columns"!=n)return;o=Bp.getColumn(this._view,e.startColumn),r=Bp.getColumn(this._view,e.endColumn);var l=new Ds(this._view,s,o),h=new Ds(this._view,a,r);this._view.selections.add(l,h,n,i)}},e.prototype.clearSelection=function(){this._view.clearAddSelection()},e.prototype.removeSelection=function(t){var e=this._view.selections.getItem(t);e&&this._view.selections.remove(e)},e.prototype.getSelectedItems=function(t){return this._view.getSelectedItemIndices(t)},e.prototype.getSelectedRows=function(){return this._view.getSelectedRows()},e.prototype.deleteSelection=function(t){this._view.deleteSelection(t)},e.prototype.eraseSelection=function(t){this._view.eraseSelection(t,!1)},e.prototype.getSelectionData=function(t,e){return void 0===t&&(t=-1),void 0===e&&(e=0),e>=0&&e<this._view.selections.count?this._view.selections.getItem(e).getData(t):null},e.prototype.getSelectionsData=function(){var t=[],e=this._view.selections.getItems(),i={};return e.forEach((function(t){t.getData(-1).forEach((function(t){var e=t.__rowId;e>=0&&(i[e]=i[e]||{},Rt.extendObj(t,i[e]))}))})),Object.keys(i).forEach((function(e){t.push(i[e])})),t},e.prototype.copyToClipboard=function(t,e){return void 0===e&&(e=!0),this._view.toClipboard(t,e)},e.prototype.commitEditor=function(t,e){return void 0===t&&(t=!0),void 0===e&&(e=!0),this._view.commitEditor(t,e)},e.prototype.commit=function(t){return this._view.commit(t)},e.prototype.cancel=function(){return this._view.cancel()},e.prototype.fillEditSearchItems=function(t,e,i,o,r){var n=Bp.getColumn(this._view,t);this._view.fillEditSearchItems(n,e,i,o,r)},e.prototype.isItemEditing=function(){return this._view.isItemEditing()},e.prototype.isEditing=function(){return this._view.isEditing()},e.prototype.showEditor=function(t){void 0===t&&(t=!1),this._view.showEditor(null,null,t)},e.prototype.hideEditor=function(){this._view.hideEditor(!0)},e.prototype.cancelEditor=function(){this._view.cancelEditor(!0)},e.prototype.setValidations=function(t){this._view.validations=t},e.prototype.validateCells=function(t,e,i,o){return void 0===e&&(e=!0),void 0===i&&(i=!1),this._view.validateCells(Rt.makeArray(t),e,i,Rt.makeArray(o))},e.prototype.getInvalidCells=function(t){var e;return null!=t&&(e=this.getDataRow(t))<0?null:this._view.getInvalidCells(e)},e.prototype.getInvalidCellsOfRow=function(t){return null==t?null:this._view.getInvalidCells(t)},e.prototype.clearInvalidCells=function(t,e){var i;if(null==t||(i=this._view.getItem(t))&&i.isDataRow)return this._view.clearInvalidCells(i,e)},e.prototype.clearInvalidCellsOfRow=function(t,e){var i=this._view.getItemOfRow(t,!0);if(i)return this._view.clearInvalidCells(i,e)},e.prototype.addInvalidCell=function(t,e,i,o){var r=this._view.getItem(t);r&&this._view.addInvalidCell(r,e,i,o)},e.prototype.addInvalidCellOfRow=function(t,e,i,o){var r=this._view.getItemOfRow(t,!0);r&&this._view.addInvalidCell(r,e,i,o)},e.prototype.getEditingItem=function(){var t=this._view.getEditItem();return t?(t.getRowObject(),{itemIndex:t.index,dataRow:t.dataRow,values:t.getRowObject()}):null},e.prototype.getItemState=function(e){var i=this._view.getItem(e);if(i){var o=i.itemState;return o==t.ItemState.NORMAL&&this._view.focusedIndex.itemIndex==i.index&&(o=t.ItemState.FOCUSED),o}return null},e.prototype.showToast=function(t,e){this._view.showToast(t,e)},e.prototype.hideToast=function(t){this._view.hideToast(t)},e.prototype.showMessage=function(t,e,i){var o=this._view;if("object"==typeof e){var r=new Ds(this._view);if(r.assignFrom(e),!o.isValid(r,!0))return;var n=this.getCellBounds(r.itemIndex,r.column,!1);if(!n)return;e=n.x,i=n.y+n.height}"string"==typeof t&&(t={message:t}),this._view.showMessage(t,e,i)},e.prototype.setLookups=function(t){this._view.setLookups(t)},e.prototype.addLookupSource=function(t){this._view.addLookupSource(t)},e.prototype.removeLookupSource=function(t){this._view.removeLookupSource(t)},e.prototype.existsLookupData=function(t,e){return this._view.existsLookupData(t,e)},e.prototype.fillLookupData=function(t,e){this._view.fillLookupData(t,e)},e.prototype.getLookupData=function(t,e){return this._view.getLookupData(t,e)},e.prototype.clearLookupData=function(t){this._view.clearLookupData(t)},e.prototype.isCheckable=function(t){return this._view.isCheckable(t)},e.prototype.isCheckableOfRow=function(t){return this._view.isCheckableOfRow(t)},e.prototype.setCheckable=function(t,e){this._view.setCheckable(t,e)},e.prototype.setCheckableOfRow=function(t,e){this._view.setCheckableOfRow(t,e)},e.prototype.isIndeterminateItem=function(t){return this._view.isIndeterminateItem(t)},e.prototype.isCheckedItem=function(t){return this._view.isCheckedItem(t)},e.prototype.isIndeterminateRow=function(t){return this._view.isIndeterminateRow(t)},e.prototype.isCheckedRow=function(t){return this._view.isCheckedRow(t)},e.prototype.indeterminateItem=function(t,e){void 0===e&&(e=!0),this._view.indeterminateItem(t,e)},e.prototype.checkItem=function(t,e,i,o){void 0===e&&(e=!0),void 0===o&&(o=!0),this._view.checkItem(t,e,i,o)},e.prototype.indeterminateRow=function(t,e){void 0===e&&(e=!0),this._view.indeterminateRow(t,e)},e.prototype.checkRow=function(t,e,i,o){void 0===e&&(e=!0),void 0===o&&(o=!0),this._view.checkRow(t,e,i,o)},e.prototype.checkModel=function(t,e,i,o){void 0===e&&(e=!0),void 0===o&&(o=!0);var r=this._view.getItemOfModel(t);this._view.checkModel(r,e,i,o)},e.prototype.isCheckedModel=function(t){return this._view.getItemOfModel(t).checked},e.prototype.isCheckableModel=function(t){return this._view.getItemOfModel(t).checkable},e.prototype.indeterminateModel=function(t,e){var i=this._view.getItemOfModel(t);this._view.indeterminateModel(i,e)},e.prototype.isIndeterminateModel=function(t){return this._view.getItemOfModel(t).indeterminate},e.prototype.checkItems=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this._view.checkItems(t,e,i)},e.prototype.checkRows=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this._view.checkRows(t,e,i)},e.prototype.checkAll=function(t,e,i,o){void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),this._view.checkAll(t,e,i,o)},e.prototype.setAllCheck=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this._view.setAllCheck(t,e)},e.prototype.isAllChecked=function(){return this._view.allChecked},e.prototype.resetCheckables=function(t){this._view.resetCheckables(),t&&(this._view.checkBar.checkableExpression=null,this._view.checkBar.checkableCallback=null)},e.prototype.applyCheckables=function(){this._view.applyCheckables()},e.prototype.setCheckableExpression=function(t,e){void 0===e&&(e=!0),this._view.checkBar.checkableExpression=t,e&&this._view.applyCheckables()},e.prototype.setCheckableCallback=function(t,e){void 0===e&&(e=!0),this._view.checkBar.checkableCallback=t,e&&this._view.applyCheckables()},e.prototype.getFilteredRows=function(t){return void 0===t&&(t=!0),this._view.getFilteredRows(t)},e.prototype.getSummary=function(t,e){var i=this._view.summarizer,o="string"==typeof t?this._dataProvider.getFieldIndex(t):t;if(-1==o)return null;switch(e){case"count":return i.getCount(o);case"sum":return i.getSum(o);case"max":return i.getMax(o);case"min":return i.getMin(o);case"avg":return i.getAvg(o);case"var":return i.getVar(o);case"varp":return i.getVarp(o);case"stdev":return i.getStdev(o);case"stdevp":return i.getStdevp(o);case"datacount":return i.getDataCount(o);case"dataavg":return i.getDataAvg(o)}},e.prototype.getModel=function(t,e){var i=this._view.getItem(t);return i&&Bp.getItemProxy(i,e)},e.prototype.getModelAs=function(t,e,i){var o=this._view.getItem(t);switch(e){case"row":o=Rt.cast(o,Go);break;case"group":o=Rt.cast(o,Wo);break;case"footer":o=Rt.cast(o,Yo);break;case"tree":o=Rt.cast(o,In)}return o?Bp.getItemProxy(o,i):null},e.prototype.getGroupModel=function(t,e){var i=this._view.getItem(t);return!i||i instanceof Wo||(i=i.parent instanceof zo?null:i.parent),i?Bp.getItemProxy(i,e):null},e.prototype.getRootModel=function(t,e){if(!t||!this._view.isTree()&&!this._view.rowGrouped)return null;if(t){var i=this._view.getItem(t.index);if(i)return i.root?Bp.getItemProxy(i.root,e):null}return null},e.prototype.getModels=function(t,e){if(t=Rt.makeArray(t)){for(var i=[],o=0,r=t.length;o<r;o++){var n=this._view.getItem(t[o]);n&&i.push(Bp.getItemProxy(n,e))}return i}},e.prototype.getModelOfRow=function(t,e){var i=this._view.getItemOfRow(t,!1);return i?Bp.getItemProxy(i,e):null},e.prototype.getModelsOfRows=function(t,e){if(t=Rt.makeArray(t)){for(var i=[],o=0,r=t.length;o<r;o++){var n=this._view.getItemOfRow(t[o],!1);n&&i.push(Bp.getItemProxy(n,e))}return i}},e.prototype.getParentModel=function(t,e){var i;return t&&(i=this._view.getItemOfModel(t)),!i||!i.parent||i instanceof Zo||!this._view.isTree()&&!this._view.rowGrouped?null:Bp.getItemProxy(i.parent,e)},e.prototype.getChildModel=function(t,e,i){var o=t&&this._view.getItemOfModel(t);if(o instanceof Wo){var r=o.getItem(e);return r?Bp.getItemProxy(r,i):null}return null},e.prototype.getChildModels=function(t,e){var i=t&&this._view.getItemOfModel(t);if(i instanceof Wo){for(var o=[],r=0,n=i.count;r<n;r++)o.push(Bp.getItemProxy(i.children[r],e));return o}return null},e.prototype.getDescendantModels=function(t,e){var i=t&&this._view.getItemOfModel(t);if(i instanceof Wo){var o=i.getDescendants(!1),r=[];if(o)for(var n=0,s=o.length;n<s;n++)r.push(Bp.getItemProxy(o[n],e));return r}return null},e.prototype.getGroupSummary=function(t,e,i){if(t){var o=this._view.getItemOfModel(t),r="string"==typeof e?this._dataProvider.getFieldIndex(e):e;if(o instanceof Wo&&r>=0){var n={count:o.getNumber(r),sum:o.getSum(r),max:o.getMax(r),min:o.getMin(r),avg:o.getAvg(r),datacount:o.getDataCount(r),dataavg:o.getSum(r)/o.getDataCount(r)};return i&&(n.var=o.getVar(r,1),n.varp=o.getVar(r,0),n.stdev=o.getStdev(r,1),n.stdevp=o.getStdev(r,0)),n}}return null},e.prototype.getDistinctItemValues=function(e,i,o){return void 0===i&&(i=-1),void 0===o&&(o=t.SortDirection.ASCENDING),e=this._dataProvider.getFieldIndex(e),this._view.getDistinctItemValues(e,i,o)},e.prototype.showProgress=function(){this._view.showProgress()},e.prototype.setProgress=function(t,e,i,o){this._view.setProgress(t,e,i,o)},e.prototype.closeProgress=function(){this._view.closeProgress()},e.prototype.showLoading=function(t){this._view.showLoading(t)},e.prototype.closeLoading=function(){this._view&&this._view.hideLoading()},e.prototype.searchItem=function(t){return t?this._view.searchItem(t):-1},e.prototype.searchCell=function(t){return t?this._view.searchCell(t):null},e.prototype.resetSize=function(t){this._view.container.resetSize(t)},e.prototype.closeList=function(){this._view.closePopups()},e.prototype.exportGrid=function(t){if("csv"===t.type){var e=new od(t);(new Kc).export(this._view,e)}else if("excel"===t.type){e=new rd(this._view,t);(new Vp).export(this._view,e)}},e.prototype.scrollPage=function(t){this._view._vscrollBar._doScroll(sh.PAGE,t,0)},e.prototype.getTopItem=function(){return this._view.topIndex},e.prototype.setTopItem=function(t){void 0===t&&(t=0),this._view.topIndex=t},e.prototype.getLeftPos=function(){return this._view.leftPos},e.prototype.setLeftPos=function(t){this._view.leftPos=t},e.prototype.setLeftCol=function(t){var e;if("string"==typeof t){var i=this._view.layoutByName(t);i&&(e=i._col)}else e=t;this._view.leftCell=e},e.prototype.getContainer=function(){return this._view.container._containerDiv},e.prototype.requestPrepareEditor=function(){this._view.requestPrepareEditor()},e.prototype.destroy=function(){return this.dispose()},e.prototype.fullItemCount=function(){return this._view.layoutManager.fullItemCount},e.prototype.undo=function(){return this._view.undo()},e.prototype.redo=function(){return this._view.redo()},e.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._view.clearCommandStack(t)},e.prototype._getView=function(){return this._view},e}(),Hp=function(t){function e(e,i,o){var r=t.call(this,e,i,o)||this;return r.onPageChanging=null,r.onPageChanged=null,r.onPageCountChanged=null,r.onGrouping=null,r.onGrouped=null,r.onExpanding=null,r.onExpanded=null,r.onCollapsing=null,r.onCollapsed=null,r}return o(e,t),Object.defineProperty(e.prototype,"rowGroup",{get:function(){return this._view.rowGroup},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupPanel",{get:function(){return this._view.groupPanelView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filterMode",{get:function(){return this._view._rs.filterMode},set:function(t){this._view._rs.filterMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filterOr",{get:function(){return this._view._rs.inclusiveFiltering},set:function(t){this._view._rs.inclusiveFiltering=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupSummaryMode",{get:function(){return this._view._rs.groupSummaryMode},set:function(t){this._view._rs.groupSummaryMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupingOptions",{get:function(){return this._view.groupingOptions},enumerable:!1,configurable:!0}),e.prototype.getDataSource=function(){return this._dataDelegator},e.prototype.getRowGroup=function(){return this._view.rowGroup.toProxy()},e.prototype.setRowGroup=function(t){this._view.rowGroup.assignFrom(t)},e.prototype.getGroupPanel=function(){return{visible:this._view.groupPanelView.visible,height:this._view.groupPanelView.height,minHeight:this._view.groupPanelView.minHeight}},e.prototype.setGroupPanel=function(t){this._view.groupPanelView.assignFrom(t)},e.prototype.getOptions=function(){var e=t.prototype.getOptions.call(this),i=this._view._rs;return e.filterOr=i.inclusiveFiltering,e.groupSummaryMode=i.groupSummaryMode,e.filterMode=i.filterMode,e.grouping=this.groupingOptions,e.groupPanel=this.groupPanel,e},e.prototype.setOptions=function(e){t.prototype.setOptions.call(this,e),e.grouping&&this._view.groupingOptions.assignFrom(e.grouping),e.groupPanel&&this._view.groupPanelView.assignFrom(e.groupPanel)},e.prototype.getGroupingOptions=function(){return this._view.groupingOptions.toProxy()},e.prototype.setGroupingOptions=function(t){this._view.groupingOptions.assignFrom(t)},e.prototype.groupBy=function(t,e,i){this._view.groupByFieldNames(t,e,i)},e.prototype.isGrouped=function(){return this._view.rowGrouped},e.prototype.isMergedGrouped=function(){return this._view.mergedRowGrouped},e.prototype.getGroupFields=function(){return this._view.rowGroupFields},e.prototype.getGroupFieldNames=function(t){void 0===t&&(t=!0);var e=this._view.rowGroupFields;if(e){var i=this._dataProvider;if(i){for(var o=[],r=0,n=e.length;r<n;r++)o.push(t?i.getOrgFieldName(e[r]):i.getFieldName(e[r]));return o}return e}return null},e.prototype.getGroupLevels=function(){return this._view.rowGroupLevels},e.prototype.getGroupLevel=function(t){return(t=this._dataProvider.getFieldIndex(t))>-1?this._view.getGroupLevel(t):-1},e.prototype.getGroupIndex=function(t){var e=this._view.getItem(t);if(e){var i=e.parent;return i?i.index:-1}return-1},e.prototype.isGroupItem=function(t){return this._view.getItem(t)instanceof Wo},e.prototype.isParentVisible=function(t){var e=this._view.getItem(t);return e&&e.parent&&e.parent.visible},e.prototype.expandGroup=function(t,e,i,o){void 0===o&&(o=0);var r=this._view.getItem(t);r&&r instanceof Wo&&this._view.expand(r,e,i,o)},e.prototype.collapseGroup=function(t,e,i){var o=this._view.getItem(t);o&&o instanceof Wo&&this._view.collapse(o,e,i)},e.prototype.expandParent=function(t,e,i,o){void 0===o&&(o=0);var r=this._view.getItem(t);if(r){var n=r.parent;n&&n.expandable&&(n.collapsed||i)&&this._view.expand(n,e,i,o)}},e.prototype.collapseParent=function(t,e,i){var o=this._view.getItem(t);if(o){var r=o.parent;r&&r.collapsable&&r instanceof Wo&&this._view.collapse(r,e,i)}},e.prototype.collapse=function(t,e){var i=this;void 0===e&&(e=-1);var o=function(t){return!t||t instanceof zo?null:t instanceof Wo&&t.expanded&&(-1==e||t.level===e)&&Br(t,i.rowGroup.collapsedAdornments)?t:o(t.parent)},r=this._view.getItem(t),n=o(r);n&&this._view.collapse(n,!1,!1)},e.prototype.expand=function(t,e){void 0===e&&(e=-1);var i=this._view.getItem(t);!i||i instanceof zo||(i instanceof Wo||(i=i.parent),this._view.expand(i,!0,!0,e))},e.prototype.expandAll=function(t,e){void 0===t&&(t=!0),this._view.itemCount>0&&this._view.expandAll(t,e)},e.prototype.collapseAll=function(t){this._view.itemCount>0&&this._view.collapseAll(t)},e.prototype.getGroupSummaryValue=function(t,e,i){if(t&&this._view.rowGrouped){var o=this._view.getItemOfModel(t),r=Bp.getColumn(this._view,e);if(o instanceof Uo){var n=o._allFooters;return null!=(i=1===o.allFooterCount?0:i)&&o._allFooters[i]?(o=o._allFooters[i],Ic.getValue(o,r)):n.map((function(t){return Ic.getValue(t,r)}))}if(o instanceof Yo)return Ic.getValue(o,r)}return null},e.prototype.layoutExpandAll=function(t){this._view.layoutExpandAll(!0,t)},e.prototype.layoutCollapseAll=function(t){this._view.layoutExpandAll(!1,t)},e.prototype.beginInsertRow=function(t,e,i){return void 0===t&&(t=-1),this._view.insertAt(t,e,i)},e.prototype.beginAppendRow=function(t){return this._view.appendAt(t)},e.prototype.beginUpdateRow=function(t){if(this._view.focusedIndex){var e=this._view.focusedIndex.clone();void 0!==t&&(e.itemIndex=t),this._view.edit(e)}},e.prototype.setPaging=function(t,e,i){void 0===e&&(e=10),void 0===i&&(i=-1),this._view.setPaging(t,e,i)},e.prototype.getPage=function(){return this._view.page},e.prototype.setPage=function(t,e){void 0===e&&(e=-1),this._view.setPage(t,e)},e.prototype.getPageCount=function(){return this._view.pageCount},e.prototype.setPageCount=function(t){this._view.pageCount=t},e.prototype.getPageOfDataRow=function(t){return this._view.getPageOfDataRow(t)},e.prototype.getCheckedItems=function(t){return void 0===t&&(t=!0),this._view.getCheckedItemIndices(!t)},e.prototype.getCheckedRows=function(t,e,i){return void 0===t&&(t=!0),this._view.getCheckedRows(t,e,i)},e.prototype.getMergedItems=function(t,e,i,o){return void 0===i&&(i=!0),void 0===o&&(o=!0),this._view.getMergedItems(t,e,i,o)},e.prototype.populateMerges=function(t){void 0===t&&(t=!0),this._view._populateMerges(t)},e.prototype._createView=function(t,e,i){return(this._container=new wp(t,this,e,i)).gridView},e.prototype._createListener=function(t){return new Up(this,t)},e}(jp),Gp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onTreeItemExpanding=null,e.onTreeItemExpanded=null,e.onTreeItemCollapsing=null,e.onTreeItemCollapsed=null,e.onTreeItemChanged=null,e}return o(e,t),Object.defineProperty(e.prototype,"treeOptions",{get:function(){return this._view.treeOptions},enumerable:!1,configurable:!0}),e.prototype.getDataSource=function(){return this._dataDelegator},e.prototype.getTreeOptions=function(){return this._view.treeOptions.toProxy()},e.prototype.setTreeOptions=function(t){this._view.treeOptions.assignFrom(t)},e.prototype.getParent=function(t){var e=this._view.getItem(t);return e?e.parentIndex:-1},e.prototype.getChildren=function(t){var e=this._view.getItem(t);if(e){for(var i=[],o=0,r=e.count;o<r;o++)i.push(e.getItem(o).index);return i}return null},e.prototype.getDescendants=function(t){var e=this._view.getItem(t);if(e){for(var i=[],o=e.getDescendants(!1)||[],r=0,n=o.length;r<n;r++)i.push(o[r].index);return i}return null},e.prototype.getAncestors=function(t,e){void 0===e&&(e=!0);var i=this._view.getItem(t);if(i){for(var o=[],r=i.getAncestors(),n=0,s=r.length;n<s;n++)!e&&r[n]instanceof Sn||o.push(r[n].index);return o}return null},e.prototype.expand=function(t,e,i,o){void 0===o&&(o=0);var r=this._view.getItem(t);r&&this._view.expand(r,e,i,o)},e.prototype.expandModel=function(t,e,i,o){void 0===o&&(o=0);var r=this._view.getItemOfModel(t);r&&this._view.expand(r,e,i,o)},e.prototype.collapse=function(t,e){var i=this._view.getItem(t);i&&this._view.collapse(i,e)},e.prototype.collapseModel=function(t,e){var i=this._view.getItemOfModel(t);i&&this._view.collapse(i,e)},e.prototype.expandAll=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!0),this._view.expandAll(t,e)},e.prototype.collapseAll=function(){this._view.collapseAll()},e.prototype.getCheckedItems=function(){return this._view.getCheckedItemIndices()},e.prototype.getCheckedRows=function(t){return this._view.getCheckedRowIds(t)},e.prototype.checkChildren=function(t,e,i,o,r,n){void 0===n&&(n=!0);var s=this._view.getItem(t);s&&this._view.checkChildren(s,e,i,o,r,n)},e.prototype.setOptions=function(e){t.prototype.setOptions.call(this,e),e.treeOptions&&this._view.treeOptions.assignFrom(e.treeOptions)},e.prototype._createView=function(t,e,i){return(this._container=new Mp(t,this,e,i)).gridView},e.prototype._createListener=function(t){return new Yp(this,t)},e}(jp),Wp=function(e){function i(t,i){var o=e.call(this)||this;return o._del=t,o._view=i,o._view.addListener(o),o}return o(i,e),i.prototype.dispose=function(){return this._view.removeListener(this),this._view=null,this._del=null},i.prototype.onGridBaseCurrentChanging=function(t,e,i){return this._del.onCurrentChanging?this._del.onCurrentChanging(this._del,e.proxy(),i.proxy()):(Rt.log("onCurrentChanging",e,i),!0)},i.prototype.onGridBaseCurrentChanged=function(t,e){this._del.onCurrentChanged?this._del.onCurrentChanged(this._del,e.proxy()):Rt.log("onCurrentChanged",e)},i.prototype.onGridBaseCurrentRowChanged=function(t,e,i){this._del.onCurrentRowChanged?this._del.onCurrentRowChanged(this._del,e,i):Rt.log("onCurrentRowChanged",e,i)},i.prototype.onGridBaseValidateCell=function(e,i,o,r){if(this._del.onValidateColumn){var n=i.itemIndex,s=i.item&&i.item.dataRow,a=this._del.onValidateColumn(this._del,i.column,o,r,n,s);if(a&&a.level&&a.message)throw new Dn(a.level,a.message,i.column,a.message);if("string"==typeof a||"number"==typeof a)throw new Dn(t.ValidationLevel.ERROR,a,i.column,a)}},i.prototype.onGridBaseValidateRow=function(e,i,o,r){if(this._del.onValidateRow){var n=this._del.onValidateRow(this._del,i.index,i.dataRow,o,r);if(n&&n.level&&n.message)throw new Dn(n.level,n.message,null,n.message);if("string"==typeof n||"number"==typeof n)throw new Dn(t.ValidationLevel.ERROR,n,null,n)}},i.prototype.onGridBaseValidationFail=function(t,e,i,o){if(!this._del.onValidationFail)return o;var r=this._del.onValidationFail(this._del,e,i,{level:o.level,message:o.message});return r&&r.level&&r.message?(o.level=r.level,o.message=r.message,o.userMessage=r.message,o):"string"==typeof r||"number"==typeof r?(o.message=r,o.userMessage=r,o):void 0},i.prototype.onGridBaseCellClicked=function(t,e){this._del.onCellClicked?this._del.onCellClicked(this._del,e):Rt.log("onCellClicked: ",e)},i.prototype.onGridBaseCellDblClicked=function(t,e){this._del.onCellDblClicked?this._del.onCellDblClicked(this._del,e):Rt.log("onCellDblClicked: ",e)},i.prototype.onGridBaseCellItemClicked=function(t,e,i){return this._del.onCellItemClicked?this._del.onCellItemClicked(this._del,e.toProxy(),i):Rt.log("onCellItemClicked: ",i)},i.prototype.onGridBaseColumnCheckedChanged=function(t,e,i){this._del.onColumnCheckedChanged?this._del.onColumnCheckedChanged(this._del,e,i):Rt.log("onColumnCheckedChanged: ("+e.name+", "+i+")")},i.prototype.onGridBaseMenuItemClicked=function(t,e,i){this._del.onMenuItemClicked?this._del.onMenuItemClicked(this._del,e.toProxy(),i):Rt.log("onMenuItemClicked: ",e.toProxy(),i)},i.prototype.onGridBaseContextMenuPopup=function(t,e,i,o,r,n){return this._del.onContextMenuPopup?this._del.onContextMenuPopup(this._del,e,i,o,r,n):Rt.log("onContextMenuPopup: x = ",e,", y = ",i,", clickData =",o)},i.prototype.onGridBaseContextMenuItemClicked=function(t,e,i){this._del.onContextMenuItemClicked?this._del.onContextMenuItemClicked(this._del,e.toProxy(),i):Rt.log("onContextMenuItemClicked: ",e.toProxy(),i)},i.prototype.onGridBaseCellButtonClicked=function(t,e){this._del.onCellButtonClicked?this._del.onCellButtonClicked(this._del,e.proxy(),e.column):Rt.log("onCellButtonClicked: ",e)},i.prototype.onGridBaseScrollToBottom=function(t){this._del.onScrollToBottom?this._del.onScrollToBottom(this._del):Rt.log("onScrollToBottom")},i.prototype.onGridBaseTopIndexChanged=function(t,e){this._del.onTopIndexChanged?this._del.onTopIndexChanged(this._del,e):Rt.log("onTopItemIndexChanged: "+e)},i.prototype.onGridBaseLeftPosChanged=function(t,e){this._del.onLeftPosChanged?this._del.onLeftPosChanged(this._del,e):Rt.log("onLeftPosChanged: "+e)},i.prototype.onGridBaseTopIndexChanging=function(t,e,i,o,r){return this._del.onTopIndexChanging?this._del.onTopIndexChanging(this._del,e,i,o,r):Rt.log("onTopItemIndexChanging: ",e,i,o,r)},i.prototype.onGridBaseRowsDeleting=function(t,e){return this._del.onRowsDeleting?this._del.onRowsDeleting(this._del,e):(Rt.log("onRowsDeleting:",e),!0)},i.prototype.onGridBaseRowInserting=function(t,e,i){if(this._del.onRowInserting)return this._del.onRowInserting(this._del,e,i);Rt.log("onRowInserting: "+e,i)},i.prototype.onGridBaseSelectionCleared=function(t){this._del.onSelectionCleared?this._del.onSelectionCleared(this._del):Rt.log("onSelectionCleared")},i.prototype.onGridBaseSelectionChanged=function(t,e){this._del.onSelectionChanged?this._del.onSelectionChanged(this._del,e):Rt.log("onSelectionChanged")},i.prototype.onGridBaseSelectionAdded=function(t,e){this._del.onSelectionAdded?this._del.onSelectionAdded(this._del,e):Rt.log("onSelectionAdded: ",e)},i.prototype.onGridBaseSelectionEnded=function(t,e){this._del.onSelectionEnded?this._del.onSelectionEnded(this._del,e):Rt.log("onSelectionEnded")},i.prototype.onGridBaseShowEditor=function(t,e,i,o){return this._del.onShowEditor?this._del.onShowEditor(this._del,e.proxy(),i,o):Rt.log("onShowEditor",e.proxy(),i,o)},i.prototype.onGridBaseShowEditCommand=function(t,e){return this._del.onShowEditCommand&&this._del.onShowEditCommand(this._del,e.proxy())},i.prototype.onGridBaseHideEditor=function(t,e){this._del.onHideEditor?this._del.onHideEditor(this._del,e.proxy()):Rt.log("onHideEditor: ",e.proxy())},i.prototype.onGridBaseEditChange=function(t,e,i){this._del.onEditChange?this._del.onEditChange(this._del,e.proxy(),i):Rt.log("onEditChange: "+i,e.proxy())},i.prototype.onGridBaseGetEditValue=function(t,e,i){return this._del.onGetEditValue?this._del.onGetEditValue(this._del,e.proxy(),i):Rt.log("onGetEditValue: ",e,i)},i.prototype.onGridBaseEditCommit=function(t,e,i,o){return this._del.onEditCommit?this._del.onEditCommit(this._del,e.proxy(),i,o):(Rt.log("onEditCommit",e.proxy(),i,o),!0)},i.prototype.onGridBaseEditCanceled=function(t,e){this._del.onEditCanceled?this._del.onEditCanceled(this._del,e.proxy()):Rt.log("onEditCanceled",e.proxy())},i.prototype.onGridBaseItemEditCanceled=function(t,e){this._del.onItemEditCanceled?this._del.onItemEditCanceled(this._del,e.index,e.itemState):Rt.log("onItemEditCanceled: "+e.index+", "+e.itemState)},i.prototype.onGridBaseItemEditCancel=function(t,e){return this._del.onItemEditCancel?this._del.onItemEditCancel(this._del,e.index,e.itemState):(Rt.log("onItemEditCancel: "+e.index+", "+e.itemState),!0)},i.prototype.onGridBaseEditSearch=function(t,e,i){this._del.onEditSearch?this._del.onEditSearch(this._del,e.proxy(),i):Rt.log("onEditSearch: "+i,e.proxy())},i.prototype.onGridBaseSearchCellButtonClick=function(t,e,i){return this._del.onSearchCellButtonClick?this._del.onSearchCellButtonClick(this._del,e.proxy(),i):(Rt.log("onSearchCellButtonClick: "+i,e.proxy()),null)},i.prototype.onGridBaseCellEdited=function(t,e,i){return this._del.onCellEdited?this._del.onCellEdited(this._del,e.index,e.dataRow,i):Rt.log("onCellEdited: "+e.index+", "+e.dataRow+", "+i)},i.prototype.onGridBaseEditRowChanged=function(t,e,i,o,r){return this._del.onEditRowChanged?this._del.onEditRowChanged(this._del,e.index,e.dataRow,i,o,r):Rt.log("onEditRowChanged: "+e.index+", "+e.dataRow+", "+i+", "+o+" => "+r)},i.prototype.onGridBaseEditRowPasted=function(t,e,i,o,r){return this._del.onEditRowPasted?this._del.onEditRowPasted(this._del,e.index,e.dataRow,i,o,r):Rt.log("onEditRowPasted: "+e.index+", "+e.dataRow,i,o,r)},i.prototype.onGridBaseRowsPasted=function(t,e){return this._del.onRowsPasted?this._del.onRowsPasted(this._del,e):Rt.log("onRowsPasted: ",e)},i.prototype.onGridBaseCellPasting=function(t,e,i,o){return this._del.onCellPasting?this._del.onCellPasting(this._del,e.proxy(),i,o):Rt.log("onCellPasting: ",e,i)},i.prototype.onGridBaseItemChecked=function(t,e,i){return this._del.onItemChecked?this._del.onItemChecked(this._del,e.index,i):Rt.log("onItemChecked",e.index,i)},i.prototype.onGridBaseItemsChecked=function(t,e,i){var o=Bp.getItemIndices(e);return this._del.onItemsChecked?this._del.onItemsChecked(this._del,o,i):Rt.log("onItemsChecked: "+i,o)},i.prototype.onGridBaseItemAllChecked=function(t,e){return this._del.onItemAllChecked?this._del.onItemAllChecked(this._del,e):Rt.log("onItemAllChecked: "+e)},i.prototype.onGridBaseErrorClicked=function(t,e){this._del.onErrorClicked?this._del.onErrorClicked(this._del,e):Rt.log("onErrorClicked: "+e)},i.prototype.onGridBaseSorting=function(t,e,i){for(var o=[],r=0,n=i.length;r<n;r++)o.push(i[r]?i[r].toString():"ascending");return this._del.onSorting?this._del.onSorting(this._del,e,i):Rt.log("onSorting: ",e,o)},i.prototype.onGridBaseSortingChanged=function(t){this._del.onSortingChanged?this._del.onSortingChanged(this._del):Rt.log("onSortingChanged")},i.prototype.onGridBaseFiltering=function(t,e){return this._del.onFiltering?this._del.onFiltering(this._del,e):Rt.log("onFiltering")},i.prototype.onGridBaseFilteringChanged=function(t,e,i,o){var r=e?e.getOwner():null,n=i?i.toProxy():null,s=r?r.name:"",a=i?i.name:"";return this._del.onFilteringChanged?this._del.onFilteringChanged(this._del,r,n,o):Rt.log("onFilteringChanged: "+s+", "+a)},i.prototype.onGridBaseWheel=function(t,e){return this._del.onWheel?this._del.onWheel(this._del,e):Rt.keyLog("onWheel: "+e)},i.prototype.onGridBaseKeyDown=function(t,e){return this._del.onKeyDown?this._del.onKeyDown(this._del,e):Rt.keyLog("onKeyDown: "+e)},i.prototype.onGridBaseKeyPress=function(t,e){this._del.onKeyPress?this._del.onKeyPress(this._del,e):Rt.keyLog("onKeyPress: "+e)},i.prototype.onGridBaseKeyUp=function(t,e){this._del.onKeyUp?this._del.onKeyUp(this._del,e):Rt.keyLog("onKeyUp: "+e)},i.prototype.onGridBaseShowTooltip=function(t,e,i,o){return this._del.onShowTooltip?this._del.onShowTooltip(this._del,e.proxy(),i,o):(Rt.log("onShowTooltip: "+i,e.proxy()),i)},i.prototype.onGridBaseShowHeaderTooltip=function(t,e,i,o,r){return this._del.onShowHeaderTooltip?this._del.onShowHeaderTooltip(this._del,e,i,o,r):(Rt.log("onShowHeaderTooltip: "+e.name+", "+i),i)},i.prototype.onGridBaseColumnPropertyChanged=function(t,e,i,o,r){this._del.onColumnPropertyChanged?this._del.onColumnPropertyChanged(this._del,e,i,o,r):Rt.log("onColumnPropertyChanged: "+e.name+", "+i+", "+o+", "+r)},i.prototype.onGridBaseLayoutPropertyChanged=function(t,e,i,o,r){this._del.onLayoutPropertyChanged?this._del.onLayoutPropertyChanged(this._del,e,i,o,r):Rt.log("onLayoutPropertyChanged: "+e.name+", "+i+", "+o+", "+r)},i.prototype.onGridBaseGridActivated=function(t){this._del.onGridActivated?this._del.onGridActivated(this._del):Rt.log("onGridActivated")},i.prototype.onGridBaseGridFocusChanged=function(t,e,i,o){this._del.onGridFocusChanged?this._del.onGridFocusChanged(this._del,e,o):Rt.log("onGridFocusChanged")},i.prototype.onGridBasePaste=function(t,e,i){if(this._del.onPaste)return this._del.onPaste(this._del,e.proxy(),i);Rt.log("onPaste: ",e)},i.prototype.onGridBaseCopy=function(t,e,i){var o;if(Array.isArray(e)?(o=[],e.forEach((function(t){o.push(t.toProxy())}))):o=e.toProxy(),i&&"cut"===i.type){if(this._del.onCut)return this._del.onCut(this._del,o,i)}else{if(this._del.onCopy)return this._del.onCopy(this._del,o,i);Rt.log("onCopy: ",o)}},i.prototype.onGridBasePasted=function(t){return this._del.onPasted?this._del.onPasted(this._del):Rt.log("onPasted")},i.prototype.onGridBaseCommandStackChanged=function(t,e,i){this._del.onCommandStackChanged?this._del.onCommandStackChanged(t.handler,e,i):Rt.log("onCommandStackChanged: undoable "+e+", redoable "+i)},i.prototype.onGridBaseDataLoadComplated=function(t){this._del.onDataLoadComplated?this._del.onDataLoadComplated(t.handler):Rt.log("onDataLoadComplated: ")},i.prototype.onGridBaseInitialized=function(t){this._del.onInitialized?this._del.onInitialized(t.handler):Rt.log("onInitialized: ")},i.prototype.onGridBaseLayoutExpanding=function(t,e){return this._del.onLayoutExpanding?this._del.onLayoutExpanding(t.handler,e):(Rt.log("onLayoutExpanding"),!0)},i.prototype.onGridBaseLayoutExpanded=function(t,e){this._del.onLayoutExpanded?this._del.onLayoutExpanded(t.handler,e):Rt.log("onLayoutExpanded")},i.prototype.onGridBaseLayoutCollapsing=function(t,e){return this._del.onLayoutCollapsing?this._del.onLayoutCollapsing(t.handler,e):(Rt.log("onLayoutCollapsing"),!0)},i.prototype.onGridBaseLayoutCollapsed=function(t,e){this._del.onLayoutCollapsed?this._del.onLayoutCollapsed(t.handler,e):Rt.log("onLayoutCollapsed")},i}(Oo),Up=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onGridViewPageChanging=function(t,e){return this._del.onPageChanging?this._del.onPageChanging(this._del,e):(Rt.log("onPageChanging:"+e),!0)},e.prototype.onGridViewPageChanged=function(t,e){this._del.onPageChanged?this._del.onPageChanged(this._del,e):Rt.log("onPageChanged:"+e)},e.prototype.onGridViewPageCountChanged=function(t,e){this._del.onPageCountChanged?this._del.onPageCountChanged(this._del,e):Rt.log("onPageCountChanged:"+e)},e.prototype.onGridViewGrouping=function(t,e){return this._del.onGrouping?this._del.onGrouping(this._del,e):(Rt.log("onGrouping",e),!0)},e.prototype.onGridViewGrouped=function(t){this._del.onGrouped?this._del.onGrouped(this._del):Rt.log("onGrouped")},e.prototype.onGridViewExpanding=function(t,e){return this._del.onExpanding?this._del.onExpanding(this._del,e.index):(Rt.log("onExpanding: "+e.index),!0)},e.prototype.onGridViewExpanded=function(t,e){this._del.onExpanded?this._del.onExpanded(this._del,e.index):Rt.log("onExpanded: "+e.index)},e.prototype.onGridViewCollapsing=function(t,e){return this._del.onCollapsing?this._del.onCollapsing(this._del,e.index):(Rt.log("onCollapsing: "+e.index),!0)},e.prototype.onGridViewCollapsed=function(t,e){this._del.onCollapsed?this._del.onCollapsed(this._del,e.index):Rt.log("onCollapsed: "+e.index)},e}(Wp),Yp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onTreeViewExpanding=function(t,e){return this._del.onTreeItemExpanding?this._del.onTreeItemExpanding(this._del,e.index,e.rowId):(Rt.log("TreeItem expanding: "+e),!0)},e.prototype.onTreeViewExpanded=function(t,e){this._del.onTreeItemExpanded?this._del.onTreeItemExpanded(this._del,e.index,e.rowId):Rt.log("TreeItem expanded: "+e)},e.prototype.onTreeViewCollapsing=function(t,e){return this._del.onTreeItemCollapsing?this._del.onTreeItemCollapsing(this._del,e.index,e.rowId):(Rt.log("TreeItem collapsing: "+e),!0)},e.prototype.onTreeViewCollapsed=function(t,e){this._del.onTreeItemCollapsed?this._del.onTreeItemCollapsed(this._del,e.index,e.rowId):Rt.log("TreeItem collapsed: "+e)},e.prototype.onTreeViewChanged=function(t,e){this._del.onTreeItemChanged?this._del.onTreeItemChanged(this._del,e.index,e.rowId):Rt.log("TreeItem item changed: "+e)},e}(Wp),zp=function(){function t(){}return t.getVersion=function(){return e.version},t.getLicenseType=function(){return e.license},t.getLicenseCode=function(){return e.code},t.getActiveGrid=function(){var t=Fh.getActiveGrid();return t&&t.handler},t.getGridInstance=function(t){var e=Fh.getGridInstance(t);return e&&e.handler},t.exportGrid=function(t){var e=t&&t.exportGrids;if(e){for(var i=this.getActiveGrid(),o=void 0,r=0;r<e.length;r++){var n=e[r].grid;if(n===i){o=n;break}o=o||n}if(o)return void o.exportGrid(t)}throw new Error("multiExport must have exportGrids.")},t.setDebug=function(t,e,i){Rt.setDebugging(t,e,i)},t.setMobile=function(t){Rt.setMobile(t)},t.setIECompatMode=function(t){Rt.setIECompatMode(t)},t.setTablet=function(t){Rt.setTablet(t)},t.setSlotMode=function(t){Rt.setSlotMode(t)},t.setLocale=function(t){Ye.setLocale(t),Fh.refreshGrids()},t.getLocale=function(){return Ye.getLocale()},t.setDefault=function(t,e){Xe.setDefaultOptions(t,e)},t.setLicenseKey=function(t){e.code=t},Object.defineProperty(t,"GridView",{get:function(){return Hp},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TreeView",{get:function(){return Gp},enumerable:!1,configurable:!0}),Object.defineProperty(t,"LocalDataProvider",{get:function(){return Po},enumerable:!1,configurable:!0}),Object.defineProperty(t,"LocalTreeDataProvider",{get:function(){return ko},enumerable:!1,configurable:!0}),t.registerCustomRenderer=function(t,e,i){Ku.registryCustomRenderer(t,e,i)},Object.defineProperty(t,"CustomCellRendererImpl",{get:function(){return fu},enumerable:!1,configurable:!0}),t.createGrid=function(t,e,i){var o=new Hp(t,null==e?void 0:e.accessibility,null==e?void 0:e.waiOptions),r=null==e?void 0:e.dataProvider,n=r||new Po(null==i?void 0:i.undoable);return o.setDataSource(n),e&&(o.setOptions(e),Rt.assignConfig(o,e),Rt.setEvent(o,e)),i&&!r&&(i.filters&&n.setFilters(i.filters),i.filterMode&&n.setFilterMode(i.filterMode),n.setOptions(i),i.fields&&n.setFields(i.fields),Rt.setEvent(n,i)),{gridView:o,dataProvider:n}},t.createTree=function(t,e,i){var o=new Gp(t),r=null==e?void 0:e.dataProvider,n=r||new ko;return o.setDataSource(n),e&&(o.setOptions(e),Rt.assignConfig(o,e),Rt.setEvent(o,e)),i&&!r&&(n.setOptions(i),i.fields&&n.setFields(i.fields),Rt.setEvent(n,i)),{treeView:o,dataProvider:n}},t}();t.PolygonShape=void 0,function(t){t.RECTANGLE="rectangle",t.TRIANLGE="triangle",t.INVERTED_TRIANLGE="itriangle",t.DIAMOND="diamond",t.UP_ARROW="uparrow",t.DOWN_ARROW="downarrow",t.LEFT_ARROW="leftarrow",t.RIGHT_ARROW="rightarrow",t.PLUS="plus",t.MINUS="minus",t.EQUAL="equal",t.STAR="star"}(t.PolygonShape||(t.PolygonShape={})),t.CustomCellRendererImpl=fu,t.DataProviderBase=Ro,t.GridBase=jp,t.GridView=Hp,t.LocalDataProvider=Po,t.LocalTreeDataProvider=ko,t.TreeView=Gp,t.VisualObject=dr,t.default=zp,Object.defineProperty(t,"__esModule",{value:!0})}));
